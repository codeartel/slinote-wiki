"use strict";var e=Object.freeze({__proto__:null,get COLUMN_DEFAULT_SIZE(){return Gse},get ROW_DEFAULT_SIZE(){return Kse},get SheetChange(){return yIe},get SheetContext(){return hIe},get SheetDispatch(){return fIe},get SheetEditorPointerDown(){return vIe},get SheetFocusStatus(){return gIe},get SheetNextTick(){return pIe},get SheetPaste(){return bIe},get SheetProxy(){return mIe},get block(){return WNe},get border(){return PIe},get calcSheetRect(){return ZEe},get clearEditorSelection(){return yDe},get copy(){return cIe},get createCellState(){return mce},get createEditorState(){return yce},get createEditorStyle(){return gce},get createSheetNode(){return vce},get createSheetState(){return bce},get crossEditorActions(){return DDe},get crossEditorRefresh(){return NDe},get crossSheetActions(){return IDe},get cut(){return sIe},get default(){return $Ne},get deleteColumn(){return tIe},get deleteRow(){return eIe},get deleteSheet(){return rIe},get deriveSheetState(){return nke},get disableSelectedCoordinatesSelection(){return gse},get exportSheetStyle(){return KEe},get exportStyleValue(){return GEe},get fillColor(){return zIe},get focusEnd(){return zke},get focusSheet(){return $ke},get focusSheetEnd(){return Uke},get focusSheetStart(){return Zke},get focusStart(){return Vke},get generateSheetContext(){return QEe},get getMaxCellSize(){return rce},get getMinRowSize(){return lce},get getSelfCellSize(){return ice},get icon(){return dIe},get initDefaultCell(){return sce},get insertBottom(){return XDe},get insertLeft(){return JDe},get insertRight(){return QDe},get insertSheet(){return HDe},get insertTop(){return GDe},get isEmptyEditorState(){return qEe},get isMetaSheetNode(){return ece},get isSheetNode(){return Qse},get isSingleSelected(){return ake},get keyboardEventEditorMoveAction(){return BDe},get keyboardEventSheetMoveAction(){return LDe},get keys(){return aIe},get merge(){return GIe},get mergeEditorStyle(){return cce},get mergeSheet(){return sse},get name(){return Yse},get onlyMetaNode(){return JEe},get paste(){return lIe},get pasteToSheetFromClipboard(){return Eke},get portalStyle(){return YEe},get produceCellEditor(){return XEe},get recoverSelectedCoordinatesSelection(){return mse},get redactionSheetState(){return lse},get reduceSheetState(){return UEe},get reflowEditorSelection(){return mDe},get refreshCEditor(){return Dke},get refreshIndicatorRange(){return qke},get refreshSheetEditor(){return wse},get removeCellEditorReference(){return Dse},get removeSelectedCoordinatesSelection(){return vse},get resetCellState(){return yse},get resetToolsActive(){return Ale},get selectAll(){return iIe},get selectColumn(){return oIe},get selectRow(){return nIe},get setCellEditorPending(){return xse},get setCellEditorRefresh(){return Sse},get setCellEditorSelectionFrozen(){return Ese},get setCellEditorSelectionReflow(){return kse},get setCellEditorStyle(){return Ise},get setCellFocus(){return Wke},get setCellSize(){return dse},get setEditorActions(){return EDe},get setEditorFocus(){return pse},get setSheet(){return KDe},get setSheetActions(){return kDe},get setSheetGfocus(){return SDe},get setSheetState(){return gDe},get setToolsActive(){return Mle},get shouldFocusEditor(){return cke},get sliceSheetState(){return tke},get syncCEditorKey(){return qse},get syncCEditorSize(){return Use},get syncCellSize(){return use},get syncCellState(){return cse},get syncCellStyle(){return ase},get syncClientHeight(){return bse},get syncEditorSize(){return Zse},get syncEmptySheet(){return Vse},get syncRowSize(){return hse},get syncRowState(){return fse},get syncSelectionBackward(){return wDe},get syncSelectionForward(){return xDe},get syncSheetProvider(){return CDe},get syncSheetReflow(){return $se},get syncSheetScroll(){return zse},get syncSheetSize(){return Cse},get syncSheetState(){return Wse},get syncSheetStyle(){return bDe},get toggleToolsActive(){return Tle},get traverseESheet(){return eke},get unicode(){return eNe},get updateEditorState(){return vDe},get vertical(){return sNe},get writeSheetToClipboard(){return ike}}),t=Object.freeze({__proto__:null,get AGENT_TYPE(){return SFe},get ASSETS(){return x$},get ASSETS_URL(){return L$},get BASE(){return C$},get BOOTSTRAP_URL(){return D$},get BaseEditor(){return zK},get BatchCatalogs(){return xK},get CATALOG(){return S$},get CATALOG_INDEX_URL(){return A$},get CATALOG_URL(){return B$},get CHANGELOG_URL(){return I$},get CLIPBOARD_COMMAND(){return y$},get COLOR_UPDATE(){return R$},get Clear(){return a2},get EDITOR(){return w$},get EDITOR_MAX_SIZE(){return g$},get EDITOR_URL(){return N$},get Editor(){return _K},get EditorAgent(){return OU},get EditorContext(){return MU},get EditorDispatch(){return AU},get EditorImperator(){return TU},get FILE_SIZE(){return p$},get FOCUS_FIELD(){return f$},get FOCUS_SPLIT_TAG(){return h$},get File(){return g2},get Float(){return O2},get FontSizeReader(){return Q5},get Input(){return T2},get Layout(){return b2},get MIN_FLOAT_SIZE(){return v$},get MOBILE_FILE_CONTENT(){return u$},get MOBILE_FILE_SCROLLBAR(){return d$},get MOBILE_FILE_STICKY(){return a$},get MOBILE_FILE_TREE(){return c$},get Main(){return S2},get MobileEditor(){return WK},get MobileFile(){return y2},get MobileRename(){return f2},get Modal(){return x2},get Moving(){return h2},get OFFSET_TOP(){return r$},get ONE(){return mUe},get PATH_FILL(){return gUe},get PCEditor(){return jK},get PCFile(){return m2},get PCRename(){return d2},get Profile(){return R2},get QRCODE_SECRET_KEY(){return s$},get REFERENCE(){return E$},get REFERENCE_INDEX_URL(){return O$},get REFERENCE_URL(){return M$},get ReadOnlyTools(){return w2},get Reader(){return X5},get ReaderFetch(){return J5},get Rename(){return u2},get Replace(){return c2},get RootAdvisor(){return NU},get RootDispatch(){return EU},get RootImperator(){return BU},get RootPortal(){return DU},get RootProps(){return xU},get RootState(){return SU},get RootThreshold(){return IU},get RootTraversal(){return kU},get RootWorker(){return LU},get SAFARI_MODAL_VISIBLE(){return b$},get SDB(){return GUe},get SEGMENT(){return k$},get SEGMENT_THRESHOLD(){return m$},get SEGMENT_URL(){return T$},get Search(){return s2},get SearchContext(){return FU},get SearchDispatch(){return PU},get SearchWorkerScheduler(){return eWe},get SegmentCompressionScheduler(){return Jje},get SegmentDecompressionScheduler(){return Qje},get SyncEditorDataIdle(){return RU},get TWO(){return yUe},get ToolBar(){return C2},get ToolsImperator(){return HU},get WebDav(){return e3},get WebDavQRCode(){return n3},get WebDavStatusIcon(){return t3},get addAuthDelete(){return zq},get addFlush(){return V4},get addPageFileBranch(){return $6},get addStoreCatalog(){return sq},get addStoreEditor(){return cq},get addStoreReference(){return lq},get adjustFileScrollTop(){return v6},get adjustFloatState(){return kee},get adjustKeyboardScrollTop(){return g6},get afterFlush(){return U4},get align(){return yLe},get anchorBranchEditor(){return J3},get anchorEditorByBranch(){return fte},get anchorEditorByPageId(){return ute},get anchorEditorByProgress(){return hte},get anchorEditorBySelection(){return dte},get anchorGuide(){return rre},get assignFileBranchProps(){return s6},get assignFileCloud(){return a8},get assignWebDavItem(){return tle},get bold(){return qNe},get bootstrapMisplace(){return x$e},get bulleted(){return _Be},get calcBlockSize(){return AFe},get calcBranchDot(){return aje},get calcBranchIntoView(){return cje},get calcDataSelection(){return hPe},get calcDiff(){return nqe},get calcEditorBounds(){return v_},get calcEditorThreshold(){return yFe},get calcEndBoundSlice(){return m_},get calcFileDelete(){return fVe},get calcGuideOneArrowScale(){return bUe},get calcGuideTwoArrowScale(){return CUe},get calcInputLocation(){return $ze},get calcOptionsSize(){return iqe},get calcScrollHeightByTree(){return hje},get calcStartBoundSlice(){return g_},get calcStartPathByData(){return yPe},get calcWebDavNoteSpaceHeight(){return KUe},get check(){return YTe},get checkBranch(){return S6},get checkFileDelete(){return hVe},get checkReference(){return R6},get checkWebDavUpdate(){return B5},get clearAgentActions(){return y7},get clearAgentPropagation(){return p7},get clearAuthDelete(){return $q},get clearBranchRemoved(){return eee},get clearCursor(){return ale},get clearEditorCollapsedSelection(){return H9},get clearEditorHighlight(){return V9},get clearEditorSelection(){return P9},get clearExtraStore(){return tq},get clearExtraUndoRedo(){return nq},get clearFileBranchDrag(){return i6},get clearFileCloud(){return d8},get clearFileCloudBind(){return f8},get clearFileTreeStatus(){return e6},get clearFlush(){return Z4},get clearFormat(){return sBe},get clearGFocus(){return c4},get clearModal(){return sre},get clearProvider(){return l3},get clearProviderCollapsedSelection(){return c3},get clearProviderSelection(){return s3},get clearReplaceResult(){return dee},get clearSearchResult(){return J7},get clearStoreCURD(){return oq},get clearStoreCatalog(){return Tq},get clearStoreCreate(){return Fq},get clearStoreDelete(){return Oq},get clearStoreRecord(){return uq},get clearStoreUpdate(){return jq},get clearWebDavItem(){return Qre},get clearWebDavSelectedIncloud(){return lle},get cloneCompositionEvent(){return Uze},get cloneInputEvent(){return Zze},get cloneWebDavItem(){return $Ue},get code(){return cAe},get collapsedFileBranch(){return f6},get collapsedFileBranchDrag(){return r6},get collectBranchNote(){return ije},get collectStoreCatalog(){return Aje},get collectStoreEditor(){return Oje},get collectStoreNote(){return Tje},get collectStorePageIds(){return Rje},get collectStoreReference(){return Mje},get common(){return Mxe},get completeStoreEditor(){return vq},get concatFocus(){return IHe},get consumeAgentActions(){return m7},get createContextEditor(){return jUe},get createEditorFocus(){return UFe},get createEditorState(){return vFe},get createEmojiFocus(){return iHe},get createEmptyNode(){return CPe},get createEntryNode(){return wPe},get createFileFocus(){return qFe},get createLinkFocus(){return tHe},get createNodeFocus(){return GFe},get createNoneFocus(){return ZFe},get createOptionFocus(){return oHe},get createOutlineFocus(){return JFe},get createPage(){return qZe},get createPanelFocus(){return QFe},get createReferFocus(){return eHe},get createReferenceEditor(){return gFe},get createRoot(){return UZe},get createSelectorFocus(){return nHe},get createSheetFocus(){return KFe},get createSlashFocus(){return rHe},get createToggleFocus(){return XFe},get createToolBarFocus(){return YFe},get createWebDavItem(){return VUe},get createWebDavModes(){return ZUe},get crossSheetByFocus(){return ZHe},get crossStateByFocus(){return $He},get deactivateFileBranch(){return j3},get decreaseFileScrollHeight(){return x6},get decreaseIndent(){return GLe},get decreaseStoreEditor(){return bq},get decreaseStoreEditorHighlights(){return Cq},get decreaseStoreReference(){return kq},get decreaseWebDavItem(){return Xre},get deleteChangelog(){return zU},get deleteChangelogRecord(){return ZU},get deleteCurrentPageId(){return A6},get deleteEditorUids(){return z9},get deleteFileBranch(){return F4},get deleteFileBranchSlience(){return H4},get deleteFileFloat(){return v8},get deleteNote(){return M7},get deleteRecordChangelog(){return w5},get deleteStore(){return NY},get deleteStoreAssets(){return AY},get deleteStoreCatalog(){return LY},get deleteStoreEditor(){return TY},get deleteStoreReference(){return BY},get deleteWebDavCatalog(){return f5},get deleteWebDavEditor(){return h5},get deleteWebDavNote(){return u5},get deleteWebDavReferenceWithAssets(){return d5},get destoryNode(){return i4},get destructFocus(){return HHe},get destructOutlineFocus(){return jHe},get destructToggleFocus(){return _He},get diffCatalog(){return QUe},get diffChangelog(){return JUe},get diffEditorUids(){return bFe},get diffReference(){return eqe},get downloadApplication(){return oUe},get downloadHTML(){return nUe},get downloadJSON(){return QZe},get downloadJSONHybrid(){return eUe},get downloadMarkdown(){return tUe},get dropNodeFocus(){return AHe},get dropPanelFocus(){return BHe},get dropRightFocus(){return LHe},get dropSheetFocus(){return THe},get duplicateFileBranch(){return W4},get duplicateFileBranchSlience(){return z4},get duplicateNote(){return B7},get duplicateWebDavItem(){return Jre},get emoji(){return Ohe},get entry(){return l$},get excludeFocus(){return NHe},get excludeStoreCreate(){return Pq},get excludeStoreDelete(){return Mq},get excludeStoreUpdate(){return _q},get expandBranchEditor(){return Q3},get expandFileBranch(){return h6},get expandNodeByFocus(){return UHe},get expandStoreEditorData(){return Wq},get exportApplication(){return D7},get exportEditorStyle(){return MPe},get exportHTML(){return I7},get exportJSON(){return E7},get exportMarkdown(){return k7},get exportPDF(){return N7},get exportStyleValue(){return n$},get exportWebDavQRCode(){return YUe},get extractDecorateNode(){return dUe},get extractPageIds(){return LPe},get extractPanelFocus(){return FHe},get extractReference(){return jPe},get fetchBranch(){return cK},get fetchBranchChildren(){return aK},get fetchBranchSource(){return uK},get fetchChangelog(){return K2},get fetchFeedback(){return G2},get fetchHelper(){return Y2},get fetchPlan(){return X2},get fetchPricing(){return J2},get fetchPrivacyPolicy(){return A5},get fetchUserAgreement(){return T5},get fetchWebDAVTourist(){return M5},get filterBindCloud(){return UUe},get filterWebDavItem(){return qUe},get flatBranch(){return U_e},get flushStoreReference(){return wq},get focusEditorEnd(){return W9},get focusEditorStart(){return j9},get focusSelectionEditor(){return pte},get fontSize(){return XNe},get fullBranch(){return q_e},get genID(){return pRe},get genNextEditBlockNode(){return pPe},get genPrevEditBlockNode(){return vPe},get generateAnchorEditorState(){return B$e},get generateBlockTree(){return _We},get generateBranchHighlights(){return Gje},get generateCreator(){return Dze},get generateFileDeleteModal(){return b$e},get generateFileOptions(){return Sje},get generateHTMLTemplate(){return HZe},get generateHighlightStyle(){return Yje},get generateInfiniteEditorState(){return T$e},get generateKnowledgeTemplate(){return _Ze},get generateMarkdownKit(){return Ize},get generateReviewTree(){return QWe},get generateRootDeleteModal(){return C$e},get generateSearchFocus(){return qHe},get generateSearchTree(){return HWe},get generateSearchTreeSlowly(){return FWe},get genetateMobileOptions(){return Eje},get getBranchByID(){return Y_e},get getBranchNodes(){return oje},get getDefaultStyle(){return APe},get getEditorClientHeight(){return BFe},get getEditorClientWidth(){return LFe},get getFileClientHeight(){return TFe},get getFileScrollOffset(){return xje},get getFloatBranch(){return sje},get getFlushEditor(){return mFe},get getFocusDepth(){return RHe},get getGeneralImageExt(){return R$e},get getGeneralImageMime(){return O$e},get getLocalBootStrap(){return RVe},get getLocalChangelog(){return qVe},get getLocalFeedback(){return KVe},get getLocalGuideStep(){return s$e},get getLocalHelper(){return _Ve},get getLocalHelperSlim(){return WVe},get getLocalNoteInnerHtml(){return h$e},get getLocalNoteLocation(){return u$e},get getLocalPlan(){return t$e},get getLocalPlanSlim(){return r$e},get getLocalPricing(){return XVe},get getLocalPricingSlim(){return QVe},get getLocalPrivacyPolicy(){return ZVe},get getLocalRecentlyReview(){return FVe},get getLocalUserAgreement(){return VVe},get getLocalWebDAV(){return o$e},get getNextBranch(){return J_e},get getNextLevelBranch(){return G_e},get getNodeByFocus(){return WHe},get getPageableBranch(){return rje},get getParentBranchByID(){return K_e},get getPrevBranch(){return Q_e},get getPrevLevelBranch(){return X_e},get getResultRecord(){return CK},get getSaftyBranch(){return dje},get getSelectionTitleNode(){return wFe},get getSheetByFocus(){return VHe},get getStartBlockNode(){return bPe},get getStateByFocus(){return zHe},get getWebDavBootstrap(){return Q2},get getWebDavChangelog(){return e5},get getWebDavSDBData(){return n5},get getWebDavSDBIndex(){return t5},get highlightColour(){return pLe},get hotkeys(){return XHe},get i18n(){return MK},get image(){return sve},get importHTML(){return S7},get importMarkdown(){return Xie},get importNode(){return o4},get importNote(){return Yie},get importOutlineToPage(){return Gie},get importPDF(){return x7},get importPage(){return n4},get importPageToPage(){return Kie},get increaseFileScrollHeight(){return w6},get increaseIndent(){return OLe},get increaseStoreEditor(){return yq},get increaseStoreReference(){return Sq},get increaseWebDavItem(){return Gre},get increaseWebDavSyncTransitionCount(){return rle},get initBranchStore(){return O4},get initChangeActions(){return tqe},get initClientState(){return Cqe},get initData(){return cPe},get initEditorClient(){return wqe},get initFileFloat(){return Bqe},get initFileState(){return Sqe},get initGuide(){return pre},get initMovingState(){return Dqe},get initMovingTreeState(){return Iqe},get initPresetEditor(){return A4},get initPresetStore(){return M4},get initPresetTree(){return T4},get initReader(){return yqe},get initRenameState(){return qje},get initSearchResult(){return Eqe},get initSearchState(){return kqe},get initState(){return mqe},get initStore(){return xqe},get initToolBarState(){return bqe},get initUndoRedoStack(){return v4},get initUndoRedoState(){return Nqe},get initWebDavState(){return Lqe},get injectAbout(){return cre},get injectBootstrap(){return rK},get injectChangelog(){return lK},get injectEditor(){return dK},get injectEditorReference(){return xFe},get injectFeedback(){return are},get injectFile(){return sK},get injectHelper(){return ire},get injectPlan(){return dre},get injectPricing(){return ure},get injectReference(){return mPe},get injectReplaceResult(){return uee},get inputStoreReference(){return xq},get insertConfirm(){return w$e},get insertEditorNodes(){return J9},get insertFileBranch(){return K3},get insertNote(){return ere},get insertNoteSpace(){return nre},get installNode(){return t4},get installNote(){return Qie},get installPage(){return e4},get isAssetsReference(){return HPe},get isBlockQuoteSyntax(){return BUe},get isBoldItalicSyntax(){return RUe},get isBoldSyntax(){return MUe},get isCatalogEqual(){return pUe},get isCollapsibleFocusInclude(){return EHe},get isDecorateBlockNodeSelection(){return fUe},get isDelete(){return l_e},get isDeleteBackward(){return m_e},get isDeleteForward(){return y_e},get isDeleteLineBackward(){return b_e},get isDeleteLineForward(){return C_e},get isDeleteWordBackward(){return w_e},get isDeleteWordForward(){return x_e},get isDuplicate(){return o_e},get isEditorFocus(){return aHe},get isEntryNode(){return xPe},get isExpandBackward(){return h_e},get isExpandForward(){return p_e},get isExpandLineBackward(){return v_e},get isExpandLineForward(){return g_e},get isExport(){return n_e},get isFileFocus(){return uHe},get isFocusInclude(){return bHe},get isFocusSheet(){return DHe},get isHeadingSyntax(){return LUe},get isHighlightNode(){return Xje},get isImport(){return t_e},get isItalicSyntax(){return OUe},get isLatestEntryNode(){return SPe},get isLinkFocus(){return pHe},get isListSyntax(){return TUe},get isMove(){return i_e},get isMoveDown(){return c_e},get isMoveLineBackward(){return d_e},get isMoveLineForward(){return f_e},get isMoveUp(){return s_e},get isMoveWordBackward(){return a_e},get isMoveWordForward(){return u_e},get isNew(){return JHe},get isNodeFocus(){return cHe},get isNoneFocus(){return lHe},get isOffPage(){return e_e},get isOptionFocus(){return gHe},get isOutlineFocus(){return yHe},get isOutlineFocusInclude(){return SHe},get isPaging(){return QHe},get isPanelFocus(){return fHe},get isPanelFocusInclude(){return CHe},get isPureReferenceEditor(){return WPe},get isReadOnlyBranch(){return lje},get isReadonlyFile(){return wje},get isReferFocus(){return hHe},get isRename(){return r_e},get isReplaceNode(){return jWe},get isResultEmpty(){return WWe},get isRootEditorFocus(){return kHe},get isSelectorFocus(){return vHe},get isSeparatorSyntax(){return AUe},get isSheetFocus(){return sHe},get isSheetFocusInclude(){return wHe},get isSlash(){return S_e},get isStaticEditState(){return k$e},get isStaticState(){return E$e},get isStrikeThroughSyntax(){return PUe},get isStrikeUnderlineSyntax(){return FUe},get isTitleReference(){return FPe},get isToggleFocus(){return mHe},get isToggleFocusInclude(){return xHe},get isToolActive(){return o$},get isToolBarFocus(){return dHe},get isUnsaftyBranch(){return uje},get isWriterKeyBorad(){return aVe},get italic(){return eLe},get joinUID(){return yRe},get keys(){return AK},get lastFocus(){return PHe},get letterSpacing(){return XTe},get limitWidth(){return MFe},get lineHeight(){return oBe},get link(){return Nde},get loadNote(){return ore},get locFileBranch(){return q3},get locateFloatState(){return Bee},get mapEditorStateToEditState(){return pFe},get mapEditorToStoreEditor(){return Lje},get mapFileStateToEditState(){return bje},get mapFloatBranchToFloatState(){return Cje},get mergeAuthDelete(){return Vq},get mergeEditorReference(){return D9},get mergeFileFloat(){return p8},get mergeFileState(){return B6},get mergeFloatState(){return Tee},get mergeSearchResult(){return tee},get mergeStore(){return rq},get mergeStoreCRUD(){return fq},get mergeStoreCatalog(){return Lq},get mergeStoreCreate(){return Rq},get mergeStoreDelete(){return Aq},get mergeStoreEditor(){return gq},get mergeStoreEditorData(){return mq},get mergeStoreRecord(){return aq},get mergeStoreReference(){return Dq},get mergeStoreSafty(){return Bje},get mergeStoreUpdate(){return Hq},get mergeTextDecoration(){return t$},get mergeUndoRedoStack(){return m4},get moveFileBranch(){return X4},get moveNode(){return r4},get moveNote(){return T7},get newNote(){return L7},get newOutlineFileBranch(){return z6},get newPageFileBranch(){return V6},get numbered(){return QBe},get outline(){return hye},get paintFormat(){return fBe},get parseClipboardPayload(){return zze},get parseFocus(){return OHe},get pasteFromClipboard(){return zie},get preprocessMarkdownImage(){return HUe},get preset(){return B4},get pullWebDavAssets(){return N5},get pullWebDavCatalog(){return D5},get pullWebDavEditor(){return k5},get pullWebDavReference(){return I5},get pushFileBranch(){return Y3},get pushWebDavAssets(){return a5},get pushWebDavCatalog(){return s5},get pushWebDavEditor(){return l5},get pushWebDavReference(){return c5},get putWebDavBootstrap(){return o5},get putWebDavChangelog(){return i5},get quote(){return kfe},get readCatalog(){return OY},get readCatalogs(){return RY},get readCatalogsRecursion(){return PY},get readEditor(){return MY},get readFromClipboard(){return jze},get readReference(){return HY},get readReferences(){return FY},get readStore(){return _Y},get readonly(){return fAe},get readonlyFileBranch(){return p6},get recordBootstrap(){return ZY},get recordBranch(){return Z_e},get recordChangelog(){return UY},get recordEditor(){return GY},get recordEditorCreative(){return XY},get recordStore(){return $Y},get recordStoreCatalog(){return YY},get recordStoreEditor(){return qY},get recordStoreReference(){return KY},get recoverChangelog(){return VU},get recoverFileBranchDrag(){return l6},get recycleMemory(){return _re},get redo(){return yle},get redoEditorState(){return x4},get reduceBranch(){return pje},get reduceBranchState(){return eje},get reduceEditorReference(){return I9},get reduceNode(){return GHe},get reduceStartPoint(){return NUe},get reduceUndoRedoStore(){return dVe},get refer(){return Mpe},get refreshEditorReference(){return k9},get refreshFileBranch(){return V3},get refreshGFocus(){return a4},get reloadEditor(){return X9},get removeEditorLocation(){return F9},get removeEditorScrollProgress(){return x9},get removeFileBranch(){return W3},get removeFileBranchProps(){return c6},get removeFileCloud(){return c8},get removeFlush(){return $4},get removeLocalNoteInnerHtml(){return f$e},get removeLocalNoteLocation(){return a$e},get removeResultBranch(){return see},get removeStoreCatalog(){return Bq},get removeStoreEditor(){return Zq},get removeStoreReference(){return Eq},get renameFileBranch(){return l8},get renameNote(){return A7},get renderEditorElement(){return Kze},get renderFileElement(){return Xze},get renderFontSizeElement(){return Jze},get renderInlineElement(){return Gze},get replaceBranch(){return ete},get replaceContent(){return Qee},get replaceFileBranch(){return a6},get replaceMovingResult(){return Cee},get replaceNote(){return tre},get replayEditorState(){return S4},get resetChangelog(){return _U},get resetFileTreePath(){return y6},get resetFlushEditor(){return G9},get resetMovingResult(){return yee},get resetToolsActive(){return f7},get resetWebDav(){return Zre},get resizeClient(){return s7},get resizeEditor(){return r7},get resizeFile(){return l7},get resizeFloatState(){return Aee},get saftyCatalog(){return vUe},get saftyChangelog(){return jU},get saftyDirectory(){return L5},get saftyEditorBounds(){return d9},get saftyFileBranch(){return $3},get saftyFileState(){return L6},get saftyInitUndoRedoStack(){return g4},get saftyMergeStore(){return iq},get saftyMergeUndoRedoStack(){return y4},get saftyRootBranch(){return z3},get saftyStorage(){return bK},get saftyStoreCRUD(){return dq},get scrollToBranchById(){return E6},get scrollToLastBranch(){return k6},get searchMovingResult(){return wee},get searchNextBlockNodePath(){return fPe},get searchNextNodePath(){return aPe},get searchPrevBlockNodePath(){return dPe},get searchPrevNodePath(){return uPe},get searchTextFromNode(){return RWe},get selectionEditorEnd(){return Q9},get selectionOverlap(){return CFe},get separator(){return ohe},get setAgentPropagation(){return h7},get setBootstrap(){return fre},get setBranchRemoved(){return Q7},get setChangelogRecord(){return $U},get setCurrentPageId(){return T6},get setCursor(){return cle},get setDeleteChangelog(){return x5},get setEditorActions(){return s9},get setEditorBounds(){return c9},get setEditorBoundsReset(){return a9},get setEditorClient(){return A9},get setEditorData(){return L9},get setEditorFormatPaint(){return b9},get setEditorGHighlights(){return M9},get setEditorPastePending(){return u9},get setEditorPending(){return v9},get setEditorRefresh(){return g9},get setEditorReload(){return y9},get setEditorScrollOffset(){return T9},get setEditorScrollProgress(){return w9},get setEditorScrollTouchReset(){return C9},get setEditorSelection(){return O9},get setEditorSelectionReflow(){return R9},get setEditorSlicer(){return m9},get setEditorState(){return l9},get setEditorStatus(){return N9},get setEditorThreshold(){return B9},get setEditorUids(){return _9},get setFileBranch(){return _3},get setFileBranchDrag(){return o6},get setFileBranchMoreMoving(){return t6},get setFileBranchRename(){return n6},get setFileCloud(){return s8},get setFileCloudTimer(){return u8},get setFileEditPending(){return H3},get setFileFloat(){return h8},get setFileReadonly(){return g8},get setFileScrollActive(){return m6},get setFileTransition(){return O6},get setFileTreeNoDraft(){return Wre},get setFileVisible(){return M6},get setFloatFully(){return Lee},get setFloatId(){return Nee},get setFloatMoving(){return Iee},get setFloatNoDraft(){return Oee},get setFloatRefresh(){return Dee},get setFocusEditorPending(){return K9},get setGFocus(){return s4},get setGFocusSelectionReflow(){return u4},get setGuide(){return hre},get setLocalBootStrap(){return OVe},get setLocalChangelog(){return UVe},get setLocalFeedback(){return YVe},get setLocalGuideStep(){return l$e},get setLocalHelper(){return HVe},get setLocalHelperSlim(){return jVe},get setLocalNoteInnerHtml(){return d$e},get setLocalNoteLocation(){return c$e},get setLocalPlan(){return e$e},get setLocalPlanSlim(){return i$e},get setLocalPricing(){return GVe},get setLocalPricingSlim(){return JVe},get setLocalPrivacyPolicy(){return $Ve},get setLocalRecentlyReview(){return PVe},get setLocalUpdateChangelog(){return b5},get setLocalUserAgreement(){return zVe},get setLocalWebDAV(){return n$e},get setModal(){return lre},get setMovingText(){return gee},get setNoDraft(){return jre},get setProvider(){return r3},get setRecordChangelog(){return C5},get setRemoteUpdateChangelog(){return y5},get setReplaceComposition(){return G7},get setReplaceText(){return q7},get setResearch(){return Y7},get setResultBranch(){return lee},get setResultHeight(){return ree},get setResultWidth(){return iee},get setSearchComposition(){return K7},get setSearchPercent(){return U7},get setSearchText(){return Z7},get setStoreCatalog(){return Nq},get setStoreEditor(){return hq},get setStorePending(){return eq},get setToolBarRefresh(){return c7},get setToolBarResize(){return a7},get setToolsActive(){return d7},get setWebDavBootStrap(){return nle},get setWebDavModal(){return ole},get setWebDavPrevent(){return $re},get setWebDavStatusMessage(){return ile},get setWebDavVisible(){return Vre},get shadowCloneRecordState(){return S$e},get sheet(){return e},get shouldCompleteStoreEditor(){return Fje},get shouldUpdateStoreReference(){return Pje},get slash(){return sRe},get sliceAfterPoint(){return TPe},get sliceBeforePoint(){return BPe},get sliceChangeState(){return oqe},get sliceNodeBySelection(){return DPe},get sliceNodeStyleBySelection(){return PWe},get sliceNoteDown(){return KZe},get sliceNoteLocation(){return YZe},get sliceReplaceText(){return zWe},get sliceResizeNode(){return kPe},get sliceStoreEditNode(){return gPe},get sliceTools(){return i$},get spliceNode(){return VWe},get splitTextNode(){return Vze},get storeNoteLost(){return wK},get strikeThrough(){return cLe},get strikeUnderline(){return iLe},get stringifyEditorSharding(){return _Ue},get stringifyFocus(){return MHe},get subscribeAgentActions(){return v7},get switchBranchEditor(){return X3},get syncDeleteChangelog(){return m5},get syncEditStateReference(){return U9},get syncEditorBranch(){return U3},get syncEditorChangeState(){return S5},get syncEditorCreateTime(){return f9},get syncEditorCursorStyle(){return $9},get syncEditorData(){return q9},get syncEditorReadTime(){return h9},get syncEditorReference(){return E9},get syncEditorState(){return r9},get syncEditorUids(){return Z9},get syncEditorUndoRedo(){return b4},get syncEditorUpdateTime(){return p9},get syncFileBranch(){return Z3},get syncFileClientHeight(){return C6},get syncFileScrollHeight(){return b6},get syncFileState(){return N6},get syncLocalReferenceState(){return E5},get syncMomentUndoRedo(){return C4},get syncMovingResult(){return mee},get syncNearlyEditorScrollTouch(){return S9},get syncPullChangelog(){return g5},get syncPushChangelog(){return v5},get syncResultCount(){return cee},get syncResultScrollHeight(){return aee},get syncSearchResult(){return nee},get syncSearchTitle(){return X7},get syncStoreCatalog(){return Iq},get syncWebDavNote(){return p5},get syncWebDavStatus(){return sle},get textColor(){return dLe},get toggle(){return xEe},get toggleFileBranch(){return u6},get toggleFileBranchMore(){return d6},get toggleFloatState(){return Mee},get toggleMovingResult(){return bee},get toggleResultExpand(){return oee},get toggleToolsActive(){return u7},get toggleWebDavBind(){return ele},get toggleWebDavModeVisible(){return Kre},get toggleWebDavPasswordVisible(){return qre},get toggleWebDavSelectorVisible(){return Yre},get toggleWebDavUsernameVisible(){return Ure},get transformBootStrap(){return zUe},get transformBranchToCatalog(){return nje},get transformBranchToNode(){return $_e},get transformCatalogToBranch(){return tje},get transformFontSizeNode(){return EPe},get transformHtmlFragment(){return kze},get transformMarkdown(){return Eze},get transformMarkdownToBold(){return Ore},get transformMarkdownToBoldItalic(){return Pre},get transformMarkdownToInline(){return Mre},get transformMarkdownToItalic(){return Rre},get transformMarkdownToList(){return Tre},get transformMarkdownToOutline(){return Lre},get transformMarkdownToQuote(){return Bre},get transformMarkdownToSeparator(){return Are},get transformMarkdownToStrikeThrough(){return Fre},get transformMarkdownToStrikeUnderline(){return Hre},get transformNodeToBranch(){return V_e},get transformNodeToText(){return OWe},get transformNoteDown(){return GZe},get transformReferenceToNode(){return _Pe},get transformSelection(){return Kje},get transformToChangeRemote(){return XUe},get transformUID(){return mRe},get traverseData(){return IPe},get traverseEditor(){return NPe},get undo(){return ple},get undoCRUD(){return uVe},get undoEditorState(){return w4},get unsubscribeAgentActions(){return g7},get updateBlockNodeBranch(){return fee},get updateChangelog(){return WU},get updateEditorStateData(){return Y9},get updateFileBranch(){return G3},get updateStoreEditor(){return pq},get useAdvisor(){return V5},get useBranchRender(){return W2},get useEditorBounds(){return FK},get useEditorKeyboardEvents(){return kY},get useEditorReference(){return HK},get useEffects(){return OK},get useFileDrag(){return IK},get useFileEvents(){return DK},get useFileHotkey(){return NK},get useFileInputs(){return z5},get useFileRefs(){return PK},get useFloatEvents(){return BK},get useFloatRender(){return z2},get useFlushEditor(){return $2},get useImperator(){return IY},get useLayoutEvents(){return DY},get useMainEvents(){return LK},get useMobileEditorEvents(){return EY},get usePCEditorEvents(){return SY},get useProfileEvents(){return TK},get useReaderEffects(){return RK},get useReplacer(){return q2},get useSearchRender(){return V2},get useSearcher(){return U2},get useStore(){return j5},get useThreshold(){return Z2},get useTraversal(){return Z5},get useWebDavDelete(){return F5},get useWebDavEvents(){return R5},get useWebDavSync(){return P5},get useWebDavTimer(){return _5},get useWebDavUpdates(){return H5},get useWorker(){return W5},get writeToClipboard(){return _ze}});const n=Symbol.for("ruset"),o=Symbol.for("ruset.forward_ref"),i=Symbol.for("ruset.context"),r=Symbol.for("ruset.portal"),l=Symbol.for("ruset.event"),s=Array.isArray;function c(e){const t=typeof e;return"string"===t||"number"===t}function a(e){return null==e}function u(e){return null===e||!1===e||!0===e||void 0===e}function d(e){return"function"==typeof e}function f(e){return"string"==typeof e}function h(e){return"number"==typeof e}function p(e){return(null==e?void 0:e.symbol)===n}function v(e){return(null==e?void 0:e.type)===r}function g(){}function m(e,t){const n=c(e),o=c(t);return!(!n||!o)||!n&&!o&&(e.type===t.type&&e.key===t.key)}function y(e,t){return p(e)?void 0===e.key?e.type:`~${e.key}`:c(e)?`${t}-${e}`:""}const b=/\B([A-Z])/g,C=(e=>{const t=Object.create(null);return n=>{const o=t[n];return null!=o?o:t[n]=e(n)}})((e=>{const t=e.replace(b,"-$1").toLowerCase();return t.startsWith("webkit")||t.startsWith("ms")||t.startsWith("moz")?`-${t}`:t})),w=/["'&<>]/;function x(e){if(!w.test(e))return e;let t,n="",o="",i=0;for(t=0;t<e.length;++t){switch(e.charCodeAt(t)){case 34:o="&quot;";break;case 39:o="&#039;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}t>i&&(n+=e.slice(i,t)),n+=o,i=t+1}return n+e.slice(i,t)}const S={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function E(e){let t="";for(const n in e){const o=e[n];!S[n]&&h(o)?t+=`${C(n)}:${o}px;`:o&&(t+=`${C(n)}:${o};`)}return t}const k=Promise.resolve(),D=k.then.bind(k);function I(e,t){return!s(e)||!s(t)||t.some(((t,n)=>t!==e[n]))}function N(e){const t=B.states;return void 0===t[e]&&(t[e]={}),t[e]}function L(){return{index:0,depth:0,states:[],effects:[],layoutEffects:[],order:[],loading:!1,ssr:!1,thrust:new Map,render:g}}const B=L();const T={pending:!1,count:0,timer:-1,queue:[],perform:e=>{B.ssr||(T.pending||(T.pending=!0,D(T.consume).catch((e=>{throw T.queue.length=0,new Error(e)}))),T.queue.push(e))},consume:()=>{if(!B.ssr){if(-1!==T.timer&&cancelAnimationFrame(T.timer),T.timer=-1,T.count>0&&M(),A(),T.pending=!1,T.queue.sort(((e,t)=>e.depth-t.depth)).forEach((e=>{e.render(e)})),T.queue.length=0,O(),T.count>=100)throw T.count=0,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside useLayoutEffect. Ruset limits the number of nested updates to prevent infinite loops.");T.pending?T.count++:T.count=0}}};function A(){T.timer=requestAnimationFrame(M)}function M(){if(!B.ssr){for(let e=0;e<B.effects.length;e++){const t=B.effects[e];d(t.clear)&&t.clear()}for(let e=0;e<B.effects.length;e++){const t=B.effects[e];void 0!==t.effect&&(t.clear=t.current())}B.effects.length=0}}function O(){if(B.ssr)return;const e=B.layoutEffects;B.layoutEffects=[];for(let t=0;t<e.length;t++){const n=e[t];d(n.clear)&&n.clear()}for(let t=0;t<e.length;t++){const n=e[t];void 0!==n.layoutEffect&&(n.clear=n.current())}}function R(e){var t,n;return B.ssr?(null===(t=B.thrust)||void 0===t?void 0:t.has(e))?B.thrust.get(e):e.defaultValue:(N(B.index++),(null===(n=B.thrust)||void 0===n?void 0:n.has(e))?B.thrust.get(e):e.defaultValue)}function P(){return!!B.ssr}function F(e,t){if(B.ssr)return;const n=N(B.index++);I(n.deps,t)&&(n.effect=!0,n.deps=t,n.current=e)}function H(e,t){if(B.ssr)return;const n=N(B.index++);I(n.deps,t)&&(n.layoutEffect=!0,n.deps=t,n.current=e)}function _(e,t){if(B.ssr)return e;const n=N(B.index++);return I(n.deps,t)&&(n.deps=t,n.current=e),n.current}function j(e,t,n){if(B.ssr)return;void 0!==n&&(n=n.concat(e));const o=()=>{d(e)?e(t()):e&&(e.current=t())},i=N(B.index++);I(i.deps,n)&&(i.layoutEffect=!0,i.deps=n,i.current=o)}function W(e,t){if(B.ssr)return e();const n=N(B.index++);return I(n.deps,t)&&(n.deps=t,n.current=e(),p(n.current)&&(n.current.memo=!0)),n.current}function z(e,t,n){if(B.ssr)return o();function o(){return[void 0===n?d(t)?t():t:n(t),t=>{const n=e(i.current[0],t);i.current[0]!==n&&(i.current[0]=n,i.pending=!0,T.perform(i))}]}const i=N(B.index++);return i.pending=!1,i.depth=B.depth,i.render=B.render,void 0===i.current&&(i.current=o()),i.current}function V(e,t){return d(t)?t(e):t}function $(e){return z(V,e)}function Z(e){if(B.ssr)return{current:e};const t=N(B.index++);return void 0===t.current&&(t.current=e),t}function U(e){const t=e=>({type:i,symbol:n,props:e});return t.defaultValue=e,t}function q(e){return d(e)&&e.flag===o}var Y;function K(e){var t;return null!==(t=e.children)&&void 0!==t?t:null}function G(e,t,o){return void 0!==t.key&&delete t.key,{type:e,key:o,props:t,symbol:n}}!function(e){e.div="div",e.span="span",e.text="text",e.img="img",e.input="input",e.iframe="iframe",e.textarea="textarea",e.svg="svg",e.path="path",e.circle="circle",e.a="a",e.br="br",e.pre="pre",e.code="code"}(Y||(Y={}));const X=G;function J(e){return t=>{const[n,o]=$(null);return F((()=>{e().then((e=>{o(e)}))}),[]),void 0!==(null==n?void 0:n.default)?G(n.default,t,void 0):null}}const Q="http://www.w3.org/2000/svg",ee={div:{step:10,limit:1e3,elements:[],creator:()=>document.createElement(Y.div)},span:{step:10,limit:1e3,elements:[],creator:()=>document.createElement(Y.span)},text:{step:10,limit:1e3,elements:[],creator:()=>document.createTextNode("")},img:{step:10,limit:100,elements:[],creator:()=>document.createElement(Y.img)},input:{step:10,limit:100,elements:[],creator:()=>document.createElement(Y.input)},textarea:{step:10,limit:10,elements:[],creator:()=>document.createElement(Y.textarea)},a:{step:10,limit:100,elements:[],creator:()=>document.createElement(Y.a)},svg:{step:10,limit:100,elements:[],creator:()=>document.createElementNS(Q,Y.svg)},path:{step:10,limit:100,elements:[],creator:()=>document.createElementNS(Q,Y.path)},circle:{step:10,limit:10,elements:[],creator:()=>document.createElementNS(Q,Y.circle)},iframe:{step:0,limit:0,elements:[],creator:()=>document.createElement(Y.iframe)},br:{step:0,limit:0,elements:[],creator:()=>document.createElement(Y.br)},pre:{step:0,limit:0,elements:[],creator:()=>document.createElement(Y.pre)},code:{step:0,limit:0,elements:[],creator:()=>document.createElement(Y.code)}};function te(e,t){"function"==typeof requestIdleCallback?e.timer=requestIdleCallback(t):e.timer=setTimeout(t)}function ne(e){for(const e in ee){const t=ee[e];if(t.elements.length>=t.limit)continue;if(void 0!==t.timer)continue;const n=()=>{if(t.limit<=t.elements.length)return;const e=Math.min(t.step,t.limit-t.elements.length);for(let n=0;n<e;n++)t.elements.push(t.creator());delete t.timer,t.limit>t.elements.length&&te(t,n)};te(t,n)}}const oe=e=>{const t=ee.text.elements;if(t.length){const n=t.pop();return n.textContent=e,n}return document.createTextNode(e)};const ie=new WeakMap,re={onCopy:"copy",onCut:"cut",onPaste:"paste",onFocus:"focusin",onBlur:"focusout",onChange:"change",onBeforeInput:"beforeinput",onInput:"input",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onLoad:"load",onError:"error",onClick:"click",onScroll:"scroll",onWheel:"wheel",onDrag:"drag",onDragStart:"dragstart",onDragEnd:"dragend",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDrop:"drop",onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel",onDoubleClick:"dblclick",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseUp:"mouseup",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPointerDown:"pointerdown",onPointerMove:"pointermove",onPointerUp:"pointerup",onPointerCancel:"pointercancel",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOver:"pointerover",onPointerOut:"pointerout",onContextMenu:"contextmenu",onTransitionStart:"transitionstart",onTransitionRun:"transitionrun",onTransitionEnd:"transitionend",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationCancel:"animationcancel",onAnimationIteration:"animationiteration"};function le(e,t,n){void 0===e[l]&&(e[l]={});let o=e[l][t];if(void 0!==o)return o.current=n,void(o.options=n.options);o=function(e,t){const n=t=>{let o=t;if(!o)return void console.error(`${e} event unsupported`);if(!o.bubbles)return void n.current(o);let i=ie.get(t.target);void 0===i&&(i=new Map,ie.set(t.target,i));let r=i.get(e);r||(r=[],i.set(e,r));const l=t.stopPropagation.bind(t);o.stopPropagation=()=>{l(),(null==r?void 0:r.length)&&(r.length=0)};const s=t.stopImmediatePropagation.bind(t);o.stopImmediatePropagation=()=>{s(),(null==r?void 0:r.length)&&(r.length=0)},r.push((()=>n.current(o)))};return n.current=t,n.options=t.options,n}(t,n),e[l][t]=o,e.addEventListener(t,o,n.options)}function se(e){const t=ie.get(e.target);if(!t)return;const n=t.get(e.type);if(!n)return;let o=0;for(;o<n.length;)n[o++]();n.length=0}function ce(e,t,n){if(void 0===e[l])return;const o=e[l][t];o.current!==n&&console.error(`${t} event listener can not match`),o.options!==n.options&&console.error(`${t} event options can not match`),delete e[l][t],e.removeEventListener(t,o,o.options)}function ae(e,t,n,o){const{children:i,ele:r}=e.props,l=t.mounts.length;if(void 0===i||o&&!r){if(l>0){let e=0;for(;e<l;)t.index=e,ve(t),e++;t.mounts.length=0,delete t.index}}else{if(!Array.isArray(i)&&l>1){let e=1;for(;e<l;)t.index=e,ve(t),e++;t.mounts.length=1,delete t.index}n(i,t)}}function ue(e,t,n,o){var i;if("ref"!==n)if(void 0===re[n]){if("className"===n&&(n="class"),e.type===Y.input){if("autoFocus"===n&&(n="autofocus"),"multiple"===n||"disabled"===n||"directory"===n||"webkitdirectory"===n||"autofocus"===n)return void(!0===o?t.ele.setAttribute(n,""):t.ele.removeAttribute(n))}else e.type===Y.path&&("strokeWidth"===n?n="stroke-width":"fillOpacity"===n&&(n="fill-opacity"));void 0!==o?"value"!==n?t.ele.setAttribute(n,o):t.ele.value=o:t.ele.removeAttribute(n)}else{const r=re[n];void 0!==r&&d(o)&&(le(t.ele,r,o),(null===(i=e.props)||void 0===i?void 0:i.ref)||(e.props.ref=g))}}function de(e,t,n){if(a(n))e.removeAttribute("style");else if(a(t))for(const t in n){let o=n[t];o=!S[t]&&h(o)?`${o}px`:String(o).trim(),e.style.setProperty(C(t),o)}else{for(const o in n){let i=n[o];i!==t[o]&&(i=!S[o]&&h(i)?`${i}px`:String(i).trim(),e.style.setProperty(C(o),i))}for(const o in t)void 0===n[o]&&e.style.removeProperty(C(o))}}function fe(e,t,n){const{mounts:o,ele:i,index:r=0}=e;if(n){const n=function(e){var t,n,o;let{mounts:i,ele:r,index:l=0,nextMount:s}=e,c=null!==(t=null==s?void 0:s.ele)&&void 0!==t?t:null;if(null===c){let e=i.length-1;for(;!c&&l<e;)s=i[++l],(null==s?void 0:s.swaped)||(c=null!==(n=null==s?void 0:s.ele)&&void 0!==n?n:null)}for(;c===r;)s=null==s?void 0:s.mounts[0],c=null!==(o=null==s?void 0:s.ele)&&void 0!==o?o:null;return c}(e);i.insertBefore(t.ele,n)}o[r]=t}function he(e,t,n){var o,i,r;if(t===n)return;const{mounts:l,ele:s}=e;let c=n+(t<n?1:0),a=l[c];for(;!a||v(a.node);){if(c>l.length-1){a=void 0;break}a=l[++c]}let u=l[t];if(t>n?(l.splice(t,1),l.splice(n,0,u)):(l.splice(n+1,0,u),l.splice(t,1)),u&&!v(u.node)){let e=null!==(o=null==a?void 0:a.ele)&&void 0!==o?o:null;for(;e===s;)a=null==a?void 0:a.mounts[0],e=null!==(i=null==a?void 0:a.ele)&&void 0!==i?i:null;let t=u.ele;for(;t===s;)u=null==u?void 0:u.mounts[0],t=null!==(r=null==u?void 0:u.ele)&&void 0!==r?r:null;if(!t)return;t!==e&&s.insertBefore(t,e)}}function pe(e,t,n){var o,i,r;if(t===n)return;const{mounts:l,ele:s}=e;let c=n,a=l[c];for(;!a||v(a.node)||a.swaped;){if(c>l.length-1){a=void 0;break}a=l[++c]}let u=l[t];const d=l[n];if(l[t]=d,l[n]=u,d&&!v(d.node)&&(d.swaped=!0),u&&!v(u.node)){delete u.swaped;let e=null!==(o=null==a?void 0:a.ele)&&void 0!==o?o:null;for(;e===s;)a=null==a?void 0:a.mounts[0],e=null!==(i=null==a?void 0:a.ele)&&void 0!==i?i:null;let t=u.ele;for(;t===s;)u=null==u?void 0:u.mounts[0],t=null!==(r=null==u?void 0:u.ele)&&void 0!==r?r:null;if(!t)return;t!==e&&s.insertBefore(t,e)}}function ve(e,t,n){var o;const{mounts:i,ele:s,index:c=0}=e,a=i[c];if(void 0===a)return;if(a.destory)return void(void 0===t&&delete i[c]);a.destory=!0;const u=null===(o=a.node.props)||void 0===o?void 0:o.ref;void 0!==u&&(d(u)?u(null):u.current=null),function(e){if(void 0!==e.states)for(let t=0,n=e.states.length;t<n;t++){const n=e.states[t];!1===n.layoutEffect?(delete n.layoutEffect,B.layoutEffects.push(n)):!1===n.effect&&(delete n.effect,B.effects.push(n)),n.pending=!1}}(a);let f=n;const h=a.node.type;if(void 0===f?"function"!=typeof h&&(h in Y||void 0===h)&&(f=!0,s.removeChild(a.ele)):h===r&&(f=void 0),"function"!=typeof h&&h in Y){const e=a.ele[l];if(e)for(const t in e){const n=e[t];ce(a.ele,t,n.current)}}for(let e=0,t=a.mounts.length;e<t;e++)a.index=e,ve(a,!0,f);void 0===t&&delete i[c]}function ge(e,t){c(e)?we(e,t):u(e)?xe(e,t):s(e)?function(e,t){var n,o,i,r,l,s;e=e.flat(1/0);const c=t.mounts;if(0===c.length){t.index=0;let n=0;for(;n<e.length;)u(e[n])||(ge(e[n],t),t.index++),n++;return void delete t.index}let a,d=0,f=c.length-1,h=null===(n=c[0])||void 0===n?void 0:n.node,p=null===(o=c[f])||void 0===o?void 0:o.node,v=0,g=e.length-1,b=e[0],C=e[g];for(;d<=f&&v<=g;)if(u(h))h=e[++d];else if(u(p))p=e[--f];else if(u(b))b=e[++v];else if(u(C))C=e[--g];else if(m(h,b))t.index=d,ge(b,t),h=null===(i=c[++d])||void 0===i?void 0:i.node,b=e[++v];else if(m(p,C))a||(a=[]),a.push(C),p=null===(r=c[--f])||void 0===r?void 0:r.node,C=e[--g];else if(m(h,C))a||(a=[]),a.push(C),he(t,d,f),h=null===(l=c[d])||void 0===l?void 0:l.node,f--,C=e[--g];else{if(!m(p,b))break;he(t,f,d),t.index=d,ge(b,t),d++,p=null===(s=c[f])||void 0===s?void 0:s.node,b=e[++v]}let w=0;if(v<=g){let n,o=d;for(;o<=f;){const e=c[o].node;void 0===n&&(n=new Map);const t=y(e,o);n.set(t,o),o++}for(;v<=g;){if(u(b)){b=e[++v];continue}const o=y(b,v);if(!(null==n?void 0:n.has(o))){const n=d+w;c.splice(n,0,void 0),t.index=n,ge(b,t),b=e[++v],w++;continue}const i=n.get(o),r=i+w,l=d+w,{node:s}=c[l],a=y(s);n.set(a,i),n.delete(o),pe(t,r,l),t.index=l,ge(b,t),b=e[++v],d++}}if(null==a?void 0:a.length){let e=a.length-1,n=f+w+1;for(;e>=0;)t.index=n++,ge(a[e--],t)}const x=f-d;if(x>=0){for(;d<=f;)t.index=w+f--,ve(t);c.splice(d+w,x+1)}delete t.index,delete t.nextMount}(e,t):d(e.type)?me(e,t):e.type===i?ye(e,t):e.type===r?be(e,t):Ce(e,t)}function me(e,t){const{mounts:n,depth:o,ele:r,index:l=0,thrust:s}=t;let c=n[l];if(null==c?void 0:c.destory)return;if((null==c?void 0:c.node)===e&&e.memo)return;if(void 0===c)c={node:e,ele:r,depth:o+1,mounts:[]};else if(e.type!==c.node.type||e.key!==c.node.key)return ve(t),void me(e,t);if(c.thrust=s,c.node=e,c.inctx=!1,t.node.type===i){const e=t.node.props.children;Array.isArray(e)&&1!==e.length||(c.inctx=!0)}void 0===c.states&&(c.states=[]),B.index=0,B.depth=c.depth,B.order=c.order,B.states=c.states,B.thrust=c.thrust,B.render=o=>{var i;if(o.pending){let o=0;for(;o<n.length&&(null===(i=n[o])||void 0===i?void 0:i.node)!==e;)o++;if(!n[o])return;t.index=o,me({...e},t)}};let a=null;a=q(e.type)?e.type(e.props,e.props.ref):e.type(e.props);const u=function(e){const{mounts:t,index:n=0}=e;let o=n+1,i=t[o];if(i){if(i.swaped)for(;null==i?void 0:i.swaped;){if(o>t.length-1)return;i=t[++o]}return i}return e.nextMount}(t);u&&(c.nextMount=u),ge(a,c),c.nextMount&&delete c.nextMount,fe(t,c,!1),function(e){if(void 0!==e.states)for(let t=0,n=e.states.length;t<n;t++){const n=e.states[t];!0===n.layoutEffect?(n.layoutEffect=!1,B.layoutEffects.push(n)):!0===n.effect&&(n.effect=!1,B.effects.push(n))}}(c),delete B.thrust,delete B.order,B.states=[],B.render=g}function ye(e,t){const{mounts:n,depth:o,ele:i,index:r=0,thrust:l,inctx:s}=t;let c=n[r];if((null==c?void 0:c.node)!==e||!e.memo){if(void 0===c)c={node:e,ele:i,depth:o+1,mounts:[]};else if(e.type!==c.node.type||e.key!==c.node.key)return ve(t),void ye(e,t);c.thrust=s?null!=l?l:new Map:new Map(l),c.thrust.set(t.node.type,e.props.value),c.node=e,t.nextMount&&(c.nextMount=t.nextMount),ae(e,c,ge),t.nextMount&&delete c.nextMount,fe(t,c,!1)}}function be(e,t){const{mounts:n,depth:o,index:i=0,thrust:r}=t,{ele:l}=e.props;let s=n[i];(null==s?void 0:s.node)===e&&e.memo||(void 0===s?s={node:e,ele:l,depth:o+1,mounts:[]}:e.type===s.node.type&&e.key===s.node.key||(ve(t),be(e,t)),s.thrust=r,s.node=e,ae(e,s,ge,!0),fe(t,s,!1))}function Ce(e,t){const{mounts:n,depth:o,index:i=0,thrust:r}=t;let l=!1,s=n[i];if((null==s?void 0:s.node)!==e||!e.memo){if(void 0===s){l=!0;s={node:e,ele:function(e){if(e===Y.svg){const t=ee.svg.elements;return t.length?t.pop():document.createElementNS(Q,e)}if(e===Y.path){const t=ee.path.elements;return t.length?t.pop():document.createElementNS(Q,e)}const t=ee[e].elements;return t.length?t.pop():document.createElement(e)}(e.type),depth:o+1,mounts:[]}}else if(e.type!==s.node.type||e.key!==s.node.key)return ve(t),void Ce(e,t);!function(e,t){const n=e.props,o=t.node.props;if(n!==o){for(let i in n){if("children"===i)continue;const r=n[i];let l=o[i];"value"===i&&(l=t.ele.value),l!==r&&("style"!==i?ue(e,t,i,r):de(t.ele,l,r))}for(const e in o)if("children"!==e&&void 0!==o[e]&&void 0===n[e]){if(void 0!==re[e]){const n=re[e];void 0!==n&&ce(t.ele,n,o[e]);continue}t.ele.removeAttribute(e)}}else for(const o in n){if("children"===o)continue;const i=n[o];"style"!==o?ue(e,t,o,i):de(t.ele,null,i)}}(e,s),function(e,t){if(void 0!==e.props.ref){let n=t.ele;d(e.props.ref)?e.props.ref(n):e.props.ref.current=n}}(e,s),s.thrust=r,s.node=e,ae(e,s,ge),fe(t,s,l)}}function we(e,t){const{mounts:n,depth:o,index:i=0}=t;let r=!1,l=n[i];if(void 0===l){r=!0;l={node:e,ele:oe(String(e)),depth:o+1,mounts:[]}}else if(!c(l.node))return ve(t),void we(e,t);l.node!==e&&(l.node=e,l.ele.nodeValue=String(e)),fe(t,l,r)}function xe(e,t){const{mounts:n,index:o=0}=t,i=n[o];void 0===i||u(i.node)||(ve(t),xe(e,t))}function Se(e,t){return f(e)?x(e):h(e)?`${e}`:u(e)?"":s(e)?function(e,t){let n="",o=0;for(;o<e.length;)n+=Se(e[o],t),o++;return n}(e,t):d(e.type)?function(e,t){var n;B.thrust=t.thrust;let o=null;o=q(e.type)?e.type(e.props,e.props.ref):e.type(e.props);let r=!1;if((null===(n=t.node)||void 0===n?void 0:n.type)===i){const e=t.node.props.children;Array.isArray(e)&&1!==e.length||(r=!0)}return delete B.thrust,Se(o,{...t,inctx:r,node:e})}(e,t):e.type===i?function(e,t){var n;let{thrust:o,inctx:i}=t;o=i?null!=o?o:new Map:new Map(o);null==o||o.set(null===(n=t.node)||void 0===n?void 0:n.type,e.props.value);const r=e.props.children;if(void 0===r)return"";return Se(r,{...t,thrust:o})}(e,t):e.type===r?"":function(e,t){const n=e.type;let o=`<${n}`;for(let t in e.props){const n=e.props[t];if("className"===t?t="class":"autoFocus"===t?t="autofocus":"strokeWidth"===t?t="stroke-width":"fillOpacity"===t&&(t="fill-opacity"),"style"!==t||a(n)){if("children"===t)continue;f(n)?o+=` ${t}="${x(n)}"`:h(n)?o+=` ${t}="${n}"`:!0===n&&(o+=` ${t}`)}else{const e=E(n);e&&(o+=` style="${e.replace(/"/g,"'")}"`)}}if(n===Y.img||n===Y.input)return`${o} />`;o+=">";const i=e.props.children;void 0!==i&&(o+=Se(i,{...t,node:e}));return o+=`</${n}>`,o}(e,t)}var Ee="object"==typeof global&&global&&global.Object===Object&&global,ke="object"==typeof self&&self&&self.Object===Object&&self,De=Ee||ke||Function("return this")(),Ie=De.Symbol,Ne=Object.prototype,Le=Ne.hasOwnProperty,Be=Ne.toString,Te=Ie?Ie.toStringTag:void 0;var Ae=Object.prototype.toString;var Me="[object Null]",Oe="[object Undefined]",Re=Ie?Ie.toStringTag:void 0;function Pe(e){return null==e?void 0===e?Oe:Me:Re&&Re in Object(e)?function(e){var t=Le.call(e,Te),n=e[Te];try{e[Te]=void 0;var o=!0}catch(e){}var i=Be.call(e);return o&&(t?e[Te]=n:delete e[Te]),i}(e):function(e){return Ae.call(e)}(e)}function Fe(e){return null!=e&&"object"==typeof e}var He="[object Symbol]";function _e(e){return"symbol"==typeof e||Fe(e)&&Pe(e)==He}function je(e,t){for(var n=-1,o=null==e?0:e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}var We=Array.isArray,ze=1/0,Ve=Ie?Ie.prototype:void 0,$e=Ve?Ve.toString:void 0;function Ze(e){if("string"==typeof e)return e;if(We(e))return je(e,Ze)+"";if(_e(e))return $e?$e.call(e):"";var t=e+"";return"0"==t&&1/e==-ze?"-0":t}var Ue=/\s/;var qe=/^\s+/;function Ye(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Ue.test(e.charAt(t)););return t}(e)+1).replace(qe,""):e}function Ke(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ge=NaN,Xe=/^[-+]0x[0-9a-f]+$/i,Je=/^0b[01]+$/i,Qe=/^0o[0-7]+$/i,et=parseInt;function tt(e){if("number"==typeof e)return e;if(_e(e))return Ge;if(Ke(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ke(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ye(e);var n=Je.test(e);return n||Qe.test(e)?et(e.slice(2),n?2:8):Xe.test(e)?Ge:+e}var nt=1/0,ot=17976931348623157e292;function it(e){return e?(e=tt(e))===nt||e===-nt?(e<0?-1:1)*ot:e==e?e:0:0===e?e:0}function rt(e){var t=it(e),n=t%1;return t==t?n?t-n:t:0}function lt(e){return e}var st="[object AsyncFunction]",ct="[object Function]",at="[object GeneratorFunction]",ut="[object Proxy]";function dt(e){if(!Ke(e))return!1;var t=Pe(e);return t==ct||t==at||t==st||t==ut}var ft,ht=De["__core-js_shared__"],pt=(ft=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||""))?"Symbol(src)_1."+ft:"";var vt=Function.prototype.toString;function gt(e){if(null!=e){try{return vt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var mt=/^\[object .+?Constructor\]$/,yt=Function.prototype,bt=Object.prototype,Ct=yt.toString,wt=bt.hasOwnProperty,xt=RegExp("^"+Ct.call(wt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function St(e){return!(!Ke(e)||(t=e,pt&&pt in t))&&(dt(e)?xt:mt).test(gt(e));var t}function Et(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return St(n)?n:void 0}var kt=Et(De,"WeakMap"),Dt=kt&&new kt,It=Dt?function(e,t){return Dt.set(e,t),e}:lt,Nt=It,Lt=Object.create,Bt=function(){function e(){}return function(t){if(!Ke(t))return{};if(Lt)return Lt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Tt=Bt;function At(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Tt(e.prototype),o=e.apply(n,t);return Ke(o)?o:n}}var Mt=1;function Ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Rt=Math.max;function Pt(e,t,n,o){for(var i=-1,r=e.length,l=n.length,s=-1,c=t.length,a=Rt(r-l,0),u=Array(c+a),d=!o;++s<c;)u[s]=t[s];for(;++i<l;)(d||i<r)&&(u[n[i]]=e[i]);for(;a--;)u[s++]=e[i++];return u}var Ft=Math.max;function Ht(e,t,n,o){for(var i=-1,r=e.length,l=-1,s=n.length,c=-1,a=t.length,u=Ft(r-s,0),d=Array(u+a),f=!o;++i<u;)d[i]=e[i];for(var h=i;++c<a;)d[h+c]=t[c];for(;++l<s;)(f||i<r)&&(d[h+n[l]]=e[i++]);return d}function _t(){}var jt=4294967295;function Wt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jt,this.__views__=[]}function zt(){}Wt.prototype=Tt(_t.prototype),Wt.prototype.constructor=Wt;var Vt=Dt?function(e){return Dt.get(e)}:zt,$t=Vt,Zt={},Ut=Object.prototype.hasOwnProperty;function qt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Yt(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}qt.prototype=Tt(_t.prototype),qt.prototype.constructor=qt;var Kt=Object.prototype.hasOwnProperty;function Gt(e){if(Fe(e)&&!We(e)&&!(e instanceof Wt)){if(e instanceof qt)return e;if(Kt.call(e,"__wrapped__"))return function(e){if(e instanceof Wt)return e.clone();var t=new qt(e.__wrapped__,e.__chain__);return t.__actions__=Yt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}(e)}return new qt(e)}function Xt(e){var t=function(e){for(var t=e.name+"",n=Zt[t],o=Ut.call(Zt,t)?n.length:0;o--;){var i=n[o],r=i.func;if(null==r||r==e)return i.name}return t}(e),n=Gt[t];if("function"!=typeof n||!(t in Wt.prototype))return!1;if(e===n)return!0;var o=$t(n);return!!o&&e===o[0]}Gt.prototype=_t.prototype,Gt.prototype.constructor=Gt;var Jt=Date.now;function Qt(e){var t=0,n=0;return function(){var o=Jt(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var en=Qt(Nt),tn=/\{\n\/\* \[wrapped with (.+)\] \*/,nn=/,? & /;var on=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function rn(e){return function(){return e}}var ln=function(){try{var e=Et(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),sn=ln,cn=sn?function(e,t){return sn(e,"toString",{configurable:!0,enumerable:!1,value:rn(t),writable:!0})}:lt,an=Qt(cn);function un(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}function dn(e){return e!=e}function fn(e,t,n){return t==t?function(e,t,n){for(var o=n-1,i=e.length;++o<i;)if(e[o]===t)return o;return-1}(e,t,n):function(e,t,n,o){for(var i=e.length,r=n+(o?1:-1);o?r--:++r<i;)if(t(e[r],r,e))return r;return-1}(e,dn,n)}function hn(e,t){return!!(null==e?0:e.length)&&fn(e,t,0)>-1}var pn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function vn(e,t,n){var o=t+"";return an(e,function(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(on,"{\n/* [wrapped with "+t+"] */\n")}(o,function(e,t){return un(pn,(function(n){var o="_."+n[0];t&n[1]&&!hn(e,o)&&e.push(o)})),e.sort()}(function(e){var t=e.match(tn);return t?t[1].split(nn):[]}(o),n)))}var gn=1,mn=2,yn=4,bn=8,Cn=32,wn=64;function xn(e,t,n,o,i,r,l,s,c,a){var u=t&bn;t|=u?Cn:wn,(t&=~(u?wn:Cn))&yn||(t&=~(gn|mn));var d=[e,t,i,u?r:void 0,u?l:void 0,u?void 0:r,u?void 0:l,s,c,a],f=n.apply(void 0,d);return Xt(e)&&en(f,d),f.placeholder=o,vn(f,e,t)}function Sn(e){return e.placeholder}var En=9007199254740991,kn=/^(?:0|[1-9]\d*)$/;function Dn(e,t){var n=typeof e;return!!(t=null==t?En:t)&&("number"==n||"symbol"!=n&&kn.test(e))&&e>-1&&e%1==0&&e<t}var In=Math.min;var Nn="__lodash_placeholder__";function Ln(e,t){for(var n=-1,o=e.length,i=0,r=[];++n<o;){var l=e[n];l!==t&&l!==Nn||(e[n]=Nn,r[i++]=n)}return r}var Bn=1,Tn=2,An=8,Mn=16,On=128,Rn=512;function Pn(e,t,n,o,i,r,l,s,c,a){var u=t&On,d=t&Bn,f=t&Tn,h=t&(An|Mn),p=t&Rn,v=f?void 0:At(e);return function g(){for(var m=arguments.length,y=Array(m),b=m;b--;)y[b]=arguments[b];if(h)var C=Sn(g),w=function(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}(y,C);if(o&&(y=Pt(y,o,i,h)),r&&(y=Ht(y,r,l,h)),m-=w,h&&m<a){var x=Ln(y,C);return xn(e,t,Pn,g.placeholder,n,y,x,s,c,a-m)}var S=d?n:this,E=f?S[e]:e;return m=y.length,s?y=function(e,t){for(var n=e.length,o=In(t.length,n),i=Yt(e);o--;){var r=t[o];e[o]=Dn(r,n)?i[r]:void 0}return e}(y,s):p&&m>1&&y.reverse(),u&&c<m&&(y.length=c),this&&this!==De&&this instanceof g&&(E=v||At(E)),E.apply(S,y)}}var Fn=1;var Hn="__lodash_placeholder__",_n=1,jn=2,Wn=4,zn=8,Vn=128,$n=256,Zn=Math.min;var Un="Expected a function",qn=1,Yn=2,Kn=8,Gn=16,Xn=32,Jn=64,Qn=Math.max;function eo(e,t,n,o,i,r,l,s){var c=t&Yn;if(!c&&"function"!=typeof e)throw new TypeError(Un);var a=o?o.length:0;if(a||(t&=~(Xn|Jn),o=i=void 0),l=void 0===l?l:Qn(rt(l),0),s=void 0===s?s:rt(s),a-=i?i.length:0,t&Jn){var u=o,d=i;o=i=void 0}var f=c?void 0:$t(e),h=[e,t,n,o,i,u,d,r,l,s];if(f&&function(e,t){var n=e[1],o=t[1],i=n|o,r=i<(_n|jn|Vn),l=o==Vn&&n==zn||o==Vn&&n==$n&&e[7].length<=t[8]||o==(Vn|$n)&&t[7].length<=t[8]&&n==zn;if(!r&&!l)return e;o&_n&&(e[2]=t[2],i|=n&_n?0:Wn);var s=t[3];if(s){var c=e[3];e[3]=c?Pt(c,s,t[4]):s,e[4]=c?Ln(e[3],Hn):t[4]}(s=t[5])&&(c=e[5],e[5]=c?Ht(c,s,t[6]):s,e[6]=c?Ln(e[5],Hn):t[6]),(s=t[7])&&(e[7]=s),o&Vn&&(e[8]=null==e[8]?t[8]:Zn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(h,f),e=h[0],t=h[1],n=h[2],o=h[3],i=h[4],!(s=h[9]=void 0===h[9]?c?0:e.length:Qn(h[9]-a,0))&&t&(Kn|Gn)&&(t&=~(Kn|Gn)),t&&t!=qn)p=t==Kn||t==Gn?function(e,t,n){var o=At(e);return function i(){for(var r=arguments.length,l=Array(r),s=r,c=Sn(i);s--;)l[s]=arguments[s];var a=r<3&&l[0]!==c&&l[r-1]!==c?[]:Ln(l,c);return(r-=a.length)<n?xn(e,t,Pn,i.placeholder,void 0,l,a,void 0,void 0,n-r):Ot(this&&this!==De&&this instanceof i?o:e,this,l)}}(e,t,s):t!=Xn&&t!=(qn|Xn)||i.length?Pn.apply(void 0,h):function(e,t,n,o){var i=t&Fn,r=At(e);return function t(){for(var l=-1,s=arguments.length,c=-1,a=o.length,u=Array(a+s),d=this&&this!==De&&this instanceof t?r:e;++c<a;)u[c]=o[c];for(;s--;)u[c++]=arguments[++l];return Ot(d,i?n:this,u)}}(e,t,n,o);else var p=function(e,t,n){var o=t&Mt,i=At(e);return function t(){return(this&&this!==De&&this instanceof t?i:e).apply(o?n:this,arguments)}}(e,t,n);return vn((f?Nt:en)(p,h),e,t)}function to(e,t,n){"__proto__"==t&&sn?sn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function no(e,t){return e===t||e!=e&&t!=t}var oo=Object.prototype.hasOwnProperty;function io(e,t,n){var o=e[t];oo.call(e,t)&&no(o,n)&&(void 0!==n||t in e)||to(e,t,n)}function ro(e,t,n,o){var i=!n;n||(n={});for(var r=-1,l=t.length;++r<l;){var s=t[r],c=o?o(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?to(n,s,c):io(n,s,c)}return n}var lo=Math.max;function so(e,t,n){return t=lo(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,r=lo(o.length-t,0),l=Array(r);++i<r;)l[i]=o[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=o[i];return s[t]=n(l),Ot(e,this,s)}}function co(e,t){return an(so(e,t,lt),e+"")}var ao=9007199254740991;function uo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ao}function fo(e){return null!=e&&uo(e.length)&&!dt(e)}function ho(e,t,n){if(!Ke(n))return!1;var o=typeof t;return!!("number"==o?fo(n)&&Dn(t,n.length):"string"==o&&t in n)&&no(n[t],e)}function po(e){return co((function(t,n){var o=-1,i=n.length,r=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(i--,r):void 0,l&&ho(n[0],n[1],l)&&(r=i<3?void 0:r,i=1),t=Object(t);++o<i;){var s=n[o];s&&e(t,s,o,r)}return t}))}var vo=Object.prototype;function go(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vo)}function mo(e){return Fe(e)&&"[object Arguments]"==Pe(e)}var yo=Object.prototype,bo=yo.hasOwnProperty,Co=yo.propertyIsEnumerable,wo=mo(function(){return arguments}())?mo:function(e){return Fe(e)&&bo.call(e,"callee")&&!Co.call(e,"callee")},xo=wo;var So="object"==typeof exports&&exports&&!exports.nodeType&&exports,Eo=So&&"object"==typeof module&&module&&!module.nodeType&&module,ko=Eo&&Eo.exports===So?De.Buffer:void 0,Do=(ko?ko.isBuffer:void 0)||function(){return!1},Io={};function No(e){return function(t){return e(t)}}Io["[object Float32Array]"]=Io["[object Float64Array]"]=Io["[object Int8Array]"]=Io["[object Int16Array]"]=Io["[object Int32Array]"]=Io["[object Uint8Array]"]=Io["[object Uint8ClampedArray]"]=Io["[object Uint16Array]"]=Io["[object Uint32Array]"]=!0,Io["[object Arguments]"]=Io["[object Array]"]=Io["[object ArrayBuffer]"]=Io["[object Boolean]"]=Io["[object DataView]"]=Io["[object Date]"]=Io["[object Error]"]=Io["[object Function]"]=Io["[object Map]"]=Io["[object Number]"]=Io["[object Object]"]=Io["[object RegExp]"]=Io["[object Set]"]=Io["[object String]"]=Io["[object WeakMap]"]=!1;var Lo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bo=Lo&&"object"==typeof module&&module&&!module.nodeType&&module,To=Bo&&Bo.exports===Lo&&Ee.process,Ao=function(){try{var e=Bo&&Bo.require&&Bo.require("util").types;return e||To&&To.binding&&To.binding("util")}catch(e){}}(),Mo=Ao&&Ao.isTypedArray,Oo=Mo?No(Mo):function(e){return Fe(e)&&uo(e.length)&&!!Io[Pe(e)]},Ro=Oo,Po=Object.prototype.hasOwnProperty;function Fo(e,t){var n=We(e),o=!n&&xo(e),i=!n&&!o&&Do(e),r=!n&&!o&&!i&&Ro(e),l=n||o||i||r,s=l?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],c=s.length;for(var a in e)!t&&!Po.call(e,a)||l&&("length"==a||i&&("offset"==a||"parent"==a)||r&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||Dn(a,c))||s.push(a);return s}function Ho(e,t){return function(n){return e(t(n))}}var _o=Ho(Object.keys,Object),jo=Object.prototype.hasOwnProperty;function Wo(e){if(!go(e))return _o(e);var t=[];for(var n in Object(e))jo.call(e,n)&&"constructor"!=n&&t.push(n);return t}function zo(e){return fo(e)?Fo(e):Wo(e)}var Vo=Object.prototype.hasOwnProperty,$o=po((function(e,t){if(go(t)||fo(t))ro(t,zo(t),e);else for(var n in t)Vo.call(t,n)&&io(e,n,t[n])})),Zo=$o;var Uo=Object.prototype.hasOwnProperty;function qo(e){if(!Ke(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=go(e),n=[];for(var o in e)("constructor"!=o||!t&&Uo.call(e,o))&&n.push(o);return n}function Yo(e){return fo(e)?Fo(e,!0):qo(e)}var Ko=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Go=/^\w*$/;var Xo=Et(Object,"create");var Jo=Object.prototype.hasOwnProperty;var Qo=Object.prototype.hasOwnProperty;function ei(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ti(e,t){for(var n=e.length;n--;)if(no(e[n][0],t))return n;return-1}ei.prototype.clear=function(){this.__data__=Xo?Xo(null):{},this.size=0},ei.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ei.prototype.get=function(e){var t=this.__data__;if(Xo){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Jo.call(t,e)?t[e]:void 0},ei.prototype.has=function(e){var t=this.__data__;return Xo?void 0!==t[e]:Qo.call(t,e)},ei.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Xo&&void 0===t?"__lodash_hash_undefined__":t,this};var ni=Array.prototype.splice;function oi(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}oi.prototype.clear=function(){this.__data__=[],this.size=0},oi.prototype.delete=function(e){var t=this.__data__,n=ti(t,e);return!(n<0)&&(n==t.length-1?t.pop():ni.call(t,n,1),--this.size,!0)},oi.prototype.get=function(e){var t=this.__data__,n=ti(t,e);return n<0?void 0:t[n][1]},oi.prototype.has=function(e){return ti(this.__data__,e)>-1},oi.prototype.set=function(e,t){var n=this.__data__,o=ti(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};var ii=Et(De,"Map");function ri(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function li(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}li.prototype.clear=function(){this.size=0,this.__data__={hash:new ei,map:new(ii||oi),string:new ei}},li.prototype.delete=function(e){var t=ri(this,e).delete(e);return this.size-=t?1:0,t},li.prototype.get=function(e){return ri(this,e).get(e)},li.prototype.has=function(e){return ri(this,e).has(e)},li.prototype.set=function(e,t){var n=ri(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};var si="Expected a function";function ci(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(si);var n=function(){var o=arguments,i=t?t.apply(this,o):o[0],r=n.cache;if(r.has(i))return r.get(i);var l=e.apply(this,o);return n.cache=r.set(i,l)||r,l};return n.cache=new(ci.Cache||li),n}ci.Cache=li;var ai=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ui=/\\(\\)?/g,di=function(e){var t=ci(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ai,(function(e,n,o,i){t.push(o?i.replace(ui,"$1"):n||e)})),t})),fi=di;function hi(e){return null==e?"":Ze(e)}function pi(e,t){return We(e)?e:function(e,t){if(We(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_e(e))||Go.test(e)||!Ko.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:fi(hi(e))}var vi=1/0;function gi(e){if("string"==typeof e||_e(e))return e;var t=e+"";return"0"==t&&1/e==-vi?"-0":t}function mi(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}var yi=Ie?Ie.isConcatSpreadable:void 0;function bi(e){return We(e)||xo(e)||!!(yi&&e&&e[yi])}function Ci(e,t,n,o,i){var r=-1,l=e.length;for(n||(n=bi),i||(i=[]);++r<l;){var s=e[r];t>0&&n(s)?t>1?Ci(s,t-1,n,o,i):mi(i,s):o||(i[i.length]=s)}return i}function wi(e){return(null==e?0:e.length)?Ci(e,1):[]}var xi=Ho(Object.getPrototypeOf,Object),Si="[object Object]",Ei=Function.prototype,ki=Object.prototype,Di=Ei.toString,Ii=ki.hasOwnProperty,Ni=Di.call(Object);function Li(e){if(!Fe(e)||Pe(e)!=Si)return!1;var t=xi(e);if(null===t)return!0;var n=Ii.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Di.call(n)==Ni}function Bi(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++o<i;)r[o]=e[o+t];return r}var Ti=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ai(e){return Ti.test(e)}var Mi="\\ud800-\\udfff",Oi="["+Mi+"]",Ri="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pi="\\ud83c[\\udffb-\\udfff]",Fi="[^"+Mi+"]",Hi="(?:\\ud83c[\\udde6-\\uddff]){2}",_i="[\\ud800-\\udbff][\\udc00-\\udfff]",ji="(?:"+Ri+"|"+Pi+")"+"?",Wi="[\\ufe0e\\ufe0f]?",zi=Wi+ji+("(?:\\u200d(?:"+[Fi,Hi,_i].join("|")+")"+Wi+ji+")*"),Vi="(?:"+[Fi+Ri+"?",Ri,Hi,_i,Oi].join("|")+")",$i=RegExp(Pi+"(?="+Pi+")|"+Vi+zi,"g");function Zi(e){return Ai(e)?function(e){return e.match($i)||[]}(e):function(e){return e.split("")}(e)}var Ui,qi=(Ui="toUpperCase",function(e){var t=Ai(e=hi(e))?Zi(e):void 0,n=t?t[0]:e.charAt(0),o=t?function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:Bi(e,t,n)}(t,1).join(""):e.slice(1);return n[Ui]()+o}),Yi=qi;var Ki,Gi=(Ki={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},function(e){return null==Ki?void 0:Ki[e]}),Xi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ji=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Qi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var er=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var tr="\\ud800-\\udfff",nr="\\u2700-\\u27bf",or="a-z\\xdf-\\xf6\\xf8-\\xff",ir="A-Z\\xc0-\\xd6\\xd8-\\xde",rr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lr="["+rr+"]",sr="\\d+",cr="["+nr+"]",ar="["+or+"]",ur="[^"+tr+rr+sr+nr+or+ir+"]",dr="(?:\\ud83c[\\udde6-\\uddff]){2}",fr="[\\ud800-\\udbff][\\udc00-\\udfff]",hr="["+ir+"]",pr="(?:"+ar+"|"+ur+")",vr="(?:"+hr+"|"+ur+")",gr="(?:['’](?:d|ll|m|re|s|t|ve))?",mr="(?:['’](?:D|LL|M|RE|S|T|VE))?",yr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",br="[\\ufe0e\\ufe0f]?",Cr=br+yr+("(?:\\u200d(?:"+["[^"+tr+"]",dr,fr].join("|")+")"+br+yr+")*"),wr="(?:"+[cr,dr,fr].join("|")+")"+Cr,xr=RegExp([hr+"?"+ar+"+"+gr+"(?="+[lr,hr,"$"].join("|")+")",vr+"+"+mr+"(?="+[lr,hr+pr,"$"].join("|")+")",hr+"?"+pr+"+"+gr,hr+"+"+mr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sr,wr].join("|"),"g");function Sr(e,t,n){return e=hi(e),void 0===(t=n?void 0:t)?function(e){return er.test(e)}(e)?function(e){return e.match(xr)||[]}(e):function(e){return e.match(Qi)||[]}(e):e.match(t)||[]}var Er=RegExp("['’]","g");var kr,Dr=(kr=function(e,t,n){return t=t.toLowerCase(),e+(n?Yi(hi(t).toLowerCase()):t)},function(e){return function(e,t,n,o){var i=-1,r=null==e?0:e.length;for(o&&r&&(n=e[++i]);++i<r;)n=t(n,e[i],i,e);return n}(Sr(function(e){return(e=hi(e))&&e.replace(Xi,Gi).replace(Ji,"")}(e).replace(Er,"")),kr,"")}),Ir=Dr,Nr=Math.ceil,Lr=Math.max;function Br(e,t,n){t=(n?ho(e,t,n):void 0===t)?1:Lr(rt(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,r=0,l=Array(Nr(o/t));i<o;)l[r++]=Bi(e,i,i+=t);return l}function Tr(e){var t=this.__data__=new oi(e);this.size=t.size}Tr.prototype.clear=function(){this.__data__=new oi,this.size=0},Tr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Tr.prototype.get=function(e){return this.__data__.get(e)},Tr.prototype.has=function(e){return this.__data__.has(e)},Tr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oi){var o=n.__data__;if(!ii||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new li(o)}return n.set(e,t),this.size=n.size,this};var Ar="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mr=Ar&&"object"==typeof module&&module&&!module.nodeType&&module,Or=Mr&&Mr.exports===Ar?De.Buffer:void 0,Rr=Or?Or.allocUnsafe:void 0;function Pr(e,t){if(t)return e.slice();var n=e.length,o=Rr?Rr(n):new e.constructor(n);return e.copy(o),o}function Fr(){return[]}var Hr=Object.prototype.propertyIsEnumerable,_r=Object.getOwnPropertySymbols,jr=_r?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,i=0,r=[];++n<o;){var l=e[n];t(l,n,e)&&(r[i++]=l)}return r}(_r(e),(function(t){return Hr.call(e,t)})))}:Fr,Wr=jr;var zr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)mi(t,Wr(e)),e=xi(e);return t}:Fr,Vr=zr;function $r(e,t,n){var o=t(e);return We(e)?o:mi(o,n(e))}function Zr(e){return $r(e,zo,Wr)}function Ur(e){return $r(e,Yo,Vr)}var qr=Et(De,"DataView"),Yr=Et(De,"Promise"),Kr=Et(De,"Set"),Gr="[object Map]",Xr="[object Promise]",Jr="[object Set]",Qr="[object WeakMap]",el="[object DataView]",tl=gt(qr),nl=gt(ii),ol=gt(Yr),il=gt(Kr),rl=gt(kt),ll=Pe;(qr&&ll(new qr(new ArrayBuffer(1)))!=el||ii&&ll(new ii)!=Gr||Yr&&ll(Yr.resolve())!=Xr||Kr&&ll(new Kr)!=Jr||kt&&ll(new kt)!=Qr)&&(ll=function(e){var t=Pe(e),n="[object Object]"==t?e.constructor:void 0,o=n?gt(n):"";if(o)switch(o){case tl:return el;case nl:return Gr;case ol:return Xr;case il:return Jr;case rl:return Qr}return t});var sl=ll,cl=Object.prototype.hasOwnProperty;var al=De.Uint8Array;function ul(e){var t=new e.constructor(e.byteLength);return new al(t).set(new al(e)),t}var dl=/\w*$/;var fl=Ie?Ie.prototype:void 0,hl=fl?fl.valueOf:void 0;function pl(e,t){var n=t?ul(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var vl="[object Boolean]",gl="[object Date]",ml="[object Map]",yl="[object Number]",bl="[object RegExp]",Cl="[object Set]",wl="[object String]",xl="[object Symbol]",Sl="[object ArrayBuffer]",El="[object DataView]",kl="[object Float32Array]",Dl="[object Float64Array]",Il="[object Int8Array]",Nl="[object Int16Array]",Ll="[object Int32Array]",Bl="[object Uint8Array]",Tl="[object Uint8ClampedArray]",Al="[object Uint16Array]",Ml="[object Uint32Array]";function Ol(e,t,n){var o,i,r,l=e.constructor;switch(t){case Sl:return ul(e);case vl:case gl:return new l(+e);case El:return function(e,t){var n=t?ul(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case kl:case Dl:case Il:case Nl:case Ll:case Bl:case Tl:case Al:case Ml:return pl(e,n);case ml:return new l;case yl:case wl:return new l(e);case bl:return(r=new(i=e).constructor(i.source,dl.exec(i))).lastIndex=i.lastIndex,r;case Cl:return new l;case xl:return o=e,hl?Object(hl.call(o)):{}}}function Rl(e){return"function"!=typeof e.constructor||go(e)?{}:Tt(xi(e))}var Pl=Ao&&Ao.isMap,Fl=Pl?No(Pl):function(e){return Fe(e)&&"[object Map]"==sl(e)},Hl=Fl;var _l=Ao&&Ao.isSet,jl=_l?No(_l):function(e){return Fe(e)&&"[object Set]"==sl(e)},Wl=jl,zl=1,Vl=2,$l=4,Zl="[object Arguments]",Ul="[object Function]",ql="[object GeneratorFunction]",Yl="[object Object]",Kl={};function Gl(e,t,n,o,i,r){var l,s=t&zl,c=t&Vl,a=t&$l;if(n&&(l=i?n(e,o,i,r):n(e)),void 0!==l)return l;if(!Ke(e))return e;var u=We(e);if(u){if(l=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&cl.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Yt(e,l)}else{var d=sl(e),f=d==Ul||d==ql;if(Do(e))return Pr(e,s);if(d==Yl||d==Zl||f&&!i){if(l=c||f?{}:Rl(e),!s)return c?function(e,t){return ro(e,Vr(e),t)}(e,function(e,t){return e&&ro(t,Yo(t),e)}(l,e)):function(e,t){return ro(e,Wr(e),t)}(e,function(e,t){return e&&ro(t,zo(t),e)}(l,e))}else{if(!Kl[d])return i?e:{};l=Ol(e,d,s)}}r||(r=new Tr);var h=r.get(e);if(h)return h;r.set(e,l),Wl(e)?e.forEach((function(o){l.add(Gl(o,t,n,o,e,r))})):Hl(e)&&e.forEach((function(o,i){l.set(i,Gl(o,t,n,i,e,r))}));var p=u?void 0:(a?c?Ur:Zr:c?Yo:zo)(e);return un(p||e,(function(o,i){p&&(o=e[i=o]),io(l,i,Gl(o,t,n,i,e,r))})),l}Kl[Zl]=Kl["[object Array]"]=Kl["[object ArrayBuffer]"]=Kl["[object DataView]"]=Kl["[object Boolean]"]=Kl["[object Date]"]=Kl["[object Float32Array]"]=Kl["[object Float64Array]"]=Kl["[object Int8Array]"]=Kl["[object Int16Array]"]=Kl["[object Int32Array]"]=Kl["[object Map]"]=Kl["[object Number]"]=Kl[Yl]=Kl["[object RegExp]"]=Kl["[object Set]"]=Kl["[object String]"]=Kl["[object Symbol]"]=Kl["[object Uint8Array]"]=Kl["[object Uint8ClampedArray]"]=Kl["[object Uint16Array]"]=Kl["[object Uint32Array]"]=!0,Kl["[object Error]"]=Kl[Ul]=Kl["[object WeakMap]"]=!1;var Xl=4;function Jl(e){return Gl(e,Xl)}var Ql=1,es=4;function ts(e){return Gl(e,Ql|es)}function ns(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new li;++t<n;)this.add(e[t])}function os(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function is(e,t){return e.has(t)}ns.prototype.add=ns.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ns.prototype.has=function(e){return this.__data__.has(e)};var rs=1,ls=2;function ss(e,t,n,o,i,r){var l=n&rs,s=e.length,c=t.length;if(s!=c&&!(l&&c>s))return!1;var a=r.get(e),u=r.get(t);if(a&&u)return a==t&&u==e;var d=-1,f=!0,h=n&ls?new ns:void 0;for(r.set(e,t),r.set(t,e);++d<s;){var p=e[d],v=t[d];if(o)var g=l?o(v,p,d,t,e,r):o(p,v,d,e,t,r);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!os(t,(function(e,t){if(!is(h,t)&&(p===e||i(p,e,n,o,r)))return h.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,o,r)){f=!1;break}}return r.delete(e),r.delete(t),f}function cs(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function as(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var us=1,ds=2,fs="[object Boolean]",hs="[object Date]",ps="[object Error]",vs="[object Map]",gs="[object Number]",ms="[object RegExp]",ys="[object Set]",bs="[object String]",Cs="[object Symbol]",ws="[object ArrayBuffer]",xs="[object DataView]",Ss=Ie?Ie.prototype:void 0,Es=Ss?Ss.valueOf:void 0;var ks=1,Ds=Object.prototype.hasOwnProperty;var Is=1,Ns="[object Arguments]",Ls="[object Array]",Bs="[object Object]",Ts=Object.prototype.hasOwnProperty;function As(e,t,n,o,i,r){var l=We(e),s=We(t),c=l?Ls:sl(e),a=s?Ls:sl(t),u=(c=c==Ns?Bs:c)==Bs,d=(a=a==Ns?Bs:a)==Bs,f=c==a;if(f&&Do(e)){if(!Do(t))return!1;l=!0,u=!1}if(f&&!u)return r||(r=new Tr),l||Ro(e)?ss(e,t,n,o,i,r):function(e,t,n,o,i,r,l){switch(n){case xs:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ws:return!(e.byteLength!=t.byteLength||!r(new al(e),new al(t)));case fs:case hs:case gs:return no(+e,+t);case ps:return e.name==t.name&&e.message==t.message;case ms:case bs:return e==t+"";case vs:var s=cs;case ys:var c=o&us;if(s||(s=as),e.size!=t.size&&!c)return!1;var a=l.get(e);if(a)return a==t;o|=ds,l.set(e,t);var u=ss(s(e),s(t),o,i,r,l);return l.delete(e),u;case Cs:if(Es)return Es.call(e)==Es.call(t)}return!1}(e,t,c,n,o,i,r);if(!(n&Is)){var h=u&&Ts.call(e,"__wrapped__"),p=d&&Ts.call(t,"__wrapped__");if(h||p){var v=h?e.value():e,g=p?t.value():t;return r||(r=new Tr),i(v,g,n,o,r)}}return!!f&&(r||(r=new Tr),function(e,t,n,o,i,r){var l=n&ks,s=Zr(e),c=s.length;if(c!=Zr(t).length&&!l)return!1;for(var a=c;a--;){var u=s[a];if(!(l?u in t:Ds.call(t,u)))return!1}var d=r.get(e),f=r.get(t);if(d&&f)return d==t&&f==e;var h=!0;r.set(e,t),r.set(t,e);for(var p=l;++a<c;){var v=e[u=s[a]],g=t[u];if(o)var m=l?o(g,v,u,t,e,r):o(v,g,u,e,t,r);if(!(void 0===m?v===g||i(v,g,n,o,r):m)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return r.delete(e),r.delete(t),h}(e,t,n,o,i,r))}function Ms(e,t,n,o,i){return e===t||(null==e||null==t||!Fe(e)&&!Fe(t)?e!=e&&t!=t:As(e,t,n,o,Ms,i))}var Os,Rs=function(e,t,n){for(var o=-1,i=Object(e),r=n(e),l=r.length;l--;){var s=r[Os?l:++o];if(!1===t(i[s],s,i))break}return e},Ps=Rs;var Fs=8;function Hs(e,t,n){var o=eo(e,Fs,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return o.placeholder=Hs.placeholder,o}Hs.placeholder={};var _s=function(){return De.Date.now()},js="Expected a function",Ws=Math.max,zs=Math.min;function Vs(e,t,n){var o,i,r,l,s,c,a=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(js);function h(t){var n=o,r=i;return o=i=void 0,a=t,l=e.apply(r,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-a>=r}function v(){var e=_s();if(p(e))return g(e);s=setTimeout(v,function(e){var n=t-(e-c);return d?zs(n,r-(e-a)):n}(e))}function g(e){return s=void 0,f&&o?h(e):(o=i=void 0,l)}function m(){var e=_s(),n=p(e);if(o=arguments,i=this,c=e,n){if(void 0===s)return function(e){return a=e,s=setTimeout(v,t),u?h(e):l}(c);if(d)return clearTimeout(s),s=setTimeout(v,t),h(c)}return void 0===s&&(s=setTimeout(v,t)),l}return t=tt(t)||0,Ke(n)&&(u=!!n.leading,r=(d="maxWait"in n)?Ws(tt(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),a=0,o=c=i=s=void 0},m.flush=function(){return void 0===s?l:g(_s())},m}function $s(e,t,n){(void 0!==n&&!no(e[t],n)||void 0===n&&!(t in e))&&to(e,t,n)}function Zs(e){return Fe(e)&&fo(e)}function Us(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function qs(e,t,n,o,i,r,l){var s=Us(e,n),c=Us(t,n),a=l.get(c);if(a)$s(e,n,a);else{var u=r?r(s,c,n+"",e,t,l):void 0,d=void 0===u;if(d){var f=We(c),h=!f&&Do(c),p=!f&&!h&&Ro(c);u=c,f||h||p?We(s)?u=s:Zs(s)?u=Yt(s):h?(d=!1,u=Pr(c,!0)):p?(d=!1,u=pl(c,!0)):u=[]:Li(c)||xo(c)?(u=s,xo(s)?u=function(e){return ro(e,Yo(e))}(s):Ke(s)&&!dt(s)||(u=Rl(c))):d=!1}d&&(l.set(c,u),i(u,c,o,r,l),l.delete(c)),$s(e,n,u)}}function Ys(e,t,n,o,i){e!==t&&Ps(t,(function(r,l){if(i||(i=new Tr),Ke(r))qs(e,t,l,n,Ys,o,i);else{var s=o?o(Us(e,l),r,l+"",e,t,i):void 0;void 0===s&&(s=r),$s(e,l,s)}}),Yo)}function Ks(e,t,n){for(var o=-1,i=null==e?0:e.length;++o<i;)if(n(t,e[o]))return!0;return!1}var Gs=co((function(e,t){return Zs(e)?function(e,t,n,o){var i=-1,r=hn,l=!0,s=e.length,c=[],a=t.length;if(!s)return c;n&&(t=je(t,No(n))),o?(r=Ks,l=!1):t.length>=200&&(r=is,l=!1,t=new ns(t));e:for(;++i<s;){var u=e[i],d=null==n?u:n(u);if(u=o||0!==u?u:0,l&&d==d){for(var f=a;f--;)if(t[f]===d)continue e;c.push(u)}else r(t,d,o)||c.push(u)}return c}(e,Ci(t,1,Zs,!0)):[]})),Xs=Gs;function Js(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function Qs(e,t,n){var o=null==e?0:e.length;return o?Bi(e,(t=n||void 0===t?1:rt(t))<0?0:t,o):[]}function ec(e,t,n){var o=null==e?0:e.length;return o?Bi(e,0,(t=o-(t=n||void 0===t?1:rt(t)))<0?0:t):[]}function tc(e){return e&&e.length?e[0]:void 0}function nc(e){return(null==e?0:e.length)?Ci(e,Infinity):[]}var oc=Object.prototype.hasOwnProperty;function ic(e,t){return null!=e&&oc.call(e,t)}function rc(e,t){return null!=e&&function(e,t,n){for(var o=-1,i=(t=pi(t,e)).length,r=!1;++o<i;){var l=gi(t[o]);if(!(r=null!=e&&n(e,l)))break;e=e[l]}return r||++o!=i?r:!!(i=null==e?0:e.length)&&uo(i)&&Dn(l,i)&&(We(e)||xo(e))}(e,t,ic)}var lc="[object String]";function sc(e){return"string"==typeof e||!We(e)&&Fe(e)&&Pe(e)==lc}function cc(e,t,n,o){return function(e,t){e&&Ps(e,t,zo)}(e,(function(e,i,r){t(o,n(e),i,r)})),o}var ac,uc,dc=Object.prototype.toString,fc=(ac=function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dc.call(t)),e[t]=n},uc=rn(lt),function(e,t){return cc(e,ac,uc(t),{})}),hc=fc;function pc(e,t){return t.length<2?e:function(e,t){for(var n=0,o=(t=pi(t,e)).length;null!=e&&n<o;)e=e[gi(t[n++])];return n&&n==o?e:void 0}(e,Bi(t,0,-1))}var vc=Ao&&Ao.isArrayBuffer,gc=vc?No(vc):function(e){return Fe(e)&&"[object ArrayBuffer]"==Pe(e)},mc=gc,yc="[object Boolean]";function bc(e){return!0===e||!1===e||Fe(e)&&Pe(e)==yc}var Cc="[object Map]",wc="[object Set]",xc=Object.prototype.hasOwnProperty;function Sc(e){if(null==e)return!0;if(fo(e)&&(We(e)||"string"==typeof e||"function"==typeof e.splice||Do(e)||Ro(e)||xo(e)))return!e.length;var t=sl(e);if(t==Cc||t==wc)return!e.size;if(go(e))return!Wo(e).length;for(var n in e)if(xc.call(e,n))return!1;return!0}function Ec(e,t){return Ms(e,t)}var kc="[object Number]";function Dc(e){return"number"==typeof e||Fe(e)&&Pe(e)==kc}function Ic(e){return Dc(e)&&e!=+e}function Nc(e){return null===e}function Lc(e){return void 0===e}var Bc=po((function(e,t,n){Ys(e,t,n)})),Tc=Bc;function Ac(e,t){return null==(e=pc(e,t=pi(t,e)))||delete e[gi(Js(t))]}function Mc(e){return Li(e)?void 0:e}var Oc,Rc=(Oc=function(e,t){var n={};if(null==e)return n;var o=!1;t=je(t,(function(t){return t=pi(t,e),o||(o=t.length>1),t})),ro(e,Ur(e),n),o&&(n=Gl(n,7,Mc));for(var i=t.length;i--;)Ac(n,t[i]);return n},an(so(Oc,void 0,wi),Oc+"")),Pc=Rc;function Fc(e,t,n,o){for(var i=n-1,r=e.length;++i<r;)if(o(e[i],t))return i;return-1}var Hc=Array.prototype.splice;function _c(e,t){return e&&e.length&&t&&t.length?function(e,t,n,o){var i=o?Fc:fn,r=-1,l=t.length,s=e;for(e===t&&(t=Yt(t)),n&&(s=je(e,No(n)));++r<l;)for(var c=0,a=t[r],u=n?n(a):a;(c=i(s,u,c,o))>-1;)s!==e&&Hc.call(s,c,1),Hc.call(e,c,1);return e}(e,t):e}function jc(e){return e&&e.length?function(e,t){for(var n,o=-1,i=e.length;++o<i;){var r=t(e[o]);void 0!==r&&(n=void 0===n?r:n+r)}return n}(e,lt):0}var Wc="Expected a function";function zc(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(Wc);return Ke(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),Vs(e,t,{leading:o,maxWait:t,trailing:i})}var Vc=Kr&&1/as(new Kr([,-0]))[1]==1/0?function(e){return new Kr(e)}:zt,$c=200;function Zc(e){return e&&e.length?function(e,t,n){var o=-1,i=hn,r=e.length,l=!0,s=[],c=s;if(n)l=!1,i=Ks;else if(r>=$c){var a=t?null:Vc(e);if(a)return as(a);l=!1,i=is,c=new ns}else c=t?[]:s;e:for(;++o<r;){var u=e[o],d=t?t(u):u;if(u=n||0!==u?u:0,l&&d==d){for(var f=c.length;f--;)if(c[f]===d)continue e;t&&c.push(d),s.push(u)}else i(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}(e):[]}var Uc=function(e,t){return Uc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Uc(e,t)};function qc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Uc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Yc(e,t,n,o){return new(n||(n=Promise))((function(i,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(l,s)}c((o=o.apply(e,t||[])).next())}))}function Kc(e,t){var n,o,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(l=0)),l;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,o=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){l=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){l.label=s[1];break}if(6===s[0]&&l.label<i[1]){l.label=i[1],i=s;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(s);break}i[2]&&l.ops.pop(),l.trys.pop();continue}s=t.call(e,l)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function Gc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xc(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)l.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return l}function Jc(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}function Qc(e){return this instanceof Qc?(this.v=e,this):new Qc(e)}function ea(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(e,t||[]),r=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(e){i[e]&&(o[e]=function(t){return new Promise((function(n,o){r.push([e,t,n,o])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof Qc?Promise.resolve(n.value.v).then(c,a):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){s("next",e)}function a(e){s("throw",e)}function u(e,t){e(t),r.shift(),r.length&&s(r[0][0],r[0][1])}}function ta(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Gc(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,i){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,i,(t=e[n](t)).done,t.value)}))}}}function na(e){return"function"==typeof e}"function"==typeof SuppressedError&&SuppressedError;var oa,ia,ra=(oa=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}},(ia=oa((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),ia.prototype.constructor=ia,ia);function la(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var sa=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,o,i;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var l=Gc(r),s=l.next();!s.done;s=l.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else r.remove(this);var c=this.initialTeardown;if(na(c))try{c()}catch(e){i=e instanceof ra?e.errors:[e]}var a=this._finalizers;if(a){this._finalizers=null;try{for(var u=Gc(a),d=u.next();!d.done;d=u.next()){var f=d.value;try{aa(f)}catch(e){i=null!=i?i:[],e instanceof ra?i=Jc(Jc([],Xc(i)),Xc(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}if(i)throw new ra(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)aa(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&la(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&la(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();function ca(e){return e instanceof sa||e&&"closed"in e&&na(e.remove)&&na(e.add)&&na(e.unsubscribe)}function aa(e){na(e)?e():e.unsubscribe()}sa.EMPTY;var ua={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},da={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=da.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,Jc([e,t],Xc(n))):setTimeout.apply(void 0,Jc([e,t],Xc(n)))},clearTimeout:function(e){var t=da.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function fa(e){da.setTimeout((function(){throw e}))}function ha(){}var pa=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ca(t)&&t.add(n)):n.destination=Ca,n}return qc(t,e),t.create=function(e,t,n){return new ya(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(sa),va=Function.prototype.bind;function ga(e,t){return va.call(e,t)}var ma=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ba(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ba(e)}else ba(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ba(e)}},e}(),ya=function(e){function t(t,n,o){var i,r,l=e.call(this)||this;na(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=o?o:void 0}:l&&ua.useDeprecatedNextContext?((r=Object.create(t)).unsubscribe=function(){return l.unsubscribe()},i={next:t.next&&ga(t.next,r),error:t.error&&ga(t.error,r),complete:t.complete&&ga(t.complete,r)}):i=t;return l.destination=new ma(i),l}return qc(t,e),t}(pa);function ba(e){fa(e)}var Ca={closed:!0,next:ha,error:function(e){throw e},complete:ha},wa="function"==typeof Symbol&&Symbol.observable||"@@observable";function xa(e){return e}var Sa=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,i=this,r=function(e){return e&&e instanceof pa||function(e){return e&&na(e.next)&&na(e.error)&&na(e.complete)}(e)&&ca(e)}(e)?e:new ya(e,t,n);return o=function(){var e=i,t=e.operator,n=e.source;r.add(t?t.call(r,n):n?i._subscribe(r):i._trySubscribe(r))},o(),r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ea(t))((function(t,o){var i=new ya({next:function(t){try{e(t)}catch(e){o(e),i.unsubscribe()}},error:o,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[wa]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?xa:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ea(e))((function(e,n){var o;t.subscribe((function(e){return o=e}),(function(e){return n(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}();function Ea(e){var t;return null!==(t=null!=e?e:ua.Promise)&&void 0!==t?t:Promise}function ka(e){return function(t){if(function(e){return na(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Da(e,t,n,o,i){return new Ia(e,t,n,o,i)}var Ia=function(e){function t(t,n,o,i,r,l){var s=e.call(this,t)||this;return s.onFinalize=r,s.shouldUnsubscribe=l,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=o?function(){try{o()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return qc(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(pa),Na={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,o=Na.delegate;o&&(t=o.requestAnimationFrame,n=o.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new sa((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Na.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,Jc([],Xc(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Na.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,Jc([],Xc(e)))},delegate:void 0},La={now:function(){return(La.delegate||Date).now()},delegate:void 0},Ba=function(e){function t(t,n){return e.call(this)||this}return qc(t,e),t.prototype.schedule=function(e,t){return this},t}(sa),Ta={setInterval:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=Ta.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,Jc([e,t],Xc(n))):setInterval.apply(void 0,Jc([e,t],Xc(n)))},clearInterval:function(e){var t=Ta.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Aa=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return qc(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Ta.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Ta.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,o=!1;try{this.work(e)}catch(e){o=!0,n=e||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,la(o,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Ba),Ma=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=La.now,e}(),Oa=function(e){function t(t,n){void 0===n&&(n=Ma.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return qc(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ma),Ra=new Oa(Aa),Pa=Ra,Fa=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return qc(t,e),t.prototype.requestAsyncId=function(t,n,o){return void 0===o&&(o=0),null!==o&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Na.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,o){var i;if(void 0===o&&(o=0),null!=o?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var r=t.actions;null!=n&&(null===(i=r[r.length-1])||void 0===i?void 0:i.id)!==n&&(Na.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Aa),Ha=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qc(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,o=this.actions;e=e||o.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=o[0])&&e.id===t&&o.shift());if(this._active=!1,n){for(;(e=o[0])&&e.id===t&&o.shift();)e.unsubscribe();throw n}},t}(Oa))(Fa),_a=new Sa((function(e){return e.complete()}));function ja(e){return e&&na(e.schedule)}function Wa(e){return e[e.length-1]}function za(e){return ja(Wa(e))?e.pop():void 0}var Va=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function $a(e){return na(null==e?void 0:e.then)}function Za(e){return na(e[wa])}function Ua(e){return Symbol.asyncIterator&&na(null==e?void 0:e[Symbol.asyncIterator])}function qa(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Ya="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ka(e){return na(null==e?void 0:e[Ya])}function Ga(e){return ea(this,arguments,(function(){var t,n,o;return Kc(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Qc(t.read())];case 3:return n=i.sent(),o=n.value,n.done?[4,Qc(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Qc(o)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function Xa(e){return na(null==e?void 0:e.getReader)}function Ja(e){if(e instanceof Sa)return e;if(null!=e){if(Za(e))return i=e,new Sa((function(e){var t=i[wa]();if(na(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Va(e))return o=e,new Sa((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if($a(e))return n=e,new Sa((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,fa)}));if(Ua(e))return Qa(e);if(Ka(e))return t=e,new Sa((function(e){var n,o;try{for(var i=Gc(t),r=i.next();!r.done;r=i.next()){var l=r.value;if(e.next(l),e.closed)return}}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}e.complete()}));if(Xa(e))return Qa(Ga(e))}var t,n,o,i;throw qa(e)}function Qa(e){return new Sa((function(t){(function(e,t){var n,o,i,r;return Yc(this,void 0,void 0,(function(){var l,s;return Kc(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=ta(e),c.label=1;case 1:return[4,n.next()];case 2:if((o=c.sent()).done)return[3,4];if(l=o.value,t.next(l),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),o&&!o.done&&(r=n.return)?[4,r.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function eu(e,t,n,o,i){void 0===o&&(o=0),void 0===i&&(i=!1);var r=t.schedule((function(){n(),i?e.add(this.schedule(null,o)):this.unsubscribe()}),o);if(e.add(r),!i)return r}function tu(e,t){return void 0===t&&(t=0),ka((function(n,o){n.subscribe(Da(o,(function(n){return eu(o,e,(function(){return o.next(n)}),t)}),(function(){return eu(o,e,(function(){return o.complete()}),t)}),(function(n){return eu(o,e,(function(){return o.error(n)}),t)})))}))}function nu(e,t){return void 0===t&&(t=0),ka((function(n,o){o.add(e.schedule((function(){return n.subscribe(o)}),t))}))}function ou(e,t){if(!e)throw new Error("Iterable cannot be null");return new Sa((function(n){eu(n,t,(function(){var o=e[Symbol.asyncIterator]();eu(n,t,(function(){o.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function iu(e,t){if(null!=e){if(Za(e))return function(e,t){return Ja(e).pipe(nu(t),tu(t))}(e,t);if(Va(e))return function(e,t){return new Sa((function(n){var o=0;return t.schedule((function(){o===e.length?n.complete():(n.next(e[o++]),n.closed||this.schedule())}))}))}(e,t);if($a(e))return function(e,t){return Ja(e).pipe(nu(t),tu(t))}(e,t);if(Ua(e))return ou(e,t);if(Ka(e))return function(e,t){return new Sa((function(n){var o;return eu(n,t,(function(){o=e[Ya](),eu(n,t,(function(){var e,t,i;try{t=(e=o.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return na(null==o?void 0:o.return)&&o.return()}}))}(e,t);if(Xa(e))return function(e,t){return ou(Ga(e),t)}(e,t)}throw qa(e)}function ru(e,t){return t?iu(e,t):Ja(e)}function lu(e,t){return ka((function(n,o){var i=0;n.subscribe(Da(o,(function(n){o.next(e.call(t,n,i++))})))}))}var su=Array.isArray;function cu(e){return lu((function(t){return function(e,t){return su(t)?e.apply(void 0,Jc([],Xc(t))):e(t)}(e,t)}))}function au(e,t,n){return void 0===n&&(n=1/0),na(t)?au((function(n,o){return lu((function(e,i){return t(n,e,o,i)}))(Ja(e(n,o)))}),n):("number"==typeof t&&(n=t),ka((function(t,o){return function(e,t,n,o,i,r,l,s){var c=[],a=0,u=0,d=!1,f=function(){!d||c.length||a||t.complete()},h=function(e){return a<o?p(e):c.push(e)},p=function(e){r&&t.next(e),a++;var s=!1;Ja(n(e,u++)).subscribe(Da(t,(function(e){null==i||i(e),r?h(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{a--;for(var e=function(){var e=c.shift();l?eu(t,l,(function(){return p(e)})):p(e)};c.length&&a<o;)e();f()}catch(e){t.error(e)}})))};return e.subscribe(Da(t,h,(function(){d=!0,f()}))),function(){null==s||s()}}(t,o,e,n)})))}function uu(e){return void 0===e&&(e=1/0),au(xa,e)}function du(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return uu(1)(ru(e,za(e)))}var fu=["addListener","removeListener"],hu=["addEventListener","removeEventListener"],pu=["on","off"];function vu(e,t,n,o){if(na(n)&&(o=n,n=void 0),o)return vu(e,t,n).pipe(cu(o));var i=Xc(function(e){return na(e.addEventListener)&&na(e.removeEventListener)}(e)?hu.map((function(o){return function(i){return e[o](t,i,n)}})):function(e){return na(e.addListener)&&na(e.removeListener)}(e)?fu.map(gu(e,t)):function(e){return na(e.on)&&na(e.off)}(e)?pu.map(gu(e,t)):[],2),r=i[0],l=i[1];if(!r&&Va(e))return au((function(e){return vu(e,t,n)}))(Ja(e));if(!r)throw new TypeError("Invalid event target");return new Sa((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return r(t),function(){return l(t)}}))}function gu(e,t){return function(n){return function(o){return e[n](t,o)}}}function mu(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Pa);var o=-1;return null!=t&&(ja(t)?n=t:o=t),new Sa((function(t){var i=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;i<0&&(i=0);var r=0;return n.schedule((function(){t.closed||(t.next(r++),0<=o?this.schedule(void 0,o):t.complete())}),i)}))}function yu(e,t){return void 0===e&&(e=0),void 0===t&&(t=Ra),e<0&&(e=0),mu(e,e,t)}function bu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=za(e),o=function(e,t){return"number"==typeof Wa(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?Ja(i[0]):uu(o)(ru(i,n)):_a}var Cu=Array.isArray;function wu(e,t){return ka((function(n,o){var i=0;n.subscribe(Da(o,(function(n){return e.call(t,n,i++)&&o.next(n)})))}))}function xu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return na(Wa(e))?e.pop():void 0}(e),o=function(e){return 1===e.length&&Cu(e[0])?e[0]:e}(e);return o.length?new Sa((function(e){var t=o.map((function(){return[]})),i=o.map((function(){return!1}));e.add((function(){t=i=null}));for(var r=function(r){Ja(o[r]).subscribe(Da(e,(function(o){if(t[r].push(o),t.every((function(e){return e.length}))){var l=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,Jc([],Xc(l))):l),t.some((function(e,t){return!e.length&&i[t]}))&&e.complete()}}),(function(){i[r]=!0,!t[r].length&&e.complete()})))},l=0;!e.closed&&l<o.length;l++)r(l);return function(){t=i=null}})):_a}function Su(e,t){return void 0===t&&(t=Ra),ka((function(n,o){var i=null,r=null,l=null,s=function(){if(i){i.unsubscribe(),i=null;var e=r;r=null,o.next(e)}};function c(){var n=l+e,r=t.now();if(r<n)return i=this.schedule(void 0,n-r),void o.add(i);s()}n.subscribe(Da(o,(function(n){r=n,l=t.now(),i||(i=t.schedule(c,e),o.add(i))}),(function(){s(),o.complete()}),void 0,(function(){r=i=null})))}))}function Eu(e){return e<=0?function(){return _a}:ka((function(t,n){var o=0;t.subscribe(Da(n,(function(t){++o<=e&&(n.next(t),e<=o&&n.complete())})))}))}function ku(e,t){return t?function(n){return du(t.pipe(Eu(1),ka((function(e,t){e.subscribe(Da(t,ha))}))),n.pipe(ku(e)))}:au((function(t,n){return Ja(e(t,n)).pipe(Eu(1),function(e){return lu((function(){return e}))}(t))}))}function Du(e,t){void 0===t&&(t=Ra);var n=mu(e,t);return ku((function(){return n}))}function Iu(e,t){return ka((function(n,o){var i=null,r=0,l=!1,s=function(){return l&&!i&&o.complete()};n.subscribe(Da(o,(function(n){null==i||i.unsubscribe();var l=0,c=r++;Ja(e(n,c)).subscribe(i=Da(o,(function(e){return o.next(t?t(n,e,c,l++):e)}),(function(){i=null,s()})))}),(function(){l=!0,s()})))}))}function Nu(e){return ka((function(t,n){Ja(e).subscribe(Da(n,(function(){return n.complete()}),ha)),!n.closed&&t.subscribe(n)}))}function Lu(e,t,n){void 0===t&&(t=Ra);var o=mu(e,t);return function(e,t){return ka((function(n,o){var i=null!=t?t:{},r=i.leading,l=void 0===r||r,s=i.trailing,c=void 0!==s&&s,a=!1,u=null,d=null,f=!1,h=function(){null==d||d.unsubscribe(),d=null,c&&(g(),f&&o.complete())},p=function(){d=null,f&&o.complete()},v=function(t){return d=Ja(e(t)).subscribe(Da(o,h,p))},g=function(){if(a){a=!1;var e=u;u=null,o.next(e),!f&&v(e)}};n.subscribe(Da(o,(function(e){a=!0,u=e,(!d||d.closed)&&(l?g():v(e))}),(function(){f=!0,(!(c&&a&&d)||d.closed)&&o.complete()})))}))}((function(){return o}),n)}const Bu=Symbol.for("immer-pro-nothing"),Tu=Symbol.for("immer-pro-draftable"),Au=Symbol.for("immer-pro-state"),Mu=Symbol.for("immer-pro-nodraft");function Ou(e,...t){throw new Error(`[Immer Pro] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}const Ru=Object.getPrototypeOf;function Pu(e){return!!e&&!!e[Au]}function Fu(e){return!!e&&!!e[Mu]}function Hu(e){var t;return!!e&&(ju(e)||Array.isArray(e)||!!e[Tu]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Tu])||Uu(e)||qu(e))}const _u=Object.prototype.constructor.toString();function ju(e){if(!e||"object"!=typeof e)return!1;const t=Ru(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===_u}function Wu(e){return Pu(e)||Ou(15),e[Au].base_}function zu(e,t){0===Vu(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,o)=>t(o,n,e)))}function Vu(e){const t=e[Au];return t?t.type_:Array.isArray(e)?1:Uu(e)?2:qu(e)?3:0}function $u(e,t){return 2===Vu(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Zu(e,t,n){const o=Vu(e);2===o?e.set(t,n):3===o?e.add(n):e[t]=n}function Uu(e){return e instanceof Map}function qu(e){return e instanceof Set}function Yu(e){return e.copy_||e.base_}function Ku(e,t){if(Uu(e))return new Map(e);if(qu(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ju(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Au];let n=Reflect.ownKeys(t);for(let o=0;o<n.length;o++){const i=n[o],r=t[i];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[i]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[i]})}return Object.create(Ru(e),t)}{const t=Ru(e);if(null!==t&&n)return{...e};const o=Object.create(t);return Object.assign(o,e)}}function Gu(e,t=!1){return Qu(e)||Pu(e)||Fu(e)||!Hu(e)||(Vu(e)>1&&(e.set=e.add=e.clear=e.delete=Ju),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>Gu(t,!0)))),e}function Xu(e){return Pu(e)||Fu(e)||!Hu(e)||(e[Mu]=!0),e}function Ju(){Ou(2)}function Qu(e){return Object.isFrozen(e)}const ed={};function td(e){const t=ed[e];return t||Ou(0),t}let nd;function od(){return nd}function id(e,t){t&&(td("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function rd(e){ld(e),e.drafts_.forEach(cd),e.drafts_=null}function ld(e){e===nd&&(nd=e.parent_)}function sd(e){return nd={drafts_:[],parent_:nd,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cd(e){const t=e[Au];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ad(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Au].modified_&&(rd(t),Ou(4)),Hu(e)&&(e=ud(t,e),t.parent_||fd(t,e)),t.patches_&&td("Patches").generateReplacementPatches_(n[Au].base_,e,t.patches_,t.inversePatches_)):e=ud(t,n,[]),rd(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Bu?e:void 0}function ud(e,t,n){if(Qu(t))return t;const o=t[Au];if(!o)return zu(t,((i,r)=>dd(e,o,t,i,r,n))),t;if(o.scope_!==e)return t;if(!o.modified_)return fd(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const t=o.copy_;let i=t,r=!1;if(3===o.type_&&(i=new Set(t),t.clear(),r=!0),Array.isArray(i)&&o.ranges_&&!o.norange_){const l=o.ranges_;for(const[s,c]of l)for(let l=s;l<=c;l++){const s=i[l];dd(e,o,t,l,s,n,r)}}else zu(i,((i,l)=>dd(e,o,t,i,l,n,r)));fd(e,t,!1),n&&e.patches_&&td("Patches").generatePatches_(o,n,e.patches_,e.inversePatches_)}return o.copy_}function dd(e,t,n,o,i,r,l){if(Pu(i)){const l=ud(e,i,r&&t&&3!==t.type_&&!$u(t.assigned_,o)?r.concat(o):void 0);if(Zu(n,o,l),!Pu(l))return;e.canAutoFreeze_=!1}else l&&n.add(i);if(Hu(i)&&!Qu(i)&&!Fu(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ud(e,i),t&&t.scope_.parent_||"symbol"==typeof o||!Object.prototype.propertyIsEnumerable.call(n,o)||fd(e,i)}}function fd(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Gu(t,n)}const hd={get(e,t){if(t===Au)return e;const n=Yu(e);if(!$u(n,t))return function(e,t,n){var o;const i=gd(t,n);return i?"value"in i?i.value:null===(o=i.get)||void 0===o?void 0:o.call(e.draft_):void 0}(e,n,t);const o=n[t];return e.finalized_||!Hu(o)?o:o===vd(e.base_,t)?(yd(e),e.copy_[t]=bd(o,e)):o},has:(e,t)=>t in Yu(e),ownKeys:e=>Reflect.ownKeys(Yu(e)),set(e,t,n){const o=gd(Yu(e),t);if(null==o?void 0:o.set)return o.set.call(e.draft_,n),!0;if(!e.modified_){const o=vd(Yu(e),t),i=null==o?void 0:o[Au];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,o)&&(void 0!==n||$u(e.base_,t)))return!0;yd(e),md(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==vd(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,yd(e),md(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Yu(e),o=Reflect.getOwnPropertyDescriptor(n,t);return o?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:o.enumerable,value:n[t]}:o},defineProperty(){Ou(11)},getPrototypeOf:e=>Ru(e.base_),setPrototypeOf(){Ou(12)}},pd={};function vd(e,t){const n=e[Au];return(n?Yu(n):e)[t]}function gd(e,t){if(!(t in e))return;let n=Ru(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Ru(n)}}function md(e){e.modified_||(e.modified_=!0,e.parent_&&md(e.parent_))}function yd(e){e.copy_||(e.copy_=Ku(e.base_,e.scope_.immer_.useStrictShallowCopy_),e.copy_[Mu]&&delete e.copy_[Mu])}zu(hd,((e,t)=>{pd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),pd.deleteProperty=function(e,t){return pd.set.call(this,e,t,void 0)},pd.set=function(e,t,n){return hd.set.call(this,e[0],t,n,e[0])};function bd(e,t){const n=Uu(e)?td("MapSet").proxyMap_(e,t):qu(e)?td("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),o={type_:n?1:0,scope_:t?t.scope_:od(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=o,r=hd;n&&(i=[o],r=pd);const{revoke:l,proxy:s}=Proxy.revocable(i,r);return o.draft_=s,o.revoke_=l,s}(e,t);return(t?t.scope_:od()).drafts_.push(n),n}function Cd(e){return Pu(e)||Ou(10),wd(e)}function wd(e){if(!Hu(e)||Qu(e))return e;const t=e[Au];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ku(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ku(e,!0);return zu(n,((e,t)=>{Zu(n,e,wd(t))})),t&&(t.finalized_=!1),n}const xd=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const o=this;return function(e=n,...i){return o.produce(e,(e=>t.call(this,e,...i)))}}let o;if("function"!=typeof t&&Ou(6),void 0!==n&&"function"!=typeof n&&Ou(7),Hu(e)){const i=sd(this),r=bd(e,void 0);let l=!0;try{o=t(r),l=!1}finally{l?rd(i):ld(i)}return id(i,n),ad(o,i)}if(!e||"object"!=typeof e){if(o=t(e),void 0===o&&(o=e),o===Bu&&(o=void 0),this.autoFreeze_&&Gu(o,!0),n){const t=[],i=[];td("Patches").generateReplacementPatches_(e,o,t,i),n(t,i)}return o}Ou(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,o;const i=this.produce(e,t,((e,t)=>{n=e,o=t}));return[i,n,o]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Hu(e)||Ou(8),Pu(e)&&(e=Cd(e));const t=sd(this),n=bd(e,void 0);return n[Au].isManual_=!0,ld(t),n}finishDraft(e,t){const n=e&&e[Au];n&&n.isManual_||Ou(9);const{scope_:o}=n;return id(o,t),ad(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}n>-1&&(t=t.slice(n+1));const o=td("Patches").applyPatches_;return Pu(e)?o(e,t):this.produce(e,(e=>o(e,t)))}},Sd=xd.produce;xd.produceWithPatches.bind(xd);const Ed=xd.setAutoFreeze.bind(xd);function kd(e){const t=Z(0),n=Z(e);return!0!==e&&n.current===e||t.current++,n.current=e,t.current}function Dd(e){const t=Z(e);return t.current=e,t}xd.setUseStrictShallowCopy.bind(xd),xd.applyPatches.bind(xd),xd.createDraft.bind(xd),xd.finishDraft.bind(xd),U(null);const Id=["click","bdclick","pointer","mouse","key","composition","blur","focus","context","copy","cut","paste","change","input","beforeinput","load","error","scroll","wheel","transition","touch"];function Nd(e,t){const n=Z(new Set),o=W((()=>e=>{var t;null===(t=n.current)||void 0===t||t.forEach((t=>{t.next(e)}))}),[]),i=W((()=>new Sa((e=>{var t;return null===(t=n.current)||void 0===t||t.add(e),()=>{var t;null===(t=n.current)||void 0===t||t.delete(e)}}))),[]);return i.type=e,i.listener=o,i.options=t,i}function Ld(e,t){const n={};for(const o of e){const e=Id.find((e=>0===o.type.indexOf(e)));let i=o.type;if(e){i=`on${e[0].toUpperCase()+e.slice(1)}`;const t=o.type.replace(e,"");t&&(i+=t[0].toUpperCase()+t.slice(1))}n[i]=e=>{o.listener(e);const n=null==t?void 0:t[i];"function"==typeof n&&n(e)},o.options&&(n[i].options=o.options)}return n}function Bd({...e},t){for(const n in t){const o=e[n],i=t[n];i&&n.startsWith("on")&&(e[n]=o?(e,...t)=>{let n=!0;const r=e.stopPropagation.bind(e);e.stopPropagation=()=>(n=!1,r()),i(e,...t),n&&o(e,...t)}:i)}return e}function Td(...e){return t=>{var n;let o=!0;for(let i=e.length-1;i>=0&&o;i--){if(void 0===e[i])continue;const r=t.stopPropagation.bind(t);t.stopPropagation=()=>(o=!1,r()),null===(n=e[i])||void 0===n||n.call(e,t)}}}function Ad(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Md(...e){return Sd((t=>{try{t=function(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}(...e.slice().reverse())(t)}catch(e){}return t}))}function Od(e,t){const[n,o]=$(e),i=Dd(t),r=_(((...e)=>{const t=i.current;o(t?n=>Md(...e)(t(n)):Md(...e))}),[i]);return[n,r]}function Rd(e){return Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(e)}Ed(!1);var Pd=/^\s+/,Fd=/\s+$/;function Hd(e,t){if(t=t||{},(e=e||"")instanceof Hd)return e;if(!(this instanceof Hd))return new Hd(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=null,i=null,r=null,l=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(Pd,"").replace(Fd,"").toLowerCase();var t,n=!1;if(tf[e])e=tf[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=vf.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=vf.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=vf.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=vf.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=vf.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=vf.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=vf.hex8.exec(e))return{r:sf(t[1]),g:sf(t[2]),b:sf(t[3]),a:df(t[4]),format:n?"name":"hex8"};if(t=vf.hex6.exec(e))return{r:sf(t[1]),g:sf(t[2]),b:sf(t[3]),format:n?"name":"hex"};if(t=vf.hex4.exec(e))return{r:sf(t[1]+""+t[1]),g:sf(t[2]+""+t[2]),b:sf(t[3]+""+t[3]),a:df(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=vf.hex3.exec(e))return{r:sf(t[1]+""+t[1]),g:sf(t[2]+""+t[2]),b:sf(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==Rd(e)&&(gf(e.r)&&gf(e.g)&&gf(e.b)?(c=e.r,a=e.g,u=e.b,t={r:255*rf(c,255),g:255*rf(a,255),b:255*rf(u,255)},l=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):gf(e.h)&&gf(e.s)&&gf(e.v)?(o=af(e.s),i=af(e.v),t=function(e,t,n){e=6*rf(e,360),t=rf(t,100),n=rf(n,100);var o=Math.floor(e),i=e-o,r=n*(1-t),l=n*(1-i*t),s=n*(1-(1-i)*t),c=o%6,a=[n,l,r,r,s,n][c],u=[s,n,n,l,r,r][c],d=[r,r,s,n,n,l][c];return{r:255*a,g:255*u,b:255*d}}(e.h,o,i),l=!0,s="hsv"):gf(e.h)&&gf(e.s)&&gf(e.l)&&(o=af(e.s),r=af(e.l),t=function(e,t,n){var o,i,r;function l(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=rf(e,360),t=rf(t,100),n=rf(n,100),0===t)o=i=r=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;o=l(c,s,e+1/3),i=l(c,s,e),r=l(c,s,e-1/3)}return{r:255*o,g:255*i,b:255*r}}(e.h,o,r),l=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));var c,a,u;return n=of(n),{ok:l,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function _d(e,t,n){e=rf(e,255),t=rf(t,255),n=rf(n,255);var o,i,r=Math.max(e,t,n),l=Math.min(e,t,n),s=(r+l)/2;if(r==l)o=i=0;else{var c=r-l;switch(i=s>.5?c/(2-r-l):c/(r+l),r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return{h:o,s:i,l:s}}function jd(e,t,n){e=rf(e,255),t=rf(t,255),n=rf(n,255);var o,i,r=Math.max(e,t,n),l=Math.min(e,t,n),s=r,c=r-l;if(i=0===r?0:c/r,r==l)o=0;else{switch(r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return{h:o,s:i,v:s}}function Wd(e,t,n,o){var i=[cf(Math.round(e).toString(16)),cf(Math.round(t).toString(16)),cf(Math.round(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function zd(e,t,n,o){return[cf(uf(o)),cf(Math.round(e).toString(16)),cf(Math.round(t).toString(16)),cf(Math.round(n).toString(16))].join("")}function Vd(e,t){t=0===t?0:t||10;var n=Hd(e).toHsl();return n.s-=t/100,n.s=lf(n.s),Hd(n)}function $d(e,t){t=0===t?0:t||10;var n=Hd(e).toHsl();return n.s+=t/100,n.s=lf(n.s),Hd(n)}function Zd(e){return Hd(e).desaturate(100)}function Ud(e,t){t=0===t?0:t||10;var n=Hd(e).toHsl();return n.l+=t/100,n.l=lf(n.l),Hd(n)}function qd(e,t){t=0===t?0:t||10;var n=Hd(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Hd(n)}function Yd(e,t){t=0===t?0:t||10;var n=Hd(e).toHsl();return n.l-=t/100,n.l=lf(n.l),Hd(n)}function Kd(e,t){var n=Hd(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,Hd(n)}function Gd(e){var t=Hd(e).toHsl();return t.h=(t.h+180)%360,Hd(t)}function Xd(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Hd(e).toHsl(),o=[Hd(e)],i=360/t,r=1;r<t;r++)o.push(Hd({h:(n.h+r*i)%360,s:n.s,l:n.l}));return o}function Jd(e){var t=Hd(e).toHsl(),n=t.h;return[Hd(e),Hd({h:(n+72)%360,s:t.s,l:t.l}),Hd({h:(n+216)%360,s:t.s,l:t.l})]}function Qd(e,t,n){t=t||6,n=n||30;var o=Hd(e).toHsl(),i=360/n,r=[Hd(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,r.push(Hd(o));return r}function ef(e,t){t=t||6;for(var n=Hd(e).toHsv(),o=n.h,i=n.s,r=n.v,l=[],s=1/t;t--;)l.push(Hd({h:o,s:i,v:r})),r=(r+s)%1;return l}Hd.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=of(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=jd(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=jd(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=_d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=_d(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return Wd(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,i){var r=[cf(Math.round(e).toString(16)),cf(Math.round(t).toString(16)),cf(Math.round(n).toString(16)),cf(uf(o))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*rf(this._r,255))+"%",g:Math.round(100*rf(this._g,255))+"%",b:Math.round(100*rf(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*rf(this._r,255))+"%, "+Math.round(100*rf(this._g,255))+"%, "+Math.round(100*rf(this._b,255))+"%)":"rgba("+Math.round(100*rf(this._r,255))+"%, "+Math.round(100*rf(this._g,255))+"%, "+Math.round(100*rf(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(nf[Wd(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+zd(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=Hd(e);n="#"+zd(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Hd(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Ud,arguments)},brighten:function(){return this._applyModification(qd,arguments)},darken:function(){return this._applyModification(Yd,arguments)},desaturate:function(){return this._applyModification(Vd,arguments)},saturate:function(){return this._applyModification($d,arguments)},greyscale:function(){return this._applyModification(Zd,arguments)},spin:function(){return this._applyModification(Kd,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Qd,arguments)},complement:function(){return this._applyCombination(Gd,arguments)},monochromatic:function(){return this._applyCombination(ef,arguments)},splitcomplement:function(){return this._applyCombination(Jd,arguments)},triad:function(){return this._applyCombination(Xd,[3])},tetrad:function(){return this._applyCombination(Xd,[4])}},Hd.fromRatio=function(e,t){if("object"==Rd(e)){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:af(e[o]));e=n}return Hd(e,t)},Hd.equals=function(e,t){return!(!e||!t)&&Hd(e).toRgbString()==Hd(t).toRgbString()},Hd.random=function(){return Hd.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Hd.mix=function(e,t,n){n=0===n?0:n||50;var o=Hd(e).toRgb(),i=Hd(t).toRgb(),r=n/100;return Hd({r:(i.r-o.r)*r+o.r,g:(i.g-o.g)*r+o.g,b:(i.b-o.b)*r+o.b,a:(i.a-o.a)*r+o.a})},Hd.readability=function(e,t){var n=Hd(e),o=Hd(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},Hd.isReadable=function(e,t,n){var o,i,r=Hd.readability(e,t);switch(i=!1,(o=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+o.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7}return i},Hd.mostReadable=function(e,t,n){var o,i,r,l,s=null,c=0;i=(n=n||{}).includeFallbackColors,r=n.level,l=n.size;for(var a=0;a<t.length;a++)(o=Hd.readability(e,t[a]))>c&&(c=o,s=Hd(t[a]));return Hd.isReadable(e,s,{level:r,size:l})||!i?s:(n.includeFallbackColors=!1,Hd.mostReadable(e,["#fff","#000"],n))};var tf=Hd.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},nf=Hd.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(tf);function of(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function rf(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function lf(e){return Math.min(1,Math.max(0,e))}function sf(e){return parseInt(e,16)}function cf(e){return 1==e.length?"0"+e:""+e}function af(e){return e<=1&&(e=100*e+"%"),e}function uf(e){return Math.round(255*parseFloat(e)).toString(16)}function df(e){return sf(e)/255}var ff,hf,pf,vf=(hf="[\\s|\\(]+("+(ff="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ff+")[,|\\s]+("+ff+")\\s*\\)?",pf="[\\s|\\(]+("+ff+")[,|\\s]+("+ff+")[,|\\s]+("+ff+")[,|\\s]+("+ff+")\\s*\\)?",{CSS_UNIT:new RegExp(ff),rgb:new RegExp("rgb"+hf),rgba:new RegExp("rgba"+pf),hsl:new RegExp("hsl"+hf),hsla:new RegExp("hsla"+pf),hsv:new RegExp("hsv"+hf),hsva:new RegExp("hsva"+pf),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function gf(e){return!!vf.CSS_UNIT.exec(e)}const mf="#fff",yf="#23396b",bf="rgba(214, 219, 224, 0.32)",Cf="rgba(163, 166, 168, 0.32)",wf="rgba(112, 118, 121, 0.32)",xf="transparent",Sf="rgba(198, 198, 198, 0.32)",Ef="rgba(150, 150, 150, 0.32)",kf="#333",Df="#666",If="#999",Nf="0 0 3px 1px rgba(0, 0, 0, 0.18)",Lf="#545454",Bf=485,Tf=450,Af="undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),Mf="undefined"!=typeof navigator&&/mac os x/i.test(navigator.userAgent),Of="undefined"!=typeof navigator&&/win/i.test(navigator.userAgent),Rf="undefined"!=typeof navigator&&/linux/i.test(navigator.userAgent),Pf="undefined"!=typeof navigator&&/Mobile|Tablet/i.test(navigator.userAgent),Ff="undefined"!=typeof navigator&&/shuli/i.test(navigator.userAgent),Hf="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),_f="undefined"!=typeof navigator&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),jf="undefined"!=typeof navigator&&/Chrome/.test(navigator.userAgent),Wf="undefined"!=typeof navigator&&/Harmony/i.test(navigator.userAgent)&&!/HuaweiBrowser/i.test(navigator.userAgent),zf="undefined"!=typeof navigator&&/QQ/.test(navigator.userAgent),Vf="undefined"!=typeof navigator&&/MicroMessenger/.test(navigator.userAgent),$f="undefined"!=typeof navigator&&/ArkWeb/i.test(navigator.userAgent)&&Wf&&Pf,Zf=$f&&!zf&&!Vf,Uf=Zf;function qf(e){return e<=26?String.fromCharCode(e+64):qf(~~((e-1)/26))+qf(e%26||26)}const Yf=["i","ii","iii","iv","v","vi","vii","viii","ix","x"];function Kf(e){return Math.ceil(4*e/3)}const Gf={32:" ",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};for(let e=0;e<=25;e++)Gf[65+e]=String.fromCharCode(65+e);for(let e=0;e<=9;e++)Gf[48+e]=String(e),Gf[96+e]=String(e);for(let e=0;e<=29;e++)Gf[112+e]=`F${e+1}`;const Xf={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Jf={add:"+",ctrl:"control",space:" ",del:"delete",esc:"escape","→":"arrowright","←":"arrowleft","↑":"arrowup","↓":"arrowdown",...Mf&&{"⌘":"meta","⇧":"shift","⌥":"alt"},...Of&&{win:"meta"}};function Qf(e,t){Array.isArray(e)||(e=[e]);const n=e.map((e=>function(e){const t={};e=e.replace("++","+add").toLowerCase();const n=e.split("+"),{length:o}=n;for(const e in Xf)t[Xf[e]]=!1;for(let e of n){const n=e.endsWith("?")&&e.length>1;n&&(e=e.slice(0,-1));const i=Jf[e]||e,r=Xf[i];1!==o&&r||(t.key=i),r&&(t[r]=!n||null)}return t}(e)));return n.some((e=>function(e,t){for(const n in e){const o=e[n];let i;if(null!=o&&(i="key"===n&&null!=t.key?t.key.toLowerCase():t[n],(null!=i||!1!==o)&&o!==i&&o!==Gf[t.keyCode]?.toLowerCase()))return!1}return!0}(e,t)))}function eh(e,t){return!!Qf(e,t)&&(t.preventDefault(),!0)}function th(e,t){return!!Qf(e,t)&&(t.stopPropagation(),!0)}const nh=Symbol.for("ruset"),oh=Promise.resolve();var ih;function rh(e){var t;return null!==(t=e.children)&&void 0!==t?t:null}function lh(e,t,n){return void 0!==t.key&&delete t.key,{type:e,key:n,props:t,symbol:nh}}oh.then.bind(oh),function(e){e.div="div",e.span="span",e.text="text",e.img="img",e.input="input",e.iframe="iframe",e.textarea="textarea",e.svg="svg",e.path="path",e.circle="circle",e.a="a",e.br="br",e.pre="pre",e.code="code"}(ih||(ih={}));const sh=lh;function ch(e){return lh("div",{...e})}const ah={position:"relative"},uh={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:`rgba(255, 255, 255, ${Hf?1:.85})`,WebkitBackdropFilter:"blur(20px)",backdropFilter:"blur(20px)",pointerEvents:"none",zIndex:-1,transform:"translate3d(0, 0, 0)"};function dh(e){return e?(delete(e={...e}).background,delete e.backgroundColor,delete e.backdropFilter,{...ah,...e}):ah}function fh(e){if(!e)return ah;const t={};return(e={...e}).background&&(t.background=e.background),e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.borderRadius&&(t.borderRadius=e.borderRadius),e.WebkitBackdropFilter&&(t.WebkitBackdropFilter=e.WebkitBackdropFilter),e.backdropFilter&&(t.backdropFilter=e.backdropFilter),{...uh,...t}}function hh({children:e,style:t,...n}){return sh(ch,{...n,style:dh(t),children:[e,lh("div",{style:fh(t)})]})}const ph="undefined"!=typeof window?window.devicePixelRatio:1,vh=100*ph+"%",gh=100*ph+"%",mh={borderColor:Pf?"#a7a7a7":"#ddd",borderStyle:"solid",borderWidth:0,zIndex:1},yh={width:vh,height:gh,transform:Pf?`scale3d(${1/ph}, ${1/ph}, 1)`:`scale(${1/ph})`,borderColor:"inherit",borderStyle:"inherit",boxSizing:"border-box",zIndex:1},bh={width:"100%",height:gh,transform:Pf?`scale3d(1, ${1/ph}, 1)`:`scale(1, ${1/ph})`,borderColor:"inherit",borderStyle:"inherit",boxSizing:"border-box",zIndex:1},Ch={width:vh,height:"100%",transform:Pf?`scale3d(${1/ph}, 1, 1)`:`scale(${1/ph}, 1)`,borderColor:"inherit",borderStyle:"inherit",boxSizing:"border-box",zIndex:1},wh={position:"relative",...mh},xh={position:"absolute",top:0,left:0,right:0,transformOrigin:"top",pointerEvents:"none",borderWidth:0,borderTopWidth:1,borderStyle:"solid",...bh},Sh={position:"absolute",bottom:0,left:0,right:0,transformOrigin:"bottom",pointerEvents:"none",borderWidth:0,borderBottomWidth:1,borderStyle:"solid",...bh},Eh={position:"absolute",right:0,top:0,bottom:0,transformOrigin:"right",pointerEvents:"none",borderWidth:0,borderRightWidth:1,borderStyle:"solid",...Ch},kh={position:"absolute",left:0,top:0,bottom:0,transformOrigin:"left",pointerEvents:"none",borderWidth:0,borderLeftWidth:1,borderStyle:"solid",...Ch},Dh={position:"absolute",right:0,top:0,transformOrigin:"top right",pointerEvents:"none",borderWidth:0,borderRightWidth:1,borderTopWidth:1,borderStyle:"solid",...yh,width:150*ph+"%",height:150*ph+"%"},Ih={position:"absolute",right:0,bottom:0,transformOrigin:"bottom right",pointerEvents:"none",borderWidth:0,borderRightWidth:1,borderBottomWidth:1,borderStyle:"solid",...yh,width:150*ph+"%",height:150*ph+"%"},Nh={position:"absolute",left:0,top:0,transformOrigin:"top left",pointerEvents:"none",borderWidth:0,borderLeftWidth:1,borderTopWidth:1,borderStyle:"solid",...yh,width:150*ph+"%",height:150*ph+"%"},Lh={position:"absolute",left:0,bottom:0,transformOrigin:"bottom left",pointerEvents:"none",borderWidth:0,borderLeftWidth:1,borderBottomWidth:1,borderStyle:"solid",...yh,width:150*ph+"%",height:150*ph+"%"},Bh={position:"absolute",left:0,top:0,transformOrigin:"top left",pointerEvents:"none",borderWidth:1,borderStyle:"solid",...yh};var Th=Object.freeze({__proto__:null,all:Bh,borderView:wh,bottom:Sh,bottomLeft:Lh,bottomRight:Ih,hairLine:mh,hairLineEdge:yh,hairLineHorizontalEdge:Ch,hairLineVerticalEdge:bh,left:kh,right:Eh,top:xh,topLeft:Nh,topRight:Dh});const Ah="undefined"!=typeof window?window.devicePixelRatio:1,Mh=function({type:e,borderStyle:t,...n}){if("none"===e)return lh("div",{...n,children:n.children});const o=n.style?.width,i=n.style?.height;if(void 0===e||"all"===e){const e={...Bh,...t};return Dc(o)&&(e.width=Ah*o),Dc(i)&&(e.height=Ah*i),sh("div",{...n,style:{...wh,...n.style},children:[n.children,lh("div",{style:e})]})}const r={...Th[Ir(e)],...t};return sh("div",{...n,style:{...wh,...n.style},children:[n.children,lh("div",{style:r})]})},Oh={borderRadius:Pf?8:4,padding:"8px 20px",fontSize:Pf?14:12,fontWeight:Pf?Bf:"bold",color:"#fff",userSelect:"none",boxSizing:"border-box",minWidth:75,textAlign:"center"},Rh={borderRadius:Pf?8:4,padding:"6px 18px",fontSize:Pf?14:12,fontWeight:Pf?Bf:"bold",color:yf,border:`1px solid ${yf}`,userSelect:"none",boxSizing:"border-box",minWidth:75,textAlign:"center"};function Ph(e){return"function"==typeof e}function Fh(e){return function(t){if(function(e){return Ph(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var Hh=function(e,t){return Hh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Hh(e,t)};function _h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Hh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function jh(e,t,n,o){return new(n||(n=Promise))((function(i,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(l,s)}c((o=o.apply(e,t||[])).next())}))}function Wh(e,t){var n,o,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(l=0)),l;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,o=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){l=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){l.label=s[1];break}if(6===s[0]&&l.label<i[1]){l.label=i[1],i=s;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(s);break}i[2]&&l.ops.pop(),l.trys.pop();continue}s=t.call(e,l)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function zh(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vh(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)l.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return l}function $h(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}function Zh(e){return this instanceof Zh?(this.v=e,this):new Zh(e)}function Uh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(e,t||[]),r=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(e){i[e]&&(o[e]=function(t){return new Promise((function(n,o){r.push([e,t,n,o])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof Zh?Promise.resolve(n.value.v).then(c,a):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){s("next",e)}function a(e){s("throw",e)}function u(e,t){e(t),r.shift(),r.length&&s(r[0][0],r[0][1])}}function qh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=zh(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,i){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,i,(t=e[n](t)).done,t.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;var Yh=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Kh(e){return Ph(null==e?void 0:e.then)}var Gh=function(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Xh(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Jh=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,o,i;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var l=zh(r),s=l.next();!s.done;s=l.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else r.remove(this);var c=this.initialTeardown;if(Ph(c))try{c()}catch(e){i=e instanceof Gh?e.errors:[e]}var a=this._finalizers;if(a){this._finalizers=null;try{for(var u=zh(a),d=u.next();!d.done;d=u.next()){var f=d.value;try{ep(f)}catch(e){i=null!=i?i:[],e instanceof Gh?i=$h($h([],Vh(i)),Vh(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}if(i)throw new Gh(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ep(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Xh(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Xh(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();function Qh(e){return e instanceof Jh||e&&"closed"in e&&Ph(e.remove)&&Ph(e.add)&&Ph(e.unsubscribe)}function ep(e){Ph(e)?e():e.unsubscribe()}Jh.EMPTY;var tp={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},np={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return setTimeout.apply(void 0,$h([e,t],Vh(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function op(e){np.setTimeout((function(){throw e}))}function ip(){}var rp=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Qh(t)&&t.add(n)):n.destination=dp,n}return _h(t,e),t.create=function(e,t,n){return new ap(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Jh),lp=Function.prototype.bind;function sp(e,t){return lp.call(e,t)}var cp=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){up(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){up(e)}else up(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){up(e)}},e}(),ap=function(e){function t(t,n,o){var i,r,l=e.call(this)||this;Ph(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=o?o:void 0}:l&&tp.useDeprecatedNextContext?((r=Object.create(t)).unsubscribe=function(){return l.unsubscribe()},i={next:t.next&&sp(t.next,r),error:t.error&&sp(t.error,r),complete:t.complete&&sp(t.complete,r)}):i=t;return l.destination=new cp(i),l}return _h(t,e),t}(rp);function up(e){op(e)}var dp={closed:!0,next:ip,error:function(e){throw e},complete:ip},fp="function"==typeof Symbol&&Symbol.observable||"@@observable";function hp(e){return e}var pp=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,i=this,r=function(e){return e&&e instanceof rp||function(e){return e&&Ph(e.next)&&Ph(e.error)&&Ph(e.complete)}(e)&&Qh(e)}(e)?e:new ap(e,t,n);return o=function(){var e=i,t=e.operator,n=e.source;r.add(t?t.call(r,n):n?i._subscribe(r):i._trySubscribe(r))},o(),r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=vp(t))((function(t,o){var i=new ap({next:function(t){try{e(t)}catch(e){o(e),i.unsubscribe()}},error:o,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[fp]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?hp:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=vp(e))((function(e,n){var o;t.subscribe((function(e){return o=e}),(function(e){return n(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}();function vp(e){var t;return null!==(t=null!=e?e:tp.Promise)&&void 0!==t?t:Promise}function gp(e){return Ph(e[fp])}function mp(e){return Symbol.asyncIterator&&Ph(null==e?void 0:e[Symbol.asyncIterator])}function yp(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var bp="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Cp(e){return Ph(null==e?void 0:e[bp])}function wp(e){return Uh(this,arguments,(function(){var t,n,o;return Wh(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Zh(t.read())];case 3:return n=i.sent(),o=n.value,n.done?[4,Zh(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Zh(o)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function xp(e){return Ph(null==e?void 0:e.getReader)}function Sp(e){if(e instanceof pp)return e;if(null!=e){if(gp(e))return i=e,new pp((function(e){var t=i[fp]();if(Ph(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Yh(e))return o=e,new pp((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if(Kh(e))return n=e,new pp((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,op)}));if(mp(e))return Ep(e);if(Cp(e))return t=e,new pp((function(e){var n,o;try{for(var i=zh(t),r=i.next();!r.done;r=i.next()){var l=r.value;if(e.next(l),e.closed)return}}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}e.complete()}));if(xp(e))return Ep(wp(e))}var t,n,o,i;throw yp(e)}function Ep(e){return new pp((function(t){(function(e,t){var n,o,i,r;return jh(this,void 0,void 0,(function(){var l,s;return Wh(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=qh(e),c.label=1;case 1:return[4,n.next()];case 2:if((o=c.sent()).done)return[3,4];if(l=o.value,t.next(l),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),o&&!o.done&&(r=n.return)?[4,r.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function kp(e,t,n,o,i){return new Dp(e,t,n,o,i)}var Dp=function(e){function t(t,n,o,i,r,l){var s=e.call(this,t)||this;return s.onFinalize=r,s.shouldUnsubscribe=l,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=o?function(){try{o()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return _h(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(rp);var Ip=function(e){function t(t,n){return e.call(this)||this}return _h(t,e),t.prototype.schedule=function(e,t){return this},t}(Jh),Np=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return setInterval.apply(void 0,$h([e,t],Vh(n)))},Lp=function(e){return clearInterval(e)},Bp=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return _h(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Np(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Lp(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,o=!1;try{this.work(e)}catch(e){o=!0,n=e||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Xh(o,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Ip),Tp=function(){return Date.now()},Ap=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Tp,e}(),Mp=function(e){function t(t,n){void 0===n&&(n=Ap.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return _h(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ap),Op=new Mp(Bp),Rp=Op;function Pp(e){return e&&Ph(e.schedule)}function Fp(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Rp);var o=-1;return null!=t&&(Pp(t)?n=t:o=t),new pp((function(t){var i=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;i<0&&(i=0);var r=0;return n.schedule((function(){t.closed||(t.next(r++),0<=o?this.schedule(void 0,o):t.complete())}),i)}))}function Hp(e,t){return void 0===t&&(t=Op),n=function(){return Fp(e,t)},Fh((function(e,t){var o=!1,i=null,r=null,l=!1,s=function(){if(null==r||r.unsubscribe(),r=null,o){o=!1;var e=i;i=null,t.next(e)}l&&t.complete()},c=function(){r=null,l&&t.complete()};e.subscribe(kp(t,(function(e){o=!0,i=e,r||Sp(n(e)).subscribe(r=kp(t,s,c))}),(function(){l=!0,(!o||!r||r.closed)&&t.complete()})))}));var n}function _p(e,t){return void 0===t&&(t=null),t=null!=t?t:e,Fh((function(n,o){var i=[],r=0;n.subscribe(kp(o,(function(n){var l,s,c,a,u=null;r++%t==0&&i.push([]);try{for(var d=zh(i),f=d.next();!f.done;f=d.next()){(v=f.value).push(n),e<=v.length&&(u=null!=u?u:[]).push(v)}}catch(e){l={error:e}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(l)throw l.error}}if(u)try{for(var h=zh(u),p=h.next();!p.done;p=h.next()){var v=p.value;Xh(i,v),o.next(v)}}catch(e){c={error:e}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(c)throw c.error}}}),(function(){var e,t;try{for(var n=zh(i),r=n.next();!r.done;r=n.next()){var l=r.value;o.next(l)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}o.complete()}),void 0,(function(){i=null})))}))}function jp(e,t,n,o,i){void 0===o&&(o=0),void 0===i&&(i=!1);var r=t.schedule((function(){n(),i?e.add(this.schedule(null,o)):this.unsubscribe()}),o);if(e.add(r),!i)return r}function Wp(e,t){return void 0===t&&(t=0),Fh((function(n,o){n.subscribe(kp(o,(function(n){return jp(o,e,(function(){return o.next(n)}),t)}),(function(){return jp(o,e,(function(){return o.complete()}),t)}),(function(n){return jp(o,e,(function(){return o.error(n)}),t)})))}))}function zp(e,t){return void 0===t&&(t=0),Fh((function(n,o){o.add(e.schedule((function(){return n.subscribe(o)}),t))}))}function Vp(e,t){if(!e)throw new Error("Iterable cannot be null");return new pp((function(n){jp(n,t,(function(){var o=e[Symbol.asyncIterator]();jp(n,t,(function(){o.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function $p(e,t){if(null!=e){if(gp(e))return function(e,t){return Sp(e).pipe(zp(t),Wp(t))}(e,t);if(Yh(e))return function(e,t){return new pp((function(n){var o=0;return t.schedule((function(){o===e.length?n.complete():(n.next(e[o++]),n.closed||this.schedule())}))}))}(e,t);if(Kh(e))return function(e,t){return Sp(e).pipe(zp(t),Wp(t))}(e,t);if(mp(e))return Vp(e,t);if(Cp(e))return function(e,t){return new pp((function(n){var o;return jp(n,t,(function(){o=e[bp](),jp(n,t,(function(){var e,t,i;try{t=(e=o.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return Ph(null==o?void 0:o.return)&&o.return()}}))}(e,t);if(xp(e))return function(e,t){return Vp(wp(e),t)}(e,t)}throw yp(e)}function Zp(e,t){return Fh((function(n,o){var i=0;n.subscribe(kp(o,(function(n){o.next(e.call(t,n,i++))})))}))}function Up(e,t,n){return void 0===n&&(n=1/0),Ph(t)?Up((function(n,o){return Zp((function(e,i){return t(n,e,o,i)}))(Sp(e(n,o)))}),n):("number"==typeof t&&(n=t),Fh((function(t,o){return function(e,t,n,o,i,r,l,s){var c=[],a=0,u=0,d=!1,f=function(){!d||c.length||a||t.complete()},h=function(e){return a<o?p(e):c.push(e)},p=function(e){r&&t.next(e),a++;var s=!1;Sp(n(e,u++)).subscribe(kp(t,(function(e){null==i||i(e),r?h(e):t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{a--;for(var e=function(){var e=c.shift();l?jp(t,l,(function(){return p(e)})):p(e)};c.length&&a<o;)e();f()}catch(e){t.error(e)}})))};return e.subscribe(kp(t,h,(function(){d=!0,f()}))),function(){null==s||s()}}(t,o,e,n)})))}function qp(){return void 0===(e=1)&&(e=1/0),Up(hp,e);var e}function Yp(e,t){return void 0===t&&(t=Op),Fh((function(n,o){var i=null,r=null,l=null,s=function(){if(i){i.unsubscribe(),i=null;var e=r;r=null,o.next(e)}};function c(){var n=l+e,r=t.now();if(r<n)return i=this.schedule(void 0,n-r),void o.add(i);s()}n.subscribe(kp(o,(function(n){r=n,l=t.now(),i||(i=t.schedule(c,e),o.add(i))}),(function(){s(),o.complete()}),void 0,(function(){r=i=null})))}))}function Kp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qp()(function(e,t){return t?$p(e,t):Sp(e)}(e,function(e){return Pp((t=e)[t.length-1])?e.pop():void 0;var t}(e)))}var Gp=new pp((function(e){return e.complete()}));function Xp(e){return e<=0?function(){return Gp}:Fh((function(t,n){var o=0;t.subscribe(kp(n,(function(t){++o<=e&&(n.next(t),e<=o&&n.complete())})))}))}function Jp(e,t){return t?function(n){return Kp(t.pipe(Xp(1),Fh((function(e,t){e.subscribe(kp(t,ip))}))),n.pipe(Jp(e)))}:Up((function(t,n){return Sp(e(t,n)).pipe(Xp(1),function(e){return Zp((function(){return e}))}(t))}))}function Qp(e,t){void 0===t&&(t=Op);var n=Fp(e,t);return Jp((function(){return n}))}function ev(e,t){return e===t}function tv(e,t){return Fh((function(n,o){var i=0;n.subscribe(kp(o,(function(n){return e.call(t,n,i++)&&o.next(n)})))}))}function nv(e){return Fh((function(t,n){var o=!1,i=kp(n,(function(){null==i||i.unsubscribe(),o=!0}),ip);Sp(e).subscribe(i),t.subscribe(kp(n,(function(e){return o&&n.next(e)})))}))}function ov(e){return Fh((function(t,n){var o=!1,i=0;t.subscribe(kp(n,(function(t){return(o||(o=!e(t,i++)))&&n.next(t)})))}))}function iv(e,t){return Fh((function(n,o){var i=null,r=0,l=!1,s=function(){return l&&!i&&o.complete()};n.subscribe(kp(o,(function(n){null==i||i.unsubscribe();var l=0,c=r++;Sp(e(n,c)).subscribe(i=kp(o,(function(e){return o.next(t?t(n,e,c,l++):e)}),(function(){i=null,s()})))}),(function(){l=!0,s()})))}))}function rv(e){return Fh((function(t,n){Sp(e).subscribe(kp(n,(function(){return n.complete()}),ip)),!n.closed&&t.subscribe(n)}))}function lv(e,t,n){void 0===t&&(t=Op);var o=Fp(e,t);return function(e,t){return Fh((function(n,o){var i=null!=t?t:{},r=i.leading,l=void 0===r||r,s=i.trailing,c=void 0!==s&&s,a=!1,u=null,d=null,f=!1,h=function(){null==d||d.unsubscribe(),d=null,c&&(g(),f&&o.complete())},p=function(){d=null,f&&o.complete()},v=function(t){return d=Sp(e(t)).subscribe(kp(o,h,p))},g=function(){if(a){a=!1;var e=u;u=null,o.next(e),!f&&v(e)}};n.subscribe(kp(o,(function(e){a=!0,u=e,(!d||d.closed)&&(l?g():v(e))}),(function(){f=!0,(!(c&&a&&d)||d.closed)&&o.complete()})))}))}((function(){return o}),n)}const sv={cursor:"pointer",transition:"background-color 0.1s"},cv=Object.freeze({default:bf,hover:Cf,active:wf}),av=Object.freeze({default:yf,hover:"#1c3161",active:"#132652"}),uv=Object.freeze({default:xf,hover:Sf,active:Ef});function dv(e){return lh(Pf?fv:hv,{...e})}function fv({colors:e,type:t,...n}){const o=Dd(n),i=Z(uv);"light"===t?i.current=cv:"theme"===t?i.current=av:"background"===t&&(i.current=uv),e&&(i.current=e);const[r,l]=$(i.current.default),s=Nd("touchstart");F((()=>{let e,t,n;const r=s.subscribe((o=>{const i=o.target;e=vu(i,"touchmove"),t=vu(i,"touchend"),n=vu(i,"touchcancel")})),c=s.pipe(iv((t=>mu(o.current.touchDelay??80).pipe(rv(e))))).subscribe((()=>{l(i.current.hover)})),a=s.pipe(iv((()=>{const t=o.current.touchDelay??80;return e.pipe(Qp(t+10)).pipe(Xp(1))}))).subscribe((()=>{l(i.current.default)})),u=s.pipe(iv((()=>bu(t,n).pipe(Qp(160))))).subscribe((e=>{l(i.current.default)})),d=s.pipe(iv((()=>bu(t,n)))).subscribe((o=>{e=null,t=null,n=null}));return()=>{r.unsubscribe(),c.unsubscribe(),a.unsubscribe(),u.unsubscribe(),d.unsubscribe(),e=null,t=null,n=null}}),[o,s]);const c={...sv};return c.backgroundColor=r,n.style&&Object.assign(c,n.style),lh(ch,{...n,style:c,...Ld([s],n),children:n.children})}function hv({colors:e,type:t,...n}){const o=Z(uv);"light"===t?o.current=cv:"theme"===t?o.current=av:"background"===t&&(o.current=uv),e&&(o.current=e);const[i,r]=$(o.current.default),l=Nd("pointerup"),s=Nd("pointermove"),c=Nd("pointerdown"),a=Nd("pointermove"),u=Nd("pointerenter"),d=Nd("pointerleave");return F((()=>(window.addEventListener("pointerup",l.listener,!0),window.addEventListener("pointermove",s.listener,!0),()=>{window.removeEventListener("pointerup",l.listener,!0),window.removeEventListener("pointermove",s.listener,!0)})),[l,s]),F((()=>{const e=bu(u.pipe(iv((()=>d.pipe(rv(c))))),u.pipe(iv((()=>l.pipe(nv(d))))),c.pipe(iv((()=>d.pipe(nv(l))))),c.pipe(iv((()=>l.pipe(nv(d))))),s.pipe(Hp(100),(void 0===n&&(n=hp),t=null!=t?t:ev,Fh((function(e,o){var i,r=!0;e.subscribe(kp(o,(function(e){var l=n(e);!r&&t(i,l)||(r=!1,i=l,o.next(e))})))}))),iv((()=>s.pipe(rv(a)))))).subscribe((()=>{r(o.current.default)}));var t,n;return()=>e.unsubscribe()}),[l,s,u,c,d,a]),F((()=>{const e=bu(u,a,c.pipe(iv((()=>xu(mu(100),l).pipe(rv(d))))),c.pipe(iv((()=>l.pipe(nv(u)))))).subscribe((()=>{r(o.current.hover)}));return()=>e.unsubscribe()}),[u,c,a,l,d,s]),F((()=>{const e=bu(c,c.pipe(iv((()=>s.pipe(rv(l)))))).subscribe((()=>{r(o.current.active)}));return()=>e.unsubscribe()}),[c,s,l]),lh(ch,{...n,style:{...sv,backgroundColor:i,...n.style},...Ld([c,a,u,d],n),children:n.children})}function pv({type:e,disabled:t,onClick:n,...o}){if("default"===e){const e={...Rh,...o.style};return t&&(e.opacity=.8,e.cursor="not-allowed",n=void 0),lh(dv,{type:"background",onClick:n,...o,style:e})}const i={...Oh,...o.style};return t&&(i.opacity=.8,i.cursor="not-allowed",n=void 0),lh(dv,{type:"theme",onClick:n,...o,style:i})}function vv(e,t){const n=Hd(e),o=n.toHsl(),i=n.toHsv(),r=n.toRgb(),l=n.toHex(),s=n.isValid(),c=n.getOriginalInput();0===o.s&&(o.h=t||0,i.h=t||0);return{hsl:o,hsv:i,rgb:r,hex:"000000"===l&&0===r.a?"transparent":`#${l}`,isValid:s,value:"string"==typeof c?c:`#${l}`}}function gv(e){const t=vv(e.value);return{sEdge:!1,hEdge:!1,color:t,left:100*t.hsl.s}}function mv(e,t){switch(t.type){case"UPDATE_COLOR_STRING":{const n=e.color.hsl,o=vv(t.color,n.h);return{...e,color:o}}case"UPDATE_COLOR_HSV":{const n=e.color.hsv,o=vv({h:n.h,a:n.a,...t.color},n.h);return{...e,color:o}}case"UPDATE_COLOR_HSL":{const n=e.color.hsl,o=vv({s:n.s,l:n.l,a:n.a,...t.color},t.color.h);return{...e,color:o}}case"UPDATE_S_EDGE":return{...e,sEdge:t.sEdge};case"UPDATE_H_EDGE":return{...e,hEdge:t.hEdge};case"UPDATE_LEFT":return{...e,left:t.left};default:return e}}const yv={position:"absolute",top:0,left:0,right:0,bottom:0},bv={display:"flex",flexDirection:"column"},Cv={height:40,width:"100%",display:"flex",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAABlBMVEXMzMw46qqDAAAAIklEQVRIx2OAgf9QMCowKjAqMCpApMCA2z8qMCowKjBkBQAGkPwuVbwb1gAAAABJRU5ErkJggg==)",backgroundSize:8,position:"relative"},wv={display:"flex",flex:1,justifyContent:"center",alignItems:"center",color:"#fff",cursor:"pointer"},xv={display:"flex",height:200,boxSizing:"border-box",paddingTop:10},Sv={display:"flex",flex:1,position:"relative",overflow:"hidden"},Ev={width:40,height:"100%",marginLeft:10,position:"relative",overflow:"hidden"},kv={...yv,backgroundColor:"rgb(0, 109, 255)"},Dv={...yv,background:"linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0))"},Iv={...yv,background:"linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0))"},Nv={...yv,background:"linear-gradient(\n    to bottom,\n    rgb(255, 0, 0) 0%,\n    rgb(255, 255, 0) 17%,\n    rgb(0, 255, 0) 33%,\n    rgb(0, 255, 255) 50%,\n    rgb(0, 0, 255) 67%,\n    rgb(255, 0, 255) 83%,\n    rgb(255, 0, 0) 100%\n  )"},Lv={position:"absolute",width:10,height:10,borderRadius:"50%",border:"1px solid #fff",boxShadow:"0 0 1px 1px rgba(0, 0, 0, 0.1)",transform:"translate(-6px, -6px)"},Bv={position:"absolute",top:0,left:-2,right:-2,height:3,border:"2px solid rgba(255, 255, 255, 0.6)",boxShadow:"0 0 1px 1px rgba(0, 0, 0, 0.2)",transform:"translate(0, -3px)"},Tv={border:0,padding:0,backgroundColor:"transparent",width:"100%",height:40,lineHeight:40,color:"#fff",textAlign:"center",fontSize:14};function Av(e){const[t,n]=z(mv,e,gv),o=Z(null),i=Z(null),r=function(e,t,n,{saturation:o,hue:i}){const r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("pointerdown"),c=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]),F((()=>{const e=bu(s,s.pipe(iv((()=>r.pipe(rv(l)))))).subscribe((e=>{const t=o.current;if(null===t)return;const i=t.clientWidth,r=t.clientHeight,l=t.getBoundingClientRect(),s=Math.max(Math.min(e.pageX-l.left,i),0),c=Math.max(Math.min(e.pageY-l.top,r),0);let a=100*s/i,u=-100*c/r+100;a>0&&a<1&&(a=1.0000001),u>0&&u<1&&(u=1.0000001),n({type:"UPDATE_S_EDGE",sEdge:c===r}),n(function(e){return{type:"UPDATE_LEFT",left:e}}(a)),n(function(e){return{type:"UPDATE_COLOR_HSV",color:e}}({s:a,v:u}))}));return()=>{e.unsubscribe()}}),[n,r,l,s,o]),F((()=>{const e=bu(c,c.pipe(iv((()=>r.pipe(rv(l)))))).subscribe((e=>{const t=i.current;if(null===t)return;const o=t.clientHeight,r=t.getBoundingClientRect(),l=Math.max(Math.min(e.pageY-r.top,o),0);let s=0;s=0===l?0:l===o?360:360*l/o,n({type:"UPDATE_H_EDGE",hEdge:l===o}),n(function(e){return{type:"UPDATE_COLOR_HSL",color:e}}({h:s}))}));return()=>{e.unsubscribe()}}),[n,r,l,c,i]),F((()=>{e.onChange?.(t.color.hex)})),{saturation:Ld([s]),hue:Ld([c])}}(e,t,n,{saturation:o,hue:i});return sh("div",{style:{...bv,...e.style},children:[lh("div",{style:Cv,children:lh(Mh,{style:{flex:1},children:lh("div",{style:{...wv,backgroundColor:t.color.hex},children:lh("input",{style:Tv,type:"text",value:t.color.value,onKeyDown:e=>e.stopPropagation(),onInput:e=>function(e,t){t(function(e){return{type:"UPDATE_COLOR_STRING",color:e}}(e.target.value))}(e,n)})})})}),sh("div",{style:xv,children:[lh("div",{style:Sv,children:lh("div",{ref:o,...r.saturation,style:{...kv,backgroundColor:`hsl(${t.color.hsl.h},100%, 50%)`},children:lh("div",{style:Dv,children:lh("div",{style:Iv,children:lh("div",{style:{...Lv,top:`${t.sEdge?"100":-100*t.color.hsv.v+100}%`,left:`${t.left}%`}})})})})}),lh("div",{style:Ev,...r.hue,ref:i,children:lh("div",{style:Nv,children:lh("div",{style:{...Bv,top:`${t.hEdge?"100":100*t.color.hsl.h/360}%`}})})})]})]})}const Mv={padding:"15px 5px 5px 15px"},Ov={display:"flex"},Rv={paddingBottom:10,marginRight:10},Pv={height:24,width:40,cursor:"pointer",position:"relative",outline:"none",marginBottom:1,display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",border:"1px solid transparent"},Fv={position:"absolute",top:0,left:0,bottom:0,right:0,border:"1px solid transparent",transform:"scale3d(1, 1, 1)",transition:"all 200ms"},Hv={border:"1px solid #fff",transform:"scale3d(0.98, 0.95, 1)"},_v={border:`1px solid ${Ef}`,transform:"scale3d(0.98, 0.95, 1)"},jv={borderRadius:"2px 2px 0px 0px"},Wv={borderRadius:"0px 0px 2px 2px"},zv={position:"absolute",width:12,height:6,borderBottom:"2px solid #fff",borderLeft:"2px solid #fff",transform:"rotate(-45deg)",top:5},Vv=[[["#ffffff","#D9D9D9","#969696","#525252","#333333"],["#cfd8dc","#90a4ae","#607d8b","#455a64","#263238"],["#d7ccc8","#a1887f","#795548","#5d4037","#3e2723"],["#ffcdd2","#e57373","#f44336","#d32f2f","#b71c1c"],["#ffe0b2","#ffb74d","#ff9800","#f57c00","#e65100"]],[["#fff9c4","#fff176","#ffeb3b","#fbc02d","#f57f17"],["#c8e6c9","#81c784","#4caf50","#388e3c","#1b5e20"],["#bbdefb","#64b5f6","#2196f3","#1976d2","#0d47a1"],["#c5cae9","#7986cb","#3f51b5","#303f9f","#1a237e"],["#e1bee7","#ba68c8","#9c27b0","#7b1fa2","#4a148c"]]];function $v(e){return"#ffffff"===e}var Zv=Object.freeze({__proto__:null,colors:Vv,isWhite:$v});function Uv(e){const[t,n]=$({i1:-1,i2:-1,i3:-1});return lh("div",{style:Mv,children:(e.colors||Vv).map(((o,i)=>lh("div",{style:Ov,children:o.map(((o,r)=>lh("div",{style:Rv,children:o.map(((l,s)=>sh(ch,{style:{...Pv,backgroundColor:l,...0===s?jv:void 0,...s===o.length-1?Wv:void 0},onPointerEnter:()=>((e,t,o)=>{n({i1:e,i2:t,i3:o})})(i,r,s),onPointerLeave:()=>{n({i1:-1,i2:-1,i3:-1})},onClick:()=>e.onChange?.(l),children:[lh("div",{style:{...Fv,...i===t.i1&&r===t.i2&&s===t.i3?$v(l)?_v:Hv:void 0}}),lh("div",{style:{...zv,borderColor:e.value===l?$v(l)?Ef:"#fff":"transparent"}})]},s)))},r)))},i)))})}function qv(){return sh("svg",{width:13,viewBox:"0 0 12 12",children:[lh("path",{fill:If,d:"M0 6.00895C-2.43206e-09 6.12436 0.0227314 6.23864 0.0668964 6.34526C0.111061 6.45188 0.175795 6.54876 0.257401 6.63037C0.339008 6.71198 0.435888 6.77671 0.542512 6.82087C0.649136 6.86504 0.763414 6.88777 0.878823 6.88777C0.994232 6.88777 1.10851 6.86504 1.21513 6.82087C1.32176 6.77671 1.41864 6.71198 1.50024 6.63037C1.58185 6.54876 1.64658 6.45188 1.69075 6.34526C1.73491 6.23864 1.75765 6.12436 1.75765 6.00895C1.75765 5.89354 1.73491 5.77926 1.69075 5.67264C1.64658 5.56601 1.58185 5.46913 1.50024 5.38753C1.41864 5.30592 1.32176 5.24119 1.21513 5.19702C1.10851 5.15286 0.994232 5.13013 0.878823 5.13013C0.763414 5.13013 0.649136 5.15286 0.542512 5.19702C0.435888 5.24119 0.339008 5.30592 0.257401 5.38753C0.175795 5.46913 0.111061 5.56601 0.0668964 5.67264C0.0227314 5.77926 -2.43206e-09 5.89354 0 6.00895H0Z"}),lh("path",{fill:If,d:"M4.24386 6.00898C4.24386 6.47514 4.42904 6.92221 4.75867 7.25184C5.0883 7.58147 5.53537 7.76665 6.00153 7.76665C6.4677 7.76665 6.91477 7.58147 7.24439 7.25184C7.57402 6.92221 7.7592 6.47514 7.7592 6.00898C7.7592 5.54282 7.57402 5.09575 7.24439 4.76612C6.91477 4.43649 6.4677 4.25131 6.00153 4.25131C5.53537 4.25131 5.0883 4.43649 4.75867 4.76612C4.42904 5.09575 4.24386 5.54282 4.24386 6.00898V6.00898Z"}),lh("path",{fill:If,d:"M10.2454 6.00895C10.2454 6.24203 10.338 6.46556 10.5028 6.63037C10.6676 6.79518 10.8912 6.88777 11.1242 6.88777C11.3573 6.88777 11.5808 6.79518 11.7457 6.63037C11.9105 6.46556 12.0031 6.24203 12.0031 6.00895C12.0031 5.77587 11.9105 5.55234 11.7457 5.38753C11.5808 5.22272 11.3573 5.13013 11.1242 5.13013C10.8912 5.13013 10.6676 5.22272 10.5028 5.38753C10.338 5.55234 10.2454 5.77587 10.2454 6.00895Z"})]})}function Yv(){return lh("svg",{width:6,viewBox:"0 0 6 12",children:lh("path",{d:"M0 1.5L4.5 6L0 10.5L0 12L6 6L0 -1.2666e-07L0 1.5Z",fill:"#aaa"})})}function Kv(){return lh("svg",{width:12,viewBox:"0 0 12 9",children:lh("path",{fill:Lf,d:"M4.29705 8.27557C4.13833 8.27557 3.9796 8.21528 3.85844 8.09482L0.215586 4.46985C-0.0267316 4.22872 -0.0267316 3.83788 0.215586 3.59685C0.457903 3.35571 0.85046 3.35581 1.09278 3.59675L4.29705 6.78527L10.8912 0.223574C11.1335 -0.0175584 11.526 -0.0175584 11.7683 0.223574C12.0107 0.46461 12.0107 0.85545 11.7683 1.09658L4.73565 8.09472C4.61448 8.21528 4.45576 8.27557 4.29705 8.27557Z"})})}const Gv=Pf?44:30,Xv={position:"relative",fontSize:12,boxSizing:"border-box",color:kf,userSelect:"none",borderRadius:4,boxShadow:Nf},Jv={padding:"6px 0",width:"100%"},Qv={position:"relative",paddingTop:6,marginBottom:6,width:"88%",marginLeft:"6%"},eg={minHeight:Gv,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:16,paddingRight:16,whiteSpace:"nowrap"},tg={display:"flex",height:Rf&&jf?12:"auto"},ng={display:"flex",height:12},og={color:If,transform:"scale(0.93)",transformOrigin:"right"},ig={},rg={display:"flex",justifyContent:"center",alignItems:"center",marginRight:12,width:12,position:"relative",top:.5},lg={position:"relative",top:1},sg={position:"absolute",display:"flex",justifyContent:"flex-start",alignItems:"center",width:13},cg={position:"absolute",left:"100%",top:0,zIndex:1},ag={position:"relative",padding:12},ug={display:"flex",flexDirection:"column",backgroundColor:mf,borderRadius:8,paddingTop:6,paddingBottom:6,paddingRight:12,paddingLeft:12,margin:"0 0 12px 0"},dg={height:Gv,display:"flex",alignItems:"center",userSelect:"none",fontSize:15,fontWeight:Bf,borderColor:"#d8d8d8",position:"relative"},fg={marginLeft:2,marginRight:10,width:18,display:"flex",alignItems:"center",justifyContent:"center"},hg={},pg={position:"absolute",right:5,display:"flex",alignItems:"center"},vg={marginLeft:12,display:"flex"};function gg(e){const[t,n]=$(-1),[o,i]=$({}),r=Z(null),l=Z({}),s=Z(null),c=(e,t)=>{(e.children?.length||e.inner)&&(r.current&&clearTimeout(r.current),n(t))},a=(e,t)=>{(e.children?.length||e.inner)&&(r.current=setTimeout((()=>{n(-1),i({})}),100))};H((()=>{if(-1!==t){const e=l.current[t];if(!e)return;const n=e.getBoundingClientRect(),o=document.body.clientHeight,r=n.top,s=o-r,c=n.height;i(c>s&&s<r?{transform:`translate(0, calc(-100% + ${Gv+12}px))`}:{})}}),[t]),F((()=>()=>{r.current&&clearTimeout(r.current)}),[]);const u=e.options?.[t],d=function(e,t){let n=0;for(let o=0;o<t;o++){const t=e[o];t&&(t.separate?n+=12:n+=Gv)}return n}(e.options??[],t)-(s.current?.scrollTop??0);return sh(hh,{style:{...Xv,...e.style},children:[lh("div",{ref:s,style:{...Jv,maxHeight:e.maxHeight,overflow:e.maxHeight?"auto":"unset"},children:e.options?.map(((n,o)=>!0===n.separate?lh(Mh,{type:"bottom",style:Qv},o):lh(ch,{style:{position:"relative",color:n.disable?If:"",backgroundColor:n.selected?bf:"",...n.style},onClick:()=>((n,o)=>{n.children?.length&&t||(n.action?.(n,o),e.onClick?.(n,o))})(n,o),onPointerEnter:()=>c(n,o),onPointerLeave:()=>a(n),children:sh(dv,{type:"background",style:{...eg,pointerEvents:n.disable?"none":"auto"},children:[sh("div",{style:tg,children:[n.icon&&lh("span",{style:rg,children:lh("span",{style:sg,children:n.icon})}),"string"==typeof n.name?lh("span",{style:lg,children:n.name}):n.name]}),sh("div",{style:ng,children:[n.hotkey&&lh("span",{style:og,children:n.hotkey}),(n.children||n.more)&&lh("span",{style:ig,children:lh(qv,{})})]})]})},o)))}),-1!==t&&u&&(u.children?.length||u.inner)&&lh("div",{style:{...cg,top:d,...o},ref:e=>((e,t)=>{l.current[t]=e})(e,t),onPointerEnter:()=>c(u,t),onPointerLeave:()=>a(u),children:u.children?.length?lh(gg,{style:e.style,options:u.children,onClick:e.onClick}):u.inner})]})}function mg(e){const t=e.options;return lh("div",{style:ag,children:t.map(((t,n)=>{if(0===t.length)return null;const o={...ug,...e.style};return 1===t.length&&!1!==e.adaptive&&(o.paddingTop=4,o.paddingBottom=4),lh("div",{style:o,children:t.map(((t,n)=>{const o=`${t.value}-${n}`,i=0===n?"none":"top",r=t.iconStyle??e.iconStyle,l=t.contentStyle??e.contentStyle,s=[...t.rightIcons??[]];return t.rightIconType&&s.push(t.rightIconType),sh(Mh,{onClick:()=>e.onClick?.(t),type:i,style:{...dg,...t.style,opacity:t.disable?.6:1},children:[t.icon&&lh("div",{style:{...fg,...r},children:t.icon}),lh("div",{style:{...hg,...l},children:t.name}),lh("div",{style:pg,children:s.map(((e,t)=>("more"===e?e=lh(qv,{}):"arrow"===e?e=lh(Yv,{}):"check"===e&&(e=lh(Kv,{})),lh("div",{style:vg,children:e},t))))})]},o)}))},n)}))})}const yg={position:"relative",display:"flex",justifyContent:"center"},bg={position:"absolute",zIndex:1},Cg={position:"relative"},wg={bottom:"calc(100% + 6px)"},xg={top:"calc(100% + 6px)"},Sg={left:"calc(100% + 6px)"},Eg={right:"calc(100% + 6px)"},kg={borderRadius:2,position:"relative",cursor:"pointer",width:"100%"};function Dg({direction:e="bottom",align:t="center",...n}){const o=Z(null),[i,r]=$({}),l=_((()=>{const t=o.current?.getBoundingClientRect();void 0!==t&&("top"===e||"bottom"===e?t.left<12?r({left:Math.max(t.left,12)}):t.right>window.innerWidth-12&&r({left:window.innerWidth-t.right-12}):"left"!==e&&"right"!==e||(t.top<0?r({top:t.top}):t.bottom>window.innerHeight&&r({top:window.innerHeight-t.bottom})))}),[e]);H((()=>{!0===n.active&&l()}),[l,n.active]),F((()=>{if(!n.active)return;const e=()=>{l()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[l,n.active]);const s={...bg};return"top"===e?Object.assign(s,wg):"bottom"===e?Object.assign(s,xg):"right"===e?Object.assign(s,Sg):"left"===e&&Object.assign(s,Eg),sh("div",{style:{...yg,...n.style,justifyContent:t},children:[lh("div",{style:{...kg,backgroundColor:n.active?Sf:""},children:n.children}),n.active?lh("div",{style:s,ref:o,children:lh("div",{style:{...Cg,...i},children:void 0===n.options?n.view:lh(gg,{style:{width:n.width},options:n.options,onClick:n.onSelected})})}):null]})}const Ig=U(null),Ng=U(null),Lg=U(null),Bg=U(null),Tg=U(null),Ag="-",Mg=`s${Ag}`;function Og(e){return 0===e.length?Mg:`${Mg}${e.join(Ag)}`}function Rg(e){return e!==Mg&&""!==e&&e.startsWith(Mg)?e.split(Ag).slice(1).map((e=>Number(e))):[]}function Pg(e,t){return`${e.replace(/-$/,"")}${Ag}${t}`}const Fg="\ufeff",Hg=/^[A-Za-z0-9']*$/,_g="div",jg="span",Wg="br",zg="pre",Vg="code",$g="meta-node",Zg="spies-node",Ug="side-spies-node",qg="space-node",Yg="tab-node",Kg="loupe-node",Gg="inline-node",Xg="placeholder-node",Jg="composition-node",Qg="decorate-block-node",em="decorate-inline-node",tm="reference-block-node",nm="reference-inline-node",om="rgba(50, 124, 235, 0.4)",im="rgba(50, 124, 235, 0.98)",rm="1s linear infinite breathing",lm=40,sm=50,cm=8,am=30,um=am-6,dm=16,fm=30,hm={enter:{transform:"scale3d(1, 1, 1)",opacity:1,transition:"transform 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0), opacity 100ms cubic-bezier(0.4, 0.0, 0.0, 1.0)"},leave:{transform:"scale3d(0.96, 0.96, 1)",opacity:0,transition:"transform 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0), opacity 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0)"}};function pm(e){return Array.isArray(e?.children)}function vm(e){return pm(e)&&(e.type===jg||e.type===$g||e.type===Wg||e.type===Vg||e.type===em||e.type===nm)}function gm(e){return pm(e)&&(e.type===_g||e.type===zg||e.type===Qg||e.type===tm)}function mm(e){return gm(e)&&gm(e.children[0])}function ym(e){return gm(e)&&!gm(e.children[0])}function bm(e){return Array.isArray(e?.children)&&void 0!==e.key}function Cm(e){return bm(e)&&vm(e)}function wm(e){return bm(e)&&gm(e)}function xm(e){return wm(e)&&wm(e.children[0])}function Sm(e,t){if(sc(e))return""===e||e===Fg;if(!pm(e))return!0;if(Nm(e))return!1;let n=e.children.length;if(n>1&&!t)return!1;for(;n>0;){if(!Sm(e.children[n-1],t))return!1;n--}return!0}function Em(e,t){return e===t||bm(e)&&bm(t)&&e.key===t.key}function km(e,t,n){if(sc(e)&&sc(t))return!0;if(Nm(e)||Nm(t))return!1;if(_m(e)||_m(t))return!1;if(pm(e)&&pm(t))return Ec(e.type,t.type)&&Ec(e.style,t.style)&&Ec(e.props,t.props)&&Lc(e.children.find(pm))&&Lc(t.children.find(pm));if(sc(e)&&pm(t)&&t.type===jg&&1===t.children.length&&sc(t.children[0])){if(Sc(t.style))return!0;if(n){for(let e in t.style){if(t.style[e]!==n[e])return!1}return!0}}return!1}function Dm(e,t){return e.type===t.type&&(!e.style?.display&&!t.style?.display&&(!(!Sc(e.props)||!Sc(t.props))&&(1===$m(e)&&1===$m(t))))}function Im(e,t){if(!pm(e)||!pm(t))return e===t;if(e.type!==t.type)return!1;if(e.children.length!==t.children.length)return!1;if(!Ec(e.props,t.props))return!1;let n=e.style,o=t.style;if(e.position&&(n=OC(n)),t.position&&(o=OC(o)),!Ec(n??{},o??{}))return!1;for(let n=0;n<e.children.length;n++)if(!Im(e.children[n],t.children[n]))return!1;return!0}function Nm(e){return!!pm(e)&&e.type===$g}function Lm(e){return Tm(e)||Bm(e)}function Bm(e){return!!pm(e)&&e.type===Qg}function Tm(e){return!!pm(e)&&e.type===em}function Am(e){if(!Nm(e))return!1;const t=e.children[0];return!!pm(t)&&t.props?.type===qg}function Mm(e){if(!Nm(e))return!1;const t=e.children[0];return!!pm(t)&&t.props?.type===Yg}function Om(e){if(!Nm(e))return!1;const t=e.children[0];return!!pm(t)&&t?.type===Wg}function Rm(e){if(!Nm(e))return!1;const t=e.children[0];return!!pm(t)&&t.props?.type===Xg}function Pm(e){return!!pm(e)&&e.props?.type===Jg}function Fm(e){return!!pm(e)&&e.type===Zg}function Hm(e){return!!pm(e)&&e.type===Ug}function _m(e){return Wm(e)||jm(e)}function jm(e){return!!pm(e)&&e.type===tm}function Wm(e){return!!pm(e)&&e.type===nm}function zm(e,t){const n=[{node:e,path:[]}];for(;n.length>0;){const e=n.pop(),o=t(e.node,e.path);if(!0===o)return;if(!1!==o)for(let t=e.node.children.length-1;t>=0;t--){const o=e.node.children[t];pm(o)&&n.push({node:o,path:[...e.path,t]})}}}function Vm(e,t=[]){const n={...e,critical:ym(e),key:Og(t),children:e.children.map(((e,n)=>pm(e)?Vm(e,t.concat(n)):e))};return n.style&&(n.style={...n.style}),n}function $m(e){return null===e?0:sc(e)?e.length:e.children.length}function Zm(e,t){let n=0;for(;n<t.length;){if(!pm(e))return null;e=e.children[t[n]],n++}return void 0===e?null:e}function Um(e,t){return sc(e)?null:Zm(e,Qy(e,t))}function qm(e,t){const n=[];let o=0;for(;o<t.length;){if(!pm(e))return n;e=e.children[t[o]],n.push(e),o++}return n}function Ym(e,t){const n=[];return sc(e)?n:qm(e,Qy(e,t))}function Km(e,t){const n=[];let o=e.children[0];if(t&&wm(o)&&!o.position)for(const t of e.children)if(o=t,wm(t)&&t.position)break;for(;wm(o)&&o.position;)if(n.push(o.position.top),t){const e=o.children.slice();for(const t of e)if(o=t,wm(t)&&t.position)break}else o=o.children[0];return n}function Gm(e,t){const n=Qy(e,t),o=[];let i=e.children,r=0;for(;r<n.length;){const e=i[n[r]];if(!bm(e))break;if(void 0!==e.position?.top)o.push(e.position.top);else{if(!(n[r]>0))break;{const e=i[n[r]-1];if(!bm(e)||void 0===e.position?.bottom)break;o.push(e.position.bottom)}}i=e.children,r++}return o}function Xm(e,t){let n=e={...e},o=0;for(;o<t.length;){n.children=[...n.children];const i=n.children[t[o]];if(!pm(i))return e;n.children[t[o]]={...i},n=n.children[t[o]],o++}return e}function Jm(e){let t=0;for(;wm(e)&&(e.position?.top&&(t+=e.position.top),xm(e));)t+=TC(e.style),t-=parseFloat(String(e.style?.paddingTop||0)),e=e.children[0];const n=(e.position?.bottom||0)-(e.position?.top||0);return{top:t,size:n,edge:e.critical?n:AC(e.style)}}function Qm(e){let t=0;for(;wm(e)&&(e.position?.top&&(t+=e.position.top),xm(e));)t+=TC(e.style),t-=parseFloat(String(e.style?.paddingTop||0)),e=e.children[e.children.length-1];const n=(e.position?.bottom||0)-(e.position?.top||0);return{top:t,size:n,edge:e.critical?n:TC(e.style)}}function ey(e){const t=Js(e.children);return wm(t)&&t.position?t.position.bottom:0}function ty(e){const{node:t,scrollTop:n,scrollOffset:o,threshold:i}=e,{top:r,size:l,edge:s}=Jm(t);return{diff:n-r-(l-s)-((o?.top??0)+(i??0)),size:s}}function ny(e){const{node:t,scrollTop:n,clientHeight:o,scrollOffset:i,threshold:r}=e,{top:l,edge:s}=Qm(t);return{diff:l+s-n-o-((i?.bottom??0)+(r??0)),size:s}}function oy(e){const t={type:e.type,children:e.children.map((e=>bm(e)?oy(e):e))};e.props&&(t.props=Jl(e.props));let n=e.style;return gm(e)&&(n=OC(n)),Sc(n)||(t.style=n),t}function iy(e,t){const n=Rg(t);return{...e,critical:ym(e),key:t,children:e.children.map(((e,t)=>pm(e)?iy(e,Og([...n,t])):e))}}function ry({...e}){return delete e.position,e.style=OC({...e.style}),{...e,children:e.children.map((e=>gm(e)?ry(e):e))}}function ly(e,t,n=0){if(0===t.length)return e;const o=e.children[0];if(bm(o)){const e=Rg(o.key);t=[t[0]-e[n],...t.slice(1)]}const i=e.children.slice(t[0]);let r=i[0];return bm(r)&&(r=ly(r,t.slice(1),n+1)),{...e,children:[r,...i.slice(1)]}}function sy(e,t,n){const o={type:_g,children:e};return void 0!==t&&(o.style=t),void 0!==n&&(o.props=n),o}function cy(e,t,n){const o={type:jg,children:e};return void 0!==t&&(o.style=t),void 0!==n&&(o.props=n),o}function ay(e,t){const n={type:$g,children:e};return void 0!==t&&(n.style=t),n}function uy(e){return ay([{type:jg,props:{type:qg},style:{display:"inline-block",...e},children:[Fg]}])}function dy(e){return ay([{type:jg,props:{type:Yg},style:{display:"inline-block",...e},children:[Fg]}])}function fy(){return ay([{type:Wg,children:[Fg]}])}function hy(){return ay([{type:jg,props:{type:Xg},style:{display:"inline-block",width:12},children:[Fg]}])}function py(e){return cy([e],{textDecoration:"underline"},{type:Jg})}function vy(){return{type:Kg,children:[]}}function gy(e,t=[],n="right"){const o={type:Zg,props:{origin:e},children:[]},i=[...t];return"right"===n?i.push(o):"left"===n&&i.unshift(o),{type:Ug,children:i}}function my(e){return!!e&&yy(e.anchor,e.focus)}function yy(e,t){return e.offset===t.offset&&wy(e.path,t.path)}function by(e,t){return 1===Ey(e,t)}function Cy(e,t){return-1===Ey(e,t)}function wy(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}function xy(e,t){return 1===ky(e,t)}function Sy(e,t){return-1===ky(e,t)}function Ey(e,t){const n=ky(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n}function ky(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){if(e[o]<t[o])return-1;if(e[o]>t[o])return 1}return 0}function Dy(e,t){if(bm(t)){const n=Um(t,e);if(gm(n)&&$m(n)>0)return!1}else if(pm(t)){const n=Zm(t,e);if(gm(n)&&$m(n)>0)return!1}return Iy(e)}function Iy(e){return e.filter((e=>0===e)).length===e.length}function Ny(e,t){const n=rb(e);if(null===Um(e,n))return!1;const{path:o,offset:i}=t.focus;return my(t)&&wy(o,n)&&0===i}function Ly(e,t){const n=lb(e),o=Um(e,n);if(null===o)return!1;const{path:i,offset:r}=t.focus;return my(t)&&wy(i.slice(0,n.length),n)&&$m(o)===r}function By(e,t){const{anchor:n,focus:o}=ts(e),i=rb(t),r=lb(t);return!(!xy(o.path,n.path)&&!xy(n.path,i)&&null===Um(t,n.path))&&(!(!xy(n.path,o.path)&&!xy(o.path,i)&&null===Um(t,o.path))&&(!(!Sy(o.path,n.path)&&!Sy(n.path,r)&&null===Um(t,n.path))&&!(!Sy(n.path,o.path)&&!Sy(o.path,r)&&null===Um(t,o.path))))}function Ty(e,t){if(Lc(t))return!1;const{before:n}=Oy(t),o=sb(e),i=ky(n.path,o);if(1===i)return!1;if(0===i&&n.path.length>o.length)return!Iy(o);const r=mb(e,n.path);if(wy(r,o))return!1;if(!xy(r,o))return!0;const l=Um(e,o);return!(!wm(l)||0!==l.children.length)}function Ay(e,t){if(Lc(t))return!1;const{after:n}=Oy(t),o=lb(e),i=ky(n.path,o);if(-1===i)return!1;if(0===i&&n.path.length>o.length)return!0;const r=mb(e,n.path);if(wy(r,o))return!1;if(!Sy(r,o))return!0;const l=Um(e,o);return!(!wm(l)||0!==l.children.length)}function My(e,t){if(void 0===t)return!1;if(!my(t)){return!wy(mb(e,t.focus.path),mb(e,t.anchor.path))}const{before:{path:n,offset:o}}=Oy(t,!1);if(0!==o)return!1;const i=mb(e,n),r=n.slice(i.length);return r.filter((e=>0===e)).length===r.length}function Oy(e,t=!0){let n=t?ts(e.anchor):e.anchor,o=t?ts(e.focus):e.focus;if(Cy(o,n)){let e=n;n=o,o=e}return{before:n,after:o}}function Ry(e,t){if(my(t))return t;let n=!1;const{before:o,after:i}=Oy(t),r=Um(e,o.path);if(null!==r&&$m(r)===o.offset&&(o.path=ab(e,o.path),o.offset=0,n=!0),0===i.offset){const t=fb(e,i.path),o=Um(e,t);null!==o&&(i.path=t,i.offset=$m(o),n=!0)}return!1===n?t:Cy(t.anchor,t.focus)?{anchor:o,focus:i}:{anchor:i,focus:o}}function Py(e,t){const{focus:n,anchor:o}=t;return{focus:{...n,path:Qy(e,n.path)},anchor:{...o,path:Qy(e,o.path)}}}function Fy(e,t){const n=e.selection;let o=e.node,i=o.style?.color||t?.color||yf;if(!n||!my(n))return i;const r=Qy(o,n.focus.path);for(let e=0;e<r.length;e++){const t=o.children[r[e]];if(!bm(t))break;o=t,i=o.style?.color||i}return i}function Hy(e,t){let n=e.selection;if(void 0===n)return;n=Ry(e.node,n);const o={},{before:i,after:r}=Oy(n),l=Qy(e.node,i.path);let s=0,c=e.node;do{if(bm(c)&&(Object.assign(o,c.style),c=c.children[l[s]],Nm(c)))break}while(s++<l.length);if(my(n)||(i.path=Qy(e.node,i.path),r.path=Qy(e.node,r.path),_y(e.node,e.node.style||{},o,i,r)),t)for(let e in o){const n=e;void 0===t[n]&&delete o[n]}return{...t,...o}}function _y(e,t,n,o,i){let r=0;for(;r<e.children.length;){const l=e.children[r];if((r===o.path[0]||r===i.path[0])&&i.path[0]>=0){if(sc(l)||Nm(l)){Nm(l)&&l.style&&(t={...t,...l.style});for(let e in n){const o=n[e],i=t[e]??"";i!==o&&("textDecorationLine"===e?-1!==i.indexOf(o)?n[e]=o:-1!==o.indexOf(i)?n[e]=i:delete n[e]:delete n[e])}}else if(bm(l)&&l.children.length){const e={...o,path:Qs(o.path)},s={...i,path:Qs(i.path)};(Sc(e.path)||r!==o.path[0]&&r===i.path[0])&&(e.path=[0],e.offset=0),(Sc(s.path)||r===o.path[0]&&r!==i.path[0])&&(s.path=[l.children.length-1],s.offset=$m(l.children[l.children.length-1])),_y(l,{...t,...l.style},n,e,s)}}else if(r>o.path[0]&&r<i.path[0])if(sc(l)||Nm(l)){Nm(l)&&l.style&&(t={...t,...l.style});for(let e in n){const o=n[e],i=t[e]??"";i!==o&&("textDecorationLine"===e?-1!==i.indexOf(o)?n[e]=o:-1!==o.indexOf(i)?n[e]=i:delete n[e]:delete n[e])}}else if(bm(l)&&l.children.length){const e={path:[0],offset:0},o={path:[l.children.length-1],offset:$m(l.children[l.children.length-1])};_y(l,{...t,...l.style},n,e,o)}r++}}function jy(e){let t=e.selection;if(void 0===t)return;if(t=Ry(e.node,t),my(t)){const n={},o=t.focus.path,i=Qy(e.node,o);let r=e.node,l=0;do{if(Lm(r)){const e=r.props?.type;void 0!==e&&(n[e]=r.props?.subclass),Object.assign(n,r.props?.mergeclass)}const e=r.children[i[l]];if(!bm(e))break;r=e}while(l++<i.length);return n}let n=null;return zy(e.node,t,((t,o)=>{const i={},r=Qy(e.node,o);let l=e.node,s=0;do{if(Lm(l)){const e=l.props?.type;void 0!==e&&(i[e]=l.props?.subclass),Object.assign(i,l.props?.mergeclass)}const e=l.children[r[s]];if(!bm(e))break;l=e}while(s++<r.length);if(null!==n)for(const e in n)void 0===i[e]&&delete n[e];else n=i})),n??void 0}function Wy(e){let t=0;const{scrollTop:n,scrollOffset:o,clientHeight:i,selectionLayout:r,selection:l}=e;if(!l||!r)return t;const s=o?.top??0,{top:c,height:a=0}=r;return n>c?t=c-n:c+s+a>n+i&&(t=c+s+a-n-i),t}function zy(e,t,n,o){const{before:i,after:r}=Oy(t);let l=o?r.path:i.path;do{const t=Um(e,l);if(null===t)break;if(!1===n(t,l))break;if(o){if(l=fb(e,l),Sy(l,i.path))break}else if(l=ab(e,l),xy(l,r.path))break}while(l.length)}function Vy(e,t,n,o){const{before:i,after:r}=Oy(t),l=mb(e,i.path),s=mb(e,r.path);let c=o?s:l;do{const t=Um(e,c);if(!wm(t))break;if(!1===n(t,c))break;if(o){if(c=hb(e,c),Sy(c,l))break}else if(c=ub(e,c),xy(c,s))break}while(c.length)}function $y(e){const{scrollTop:t,clientHeight:n,selectionLayout:o}=e;if(!o)return!1;const{top:i,height:r}=o;return t>i+(r??0)||i>t+n}function Zy(e,t,n,o){const{clientX:i,clientY:r}=e,{node:l,scrollOffset:s,scrollHeight:c,scrollTop:a}=n,u=s?.top??0;let d=vb(i-t.left,r-t.top-u+a,l,o);const f=Um(l,d);return bm(f)&&(d=gb(i,r,f,o)),0===d.length&&(r>=c-a-u?d=cb(l):r<=u&&(d=sb(l))),{path:d,offset:0,clientX:i,clientY:r}}function Uy(e,t,n,o){const{clientX:i,clientY:r}=e,{node:l,scrollOffset:s,scrollHeight:c,scrollTop:a}=n,u=n.scrollOffset?.top??0;let d=vb(i-t.left,r+a-t.top-u,l,o);const f=Um(l,d);if(bm(f)&&(d=gb(i,r,f,o)),0===d.length){const e=s?.top??0;r>=c-a-e?d=cb(l):r<=e&&(d=sb(l))}return{path:d,offset:0,clientX:i,clientY:r}}function qy(e,t){const{before:n,after:o}=Oy(e,!1);return ky(n.path,t)<=0&&ky(o.path,t)>=0}function Yy(e){const{focus:t,anchor:n}=e,o=[];for(let e=0;e<t.path.length&&t.path[e]===n.path[e];e++)o.push(t.path[e]);return o}function Ky(e,t,n){const{selection:o,selectionLayout:i,node:r}=e;if(!o||Ly(r,o))return null;const l=i?.point?.end;if(!l)return null;let{right:s,bottom:c}=l;const a=n.getBoundingClientRect();s+=a.left,c+=a.top;let u=s,d=c,f=d,h=u,p=ec(o.focus.path);for(;p.length>0;){const e=Um(r,p);if(sc(e)){p=ec(p);continue}if(!bm(e)){p=ab(r,p);continue}const n=t.get(e.key);if(!n)continue;let o=!1;const i=n.getClientRects();for(let e=0;e<i.length;e++){const{right:t,bottom:n}=i[e];if(n>f){f=n,h=t,o=!0;break}}if(o)break;p=ab(r,p)}return d===f?u=h:d=f,{clientX:u,clientY:d}}function Gy(e,t,n){const{selection:o,selectionLayout:i,node:r}=e;if(!o||Ny(r,o))return null;const l=i?.point?.start;if(!l)return null;let{left:s,top:c}=l;const a=n.getBoundingClientRect();c+=a.top,s+=a.left;let u=s,d=c,f=d,h=u,p=ec(o.focus.path);for(;p.length>0;){const e=Um(r,p);if(sc(e)){p=ec(p);continue}if(!bm(e)){p=fb(r,p);continue}const n=t.get(e.key);if(!n)continue;let o=!1;const i=n.getClientRects();for(let e=i.length-1;e>=0;e--){const{left:t,top:n}=i[e];if(n<f){f=n,h=t,o=!0;break}}if(o)break;p=fb(r,p)}return d===f?u=h:d=f,{clientX:u,clientY:d}}function Xy(e,t,n){return wy(mb(e,t),mb(e,n))}function Jy(e,t){let n=t.length;for(;n>0;){if(Nm(Um(e,t.slice(0,n))))return!0;n--}return!1}function Qy(e,t){return eb(t,rb(e))}function eb(e,t){const n=[];let o=!1;return e.forEach(((e,i)=>{const r=t[i]||0;!0===o?n.push(e):e%1==0?n.push(e-r):e%1!=0&&(e<0?n.push(e+r):n.push(e-r)),e!==r&&(o=!0)})),n}function tb(e,t){const n=[],o=rb(e);let i=!1;return t.forEach(((e,t)=>{const r=o[t]||0;!0===i?n.push(e):e%1==0?n.push(e+r):e%1!=0&&(e<0?n.push(e-r):n.push(e+r)),0!==e&&(i=!0)})),n}function nb(e){const t=[];for(;pm(e);){const n=e.children[0];if(void 0===n)break;if(t.push(0),sc(n)||Nm(n))break;e=n}return t}function ob(e){const t=[];for(;pm(e);){const n=Math.max(e.children.length-1,0),o=e.children[n];if(void 0===e)break;if(t.push(n),sc(o)||Nm(o))break;e=o}return t}function ib(e){const t=[];for(;gm(e);){const n=e.children[0];if(void 0===n)break;if(sc(n)||Nm(n)||vm(n))break;t.push(0),e=n}return t}function rb(e,t){if(Nm(e))return Rg(e.key);for(;bm(tc(e.children))&&!Nm(tc(e.children)??null);)e=tc(e.children);let n=Rg(e.key);return t||e.children.length&&(n=[...n,0]),n}function lb(e,t){if(Nm(e))return Rg(e.key);for(;bm(Js(e.children))&&!Nm(Js(e.children)??null);)e=Js(e.children);let n=Rg(e.key);return t||e.children.length&&(n=[...n,e.children.length-1]),n}function sb(e){for(;xm(e);)e=e.children[0];return Rg(e.key)}function cb(e){for(;xm(e);)e=e.children[e.children.length-1];return Rg(e.key)}function ab(e,t){let n=Qy(e,t),o=Um(e,ec(t));for(;bm(o)&&Js(n)>=o.children.length-1;)t=ec(t),o=Um(e,ec(t)),n=ec(n);if(0===t.length)return t;const i=Um(e,t=Sb(t));return bm(i)?rb(i):t}function ub(e,t){if(0===t.length)return t;let n=Um(e,t=mb(e,t));if(mm(n))return[...t,0];let o=Qy(e,t);for(;t.length;){const i=Js(o)??0;if(t=ec(t),o=ec(o),n=Um(e,t),n.children.length-1>i){n=n.children[i+1],wm(n)&&(t=Rg(n.key));break}}return t}function db(e,t){if(0===t.length)return t;let n=Zm(e,t=mb(e,t));if(mm(n))return[...t,0];for(;t.length;){const o=Js(t)??0;if(n=Zm(e,t=ec(t)),n.children.length-1>o){n=n.children[o+1],gm(n)&&(t=[...t,o+1]);break}}return t}function fb(e,t){for(;0===Js(t);)t=ec(t);if(0===t.length)return t;const n=Um(e,t=xb(t));return bm(n)?lb(n):t}function hb(e,t){if(0===t.length)return t;let n=Um(e,t=mb(e,t));if(mm(n))return n=Js(n.children),Rg(n.key);for(;t.length;){const e=Js(t)??0;if(t=ec(t),e>0){t=[...t,e-1];break}}return t}function pb(e,t){if(0===t.length)return t;let n=Zm(e,t=mb(e,t));if(mm(n))return[...t,n.children.length-1];for(;t.length;){const e=Js(t)??0;if(t=ec(t),e>0){t=[...t,e-1];break}}return t}function vb(e,t,n,o,i){if(n.position)e-=n.position.left,t-=n.position.top;else if(!i){i=o.get(n.key).getBoundingClientRect()}for(let r=0,l=n.children.length;r<l;r++){let l=n.children[r];if(wm(l)){let n,r=l.position;if(!r&&i){const{left:e,top:t}=i,s=o.get(l.key);if(void 0===s)continue;n=s.getBoundingClientRect(),r={left:n.left-e,top:n.top-t,bottom:n.bottom-t,right:n.right-e}}if(l={...l,position:r},l.position){const{left:i,top:r,bottom:s}=l.position,c=t-TC(l.style);if(e>=i&&c>=r&&c<=s)return vb(e,c,l,o,n)}}}return Rg(n.key)}function gb(e,t,n,o){let i=Rg(n.key),r=-1/0,l=1/0,s=-1/0,c=1/0;return zm(n,(n=>{if(vm(n)){const a=o.get(n.key);if(!a)return;const u=a.getClientRects();for(let o=0;o<u.length;o++){let{left:a,right:d,top:f,bottom:h}=u[o];u[o-1]&&(f=u[o-1].bottom),u[o+1]&&(h=u[o+1].top),e>=a&&e<=d&&t>=f&&t<=h&&a>=r&&d<=l&&f>=s&&h<=c&&(r=a,l=d,s=f,c=h,i=Rg(n.key))}}})),i}function mb(e,t){if(!gm(e))return[];const n=t;let o=!1;bm(e)&&(o=!0,t=Qy(e,t));let i=0;for(;i<t.length;){const n=e.children[t[i]];if(!gm(n))break;i++,e=n}return o&&bm(e)?Rg(e.key):n.slice(0,i)}function yb(e,t,n){let o=t.length;for(;o>=0;){let i;if(bm(e)?i=Um(e,t.slice(0,o)):pm(e)&&(i=Zm(e,t.slice(0,o))),pm(i)&&Lm(i)&&(void 0===n||n===i.props?.type))return t.slice(0,o);o--}}function bb(e,t,n){let o,i=t.length;for(;i>=0;){let r;if(bm(e)?r=Um(e,t.slice(0,i)):pm(e)&&(r=Zm(e,t.slice(0,i))),pm(r)&&_m(r)&&(o=t.slice(0,i),!n))break;i--}return o}function Cb(e,t){let n=t.length;for(;n>0;){let o=null;if(bm(e)?o=Um(e,t.slice(0,n)):pm(e)&&(o=Zm(e,t.slice(0,n))),Nm(o))return t.slice(0,n);n--}return[]}function wb(e,t){let n=t.length;for(;n>0;){let o=null;if(bm(e)?o=Um(e,t.slice(0,n)):pm(e)&&(o=Zm(e,t.slice(0,n))),Pm(o))return t.slice(0,n);n--}return[]}function xb(e){return 0===e.length||0===e[e.length-1]?e:[...e.slice(0,-1),e[e.length-1]-1]}function Sb(e){return 0===e.length?e:[...e.slice(0,-1),e[e.length-1]+1]}const Eb={position:"relative",width:"100%"},kb={display:"flex",justifyContent:"center",position:"relative",overflow:"hidden",width:"100%"},Db={position:"relative",outline:"none",userSelect:"none",cursor:"text",display:"flex",width:"100%",alignItems:"flex-start"},Ib={width:"100%"},Nb={position:"absolute",zIndex:1e4,pointerEvents:"none",width:2,borderRadius:1,left:-1,userSelect:"none"},Lb={position:"absolute",zIndex:1e4,pointerEvents:"none",left:0,width:"100%",userSelect:"none"},Bb={position:"absolute",top:0,width:dm,height:dm,borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.3)",userSelect:"none",pointerEvents:"none"},Tb={position:"absolute",left:0,width:"100%",height:"100%",userSelect:"none"},Ab={position:"absolute",zIndex:102,transition:"opacity 100ms"},Mb={position:"absolute",pointerEvents:"none",borderRadius:12,padding:8,zIndex:103,overflow:"hidden",backgroundColor:mf,boxShadow:"inset 3px 3px 3px rgba(0, 0, 0, 0.1), inset -3px -3px 3px rgba(0, 0, 0, 0.1)"},Ob={position:"absolute",left:0,top:0,display:"flex",justifyContent:"center"},Rb={position:"absolute",pointerEvents:"auto",display:"flex",justifyContent:"center",willChange:"left, top"},Pb={position:"absolute",display:"flex",backgroundColor:mf,borderRadius:lm/2,boxShadow:Nf,userSelect:"none",overflow:"hidden"},Fb={display:"flex",width:sm,height:lm-1,justifyContent:"center",alignItems:"center",fontSize:14,fontWeight:Bf,paddingTop:1},Hb={backgroundColor:im,width:um,height:um,borderTopLeftRadius:um/2,borderBottomLeftRadius:um/2,borderBottomRightRadius:um/2,boxShadow:"-1px 1px 5px 1px rgba(0, 0, 0, 0.12)",transition:"opacity 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0)",userSelect:"none"},_b={position:"absolute",paddingLeft:6,paddingBottom:6,userSelect:"none",pointerEvents:"auto"},jb={backgroundColor:im,width:um,height:um,borderTopRightRadius:um/2,borderBottomRightRadius:um/2,borderBottomLeftRadius:um/2,boxShadow:"1px 1px 5px 1px rgba(0, 0, 0, 0.12)",transition:"opacity 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0)",userSelect:"none"},Wb={position:"absolute",paddingRight:6,paddingBottom:6,userSelect:"none",pointerEvents:"auto"},zb={copy:"copy",paste:"paste",cut:"cut",selectAll:"Select All"},Vb={cn:{[zb.copy]:"复制",[zb.paste]:"粘贴",[zb.cut]:"剪切",[zb.selectAll]:"全选"},en:{[zb.copy]:"Copy",[zb.paste]:"Paste",[zb.cut]:"Cut",[zb.selectAll]:"Select All"}},$b={cut:Mf?"⌘+X":"Ctrl+X",copy:Mf?"⌘+C":"Ctrl+C",paste:Mf?"⌘+V":"Ctrl+V",selectAll:Mf?"⌘+A":"Ctrl+A",bold:Mf?"⌘+B":"Ctrl+B",italic:Mf?"⌘+I":"Ctrl+I",alignLeft:Mf?"⌘+⇧+L":"Ctrl+Shift+L",alignCenter:Mf?"⌘+⇧+C":"Ctrl+Shift+C",alignRight:Mf?"⌘+⇧+R":"Ctrl+Shift+R",alignJustify:Mf?"⌘+⇧+J":"Ctrl+Shift+J",space:"space",altSpace:Mf?"⌥+space":"Alt+space",tab:"tab",shiftTab:Mf?"⇧+tab":"Shift+tab",splitBlock:"enter",shiftSplitBlock:Mf?"⇧+enter":"Shift+enter",moveBackward:"←",moveForward:"→",moveUp:"↑",moveDown:"↓",moveWordBackward:Mf?"⌘+←":"Ctrl+←",moveWordForward:Mf?"⌘+→":"Ctrl+→",moveLineBackward:Mf?"⌘+↑":"Ctrl+↑",moveLineForward:Mf?"⌘+↓":"Ctrl+↓",expandBackward:Mf?"⇧+←":"Shift+←",expandForward:Mf?"⇧+→":"Shift+→",expandLineBackward:Mf?"⌥+⇧+↑":"Alt+Shift+↑",expandLineForward:Mf?"⌥+⇧+↓":"Alt+Shift+↓",deleteBackward:"Ctrl?+Backspace",deleteForward:"Ctrl?+Del",deleteLineBackward:Mf?"⌘+⇧?+Backspace":"Ctrl+Shift+Backspace",deleteLineForward:Mf?"⌘+⇧?+Del":"Ctrl+Shift+Del",deleteWordBackward:Mf?"⌥+⇧+Backspace":"Alt+Shift+Backspace",deleteWordForward:Mf?"⌥+⇧+Del":"Alt+Shift+Del"},Zb=Hs(eh)($b.cut),Ub=Hs(eh)($b.copy),qb=Hs(th)($b.paste),Yb=Hs(eh)($b.selectAll),Kb=Hs(eh)($b.bold),Gb=Hs(eh)($b.italic),Xb=Hs(eh)($b.alignLeft),Jb=Hs(eh)($b.alignCenter),Qb=Hs(eh)($b.alignRight),eC=Hs(eh)($b.alignJustify),tC=Hs(eh)($b.space),nC=Hs(eh)($b.altSpace),oC=Hs(eh)($b.tab),iC=Hs(eh)($b.shiftTab),rC=Hs(eh)($b.splitBlock),lC=Hs(eh)($b.shiftSplitBlock),sC=Hs(eh)($b.moveBackward),cC=Hs(eh)($b.moveForward),aC=Hs(eh)($b.moveUp),uC=Hs(eh)($b.moveDown),dC=Hs(eh)($b.moveWordBackward),fC=Hs(eh)($b.moveWordForward),hC=Hs(eh)($b.moveLineBackward),pC=Hs(eh)($b.moveLineForward),vC=Hs(eh)($b.expandBackward),gC=Hs(eh)($b.expandForward),mC=Hs(eh)($b.expandLineBackward),yC=Hs(eh)($b.expandLineForward),bC=Hs(eh)($b.deleteBackward),CC=Hs(eh)($b.deleteForward),wC=Hs(eh)($b.deleteLineBackward),xC=Hs(eh)($b.deleteLineForward),SC=Hs(eh)($b.deleteWordBackward),EC=Hs(eh)($b.deleteWordForward),kC=[{value:zb.cut,editable:!0,hotkey:$b.cut},{value:zb.copy,hotkey:$b.copy},{value:zb.paste,editable:!0,hotkey:$b.paste},{value:zb.selectAll,hotkey:$b.selectAll}];function DC(e){return kC.filter((t=>{if(!1===e.editable){if(t.value===zb.cut)return!1;if(t.value===zb.paste)return!1}return!0}))}const IC=e=>{if(!e.virtual)return{...kb,...e.style};const{value:{clientHeight:t,scrollHeight:n},scroller:o}=e;return{...kb,...e.style,height:t,overflow:"native"===o?"scroll":n>t?"hidden":"unset"}},NC=e=>{if(!e.virtual)return Ib;const{value:{node:t,scrollTop:n,scrollHeight:o},scroller:i}=e;let r=o;if("native"!==i){const e=t.position?.top??0;r=(t.position?.bottom??0)-e}const l="native"===i?0:-n,s={...Ib,height:r};return e.disableEvents&&(s.pointerEvents="none"),"native"!==i&&(s.transform=`translate(0, ${l}px)`),s},LC=e=>{if(!e.virtual){const t={...Db,...e.editStyle};return"native"===e.selecter&&(t.userSelect="auto"),t}const{value:{contentHeight:t,clientWidth:n},scroller:o,virtual:i}=e;let r=e.value.clientHeight;i&&"native"!==o||(r=t);const l={...Db,width:n,height:r,...e.editStyle};return"native"===e.selecter&&(l.userSelect="auto"),l};function BC(e){let t=0;return e?(t+=TC(e),t+=AC(e),t):t}function TC(e){let t=0;if(!e)return t;if(e.marginTop){let n=parseFloat(String(e.marginTop));isNaN(n)&&(n=0),t+=n}if(e.borderTop){let n=parseFloat(String(e.borderTop));isNaN(n)&&(n=0),t+=n}if(e.paddingTop){let n=parseFloat(String(e.paddingTop));isNaN(n)&&(n=0),t+=n}return t}function AC(e){let t=0;if(!e)return t;if(e.marginBottom){let n=parseFloat(String(e.marginBottom));isNaN(n)&&(n=0),t+=n}if(e.borderBottom){let n=parseFloat(String(e.borderBottom));isNaN(n)&&(n=0),t+=n}if(e.paddingBottom){let n=parseFloat(String(e.paddingBottom));isNaN(n)&&(n=0),t+=n}return t}function MC(e){let t=0;if(!e||"border-box"===e.boxSizing)return t;if(e.marginTop){let n=parseFloat(String(e.marginTop));isNaN(n)&&(n=0),t+=n}if(e.marginBottom){let n=parseFloat(String(e.marginBottom));isNaN(n)&&(n=0),t+=n}return t}function OC(e){return e?(delete(e={...e}).height,delete e.position,delete e.top,delete e.bottom,delete e.left,delete e.right,e):e}function RC(e){return e?(delete(e={...e}).margin,delete e.padding,delete e.marginTop,delete e.marginBottom,delete e.marginLeft,delete e.marginRight,delete e.paddingTop,delete e.paddingBottom,delete e.paddingLeft,delete e.paddingRight,e):e}function PC(e){const t={};return e?(e.marginTop&&(t.marginTop=e.marginTop),e.marginBottom&&(t.marginBottom=e.marginBottom),e.marginLeft&&(t.marginLeft=e.marginLeft),e.marginRight&&(t.marginRight=e.marginRight),e.paddingTop&&(t.paddingTop=e.paddingTop),e.paddingBottom&&(t.paddingBottom=e.paddingBottom),e.paddingLeft&&(t.paddingLeft=e.paddingLeft),e.paddingRight&&(t.paddingRight=e.paddingRight),t):t}function FC(e,t){return t?(e={...e},t.marginTop&&(e.marginTop=(e.marginTop??0)+t.marginTop),t.marginBottom&&(e.marginBottom=(e.marginBottom??0)+t.marginBottom),t.marginLeft&&(e.marginLeft=(e.marginLeft??0)+t.marginLeft),t.marginRight&&(e.marginRight=(e.marginRight??0)+t.marginRight),t.paddingTop&&(e.paddingTop=(e.paddingTop??0)+t.paddingTop),t.paddingBottom&&(e.paddingBottom=(e.paddingBottom??0)+t.paddingBottom),t.paddingLeft&&(e.paddingLeft=(e.paddingLeft??0)+t.paddingLeft),t.paddingRight&&(e.paddingRight=(e.paddingRight??0)+t.paddingRight),e):e}function HC(e,t,n){const o={},i=Qy(e,t);let r=0,l=e;do{if(l.style)for(let e in l.style){const t=e;n?.[t]&&(o[t]=l.style[t])}const e=l.children[i[r++]];if(!bm(e))break;l=e}while(l&&r<i.length);const s={},c=[];let a=Um(e,t);for(;bm(a);){if(a.style)for(let e in a.style){const t=e;n?.[t]&&(void 0===s[t]?s[t]=a.style[t]:s[t]!==a.style[t]&&delete s[t])}for(let e=0;e<a.children.length;e++){const t=a.children[e];bm(t)&&c.push(t)}a=c.shift()||null}return{...n,...o,...s}}function _C(e){let t=parseFloat(String(e||0));return isNaN(t)&&(t=0),Math.ceil(t)}function jC(e,t,n){if(Pf){const{value:{scrollTop:o,selection:i,selectionLayout:r},contextMenu:l}=e;if(void 0===l?.visible)return void(n.current?.c&&(n.current.c=0));const s=e.value.clientWidth,c=DC(e).length,a=sm*c+2*cm,u=r?.top??0,d=r?.left??0,f=r?.width??0,h=t.current?.getBoundingClientRect(),p=((h?.left??0)+(h?.right??0))/2,v=(e.portalOffset??p)-p;let g=-s/2+d+f/2;if(0===v){const e=(a-s)/2-8,t=(s-a)/2+8;g<e?g=e:g>t&&(g=t)}else if(e.portalWidth){const t=(a-e.portalWidth)/2+v-8,n=(e.portalWidth-a)/2+v+8;g<t?g=t:g>n&&(g=n)}let m=-o+u-lm-10;e.virtual&&(m=Math.max(3,m));const y=n.current?.x??g,b=n.current?.y??m;let C=n.current?.c??0;l?.visible?C++:C=0;let w=C>2?"100ms":"0ms";return l.visible?n.current={x:g,y:m,c:C}:n.current={x:y,y:b,c:C},i||(w="0ms",n.current=null),{enter:{transform:"scale3d(1, 1, 1)",left:g,top:m,opacity:1,transition:`transform 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0), opacity 100ms cubic-bezier(0.4, 0.0, 0.0, 1.0), left ${w} cubic-bezier(0.4, 0.0, 0.4, 1.0), top ${w} cubic-bezier(0.4, 0.0, 0.4, 1.0)`},leave:{transform:"scale3d(0.96, 0.96, 1)",left:y,top:b,opacity:0,transition:`transform 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0), opacity 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0), left ${w} cubic-bezier(0.4, 0.0, 0.4, 1.0), top ${w} cubic-bezier(0.4, 0.0, 0.4, 1.0)`}}}return{enter:{opacity:1},leave:{opacity:0}}}function WC(e,t){const{value:{scrollTop:n,selection:o},contextMenu:i}=e;if(Pf)return o?Rb:{...Rb,visibility:"hidden"};const r=t.current?.clientWidth??0,l=i?.rect?.left??0;return{...Ab,top:-n+(i?.rect?.top??0)+10,left:-r/2+l+10}}function zC(e,t,n){const o=function(e,t){const n=t.slice();let o=0;for(;o<n.length&&void 0!==e[o];){if(n[o]!==e[o]){n[o]=n[o]-e[o];break}n[o]=0,o++}return n}(t,n);return Zm(e,o).children}function VC(e,t){const{path:n,offset:o}=t,i=tc(n);if(void 0===i)return;const r=e.children.slice(0,i),l=e.children[i];if(pm(l))if(n.length>1){const e=VC(l,{path:Qs(n),offset:o});pm(e)&&!Sm(e)&&r.push(e)}else Sm(l)||r.push(l);else if(sc(l))if(n.length<=1){const e=l.slice(0,o);""!==e&&r.push(e)}else r.push(l);return 0!==r.length?{...e,children:r}:void 0}function $C(e,t){const{path:n,offset:o}=t,i=tc(n);if(void 0===i)return;const r=e.children.slice(i+1),l=e.children[i];if(pm(l))if(n.length>1){const e=$C(l,{path:Qs(n),offset:o});pm(e)&&!Sm(e)&&r.unshift(e)}else Sm(l)||r.unshift(l);else if(sc(l))if(n.length<=1){const e=l.slice(o);""!==e&&r.unshift(e)}else r.unshift(l);return 0!==r.length?{...e,children:r}:void 0}const ZC=12,UC={position:"absolute",left:0,right:0,bottom:0,height:7,userSelect:"none",transition:"opacity 0.3s",zIndex:101,cursor:"default"},qC={position:"absolute",top:0,bottom:0,right:0,left:0},YC={width:"100%",height:"100%",transition:"background-color 0.2s",transform:"translateX(0)",cursor:"default"},KC={position:"absolute",top:0,bottom:0,right:0,width:Pf?4:7,userSelect:"none",transition:"opacity 0.3s",zIndex:101},GC={position:"absolute",top:0,bottom:0,right:0,left:0},XC={width:"100%",height:"100%",transition:"background-color 0.2s "+(Pf?", transform 0.13s linear":""),transform:"translateY(0)",cursor:"default"},JC={position:"absolute",top:0,bottom:0,right:24,width:ZC},QC={position:"absolute",top:0,bottom:0,right:ZC,width:ZC},ew={position:"absolute",left:0,right:0,height:ZC,bottom:24},tw={position:"absolute",left:0,right:0,height:ZC,bottom:ZC},nw={position:"absolute",bottom:0,left:0,right:0,height:ZC,backgroundColor:"#fff"},ow={width:0,height:0,top:3,left:0,position:"absolute",borderWidth:"3px 4px",borderStyle:"dashed solid dashed dashed",borderColor:`transparent ${If} transparent transparent`},iw={width:0,height:0,top:3,left:4,position:"absolute",borderWidth:"3px 4px",borderStyle:"dashed dashed dashed solid",borderColor:`transparent transparent transparent ${If}`},rw={width:0,height:0,top:0,left:3,position:"absolute",borderWidth:"4px 3px",borderStyle:"dashed dashed solid dashed",borderColor:`transparent transparent ${If} transparent`},lw={width:0,height:0,top:4,left:3,position:"absolute",borderWidth:"4px 3px",borderStyle:"solid dashed dashed dashed",borderColor:`${If} transparent transparent transparent`};function sw(e,t){const n=Dd(e),{track:o,thumb:i}=t,r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("pointermove"),c=Nd("pointerdown"),a=Nd("pointerdown"),u=Nd("pointerdown"),d=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]),F((()=>{const e=u.pipe(iv((()=>{let e=0;return n.current.onArrowStep?.(e-=1),yu(0,Ha).pipe(rv(l)).pipe(Zp((()=>e-=1)))}))).subscribe(n.current.onArrowStep);return()=>e.unsubscribe()}),[n,u,l]),F((()=>{const e=d.pipe(iv((()=>{let e=0;return n.current.onArrowStep?.(e+=1),yu(0,Ha).pipe(rv(l)).pipe(Zp((()=>e+=1)))}))).subscribe(n.current.onArrowStep);return()=>e.unsubscribe()}),[n,d,l]),F((()=>{const e=s.pipe(iv((()=>c.pipe(rv(a))))).subscribe((e=>{n.current.stopPropagation&&e.stopPropagation();const t=o.current,r=i.current;if(null===t||null===r)return;const l=t.getBoundingClientRect(),s=t.clientWidth-r.clientWidth,c=e.clientX-l.top-r.clientWidth/2,a=Math.min(1,Math.max(0,c/s));n.current.onChange(a)}));return()=>e.unsubscribe()}),[n,a,c,r,s,o,i]),F((()=>{const e=c.pipe(iv((e=>{n.current.stopPropagation&&e.stopPropagation();let t=-1,s=0;const{pageX:c}=e;return r.pipe(Qp(0)).pipe(rv(l)).pipe(Zp((e=>{const r=o.current,l=i.current;return null===r||null===l?0:(-1===t&&(t=n.current.value),0===s&&(s=r.clientWidth-l.clientWidth),(e.pageX-c)/s+t)})))}))),t=e.subscribe((e=>{n.current.onChange(Math.min(1,Math.max(0,e)))})),s=e.pipe(iv((e=>yu(0,Ha).pipe(rv(l)).pipe(ov((()=>e<=1))).pipe(Zp((()=>e)))))).subscribe((e=>{n.current.onChangeInterval?.(e)}));return()=>{t.unsubscribe(),s.unsubscribe()}}),[n,r,l,i,o,c]),{track:Ld([c,s]),thumb:Ld([a]),decrease:Ld([u]),increase:Ld([d])}}function cw(e,t){const n=Dd(e),{track:o,thumb:i}=t,r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("pointermove"),c=Nd("pointerdown"),a=Nd("pointerdown"),u=Nd("pointerdown"),d=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]),F((()=>{const e=u.pipe(iv((()=>{let e=0;return n.current.onArrowStep?.(e-=1),yu(0,Ha).pipe(rv(l)).pipe(Zp((()=>e-=1)))}))).subscribe(n.current.onArrowStep);return()=>e.unsubscribe()}),[n,u,l]),F((()=>{const e=d.pipe(iv((()=>{let e=0;return n.current.onArrowStep?.(e+=1),yu(0,Ha).pipe(rv(l)).pipe(Zp((()=>e+=1)))}))).subscribe(n.current.onArrowStep);return()=>e.unsubscribe()}),[n,d,l]),F((()=>{const e=s.pipe(iv((()=>c.pipe(rv(a))))).subscribe((e=>{const t=o.current,r=i.current;if(null===t||null===r)return;const l=t.getBoundingClientRect(),s=t.clientHeight-r.clientHeight,c=e.clientY-l.top-r.clientHeight/2,a=Math.min(1,Math.max(0,c/s));n.current.onChange(a)}));return()=>e.unsubscribe()}),[n,a,c,r,s,o,i]),F((()=>{const e=c.pipe(iv((({pageY:e})=>{let t=-1,s=0;return r.pipe(Qp(0)).pipe(rv(l)).pipe(Zp((r=>{const l=o.current,c=i.current;return null===l||null===c?0:(-1===t&&(t=n.current.value),0===s&&(s=l.clientHeight-c.clientHeight),(r.pageY-e)/s+t)})))}))),t=e.subscribe((e=>{n.current.onChange(Math.min(1,Math.max(0,e)))})),s=e.pipe(iv((e=>yu(0,Ha).pipe(rv(l)).pipe(ov((()=>e<=1&&e>=0))).pipe(Zp((()=>e)))))).subscribe((e=>{n.current.onChangeInterval?.(e)}));return()=>{t.unsubscribe(),s.unsubscribe()}}),[n,r,l,i,o,c]),{track:Ld([c,s]),thumb:Ld([a]),decrease:Ld([u]),increase:Ld([d])}}function aw(e){return{track:Z(null),thumb:Z(null)}}function uw(e,t){return((t.track.current?.clientHeight??0)-e.thumb)*Math.min(1,e.value)}function dw(e,t){return((t.track.current?.clientWidth??0)-e.thumb)*Math.min(1,e.value)}function fw(e){return{onPointerEnter:e.onPointerEnter,onPointerLeave:e.onPointerLeave,onPointerDown:e.onPointerDown,onPointerUp:e.onPointerUp,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp}}const hw=27,pw={default:Cf,hover:wf,active:"#c1c3c4"};function vw({type:e=0,...t}){return lh(1===e?mw:gw,{...t})}function gw(e){const t=aw(),n=sw(e,t);return lh("div",{style:{...UC,...e.style,margin:"0 1px 1px 1px",opacity:e.visible?1:0},className:e.className,...fw(e),children:lh("div",{ref:t.track,style:qC,...n.track,children:lh(dv,{type:"light",ref:t.thumb,colors:pw,style:{...YC,borderRadius:4,width:e.thumb,transform:`translateX(${dw(e,t)}px)`},...n.thumb})})})}function mw(e){const t=aw(),n=sw(e,t);return sh(Mh,{type:"top",style:{...UC,...e.style,width:12,opacity:e.visible?1:0},children:[lh("div",{ref:t.track,style:{...qC,bottom:36},...n.track,children:lh(dv,{type:"light",ref:t.thumb,colors:pw,style:{...YC,height:e.thumb,transform:`translateX(${dw(e,t)}px)`},...n.thumb})}),lh(dv,{type:"light",style:JC,...n.decrease,children:lh("div",{style:ow})}),lh(dv,{type:"light",style:QC,...n.increase,children:lh("div",{style:iw})}),lh(Mh,{type:"right",style:nw})]})}function yw({type:e=0,...t}){return lh(1===e?Cw:bw,{...t})}function bw(e){const t=aw(),n=cw(e,t);return lh("div",{style:{...KC,...e.style,margin:"1px 2px 1px 0",opacity:e.visible?1:0},className:e.className,...fw(e),children:lh("div",{ref:t.track,style:GC,...n.track,children:lh(dv,{type:"light",ref:t.thumb,colors:pw,style:{...XC,borderRadius:4,height:e.thumb,transform:`translateY(${uw(e,t)}px)`},...n.thumb})})})}function Cw(e){const t=aw(),n=cw(e,t);return sh(Mh,{type:"left",style:{...KC,...e.style,width:12,opacity:e.visible?1:0},children:[lh("div",{ref:t.track,style:{...GC,bottom:36},...n.track,children:lh(dv,{type:"light",ref:t.thumb,colors:pw,style:{...XC,height:e.thumb,transform:`translateY(${uw(e,t)}px)`},...n.thumb})}),lh(dv,{type:"light",style:ew,...n.decrease,children:lh("div",{style:rw})}),lh(dv,{type:"light",style:tw,...n.increase,children:lh("div",{style:lw})}),lh(Mh,{type:"top",style:nw})]})}var ww,xw;!function(e){e[e.prev=-1]="prev",e[e.next=1]="next"}(ww||(ww={})),function(e){e.STATIC="STATIC",e.MOVE_UP="MOVE_UP",e.MOVE_DOWN="MOVE_DOWN",e.COLLAPSED_SELECTION="COLLAPSED_SELECTION",e.WORD_SELECTION="WORD_SELECTION",e.EXPAND_SELECTION="EXPAND_SELECTION",e.COLLAPSED_REFLOW="COLLAPSED_REFLOW",e.SELECTION_REFLOW="SELECTION_REFLOW",e.EXTEND_LINE_BACKWARD="EXTEND_LINE_BACKWARD",e.EXTEND_LINE_FORWARD="EXTEND_LINE_FORWARD",e.DELETE_LINE_BACKWARD_SELECTION="DELETE_LINE_BACKWARD_SELECTION",e.DELETE_LINE_FORWARD_SELECTION="DELETE_LINE_FORWARD_SELECTION",e.DELETE_LINE_BACKWARD_ACTION="DELETE_LINE_BACKWARD_ACTION",e.DELETE_LINE_FORWARD_ACTION="DELETE_LINE_FORWARD_ACTION"}(xw||(xw={}));const Sw=()=>e=>(e.location=void 0,e),Ew=(e,t,n)=>o=>{const i=o.location;if(!i)return o;const{node:r,clientHeight:l,scrollHeight:s}=o,c=Rg(i),a=mb(r,c),u=Ec(a,c),d=u?t.get(i):n.get(i),f=t.get(Og(a));if(!d||!f)return o;const h=Gm(r,a),p=f.getBoundingClientRect(),v=d.getBoundingClientRect().top-p.top,g=jc(h)+v;let m=g-(o.scrollTop+80);return u||(m=g-(o.scrollTop+1*l/3)),o=lx(a,ww.next)(o),o=Bx(e,m,!0)(o)},kw=e=>t=>{if(t.detect.flag!==xw.STATIC)return t;const n={};if(e.selection){const{anchor:o,focus:i}=e.selection;Object.assign(n,LE(t.node,o.path)),wy(o.path,i.path)||Object.assign(n,LE(t.node,i.path))}if(t.selection){const{anchor:e,focus:o}=t.selection;Object.assign(n,LE(t.node,e.path)),wy(e.path,o.path)||Object.assign(n,LE(t.node,o.path))}return Sc(n)||(t.node=Dw(t.node,n)),t};function Dw(e,t){if(void 0===t)return e;if(bm(e)){if(_m(e)){const n=e.props?.uid;if(t[n]){const o={...t[n].props,uid:n};e=iy(e={...t[n],props:o},e.key)}}e.children=e.children.map((e=>bm(e)?Dw(e,t):e))}return e}const Iw=e=>t=>{if(t.detect.flag!==xw.STATIC)return t;let n=e.current.extractReference;return n||(n=BE),t.ureference=n(t.node),t},Nw=e=>t=>(t.reload=e,t),Lw=e=>t=>{const n=cb(t.node),o=Um(t.node,n);if(gm(o)&&void 0===o.position)return t;const{diff:i}=ny(t);return i<0&&(t=gx(e)(t)),t=Mw()(t),t=Tw(e)(t),t=Aw()(t)},Bw=(e,t,n,o)=>o=>{const{record:i}=n,r=o.reflowStart?.path.slice(),l=o.reflowStart?.offsets.slice(),s=ux(o.node,t,i,r,l);return o.node.position={top:0,left:0,right:0,bottom:s+BC(o.node.style)},dx(o.node,t,i),o=Lw(e)(o)},Tw=e=>t=>{const{requestEditNode:n}=e.current;if(!t.node.position)return t;const o=oE(t.scrollTouch),i=Math.max(o,t.clientHeight);return n?.("next")?i>t.scrollHeight&&(t.scrollHeight=i):t.scrollHeight=i,t},Aw=e=>e=>{if(!e.node.position)return e;const t=oE(e.scrollTouch);return e=Ow(t)(e)},Mw=e=>e=>{const{scrollTop:t,scrollTouch:n=[0,0],node:o}=e;t<n[0]&&(n[0]=t);const i=o.position?.bottom??0;return i>n[1]&&(n[1]=i),e.scrollTouch=n,e},Ow=e=>t=>(t.contentHeight=e,t),Rw=e=>t=>(t.resizeWidth=e,t),Pw=e=>t=>(t.resizeHeight=e,t),Fw=e=>t=>(t.isSelectPending=e||void 0,t);function Hw(e,t){if(!e.current)return;const n=e.current.get(t),o=n?.ele;if(void 0!==o)if(n?.rects){const i=[...o.getClientRects()],r=Og(ec(Rg(t)));for(let t=0;t<i.length;t++){const{top:o,right:l,bottom:s,left:c}=i[t];e.current.set(Pg(r,t),{...n,top:o,right:l,bottom:s,left:c})}}else{const{top:i,right:r,bottom:l,left:s}=o.getBoundingClientRect();e.current.set(t,{...n,top:i,right:r,bottom:l,left:s})}}const _w=e=>t=>(Ec(e,t.selection)||(t.selection=ts(e)),t),jw=e=>t=>(t.selectionFrozen=e,t),Ww=e=>t=>(t.selectionReflow=e,t),zw=e=>t=>(t.selectionLayout=e,t),Vw=e=>t=>(t.selectionPath=e,t),$w=()=>e=>{if(void 0===e.selection)return e;if(e.detect.flag!==xw.STATIC)return e;const{focus:t,anchor:n}=ts(e.selection),o=Um(e.node,t.path);Nm(o)||sc(o)||bm(o)&&(t.path=rb(o),t.offset=0);const i=Um(e.node,n.path);return Nm(i)||sc(i)||bm(i)&&(n.path=rb(i),n.offset=0),e.selection={focus:t,anchor:n},e},Zw=e=>t=>{if(t.detect.flag!==xw.STATIC)return t;const n=Hy(t,e);return Sc(n)?t.selectionStyle=void 0:t.selectionStyle=n,t},Uw=()=>e=>{if(e.detect.flag!==xw.STATIC)return e;const t=jy(e);return Sc(t)?e.selectionDecorate=void 0:e.selectionDecorate=t,e},qw=(e,t)=>n=>{const o=n.selection;if(void 0===o)return n;if(e>0){const e=vb(1/0,n.clientHeight+n.scrollTop,n.node,t),i=Um(n.node,e);if(!bm(i))return n;const r=lb(i),l=Um(n.node,r);if(null===l)return n;const s={path:r,offset:$m(l)};Ec(o.focus,s)||(o.focus=s)}else if(e<0){const e=vb(1/0,n.scrollTop,n.node,t),i=Um(n.node,e);if(!bm(i))return n;const r=rb(i);if(null===Um(n.node,r))return n;const l={path:r,offset:0};Ec(o.focus,l)||(o.focus=l)}return n},Yw=(e,t,n)=>o=>{if(!o.selection)return o;const i=o.selection[t].path;if(xy(i,e)){const t=ec(e);if(i.length>=t.length&&0===ky(i,t)){const e=t.length;i[e]>0&&i[e]--}return o}if(Ec(i.slice(0,e.length),e)){let i=[],r=null;for(let l=e.length-1;l>=0;l--){if(e[l]>0){i=[...ec(e,e.length-l),e[l]-1],r=Um(o.node,i),bm(r)&&(i=lb(r),r=Um(o.node,i)),null!==r&&(o.selection[t].path=i,!0===n?o.selection[t].offset=$m(r):o.selection[t].offset+=$m(r));break}if(0===e[l]){if(i=[...ec(e,e.length-l)],r=Um(o.node,i),null===r)continue;if(n&&bm(r)&&(r=Vm(r,i)),bm(r)&&(i=rb(r),r=Um(o.node,i)),null!==r){o.selection[t].path=i;const e=$m(r),{offset:n}=o.selection[t];n>e&&(o.selection[t].offset=0)}break}}}return o},Kw=()=>e=>(e.selection=void 0,e.selectionStyle=void 0,e.selectionDecorate=void 0,e.selectionLayout=void 0,e.selectionPath=void 0,e.selectionBackground=void 0,e),Gw=(e,t)=>n=>{if(void 0===t)return n;const{requestEditNode:o}=e.current,i=ts(n.reflowStart);let r=!1,l=!1;if(Ty(n.node,t)&&o?.("prev")&&(r=!0,n=vx(e)(n)),Ay(n.node,t)&&o?.("next")&&(l=!0,n=gx(e)(n)),r||l){const o=n.reflowStart?.path;o?.length?i&&-1===ky(i.path,o)&&(n.reflowStart=i):l&&(n.reflowStart=i),n=Gw(e,t)(n)}return n},Xw=e=>t=>(t.composing=e,t),Jw=e=>t=>(t.composition=e,t),Qw=(e,t,n,o)=>i=>{const r=Um(i.node,e.path);if(!bm(r))return i;if(!t.get(r.key))return i;const l=uE(r,t),s=rE(e,l);if(!s?.origin)return i;const c={anchor:ts(s.origin),focus:ts(s.origin)},{top:a,left:u}=n.getBoundingClientRect(),d={top:s.top-a,height:s.bottom-s.top,left:s.left-u-1},f={start:{bottom:s.bottom-a,top:s.top-a,left:s.left-u},end:{bottom:s.bottom-a,top:s.top-a,right:s.left-u}};return d.point=f,i=_w(c)(i),i=zw(d)(i),i=Fw(!0)(i),i=Zw(o)(i),i=Uw()(i)},ex=(e,t,n,o)=>i=>{const r=Um(i.node,e.path);if(!bm(r))return i;if(!t.get(r.key))return i;const l=uE(r,t),s=rE(e,l);if(!s?.origin)return i;const c=ts({anchor:s.origin,...i.selection,focus:s.origin});return i=_w(c)(i),i=ox(t,n)(i),i=Fw(!0)(i),i=Zw(o)(i),i=Uw()(i)},tx=(e,t,n,o)=>i=>{const r=Um(i.node,e.path);if(!bm(r))return i;if(!t.get(r.key))return i;const l=uE(r,t),s=rE(e,l);if(!s?.origin)return i;const{before:c,after:a}=Oy({anchor:s.origin,focus:s.origin}),u=Um(i.node,c.path);if(sc(u)){const e=DE(u,c.offset);if(e===c.offset){const e=IE(u,a.offset);a.offset=e}else c.offset=e,a.offset+=1;a.offset=Math.min(u.length,a.offset)}return i=_w({anchor:c,focus:a})(i),i=ox(t,n)(i),i=Fw(!0)(i),i=Zw(o)(i),i=Uw()(i)},nx=(e,t,n,o)=>e=>{const i=e.selection?.focus;if(void 0===i)return e;const r=mb(e.node,i.path),l=Um(e.node,r);if(!gm(l))return e;const s=rb(l),c=lb(l),a=Um(e.node,c);if(null===a)return e;const u={anchor:{path:s,offset:0},focus:{path:c,offset:$m(a)}};return e=_w(u)(e),e=ox(t,n)(e),e=Fw(!0)(e),e=Zw(o)(e),e=Uw()(e)},ox=(e,t)=>n=>{const{selection:o,node:i}=n;if(!o)return n;if(my(o)){const{path:r,offset:l}=o.focus,s=Um(i,r),c=document.createRange();let a=null,u=0,d=0,f=!1;try{if(sc(s)){const t=$m(s)||1,n=Og(ec(r)),o=Js(r)??0;a=e.get(n),a=fE(a.childNodes[o],s),u=l,d=u+1,d>t&&(u=t-1,d=t,f=!0)}else if(Nm(s)){const t=Og(ec(r)),n=Js(r)??0;a=e.get(t),u=n,d=u+1,l>0&&(f=!0)}else if(s){const t=Og(r);a=e.get(t),s.children.length||(a=fE(a,"")),u=l,d=u+1}}catch(e){}if(!a)return n;c.setStart(a,u),c.setEnd(a,d);const h=c.getBoundingClientRect(),{top:p,left:v}=t.getBoundingClientRect(),g=f?h.right:h.left,m={top:h.top-p,height:h.bottom-h.top,left:g-v-1},y={start:{bottom:h.bottom-p,top:h.top-p,left:g-v},end:{bottom:h.bottom-p,top:h.top-p,right:g-v}};return m.point=y,n=zw(m)(n)}const{before:r,after:l}=Oy(o);r.path=Qy(n.node,r.path),l.path=Qy(n.node,l.path);const s=dE(n.node,e,r,l),c=t.getBoundingClientRect(),a=sE(s),u={height:a.bottom-a.top,width:a.right-a.left,top:a.top-c.top,left:a.left-c.left},{start:d,end:f}=a.point,h={start:{bottom:d.bottom-c.top,top:d.top-c.top,left:d.left-c.left},end:{bottom:f.bottom-c.top,top:f.top-c.top,right:f.right-c.left}};u.point=h;const p=lE(c,u,s);return n=zw(u)(n),n=Vw(p)(n)},ix=(e,t,n,o,i,r)=>l=>{const{requestEditNode:s,responseEditNode:c,extractReference:a}=e.current,{record:u}=o;"native"===e.current.scroller&&(l=sx(i)(l));const d=ux(l.node,n,u,l.reflowStart?.path.slice(),l.reflowStart?.offsets.slice());if(l.node.position?l.node.position.bottom=d+BC(l.node.style):l.node.position={top:0,left:0,right:0,bottom:d+BC(l.node.style)},dx(l.node,n,u),l=Mw()(l),l=Tw(e)(l),l=Aw()(l),(l=lx(cb(l.node),ww.next)(l)).cwnd){const{diff:t}=ny(l);if(t<0){let n=l.clientHeight/(t+l.clientHeight);n=Math.max(1,Math.min(2,Math.ceil(n)));const o=s?.("cwnd",l.cwnd*n);if(o){const e={path:cb(o),node:o,push:o};return c?.("push-next",e),bx(l.node,o),l.cwnd=l.cwnd*n,l=Sx(o,a)(l)}{const{node:t,clientHeight:n}=l,o=t.position?.top??0;if((t.position?.bottom??0)-o<n&&s?.("prev"))return l=vx(e)(l)}}const n=sb(l.node);(l=lx(n,ww.next)(l)).cwnd=void 0}if(void 0===l.cwnd){l.location&&r&&(l=(e=>(e.location=void 0,e))(l=Ew(e,n,r)(l)));const i=o.ele.current;l=ox(t,i)(l),l=Zw(e.current.editStyle)(l),l=Uw()(l)}return l},rx=(e,t,n,o)=>i=>{if(!i.node.position)return i=Nw(!0)(i);i.reflowStart||(i.reflowStart={path:[],offsets:[],flag:ww.next});const{record:r}=n,{requestEditNode:l}=e.current,s=ts(i.reflowStart);if(s.flag===ww.prev){const n={scroller:e.current.scroller,scroll:o,value:i};ax(i.node,t,r,s?.path,n);const{diff:c}=ty(i);if(c<0)null!==l?.("prev")&&(i=Mx(!0)(i)),i=vx(e)(i);else{const e=sb(i.node);i=lx(e,ww.next)(i)}}else if(s.flag===ww.next){const n=ux(i.node,t,r,s.path,s.offsets);i.node.position&&(i.node.position.bottom=n+BC(i.node.style)),dx(i.node,t,r);const{diff:o}=ny(i);if(o<0)null!==l?.("next")&&(i=Mx(!0)(i)),i=gx(e)(i);else{const e=sb(i.node);i=lx(e,ww.next)(i)}}return i=Mw()(i),i=Tw(e)(i),i=Aw()(i)},lx=(e,t)=>n=>{const o=Gm(n.node,e);return e=e.slice(0,o.length),n.reflowStart?(wy(n.reflowStart.path,e)||(n.reflowStart.path=e),wy(n.reflowStart.offsets,o)||(n.reflowStart.offsets=o),n.reflowStart.flag=t,n):(n.reflowStart={path:e,flag:t,offsets:o},n)},sx=e=>t=>{const n=t.reflowStart?.offsets;if(!n)return t;const o=jc(n);return o>=0||(t.reflowStart.offsets=n.map((()=>0)),t.scrollTop-=o,e.current?.scrollTo({top:t.scrollTop})),t},cx=e=>t=>{if(!e)return t;const n=ly(t.node,e.path);if(e.offsets.length>0){const o=jc(Km(n))-jc(e.offsets),i=t.scrollHeight-t.clientHeight,r=t.scrollTop+o;t.scrollTop=Math.min(i,r)}let o=sb(n),i=Gm(t.node,o);for(;jc(i)>t.scrollTop&&!Iy(o);)o=hb(t.node,o),i=Gm(t.node,o);const r=cb(t.node);return t=lx(o,e.flag)(t),t=Cx(o,r)(t)};function ax(e,t,n,o=[],i){let r=0,l=[];const s=Um(e,o);if(!bm(s))return;if(!s.position)return;if(Dy(o,e))return;let c=!1;if(xm(s)){if(1===s.children.length){r=s.position.bottom-s.position.top-AC(s.style);l=Rg(s.children[0].key)}else if(s.children.length>1){const o=s.children.length;let a=0,u=null;for(;a<o;){const e=s.children[a];if(wm(e)&&e.position){if(0===a){a++;continue}u=e;l=Rg(s.children[a-1].key);break}a++}if(null===u)return;if(a>1&&(c=!0),u.position){r+=u.position.top;let e=u.children[0],t=Qs(ib(u)),n=parseFloat(String(u.style?.paddingTop??0)),o=parseFloat(String(u.style?.marginTop??0));for(;wm(e)&&e.position;){r+=e.position.top-n-o;const i=e.style?.paddingTop;n=i?parseFloat(String(i)):0;const l=e.style?.marginTop;o=l?parseFloat(String(l)):0,e=e.children[0],t=Qs(t)}}if(xm(u)){if(!u.children[0].position){ax(e,t,n,Rg(u.key),i)}}}}else if(o[o.length-1]>0)r=s.position?.top||0,l=xb(o);else{for(;0===o[o.length-1];)o=o.slice(0,-1);if(!o.length)return;const t=Um(e,o);if(!t.position)return;r=t.position.top,l=xb(o)}const a=Um(e,l);if(!bm(a))return;let u=0;if(xm(a)){u=r-ux(a,t,n)-BC(a.style)}else if(!_m(a)){const e=t.get(a.key);if(!e)return;u=r-e.offsetHeight-MC(a.style)}const d=Um(e,l.slice(0,-1)),f=_C(d.style?.paddingLeft),h=_C(d.style?.paddingRight);a.position={left:f,right:h,top:u,bottom:r},dx(a,t,n);const p=i?.scroller;if(u<0&&"native"===p){const e=d.children.length,o=-u;for(let i=0;i<e;i++){const e=d.children[i];if(!gm(e)||!e.position)break;const{top:r,bottom:l}=e.position;e.position={left:f,right:h,top:r+o,bottom:l+o},dx(e,t,n)}if(d.position){const{bottom:e}=d.position;d.position.bottom=e+o,dx(d,t,n)}const{value:r,scroll:l}=i;r&&(r.scrollTop+=o,l.current?.scrollTo({top:r.scrollTop}))}if(c)ax(e,t,n,o,i);else{xy(o,sb(e))&&ax(e,t,n,ec(o),i)}}function ux(e,t,n,o=[],i=[]){const r=e.children;let l=0;bm(r[0])&&o.length&&(l=o.shift()-Js(Rg(r[0].key)),!r[0].position&&l>0&&ax(e,t,n));let s=!1,c=i.shift();if(Lc(c))if(l>0){const e=r[l-1];wm(e)?(c=e.position?.bottom||0,s=!0):c=0}else{wm(r[l])?(c=_C(e.style?.paddingTop),s=!0):c=0}for(;l<r.length;){const a=r[l];if(!wm(a)){e.position&&e.style?.height&&(c+=e.style.height);break}s=!0;let u=0;if(u=Sc(a.children)&&a.style?.height?_C(a.style.height):ux(a,t,n,o,i),0===u){const e=t.get(a.key);e&&(u=e.offsetHeight)}if(a.position?.bottom)a.position.top=c,c+=u+BC(a.style),a.position.bottom=c,dx(a,t,n),l++;else{if(xm(a)){const t=ey(a)+BC(a.style)-_C(a.style?.paddingTop);a.position={top:c,bottom:c+=t,left:_C(e.style?.paddingLeft),right:_C(e.style?.paddingRight)}}else if(!_m(a)){const n=t.get(a.key);if(void 0===n){l++;continue}const o=n.offsetHeight;a.position={top:c,bottom:c+=_C(o)+MC(a.style),left:_C(e.style?.paddingLeft),right:_C(e.style?.paddingRight)}}l++,dx(a,t,n)}}return s?c-_C(e.style?.paddingTop):c}function dx(e,t,n){if(!e.position)return;e.style||(e.style={});const{top:o,bottom:i,left:r,right:l}=e.position,s=i-o-BC(e.style);let c=!1;const a=t.get(e.key);if(void 0!==a&&("absolute"!==e.style.position&&a.style.setProperty("position","absolute"),e.style.height!==s&&(c=!0,a.style.setProperty("height",`${s}px`)),e.style.top!==o&&(c=!0,a.style.setProperty("top",`${o}px`)),e.style.left!==r&&(c=!0,a.style.setProperty("left",`${r}px`)),e.style.right!==l&&(c=!0,a.style.setProperty("right",`${l}px`))),c&&n.current){const t=n.current.keys(),o=[];for(const i of t)if(i.startsWith(e.key)){const e=n.current.get(i)?.ele;if(void 0===e)continue;o.includes(e)||(o.push(e),Hw(n,i))}}Object.assign(e.style,{position:"absolute",height:s,top:o,left:r,right:l})}const fx=e=>t=>(t.isEditPending=e||void 0,t),hx=(e,t)=>n=>{const o=Qy(n.node,t);let i=0,r=n.node;for(;i<o.length-1;){o[i]>r.children.length-1&&(o[i]=r.children.length-1);const e=r.children[o[i]];if(!wm(e))return console.error("Can not search targtPath in originNode"),n;r=e,i++}let l=!1;if(o[i]>r.children.length-1&&(o[i]=r.children.length-1,l=!0),r.children.splice(o[i]+1,0,e),l){const t=Sb(tb(n.node,o)),i=Og(t);Ec(i,e.key)||(e.key=i,n=xx(t)(n))}return n},px=e=>t=>{const n=Qy(t.node,e);let o=0,i=t.node;for(;o<n.length-1;){n[o]>i.children.length-1&&(n[o]=i.children.length-1);const e=i.children[n[o]];if(!wm(e))return console.error("Can not search targtPath in originNode"),t;i=e,o++}return i.children.splice(n[o],1),t},vx=e=>t=>{const{requestEditNode:n,responseEditNode:o,extractReference:i}=e.current,r=n?.("prev");if(!r){const n=tc(t.node.children);if(!wm(n))return t;const o=n.position?.top??0;t.scrollTouch&&(t.scrollTouch[0]=o);const i=o-t.scrollTop;return i>0&&(t=Bx(e,i)(t)),t}const l={path:sb(r),node:r,push:r};o?.("push-prev",l);const s=Rg(r.key),c=sb((t=hx(r,s)(t)).node);return t=lx(c,ww.prev)(t),t=Sx(r,i)(t)},gx=e=>t=>{const{requestEditNode:n,responseEditNode:o,extractReference:i}=e.current,r=n?.("next");if(!r){if(t.node.position){const{bottom:n}=t.node.position;t.scrollTouch&&(t.scrollTouch[1]=n);const o=oE(t.scrollTouch),i=Math.max(o-t.clientHeight,0),r=Math.min(i,t.scrollTop)-t.scrollTop;t=Bx(e,r)(t)}return t}const l={path:cb(r),node:r,push:r};o?.("push-next",l);const s=cb(t.node),c=Rg(r.key),a=ky(c,s);return(-1===a||0===a&&c.length<=s.length)&&c[0]++,t=lx(s,ww.next)(t),t=hx(r,c)(t),t=Sx(r,i)(t)},mx=e=>t=>{const{requestEditNode:n,responseEditNode:o,extractReference:i}=e.current;let r=sb(t.node);if(0===r.length)return t;const l=Um(t.node,r);if(!wm(l))return t;const s=cb((t=px(r)(t)).node);r=sb((t=lx(s,ww.next)(t)).node);const c={path:r,node:Um(t.node,r),pop:l};o?.("pop-prev",c);const a=ty(t);return a.diff>a.size&&(t=mx(e)(t)),t=Ex(l,i)(t)},yx=e=>t=>{const{requestEditNode:n,responseEditNode:o,extractReference:i}=e.current;let r=cb(t.node);if(0===r.length)return t;const l=Um(t.node,r);if(!wm(l))return t;r=cb((t=px(r)(t)).node);const s={path:r,node:Um((t=lx(r,ww.next)(t)).node,r),pop:l};o?.("pop-next",s);const c=ny(t);return c.diff>c.size&&(t=yx(e)(t)),t=Ex(l,i)(t)};function bx(e,t){const n=e.children[e.children.length-1];if(!bm(n)){e.children.splice(0,e.children.length);for(let n=0;n<t.children.length;n++)e.children.push(t.children[n]);return}const o=t.children[0];if(bm(o))if(Em(n,o)){bx(n,o);for(let n=1;n<t.children.length;n++)e.children.push(t.children[n])}else for(let n=0;n<t.children.length;n++)e.children.push(t.children[n])}const Cx=(e,t)=>n=>(function e(t,n,o){if(Sc(n)||Sc(o)||Sc(t.children)){const e=t.children;return void(Sc(n)?Sc(o)||(t.children=e.slice(0,o[0]+1)):t.children=e.slice(n[0]))}if(n[0]===o[0]){const i=t.children[n[0]];return bm(i)&&e(i,n.slice(1),o.slice(1)),void(t.children=[i])}const i=t.children.slice(n[0]+1,o[0]),r=t.children[n[0]];bm(r)&&e(r,n.slice(1),[r.children.length-1]);const l=t.children[o[0]];bm(l)&&e(l,[0],o.slice(1)),t.children=[r,...i,l]}(n.node,e,t),n),wx=(e,t)=>n=>{const o=Um(n.node,e);return bm(o)?(We(t)&&t.length?t.forEach((e=>delete o.position?.[e])):delete o.position,delete o.style?.height,n):n},xx=(e,t=0)=>n=>{if(void 0===e||0===e.length)return e=rb(n.node),kx(n.node,e),n;const o=Um(n.node,ec(e));if(!bm(o))return n;const i=Js(Qy(n.node,e))??0,r=Js(e)??0;for(let n=0;n<=t;n++){const t=o.children[i+n];if(pm(t)){const o=[...e.slice(0,-1),r+n];t.key=Og(o);kx(t,Qs(rb(t),e.length))}}return n},Sx=(e,t)=>n=>{const o=t?.(e);return Sc(o)||(void 0===n.ureference?n.ureference=o:Object.assign(n.ureference,o)),n},Ex=(e,t)=>n=>{if(Sc(n.ureference))return n;const o=t?.(e);for(const e in o)delete n.ureference[e];return n};function kx(e,t){const n=Rg(e.key),o=t?.shift()??0;let i=0;for(;i<e.children.length;){const r=e.children[i];pm(r)&&(r.key=Og([...n,o+i]),kx(r,t)),i++}}const Dx=(e,t)=>n=>{const o=mb(n.node,e);if(t){const e=n.reflowStart?.path;if(e?.length){const t=ky(o,e);(-1===t||0===t&&o.length<=e.length)&&(n=lx(o,ww.next)(n))}else n=lx(o,ww.next)(n)}else n=lx(o,ww.next)(n);if(n=wx(o,["bottom"])(n),Dy(e,n.node)){const o=sb(n.node);n=wx(o)(n);const i=ec(o);Ec(e,i)||(n=Dx(i,t)(n))}return n},Ix=e=>t=>t.selection?(Vy(t.node,t.selection,((n,o)=>{t=Dx(o,e)(t)}),!0),t):t,Nx=e=>t=>{let n=t.node;const o=rb(n),i=lb(n),r=t.ureference??{},l={},s={};Lx(n,{},o,((e,n)=>{if(Ec(i,e))return!1;if(Lc(t.selection))return!0;if(my(t.selection)){if(wy(t.selection.focus.path,e)){if(sc(n)&&0===n.length)return!1;if(bm(n)&&0===n.children.length)return!1}}if(gm(n)&&!t.reduceBlock){const n=xb(e);t=Dx(n)(t),t=fx(!0)(t)}return t=Yw(e,"anchor",!1)(t),t=Yw(e,"focus",!1)(t),!0}),((e,n)=>{t=Yw(e,"anchor",!0)(t),t=Yw(e,"focus",!0)(t)}),((n,o)=>{if(!sc(o)){if(_m(o)){const e=o.props?.id,i=o.props?.uid;if(i&&e){if(s[i])return;s[i]=o,Im(r[i],s[i])?l[e]&&(t=Dx(n,!0)(t)):(l[e]=oy(o),t=Dx(n,!0)(t))}}if(Nm(o)||Lm(o)){let n=e.current.extractReference;n||(n=BE);const i=n(o);for(const e in i){if(s[e])continue;s[e]=i[e];const n=i[e].props?.id;if(Im(r[e],s[e])){if(l[n]){const n=Rg(i[e].key);t=Dx(n,!0)(t)}}else{l[n]=oy(i[e]);const o=Rg(i[e].key);t=Dx(o,!0)(t)}}}}}),t.reduceBlock);for(const e in s){const t=s[e],n=t.props?.id,o=l[n];if(pm(o)&&t.props){const e=t.props.uid,n=o.props?.uid;if(e===n)continue;const i=iy(o,t.key);i.props={...i.props},Object.assign(t,i),t.props.uid=e}}return t.ureference=s,delete t.reduceBlock,t};function Lx(e,t,n,o,i,r,l){const s=Rg(e.key),c=n.shift()||0;let a=0;for(;a<e.children.length;){const u=e.children[a];if(Fm(u)||Hm(u)){e.children[a]=u.children[0];continue}const d=[...s,c+a],f={...t,...e.style};if(bm(u)?(u.key=Og(d),r(d,u),Lx(u,f,n,o,i,r,l)):r(d,u),(sc(u)||vm(u)||Nm(u)||Nc(u)||l&&gm(u))&&0===$m(u)){if(_m(u)){a++;continue}if(gm(e)&&!l&&1===$m(e)){a++;continue}o(d,u)?e.children.splice(a,1):a++;continue}const h=e.children[a-1];void 0===h||gm(u)||!km(h,u,f)?vm(u)&&Dm(e,u)?(e.children=u.children,u.style&&(e.style||(e.style={}),Object.assign(e.style,u.style)),kx(e),i(d,u),a++):a++:o(d,u)?(sc(h)&&sc(u)?e.children[a-1]=h+u:bm(h)&&bm(u)?(h.children.push(...u.children),h.children=[h.children.join("")]):sc(h)&&bm(u)&&(e.children[a-1]=h+u.children[0]),e.children.splice(a,1)):a++}}const Bx=(e,t,n=!0)=>o=>{if(o.cwnd||0===t)return o;o.scrollTop+=t,o=Ax(!0)(o),wE(e,!1),o.scrollHeight<o.clientHeight&&(o.scrollHeight=o.clientHeight);let i=!1;if(o.scrollTop<0&&!e.current.requestEditNode?.("prev")){let e=o.scrollTop,n=o.node,r=0,l=0;for(;wm(n)&&n.position;){e-=n.position.top-r-l;const t=n.style?.paddingTop;r=t?parseFloat(String(t)):0;const o=n.style?.marginTop;l=o?parseFloat(String(o)):0,n=n.children[0]}e<0&&(t-=e,o.scrollTop-=e,o.scrollTouch&&(o.scrollTouch[0]=o.scrollTop),i=!0)}const{scrollTouch:r,scrollHeight:l,clientHeight:s}=o,c=o.scrollTop-(r?.[0]??0)-(l-s);if(!i&&c>0&&!e.current.requestEditNode?.("next")&&(t-=c,o.scrollTop-=c,o.scrollTouch)){const e=o.node.position;e&&(o.scrollTouch[1]=e.bottom)}const a=ty(o),u=ny(o);return t>0?(a.diff>a.size&&n&&(o=mx(e)(o),o=Mx(!0)(o)),u.diff<0&&(o=gx(e)(o),o=Mx(!0)(o))):t<0&&(u.diff>u.size&&n&&(o=yx(e)(o),o=Mx(!0)(o)),a.diff<0&&(o=vx(e)(o),o=Mx(!0)(o))),o=Mw()(o),o=Tw(e)(o),o=Aw()(o)},Tx=(e,t)=>n=>{const o=Wy(n);return 0===o||QS(e,o,!0,t),n},Ax=e=>t=>(t.isScrolling=e||void 0,t),Mx=e=>t=>(t.isScrollPending=e||void 0,t),Ox=(e,t)=>n=>{if(!n.selection||Ny(n.node,n.selection))return n;if(!my(n.selection))return Hx(e,t)(n);const{path:o,offset:i}=n.selection.focus;if(i>0)return n.selection.anchor.offset--,n.selection.focus.offset--,e&&t&&(n=ox(e,t)(n)),n;let r=0;const l=fb(n.node,o),s=Um(n.node,l);return sc(s)?(r=s.length,Xy(n.node,o,l)&&(r=Math.max(r-1,0))):bm(s)&&(r=0),n.selection.anchor.offset=r,n.selection.focus.offset=r,n.selection.anchor.path=[...l],n.selection.focus.path=[...l],e&&t&&(n=ox(e,t)(n)),n},Rx=(e,t)=>n=>{if(!n.selection||Ly(n.node,n.selection))return n;if(!my(n.selection))return _x(e,t)(n);const{path:o,offset:i}=n.selection.focus,r=Um(n.node,o);if(Nc(r))return n;if(i<$m(r))return n.selection.anchor.offset++,n.selection.focus.offset++,e&&t&&(n=ox(e,t)(n)),n;let l=0;const s=ab(n.node,o),c=Um(n.node,s);if(sc(c)){l=0,Xy(n.node,o,s)&&(l=1);const e=c.length;l>e&&(l=e)}else bm(c)&&(l=$m(c));return n.selection.anchor.offset=l,n.selection.focus.offset=l,n.selection.anchor.path=[...s],n.selection.focus.path=[...s],e&&t&&(n=ox(e,t)(n)),n},Px=(e,t,n,o)=>i=>{if(!i.selection||Ly(i.node,i.selection))return i;if(!my(i.selection))return jx(e,t,n,o)(i);const r=Ky(i,e,t);if(!r)return i;const l=Zy(r,n.getBoundingClientRect(),i,e);if(!l.path.length){const e=i.selection.focus.path,t=mb(i.node,e),n=Um(i.node,t);if(pm(n)){const e=lb(n),t=Um(i.node,e);if(null!==t){const n=$m(t),o={focus:{path:[...e],offset:n},anchor:{path:[...e],offset:n}};return i=_w(o)(i),i=jw(!1)(i),i=Ww(!0)(i)}}}return i=Qw(l,e,t,o)(i)},Fx=(e,t,n,o)=>i=>{if(!i.selection||Ny(i.node,i.selection))return i;if(!my(i.selection))return Wx(e,t,n,o)(i);const r=Gy(i,e,t);if(!r)return i;const l=Zy(r,n.getBoundingClientRect(),i,e);if(!l.path.length){const e=i.selection.focus.path,t=mb(i.node,e),n=Um(i.node,t);if(pm(n)){const e=rb(n),t={focus:{path:[...e],offset:0},anchor:{path:[...e],offset:0}};return i=_w(t)(i),i=jw(!1)(i),i=Ww(!0)(i)}}return i=Qw(l,e,t,o)(i)},Hx=(e,t)=>n=>{if(!n.selection)return n;let{before:{path:o,offset:i}}=Oy(n.selection),r=Um(n.node,o);for(;null===r&&o.length>0;)0===Js(o)?(o=ec(o),r=Um(n.node,o),i=0):(o=fb(n.node,o),r=Um(n.node,o),i=r?$m(r):0);return n.selection.anchor.path=[...o],n.selection.anchor.offset=i,n.selection.focus.path=[...o],n.selection.focus.offset=i,e&&t&&(n=ox(e,t)(n)),n},_x=(e,t)=>n=>{if(!n.selection)return n;const o=by(n.selection.anchor,n.selection.focus),{path:i,offset:r}=o?n.selection.anchor:n.selection.focus;return n.selection.anchor.path=[...i],n.selection.anchor.offset=r,n.selection.focus.path=[...i],n.selection.focus.offset=r,e&&t&&(n=ox(e,t)(n)),n},jx=(e,t,n,o)=>i=>(i=_x(e,t)(i),i=Px(e,t,n,o)(i)),Wx=(e,t,n,o)=>i=>(i=Hx(e,t)(i),i=Fx(e,t,n,o)(i)),zx=(e,t)=>n=>{if(!n.selection)return n;const{path:o,offset:i}=n.selection.focus;if(i>0)return n.selection.focus.offset=i-1,e&&t&&(n=ox(e,t)(n)),n;let r=0;const l=fb(n.node,o),s=Um(n.node,l);return sc(s)?r=Math.max(s.length-1,0):bm(s)&&(r=0),n.selection.focus.offset=r,n.selection.focus.path=[...l],e&&t&&(n=ox(e,t)(n)),n},Vx=(e,t)=>n=>{if(!n.selection)return n;const{path:o,offset:i}=n.selection.focus,r=Um(n.node,o);if(Nc(r))return n;if(i<$m(r))return n.selection.focus.offset++,e&&t&&(n=ox(e,t)(n)),n;let l=0;const s=ab(n.node,o),c=Um(n.node,s);return sc(c)?l=Math.min(c.length,1):bm(c)&&(l=$m(c)),n.selection.focus.offset=l,n.selection.focus.path=[...s],e&&t&&(n=ox(e,t)(n)),n},$x=(e,t,n,o)=>i=>{if(!i.selection||Ny(i.node,i.selection))return i;const r=Gy(i,e,t);if(!r)return i;const l=Uy(r,n.getBoundingClientRect(),i,e);if(!l.path.length){const{before:e,after:t}=Oy(i.selection),n=mb(i.node,e.path),o=Um(i.node,n);if(pm(o)){const e={focus:{path:[...rb(o)],offset:0},anchor:ts(t)};return i=_w(e)(i),i=jw(!1)(i),i=Ww(!0)(i)}}return i=ex(l,e,t,o)(i)},Zx=(e,t,n,o)=>i=>{if(!i.selection||Ly(i.node,i.selection))return i;const r=Ky(i,e,t);if(!r)return i;const l=Uy(r,n.getBoundingClientRect(),i,e);if(!l.path.length){const{before:e,after:t}=Oy(i.selection),n=mb(i.node,t.path),o=Um(i.node,n);if(pm(o)){const t=lb(o),n=Um(i.node,t);if(null!==n){const o=$m(n),r={anchor:ts(e),focus:{path:[...t],offset:o}};return i=_w(r)(i),i=jw(!1)(i),i=Ww(!0)(i)}}}return i=ex(l,e,t,o)(i)},Ux=(e,t)=>n=>{if(!n.selection||Ny(n.node,n.selection))return n;const{path:o,offset:i}=n.selection.focus,r=mb(n.node,o);let l=rb(Um(n.node,r));if(Ec(o,l)&&0===i){const e=fb(n.node,o),t=mb(n.node,e);l=rb(Um(n.node,t))}return n.selection.anchor.offset=0,n.selection.focus.offset=0,n.selection.anchor.path=[...l],n.selection.focus.path=[...l],e&&t&&(n=ox(e,t)(n)),n},qx=(e,t)=>n=>{if(!n.selection||Ly(n.node,n.selection))return n;const{path:o,offset:i}=n.selection.focus,r=mb(n.node,o);let l=lb(Um(n.node,r)),s=Um(n.node,l);if(s&&Ec(o,l)&&i===$m(s)){const e=ab(n.node,o),t=mb(n.node,e);l=lb(Um(n.node,t)),s=Um(n.node,l)}let c=0;return null!==s&&(c=$m(s)),n.selection.anchor.offset=c,n.selection.focus.offset=c,n.selection.anchor.path=[...l],n.selection.focus.path=[...l],e&&t&&(n=ox(e,t)(n)),n},Yx=(e,t)=>n=>{let o=!0;if(!n.selection)return n;let{before:{path:i,offset:r}}=Oy(n.selection),l=Um(n.node,i);if(null===l)return n;const s=()=>{if(null===l)return!1;for(;r<=0;){const e=fb(n.node,i),t=Um(n.node,e);if(null===t)return!1;if(!Xy(n.node,i,e))return!1;r=$m(t),l=t,i=e}return!0};for(;s()&&(Am(l)||Mm(l));){if(o=!1,!(n=Ox(e,t)(n)).selection)return n;const{before:i}=Oy(n.selection);l=Um(n.node,i.path),r=i.offset}for(;s()&&sc(l)&&l[r-1]?.match(Hg);){if(o=!1,!(n=Ox(e,t)(n)).selection)return n;const{before:i}=Oy(n.selection);if(l=Um(n.node,i.path),r=i.offset,null===l)return n}return o&&(n=Ox(e,t)(n)),n},Kx=(e,t)=>n=>{let o=!0;if(!n.selection)return n;let{after:{path:i,offset:r}}=Oy(n.selection),l=Um(n.node,i);if(null===l)return n;const s=()=>{if(null===l)return!1;for(;r>=$m(l);){const e=ab(n.node,i),t=Um(n.node,e);if(null===t)return!1;if(!Xy(n.node,i,e))return!1;r=0,l=t,i=e}return!0};for(;s()&&(Am(l)||Mm(l));){if(o=!1,!(n=Rx(e,t)(n)).selection)return n;const{after:i}=Oy(n.selection);l=Um(n.node,i.path),r=i.offset}for(;s()&&sc(l)&&l[r]?.match(Hg);){if(o=!1,!(n=Rx(e,t)(n)).selection)return n;const{after:i}=Oy(n.selection);if(l=Um(n.node,i.path),r=i.offset,null===l)return n}return o&&(n=Rx(e,t)(n)),n},Gx=()=>e=>{if(!e.selection||!my(e.selection))return e;const{node:t,selection:{focus:{path:n,offset:o}}}=e,i=Um(t,wb(t,n));if(!Pm(i))return e;const r=i.children[0];if(e.composition&&e.composition>0)return e.composition--,e;let l=o-1;if(o<=r.length)for(;l>0&&"'"!==r[l];)l--;return l<0&&(l=r.length),e.selection.anchor.offset=l,e.selection.focus.offset=l,e},Xx=()=>e=>{if(!e.selection||!my(e.selection))return e;const{node:t,selection:{focus:{path:n,offset:o}}}=e,i=Um(t,wb(t,n));if(!Pm(i))return e;const r=i.children[0];let l=o;return l>=r.length?(void 0===e.composition&&(e.composition=0),e.composition++,e):("'"===r[l]&&l++,l++,e.selection.anchor.offset=l,e.selection.focus.offset=l,e)},Jx=()=>e=>{if(!e.selection||!my(e.selection))return e;const{node:t,selection:{focus:{path:n}}}=e;return Pm(Um(t,wb(t,n)))&&e.composition&&e.composition>0?(e.composition--,e):e},Qx=()=>e=>{if(!e.selection||!my(e.selection))return e;const{node:t,selection:{focus:{path:n}}}=e;return Pm(Um(t,wb(t,n)))?(void 0===e.composition&&(e.composition=0),e.composition++,e):e},eS=(e,t)=>n=>{if(!n.selection)return n;if(my(n.selection))return vS(e,t)(n);const o=uS(e,n.node.style,t),{before:i,after:r}=Oy(n.selection,!1),l={offset:i.offset,path:Qy(n.node,i.path)},s={offset:r.offset,path:Qy(n.node,r.path)};return tS(n.node,l,s,o,[n.selection]),n};function tS(e,t,n,o,i,r){let l=0;for(;l<e.children.length;){const r=e.children[l];if(Cm(r)&&(r.key=Og(Rg(e.key).concat(l))),(l===t.path[0]||l===n.path[0])&&n.path[0]>=0){if(Nm(r)){nS(r,o);const e=r.children[0];bm(e)&&nS(e,o),l++;continue}if(Fm(r)){l++;continue}if(bm(r)){const e={...t,path:Qs(t.path)},s={...n,path:Qs(n.path)};if((Sc(e.path)||l!==t.path[0]&&l===n.path[0])&&(e.path=[0],e.offset=0),Sc(s.path)||l===t.path[0]&&l!==n.path[0]){s.path=[r.children.length-1];const e=Js(r.children);s.offset=void 0!==e?$m(e):0}tS(r,e,s,o,i),l++;continue}let s=t.offset,c=n.offset;if(n.path[0]-t.path[0]>0&&(l===t.path[0]?c=r.length:l===n.path[0]&&(s=0)),1===e.children.length&&0===s&&c===r.length){nS(e,o),l++;continue}if(r.length<=s){l++;continue}if(s!==c){if(e.children.splice(l--,1),n.path[0]--,s>0&&(e.children.splice(++l,0,r.slice(0,s)),n.path[0]++),s<c){const t=iy(cy([r.slice(s,c)]),Pg(e.key,l+1));if(nS(t,o),i){const n=Rg(e.key);for(let e=0;e<i?.length;e++){const{before:o,after:r}=Oy(i[e],!1);let a=Ec(o.path,r.path);Ec(o.path.slice(0,n.length),n)&&(o.path.length===n.length+1&&Js(o.path)===l?o.offset>=s&&o.offset<=c?(o.path=[...Rg(t.key),0],o.offset-=s):o.offset>c&&(o.path[n.length]++,o.offset-=c):s>0&&o.path[n.length]++),Ec(r.path.slice(0,n.length),n)&&(r.path.length!==n.length+1||Js(r.path)!==l+1&&!a?s>0&&r.path[n.length]++:r.offset>=s&&r.offset<=c?(r.path=[...Rg(t.key),0],r.offset-=s):r.offset>c&&(r.path[n.length]++,r.offset-=c))}}e.children.splice(++l,0,t),n.path[0]++}c<r.length&&(e.children.splice(++l,0,r.slice(c)),n.path[0]++),kx(e)}l++}else{if(l>t.path[0]&&l<n.path[0]){if(wm(r)){tS(r,{path:[0],offset:0},{path:[r.children.length-1],offset:$m(r.children[r.children.length-1])},o,i),l++;continue}if(bm(r)){nS(r,o),l++;continue}const t=iy(cy([r]),Pg(e.key,l));if(nS(t,o),e.children[l]=t,i){const e=Rg(t.key);for(let t=0;t<i?.length;t++){const{anchor:n,focus:o}=i[t];Ec(n.path.slice(0,e.length),e)&&n.path.push(0),Ec(o.path.slice(0,e.length),e)&&o.path.push(0)}}}l++}}}function nS(e,t,n){!function e(t,n,o){if(t.style)for(let e in n)delete t.style[e];Sc(t.style)&&delete t.style,t.children.forEach((t=>{(o?wm(t):bm(t))&&e(t,n,o)}))}(e,t,n),void 0===e.style&&(e.style={}),Object.assign(e.style,t)}const oS=(e,t,n)=>o=>{if(!o.selection)return o;if(my(o.selection)){const{path:i,offset:r}=o.selection.focus,l=Qy(o.node,i),s=Um(o.node,i);if(bm(s))return vS(t(e),n,e)(o);if(sc(s)){const c=Um(o.node,ec(i)),a=rS(c,e,t);if(Sc(a))return vS(t(e),n,e)(o);if(""===s)return sS(c,lS(a,e),t),o;const u=[];r>0&&u.push(cy([s.slice(0,r)],t(a),{...a}));let d=cy([""]);if(sS(d,lS(a,e),t),u.push(d),r<s.length&&u.push(cy([s.slice(r)],t(a),{...a})),i.length>2&&vm(c)){const e=Um(o.node,ec(i,2)),t=e.children.indexOf(c);if(-1!==t){let n=t;e.children.splice(t,1,...u.map(((e,t)=>(pm(e)&&(c.style&&(e.style={...c.style,...e.style}),c.props&&(e.props={...c.props,...e.props})),d===e&&(n+=t),e)))),kx(e),d=e.children[n]}}else{const e=Js(l)??0;let t=e;c.children.splice(e,1,...u.map(((e,n)=>(d===e&&(t+=n),e)))),kx(c),d=c.children[t]}const f=Rg(d.key).concat(0);o.selection.anchor.path=[...f],o.selection.focus.path=[...f],o.selection.anchor.offset=0,o.selection.focus.offset=0}return o}const{before:i,after:r}=Oy(o.selection,!1),l={offset:i.offset,path:Qy(o.node,i.path)},s={offset:r.offset,path:Qy(o.node,r.path)},c=[];iS(o.node,l,s,c,e,t);const a=rb(c[0]);null!==Um(o.node,a)&&(i.path=[...a],i.offset=0);const u=lb(c[1]??c[0]),d=Um(o.node,u);return null!==d&&(r.path=[...u],r.offset=$m(d)),o};function iS(e,t,n,o,i,r){let l=0;const s=rS(e,i,r);for(;l<e.children.length;){const c=e.children[l];if(Cm(c)&&(c.key=Og(Rg(e.key).concat(l))),(l===t.path[0]||l===n.path[0])&&n.path[0]>=0){if(Nm(c)){const e=lS(s,i);sS(c,e,r);const t=c.children[0];bm(t)&&sS(t,e,r),l++;continue}if(bm(c)){const e={...t,path:Qs(t.path)},s={...n,path:Qs(n.path)};(Sc(e.path)||l!==t.path[0]&&l===n.path[0])&&(e.path=[0],e.offset=0),(Sc(s.path)||l===t.path[0]&&l!==n.path[0])&&(s.path=[c.children.length-1],s.offset=$m(c.children[c.children.length-1])),iS(c,e,s,o,i,r),l++;continue}let a=t.offset,u=n.offset;if(n.path[0]-t.path[0]>0&&(l===t.path[0]?u=c.length:l===n.path[0]&&(a=0)),1===e.children.length&&0===a&&u===c.length){sS(e,lS(s,i),r),0===o.length?o.push(e):o[1]=e,l++;continue}if(a!==u){if(e.children.splice(l--,1),n.path[0]--,a>0){const t=iy(cy([c.slice(0,a)],r(s),{...s}),Pg(e.key,l+1));e.children.splice(++l,0,t),n.path[0]++}if(a<u){const t=iy(cy([c.slice(a,u)]),Pg(e.key,l+1));sS(t,lS(s,i),r),e.children.splice(++l,0,t),n.path[0]++,0===o.length?o.push(t):o[1]=t}if(u<c.length){const t=iy(cy([c.slice(u)],r(s),{...s}),Pg(e.key,l+1));e.children.splice(++l,0,t),n.path[0]++}kx(e)}l++}else{if(l>t.path[0]&&l<n.path[0]){if(bm(c)){iS(c,{path:[0],offset:0},{path:[c.children.length-1],offset:$m(c.children[c.children.length-1])},o,i,r),l++;continue}const t=iy(cy([c],r(s)),Pg(e.key,l));sS(t,lS(s,i),r),e.children[l]=t}if(!Sc(s))if(bm(c))sS(c,lS(s,i),r);else if(sc(c)){const t=iy(cy([c],r(s)),Pg(e.key,l));sS(t,lS(s,i),r),e.children[l]=t}l++}}}function rS(e,t,n){const o={};for(let n in t)void 0!==e.props?.[n]&&(o[n]=e.props[n],delete e.props[n]);const i=n(t);for(let t in i){const n=t;void 0!==e.style?.[n]&&delete e.style[n]}return o}function lS(e,t){const n={};for(let t in e)null!==e[t]&&(n[t]=e[t]);for(let e in t)null!==t[e]&&(n[e]=t[e]);return n}function sS(e,t,n){e.props={...e.props,...t},e.style={...e.style,...n(t)}}const cS=(e,t)=>n=>{if(!n.selection)return n;if(my(n.selection)){const o=mb(n.node,n.selection.focus.path),i=Um(n.node,o);if(wm(i)){const r=aS(n.node,o,t);nS(i,uS(e,r,t))}return n}return Vy(n.node,n.selection,((o,i)=>{const r=aS(n.node,i,t);nS(o,uS(e,r,t),!0)})),n};function aS(e,t,n){const o={},i=Qy(e,t);let r=0;do{if(e.style)for(let t in e.style){const i=t;n?.[i]&&(o[i]=e.style[i])}const t=e.children[i[r++]];if(!bm(t))break;e=t}while(e&&r<i.length);return o}function uS(e,t,n){const o={};for(let i in e){const r=i;e[r]!==t?.[r]&&(n&&void 0===n[r]||(o[r]=e[r]))}return o}function dS(e){e.style=e.style??{},e.style.paddingBottom=3,e.style.paddingTop=3}const fS=e=>t=>{if(!t.selection||!my(t.selection))return t;const{path:n,offset:o}=t.selection.focus,i=Qy(t.node,n),r=Um(t.node,ec(n));let l=Um(t.node,n);if(null===l){const e=Og(n);l=iy(cy([]),e);const o=Js(n);if(void 0===o)return t;r.children[o]=l}const s=vE(e)?-1:0;if(sc(l))r.children[Js(i)??0]=l.slice(0,o)+e+l.slice(o),t.selection.anchor.offset+=e.length+s,t.selection.focus.offset+=e.length+s;else if(Nm(l)){if(r.children.splice((Js(i)??0)+o,0,e),t.selection.anchor.offset=e.length+s,t.selection.focus.offset=e.length+s,o>0){const e=Sb(n);t.selection.anchor.path=[...e],t.selection.focus.path=[...e]}}else if(bm(l)){l.children.splice(o,0,e),t.selection.anchor.offset=e.length+s,t.selection.focus.offset=e.length+s;const i=[...n,o];t.selection.anchor.path=[...i],t.selection.focus.path=[...i]}return t=Ix()(t)},hS=e=>t=>{if(my(t.selection)||(t=bS()(t)),!t.selection)return t;for(;e.type===_g&&e.children.length<=1;){const t=e.children[0];sc(t)?e=cy([t],e.style):(e.style&&(t.style={...RC(e.style),...t.style}),e=t)}e=function e(t){return Nm(t)?t:{...t,children:t.children.filter((e=>!(!sc(e)&&!pm(e))&&((!Nm(e)||0!==e.children.length)&&("string"!=typeof e&&e.type!==jg||!Sm(e)||!Sc(e.props))))).map((t=>pm(t)&&!Nm(t)?e(t):t))}}(e),ym(e)&&(e=cy(e.children,RC(e.style)));let n=null,o=null,i=null;const{path:r,offset:l}=t.selection.focus,s=mb(t.node,r),c=Um(t.node,s),a=rb(c),u=lb(c),d=Qy(t.node,r),f=Um(t.node,ec(r)),h=Um(t.node,ec(r,2));let p=Um(t.node,r);if(null===p){const e=Og(r);p=iy(cy([]),e);const n=Js(r);if(void 0===n)return t;f.children[n]=p}let v=!1;0===ky(a,r)&&0===l&&(v=!0);let g=!1;0===ky(u,r)&&$m(p)===l&&(g=!0);const m=v&&g;if(mm(e)){let r=!1;if(t.selection){const e=t.selection.focus.path,n=mb(t.node,e),o=Um(t.node,n);Sm(o,!0)&&!Bm(o)&&(r=!0)}let l=nb(e);if(!r&&!v){const t=bb(e,l);t&&(l=t);let o=yb(e,l);o&&(l=o);const i=mb(e,l);o=yb(e,i),o&&(l=o);for(let t=l.length-1;t>=0;t--){const o=Zm(e,l.slice(0,t));if(ym(o)&&(n=cy([...o.children]),o.children.length=0),mm(o)){Sm(o.children[0],!0)&&o.children.shift()}}}if(!r&&!Sm(e,!0)&&!g){let t=ob(e);const n=bb(e,t);n&&(t=n);let o=yb(e,t);o&&(t=o);const r=mb(e,t);o=yb(e,r),o&&(t=o);for(let n=t.length-1;n>=0;n--){const o=Zm(e,t.slice(0,n));if(ym(o)&&(i=cy([...o.children]),o.children.length=0),mm(o)){Sm(o.children[o.children.length-1],!0)&&o.children.pop()}}}Sm(e,!0)||(o=e)}if(n||o||i)return n?t=hS(n)(t):o&&(m||(t=LS()(t),g||(t=Ox()(t)))),o&&(t=pS(o)(t)),i&&(t=o?Rx()(t):LS()(t),t=hS(i)(t)),t;let y=r,b=p;if(sc(p))if(""===p)b=iy(e,Og(y)),f.children[Js(d)??0]=b;else if(0===l&&r.length>=2&&vm(f)&&$m(f)<=1){const t=h.children.indexOf(f);if(-1!==t){const n={...f.style,...e.style};y=ec(r),b=iy({...e,style:n},Og(y)),h.children.splice(t,0,b)}}else if(l===p.length&&r.length>=2&&vm(f)&&$m(f)<=1){const t=h.children.indexOf(f);if(-1!==t){const n={...f.style,...e.style};y=Sb(ec(r)),b=iy({...e,style:n},Og(y)),h.children.splice(t+1,0,b)}}else y=Sb(r),b=iy(e,Og(y)),f.children.splice(Js(d)??0,1,p.slice(0,l),b,p.slice(l));else Nm(p)?(y=l>0?Sb(r):r,b=iy(e,Og(y)),f.children.splice((Js(d)??0)+l,0,b)):bm(p)&&(y=[...r,l],mm(p)&&dS(e=sy([e])),b=iy(e,Og(y)),p.children.splice(l,0,b));if(bm(b)){let e=lb(b),n=Um(t.node,e);if(Rm(n)&&(e=fb(t.node,e),n=Um(t.node,e)),null===n)return t;t.selection.anchor.offset=$m(n),t.selection.focus.offset=$m(n),t.selection.anchor.path=[...e],t.selection.focus.path=[...e]}function C(e){if("toggle-list"!==e.props?.type&&Lm(e)&&$m(e)>1){const n=Rg(e.key);if(mm(e)?e.children=[iy(sy(e.children),Og([...n,0]))]:e.children=[iy(cy(e.children),Og([...n,0]))],!t.selection)return;const o=t.selection.focus.path;0===ky(n,o)&&o.length>n.length&&o.splice(n.length,0,0);const i=t.selection.anchor.path;0===ky(n,i)&&i.length>n.length&&i.splice(n.length,0,0)}}return C(f),C(h),t=Ix(!0)(t)},pS=e=>t=>{if(my(t.selection)||(t=bS()(t)),!t.selection)return t;const{path:n}=t.selection.focus,o=mb(t.node,n),i=Um(t.node,o);if(Sm(i,!0)){const n=Og(o),r=iy(e,n);Object.assign(i,r,{position:i.position});const l=lb(i),s=Um(t.node,l);if(null!==s){const e=$m(s);t.selection={focus:{path:[...l],offset:e},anchor:{path:[...l],offset:e}}}return t=Dx(o)(t)}const r=Sb(o),l=Og(r),s=iy(e,l);t=hx(s,o)(t);const c=Um((t=xx(ec(o))(t)).node,r);if(!gm(c))return t=(e=>(e.selection=void 0,e.selectionStyle=void 0,e.selectionDecorate=void 0,e.selectionLayout=void 0,e.selectionPath=void 0,e.selectionBackground=void 0,e))(t);let a=lb(c),u=Um(t.node,a);if(Rm(u)&&(a=fb(t.node,a),u=Um(t.node,a)),null===u)return t=(e=>(e.selection=void 0,e.selectionStyle=void 0,e.selectionDecorate=void 0,e.selectionLayout=void 0,e.selectionPath=void 0,e.selectionBackground=void 0,e))(t);if(!t.selection)return t;const d=$m(u);return t.selection.anchor.offset=d,t.selection.focus.offset=d,t.selection.anchor.path=[...a],t.selection.focus.path=[...a],t=Ix(!0)(t)},vS=(e,t,n)=>o=>{if(!o.selection||!my(o.selection))return o;const i={...e},r=o.selectionStyle;if(r)for(let e in i){const t=e;i[t]===r[t]&&delete i[t]}if(Sc(i))return o;let{path:l,offset:s}=o.selection.focus,c=Um(o.node,l);if(""===c||c===Fg){const e=Um(o.node,ec(l));if(vm(e)&&$m(e)<=1)e.style={...e.style,...i},n&&(e.props={...e.props,...n});else if(pm(e)){const t=Js(l)??0,r=iy(cy([c],i,n),Og(l));e.children[t]=r,o.selection.anchor.offset=0,o.selection.focus.offset=0,o.selection.anchor.path=[...l,0],o.selection.focus.path=[...l,0]}return o}if(null!==c&&s===$m(c)){const i=ab(o.node,l);if(Xy(o.node,l,i)){o.selection.anchor.offset=0,o.selection.focus.offset=0,o.selection.anchor.path=[...i],o.selection.focus.path=[...i];const r={...o.selectionStyle,...e};return o=Zw(t)(o),vS(r,t,n)(o)}}const a=cy([""],i,n);return hS(a)(o)},gS=(e,t)=>n=>{if(!n.selection||!my(n.selection))return n;const{node:o,selection:{focus:{path:i,offset:r}}}=n,l=wb(o,i);if(0===l.length){const o=py(e);return t&&o.children.push(hy()),n=hS(o)(n)}const s=Um(o,l);if(!Pm(s))return n;const c=s.children[0];if(c===e)return n;s.children[0]=e;const a=r+(e.length-c.length);return n.selection.focus.offset=a,n.selection.anchor.offset=a,n=Ix(!0)(n)},mS=(e,t)=>n=>{if(!n.selection)return n;const{focus:o,anchor:i}=ts(n.selection);let r=Um(n.node,ec(o.path)),l=Um(n.node,ec(i.path));function s(s,c){if(!e)return;let a=ts(e);if(t){if($m(s)>1)mm(s)?s.children=[sy(s.children)]:s.children=[cy(s.children)],kx(s),r===s&&(r=s.children[0]),l===s&&(l=s.children[0]);else if(0===$m(s)){const e=Pg(s.key,0),t=iy(cy([""]),e);r=t,l=t,s.children.push(t),o.path.length=0,i.path.length=0}return void Object.assign(s,Tc(s,a))}const u=ec(c),d=Um(n.node,u);if(!bm(d))return;const f=d.children.indexOf(s);if(-1===f)return;let h=a;for(;mm(h)&&1===h.children.length;)h=h.children[0];const p=Math.max(0,(Js(c)??0)-1);let v=[...u,p];Sc(PC(s.style))?h.children.push(s):(h.children.push({...s,style:RC(s.style)}),a={...s,children:[h]},v=[...u,0,p]),d.children[f]=a,n=xx(u)(n),n=Dx(v)(n)}function c(e){const t=yb(n.node,e);if(!t)return;const o=Um(n.node,t);if(!bm(o))return;if(!mm(o))return o.type=_g,void delete o.props;const i=ec(t),r=Um(n.node,i);if(!bm(r))return;const l=r.children.indexOf(o);if(-1===l)return;const s=o.children.map((e=>(gm(e)&&(e.style=OC(e.style),delete e.position),e)));r.children.splice(l,1,...s),n=xx(i)(n),n=Dx([...i,l])(n)}function a(){if(!bm(r)||!bm(l))return;const e=[...Rg(r.key),Js(o.path)??0],t=[...Rg(l.key),Js(i.path)??0];n.selection={focus:{path:e,offset:o.offset},anchor:{path:t,offset:i.offset}}}if(my(n.selection)){const t=mb(n.node,o.path),i=Um(n.node,t);return e?s(i,t):c(t),a(),n}const u=[];return Vy(n.node,n.selection,((t,n)=>{for(const e of u)if(0===ky(e,n))return;return u.push(n),e?s(t,n):c(n)}),!0),a(),n};function yS(e,t){const{before:n,after:o}=Oy(t);if(n.path[0]===o.path[0]){const t=e.children[n.path[0]];if(Nm(t))return e.children.splice(n.path[0],1,""),oy({...e,children:[t]});if(bm(t))return{...oy({...e,children:[]}),children:[yS(t,{anchor:{path:n.path.slice(1),offset:n.offset},focus:{path:o.path.slice(1),offset:o.offset}})]};if(sc(t)){const i=t.slice(0,n.offset),r=t.slice(o.offset);e.children.splice(n.path[0],1,i,r);const l=t.slice(n.offset,o.offset);return{...oy({...e,children:[]}),children:[l]}}}const i=e.children[n.path[0]],r=e.children[o.path[0]],l=[];if(Nm(r))1===o.offset&&(l.unshift(oy(r)),e.children.splice(o.path[0],1,""));else if(bm(r)){const e=o.path.length>1?o.path.slice(1):[0];l.unshift(yS(r,{anchor:{path:[0],offset:0},focus:{path:e,offset:o.offset}}))}else if(sc(r)){const t=r.slice(o.offset);e.children[o.path[0]]=t;const n=r.slice(0,o.offset);n&&l.unshift(n)}const s=n.path[0]+1,c=o.path[0]-s;if(c>0&&l.splice(0,0,...e.children.splice(s,c).map(((e,t)=>bm(e)?oy(e):e))),Nm(i))0===n.offset&&(l.unshift(oy(i)),e.children.splice(n.path[0],1,""));else if(bm(i)){const e=Math.max(0,$m(i)-1),t=i.children[e],o=n.path.length>1?n.path.slice(1):[0];l.unshift(yS(i,{anchor:{path:o,offset:n.offset},focus:{path:[e],offset:$m(t)}}))}else if(sc(i)){const t=i.slice(0,n.offset);e.children[n.path[0]]=t;const o=i.slice(n.offset);o&&l.unshift(o)}return{...oy({...e,children:[]}),children:l}}const bS=()=>e=>{const t=e.selection;if(!t||my(t))return e;const{before:n,after:o}=Oy(t),i=Um(e.node,mb(e.node,n.path)),r=Um(e.node,mb(e.node,o.path));return xm(r)||xm(i)?e:wm(r)&&wm(i)?(n.path=Qy(e.node,n.path),o.path=Qy(e.node,o.path),CS(e.node,n,o,r,i),e=Hx()(e),e=Ix(!0)(e)):e};function CS(e,t,n,o,i,r){let l=0;for(;l<e.children.length;){const r=e.children[l];if((l===t.path[0]||l===n.path[0])&&n.path[0]>=0){if(bm(r)){if(0===r.children.length){e.children.splice(l,1),n.path[0]--;continue}const s={...t,path:Qs(t.path)},c={...n,path:Qs(n.path)};if((Sc(s.path)||l!==t.path[0]&&l===n.path[0])&&(s.path=[0],s.offset=0),(Sc(c.path)||l===t.path[0]&&l!==n.path[0])&&(c.path=[r.children.length-1],c.offset=$m(r.children[r.children.length-1])),CS(r,s,c,o,i),r===o&&i!==o){for(;o.children.length;){const e=o.children.shift();if(sc(e)&&0===e.length)continue;const t=i.children[i.children.length-1];km(t,e)?sc(t)&&sc(e)?i.children[i.children.length-1]=t+e:bm(t)&&bm(e)?t.children=[...t.children,...e.children]:sc(t)&&bm(e)&&(i.children[i.children.length-1]=t+e.children[0]):i.children.push(e)}e.children.splice(l,1),n.path[0]--;continue}if(0===r.children.length&&r!==i){e.children.splice(l,1),n.path[0]--;continue}l++;continue}let s=t.offset,c=n.offset;if(n.path[0]-t.path[0]>0&&(l===t.path[0]?c=r.length:l===n.path[0]&&(s=0)),s!==c){const t=`${r.slice(0,s)}${r.slice(c)}`;e.children.splice(l,1,t??null)}l++}else l>t.path[0]&&l<n.path[0]?(e.children.splice(l,1),n.path[0]--):l++}}const wS=e=>t=>{if(!t.selection)return t;if(!my(t.selection))return bS()(t);let{path:n,offset:o}=t.selection.focus;const i=Qy(t.node,n);if(o>0){const r=Um(t.node,n),l=Um(t.node,ec(n));if(sc(r)){let e=0;pE[r[o-1]]===r[o]&&(e=1),l.children[Js(i)??0]=r.slice(0,o-1)+r.slice(o+e)}else Nm(r)&&l.children.splice(Js(i)??0,1,"");if(o--,t.selection.anchor.offset=o,t.selection.focus.offset=o,0===o&&1===$m(l)&&""===l.children[0])for(const t in e)delete l.style?.[t];return t=Ix(!0)(t)}const r=Ny(t.node,t.selection);if(My(t.node,t.selection)){let e=mb(t.node,n),o=Um(t.node,e);const i=yb(t.node,e);if(wm(o)){let l=!1;const s=yb(t.node,ec(i));if(s?.length&&(l=!0),i&&(!r||l)&&Iy(e.slice(i.length)))return t=mS()(t);if(r)for(;!o.style?.marginLeft;){const n=ec(e);if(n.length<=0)break;const i=Um(t.node,n);if(!wm(i))break;e=n,o=i}if(o.style){let e=!1;const{margin:n,marginLeft:i,padding:r,paddingLeft:l}=o.style;if(void 0!==r&&0!==r&&"0px"!==r&&(delete o.style.padding,e=!0),void 0!==l&&0!==l&&"0px"!==l&&(delete o.style.paddingLeft,e=!0),e)return t;if(void 0!==n&&0!==n&&"0px"!==n&&(delete o.style.margin,e=!0),void 0!==i&&0!==i&&"0px"!==i&&(delete o.style.marginLeft,e=!0),e)return t}const c=Um(t.node,n);if(bm(c)){const e=OC(c.style);if(delete e?.paddingTop,delete e?.paddingBottom,!Sc(e))return delete c.style,t}}}if(r)return t;let l=fb(t.node,n);Jy(t.node,l)&&(l=Cb(t.node,l));const s=Um(t.node,l);if(null!==s){const e=$m(s);t.selection.anchor.path=[...l],t.selection.focus.path=[...l],t.selection.anchor.offset=e,t.selection.focus.offset=e}else console.error("preNode should not be null");return Xy(t.node,n,l)?wS(e)(t):(t=SS(n,l)(t),t=Ix(!0)(t))},xS=()=>e=>{if(!e.selection||Ly(e.node,e.selection))return e;if(!my(e.selection))return bS()(e);const{path:t,offset:n}=e.selection.focus,o=Qy(e.node,t),i=Um(e.node,t);if(null===i)return e;if(n<$m(i)){const r=Um(e.node,ec(t));return sc(i)?r.children[Js(o)??0]=i.slice(0,n)+i.slice(n+1):Nm(i)&&r.children.splice(Js(o)??0,1,""),e}let r=ab(e.node,t);Jy(e.node,r)&&(r=Cb(e.node,r));const l=Um(e.node,r);return Xy(e.node,t,r)?null!==l?(e.selection.anchor.path=[...r],e.selection.focus.path=[...r],e.selection.anchor.offset=0,e.selection.focus.offset=0,xS()(e)):e:(e=SS(r,t)(e),e=Ix(!0)(e))},SS=(e,t)=>n=>{const o=mb(n.node,e),i=mb(n.node,t),r=Um(n.node,o),l=Um(n.node,i);if(xm(r)||xm(l))return n;if(!wm(r)||!wm(l))return n;const s=l.children;for(;r.children.length;){const e=r.children.shift();if(sc(e)&&0===e.length)continue;const t=s[s.length-1];km(t,e)?sc(t)&&sc(e)?s[s.length-1]=t+e:bm(t)&&bm(e)?t.children=[...t.children,...e.children]:sc(t)&&bm(e)&&(s[s.length-1]=t+e.children[0]):s.push(e)}let c=ec(o),a=r,u=Um(n.node,c);do{const e=u.children.indexOf(a);if(-1===e)break;u.children.splice(e,1),c=ec(c),a=u,u=Um(n.node,c)}while(0===a.children.length);return n},ES=e=>t=>{if(!t.selection||Ny(t.node,t.selection))return t;const{before:n,after:o}=Oy(t.selection,!0);let i=n;if(0===i.offset){const e=fb(t.node,i.path),n=Um(t.node,i.path);if(null===n)return t;i.path=e,i.offset=$m(n)}else i.offset--;const r=mb(t.node,i.path),l=Um(t.node,r);if(!wm(l))return t;i=cE(i,uE(l,e));const s={anchor:o,focus:{path:i.path,offset:i.offset}};return t=_w(s)(t),t=bS()(t),t=fx(!0)(t)},kS=e=>t=>{if(!t.selection||Ly(t.node,t.selection))return t;const{before:n,after:o}=Oy(t.selection,!0);let i=o;const r=Um(t.node,i.path);if(null===r)return t;if(i.offset===$m(r)){const e=ab(t.node,i.path);if(null===Um(t.node,i.path))return t;i.path=e,i.offset=0}else i.offset++;const l=mb(t.node,i.path),s=Um(t.node,l);if(!wm(s))return t;i=aE(i,uE(s,e));const c={anchor:n,focus:{path:i.path,offset:i.offset}};return t=_w(c)(t),t=bS()(t),t=fx(!0)(t)},DS=()=>e=>{if(!e.selection)return e;const{before:t}=Oy(e.selection);if(!(e=Yx()(e)).selection)return e;const{before:n}=Oy(e.selection);return e=_w({focus:n,anchor:t})(e),e=bS()(e),e=Ix(!0)(e)},IS=()=>e=>{if(!e.selection)return e;const{after:t}=Oy(e.selection);if(!(e=Kx()(e)).selection)return e;const{after:n}=Oy(e.selection);return e=_w({focus:t,anchor:n})(e),e=bS()(e),e=Ix(!0)(e)},NS=e=>t=>{if(void 0===t.selection)return t;const n=t.selection.focus.path,o=wb(t.node,n);if(o.length){const n=Um(t.node,o);if(Pm(n)){const i=ec(o),r=Um(t.node,i);if(pm(r)){const o=r.children.indexOf(n);if(-1===o)return t;if(r.children.splice(o,1),o>=1){const n=r.children[o-1];if(sc(n)){const l=`${n}${e}`;r.children[o-1]=l;const s=[...i,o-1];t.selection={anchor:{path:[...s],offset:l.length},focus:{path:[...s],offset:l.length}}}else if(Nm(n)){r.children.splice(o,0,e);const n=[...i,o];t.selection={anchor:{path:[...n],offset:e.length},focus:{path:[...n],offset:e.length}}}else if(sc(Js(n.children))){const o=n.children.length-1,i=`${Js(n.children)}${e}`;n.children[o]=i;const r=[...Rg(n.key),o];t.selection={anchor:{path:[...r],offset:i.length},focus:{path:[...r],offset:i.length}}}else{n.children.push(e);const o=n.children.length-1,i=[...Rg(n.key),o];t.selection={anchor:{path:[...i],offset:e.length},focus:{path:[...i],offset:e.length}}}}else{r.children.unshift(e);const n=[...Rg(r.key),0];t.selection={anchor:{path:[...n],offset:e.length},focus:{path:[...n],offset:e.length}}}}}}else t=fS(e)(t);return t},LS=()=>e=>{if(e.selection&&!my(e.selection)&&(e=bS()(e)),!(e=Ix(!0)(e)).selection)return e;const{path:t,offset:n}=e.selection.focus,o=Qy(e.node,t),i=mb(e.node,t);let r=Um(e.node,i);if(0===n){const n=yb(e.node,t);if(n){const t=Um(e.node,n);if(Lm(t)&&Sm(t))return wS()(e)}}const l=Um(e.node,ec(i)),s=Rg(l.key);if(Sm(r)&&Js(l.children)===r){if(r.style?.marginLeft)return delete r.style.marginLeft,e;const n=ec(i,2),o=Um(e.node,n);if(o!==l){l.children.pop(),Sm(l)&&(l.style=FC(l.style,r.style)),e=Dx(s,!0)(e);const n=o.children.indexOf(l),c=Sb(ec(i)),a=iy(oy(r),Og(c));if(o.children.splice(n+1,0,a),(e=xx(ec(t,2))(e)).selection){const t=rb(a);e.selection.anchor.path=[...t],e.selection.focus.path=[...t],e.selection.anchor.offset=0,e.selection.focus.offset=0,e=xx(s)(e),e=Ix(!0)(e)}return e}}const c=Qs(o,i.length),a=ts({...oy(r),children:[]}),u=r.children[0];let d=a;for(;c.length;){const e=c.shift();if(void 0===e)break;const t=r.children.splice(e+1,$m(r));t.length&&(d.children=[...d.children,...t]);const o=r.children[e];if(sc(o)){o.length>n&&(r.children[e]=o.slice(0,n),d.children.unshift(o.slice(n)));break}if(Nm(o)){0===n&&(r.children.splice(e,1),d.children.unshift(o));break}if(bm(o)&&$m(o)){const e=ts({...o,children:[]});d.children.unshift(e),r=o,d=e}}let f=!1;My(e.node,e.selection)||Mm(u)&&(f=!0,a.children.unshift(ts(u)));const h=iy(a,Og(Sb(i))),p=Qy(e.node,i);if(0===$m(h)&&h.children.push(""),dS(h),l.children.splice((Js(p)??0)+1,0,h),e.selection){const t=rb(h),n=f?1:0;e.selection.anchor.path=[...t],e.selection.focus.path=[...t],e.selection.anchor.offset=n,e.selection.focus.offset=n}return e=xx(s)(e),e=Ix(!0)(e)},BS=()=>e=>{e.selection&&!my(e.selection)&&(e=bS()(e));const t=fy();e=hS(t)(e);const n=e.selection?.focus.path;if(!n?.length)return e;const o=ab(e.node,n);return null!==Um(e.node,o)&&(e.selection={focus:{path:[...o],offset:0},anchor:{path:[...o],offset:0}}),e},TS=e=>t=>{if(void 0===t.selection)return t;if(!my(t.selection)){const n=[];return Vy(t.node,t.selection,((o,i)=>{for(const e of n)if(0===ky(e,i))return;n.push(i);const r=Ym(t.node,i);for(;r.length;){const e=r.pop();if(pm(e)&&Lm(e)){o=e,i=Rg(e.key);break}}const l=HC(t.node,i,e),s=2*parseFloat(String(l.fontSize)),c=parseInt(String(o.style?.marginLeft??0));o.style={...o.style,marginLeft:c+s},t=Ix(!0)(t)})),t}const{path:n,offset:o}=t.selection.focus,i=Um(t.node,n),r=HC(t.node,n,e),l=2*parseFloat(String(r.fontSize)),s=mb(t.node,n),c=Um(t.node,s);if(!gm(c))return t;const a=rb(c),u=Um(t.node,a),d=fb(t.node,n),f=Um(t.node,d),h=Ym(t.node,n);let p=h.length-1,v=null;for(;p>=0;){const e=h[p];if(Bm(e)){v=e;if(0===Js(Rg(e.key))){p--;continue}break}p--}if((()=>{if(Mm(u)){if(u===i)return!0;if(u===f&&0===o)return!0}return!1})()){const e=parseInt(String(c.style?.marginLeft??0));return c.style={...c.style,marginLeft:e+l},t=Ix(!0)(t)}if((v===c||0===Js(s))&&(Bm(v)&&0===ky(n,a)&&0===o)&&v){const e=parseInt(String(v.style?.marginLeft??0));return v.style={...v.style,marginLeft:e+l},t=Ix(!0)(t)}const g=dy({width:l});return hS(g)(t)},AS=e=>t=>{if(void 0===t.selection)return t;if(!my(t.selection)){const n=[];return Vy(t.node,t.selection,((o,i)=>{for(const e of n)if(0===ky(e,i))return;n.push(i);const r=Ym(t.node,i);for(;r.length;){const e=r.pop();if(pm(e)&&Lm(e)){o=e,i=Rg(e.key);break}}const l=HC(t.node,i,e),s=2*parseFloat(String(l.fontSize)),c=parseInt(String(o.style?.marginLeft??0));o.style={...o.style,marginLeft:Math.max(0,c-s)},t=Ix(!0)(t)})),t}const{path:n,offset:o}=t.selection.focus,i=Um(t.node,n),r=HC(t.node,n,e),l=2*parseFloat(String(r.fontSize)),s=mb(t.node,n),c=Um(t.node,s);if(!gm(c))return t;const a=rb(c),u=Um(t.node,a),d=fb(t.node,n),f=Um(t.node,d),h=Ym(t.node,n);let p=h.length-1,v=null;for(;p>=0;){const e=h[p];if(Bm(e)){v=e;if(0===Js(Rg(e.key))){p--;continue}break}p--}if((()=>{if(Mm(u)){if(u===i)return!0;if(u===f&&0===o)return!0}return!1})()){const n=parseInt(String(c.style?.marginLeft??0));return n>0?c.style={...c.style,marginLeft:Math.max(0,n-l)}:t=wS(e)(t),t=Ix(!0)(t)}if((v===c||0===Js(s))&&(Bm(v)&&0===ky(n,a)&&0===o)&&v){const e=parseInt(String(v.style?.marginLeft??0));return v.style={...v.style,marginLeft:Math.max(0,e-l)},t=Ix(!0)(t)}return t},MS=()=>e=>{e.selection&&!my(e.selection)&&(e=bS()(e));const t=uy({width:Kf(6)});return hS(t)(e)},OS=e=>t=>{const n=ty(t),o=ny(t);return n.diff>n.size&&(t=mx(e)(t)),o.diff>o.size&&(t=yx(e)(t)),t=RS(!0)(t)},RS=e=>t=>(t.slicer=e,t),PS=e=>t=>(void 0===t.contextMenu&&(t.contextMenu={}),t.contextMenu.visible=e,t),FS=e=>t=>(void 0===t.contextMenu&&(t.contextMenu={}),t.contextMenu.rect=e,t),HS=e=>t=>(void 0===t.contextMenu&&(t.contextMenu={}),t.contextMenu.scrolling=e,t),_S=()=>e=>(e.highlights=void 0,e),jS=e=>t=>{const n={fontWeight:"bolder"};return"bolder"===t.selectionStyle?.fontWeight&&(n.fontWeight="normal"),t=eS(n,e)(t),t=Zw(e)(t),t=Ix(!0)(t)},WS=e=>t=>{const n={fontStyle:"italic"};return"italic"===t.selectionStyle?.fontStyle&&(n.fontStyle="normal"),t=eS(n,e)(t),t=Zw(e)(t),t=Ix(!0)(t)},zS=(e,t)=>n=>(n=cS({textAlign:e},t)(n),n=Zw(t)(n),n=Ix(!0)(n)),VS=e=>t=>(t.scrollBar||(t.scrollBar={}),t.scrollBar.visible=e,t),$S=e=>t=>(t.loupe||(t.loupe={}),t.loupe.visible=e,t),ZS=e=>t=>(t.loupe||(t.loupe={}),t.loupe.onlyDot=e,t),US=e=>t=>(void 0===t.loupe&&(t.loupe={}),t.loupe.rect=e,t),qS=e=>t=>(t.touch||(t.touch={}),t.touch.expandSelection=e,t),YS=e=>t=>(t.touch||(t.touch={}),t.touch.indicatorSelection=e,t),KS=e=>t=>(t.touch||(t.touch={}),t.touch.indicatorVisible=e,t),GS=()=>e=>{const{loupe:t,touch:n,contextMenu:o}=e;return t?.visible&&(e=$S(!1)(e)),t?.onlyDot&&(e=ZS(!1)(e)),n?.expandSelection&&(e=qS(!1)(e)),n?.indicatorSelection&&(e=YS(!1)(e)),n?.indicatorVisible&&(e=KS(!1)(e)),o?.visible&&(e=PS(!1)(e)),e},XS=()=>e=>{const{loupe:t,touch:n}=e;return t?.visible&&(e=$S(!1)(e)),t?.onlyDot&&(e=ZS(!1)(e)),n?.expandSelection&&(e=qS(!1)(e)),n?.indicatorSelection&&(e=YS(!1)(e)),e};function JS(e,t,n,o=!0){const i=e.current,r=i.value.clientHeight;if(t>0){const l=Math.min(t,r),s=Md(Bx(e,l,o))(i.value);i.onChange(s),(t-=r)>0&&(n.current=requestAnimationFrame((()=>{JS(e,t,n,o)})))}else if(t<0){const l=Math.max(t,-r),s=Md(Bx(e,l,o))(i.value);i.onChange(s),(t+=r)<0&&(n.current=requestAnimationFrame((()=>{JS(e,t,n,o)})))}}function QS(e,t,n=!0,o,i){if(0===t)return;let r=!1;const l=Date.now(),s=100;let c=0;requestAnimationFrame((function a(){r?i?.():(!function(){const o=Date.now(),i=Math.min(s,o-l);i>=s&&(r=!0);let a=i/s*t;a>0?a=Math.floor(a):a<0&&(a=Math.ceil(a));const u=a-c;c=a;const{onChange:d,value:f}=e.current;d(Md(Bx(e,u,n))(f))}(),o.current=requestAnimationFrame(a))}))}function eE(e,t,n,o=50,i){if(0===t)return;let r=!1;const l=Date.now();let s=0;requestAnimationFrame((function c(){r?i?.():(!function(){const n=Date.now(),i=Math.min(o,n-l);i>=o&&(r=!0);let c=i/o*t;c>0?c=Math.floor(c):c<0&&(c=Math.ceil(c));const a=c-s;s=c;const u=e.scrollTop+a;e.scrollTo({top:u})}(),n.current=requestAnimationFrame(c))}))}function tE(e){const{value:{scrollTop:t,scrollHeight:n,clientHeight:o,scrollTouch:i},scroller:r}=e;let l=t;"native"!==r&&(l-=i?.[0]??0);const s=l/(n-o);return isNaN(s)?1:Math.min(1,s)}function nE(e){const{scrollHeight:t,clientHeight:n}=e.value,o=Math.max(1,t/n);return Math.max(n/o,hw)}function oE(e=[0,0]){return(e[1]??0)-(e[0]??0)}function iE(e){return!!(e&&e.origin&&e.next&&e.next.offset-e.origin.offset>1)}function rE(e,t){let n,o=null,i=[];i=t instanceof Map?Array.from(t.values()):Object.values(t),i=i.filter((e=>!iE(e)));for(let t of i){if(t.left<=e.clientX&&t.right>=e.clientX&&t.top<=e.clientY&&t.bottom>=e.clientY){n=t;break}const i=Math.sqrt(Math.pow(t.left-e.clientX,2)+Math.pow((t.top+t.bottom)/2-e.clientY,2));t.origin&&(null===o||o>=i)&&(o=i,n=t)}if(n){const t=e.clientY;if(t>n.bottom){const e=i[i.length-1];t>=e.top&&(n=e)}if(t<n.top){const e=i[0];if(t<=e.bottom)return n=e,n}}if(n){if(Math.abs(n.left-e.clientX)>Math.abs(n.right-e.clientX))return{...n,left:n.right,origin:n.next}}return n}function lE(e,t,n){let o="",i=[];i=n instanceof Map?Array.from(n.values()):Object.values(n);for(const n of i){const i=Math.floor(n.left-e.left),r=Math.floor(n.right-e.left),l=Math.floor(n.top-e.top-t.top),s=Math.floor(n.bottom-e.top-t.top);o+=`M ${i} ${l} L ${r} ${l} L ${r} ${s} L ${i} ${s} L ${i} ${l}`}return o}function sE(e){let t=0,n=0,o=0,i=0,r=!1,l=null,s=null,c=[];c=e instanceof Map?Array.from(e.values()):Object.values(e);for(const e of c)!1!==r?(e.top<t&&(t=e.top),e.bottom>n&&(n=e.bottom),e.left<o&&(o=e.left),e.right>i&&(i=e.right),s=e):(t=e.top,n=e.bottom,o=e.left,i=e.right,l=e,s=e,r=!0);return{top:t,bottom:n,left:o,right:i,point:{start:{bottom:l?.bottom??0,top:l?.top??0,left:l?.left??0},end:{bottom:s?.bottom??0,top:s?.top??0,right:s?.right??0}}}}function cE(e,t){let n=[];n=t instanceof Map?Array.from(t.values()):Object.values(t);let o=n.find((t=>Ec(t.origin,e)));if(void 0===o&&(o=n.find((t=>Ec(t.next,e)))),void 0===o)return e;let i=o,r=n.indexOf(o)-1;for(;r>=0;)if(iE(n[r]))r--;else{if(i=n[r],(i.bottom+i.top)/2<=o.top)return i.next||e;r--}return i.origin||e}function aE(e,t){let n=[];n=t instanceof Map?Array.from(t.values()):Object.values(t);let o=n.find((t=>Ec(t.origin,e)));if(void 0===o&&(o=n.find((t=>Ec(t.next,e)))),void 0===o)return e;let i=o,r=n.indexOf(o)+1;for(;r<n.length;)if(iE(n[r]))r++;else{if(i=n[r],(i.bottom+i.top)/2>=o.bottom)return i.next||e;r++}return i.next||e}function uE(e,t,n=!0){const o={},i=t.get(e.key);if(!i)return o;const r=document.createRange();if(Nm(e)){const n=Rg(e.key),i=Og(ec(n)),r=Js(n)??0;return l(t.get(i),i,r),o}if(!e.children.length){return l(fE(i,""),e.key,0),o}for(let r=0;r<e.children.length;r++){const c=e.children[r];if(sc(c)){const t=fE(i.childNodes[r],c),n=c.length||1;for(let o=0;o<n;o++)s(t,Pg(e.key,r),o,o+1)}else if(bm(c)){if(n&&!Nm(c)){Object.assign(o,uE(c,t));continue}l(i,e.key,r)}}function l(e,t,n){r.setStart(e,n),r.setEnd(e,n+1);const i=Rg(t),l=hE(r),s={path:[...i,n],offset:0},c={path:[...i,n],offset:1};o[Pg(t,n)]={top:l.top,right:l.right,bottom:l.bottom,left:l.left,origin:s,next:c}}function s(e,t,n,i){r.setStart(e,n),r.setEnd(e,i);const l=Rg(t),s=hE(r),c={path:[...l],offset:n},a={path:[...l],offset:i};o[Pg(t,n)]={top:s.top,right:s.right,bottom:s.bottom,left:s.left,origin:c,next:a}}return o}function dE(e,t,n,o){const i={},r=document.createRange();let l=0;const s=t.get(e.key);if(!s)return i;for(;l<e.children.length;){const r=e.children[l];if(""!==r){if((l===n.path[0]||l===o.path[0])&&o.path[0]>=0){if(Nm(r)){c(s,e.key,l),l++;continue}if(bm(r)){if(0===r.children.length){c(s,e.key,l),l++;continue}const a={...n,path:Qs(n.path)},u={...o,path:Qs(o.path)};(Sc(a.path)||l!==n.path[0]&&l===o.path[0])&&(a.path=[0],a.offset=0),(Sc(u.path)||l===n.path[0]&&l!==o.path[0])&&(u.path=[r.children.length-1],u.offset=$m(r.children[r.children.length-1])),Object.assign(i,dE(r,t,a,u)),l++;continue}let u=n.offset,d=o.offset;o.path[0]-n.path[0]>0&&(l===n.path[0]?d=r.length:l===o.path[0]&&(u=0));const f=fE(s.childNodes[l],r),h=Pg(e.key,l);for(;u<d;)a(f,h,u,Math.min(r.length,u+1)),u++}else if(l>n.path[0]&&l<o.path[0]){if(Nm(r)){c(s,e.key,l),l++;continue}if(bm(r)){if(0===r.children.length){c(s,e.key,l),l++;continue}const n={path:[0],offset:0},o={path:[r.children.length-1],offset:$m(r.children[r.children.length-1])};Object.assign(i,dE(r,t,n,o)),l++;continue}a(fE(s.childNodes[l],r),Pg(e.key,l),0,r.length),l++;continue}l++}else l++}function c(e,t,n){r.setStart(e,n),r.setEnd(e,n+1);const o=Rg(t),l=hE(r),s={path:[...o,n],offset:0},c={path:[...o,n],offset:1};i[Pg(t,n)]={top:l.top,right:l.right,bottom:l.bottom,left:l.left,origin:s,next:c}}function a(e,t,n,o){r.setStart(e,n),r.setEnd(e,o);const l=Rg(t),s=hE(r),c={path:[...l],offset:n},a={path:[...l],offset:o};i[Pg(t,n)]={top:s.top,right:s.right,bottom:s.bottom,left:s.left,origin:c,next:a}}return i}function fE(e,t){if(e.nodeType!==Node.TEXT_NODE){const n=e.querySelectorAll("*");for(const o of n)for(const n of o.childNodes)if(n.nodeType===Node.TEXT_NODE){if(n.textContent===t)return e=n;if(""===t&&n.textContent===Fg)return e=n}}return e}function hE(e){return _f?Js(e.getClientRects())??e.getBoundingClientRect():e.getBoundingClientRect()}const pE={"[":"]","【":"】","{":"}","「":"」","『":"』","'":"'","‘":"’",'"':'"',"“":"”","`":"`","(":")","（":"）","<":">","《":"》"};function vE(e){return 2===e.length&&pE[e[0]]===e[1]}function gE(){let e=!1;const t=[];return(n,o,i,r)=>{t.push([o,i]),!1===e&&(e=!0,Promise.resolve().then((()=>{let o;const i=[];for(let e=0;e<t.length;e++){const n=t[e];if(We(n[0])?i.push(...n[0]):i.push(n[0]),n[1]){const{before:e,after:t}=Oy(n[1],!1);if(void 0===o){o={anchor:e,focus:t};continue}Cy(e,o.anchor)&&(o.anchor=e),by(t,o.focus)&&(o.focus=t)}}e=!1,t.length=0,n(i,o,r)})))}}var mE;function yE(e){return{onPointerDown:e.onPointerDown,onPointerMove:e.onPointerMove,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onClick:e.onClick}}function bE(e,t,n,o){const i=new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0,clientX:n,clientY:o});e.dispatchEvent(i)}!function(e){e.WindowMouseMove="WindowMouseMove",e.WindowMouseUp="WindowMouseUp",e.RootWheel="RootWheel",e.RootMouseDown="RootMouseDown",e.RootMouseEnter="RootMouseEnter",e.RootMouseLeave="RootMouseLeave",e.EditMouseDown="EditMouseDown",e.EditMouseEnter="EditMouseEnter",e.EditMouseLeave="EditMouseLeave",e.EditFocus="EditFocus",e.EditBlur="EditBlur",e.EditClick="EditClick",e.EditCompositionStart="EditCompositionStart",e.EditCompositionEnd="EditCompositionEnd",e.EditBeforeInput="EditBeforeInput",e.EditKeyDown="EditKeyDown",e.EditCopy="EditCopy",e.EditCut="EditCut",e.EditPaste="EditPaste",e.EditDragOver="EditDragOver",e.EditDragStart="EditDragStart",e.EditDrop="EditDrop"}(mE||(mE={}));const CE=Vs((e=>{const{value:t,onChange:n}=e.current;t.cwnd||t.detect.flag!==xw.STATIC||n(Md(Mx(!0),Lw(e))(t))}),300),wE=Vs(((e,t)=>{const{value:n,onChange:o}=e.current;o(Md(fx(!1),Ax(t))(n))}),32),xE=Vs(((e,t)=>{e(HS(t))}),150);function SE(e,t,n){const o=[];let i=n.length-1;for(;i>=0;){const{selection:r,style:l}=n[i--];if(!qy(r,t))break;const{before:s,after:c}=Oy(r,!1),a=wy(s.path,t),u=wy(c.path,t);if(a&&u){const t=e.slice(0,s.offset);t&&o.push(t);const n=e.slice(s.offset,c.offset);n&&o.push(cy([n],l));const i=e.slice(c.offset);i&&o.push(i)}else if(a&&!u){const t=e.slice(0,s.offset);t&&o.push(t);const n=e.slice(s.offset);n&&o.push(cy([n],l))}else if(!a&&u){const t=e.slice(0,c.offset);t&&o.push(cy([t],l));const n=e.slice(c.offset);n&&o.push(n)}else a||u||o.push(cy([e],l))}return 0===o.length&&o.push(e),o}function EE(e){if("undefined"==typeof Intl||void 0===Intl.Segmenter)return e=>[];const t=new Intl.Segmenter(e,{granularity:"word"});return e=>[...t.segment(e)]}const kE=EE(["cn","en"]);function DE(e,t){let n=Math.max(0,t-1);for(;n>=0;){const o=e.slice(n,t+1),i=kE(o);if(0===i.length)return Math.max(0,t-1);if(1!==i.length)return n+1;n--}return n+1}function IE(e,t){let n=t+1;for(;n<=e.length;){const o=e.slice(Math.max(0,t),n+1);if(1!==kE(o).length)return n;n++}return n-1}function NE(e){return/^[\u4e00-\u9fa5]+$/.test(e)}function LE(e,t){const n={},o=Qy(e,t);let i=e;const r=o.length;let l=0;for(;l<r;){const e=i.children[o[l++]];if(!bm(e))break;if(i=e,_m(i)){const e=i.props?.uid;e&&(n[e]=i)}}return n}function BE(e){const t={};return zm(e,(e=>{if(_m(e)){const n=e.props?.uid;n&&(t[n]=e)}else;})),t}function TE(e,t,n){const o={...e,children:[]};for(let i=0;i<e.children.length;i++){const r=e.children[i];if(!gm(r)||!r.position){o.children.push(r);continue}const l=r.position?.top??0,s=r.position?.bottom??0;t<s&&t>l?o.children.push(TE(r,t-l,s)):t<=l&&n>=s?o.children.push(r):n>l&&n<s&&o.children.push(TE(r,0,n-l))}return o}function AE(e){const{node:t,highlights:n,renderElement:o}=e,i=R(Ng),r=t.key??Mg,l=[];let s=0,c=t.children.length;for(;s<c;){const e=t.children[s++];if(sc(e)){if(""===e){l.push(Fg);continue}if(n){const t=[...Rg(r),s-1],o=SE(e,t,n);l.push(...o.map((e=>{if(pm(e)){const n=Og(t);return lh("span",{style:e.style,children:e.children},n)}return e})));continue}l.push(e)}else pm(e)&&(e.key||(e.key=Pg(r,s-1)),l.push(lh(AE,{node:e,highlights:n,renderElement:o},e.key)))}return 0===s&&(t.props?.empty||l.push(Fg)),t.type===jg||t.type===$g?lh("span",{style:t.style,ref:i?.inline.set.bind(i?.inline,r),children:l}):t.type===_g?lh("div",{style:t.style,ref:i?.block.set.bind(i?.block,r),children:l}):t.type===Qg?lh("div",{style:t.style,ref:i?.block.set.bind(i?.block,r),children:o?.(t,l)}):t.type===em?lh("span",{style:t.style,ref:i?.inline.set.bind(i?.inline,r),children:o?.(t,l)}):t.type===tm?lh("div",{style:t.style,ref:i?.block.set.bind(i?.block,r),children:l}):t.type===nm?lh("span",{style:t.style,ref:i?.inline.set.bind(i?.inline,r),children:l}):t.type===Wg?lh("br",{}):t.type===zg?lh("pre",{style:t.style,ref:i?.block.set.bind(i?.block,r),children:l}):t.type===Vg?lh("code",{style:t.style,ref:i?.inline.set.bind(i?.inline,r),children:l}):o?.(t,l)??null}function ME(e){const t=W((()=>{let e={};return{all:()=>e,clear:()=>e={},get:t=>e[t],set:(t,n)=>{n&&(e[t]=n)}}}),[]),n=W((()=>{let e={};return{all:()=>e,clear:()=>e={},get:t=>e[t],set:(n,o)=>{t.set(n,o),o&&(e[n]=o)}}}),[t]),o=e?.value.location,i=W((()=>{let e={};return{all:()=>e,clear:()=>e={},get:t=>e[t],set:(n,i)=>{t.set(n,i),o===n&&i&&(e[n]=i)}}}),[o,t]);return{block:n,inline:i,survey:t}}function OE(e){return{element:ME(e),main:Z(null),edittimer:Z(-1),scrolltimer:Z(-1),scrollbartimer:Z(-1),transition:Z(null)}}function RE(e){return{selection:Z(null),left:Z(null),right:Z(null),scrolltimer:Z(-1)}}function PE(e){const t=e.refref,n=Z(-1);return{ele:t,record:Z(null),timer:n}}function FE(e,t,n){const o=Dd(e),i=Nd("keydown"),r=_(((e,t)=>{const{value:n,onChange:i,requestEditNode:l}=o.current;if(!0===n.composing)return;if(!1===o.current.virtual)return void e();const s=[];let c=!1;if((Ay(n.node,t)&&l?.("next")||Ty(n.node,t)&&l?.("prev"))&&(c=!0),c&&s.push(Mx(!0),Gw(o,t)),0===s.length)return e();i(Md(...s)(n)),requestAnimationFrame((()=>{r(e,t)}))}),[o]),l=_(((e,t)=>{let{value:n,requestEditNode:i}=o.current;if(!0===n.composing)return;if(!1===o.current.virtual)return void e();let r=!1;do{r=!(!Ay(n.node,t)||!i?.("next"))||!(!Ty(n.node,t)||!i?.("prev")),r&&(n=Md(Gw(o,t))(n))}while(r);e({...o.current,value:n})}),[o]),s=_(((e,t,n)=>{function i(t){t||(t=o.current);const{value:n,onChange:i,editStyle:r}=t;i(Md(fx(!0),...e,Zw(r),Uw(),kw(n),Nx(o),$w())(n))}dt(e)&&(e=[e]),t||(t=o.current.value.selection),n?l(i,t):r(i,t)}),[o,r,l]),c=_(((e,t,n)=>{function i(t){t||(t=o.current);const{value:n,onChange:i,editStyle:r}=t;i(Md(...e,Zw(r),Uw(),Nx(o),$w())(n))}dt(e)&&(e=[e]),t||(t=o.current.value.selection),n?l(i,t):r(i,t)}),[o,r,l]),a=W(gE,[]);return j(e.ref,(()=>({commit(e,t,n){a(s,e,t,n)},dispatch(e){e(t,n.element.block)},slice(){const{onChange:e,value:t}=o.current;e(Md(OS(o))(t))},scrollTo(e){const t=n.main.current;t?.scrollTo(e)},ele:e=>n.element.survey.get(e),setStyle(e,t,n){bc(t)&&(n=t,t=void 0);const i=o.current.editStyle;let r=eS(e,i);n&&(r=cS(e,i));const l=[r,Zw(i),Ix(!0)];a(s,l,t)},setProps(e,t,n,i){bc(n)&&(n=void 0);const r=o.current.editStyle,l=[Ix(!0),Zw(r),oS(e,t,r)];a(s,l,n)},input:{getBoundingClientRect(){const{selref:e}=o.current,t=e.current;return t?t.getBoundingClientRect():null},onText(e){const{onChange:t,value:n}=o.current;if(" "===e)return void s(MS());pE[e]&&(e+=pE[e]);const i=[bS(),fS(e),fx(!0),kw(n),Nx(o),Xw(!1),Jw(0)];my(n.selection)||i.push(RS(!0)),t(Md(...i)(n))},onInput(e){const{editable:t}=o.current;if(!t||!e.target)return;const n=e.target.value.trim();this.onText(n)},onBlur(e){const{onChange:t,value:n,editable:i}=o.current;if(!i||!n.composing||!e.target)return;const r=e.target.value.trim();t(Md(...[NS(r),fx(!0),kw(n),Nx(o),Xw(!1),Jw(0)])(n))},onCompositionStart(e){const{onChange:t,value:n,editable:i}=o.current;if(!i)return;t(Md(...[Xw(!0),Jw(0)])(n))},onCompositionUpdate(e){const{onChange:t,value:n,editable:i,placeholder:r}=o.current;if(!i)return;const l=e.data.trim();if(NE(l))return;t(Md(...[bS(),gS(l,r),fx(!0),kw(n),Nx(o),Xw(!0)])(n))},onCompositionEnd(e){const{onChange:t,value:n,editable:i}=o.current;if(!i)return;const r=e.data.trim();t(Md(...[NS(r),fx(!0),kw(n),Nx(o),Xw(!1),Jw(0)])(n))},onPaste(e){const{value:t}=o.current;o.current.onPaste?.(t)}},selection:()=>o.current.selref.current,clearVisibleState(){t(GS())}})),[o,t,s,a,n.main,n.element.block,n.element.survey]),F((()=>{const e=async e=>{const{editable:t,value:n,preprocessKeyDown:r}=o.current;(t||n.selection&&!my(n.selection))&&(r&&await r(e,n),Td(i.listener,o.current.onKeyDown)(e))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[t,o,i]),F((()=>{const e=i.subscribe((e=>{const t=o.current,{value:{selection:i,composing:r},editStyle:l,editable:a,refref:u}=t;if(!i)return;const d=n.main.current;if(!d)return;const f=n.element.survey,h=u.current;if(r)return e.stopPropagation(),void(sC(e)?c(Gx()):cC(e)?c(Xx()):aC(e)?c(Jx()):uC(e)&&c(Qx()));Ub(e)?t.onCopy?.(t.value):Yb(e)?t.onSelectAll?.(t.value):vC(e)?c([zx(f,h),Tx(o,n.edittimer)]):gC(e)?c([Vx(f,h),Tx(o,n.edittimer)]):mC(e)?c([$x(f,h,d,l),Tx(o,n.edittimer)]):yC(e)&&c([Zx(f,h,d,l),Tx(o,n.edittimer)]),a&&(e.stopPropagation(),Zb(e)?(t.onCut?.(t.value),s(wS())):aC(e)?c([Fx(f,h,d,l),Tx(o,n.edittimer)]):uC(e)?c([Px(f,h,d,l),Tx(o,n.edittimer)]):sC(e)?c([Ox(f,h),Tx(o,n.edittimer)]):cC(e)?c([Rx(f,h),Tx(o,n.edittimer)]):hC(e)?c([Ux(f,h),Tx(o,n.edittimer)]):pC(e)?c([qx(f,h),Tx(o,n.edittimer)]):dC(e)?c([Yx(f,h),Tx(o,n.edittimer)]):fC(e)?c([Kx(f,h),Tx(o,n.edittimer)]):bC(e)?s(wS(l)):CC(e)?s(xS()):wC(e)?s(ES(f)):xC(e)?s(kS(f)):SC(e)?s(DS()):EC(e)?s(IS()):rC(e)?s(LS()):lC(e)?s(BS()):tC(e)||nC(e)?s(MS()):oC(e)?s(TS(l)):iC(e)?s(AS(l)):Kb(e)?s(jS(l)):Gb(e)?s(WS(l)):Xb(e)?s(zS("left",l)):Qb(e)?s(zS("right",l)):Jb(e)?s(zS("center",l)):eC(e)&&s(zS("justify",l)))}));return()=>e.unsubscribe()}),[o,i,s,c,n.main,n.element.survey,n.edittimer]),{reflow:s}}function HE(e,t,n){const o=Dd(e),{reflow:i}=FE(e,t,n),r=Nd("mousedown"),l=Nd("mouseup"),s=Nd("mousemove"),c=Nd("click"),a=Nd("wheel"),u=Nd("contextmenu"),d=Nd("mousedown"),f=Nd("mouseleave"),h=Nd("mouseenter"),p=Nd("mouseenter"),v=Nd("mouseleave"),g=Nd("mousedown");F((()=>(window.addEventListener("mousedown",r.listener),window.addEventListener("mouseup",l.listener),window.addEventListener("mousemove",s.listener),()=>{window.removeEventListener("mousedown",r.listener),window.removeEventListener("mouseup",l.listener),window.removeEventListener("mousemove",s.listener)})),[t,o,r,l,s]),F((()=>{const e=a.subscribe((e=>{const{value:t,performance:i,onChange:r,virtual:l,scrollPropagation:s}=o.current;if(!l)return;s||e.stopPropagation();const{clientHeight:c}=t,a=Math.max(-c,Math.min(c,e.deltaY));Mf||Math.abs(a)<100?r(Md(Bx(o,a,i))(t)):QS(o,a,!0,n.edittimer)}));return()=>{e.unsubscribe()}}),[o,a,n.edittimer]),F((()=>{const e=bu(a,p,g).subscribe((()=>{o.current.scrollBar?.visible||t(VS(!0))}));return()=>e.unsubscribe()}),[o,t,a,d,h,f,g,p]),F((()=>{let e=!1;const n=bu(p.pipe(iv((()=>v.pipe(tv((()=>!e)))))),a.pipe(iv((()=>a.pipe(Yp(1e3)).pipe(rv(p))))),bu(d,g).pipe(iv((()=>l.pipe(nv(v)))))).subscribe((()=>{o.current.scrollBar?.visible&&t(VS(!1))})),i=bu(d,g).subscribe((()=>{e=!0})),r=bu(l).subscribe((()=>{e=!1}));return()=>{n.unsubscribe(),i.unsubscribe(),r.unsubscribe()}}),[o,t,a,d,f,p,v,g,l]);const m=_((e=>{const t=n.main.current?.getBoundingClientRect();let{clientX:o,clientY:i}=e;return void 0!==t&&(o-=t.left,i-=t.top),{clientX:o,clientY:i}}),[n.main]);return F((()=>{const e=u.subscribe((e=>{const{contextmenu:n,value:{scrollTop:i}}=o.current;if(!1===n)return;e.preventDefault(),e.stopPropagation();const{clientX:r,clientY:l}=m(e);t(FS({left:r,top:l+i}),PS(!0))}));return()=>e.unsubscribe()}),[o,t,m,u]),F((()=>{const e=r.subscribe((e=>{const{contextMenu:n,contextmenu:i}=o.current;!1!==i&&n?.visible&&t(PS(!1))}));return()=>e.unsubscribe()}),[o,t,r,d]),F((()=>{const e=d.subscribe((e=>{cancelAnimationFrame(n.scrollbartimer.current);const{value:i,refref:r,editStyle:l,isRightClickFocused:s,onChange:c,contextMenu:a,contextmenu:u}=o.current;if(!1!==u&&a?.visible&&t(PS(!1),KS(!1),YS(!1)),0!==e.button&&i.selection&&!my(i.selection))return!1;if(0!==e.button&&!1===s)return!1;const d=n.main.current;if(null===d)return;const f=d.getBoundingClientRect(),h=n.element.survey,p=r.current,v=Zy(e,f,i,h),g=[jw(!1),Qw(v,h,p,l)];i.composing&&g.unshift(NS(""),fx(!0),kw(i),Nx(o),Xw(!1),Jw(0)),c(Md(...g)(i))}));return()=>e.unsubscribe()}),[n.main,n.element.survey,n.scrollbartimer,o,t,d,c]),F((()=>{const e=bu(d.pipe(tv((e=>0===e.button))).pipe(iv((e=>s.pipe(tv((t=>{const n=e.clientX-t.clientX,o=e.clientY-t.clientY;return!!(Math.abs(n)>3||Math.abs(o))}))).pipe(rv(l)).pipe(lv(0))))),d.pipe(tv((e=>0===e.button))).pipe(iv((()=>l.pipe(nv(f)).pipe(rv(l)).pipe(Xp(1)))))).subscribe((e=>{const{refref:t,selecter:i,editStyle:r,value:l,onChange:s}=o.current,c=n.main.current;if(null===c||l.selectionFrozen)return;if("native"===i)return;const a=n.element.survey,u=Uy(e,c.getBoundingClientRect(),l,a);if(0===u.path.length)return;const d=t.current;s(Md(ex(u,a,d,r))(l))}));return()=>e.unsubscribe()}),[o,s,l,d,f,n.element.survey,n.main]),F((()=>{const e=d.pipe(iv((()=>s.pipe(nv(f)).pipe(rv(l))))).pipe(iv((e=>{const t=o.current,i=n.main.current,{clientHeight:r,scrollHeight:s}=t.value;let c=0;if(i&&s>r){const t=i.getBoundingClientRect(),n=e.clientY-t.top;n<0?c=Math.max(n,-r):n>r&&(c=Math.min(n-r,r))}return 0===c?_a:yu(0).pipe(ov((()=>0===c))).pipe(rv(l)).pipe(Zp((()=>({e:e,deltaY:c}))))}))).subscribe((({e:e,deltaY:t})=>{const{value:i,onChange:r,refref:l}=o.current;if(null===n.main.current)return;if(i.isScrolling)return;const{survey:s,block:c}=n.element,a=l.current;r(Md(Bx(o,t,!1),qw(t,c),ox(s,a))(i))}));return()=>e.unsubscribe()}),[o,s,l,d,f,n.element,n.main]),F((()=>{const e=bu(c.pipe(_p(2,1),tv((e=>{const t=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return!(Math.abs(t)>3||Math.abs(n))&&e[0].timeStamp>e[1].timeStamp-400}))),c.pipe(_p(3,1),tv((e=>{const t=e[0].clientX-e[2].clientX,n=e[0].clientY-e[2].clientY;return!(Math.abs(t)>3||Math.abs(n))&&e[0].timeStamp>e[2].timeStamp-600})))).subscribe((e=>{const t=o.current,{refref:i,value:r,selecter:l,editStyle:s,value:{selectionFrozen:c},onMultipleClick:a,onSelectPhrase:u,onSelectParagraph:d,onChange:f}=t;if(a?.(e.length)||c)return;if("native"===l)return;const h=n.main.current;if(null===h)return;const p=h.getBoundingClientRect(),v=n.element.survey,g=i.current,m=Zy(e[0],p,r,v);m.path.length&&(2===e.length?(u?.(),f(Md(tx(m,v,g,s))(r))):3===e.length&&(d?.(),f(Md(nx(m,v,g,s))(t.value))))}));return()=>e.unsubscribe()}),[c,o,n.main,n.element.survey]),{main:Bd(Ld([c,u,a,d,h,f]),yE(e)),scrollBar:Ld([p,v,g]),reflow:i}}function _E(e,t,n){const o=Dd(e),{reflow:i}=FE(e,t,n),r=Nd("click"),l=Nd("scroll"),s=Nd("touchstart");return F((()=>{const e=()=>{o.current.contextMenu?.visible&&(o.current.contextMenu.scrolling||t(HS(!0)),xE(t,!1))};return window.addEventListener("scroll",e,!0),()=>{window.addEventListener("scroll",e,!0)}}),[t,o]),F((()=>{const e=l.subscribe((e=>{const{value:t,performance:n,onChange:i,virtual:r,scroller:l,scrollPropagation:s}=o.current;if("native"!==l)return;if(!r)return;s||e.stopPropagation();const c=e.target.scrollTop-t.scrollTop;i(Md(Bx(o,c,n))(t))}));return()=>{e.unsubscribe()}}),[o,l,n.edittimer]),F((()=>{const e=r.pipe(tv((()=>{const e=o.current.touch;return!e?.indicatorSelection}))).subscribe((e=>{cancelAnimationFrame(n.scrollbartimer.current);const{value:i,refref:r,editStyle:l,isRightClickFocused:s,onChange:c,contextMenu:a}=o.current;if(a?.visible&&t(GS()),0!==e.button&&i.selection&&!my(i.selection))return!1;if(0!==e.button&&!1===s)return!1;const u=n.main.current;if(null===u)return;if(i.highlights)return c(Md(_S(),fx(!0))(i)),void requestAnimationFrame((()=>{bE(u,"click",e.clientX,e.clientY)}));const d=u.getBoundingClientRect(),f=n.element.survey,h=Zy(e,d,i,f),p=r.current;c(Md(Qw(h,f,p,l))(i))}));return()=>e.unsubscribe()}),[n.main,n.element.survey,n.scrollbartimer,o,t,r]),F((()=>{let e,i,l,c=-1,a=-1,u=!1,d=!1;const f=s.pipe(tv((()=>{const e=o.current.touch;return!e?.indicatorSelection}))).subscribe((t=>{const{clientX:n,clientY:o}=t.touches[0];c=n,a=o,u=!0,d=!1;const r=t.target;e=vu(r,"touchmove"),i=vu(r,"touchend"),l=vu(r,"touchcancel")})),h=s.pipe(iv((t=>e))).pipe(tv((()=>{const{touch:e,value:t}=o.current;return!e?.indicatorVisible&&!e?.expandSelection&&!!t.selection}))).subscribe((e=>{const{refref:i,value:r,onChange:l,editStyle:s}=o.current;if(!r.selection)return;if(r.highlights)return void l(Md(_S(),fx(!0))(r));const f=e.touches[0],h=n.main.current;if(null===h)return;const p=h.getBoundingClientRect();if(u){u=!1;const{clientX:e,clientY:t}=f;if(Math.abs(e-c)<=Math.abs(t-a))return;d=!0,h.style.setProperty("overflow","hidden")}if(!d)return;const{clientX:v,clientY:g}=f;t($S(!0),US({left:v-p.left,top:g-p.top})),e.preventDefault();const m=n.element.survey,y=Zy(f,p,r,m);if(!y.path.length)return;const b=i.current;l(Md(Qw(y,m,b,s))(r))})),p=s.pipe(iv((e=>bu(i,l)))).subscribe((e=>{c=-1,a=-1,u=!0,d=!1;const o=n.main.current;null!==o&&("scroll"!==o.style.getPropertyValue("overflow")&&o.style.setProperty("overflow","scroll"),t(XS()))})),v=s.pipe(iv((t=>mu(382).pipe(rv(e)).pipe(rv(i)).pipe(rv(r)).pipe(rv(l)).pipe(Zp((()=>t)))))).pipe(tv((()=>{const{touch:e}=o.current;return!e?.indicatorSelection}))).subscribe((e=>{const{refref:i,value:r,editStyle:l,onChange:s,onSelectPhrase:c}=o.current,a=e.touches[0],u=n.main.current;if(null===u)return;if(u.style.setProperty("overflow","hidden"),r.highlights)return void s(Md(_S(),fx(!0))(r));const d=u.getBoundingClientRect(),f=n.element.survey,h=i.current,p=Zy(a,d,r,f);p.path.length&&(c?.(),s(Md(tx(p,f,h,l))(r)),t(PS(!0),qS(!0),KS(!0)))})),g=s.pipe(iv((t=>e))).pipe(tv((()=>{const{touch:e,value:t}=o.current;return!!e?.expandSelection&&!e.indicatorSelection&&!!t.selection}))).subscribe((e=>{const{refref:i,editStyle:r,value:l,onChange:s,showExpandSelectionLoupe:c}=o.current,a=n.main.current;if(null===a)return;const u=e.touches[0],d=a.getBoundingClientRect(),f=n.element.survey;if(c){const{clientX:e,clientY:n}=u;t($S(!0),US({left:e-d.left,top:n-d.top}))}const h=Uy(u,d,l,f);if(0===h.path.length)return;const p=i.current;s(Md(ex(h,f,p,r))(l))})),m=s.pipe(iv((t=>e))).pipe(tv((()=>{const{virtual:e,loupe:t,value:n}=o.current;return!!t?.visible&&!!n.selection&&!!e}))).pipe(Zp((e=>{const t=n.main.current;if(null===t)return{e:e,deltaY:0};const{keyboardHeight:i=0}=o.current,r=t.getBoundingClientRect(),l=e.touches[0];let s=l.clientY+fm-r.bottom;return i&&(s=s+i-fm),s=Math.min(fm,s),s>0?{e:e,deltaY:s}:(s=l.clientY-r.top-fm,s<0?{e:e,deltaY:s}:{e:e,deltaY:0})}))).pipe(iv((({e:e,deltaY:t})=>yu(0).pipe(ov((()=>0===t))).pipe(rv(i)).pipe(rv(l)).pipe(Zp((()=>({e:e,deltaY:t}))))))).subscribe((({e:e,deltaY:t})=>{const i=n.main.current;if(null===i)return 0;const{value:r,onChange:l,refref:s,editStyle:c,touch:a}=o.current;i.style.setProperty("overflow","scroll"),cancelAnimationFrame(n.scrolltimer.current),eE(i,6*t,n.scrolltimer,300);const u=e.touches[0],d=i.getBoundingClientRect(),f=n.element.survey,h=s.current;if(a?.expandSelection){const e=Uy(u,d,r,f);if(0===e.path.length)return;l(Md(ex(e,f,h,c))(r))}else{const e=Zy(u,d,r,f);if(!e.path.length)return;l(Md(Qw(e,f,h,c))(r))}}));return()=>{f.unsubscribe(),h.unsubscribe(),p.unsubscribe(),v.unsubscribe(),g.unsubscribe(),m.unsubscribe()}}),[t,n.main,n.element.survey,n.scrolltimer,n.scrollbartimer,o,r,s]),{main:Bd(Ld([r,l,s]),yE(e)),reflow:i}}function jE(e,t){const n=Dd(e),o=R(Ng),i=R(Lg),r=R(Ig),l=Nd("touchstart"),s=Nd("touchstart");return F((()=>{let e,c,a,u,d,f,h=0,p=0,v=!0;function g(t){const n=t.target;e=vu(n,"touchmove"),c=vu(n,"touchend"),a=vu(n,"touchcancel"),u=vu(n,"touchmove"),d=vu(n,"touchend"),f=vu(n,"touchcancel")}const m=l.subscribe((e=>{e.stopPropagation(),g(e);const{clientX:o,clientY:i}=e.touches[0],l=t.left.current;if(!l)return;const s=l.getBoundingClientRect();h=o-s.right,p=i-s.top+s.height/2,r(YS(!0));const{value:c,onChange:a}=n.current;if(c.selection){const{anchor:e,focus:t}=c.selection,{before:n}=Oy(c.selection);yy(t,n)||a(Md(_w({focus:e,anchor:t}))(c))}})),y=s.subscribe((e=>{e.stopPropagation(),g(e);const{clientX:o,clientY:i}=e.touches[0],l=t.right.current;if(!l)return;const s=l.getBoundingClientRect();h=o-s.left,p=i-s.top+s.height/2,r(YS(!0));const{value:c,onChange:a}=n.current;if(c.selection){const{anchor:e,focus:t}=c.selection,{before:n}=Oy(c.selection);yy(e,n)||a(Md(_w({focus:e,anchor:t}))(c))}})),b=bu(l.pipe(Iu((t=>e))),s.pipe(Iu((e=>u)))).subscribe((e=>{e.preventDefault(),e.stopPropagation();const t=i.current;if(!t)return;const{clientX:l,clientY:s}=e.touches[0],c=t.getBoundingClientRect(),a=o.survey,{value:u,onChange:d,onSelectExpand:f,refref:g,editStyle:m}=n.current,y={clientX:l-h,clientY:s-p};r(ZS(!0),US({left:y.clientX-c.left,top:y.clientY-c.top}),YS(!0)),v&&(f?.(),v=!1);const b=Uy(y,c,u,a);if(0===b.path.length)return;const C=g.current;d(Md(ex(b,a,C,m))(u))})),C=bu(l.pipe(Iu((e=>bu(c,a)))),s.pipe(Iu((e=>bu(d,f))))).subscribe((e=>{e.stopPropagation(),h=0,p=0,r(ZS(!1),YS(!1)),v=!0})),w=bu(l.pipe(Iu((t=>e))),s.pipe(Iu((e=>u)))).pipe(lu((e=>{const t=i.current;if(null===t)return{e:e,deltaY:0};const{keyboardHeight:o=0}=n.current,r=t.getBoundingClientRect(),l=e.touches[0];let s=l.clientY+fm-r.bottom;return o&&(s=s+o-fm),s=Math.min(fm,s),s>0?{e:e,deltaY:s}:(s=l.clientY-r.top-fm,s<0?{e:e,deltaY:s}:{e:e,deltaY:0})}))).pipe(Iu((({e:e,deltaY:t})=>{return yu(0,Ha).pipe((n=()=>0===t,ka((function(e,t){var o=!1,i=0;e.subscribe(Da(t,(function(e){return(o||(o=!n(e,i++)))&&t.next(e)})))})))).pipe(Nu(d)).pipe(Nu(c)).pipe(Nu(f)).pipe(Nu(a)).pipe(lu((()=>({e:e,deltaY:t}))));var n}))).subscribe((({e:e,deltaY:r})=>{const l=i.current;if(null===l)return 0;const{value:s,onChange:c,refref:a,editStyle:u}=n.current;l.style.setProperty("overflow","scroll"),cancelAnimationFrame(t.scrolltimer.current),eE(l,6*r,t.scrolltimer,300);const{clientX:d,clientY:f}=e.touches[0],v={clientX:d-h,clientY:f-p},g=l.getBoundingClientRect(),m=o.survey,y=Uy(v,g,s,m);if(0===y.path.length)return;const b=a.current;c(Md(ex(y,m,b,u))(s))}));return()=>{m.unsubscribe(),y.unsubscribe(),b.unsubscribe(),C.unsubscribe(),w.unsubscribe()}}),[n,r,i,t.right,t.left,t.scrolltimer,o.survey,s,l]),{left:Ld([l]),right:Ld([s])}}function WE(e){const t=Dd(e),n=e.timer,o=_((e=>{cancelAnimationFrame(n.current);const o=t.current,i=o.onScrollBar?.(e);if(i)return;const r=(e-tE(o))*(o.value.scrollHeight-o.value.clientHeight);!i&&JS(t,r,n)}),[t,n]),i=_((e=>{cancelAnimationFrame(n.current);const o=t.current,i=o.onScrollBar?.(e);if(i)return;let r=0;e>1?r=o.value.clientHeight*(e-1):e<0&&(r=o.value.clientHeight*e),0!==r&&JS(t,r,n)}),[t,n]),r=_((e=>{cancelAnimationFrame(n.current),JS(t,e,n)}),[t,n]),{clientHeight:l,scrollHeight:s}=e.value;return s>l?lh(yw,{style:{zIndex:1e6},visible:e.scrollBar?.visible??!1,thumb:nE(e),value:tE(e),onChange:o,onChangeInterval:i,onArrowStep:r,...fw(e)}):null}const zE=Mf?170:200;function VE(e){const t=R(Ig),{value:{selection:n}}=e,o=my(n),i=o=>{if(void 0===n)return;const i=[];if(o.value===zb.copy)e.onCopy?.(Md(...i)(e.value)),Uf||t(GS());else if(o.value===zb.paste)e.onPaste?.(Md(...i)(e.value)),t(GS());else{if(o.value===zb.cut)return e.onCut?.(Md(...i)(e.value)),i.push(wS()),e.reflow(i),void t(GS());o.value===zb.selectAll&&e.onSelectAll?.(Md(...i)(e.value))}i.length&&e.onChange(Md(...i)(e.value))};return Pf?lh($E,{...e,onClick:i}):lh("div",{onPointerDown:e=>e.stopPropagation(),children:lh(gg,{style:{width:zE},options:kC.filter((t=>!0!==t.editable||!1!==e.editable)).map((t=>({...t,name:Vb[e?.lang??"cn"][t.value],disable:o&&(t.value===zb.copy||t.value===zb.cut)}))),onClick:i})})}function $E(e){const t=DC(e);return lh(ch,{style:Pb,onClick:e=>e.stopPropagation(),children:t.map(((n,o)=>{const i={...Fb};return 0===o&&(i.paddingLeft=cm),o===t.length-1&&(i.paddingRight=cm),lh(dv,{style:i,onClick:()=>e.onClick(n),children:Vb[e?.lang??"cn"][n.value]},o)}))})}function ZE(e){const t=ME(e),{loupe:n,value:o,virtual:i,keyboardHeight:r,renderElement:l,onLoupeMounted:s}=e,{node:c,contentHeight:a,clientHeight:u,clientWidth:d,scrollTop:f}=o,h=Math.min(80,a),p=n?.rect?.top??110,v=n?.rect?.left??0;let g=p-h-40;i&&(g=Math.max(0,g)),r&&(g=Math.min(u-r-h-20,g));let m=f+p-h/2;i&&(m=Math.max(0,m));const y={...Mb,...e.editStyle,width:d,height:h,transform:`translateY(${g}px)`};"transparent"===y.backgroundColor&&(y.backgroundColor=mf);const b={...Bb,transform:`translate3d(${v-dm/2-(i?18:0)}px, ${p+f-dm/2}px, 0)`},C=TE(c,m,m+80);return F((()=>{s?.()}),[s]),lh(Ng,{value:t,children:lh("div",{style:y,children:sh("div",{style:{transform:`translateY(${-m}px)`},children:[lh(AE,{node:C,renderElement:l}),lh(UE,{...e}),lh("div",{style:b})]})})})}function UE(e){const{value:t,editStyle:n,touch:o}=e,{selection:i,selectionLayout:r,selectionBackground:l,selectionPath:s}=t,c=r?.top??0,a=r?.left??0;if(my(i))return lh("div",{style:{...Nb,...r,top:0,left:0,transform:`translate3d(${a}px, ${c}px, 0)`,transition:o?.indicatorVisible?"none":"transform 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0)",backgroundColor:Fy(t,n)}});const u=l??om;return lh("div",{style:{...Lb,...r,left:0,width:"100%"},children:lh("svg",{style:Tb,children:lh("path",{d:s,fill:u})})})}function qE(e){const[t,n]=$((()=>e.visible)),o=Z(!1),i=Z(),r=Z(null);if(F((()=>(e.visible&&!t?i.current=setTimeout((()=>{n(!0)})):!e.visible&&t&&(o.current||(i.current=setTimeout((()=>{n(!1)})))),()=>{clearTimeout(i.current)}))),!e.visible&&!t)return null;const l={transition:"all 100ms cubic-bezier(0.4, 0.0, 0.4, 1.0)",...e.style},{enter:s,leave:c}=e.transition??{};e.visible&&t?Object.assign(l,s??{opacity:1}):Object.assign(l,c??{opacity:0});return lh(ch,{ref:r,style:l,className:e.className,onClick:e.onClick,onTransitionEnd:i=>{i.target===r.current&&(!e.visible&&t?(o.current=!1,n(!1)):e.visible&&t&&(o.current=!0))},children:e.children})}function YE(e){const t=OE(e);t.element.block.clear(),t.element.inline.clear(),t.element.survey.clear();const n=e.ScrollView??"div";return lh(Ng,{value:t.element,children:lh(Lg,{value:t.main,children:lh("div",{style:Eb,children:lh(n,{className:"no-scrollbar",style:IC(e),ref:t.main,children:e.children})})})})}function KE(e){const t=R(Ig),n=OE(e),{contextMenu:o}=e,{main:i,scrollBar:r,reflow:l}=HE(e,t,n);n.element.block.clear(),n.element.inline.clear(),n.element.survey.clear();const s=e.ScrollView??"div",c="native"===e.scroller;return lh(Ng,{value:n.element,children:lh(Lg,{value:n.main,children:sh("div",{style:Eb,children:[sh(s,{className:"no-scrollbar",style:IC(e),ref:n.main,...i,children:[e.children,e.portal?.(lh(qE,{visible:o?.visible,style:WC(e,n.main),transition:jC(e,n.main,n.transition),children:lh(VE,{...e,ref:void 0,reflow:l})}),n.main)]}),c?null:lh("div",{onPointerDown:e=>e.stopPropagation(),children:lh(WE,{...e,...r,timer:n.scrollbartimer})})]})})})}function GE(e){const t=R(Ig),n=OE(e),{contextMenu:o,loupe:i}=e,{main:r,reflow:l}=_E(e,t,n);n.element.block.clear(),n.element.inline.clear(),n.element.survey.clear();const s=e.ScrollView??"div";return lh(Ng,{value:n.element,children:lh(Lg,{value:n.main,children:lh("div",{style:Eb,children:sh(s,{className:"no-scrollbar",style:IC(e),ref:n.main,...r,children:[e.children,e.portal?.(lh(qE,{visible:o?.visible&&!o.scrolling&&!i?.visible,style:WC(e,n.main),transition:jC(e,n.main,n.transition),children:lh(VE,{...e,ref:void 0,reflow:l})}),n.main,1e3),e.portal?.(lh(qE,{visible:i?.visible,style:Ob,transition:hm,children:lh(ZE,{...e,ref:void 0})}),n.main,1e4)]})})})})}function XE(e){const t=Dd(e),n=PE(e),{block:o,inline:i,survey:r}=R(Ng),l=R(Lg),s=Z(!0);return s.current=!0,H((()=>{const{value:c,onChange:a,virtual:u}=e,{cwnd:d,slicer:f,isScrollPending:h,isSelectPending:p,isEditPending:v}=c;if(d&&u)return a(Md(ix(t,r,o,n,l,i))(c)),void(s.current=!1);if(v){const e=[fx(!1)];if(f&&e.push(RS(!1)),u)e.push(rx(t,o,n,l));else{const t=n.ele.current?.clientHeight;t!==c.contentHeight&&e.push(Ow(t))}const i=n.ele.current;return e.push(ox(r,i),Ww(!1)),a(Md(...e)(c)),void(s.current=!1)}if(!v&&c.resizeHeight&&u)return a(Md(Pw(!1),Mx(!0),Lw(t))(c)),void(s.current=!1);if(!v&&c.resizeWidth){const e=n.ele.current,i=[];if(u)i.push(Mx(!0),Bw(t,o,n));else{const t=e?.clientHeight;t!==c.contentHeight&&i.push(Ow(t))}if(i.push(Rw(!1),ox(r,e)),i.length)return a(Md(...i)(c)),void(s.current=!1)}if(h&&u){return a(Md(...[Mx(!1),rx(t,o,n,l)])(c)),void(s.current=!1)}return p?(a(Md(Fw(!1))(c)),void(s.current=!1)):void 0})),H((()=>{if(!s.current)return;const{value:t,onChange:o}=e,{detect:i,selection:l,selectionReflow:c,isEditPending:a,isScrollPending:u,cwnd:d}=t;if(a||u)return;if(!l||!c)return;const f=i.flag===xw.STATIC,h=n.ele.current;!d&&f&&h&&(o(Md(ox(r,h),Fw(!0),Ww(!1))(t)),s.current=!1)})),H((()=>{if(!s.current)return;const{value:e,onChange:n,virtual:o}=t.current,{cwnd:i,isEditPending:r}=e;i||r||e.resizeHeight||o&&n(Md(Mx(!0),Lw(t))(e))}),[e.value.clientHeight]),H((()=>{if(!s.current)return;const{value:e,onChange:i,virtual:l}=t.current,{cwnd:c,isEditPending:a,selectionReflow:u}=e;if(c||a||u)return;if(e.resizeWidth)return;const d=n.ele.current,f=[];if(l)f.push(Mx(!0),Bw(t,o,n));else{const t=d.clientHeight;t!==e.contentHeight&&f.push(Ow(t))}f.push(ox(r,d)),f.length&&i(Md(...f)(e))}),[e.value.clientWidth]),H((()=>{if(!s.current)return;const{value:t,onChange:n}=e,{reload:o,slicer:i}=t;return i?(n(Md(RS(!1))(t)),void(s.current=!1)):o?(n(Md(Nw(!1))(t)),void(s.current=!1)):void 0})),lh(Tg,{value:n,children:lh("div",{ref:n.ele,style:NC(e),children:e.children})})}function JE(e){const{value:t,selecter:n,editable:o,editStyle:i}=e,{cursorStyle:r,selection:l,selectionLayout:s,selectionBackground:c,selectionPath:a}=t,[u,d]=$({selection:l,name:rm}),f=R(Ig);if(H((()=>{Ec(u.selection,l)||(d({selection:l,name:"none"}),requestAnimationFrame((()=>{d({selection:l,name:rm})}))),Pf&&(l?my(l)||f(PS(!0)):f(GS()))})),!l)return null;if("native"===n)return null;if(Pf)return lh(QE,{...e,animation:u});if($y(t))return null;const h="native"===e.scroller?0:-e.value.scrollTop;if(my(l))return o?lh("div",{ref:e.ref,style:{...Nb,...s,backgroundColor:Fy(t,i),transform:`translateY(${h}px)`,animation:u.name,...r}}):null;const p=c??om;return lh("div",{style:{...Lb,...s,left:0,width:"100%",transform:`translateY(${h}px)`},ref:e.ref,children:lh("svg",{style:Tb,children:lh("path",{d:a,fill:p})})})}function QE(e){const{value:t,touch:n,loupe:o,virtual:i,editable:r,editStyle:l,contextMenu:s}=e,c=RE(),a=jE(e,c),{cursorStyle:u,scrollTop:d,selectionLayout:f,selectionBackground:h,selectionPath:p,clientWidth:v,selection:g}=t,m=h??om,y="native"===e.scroller?0:-e.value.scrollTop,b=f?.top??0,C=f?.point?.start,w=f?.point?.end,x={..._b,transform:`translate3d(${(C?.left??0)-am/2-v/2}px, ${(C?.bottom??0)-b}px, 0)`,opacity:s?.scrolling?0:1},S={...Wb,transform:`translate3d(${(w?.right??0)+am/2-v/2}px, ${(w?.bottom??0)-b}px, 0)`,opacity:s?.scrolling?0:1},E=t=>{"function"==typeof e.ref?e.ref(t):e.ref&&(e.ref.current=t),c.selection.current=t};if(my(g))return r?(x.transform=`translate3d(${-am/2}px, ${f?.height}px, 0)`,S.transform=`translate3d(${am/2}px, ${f?.height}px, 0)`,sh("div",{children:[lh("div",{ref:E,style:{...Nb,...f,width:2,backgroundColor:Fy(t,l),transform:`translateY(${y}px)`,animation:e.animation.name,...u}}),n?.indicatorVisible&&!o?.visible&&e.portal?.(sh(rh,{children:[lh(ch,{style:x,ref:c.left,...a.left,children:lh("div",{style:Hb})}),lh(ch,{style:S,ref:c.right,...a.right,children:lh("div",{style:jb})})]}),c.selection,100)]})):null;const k={...Lb,...f,left:0,width:"100%",transform:`translateY(${y}px)`},D={...Bb,transform:`translate3d(${(o?.rect?.left??0)-dm-v/2-(i?4:-16)}px, ${(o?.rect?.top??0)-b+d-dm/3}px, 0)`};return sh("div",{style:k,ref:E,children:[lh("svg",{style:Tb,children:lh("path",{d:p,fill:m})}),n?.indicatorVisible&&!o?.visible&&e.portal?.(sh(rh,{children:[lh(ch,{style:x,ref:c.left,...a.left,children:lh("div",{style:Hb})}),lh(ch,{style:S,ref:c.right,...a.right,children:lh("div",{style:jb})}),o?.onlyDot&&lh("span",{style:D})]}),c.selection,100)]})}var ek=Object.freeze({__proto__:null,AUTO_COMPLETE:pE,BR_NODE:Wg,CODE_NODE:Vg,COMPOSITION_NODE:Jg,CURSOR_ANIMATION:rm,DECORATE_BLOCK_NODE:Qg,DECORATE_INLINE_NODE:em,DIV_NODE:_g,get DetectFlag(){return xw},ENGLISH:Hg,EditContext:Bg,EditDispatch:Ig,EditElement:Ng,EditScroll:Lg,get Flag(){return mE},INLINE_NODE:Gg,JOINER:Ag,LOUPE_NODE:Kg,LOUPE_TRANSITION:hm,META_NODE:$g,MOBILE_CONTEXT_MENU_HEIGHT:lm,MOBILE_CONTEXT_MENU_PADDING:cm,MOBILE_CONTEXT_MENU_WIDTH:sm,MOBILE_SELECTION_DOT_SIZE:dm,MOBILE_SELECTION_INDICATOR_DIFF:6,MOBILE_SELECTION_INDICATOR_INNER:um,MOBILE_SELECTION_INDICATOR_SIZE:am,MOBILE_TOUCH_SCROLL_SIZE:fm,PLACEHOLDER_NODE:Xg,PRE_NODE:zg,REFERENCE_BLOCK_NODE:tm,REFERENCE_INLINE_NODE:nm,ROOT_KEY:Mg,ReflowContext:Tg,get ReflowStartFlag(){return ww},SELECTION_BACKGROUND:om,SELECTION_POINT_BACKGROUND:im,SIDE_SPIES_NODE:Ug,SPACE_NODE:qg,SPAN_NODE:jg,SPIES_NODE:Zg,SPLIT_BLOCK_MARGIN:3,TAB_NODE:Yg,ZERO_WIDTH_NO_BREAK_SPACE:Fg,adjustNativeReflowStart:sx,align:zS,blod:jS,calcBottomSizeByStyle:AC,calcBoxSizeByStyle:BC,calcChildTotalSize:ey,calcCollapsedSelectionLayout:function(e,t,n){const o={top:t.top-n.top,height:t.bottom-t.top,left:t.left-n.left-1};if(void 0===e.selection)return o;const i=e.selection.focus.path,r=Um(e.node,i),l=Hy(e,n.style);let s=l?.lineHeight;if(void 0===s&&pm(r)&&r.style?.lineHeight&&(s=r.style.lineHeight),void 0===s&&(s=n.style?.lineHeight??1.2),s){const e=1/(parseFloat(String(s))-.2),t=o.height,n=t*e,i=o.top+(t-n)/2;o.height=n,o.top=Math.floor(i)}return o},calcCollapsedSelectionPayload:Zy,calcCommonPath:function(e,t){const n=[];for(let o=0;o<e.length;o++)e[o]===t[o]&&n.push(e[o]);return n},calcCommonSelectionPath:Yy,calcContentMarginSizeByStyle:MC,calcCursorColor:Fy,calcDetectDiffMoveIntoView:function(e,t,n){return n.bottom-e>t||n.bottom-n.top>t?n.bottom-e-t:n.top<e?n.top-e:0},calcDetectLineBackward:cE,calcDetectLineForward:aE,calcDetectPointCollapsedReflow:function(e,t){for(let n of t.values())if(Ec(n.origin,e))return n},calcDetectPointMoveDown:function(e,t){const n=Array.from(t.values());let o=n.find((t=>Ec(t.origin,e)));if(void 0===o&&(o=n.find((t=>Ec(t.next,e)))),void 0===o)return e;let i=o,r=n.indexOf(o)+1;for(;r<n.length;){if(i=n[r],iE(i)){r++;continue}const t=Math.min(o.bottom-o.top,i.bottom-i.top);if(i.top-o.top>=t){let l=n[r+1];for(;iE(l);)r++,l=n[r+1];if(void 0===l)return i.next||i.origin||e;if(l.top-i.top>=t)return i.next||i.origin||e;const s=o.left-i.left,c=i.right-o.left;if(s>=0&&c>=0)return s<=c?i.origin||e:i.next||e;if(s<=0&&c>=0)return i.origin||e}r++}return i.next||i.origin||e},calcDetectPointMoveUp:function(e,t){const n=Array.from(t.values());let o=n.find((t=>Ec(t.origin,e)));if(void 0===o&&(o=n.find((t=>Ec(t.next,e)))),void 0===o)return e;let i=o,r=n.indexOf(o)-1;for(;r>=0;){if(i=n[r],iE(i)){r--;continue}const t=Math.min(o.bottom-o.top,i.bottom-i.top);if(o.top-i.top>=t){let l=n[r-1];for(;iE(l);)r--,l=n[r-1];if(void 0===l)return i.next||i.origin||e;if(i.top-l.top>=t)return i.next||i.origin||e;const s=o.left-i.left,c=i.right-o.left;if(s>=0&&c>=0)return s<=c?i.origin||e:i.next||e;if(s>=0&&c<=0)return i.next||i.origin||e}r--}return i.origin||i.next||e},calcDetectSelectionPoint:rE,calcDetectSelectionSVGPath:lE,calcDetectSelectionScope:sE,calcEditNodeEndRect:Qm,calcEditNodeStartRect:Jm,calcEndDiffRange:ny,calcExpandSelectionPayload:Uy,calcExtendStyle:aS,calcLeftSizeByStyle:function(e){let t=0;if(!e)return t;if(e.marginLeft){let n=parseFloat(String(e.marginLeft));isNaN(n)&&(n=0),t+=n}if(e.borderLeft){let n=parseFloat(String(e.borderLeft));isNaN(n)&&(n=0),t+=n}if(e.paddingLeft){let n=parseFloat(String(e.paddingLeft));isNaN(n)&&(n=0),t+=n}return t},calcNextBottomPoint:Ky,calcNodeDetectRect:uE,calcPrevTopPoint:Gy,calcRangeDetectRect:dE,calcRightSizeByStyle:function(e){let t=0;if(!e)return t;if(e.marginRight){let n=parseFloat(String(e.marginRight));isNaN(n)&&(n=0),t+=n}if(e.borderRight){let n=parseFloat(String(e.borderRight));isNaN(n)&&(n=0),t+=n}if(e.paddingRight){let n=parseFloat(String(e.paddingRight));isNaN(n)&&(n=0),t+=n}return t},calcScrollBarScale:tE,calcScrollBarThumb:nE,calcSelectionDecorate:jy,calcSelectionDeltaY:Wy,calcSelectionStyle:Hy,calcStartDiffRange:ty,calcTopSizeByStyle:TC,calcTouchHeight:oE,calcUltimateStyle:HC,catchBatch:function(e,t,n){for(let o=0;o<n.length;o++)n[o](t,e)},clearEditNodePosition:ry,clearEditNodeStyle:(e,t)=>n=>{if(!n.selection||my(n.selection))return n;const{before:o,after:i}=Oy(n.selection,!1),r=[];function l(n){zm(n,(n=>{if(!Fm(n)&&pm(n)){if(e&&n.style){n.style={...n.style};for(const t in e)delete n.style[t]}if(t&&n.props){n.props={...n.props};for(const e in t)delete n.props[e]}Sc(n.style)&&delete n.style,Sc(n.props)&&delete n.props}}))}return Vy(n.node,n.selection,((e,t)=>{if(mm(e))return;if(r.find((e=>0===ky(e,t))))return;r.push(t);const s=ky(i.path,t),c=ky(o.path,t);if(0===s&&0===c){const r={path:i.path.slice(t.length),offset:i.offset},s={path:o.path.slice(t.length),offset:o.offset},c=VC(e,r);if(c){const t=VC(e,s),o=$C(e,r),i=$C(c,s);i&&l(i);const a=[];t?.children.length&&a.push(...t.children);let u=!1,d=!1;if(i?.children.length){const e=tc(i.children);if(e&&Tm(e)){const n=Js(t?.children);if(n&&Tm(n)&&e.key===n.key){const t=Js(n.children);if(t&&Wm(t)){const n=tc(e.children);n&&Wm(n)&&n.key===t.key&&(t.children.push(...n.children),i.children.shift(),u=!0)}}}const n=Js(i.children);if(n&&Tm(n)){const e=tc(o?.children);if(e&&Tm(e)&&e.key===n.key){const t=Js(n.children);if(t&&Wm(t)){const n=tc(e.children);n&&Wm(n)&&n.key===t.key&&(n.children.unshift(...t.children),i.children.pop(),d=!0)}}}a.push(...i.children)}if(o?.children.length&&a.push(...o.children),e.children=a,kx(e),i){let e=rb(i);sc(tc(i.children))&&(e[e.length-1]=(t?.children.length??0)+(Js(e)??0)),t&&u&&(e=lb(t));let r=lb(i);sc(Js(i.children))&&(r[r.length-1]=(t?.children.length??0)+(Js(r)??0)),o&&d&&(r=rb(o));const l=$m(Um(n.node,r));n.selection={focus:{path:e,offset:0},anchor:{path:r,offset:l}}}}}else if(s>0&&0===c){const i={path:o.path.slice(t.length),offset:o.offset},r=VC(e,i),s=$C(e,i);s&&l(s);const c=[];r?.children.length&&c.push(...r.children);let a=!1;if(s?.children.length){const e=tc(s.children);if(e&&Tm(e)){const t=Js(r?.children);if(t&&Tm(t)&&e.key===t.key){const n=Js(t.children);if(n&&Wm(n)){const t=tc(e.children);t&&Wm(t)&&t.key===n.key&&(n.children.push(...t.children),s.children.shift(),a=!0)}}}c.push(...s.children)}if(e.children=c,kx(e),s){let e=rb(s);sc(tc(s.children))&&(e[e.length-1]=(r?.children.length??0)+(Js(e)??0)),r&&a&&(e=lb(r)),n.selection&&(n.selection.focus={path:e,offset:0})}}else if(0===s&&c<0){const o={path:i.path.slice(t.length),offset:i.offset},r=$C(e,o),s=VC(e,o);s&&l(s);const c=[];let a=!1;if(s?.children.length){const e=Js(s.children);if(e&&Tm(e)){const t=tc(r?.children);if(t&&Tm(t)&&t.key===e.key){const n=Js(e.children);if(n&&Wm(n)){const e=tc(t.children);e&&Wm(e)&&e.key===n.key&&(e.children.unshift(...n.children),s.children.pop(),a=!0)}}}c.push(...s.children)}if(r?.children.length&&c.push(...r.children),e.children=c,kx(e),s){let e=lb(s);r&&a&&(e=rb(r));const t=$m(Um(n.node,e));n.selection&&(n.selection.anchor={path:e,offset:t})}}else s>0&&c<0&&l(e)})),n=Ix()(n)},clearHighlights:_S,clearSelection:Kw,clearTouchState:XS,clearVisibleState:GS,clipEditNode:ly,cloneEditNodeByPath:function(e,t){return Xm(e,Qy(e,t))},cloneNode:function e(t){return wm(t)&&t.position&&(t={...t,position:{...t.position}}),t.style&&(t={...t,style:{...t.style}}),{...t,children:t.children.map((t=>pm(t)?e(t):t))}},cloneNodeByPath:Xm,collapsedSelectionPoint:Qw,comparePath:ky,comparePoint:Ey,compareSelection:function(e,t){const n=Oy(e,!1),o=Oy(t,!1);return-1===Ey(n.after,o.before)?-1:1===Ey(n.before,o.after)?1:0},contextMenuOptions:kC,convergeBlockSelection:()=>e=>{if(void 0===e.selection)return e;if(my(e.selection))return e;const{before:t,after:n}=Oy(e.selection,!1),o=mb(e.node,t.path);if(!Ec(o,mb(e.node,n.path))){const t=Um(e.node,o);if(bm(t)){const o=lb(t),i=Um(e.node,o);if(null!==i){const e=$m(i);n.path=o,n.offset=e}}}return e},createBlockNode:sy,createCodeNode:function(e,t,n){const o={type:Vg,children:e};return void 0!==t&&(o.style=t),void 0!==n&&(o.props=n),o},createCompositionNode:py,createDecorateBlockNode:function(e,t,n){const o={type:Qg,props:e,children:t??[]};return void 0!==n&&(o.style=n),o},createDecorateInlineNode:function(e,t,n){const o={type:em,props:e,children:t??[]};return void 0!==n&&(o.style=n),o},createInlineNode:cy,createInlineSideSpiesNode:gy,createLoupeNode:vy,createMetaBrNode:fy,createMetaInlineNode:function(e,t){const n={type:$g,children:e,props:{type:Gg}};return void 0!==t&&(n.style=t),n},createMetaNode:ay,createMetaSpaceNode:uy,createMetaTabNode:dy,createPlaceholderNode:hy,createPreNode:function(e,t,n){const o={type:zg,children:e};return void 0!==t&&(o.style=t),void 0!==n&&(o.props=n),o},createReferenceBlockNode:function(e,t,n){const o={type:tm,children:t??[]};return void 0!==n&&(o.style=n),void 0!==e&&(o.props=e),o},createReferenceInlineNode:function(e,t,n){const o={type:nm,children:t??[]};return void 0!==n&&(o.style=n),void 0!==e&&(o.props=e),o},createSideSpiesNode:function(e,t=[],n="right",o){return o?{type:Ug,children:[...t,{type:Zg,props:{origin:e},style:{position:"absolute",top:0,bottom:0,[n]:0},children:[]}],style:{display:"inline-block",position:"relative"}}:gy(e,t,n)},createSpiesNode:function(e,t=[],n){return{type:Zg,props:e,style:n,children:t}},createWordSegmenter:EE,decorateBlockNode:mS,decorateNode:e=>t=>{if(!t.selection)return t;if(my(t.selection))return hS(e)(t);let n=null;const{before:o,after:i}=Oy(t.selection),{before:r,after:l}=Oy(Py(t.node,t.selection));if(Vy(t.node,t.selection,((s,c)=>{const a=ts(e);if(0===ky(c,o.path)||0===ky(c,i.path)){const e={anchor:{path:Qs(r.path,c.length),offset:r.offset},focus:{path:Qs(l.path,c.length),offset:l.offset}};if(0!==ky(c,o.path)){const t=rb(s);e.anchor.path=Qs(t,c.length),e.anchor.offset=0}if(0!==ky(c,i.path)){const n=lb(s),o=Um(t.node,n);null!==o&&(e.focus.path=Qs(n,c.length),e.focus.offset=$m(o))}const u=yS(s,e),d=Yy(e);let f=0,h=s;for(;f<d.length;){const e=h.children[d[f]];if(!bm(e))break;h=e,f++}const{before:p}=Oy(e);let v=p.path[f];void 0!==v?v++:v=0;const g=[...Rg(h.key),v];let m=a.children;for(;m.length>0&&pm(m[0]);)m=m[0].children;return m.push(...u.children),n=iy(a,Og(g)),void h.children.splice(v,0,n)}let u=a.children;for(;u.length>0&&pm(u[0]);)u=u[0].children;u.push(...s.children),n=iy(a,Og([...c,0])),s.children=[n]})),0===o.offset){let e=0,n=t.node;const{before:o}=Oy(t.selection,!1),i=Qy(t.node,o.path);for(;e<i.length;){const t=n.children[i[e++]];if(!bm(t))break;n=t}o.path=o.path.slice(0,e)}if(null!==n){const e=lb(n),o=Um(t.node,e);if(null!==o&&t.selection){const{after:n}=Oy(t.selection,!1);n.path=e,n.offset=$m(o)}}return t},deleteBackward:wS,deleteCompositionNode:NS,deleteEditNodePosition:wx,deleteForward:xS,deleteFragment:bS,deleteLineBackward:ES,deleteLineForward:kS,deleteNode:e=>t=>{const n=Um(t.node,e),o=Um(t.node,ec(e));return bm(o)?(o.children=o.children.filter((e=>e!==n)),t=Yw(e,"anchor",!0)(t),t=Yw(e,"focus",!0)(t),t=Ix(!0)(t)):t},deleteWordBackward:DS,deleteWordForward:IS,dispatchMouseEvent:bE,dispatchTouchEvent:function(e,t,n){const o=new TouchEvent(t,{cancelable:!0,bubbles:!0,touches:[n],targetTouches:[n],changedTouches:[n]});e.dispatchEvent(o)},editStyle:LC,eventCatcher:function(e,t,n){const o=[],i=t.filter((t=>-1!==e.indexOf(t))).length>0;return(r,l)=>{i||-1===t.indexOf(r)?(e[o.length]===r&&o.push(r),e.length===o.length&&(o.pop(),n(l)),i&&-1!==t.indexOf(r)&&(o.length=0)):o.length=0}},excludeCommonSelection:function(e){const{focus:t,anchor:n}=e;let o=0;const i=t.path.length;for(;o<i&&t.path[o]===n.path[o];)o++;const r=t.path.slice(o),l=n.path.slice(o);return{focus:{...t,path:r},anchor:{...n,path:l}}},expandSelectionPoint:ex,exportContextMenuOptions:DC,extendBackward:zx,extendForward:Vx,extendLineBackward:$x,extendLineForward:Zx,extractEditReference:BE,findCompositionNodePath:function(e){if(!e.selection||!my(e.selection))return[];let{path:t}=e.selection.focus,n=Um(e.node,t);for(;t.length;){if(bm(n)&&"underline"===n.style?.textDecoration)return t;t=ec(t),n=Um(e.node,t)}return[]},fixSelection:$w,formatStyle:e=>t=>{if(!t.selection)return t;if(my(t.selection))return t;const{before:n}=Oy(t.selection),o={focus:ts(n),anchor:ts(n)},i=Hy({...t,selection:o},e);return i?t=eS(i,e)(t):t},genNextLevelPath:Sb,genPrevLevelPath:xb,generateLoupeFocusNode:function(e,t){const n={...e.style,width:"100%",position:"relative",top:0},o=t.path.slice(Rg(e.key).length);let i=e={...e,style:n};for(;o.length;){i.children=i.children.slice();const e=o.shift();if(void 0===e)break;let n=i.children[e];if(bm(n))n={...n},i.children[e]=n,i=n;else if(sc(n)){const o=Pg(i.key,e+1),r=[n.slice(0,t.offset),iy(vy(),o),n.slice(t.offset)];i.children.splice(e,1,...r)}}return e},getAbsolutePath:tb,getAnchorPath:eb,getBlockNodeEndPath:function(e){const t=[];for(;pm(e);){const n=Math.max(e.children.length-1,0),o=e.children[n];if(void 0===e)break;if(sc(o)||Nm(o)||vm(o))break;t.push(n),e=o}return t},getBlockNodeStartPath:ib,getBoundingClientRect:hE,getEditBlockNodeEndPath:cb,getEditBlockNodeStartOffsets:Km,getEditBlockNodeStartPath:sb,getEditNodeByPath:Um,getEditNodeEndPath:lb,getEditNodeOffsets:Gm,getEditNodeStartPath:rb,getEditNodesByPath:Ym,getKeyFromPath:Og,getLocationByPath:function(e,t){let n=0,o=0,i=0;for(;i<t.length&&(e.position&&(n+=e.position.top,o+=e.position.left),mm(e));)e=e.children[t[i]],i++;return{top:n,left:o}},getNextBlockNodePath:db,getNextEditBlockNodePath:ub,getNextEditNodePath:ab,getNodeByPath:Zm,getNodeEndPath:ob,getNodeLength:$m,getNodeStartPath:nb,getNodesByPath:qm,getPathFromKey:Rg,getPathReference:LE,getPrevBlockNodePath:pb,getPrevEditBlockNodePath:hb,getPrevEditNodePath:fb,getRelativePath:Qy,getRelativeSelection:Py,getRelativeSortPoint:function(e,t){const{before:n,after:o}=Oy(e);return{before:{offset:n.offset,path:eb(n.path,t)},after:{offset:o.offset,path:eb(o.path,t)}}},hotkeys:$b,increaseBoxSizeStyle:FC,initNodeKey:Vm,injectEditNodeReference:Sx,injectReferenceNode:Dw,injectSelectionNode:Gw,injectSplitBlockNodeStyle:dS,insertBlockNode:pS,insertCompositionNode:gS,insertCursorNode:vS,insertEditBlockNode:hx,insertNode:hS,insertText:fS,insertToBlockNode:e=>t=>{if(my(t.selection)||(t=bS()(t)),!t.selection)return t;const n=t.selection.focus.path,o=mb(t.node,n),i=Um(t.node,o);if(!ym(i))return t;for(;e.type===_g;){const t=e.children[0];sc(t)?e=cy([t],e.style):(e.style&&(t.style={...RC(e.style),...t.style}),e=t)}const r=Og([...o,i.children.length]),l=iy(e,r);if(i.children.push(l),bm(l)){let e=lb(l),n=Um(t.node,e);if(Rm(n)&&(e=fb(t.node,e),n=Um(t.node,e)),null===n)return t;t.selection.anchor.offset=$m(n),t.selection.focus.offset=$m(n),t.selection.anchor.path=[...e],t.selection.focus.path=[...e]}return t=Ix(!0)(t)},isAlignCenter:Jb,isAlignJustify:eC,isAlignLeft:Xb,isAlignRight:Qb,isAltSpace:nC,isBackward:function(e){return by(e.anchor,e.focus)},isBlockNode:gm,isBlockNodeCritical:ym,isBlockNodeX:mm,isBold:Kb,isChinese:NE,isCodeNode:function(e){return pm(e)&&e.type===Vg},isCollapsed:my,isCompositionNode:Pm,isCopy:Ub,isCut:Zb,isDecorateBlockNode:Bm,isDecorateInlineNode:Tm,isDecorateNode:Lm,isDeleteBackward:bC,isDeleteForward:CC,isDeleteLineBackward:wC,isDeleteLineForward:xC,isDeleteWordBackward:SC,isDeleteWordForward:EC,isEditBlockNode:wm,isEditBlockNodeX:xm,isEditInlineNode:Cm,isEditNode:bm,isEmptyNode:Sm,isExpandBackward:vC,isExpandForward:gC,isExpandLineBackward:mC,isExpandLineForward:yC,isInlineNode:vm,isItalic:Gb,isLonelyNode:function e(t){return!pm(t)||!(t.children.length>1)&&e(t.children[0])},isLoupeNode:function(e){return!!pm(e)&&e.type===Kg},isMetaBrNode:Om,isMetaInlineNode:function(e){return Am(e)||Mm(e)||Om(e)||Nm(e)&&e.props?.type===Gg},isMetaNode:Nm,isMetaNodePath:Jy,isMetaPlaceholderNode:Rm,isMetaSpaceNode:Am,isMetaTabNode:Mm,isMoveBackward:sC,isMoveDown:uC,isMoveForward:cC,isMoveLineBackward:hC,isMoveLineForward:pC,isMoveUp:aC,isMoveWordBackward:dC,isMoveWordForward:fC,isNode:pm,isNodeEqual:Im,isPaste:qb,isPathAfter:xy,isPathBefore:Sy,isPathEqualBlock:Xy,isPathEquals:wy,isPointAfter:by,isPointBefore:Cy,isPointEquals:yy,isPreNode:function(e){return pm(e)&&e.type===zg},isReferenceBlockNode:jm,isReferenceInlineNode:Wm,isReferenceNode:_m,isSameEditNode:Em,isSameStyleNode:km,isSelectAll:Yb,isSelectionAfterEditNodeEnd:Ay,isSelectionBeforeEditNodeStart:Ty,isSelectionEquals:function(e,t){return!(!Lc(e)||!Lc(t))||!(!e||!t)&&(yy(e.anchor,t.anchor)&&yy(e.focus,t.focus))},isSelectionFocusEditNode:By,isSelectionFocusEditNodeEnd:Ly,isSelectionFocusEditNodeStart:Ny,isSelectionInclude:qy,isSelectionOutView:$y,isSelectionTouchBlockNodeEnd:function(e,t){if(void 0===t)return!1;if(!my(t)){return!wy(mb(e,t.focus.path),mb(e,t.anchor.path))}const{after:{path:n,offset:o}}=Oy(t,!1),i=Um(e,n);return null!==i&&(o===$m(i)&&0===ky(lb(Um(e,mb(e,n))),n))},isSelectionTouchBlockNodeStart:My,isSelectionTouchEdge:function(e){const{selection:t,node:n}=e;return Ty(n,t)||Ay(n,t)},isShiftSplitBlock:lC,isShiftTab:iC,isSideSpiesNode:Hm,isSpace:tC,isSpiesNode:Fm,isSplitBlock:rC,isStartPath:Iy,isStartPointPath:Dy,isTab:oC,isUniFormChildren:Dm,italic:WS,iterateBlockNode:(e,t)=>n=>{if(!(t=t??n.selection))return n;if(my(t)){const o=t.focus.path,i=mb(n.node,o),r=Um(n.node,i);return wm(r)&&e(r,i),n}return Vy(n.node,t,e),n},iterateNode:(e,t)=>e=>e,joinKey:Pg,locateInlinePosition:Ew,mainStyle:IC,mapNode:function e(t,n){return{...n(t),children:t.children.map((t=>pm(t)?e(t,n):t))}},matchWordOffsetBackward:IE,matchWordOffsetForward:DE,mergeEditNode:bx,mergeExtendStyle:uS,minusPointOnceByPath:Yw,moveBackward:Ox,moveBackwardExpand:Hx,moveCompositionBackward:Gx,moveCompositionDown:Qx,moveCompositionForward:Xx,moveCompositionUp:Jx,moveDown:Px,moveDownExpand:jx,moveForward:Rx,moveForwardExpand:_x,moveLineBackward:Ux,moveLineForward:qx,moveUp:Fx,moveUpExpand:Wx,moveWordBackward:Yx,moveWordForward:Kx,nextTickSelection:gE,paragraphSelectionPoint:nx,parseStableNumber:_C,phraseSelectionPoint:tx,popNextEditBlockNode:yx,popPrevEditBlockNode:mx,portalContextMenuStyle:WC,pushNextEditBlockNode:gx,pushPrevEditBlockNode:vx,reduceEditNode:Nx,reduceEditNodeStyle:nS,reduceSelection:Ry,reflowEditNodeByPath:Dx,reflowEditNodeBySelection:Ix,reflowEditSlowStart:ix,reflowNodeStyleByPosition:dx,reflowPending:rx,reflowSelectionPoint:ox,reflowStartPosition:cx,reflowStyle:NC,removeBorderSizeStyle:function(e){return e?(delete(e={...e}).border,delete e.borderTop,delete e.borderRight,delete e.borderBottom,delete e.borderLeft,delete e.borderWidth,delete e.borderTopWidth,delete e.borderRightWidth,delete e.borderBottomWidth,delete e.borderLeftWidth,e):e},removeBoxSizeStyle:RC,removeEditNodeReference:Ex,removeLocation:Sw,removePositionStyle:OC,removeSplitBlockNodeStyle:function(e){e.style&&(delete e.style.paddingBottom,delete e.style.paddingTop)},resetContentHeight:Aw,resetDetectRect:Hw,resetEditNodeKey:xx,resetEditNodeKeyRecursion:kx,resetReference:Iw,resetReflowStart:lx,resetScrollHeight:Tw,resetScrollTouch:Mw,resize:(e,t,n,o,i)=>r=>{if(!i&&r.clientWidth!==e){r.clientWidth=e,r.node=ry(r.node);const t=ux(r.node,n.block,o);r.node.position={top:0,left:0,right:0,bottom:t+BC(r.node.style)}}return r.clientHeight!==t&&(r.clientHeight=t),r.scrollHeight<r.clientHeight&&(r.scrollHeight=r.clientHeight),i||r.scrollHeight===r.clientHeight||(r.scrollHeight=r.clientHeight),r},resizeHeight:Lw,resizeHeightDebounce:CE,resizeWidth:(e,t,n,o)=>i=>{const r=sb(i.node);if(!Iy(r)){const e=Gm(i.node,r);if(i.reflowStart){const{offsets:t,path:n}=i.reflowStart;if(Ec(t,e)&&Ec(n,r))return i}return i.resizeWidth,i=Nw(!0)(i)}const{record:l}=n,s=ts(i.reflowStart),c=ux(i.node,t,l);return i.node.position={top:0,left:0,right:0,bottom:c+BC(i.node.style)},dx(i.node,t,l),(i=Lw(e)(i)).location&&o?i=(e=>(e.location=void 0,e))(i=Ew(e,t,o)(i)):(i=cx(s)(i),i=Iw(e)(i)),i},resizeWidthInfinite:Bw,retransferEditBlockNode:px,saftyTextNode:fE,scrollEdit:Bx,scrollEditAnimation:QS,scrollEditAnimationNative:eE,scrollEditSafty:JS,scrollSelectionIntoView:Tx,searchInlinePathFromPoint:gb,searchPathFromPoint:vb,selectionBlockNode:e=>t=>{const n=t.selection?.focus;if(void 0===n)return t;const o=mb(t.node,n.path),i=Um(t.node,o);if(!gm(i))return t;const r=rb(i),l=lb(i),s=Um(t.node,l);return null===s?t:(t.selection={anchor:{path:r,offset:0},focus:{path:l,offset:$m(s)}},t=Uw()(t),t=Zw(e)(t),t=Ww(!0)(t))},selectionEditNodeEnd:()=>e=>{const t=lb(e.node),n=Um(e.node,t);if(null===n)return e;const o=$m(n),i={focus:{path:[...t],offset:o},anchor:{path:[...t],offset:o}};return e=_w(i)(e),e=Ww(!0)(e)},selectionEditNodeStart:()=>e=>{const t=rb(e.node),n={focus:{path:[...t],offset:0},anchor:{path:[...t],offset:0}};return e=_w(n)(e),e=Ww(!0)(e)},setClientHeight:e=>t=>(t.clientHeight=e,t),setComposing:Xw,setComposition:Jw,setContentHeight:Ow,setContextMenuRect:FS,setContextMenuScrolling:HS,setContextMenuScrollingDebounce:xE,setContextMenuVisible:PS,setEditBlockNodeStyle:cS,setEditNode:e=>t=>(t.node=e,t),setEditNodeProps:oS,setEditNodeStyle:eS,setEditNodeStyleRecursion:tS,setEditPending:fx,setEditScrollingDebounce:wE,setHighlights:e=>t=>(t.highlights=e,t),setLoupeOffsetTop:e=>t=>(t.loupe||(t.loupe={}),t.loupe.offsetTop=e,t),setLoupeOnlyDot:ZS,setLoupeRect:US,setLoupeVisible:$S,setReload:Nw,setResizeHeight:Pw,setResizeWidth:Rw,setScrollBarVisible:VS,setScrollHeight:e=>t=>(t.scrollHeight=e,t),setScrollPending:Mx,setScrolling:Ax,setSelectPending:Fw,setSelection:_w,setSelectionDecorate:Uw,setSelectionLayout:zw,setSelectionPath:Vw,setSelectionReflow:Ww,setSelectionStyle:Zw,setSelectionfrozen:jw,setSlicer:RS,setTouchExpandSelection:qS,setTouchIndicatorSelection:YS,setTouchIndicatorVisible:KS,shiftSplitBlock:BS,shiftTab:AS,shouldAdjustAutoCompleteFocus:vE,sliceAfterPoint:$C,sliceBeforePoint:VC,sliceBlockPath:mb,sliceBoxSizeStyle:PC,sliceCompositionNodePath:wb,sliceDecoratePath:yb,sliceEditNode:OS,sliceEditNodeByCWND:function(e,t,n){const o=function(e,t){if(!pm(e))throw new Error("the type of node must be a truly Node, please check out the node: "+JSON.stringify(e));if(0===t.length&&ym(e))return Vm(e);const n={...e,critical:ym(e),children:[],key:Mg};let o=n.children,i=0;for(;i<t.length;){const n=e.children[Math.min(t[i],e.children.length-1)];if(!pm(n)){o.push(n);break}if(!mm(n)){o.push(Vm(n,t.slice(0,i+1)));break}e=n;const r={...e,critical:ym(e),key:Og(t.slice(0,i+1)),children:[]};o.push(r),o=r.children,i++}return n}(e,t);let i=o.children;const r=t.slice();let l=r.length,s=-1;for(n++;l>=0&&n>0;){const c=Zm(e,r);if(null===c)return null;let a=!0;const u=[c],d=[u.length];for(;u.length>0&&n>0;){const e=u.pop();if(!1===a?(n--,r[r.length-1]++,(n>=1||!gm(e))&&(0===n&&n++,mm(e)?i.push({...e,critical:ym(e),key:Og(r),children:[]}):pm(e)?i.push(Vm(e,r)):i.push(e))):a=!1,0===n)break;if(d[d.length-1]--,!mm(e)||0===e.children.length||e.children.length-1-s<=0){for(s=-1;0===d[d.length-1];)d.pop(),r.pop(),i=zC(o,t,r.slice(0,-1));continue}i=zC(o,t,r),r.push(s);let l=e.children.length;for(d.push(l-1-s);l-1>s;)u.push(e.children[l-1]),l--;s=-1}n>0&&(s=t[--l])}return 0===r.length&&r.push(e.children.length),o},sliceKeyboardEvent:function(e){return{onKeyDown:e.onKeyDown}},sliceLoupeNode:TE,sliceMetaNodePath:Cb,sliceNode:function e(t,n,o,i=[]){if(Sc(n)||Sc(o)||Sc(t.children)){let e=t.children;return Sc(n)?Sc(o)||(e=e.slice(0,o[0]+1)):e=e.slice(n[0]),Vm({...t,children:e},i)}if(n[0]===o[0]){const r=t.children[n[0]];if(pm(r)){const l=n.slice(1);0===l.length&&(l[0]=0);const s=o.slice(1);0===s.length&&(s[0]=r.children.length-1);const c={...t,key:Og(i),critical:ym(t),children:[e(r,l,s,i.concat(n[0]))]};return c.style&&(c.style={...c.style}),c}if(sc(r))return Vm({...t,children:[r]},i)}const r=t.children.slice(n[0]+1,o[0]).map(((e,t)=>pm(e)?Vm(e,i.concat(n[0]+1+t)):e)),l=t.children[n[0]];pm(l)?r.unshift(e(l,n.slice(1),[l.children.length-1],i.concat(n[0]))):sc(l)&&r.unshift(l);const s=t.children[o[0]];pm(s)?r.push(e(s,[0],o.slice(1),i.concat(o[0]))):sc(s)&&r.push(s);const c={...t,key:Og(i),critical:ym(t),children:r};return c.style&&(c.style={...c.style}),c},slicePointerEvent:yE,sliceReferencePath:bb,sliceSelectionStartBlockPath:function(e,t){const{before:{path:n}}=Oy(t);return mb(e,n)},sortSelection:Oy,space:MS,spliceEditNode:Cx,splitBlock:LS,syncEndSelectionReflow:()=>e=>{if(!e.selection)return e;const t=cb(e.node),{before:n,after:o}=Oy(e.selection);return xy(n.path,t)||Sy(o.path,t)||(e.selectionReflow=!0),e},syncReference:kw,syncScrollSelection:qw,syncStartSelectionReflow:()=>e=>{if(!e.selection)return e;const t=sb(e.node),{before:n,after:o}=Oy(e.selection);return xy(n.path,t)||Sy(o.path,t)||(e.selectionReflow=!0),e},tab:TS,transformEditNodeToNode:oy,transformEditSelection:function(e){const{node:t,selection:n}=e;if(Lc(n))return;if(!By(n,t))return;const o=rb(t),i=lb(t),{anchor:r,focus:l}=ts(n);if(by(r,l)){if(null===Um(t,l.path)&&(l.offset=0,l.path=o),null===Um(t,r.path)){const e=Um(t,i);sc(e)?r.offset=e.length:r.offset=0,r.path=i}}else if(Cy(r,l)&&(null===Um(t,r.path)&&(r.offset=0,r.path=o),null===Um(t,l.path))){const e=Um(t,i);sc(e)?l.offset=e.length:l.offset=0,l.path=i}return{anchor:r,focus:l}},transformHighlight:SE,transformNodeToEditNode:iy,transitionContextMenuStyle:jC,traversalEditBlockNodeBySelection:Vy,traversalEditNodeBySelection:zy,traversalNextNode:ux,traversalPrevNode:ax,traversalSelectionBlockNodePath:function(e,t,n,o){const{before:i,after:r}=Oy(t),l=mb(e,i.path),s=mb(e,r.path);let c=o?s:l;do{const t=Zm(e,c);if(!gm(t))break;if(!1===n(t,c))break;if(o){if(c=pb(e,c),Sy(c,l))break}else if(c=db(e,c),xy(c,s))break}while(c.length)},traverseNode:zm,useCommonMainEvents:FE,useContentRefs:function(e){return{content:Z(null)}},useEditableRefs:function(e){return{edit:Z(null)}},useElementRefs:ME,useLiteEvents:function(e){},useMainRefs:OE,useMobileMainEvents:_E,useMobileSelectionEvents:jE,usePCMainEvents:HE,useReflowRefs:PE,useSelectionRefs:RE,wordSegmenter:kE});function tk(e){const[t,n]=Od((()=>({}))),o=Z(null),i=Z(null),r={...e,...t},{value:{node:l,highlights:s},disableEvents:c}=e;return lh(Ig,{value:n,children:lh(Bg,{value:e,children:lh(c?YE:Pf?GE:KE,{...r,refref:i,selref:o,children:sh("div",{style:LC(e),children:[lh(XE,{...r,refref:i,children:lh(AE,{node:l,highlights:s,renderElement:e.renderElement})}),lh(JE,{...r,ref:o,refref:i})]})})})})}const nk={position:"relative",cursor:"default"},ok={display:"inherit",height:"100%",width:"100%"};function ik(e){const t={};return void 0!==e.style?.width&&(t.width=parseFloat(String(e.style.width))),void 0!==e.value?.width&&(t.width=e.value.width),void 0!==e.style?.height&&(t.height=parseFloat(String(e.style.height))),void 0!==e.value?.height&&(t.height=e.value.height),t}var rk=Object.freeze({__proto__:null,calcImageSize:ik,limitImageSize:function(e,t){let{width:n,height:o}=e;return void 0===n||void 0===o?e:(n>o?o<t&&(n=t*n/o,o=t):n<t&&(o=t*o/n,n=t),{width:n,height:o})},resetImageSize:function(e,t){let{width:n,height:o}=e;return void 0===n||void 0===o?e:(n>o?(n=t*n/o,o=t):(o=t*o/n,n=t),{width:n,height:o})}});function lk(e){const{src:t}=e;return lh(ch,{ref:e.ref,style:{...nk,...e.style,...ik(e)},onPointerDown:e.onPointerDown,onClick:e.onClick,children:t&&"pending"!==t&&lh("img",{style:ok,onLoad:e.onLoad,src:t,alt:""})})}function sk({width:e=20,fill:t=kf}){return sh("svg",{viewBox:"0 0 1024 1024",width:e,children:[lh("path",{d:"M782.426059 824.924989l-584.588225-584.727395c-11.987009-11.990079-11.984962-31.42778 0.005116-43.414789 11.990079-11.987009 31.42778-11.984962 43.414789 0.005117l584.588225 584.727395c11.987009 11.990079 11.984962 31.42778-0.005116 43.414788-11.989055 11.988032-31.42778 11.984962-43.414789-0.005116z",fill:t}),lh("path",{d:"M197.768249 824.856427c-11.987009-11.990079-11.984962-31.42778 0.005117-43.414788l584.727394-584.589249c11.990079-11.987009 31.42778-11.984962 43.414789 0.005117 11.987009 11.990079 11.984962 31.42778-0.005116 43.414788l-584.727395 584.589249c-11.990079 11.987009-31.42778 11.984962-43.414789-0.005117z",fill:t})]})}const ck={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999999,display:"flex",justifyContent:"center",alignItems:"center"},ak={position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,transition:"opacity 0.2s cubic-bezier(0.2, 0.0, 0.2, 1.0)",backgroundColor:Mf&&Ff?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.5)"},uk={borderRadius:8,backgroundColor:"#fff",position:"relative",top:-20,boxSizing:"border-box",padding:24,boxShadow:"0 0 10px 2px rgba(0, 0, 0, 0.2)",opacity:0,transform:"scale(0.98, 0.98)",transition:"opacity 0.2s cubic-bezier(0.2, 0.0, 0.2, 1.0), transform 0.3s cubic-bezier(0.2, 0.0, 0.2, 1.0)",color:kf,width:Pf?320:400,minWidth:Pf?320:400,overflow:Hf?"unset":"hidden"},dk={width:"100%",fontSize:18,marginBottom:18,fontWeight:"bold",boxSizing:"border-box",userSelect:"none"},fk={width:"100%",marginBottom:24,fontSize:14,lineHeight:1.6,overflow:"auto"},hk={width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center",position:"relative",zIndex:1},pk={position:"absolute",right:10,top:10,left:"unset",cursor:"pointer",width:24,height:24,borderRadius:2,overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},vk={musk:{opacity:1},content:{opacity:1,transform:"scale(1, 1)"}},gk={musk:{opacity:0},content:{opacity:0,transform:"scale(0.98, 0.98)"}};function mk({okText:e="确认",cancelText:t="取消",showFooter:n=!0,showCancel:o=!0,showCancelIcon:i=!0,...r}){const l=Dd(r),s=Z(),c=Z(null),a=Z(document.body.style.overflow),[u,d]=$(r.visible),[f,h]=$(!1);if(F((()=>{const e=f?300:0;return r.visible&&!u?s.current=setTimeout((()=>{d(!0),h(!f)}),e):!r.visible&&u&&(s.current=setTimeout((()=>{d(!1),h(!f)}),e)),()=>{clearTimeout(s.current)}})),F((()=>{const e=e=>{l.current.visible&&"Enter"===e.key&&l.current.onOk?.(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[l]),F((()=>{if(!c.current)return;const e=e=>{e.currentTarget===e.target&&(r.visible||d(!1),h(!1))};return c.current.addEventListener("transitionend",e),()=>{c.current&&c.current.removeEventListener("transitionend",e)}}),[r.visible]),H((()=>{u?(a.current=document.body.style.overflow,document.body.style.setProperty("overflow","hidden")):document.body.style.setProperty("overflow",a.current)}),[u]),!r.visible&&!u&&!f)return null;const p={...ak};r.visible&&u?Object.assign(p,vk.musk):Object.assign(p,gk.musk);const v={...uk,...r.style};r.visible&&u?Object.assign(v,vk.content):Object.assign(v,gk.content),r.autoSize&&delete v.width;const g={...fk};return n||delete g.marginBottom,r.autoSize&&(g.maxWidth="80vw",g.maxHeight="68vh"),sh("div",{style:ck,onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:[lh("div",{style:p}),sh(hh,{ref:c,style:v,children:[i?lh(dv,{type:"background",style:pk,onClick:r.onCancel,children:lh(sk,{})}):null,r.title&&lh("div",{style:dk,children:r.title}),lh("div",{style:g,children:r.children}),n&&sh("div",{style:hk,children:[o?lh(pv,{onClick:r.onCancel,type:"default",children:t}):null,lh(pv,{onClick:r.onOk,style:{marginLeft:24},children:e})]})]})]})}const yk={position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},bk={opacity:0,pointerEvents:"none",fontSize:12,lineHeight:1.2,whiteSpace:"nowrap",fontWeight:"bold",position:"absolute",userSelect:"none",padding:"4px 6px",backgroundColor:yf,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,borderRadius:2,color:"#fff"},Ck=(e=10)=>({top:`calc(100% + ${e}px)`}),wk=(e=10)=>({bottom:`calc(100% + ${e}px)`}),xk=(e=10)=>({left:`calc(100% + ${e}px)`}),Sk=(e=10)=>({right:`calc(100% + ${e}px)`}),Ek={position:"absolute",width:0,height:0,borderStyle:"solid"},kk={bottom:-12,borderWidth:"6px 5px",borderColor:`${yf} transparent transparent transparent`},Dk={top:-12,borderWidth:"6px 5px",borderColor:`transparent transparent ${yf} transparent`},Ik={right:-12,borderWidth:"5px 6px",borderColor:`transparent transparent transparent ${yf}`},Nk={left:-12,borderWidth:"5px 6px",borderColor:`transparent ${yf} transparent transparent`};function Lk(e,t){return"top"===e?wk(t):"left"===e?Sk(t):"right"===e?xk(t):Ck(t)}function Bk(e){return lh(Pf?Tk:Ak,{...e})}function Tk(e){return e.children}function Ak(e){const[t,n]=$(0),o=Z(null);return F((()=>()=>{null!==o.current&&(clearTimeout(o.current),o.current=null)}),[]),sh("div",{style:{...yk,...e.style},onPointerEnter:t=>{o.current=setTimeout((()=>{n(1*(e.opacity??1))}),e.delay)},onPointerLeave:e=>{null!==o.current&&(clearTimeout(o.current),o.current=null),n(0)},children:[e.children,e.tips&&!e.hide&&sh("div",{style:{...bk,...Lk(e.direction,e.offset),opacity:t},children:[e.tips,lh("span",{style:{...Ek,...(i=e.direction,"top"===i?kk:"left"===i?Ik:"right"===i?Nk:Dk)}})]})]});var i}const Mk={position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",backgroundColor:Pf?xf:yf,width:38,userSelect:"none",paddingTop:3,paddingBottom:3},Ok={display:"flex",flexDirection:"column"},Rk={borderRadius:"50%",marginTop:5,marginBottom:5,width:28,height:28,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},Pk={},Fk={position:"absolute",bottom:8,left:32,zIndex:1e4};function Hk(e){return sh(ch,{style:{...Mk,...e.style},onClick:e.onClick,children:[e.value?.map(((t,n)=>lh("div",{style:Ok,children:t.map(((t,n)=>sh("div",{children:[lh(Bk,{opacity:.9,direction:"right",tips:t.tips,children:lh(dv,{onClick:n=>(n.stopPropagation(),(t=>{if(void 0===e.value)return;const n=[];for(let o=0;o<e.value.length;o++){const i=e.value[o];void 0===n[o]&&(n[o]=[]);for(let e=0;e<i.length;e++)n[o][e]={...i[e],active:i[e]===t}}e.onChange?.(n)})(t)),type:"theme",style:{...Rk,...t.active&&Pk},children:t.icon})}),t.visible&&t.options?.length&&lh("div",{style:Fk,children:lh(gg,{style:{width:160},options:t.options})})]},t.id+n)))},n))),e.children]})}const _k={position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e5,display:"flex",justifyContent:"center"},jk={position:"absolute",top:0,left:0,pointerEvents:"visible",display:"flex",justifyContent:"center"},Wk={position:"absolute",width:0,display:"flex",justifyContent:"center"};function zk(e){const t=Nd("wheel");return F((()=>{if(Pf)return;const e=t.subscribe((e=>{e.deltaX<0&&e.preventDefault()}));return()=>e.unsubscribe()}),[t]),lh("div",{style:{..._k,...e.style},...Ld([t]),ref:e.ref})}function Vk(e){const[t,n]=$(),o={top:t?.top??0,left:(t?.left??0)+(t?.width??0)/2,opacity:t?1:0,zIndex:e.zIndex};return H((()=>{const o=e.ele?.current;if(!o)return;const i=function(e){return{left:e.left,top:e.top,bottom:e.bottom,right:e.right,width:e.width,height:e.height}}(o.getBoundingClientRect()),r=e.portal?.current;if(r){const t=r.getBoundingClientRect();i.left=(i.left??0)-t.left,"bottom"===e.align?i.top=(i.bottom??0)-t.top:i.top=(i.top??0)-t.top}i&&!Ec(i,t)&&(n(i),e.layout?.(i))})),lh("div",{onPointerDown:e=>e.stopPropagation(),style:{...jk,...o},children:lh("div",{style:Wk,children:e.children})})}function $k(e,t,o,i,l,s){return t.current?function(e,t){return{type:r,symbol:n,props:{children:e,ele:t}}}(lh(Vk,{portal:t,ele:o,align:i,zIndex:s,layout:l,children:e}),t.current):e}var Zk;!function(e){e.Start="Start",e.Pending="Pending",e.End="End"}(Zk||(Zk={}));const Uk={all:qk=qk||new Map,on:function(e,t){var n=qk.get(e);n?n.push(t):qk.set(e,[t])},off:function(e,t){var n=qk.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):qk.set(e,[]))},emit:function(e,t){var n=qk.get(e);n&&n.slice().map((function(e){e(t)})),(n=qk.get("*"))&&n.slice().map((function(n){n(e,t)}))}};var qk;const Yk="location";addEventListener("popstate",(e=>{const t=e.state;null===t?Uk.emit(Yk):Uk.emit(Yk,t)})),U({path:""});const Kk=U(null),Gk=U(null);const Xk=`transparent 0%, transparent 39.9%, ${yf} 40%, ${yf} 50%, ${yf} 60%, transparent 60.1%, transparent 100%`,Jk=100,Qk={position:"relative"},eD={position:"relative",width:"100%",height:"100%"},tD={position:"absolute",top:0,left:0,right:0,bottom:0},nD={position:"absolute",left:0,right:0,pointerEvents:"none",zIndex:1},oD={position:"absolute",top:0,bottom:0,pointerEvents:"none",zIndex:1},iD={position:"absolute",left:0,right:0,height:Pf?10:4,cursor:"row-resize",zIndex:100,opacity:0,pointerEvents:"visible",background:`linear-gradient(to bottom, ${Xk})`,transition:"opacity 100ms ease-out"},rD={...iD,zIndex:200,opacity:1,background:`linear-gradient(to bottom, ${Xk})`},lD={position:"absolute",top:0,bottom:0,width:Pf?10:4,cursor:"col-resize",zIndex:100,opacity:0,pointerEvents:"visible",transition:"opacity 100ms ease-out",background:`linear-gradient(to right, ${Xk})`},sD={...lD,zIndex:200,opacity:1,background:`linear-gradient(to right, ${Xk})`},cD={position:"absolute",top:0,bottom:0,right:0,left:0,pointerEvents:"none",overflow:"hidden",zIndex:1e4},aD={position:"absolute",top:0,left:0,pointerEvents:"none",zIndex:1,boxSizing:"border-box",transition:"all 100ms ease-out",willChange:"left, top, width, height"},uD={position:"absolute",top:0,left:0,right:0,bottom:0,border:`2px solid ${yf}`},dD={position:"absolute",top:0,left:0,opacity:.5,boxSizing:"border-box",border:`2px solid ${yf}`,overflow:"hidden",transition:"all 100ms ease-out",willChange:"left, top, width, height"},fD={position:"absolute",right:-1,bottom:-1,zIndex:100,width:7,height:7,boxSizing:"border-box",border:"1px solid #fff",backgroundColor:yf,pointerEvents:"auto",cursor:"crosshair"},hD={position:"absolute",top:0,left:0,userSelect:"none",opacity:.2,outlineColor:yf,outlineStyle:"solid",transition:"all 100ms ease-out",willChange:"left, top, width, height, outline-width"},pD={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden"},vD={position:"absolute",zIndex:10,pointerEvents:"auto",cursor:"grab"},gD={...vD,top:Pf?-4:-1,left:0,right:0,height:Pf?10:4},mD={...vD,top:0,right:Pf?-4:-1,bottom:0,width:Pf?10:4},yD={...mD,right:-2,cursor:"col-resize"},bD={...vD,left:Pf?-4:-1,top:0,bottom:0,width:Pf?10:4},CD={...vD,left:0,right:0,bottom:Pf?-4:-1,height:Pf?10:4},wD={...CD,bottom:-2,cursor:"row-resize"},xD={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden",zIndex:1,display:"flex",alignItems:"center"},SD={...xD,zIndex:10,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0},ED={position:"absolute",top:0,right:0,bottom:0,left:0,pointerEvents:"none",zIndex:1e3,overflow:"hidden"},kD={position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,overflow:"hidden"},DD={position:"absolute",top:0,left:0,width:"calc(100% + 2px)",height:"calc(100% + 2px)"},ID={position:"absolute",zIndex:102},ND={position:"absolute",left:0,right:0,height:6,bottom:-5};function LD(e,{row:t,column:n,cell:o,infinite:i}){const{columnEndIndex:r,rowEndIndex:l}=e;r===1/0&&l!==1/0?t&&BD(e,t):r!==1/0&&l===1/0?n&&TD(e,n):r!==1/0&&l!==1/0?o&&AD(e,o):i?.()}function BD(e,t){const{rowStartIndex:n,rowEndIndex:o}=e;if(o===1/0)throw new Error("当前迭代的行包含无限大的值，请使用 interateIndicatorRangeColumn 遍历选区");for(let e=n;e<o;e++)t(e)}function TD(e,t){const{columnStartIndex:n,columnEndIndex:o}=e;if(o===1/0)throw new Error("当前迭代的列包含无限大的值，请使用 interateIndicatorRangeRow 遍历选区");for(let e=n;e<o;e++)t(e)}function AD(e,t){const{columnStartIndex:n,rowStartIndex:o,columnEndIndex:i,rowEndIndex:r}=e;if(i===1/0||r===1/0)throw new Error("当前迭代的行列包含无限大的值，请使用 interateIndicatorRangeRow 或 interateIndicatorRangeColumn 遍历选区");for(let e=o;e<r;e++)for(let o=n;o<i;o++)t(e,o)}function MD(e,t){const n=Object.keys(e),o=n.length;let i=0;for(;i<o;)t(Number(n[i])),i++}function OD(e,t,n){const o=Object.keys(e),i=o.length;let r=0;for(;r<i;){const i=o[r],l=ZD(i);l.rowIndex===t&&n(l.columnIndex,e[i]),r++}}function RD(e,t,n){const o=Object.keys(e),i=o.length;let r=0;for(;r<i;){const i=o[r],l=ZD(i);l.columnIndex===t&&n(l.rowIndex,e[i]),r++}}function PD(e){if(void 0===e)return!1;const{rowStartIndex:t,rowEndIndex:n,columnStartIndex:o,columnEndIndex:i}=e;return n-t<=1&&i-o<=1}function FD(e,t){return void 0!==e&&void 0!==t&&(e.rowStartIndex<=t.rowStartIndex&&e.columnStartIndex<=t.columnStartIndex&&e.rowEndIndex>=t.rowEndIndex&&e.columnEndIndex>=t.columnEndIndex)}function HD(e,t){const{rowStartIndex:n,rowEndIndex:o,columnStartIndex:i,columnEndIndex:r}=e,{rowIndex:l=n,columnIndex:s=i}=t;return n<=l&&o>l&&i<=s&&r>s}function _D(e,t){let n=null;return void 0===t||LD(t,{row(t){if(""===n)return;const o=e?.rows?.[t];o?.merge?null===n?n=o.merge:n!==o.merge&&(n=""):n=""},column(t){if(""===n)return;const o=e?.columns?.[t];o?.merge?null===n?n=o.merge:n!==o.merge&&(n=""):n=""},cell(t,o){if(""===n)return;const i=$D(t,o),r=e?.cells?.[i];r?.merge?null===n?n=r.merge:n!==r.merge&&(n=""):n=""},infinite(){if(""===n)return;const t=e?.defaultCell;t?.merge?null===n?n=t.merge:n!==t.merge&&(n=""):n=""}}),n??""}function jD(e){const{columnStartIndex:t,rowStartIndex:n,columnEndIndex:o,rowEndIndex:i}=e;return o!==1/0&&i!==1/0?`${$D(n,t)}-${$D(i,o)}`:o!==1/0&&i===1/0?`${$D(n,t)}-.${o}`:o===1/0&&i!==1/0?`${$D(n,t)}-${i}.`:"0.0-."}function WD(e){const t=e.split("-")[0],n=e.split("-")[1],o=ZD(t),i=n.split("."),r=i[0];let l=o.rowIndex,s=l+1;s=""===r?1/0:Math.max(s,Number(r));const c=i[1];let a=o.columnIndex,u=a+1;return u=""===c?1/0:Math.max(u,Number(c)),{rowStartIndex:l,rowEndIndex:s,columnStartIndex:a,columnEndIndex:u}}function zD(e,t){const{cells:n,rows:o,columns:i,defaultCell:r}=e,{rowIndex:l,columnIndex:s}=t,c=$D(l,s),a=n?.[c],u=o?.[l],d=i?.[s],f=r?.merge||u?.merge||d?.merge||a?.merge;return f?WD(f):{rowStartIndex:l,rowEndIndex:l+1,columnStartIndex:s,columnEndIndex:s+1}}function VD(e,t){return LD(t=ts(t),{row(n){const o=e?.rows?.[n];if(o?.merge){const e={...t},n=WD(o.merge);t.columnStartIndex=Math.min(e.columnStartIndex,n.columnStartIndex),t.rowStartIndex=Math.min(e.rowStartIndex,n.rowStartIndex),t.columnEndIndex=Math.max(e.columnEndIndex,n.columnEndIndex),t.rowEndIndex=Math.max(e.rowEndIndex,n.rowEndIndex)}const i=e.defaultCell;if(i?.merge){const e=WD(i.merge);t.columnStartIndex=e.columnStartIndex,t.rowStartIndex=e.rowStartIndex,t.columnEndIndex=e.columnEndIndex,t.rowEndIndex=e.rowEndIndex}},column(n){const o=e?.columns?.[n];if(o?.merge){const e={...t},n=WD(o.merge);t.columnStartIndex=Math.min(e.columnStartIndex,n.columnStartIndex),t.rowStartIndex=Math.min(e.rowStartIndex,n.rowStartIndex),t.columnEndIndex=Math.max(e.columnEndIndex,n.columnEndIndex),t.rowEndIndex=Math.max(e.rowEndIndex,n.rowEndIndex)}const i=e.defaultCell;if(i?.merge){const e=WD(i.merge);t.columnStartIndex=e.columnStartIndex,t.rowStartIndex=e.rowStartIndex,t.columnEndIndex=e.columnEndIndex,t.rowEndIndex=e.rowEndIndex}},cell(n,o){const i=$D(n,o),r=e?.cells?.[i];if(r?.merge){const n={...t},o=WD(r.merge);t.columnStartIndex=Math.min(n.columnStartIndex,o.columnStartIndex),t.rowStartIndex=Math.min(n.rowStartIndex,o.rowStartIndex),t.columnEndIndex=Math.max(n.columnEndIndex,o.columnEndIndex),t.rowEndIndex=Math.max(n.rowEndIndex,o.rowEndIndex),t.columnStartIndex===n.columnStartIndex&&t.rowStartIndex===n.rowStartIndex&&t.columnEndIndex===n.columnEndIndex&&t.rowEndIndex===n.rowEndIndex||VD(e,t)}const l=e?.rows?.[n];if(l?.merge){const e={...t},n=WD(l.merge);t.columnStartIndex=Math.min(e.columnStartIndex,n.columnStartIndex),t.rowStartIndex=Math.min(e.rowStartIndex,n.rowStartIndex),t.columnEndIndex=Math.max(e.columnEndIndex,n.columnEndIndex),t.rowEndIndex=Math.max(e.rowEndIndex,n.rowEndIndex)}const s=e?.columns?.[o];if(s?.merge){const e={...t},n=WD(s.merge);t.columnStartIndex=Math.min(e.columnStartIndex,n.columnStartIndex),t.rowStartIndex=Math.min(e.rowStartIndex,n.rowStartIndex),t.columnEndIndex=Math.max(e.columnEndIndex,n.columnEndIndex),t.rowEndIndex=Math.max(e.rowEndIndex,n.rowEndIndex)}const c=e.defaultCell;if(c?.merge){const e=WD(c.merge);t.columnStartIndex=e.columnStartIndex,t.rowStartIndex=e.rowStartIndex,t.columnEndIndex=e.columnEndIndex,t.rowEndIndex=e.rowEndIndex}},infinite(){const n=e.defaultCell;if(n?.merge){const e=WD(n.merge);t.columnStartIndex=e.columnStartIndex,t.rowStartIndex=e.rowStartIndex,t.columnEndIndex=e.columnEndIndex,t.rowEndIndex=e.rowEndIndex}}}),t}function $D(e,t){return`${e}.${t}`}function ZD(e){const t=e.split(".");return{rowIndex:Number(t[0]),columnIndex:Number(t[1])}}function UD(e,t,n){if(void 0===n||t>n){const n=e.rows?.[t]?.style?.height;return void 0!==n?parseFloat(String(n)):e.rowDefaultSize}if(n===1/0)return e.scrollHeight-GD(e,t);let o=0;for(;t<n;)o+=UD(e,t++);return o}function qD(e,t,n){if(void 0===n||t>n){const n=e.columns?.[t]?.style?.width;return void 0!==n?parseFloat(String(n)):e.columnDefaultSize}if(n===1/0)return e.scrollWidth-XD(e,t);let o=0;for(;t<n;)o+=qD(e,t++);return o}function YD(e,t,n=0){const{freezeRange:o,columnStartIndex:i,columnStartDiff:r}=e;if(t+=n+(qD(e,i)-r),void 0!==o){let n=0;for(;n<o.columnEndIndex;){if((t-=qD(e,n))<=0)return n;n++}}let l=i;for(;t>0;){if((t-=qD(e,l))<=0)return l;l++}return l}function KD(e,t,n=0){const{freezeRange:o,rowStartIndex:i,rowStartDiff:r}=e;if(t+=n+(UD(e,i)-r),void 0!==o){let n=0;for(;n<o.rowEndIndex;){if((t-=UD(e,n))<=0)return n;n++}}let l=i;for(;t>0;){if((t-=UD(e,l))<=0)return l;l++}return l}function GD(e,t){const{freezeRange:n,rowStartIndex:o,rowStartDiff:i,scrollTop:r,scrollHeight:l}=e;if(t===1/0)return l-r;if(o>t)return UD(e,0,t);let s=0;t>=(n?.rowEndIndex??0)&&(s+=r-(UD(e,o)-i));let c=o;for(;c<t;)s+=UD(e,c),c++;for(;c>t;)s-=UD(e,c),c--;return s}function XD(e,t){const{freezeRange:n,columnStartIndex:o,columnStartDiff:i,scrollLeft:r,scrollWidth:l}=e;if(t===1/0)return l-r;if(o>t)return qD(e,0,t);let s=0;t>=(n?.columnEndIndex??0)&&(s+=r-(qD(e,o)-i));let c=o;for(;c<t;)s+=qD(e,c),c++;for(;c>t;)s-=qD(e,c),c--;return s}function JD(e){const t=e.scrollLeft/(e.scrollWidth-e.clientWidth);return isNaN(t)?1:Math.min(1,t)}function QD(e){const t=Math.max(1,e.scrollWidth/e.clientWidth);return Math.max(e.clientWidth/t,hw)}function eI(e,t,n,o=!0){const{onChange:i,value:r}=e.current;if(t>0){const l=Math.min(t,r.clientWidth);i(Md(_I(l,0))(r)),(t-=r.clientWidth)>0&&(n.current=requestAnimationFrame((()=>{eI(e,t,n,o)})))}else if(t<0){const l=Math.max(t,-r.clientWidth);i(Md(_I(l,0))(r)),(t+=r.clientWidth)<0&&(n.current=requestAnimationFrame((()=>{eI(e,t,n,o)})))}}function tI(e){return iI(e.value,e.value.indicatorRange)}function nI(e){const t=e.indicator?.previewIndicatorRange,n=iI(e.value,t);return e.indicator?.drag&&Ec(e.value.indicatorRange,t)&&(n.top+=1.5,n.left+=1.5,n.height-=3,n.width-=3),n}function oI(e){let t;const{selectedCoordinates:n}=e.value;return void 0!==n&&(t=zD(e.value,n)),iI(e.value,t)}function iI(e,t){const n={left:0,top:0,width:0,height:0};if(void 0===t)return n;return t.rowStartIndex>=e.rowStartIndex&&t.rowEndIndex<=e.rowEndIndex?(n.top=GD(e,t.rowStartIndex),n.height=UD(e,t.rowStartIndex,t.rowEndIndex)):t.rowStartIndex<e.rowStartIndex&&t.rowEndIndex>e.rowEndIndex?(n.top=GD(e,e.rowStartIndex)-6,n.height=UD(e,e.rowStartIndex,e.rowEndIndex)+12):t.rowEndIndex>=e.rowStartIndex&&t.rowEndIndex<=e.rowEndIndex&&t.rowStartIndex<=e.rowStartIndex?(n.top=GD(e,e.rowStartIndex)-6,n.height=UD(e,e.rowStartIndex,t.rowEndIndex)+6):t.rowStartIndex<=e.rowEndIndex&&t.rowStartIndex>=e.rowStartIndex&&t.rowEndIndex>=e.rowEndIndex&&(n.top=GD(e,t.rowStartIndex),n.height=UD(e,t.rowStartIndex,e.rowEndIndex)+6),t.columnStartIndex>=e.columnStartIndex&&t.columnEndIndex<=e.columnEndIndex?(n.left=XD(e,t.columnStartIndex),n.width=qD(e,t.columnStartIndex,t.columnEndIndex)):t.columnStartIndex<e.columnStartIndex&&t.columnEndIndex>e.columnEndIndex?(n.left=XD(e,e.columnStartIndex)-6,n.width=qD(e,e.columnStartIndex,e.columnEndIndex)+12):t.columnEndIndex>=e.columnStartIndex&&t.columnEndIndex<=e.columnEndIndex&&t.columnStartIndex<=e.columnStartIndex?(n.left=XD(e,e.columnStartIndex)-6,n.width=qD(e,e.columnStartIndex,t.columnEndIndex)+6):t.columnStartIndex<=e.columnEndIndex&&t.columnStartIndex>=e.columnStartIndex&&t.columnEndIndex>=e.columnEndIndex&&(n.left=XD(e,t.columnStartIndex),n.width=qD(e,t.columnStartIndex,e.columnEndIndex)+6),t.columnEndIndex===1/0&&(n.width=e.scrollWidth),t.rowEndIndex===1/0&&(n.height=e.scrollHeight),n}const rI={cut:Mf?"⌘+X":"Ctrl+X",copy:Mf?"⌘+C":"Ctrl+C",paste:Mf?"⌘+V":"Ctrl+V",selectAll:Mf?"⌘+A":"Ctrl+A",selectCurrentRow:Mf?"⇧+Space":"Ctrl+Shift+Space",selectCurrentColumn:Mf?"⌥+Space":"Ctrl+Alt+Space",addOneRowToTop:Mf?"⌥+⇧+=":"Alt+Shift+=",addOneRowToBottom:Mf?"⌥+⇧+]":"Alt+Shift+]",addOneColumnToLeft:Mf?"⌘+⌥+=":"Ctrl+Alt+=",addOneColumnToRight:Mf?"⌘+⌥+]":"Ctrl+Alt+]",deleteCurrentRow:Mf?"⌥+⇧+-":"Alt+Shift+-",deleteCurrentColumn:Mf?"⌘+⌥+-":"Ctrl+Alt+-",merge:Mf?"⌥+⇧+D":"Alt+Shift+D",expandBackward:Mf?"⇧+←":"Shift+←",expandForward:Mf?"⇧+→":"Shift+→",expandUp:Mf?"⇧+↑":"Shift+↑",expandDown:Mf?"⇧+↓":"Shift+↓",backspace:"backspace",moveBackward:"←",moveForward:"→",moveUp:"↑",moveDown:"↓"},lI=Hs(eh)(rI.cut),sI=Hs(eh)(rI.copy),cI=Hs(th)(rI.paste),aI=Hs(eh)(rI.selectAll),uI=Hs(eh)(rI.selectCurrentRow),dI=Hs(eh)(rI.selectCurrentColumn),fI=Hs(eh)(rI.addOneRowToTop),hI=Hs(eh)(rI.addOneRowToBottom),pI=Hs(eh)(rI.addOneColumnToLeft),vI=Hs(eh)(rI.addOneColumnToRight),gI=Hs(eh)(rI.deleteCurrentRow),mI=Hs(eh)(rI.deleteCurrentColumn),yI=Hs(eh)(rI.merge),bI=Hs(eh)(rI.backspace),CI=Hs(eh)(rI.moveBackward),wI=Hs(eh)(rI.moveForward),xI=Hs(eh)(rI.moveUp),SI=Hs(eh)(rI.moveDown),EI=Hs(eh)(rI.expandBackward),kI=Hs(eh)(rI.expandForward),DI=Hs(eh)(rI.expandUp),II=Hs(eh)(rI.expandDown),NI=e=>{const{value:{clientHeight:t,scrollHeight:n,clientWidth:o,scrollWidth:i},scroller:r}=e,l={borderStyle:"solid",borderWidth:0};!1===e.border&&e.value.indicatorRange&&(l.borderStyle="dashed");let s="unset";return"native"===r?s="auto":(n>t||i>o)&&(s="hidden"),{...eD,width:o,height:t,...e.style,...l,overflow:s}},LI=e=>{const{value:{scrollWidth:t,scrollHeight:n,defaultCell:o},scroller:i}=e,r={...tD,...e.style,...o?.style,width:t,height:n};return"native"===i?r.overflow="hidden":Object.assign(r,AI(e)),r},BI=e=>{const{value:{scrollWidth:t,scrollHeight:n}}=e;return{...cD,width:t,height:n}};function TI(e){return e.borderTopWidth||e.borderRightWidth||e.borderBottomWidth||e.borderLeftWidth}function AI(e){const{value:{scrollLeft:t,scrollTop:n},scroller:o}=e;return"native"===o?{}:{transform:`translate3d(-${t}px, -${n}px, 0)`}}const MI=Vs(((e,t)=>{const{value:n,onChange:o}=e.current;o(Md(HI(t))(n))}),32);const OI=e=>t=>(t.scrollHeight=Math.max(e,0),t),RI=e=>t=>(t.scrollWidth=Math.max(e,0),t),PI=e=>t=>(t.clientHeight=Math.max(e,0),t),FI=e=>t=>(t.clientWidth=Math.max(e,0),t),HI=e=>t=>(t.isScrolling=e||void 0,t),_I=(e,t)=>n=>(n.scrollLeft+e<0&&(e=-n.scrollLeft),n.scrollTop+t<0&&(t=-n.scrollTop),n.scrollLeft+e>n.scrollWidth-n.clientWidth&&(e=n.scrollWidth-n.clientWidth-n.scrollLeft),n.scrollTop+t>n.scrollHeight-n.clientHeight&&(t=n.scrollHeight-n.clientHeight-n.scrollTop),n.scrollLeft+=e,n.scrollTop+=t,n.columnStartDiff-=e,n.columnEndDiff-=e,n.rowStartDiff-=t,n.rowEndDiff-=t,n=jI()(n),n=WI()(n)),jI=()=>e=>{let t=qD(e,e.columnStartIndex),n=qD(e,e.columnEndIndex);if(e.columnStartDiff<0)do{const t=e.columnStartIndex+1,n=qD(e,t);e.columnStartIndex=t,e.columnStartDiff+=n}while(e.columnStartDiff<0);else if(e.columnStartDiff>t)do{const n=e.columnStartIndex-1,o=qD(e,e.columnStartIndex);if(-1===n){e.columnStartDiff=o;break}t=o,e.columnStartIndex=n,e.columnStartDiff-=o}while(e.columnStartDiff>t);if(e.columnEndDiff<0)do{const t=e.columnEndIndex+1,n=qD(e,t);e.columnEndIndex=t,e.columnEndDiff+=n}while(e.columnEndDiff<0);else if(e.columnEndDiff>n)do{const t=e.columnEndIndex-1,o=qD(e,e.columnEndIndex);if(-1===t){e.columnEndDiff=o;break}n=o,e.columnEndIndex=t,e.columnEndDiff-=o}while(e.columnEndDiff>n);return e=zI()(e)},WI=()=>e=>{let t=UD(e,e.rowStartIndex),n=UD(e,e.rowEndIndex);if(e.rowStartDiff<0)do{const t=e.rowStartIndex+1,n=UD(e,t);e.rowStartIndex=t,e.rowStartDiff+=n}while(e.rowStartDiff<0);else if(e.rowStartDiff>t)do{const n=e.rowStartIndex-1,o=UD(e,e.rowStartIndex);-1===n&&(e.rowStartDiff=o),t=o,e.rowStartIndex=n,e.rowStartDiff-=o}while(e.rowStartDiff>t);if(e.rowEndDiff<0)do{const t=e.rowEndIndex+1,n=UD(e,t);e.rowEndIndex=t,e.rowEndDiff+=n}while(e.rowEndDiff<0);else if(e.rowEndDiff>n)do{const t=e.rowEndIndex-1,o=UD(e,e.rowEndIndex);-1===t&&(e.rowEndDiff=o),n=o,e.rowEndIndex=t,e.rowEndDiff-=o}while(e.rowEndDiff>n);return e=zI()(e)},zI=()=>e=>{const{columnEndIndex:t,rowEndIndex:n,columnTotalNumber:o,rowTotalNumber:i}=e;return t>o&&(e.columnEndIndex=o),n>i&&(e.rowEndIndex=i),e},VI=(e,t)=>n=>{const o=KD(n,t),i=YD(n,e),r=VD(n,{rowStartIndex:o,rowEndIndex:o+1,columnStartIndex:i,columnEndIndex:i+1}),l={rowIndex:r.rowStartIndex,columnIndex:r.columnStartIndex};return n=ZI(r)(n),n=UI(l)(n)},$I=(e,t)=>n=>{const o=KD(n,t),i=YD(n,e),r=n.selectedCoordinates?.rowIndex??0,l=n.selectedCoordinates?.columnIndex??0;return n.indicatorRange=VD(n,{rowStartIndex:Math.min(r,o),rowEndIndex:Math.max(r,o)+1,columnStartIndex:Math.min(l,i),columnEndIndex:Math.max(l,i)+1}),n.indicatorRange.columnEndIndex=Math.min(n.indicatorRange.columnEndIndex,n.columnTotalNumber),n.indicatorRange.rowEndIndex=Math.min(n.indicatorRange.rowEndIndex,n.rowTotalNumber),n},ZI=e=>t=>(void 0===t.indicatorRange?t.indicatorRange={...e}:Object.assign(t.indicatorRange,e),t),UI=e=>t=>(void 0===t.selectedCoordinates?t.selectedCoordinates={...e}:Object.assign(t.selectedCoordinates,e),t),qI=(e,t)=>n=>(void 0===n.indicatorRange||(e>0?n.indicatorRange.columnEndIndex=n.columnEndIndex:e<0&&(n.indicatorRange.columnStartIndex=n.columnStartIndex),t>0?n.indicatorRange.rowEndIndex=n.rowEndIndex:t<0&&(n.indicatorRange.rowStartIndex=n.rowStartIndex)),n),YI=e=>t=>(void 0===t.rows&&(t.rows={}),void 0===t.rows[e]&&(t.rows[e]={}),t),KI=(e,t)=>n=>(void 0===(n=YI(e)(n)).rows[e].style&&(n.rows[e].style=t??{}),n),GI=e=>t=>(void 0===t.columns&&(t.columns={}),void 0===t.columns[e]&&(t.columns[e]={}),t),XI=(e,t)=>n=>(void 0===(n=GI(e)(n)).columns[e].style&&(n.columns[e].style=t??{}),n),JI=(e,t)=>n=>{const o=$D(e,t);return void 0===n.cells&&(n.cells={}),void 0===n.cells[o]&&(n.cells[o]={}),n},QI=(e,t,n)=>o=>{o=JI(e,t)(o);const i=$D(e,t);return void 0===o.cells[i].style&&(o.cells[i].style=n??{}),o},eN=()=>e=>(void 0===e.defaultCell&&(e.defaultCell={}),e),tN=e=>t=>(t=(e=>(void 0===e.defaultCell&&(e.defaultCell={}),e))(t),void 0===t.defaultCell?.style&&(t.defaultCell.style=e??{}),t),nN=(e,t)=>n=>{n=KI(t)(n);const o=n.rows?.[t]?.style;if(void 0===o)return n;if(e<0&&(e=0),o.minHeight){const t=parseFloat(String(o.minHeight));e<t&&(e=t)}const i=UD(n,t);o.height=e;const r=e-i;t===n.rowStartIndex&&(n.rowStartDiff+=r),n.scrollHeight>n.clientHeight&&(n.rowEndDiff+=r,n=WI()(n));const l=n.scrollHeight+r;return(n=OI(l)(n)).clientHeight>l&&(n=PI(l)(n)),o.height===n.rowDefaultSize&&delete o.height,n},oN=(e,t)=>n=>{n=XI(t)(n);const o=n.columns?.[t]?.style;if(void 0===o)return n;if(e<0&&(e=0),o.minWidth){const t=parseFloat(String(o.minWidth));e<t&&(e=t)}const i=qD(n,t);o.width=e;const r=e-i;t===n.columnStartIndex&&(n.columnStartDiff+=r),n.scrollWidth>n.clientWidth&&(n.columnEndDiff+=r,n=jI()(n));const l=n.scrollWidth+r;return(n=RI(l)(n)).clientWidth>l&&(n=FI(l)(n)),o.width===n.columnDefaultSize&&delete o.width,n},iN=(e,t)=>n=>{n=KI(t)(n);const o=n.rows?.[t]?.style;return void 0===o||(e<0&&(e=0),o.minHeight=e),n},rN=(e,t)=>n=>{n=XI(t)(n);const o=n.columns?.[t]?.style;return void 0===o||(e<0&&(e=0),o.minWidth=e),n},lN=e=>t=>{if(void 0===t.cells)return t;let n=t.rowDefaultSize;for(const o in t.cells){const{rowIndex:i}=ZD(o);if(i===e){const e=t.cells[o],i=e.style?.height;i&&Number(i)>n&&(n=parseFloat(String(i)))}}return t=nN(n,e)(t)},sN=e=>t=>{if(void 0===t.cells)return t;let n=t.columnDefaultSize;for(const o in t.cells){const{columnIndex:i}=ZD(o);if(i===e){const e=t.cells[o],i=e.style?.width;i&&Number(i)>n&&(n=parseFloat(String(i)))}}return t=oN(n,e)(t)},cN=e=>t=>(LD(e,{row(e){t.rows?.[e]?.style?.height||(t=lN(e)(t))},column(e){t.columns?.[e]?.style?.width||(t=sN(e)(t))},cell(e,n){t.rows?.[e]?.style?.height||(t=lN(e)(t)),t.columns?.[n]?.style?.width||(t=sN(n)(t))},infinite(){}}),t),aN=(e,t,n)=>o=>{if(e===1/0&&t!==1/0)return o=XI(t)(o),Object.assign(o.columns[t].style,n),o;if(t===1/0&&e!==1/0)return o=KI(e)(o),Object.assign(o.rows[e].style,n),o;if(e===1/0&&t===1/0)return o=tN()(o),Object.assign(o.defaultCell.style,n),o;o=QI(e,t)(o);const i=$D(e,t);return Object.assign(o.cells[i].style,n),uN(e,t)(o)},uN=(e,t)=>n=>{if(e===1/0&&t!==1/0){if(void 0===n.columns)return n;const e=n.columns[t];if(void 0===e)return n;if(void 0===e.style)return n;for(const t in e.style){const o=t;e.style[o]===n.defaultCell?.style?.[o]&&delete e.style[o]}return n}if(t===1/0&&e!==1/0){if(void 0===n.rows)return n;const t=n.rows[e];if(void 0===t)return n;if(void 0===t.style)return n;for(const e in t.style){const o=e;t.style[o]===n.defaultCell?.style?.[o]&&delete t.style[o]}return n}if(e===1/0&&t===1/0)return n;const o=$D(e,t);if(void 0===n.cells)return n;if(void 0===n.cells[o])return n;const i=n.cells[o].style;if(void 0===i)return n;for(const o in i){const r=o;if("height"===r||"width"===r)continue;const l=n.columns?.[t]?.style,s=n.rows?.[e]?.style;i[r]===l?.[r]&&delete i[r],i[r]===s?.[r]&&delete i[r],i[r]===n.defaultCell?.style?.[r]&&delete i[r]}return n},dN=(e,t,n)=>o=>{if(e===1/0&&t!==1/0){if(void 0===o.columns)return o;const e=o.columns[t];if(void 0===e)return o;if(void 0===e.style)return o;for(const t in n)e.style[t]&&delete e.style[t];return o}if(t===1/0&&e!==1/0){if(void 0===o.rows)return o;const t=o.rows[e];if(void 0===t)return o;if(void 0===t.style)return o;for(const e in n)t.style[e]&&delete t.style[e];return o}if(e===1/0&&t===1/0){if(void 0===o.defaultCell?.style)return o;const e=o.defaultCell.style;for(const t in n)e[t]&&delete e[t];return o}const i=$D(e,t);if(void 0===o.cells)return o;if(void 0===o.cells[i])return o;const r=o.cells[i].style;if(void 0===r)return o;for(const e in n)r[e]&&delete r[e];return o},fN=e=>t=>{if(void 0!==t.rows)for(const n in t.rows)t=dN(Number(n),1/0,e)(t);if(void 0!==t.columns)for(const n in t.columns)t=dN(1/0,Number(n),e)(t);if(void 0!==t.cells)for(const n in t.cells){const{rowIndex:o,columnIndex:i}=ZD(n);t=dN(o,i,e)(t)}return t},hN=()=>e=>{e.columnEndIndex=e.columnStartIndex;let t=e.columnStartDiff-qD(e,e.columnStartIndex);for(;t<e.clientWidth;)t+=qD(e,e.columnEndIndex++);return e.columnEndDiff=t-e.clientWidth,e},pN=()=>e=>{e.rowEndIndex=e.rowStartIndex;let t=e.rowStartDiff-UD(e,e.rowStartIndex);for(;t<e.clientHeight;)t+=UD(e,e.rowEndIndex++);return e.rowEndDiff=t-e.clientHeight,e},vN=()=>e=>(e.indicatorRange={rowStartIndex:0,rowEndIndex:1/0,columnStartIndex:0,columnEndIndex:1/0},e.selectedCoordinates={rowIndex:e.selectedCoordinates?.rowIndex??0,columnIndex:e.selectedCoordinates?.columnIndex??0},e),gN=(e,t)=>n=>(n.indicatorRange={rowStartIndex:e,rowEndIndex:t,columnStartIndex:0,columnEndIndex:1/0},n.selectedCoordinates={rowIndex:e,columnIndex:n.selectedCoordinates?.columnIndex??0},n),mN=(e,t)=>n=>(n.indicatorRange={rowStartIndex:0,rowEndIndex:1/0,columnStartIndex:e,columnEndIndex:t},n.selectedCoordinates={rowIndex:n.selectedCoordinates?.rowIndex??0,columnIndex:e},n),yN=(e,t,n=1)=>o=>{const{moveCell:i}=e;if(o.rowEndIndex+=n,o.rowTotalNumber+=n,o.scrollHeight+=o.rowDefaultSize*n,o.rows){const e=Object.keys(o.rows);for(let i=e.length-1;i>=0;i--){const r=Number(e[i]);if(r>=t){const e=o.rows[r];if(e.merge){const t=WD(e.merge);t.rowStartIndex+=n,t.rowEndIndex+=n,e.merge=jD(t)}o.rows[r+n]=e,delete o.rows[r]}}}if(o.cells){const e=Object.keys(o.cells).sort(((e,t)=>ZD(e).rowIndex-ZD(t).rowIndex));for(let r=e.length-1;r>=0;r--){const l=ZD(e[r]);if(l.rowIndex>=t){const t=$D(l.rowIndex+n,l.columnIndex),s=o.cells[e[r]];if(s.merge){const e=WD(s.merge);e.rowStartIndex+=n,e.rowEndIndex+=n,s.merge=jD(e)}const c=o.cells[t];i?.(s,c),o.cells[t]=s,delete o.cells[e[r]]}}}if(o.indicatorRange){const{rowStartIndex:e,rowEndIndex:i}=o.indicatorRange;t<=e&&i!==1/0&&(o.indicatorRange.rowStartIndex+=n,o.indicatorRange.rowEndIndex+=n)}if(o.selectedCoordinates){const{rowIndex:e}=o.selectedCoordinates;t<=e&&(o.selectedCoordinates.rowIndex+=n)}return pN()(o)},bN=(e,t,n=1)=>o=>{const{moveCell:i}=e;if(o.columnEndIndex+=n,o.columnTotalNumber+=n,o.scrollWidth+=o.columnDefaultSize*n,o.columns){const e=Object.keys(o.columns);for(let i=e.length-1;i>=0;i--){const r=Number(e[i]);if(r>=t){const e=o.columns[r];if(e.merge){const t=WD(e.merge);t.columnStartIndex+=n,t.columnEndIndex+=n,e.merge=jD(t)}o.columns[r+n]=e,delete o.columns[r]}}}if(o.cells){const e=Object.keys(o.cells).sort(((e,t)=>ZD(e).columnIndex-ZD(t).columnIndex));for(let r=e.length-1;r>=0;r--){const l=ZD(e[r]);if(l.columnIndex>=t){const t=$D(l.rowIndex,l.columnIndex+n),s=o.cells[e[r]];if(s.merge){const e=WD(s.merge);e.columnStartIndex+=n,e.columnEndIndex+=n,s.merge=jD(e)}const c=o.cells[t];i?.(s,c),o.cells[t]=s,delete o.cells[e[r]]}}}if(o.indicatorRange){const{columnStartIndex:e,columnEndIndex:i}=o.indicatorRange;t<=e&&i!==1/0&&(o.indicatorRange.columnStartIndex+=n,o.indicatorRange.columnEndIndex+=n)}if(o.selectedCoordinates){const{columnIndex:e}=o.selectedCoordinates;t<=e&&(o.selectedCoordinates.columnIndex+=n)}return hN()(o)},CN=(e,t,n)=>o=>{const{deleteCell:i}=e,r=n-t;if(r===1/0)return o.rowStartIndex=0,o.rowEndIndex=0,o.scrollHeight=0,delete o.rows,o;const l=UD(o,t,n),s=o.scrollHeight-o.scrollTop-o.clientHeight;if(o.scrollTop>0&&s-l<0&&o.scrollHeight>o.clientHeight)return o=_I(0,s-l)(o),o=CN(e,t,n)(o);if(o.rowEndIndex-=r,o.rowTotalNumber-=r,o.scrollHeight-=l,o.scrollHeight<o.clientHeight&&(o.clientHeight=o.scrollHeight),o.rows){const e=Object.keys(o.rows);for(let i=0;i<e.length;i++){const l=Number(e[i]);if(l>=t&&l<n)delete o.rows[l];else if(l>=n){const e=o.rows[l];if(e.merge){const t=WD(e.merge);t.rowStartIndex-=r,t.rowEndIndex-=r,e.merge=jD(t)}o.rows[l-r]=e,delete o.rows[l]}}}if(o.cells){const e=Object.keys(o.cells).sort(((e,t)=>ZD(e).rowIndex-ZD(t).rowIndex));for(let l=0;l<e.length;l++){const{rowIndex:s,columnIndex:c}=ZD(e[l]);if(s>=t&&s<n)i?.(o.cells[e[l]]),delete o.cells[e[l]];else if(s>=n){const t=$D(s-r,c),n=o.cells[e[l]];if(n.merge){const e=WD(n.merge);e.rowStartIndex-=r,e.rowEndIndex-=r,n.merge=jD(e)}o.cells[t]=n,i?.(n),delete o.cells[e[l]]}}}return void 0!==o.indicatorRange&&(o.indicatorRange.rowEndIndex>o.rowEndIndex&&(o.indicatorRange.rowEndIndex=o.rowEndIndex),o.indicatorRange.rowStartIndex>=o.indicatorRange.rowEndIndex&&(o.indicatorRange.rowStartIndex=Math.max(0,o.rowEndIndex-1))),void 0!==o.selectedCoordinates&&o.selectedCoordinates.rowIndex>=o.rowEndIndex&&(o.selectedCoordinates.rowIndex=Math.max(0,o.rowEndIndex-1)),pN()(o)},wN=(e,t,n)=>o=>{const{deleteCell:i}=e,r=n-t;if(r===1/0)return o.columnStartIndex=0,o.columnEndIndex=0,o.scrollWidth=0,delete o.columns,o;const l=qD(o,t,n),s=o.scrollWidth-o.scrollLeft-o.clientWidth;if(o.scrollLeft>0&&s-l<0&&o.scrollWidth>o.clientWidth)return o=_I(s-l,0)(o),o=wN(e,t,n)(o);if(o.columnEndIndex-=r,o.columnTotalNumber-=r,o.scrollWidth-=l,o.scrollWidth<o.clientWidth&&(o.clientWidth=o.scrollWidth),o.columns){const e=Object.keys(o.columns);for(let i=0;i<e.length;i++){const l=Number(e[i]);if(l>=t&&l<n)delete o.columns[l];else if(l>=n){const e=o.columns[l];if(e.merge){const t=WD(e.merge);t.columnStartIndex-=r,t.columnEndIndex-=r,e.merge=jD(t)}o.columns[l-r]=e,delete o.columns[l]}}}if(o.cells){const e=Object.keys(o.cells).sort(((e,t)=>ZD(e).columnIndex-ZD(t).columnIndex));for(let l=0;l<e.length;l++){const{columnIndex:s,rowIndex:c}=ZD(e[l]);if(s>=t&&s<n)i?.(o.cells[e[l]]),delete o.cells[e[l]];else if(s>=n){const t=$D(c,s-r),n=o.cells[e[l]];if(n.merge){const e=WD(n.merge);e.columnStartIndex-=r,e.columnEndIndex-=r,n.merge=jD(e)}o.cells[t]=n,i?.(n),delete o.cells[e[l]]}}}return void 0!==o.indicatorRange&&(o.indicatorRange.columnEndIndex>o.columnEndIndex&&(o.indicatorRange.columnEndIndex=o.columnEndIndex),o.indicatorRange.columnStartIndex>=o.indicatorRange.columnEndIndex&&(o.indicatorRange.columnStartIndex=Math.max(0,o.columnEndIndex-1))),void 0!==o.selectedCoordinates&&o.selectedCoordinates.columnIndex>=o.columnEndIndex&&(o.selectedCoordinates.columnIndex=Math.max(0,o.columnEndIndex-1)),hN()(o)},xN=(e,t,n)=>o=>{if(void 0===(o=JI(e,t)(o)).cells)return o;const i=$D(e,t),r=o.cells[i];return r?Object.assign(r,n):o.cells[i]=n,o},SN=(e,t,n)=>o=>{const i=$D(e,t),r=o?.cells?.[i];if(void 0===r)return o;for(let e in n)delete r[e];return o},EN=(e,t)=>n=>{if(void 0===(n=YI(e)(n)).rows)return n;const o=n.rows[e];return o?Object.assign(o,t):n.rows[e]=t,n},kN=(e,t)=>n=>{const o=n?.rows?.[e];if(void 0===o)return n;for(let e in t)delete o[e];return n},DN=(e,t)=>n=>{if(void 0===(n=GI(e)(n)).columns)return n;const o=n.columns[e];return o?Object.assign(o,t):n.columns[e]=t,n},IN=(e,t)=>n=>{const o=n?.columns?.[e];if(void 0===o)return n;for(let e in t)delete o[e];return n},NN=e=>t=>(void 0===(t=(e=>(void 0===e.defaultCell&&(e.defaultCell={}),e))(t)).defaultCell||Object.assign(t.defaultCell,e),t),LN=e=>t=>{if(void 0===t.defaultCell)return t;for(let n in e)delete t.defaultCell[n];return t},BN=e=>t=>(void 0===t.indicatorRange||LD(t.indicatorRange,{row(n){t=EN(n,e)(t)},column(n){t=DN(n,e)(t)},cell(n,o){t=xN(n,o,e)(t)},infinite(){t=NN(e)(t)}}),t),TN=e=>t=>(void 0===t.indicatorRange||LD(t.indicatorRange,{row(n){t=kN(n,e)(t)},column(n){t=IN(n,e)(t)},cell(n,o){t=SN(n,o,e)(t)},infinite(){t=LN(e)(t)}}),t),AN=e=>t=>{if(void 0===e)return t;return _D(t,e)?ON(e)(t):MN(e)(t)},MN=e=>t=>{if(void 0===e)return t;if(PD(e))return t;const n=jD(e);t=BN({merge:n})(t);const{rowStartIndex:o,columnStartIndex:i}=e;return t.selectedCoordinates={rowIndex:o,columnIndex:i},t},ON=e=>t=>{if(void 0===e)return t;const n=jD(e);t=TN({merge:n})(t);const{rowStartIndex:o,columnStartIndex:i}=e;return t.selectedCoordinates={rowIndex:o,columnIndex:i},t},RN=(e,t)=>n=>{if(!t||!n.cells)return n;const{deleteCell:o}=e;function i(e,t){const i=$D(e,t),r=n.cells?.[i];r&&(o?.(r),delete n.cells[i])}return LD(t,{cell(e,t){i(e,t)},row(e){for(const t in n.cells){const n=ZD(t);n.rowIndex===e&&i(n.rowIndex,n.columnIndex)}},column(e){for(const t in n.cells){const n=ZD(t);n.columnIndex===e&&i(n.rowIndex,n.columnIndex)}},infinite(){for(const e in n.cells){const t=ZD(e);i(t.rowIndex,t.columnIndex)}}}),Sc(n.cells)&&delete n.cells,n},PN=(e,t)=>n=>{if(!n.indicatorRange||!n.cells)return n;const{moveCell:o}=e,{rowStartIndex:i,rowEndIndex:r,columnStartIndex:l,columnEndIndex:s}=n.indicatorRange,c=t.rowStartIndex-i,a=t.columnStartIndex-l;function u(e,t){if(!n.cells)return;const i=$D(e,t),r=n.cells[i],l=$D(e+c,t+a),s=n.cells[l];if(s?.merge){const e=s.merge,t={merge:e};LD(WD(e),{row(e){n=kN(e,t)(n)},column(e){n=IN(e,t)(n)},cell(e,o){n=SN(e,o,t)(n)},infinite(){n=LN(t)(n)}})}if(!n.cells)return;const u=o?.(r,s);if(delete n.cells[i],delete n.cells[l],r&&(n.cells[l]=u??r,r.merge)){const e=WD(r.merge),t=jD({rowStartIndex:e.rowStartIndex+c,rowEndIndex:e.rowEndIndex+c,columnStartIndex:e.columnStartIndex+a,columnEndIndex:e.columnEndIndex+a});n.cells[l].merge=t}}function d(e){if(n.rows?.[e]){const t=e+c,o=n.rows[e];if(delete n.rows[e],delete n.rows[t],o&&(n.rows[t]=o,o.merge)){const e=WD(o.merge),i=jD({rowStartIndex:e.rowStartIndex+c,rowEndIndex:e.rowEndIndex+c,columnStartIndex:e.columnStartIndex+a,columnEndIndex:e.columnEndIndex+a});n.rows[t].merge=i}}for(const t in n.cells){const{rowIndex:n,columnIndex:o}=ZD(t);n===e&&u(n,o)}}function f(e){if(n.columns?.[e]){const t=e+a,o=n.columns[e];if(delete n.columns[e],delete n.columns[t],o&&(n.columns[t]=o,o.merge)){const e=WD(o.merge),i=jD({rowStartIndex:e.rowStartIndex+c,rowEndIndex:e.rowEndIndex+c,columnStartIndex:e.columnStartIndex+a,columnEndIndex:e.columnEndIndex+a});n.columns[t].merge=i}}for(const t in n.cells){const{rowIndex:n,columnIndex:o}=ZD(t);o===e&&u(n,o)}}if(r!==1/0&&s!==1/0){if(c>=0&&a>=0)for(let e=r-1;e>=i;e--)for(let t=s-1;t>=l;t--)u(e,t);else if(c>=0&&a<=0)for(let e=r-1;e>=i;e--)for(let t=l;t<s;t++)u(e,t);else if(c<=0&&a>=0)for(let e=i;e<r;e++)for(let t=s-1;t>=l;t--)u(e,t);else if(c<=0&&a<=0)for(let e=i;e<r;e++)for(let t=l;t<s;t++)u(e,t)}else if(r!==1/0&&s===1/0){if(c>=0)for(let e=r-1;e>=i;e--)d(e);else if(c<=0)for(let e=i;e<r;e++)d(e)}else if(r===1/0&&s!==1/0)if(a>=0)for(let e=s-1;e>=l;e--)f(e);else if(a<=0)for(let e=l;e<s;e++)f(e);return n=cN(n.indicatorRange)(n),n=cN(t)(n)},FN=(e,t)=>n=>{if(!n.indicatorRange||!n.cells)return n;const{cloneCell:o,deleteCell:i}=e,{rowStartIndex:r,rowEndIndex:l,columnStartIndex:s,columnEndIndex:c}=n.indicatorRange;if(r===t.rowStartIndex&&l===t.rowEndIndex){if(s===t.columnStartIndex){if(c<t.columnEndIndex){const e=c-s;for(let a=c;a<t.columnEndIndex;a++){const t=s+(a-c)%e;if(l!==1/0)for(let s=r;s<l;s++){const r=$D(s,t),l=$D(s,a),c=n.cells[r];if(c&&(i?.(n.cells[l]),n.cells[l]=o?.(c,l)||ts(c),c.merge)){const t=WD(c.merge),o=jD({rowStartIndex:t.rowStartIndex,rowEndIndex:t.rowEndIndex,columnStartIndex:t.columnStartIndex+e,columnEndIndex:t.columnEndIndex+e});n.cells[l].merge=o}}else{const e=Object.keys(n.cells);let r=0;for(;r<e.length;){const l=e[r],{rowIndex:s,columnIndex:c}=ZD(l);if(c===t){const e=$D(s,a);let t=n.cells[l];t&&(i?.(n.cells[e]),n.cells[e]=o?.(t,e)||ts(t))}r++}}}}else if(c>t.columnEndIndex)for(let e=t.columnEndIndex;e<c;e++)if(l!==1/0)for(let t=r;t<l;t++){const o=$D(t,e);i?.(n.cells[o]),delete n.cells[o]}else{const t=Object.keys(n.cells);let o=0;for(;o<t.length;){const r=t[o],{columnIndex:l}=ZD(r);l===e&&(i?.(n.cells[r]),delete n.cells[r]),o++}}}else if(c===t.columnEndIndex)if(s<t.columnStartIndex)for(let e=s;e<t.columnStartIndex;e++)if(l!==1/0)for(let t=r;t<l;t++){const o=$D(t,e);i?.(n.cells[o]),delete n.cells[o]}else{const t=Object.keys(n.cells);let o=0;for(;o<t.length;){const r=t[o],{columnIndex:l}=ZD(r);l===e&&(i?.(n.cells[r]),delete n.cells[r]),o++}}else if(s>t.columnStartIndex){const e=c-s;for(let a=s-1;a>=t.columnStartIndex;a--){const t=c-1-(s-1-a)%e;if(l!==1/0)for(let s=r;s<l;s++){const r=$D(s,t),l=$D(s,a),c=n.cells[r];if(c&&(i?.(n.cells[l]),n.cells[l]=o?.(c,l)||ts(c),c.merge)){const t=WD(c.merge),o=jD({rowStartIndex:t.rowStartIndex,rowEndIndex:t.rowEndIndex,columnStartIndex:t.columnStartIndex-e,columnEndIndex:t.columnEndIndex-e});n.cells[l].merge=o}}else{const e=Object.keys(n.cells);let r=0;for(;r<e.length;){const l=e[r],{rowIndex:s,columnIndex:c}=ZD(l);if(c===t){const e=$D(s,a);let t=n.cells[l];t&&(i?.(n.cells[e]),n.cells[e]=o?.(t,e)||ts(t))}r++}}}}}else if(s===t.columnStartIndex&&c===t.columnEndIndex)if(r===t.rowStartIndex){if(l<t.rowEndIndex){const e=l-r;for(let a=l;a<t.rowEndIndex;a++){const t=r+(a-l)%e;if(c!==1/0)for(let r=s;r<c;r++){const l=$D(t,r),s=$D(a,r),c=n.cells[l];if(c&&(i?.(n.cells[s]),n.cells[s]=o?.(c,s)||ts(c),c.merge)){const t=WD(c.merge),o=jD({rowStartIndex:t.rowStartIndex+e,rowEndIndex:t.rowEndIndex+e,columnStartIndex:t.columnStartIndex,columnEndIndex:t.columnEndIndex});n.cells[s].merge=o}}else{const e=Object.keys(n.cells);let r=0;for(;r<e.length;){const l=e[r],{rowIndex:s,columnIndex:c}=ZD(l);if(s===t){const e=$D(a,c);let t=n.cells[l];t&&(i?.(n.cells[e]),n.cells[e]=o?.(t,e)||ts(t))}r++}}}}else if(l>t.rowEndIndex)for(let e=t.rowEndIndex;e<l;e++)if(c!==1/0)for(let t=s;t<c;t++){const o=$D(e,t);i?.(n.cells[o]),delete n.cells[o]}else{const t=Object.keys(n.cells);let o=0;for(;o<t.length;){const r=t[o],{rowIndex:l}=ZD(r);l===e&&(i?.(n.cells[r]),delete n.cells[r]),o++}}}else if(l===t.rowEndIndex)if(r<t.rowStartIndex)for(let e=r;e<t.rowStartIndex;e++)if(c!==1/0)for(let t=s;t<c;t++){const o=$D(e,t);i?.(n.cells[o]),delete n.cells[o]}else{const t=Object.keys(n.cells);let o=0;for(;o<t.length;){const r=t[o],{rowIndex:l}=ZD(r);l===e&&(i?.(n.cells[r]),delete n.cells[r]),o++}}else if(r>t.rowStartIndex){const e=l-r;for(let a=r-1;a>=t.rowStartIndex;a--){const t=l-1-(r-1-a)%e;if(c!==1/0)for(let r=s;r<c;r++){const l=$D(t,r),s=$D(a,r),c=n.cells[l];if(c&&(i?.(n.cells[s]),n.cells[s]=o?.(c,s)||ts(c),c.merge)){const t=WD(c.merge),o=jD({rowStartIndex:t.rowStartIndex-e,rowEndIndex:t.rowEndIndex-e,columnStartIndex:t.columnStartIndex,columnEndIndex:t.columnEndIndex});n.cells[s].merge=o}}else{const e=Object.keys(n.cells);let r=0;for(;r<e.length;){const l=e[r],{rowIndex:s,columnIndex:c}=ZD(l);if(s===t){const e=$D(a,c);let t=n.cells[l];t&&(i?.(n.cells[e]),n.cells[e]=o?.(t,e)||ts(t))}r++}}}}return n=cN(n.indicatorRange)(n),n=cN(t)(n)},HN=e=>t=>(void 0===t.contextMenu&&(t.contextMenu={}),t.contextMenu.visible=e,t),_N=e=>t=>(void 0===t.contextMenu&&(t.contextMenu={}),t.contextMenu.rect=e,t),jN=()=>e=>{if(!e.selectedCoordinates||!e.indicatorRange)return e;let{columnIndex:t,rowIndex:n}=e.selectedCoordinates;if(t<=0)return e;if(t--,e.columnStartIndex===t){const n=qD(e,t);e=_I(e.columnStartDiff-n,0)(e)}else if(e.columnStartIndex>t){const n=XD(e,t);e=_I(n-e.scrollLeft,0)(e)}let o={rowStartIndex:n,rowEndIndex:n+1,columnStartIndex:t,columnEndIndex:t+1};const i=$D(n,t),r=e.cells?.[i]?.merge;return r&&(o=WD(r)),e.selectedCoordinates={columnIndex:o.columnStartIndex,rowIndex:o.rowStartIndex},e.indicatorRange=o,e},WN=()=>e=>{if(!e.selectedCoordinates||!e.indicatorRange)return e;let{columnIndex:t,rowIndex:n}=e.selectedCoordinates;const o=$D(n,t),i=e.cells?.[o]?.merge;if(i){t=WD(i).columnEndIndex}else t++;if(t===e.columnEndIndex-1)e=_I(e.columnEndDiff,0)(e);else if(t>e.columnEndIndex-1){const{scrollLeft:n,clientWidth:o}=e,i=XD(e,t),r=qD(e,t);e=_I(i+r-o-n,0)(e)}let r={rowStartIndex:n,rowEndIndex:n+1,columnStartIndex:t,columnEndIndex:t+1};const l=$D(n,t),s=e.cells?.[l]?.merge;return s&&(r=WD(s)),e.selectedCoordinates={columnIndex:r.columnStartIndex,rowIndex:r.rowStartIndex},e.indicatorRange=r,e},zN=()=>e=>{if(!e.selectedCoordinates||!e.indicatorRange)return e;let{columnIndex:t,rowIndex:n}=e.selectedCoordinates;const o=$D(n,t),i=e.cells?.[o]?.merge;if(i){n=WD(i).rowEndIndex}else n++;if(n===e.rowEndIndex-1)e=_I(0,e.rowEndDiff)(e);else if(n>e.rowEndIndex-1){const{scrollTop:t,clientHeight:o}=e,i=GD(e,n),r=UD(e,n);e=_I(0,i+r-o-t)(e)}let r={rowStartIndex:n,rowEndIndex:n+1,columnStartIndex:t,columnEndIndex:t+1};const l=$D(n,t),s=e.cells?.[l]?.merge;return s&&(r=WD(s)),e.selectedCoordinates={columnIndex:r.columnStartIndex,rowIndex:r.rowStartIndex},e.indicatorRange=r,e},VN=()=>e=>{if(!e.selectedCoordinates||!e.indicatorRange)return e;let{columnIndex:t,rowIndex:n}=e.selectedCoordinates;if(n<=0)return e;if(n--,e.rowStartIndex===n){const t=qD(e,n);e=_I(0,e.rowStartDiff-t)(e)}else if(e.rowStartIndex>n){const t=GD(e,n);e=_I(0,t-e.scrollTop)(e)}let o={rowStartIndex:n,rowEndIndex:n+1,columnStartIndex:t,columnEndIndex:t+1};const i=$D(n,t),r=e.cells?.[i]?.merge;return r&&(o=WD(r)),e.selectedCoordinates={columnIndex:o.columnStartIndex,rowIndex:o.rowStartIndex},e.indicatorRange=o,e},$N=()=>e=>{if(!e.indicatorRange)return e;const t=ts(e.indicatorRange);if(t.columnStartIndex<=0)return e;if(t.columnStartIndex--,e.columnStartIndex===t.columnStartIndex){const n=qD(e,t.columnStartIndex);e=_I(e.columnStartDiff-n,0)(e)}else if(e.columnStartIndex>t.columnStartIndex){const n=XD(e,t.columnStartIndex);e=_I(n-e.scrollLeft,0)(e)}return e.indicatorRange=VD(e,t),e},ZN=()=>e=>{if(!e.indicatorRange)return e;const t=ts(e.indicatorRange);if(t.columnEndIndex===e.columnEndIndex-1)e=_I(e.columnEndDiff,0)(e);else if(t.columnEndIndex>e.columnEndIndex-1){const{scrollLeft:n,clientWidth:o}=e,i=XD(e,t.columnEndIndex),r=qD(e,t.columnEndIndex);e=_I(i+r-o-n,0)(e)}return t.columnEndIndex<e.columnEndIndex&&t.columnEndIndex++,e.indicatorRange=VD(e,t),e},UN=()=>e=>{if(!e.indicatorRange)return e;const t=ts(e.indicatorRange);if(t.rowEndIndex===e.rowEndIndex-1)e=_I(e.rowEndDiff,0)(e);else if(t.rowEndIndex>e.rowEndIndex-1){const{scrollTop:n,clientHeight:o}=e,i=GD(e,t.rowEndIndex),r=UD(e,t.rowEndIndex);e=_I(0,i+r-o-n)(e)}return t.rowEndIndex<e.rowEndIndex&&t.rowEndIndex++,e.indicatorRange=VD(e,t),e},qN=()=>e=>{if(!e.indicatorRange)return e;const t=ts(e.indicatorRange);if(t.rowStartIndex<=0)return e;if(t.rowStartIndex--,e.rowStartIndex===t.rowStartIndex){const n=qD(e,t.rowStartIndex);e=_I(e.rowStartDiff-n-.1,0)(e)}else if(e.rowStartIndex>t.rowStartIndex){const n=GD(e,t.rowStartIndex);e=_I(0,n-e.scrollTop)(e)}return e.indicatorRange=VD(e,t),e},YN=e=>t=>(t.isEditPending=e||void 0,t),KN=(e,t,n,o,i)=>r=>{if(void 0===i.indicatorRange)return r;const{indicatorRange:{rowStartIndex:l,rowEndIndex:s,columnStartIndex:c,columnEndIndex:a},rowTotalNumber:u,columnTotalNumber:d}=i,f={...i.indicatorRange},h=KD(i,o),p=YD(i,n),v=(e=0)=>{if(0===e){const t=s-1-(l-1-h)%(s-l);LD(f,{cell(n,o){if(n===t){const t=$D(n,o),r=i.cells?.[t];if(r?.merge){const t=WD(r.merge);if(t.rowEndIndex-1===n){const n=t.rowStartIndex-t.rowEndIndex+1;n<e&&(e=n)}}}}})}h+e>=0&&(f.rowStartIndex=h+e)},g=(e=0)=>{if(0===e){const t=a-1-(c-1-p)%(a-c);LD(f,{cell(n,o){if(o===t){const t=$D(n,o),r=i.cells?.[t];if(r?.merge){const t=WD(r.merge);if(t.columnEndIndex-1===o){const n=t.columnStartIndex-t.columnEndIndex+1;n<e&&(e=n)}}}}})}p+e>=0&&(f.columnStartIndex=p+e)},m=(e=0)=>{if(e>0){const t=l+(h-s)%(s-l);LD(f,{cell(n,o){if(n===t){const t=$D(n,o),r=i.cells?.[t];if(r?.merge){const t=WD(r.merge);if(t.rowStartIndex===n){const n=t.rowEndIndex-t.rowStartIndex;n>e&&(e=n)}}}}})}h+e<=u&&(f.rowEndIndex=h+e)},y=(e=0)=>{if(e>0){const t=c+(p-a)%(a-c);LD(f,{cell(n,o){if(o===t){const t=$D(n,o),r=i.cells?.[t];if(r?.merge){const t=WD(r.merge);if(t.columnStartIndex===o){const n=t.columnEndIndex-t.columnStartIndex;n>e&&(e=n)}}}}})}p+e<=d&&(f.columnEndIndex=p+e)};if(p>=c&&p<a&&h>=l&&h<s){if(e-n>=t-o){if(p>c){let t=0;e-n<=15&&t++,0===t&&LD(f,{cell(e,n){if(n===p){const o=$D(e,n),r=i.cells?.[o];if(r?.merge){const e=WD(r.merge);if(e.columnEndIndex-1===n){const n=e.columnStartIndex-e.columnEndIndex+1;n<t&&(t=n)}}}}}),p+t>f.columnStartIndex&&(f.columnEndIndex=p+t)}}else if(h>l){let e=0;t-o<=15&&e++,0===e&&LD(f,{cell(t,n){if(t===h){const o=$D(t,n),r=i.cells?.[o];if(r?.merge){const n=WD(r.merge);if(n.rowEndIndex-1===t){const t=n.rowStartIndex-n.rowEndIndex+1;t<e&&(e=t)}}}}}),h+e>f.rowStartIndex&&(f.rowEndIndex=h+e)}}else if(p>=c&&p<a){if(h+1>=s){let e=1;o-t<=15&&e--,m(e)}else if(h<=l){let e=0;t-o<=15&&e++,v(e)}}else if(h>=l&&h<s){if(p+1>=a){let t=1;n-e<=15&&t--,y(t)}else if(p<c){let t=0;e-n<=15&&t++,g(t)}}else if(p>=a&&h>=s)n-e>=o-t?y(1):m(1);else if(p>=a&&h<l){const{height:r}=iI(i,f);n-e>=t-r-o?y(1):v(0)}else if(p<c&&h>=s){const{width:r}=iI(i,f);e-r-n>=o-t?g(0):m(1)}else if(p<c&&h<l){const{height:r,width:l}=iI(i,f);e-l-n>=t-r-o?g(0):v(0)}return XN(f)(r)},GN=(e,t,n,o,i)=>r=>{if(void 0===i.indicatorRange)return r;const{rowStartIndex:l,rowEndIndex:s,columnStartIndex:c,columnEndIndex:a}=i.indicatorRange;let u=0;a!==1/0&&(u=Math.min(i.columnEndIndex-a,Math.max(n-e,-c)));let d=0;s!==1/0&&(d=Math.min(i.rowEndIndex-s,Math.max(o-t,-l)));const f={rowStartIndex:l+d,rowEndIndex:s+d,columnStartIndex:c+u,columnEndIndex:a+u};if(void 0!==i.selectedCoordinates){const{columnIndex:e,rowIndex:t}=i.selectedCoordinates;r=JN({columnIndex:e+u,rowIndex:t+d})(r)}return XN(f)(r)},XN=e=>t=>(void 0===t.indicator&&(t.indicator={}),t.indicator.previewIndicatorRange=e,t),JN=e=>t=>(void 0===t.indicator&&(t.indicator={}),t.indicator.previewSelectedCoordinates=e,t),QN=e=>t=>(void 0===t.indicator&&(t.indicator={}),t.indicator.drag=e,t),eL=e=>t=>(void 0===t.indicator&&(t.indicator={}),t.indicator.anchor=e,t),tL=e=>t=>(t.resize.row=e,t),nL=e=>t=>(t.resize.rowIndex=e,t),oL=e=>t=>(t.resize.column=e,t),iL=e=>t=>(t.resize.columnIndex=e,t),rL=e=>t=>(t.scrollBar.visible=e,t);function lL(e,t){const n=Dd(e),o=_((e=>{const o=t.grid.current?.getBoundingClientRect();let{clientX:i,clientY:r}=e;return void 0!==o&&(i-=o.left,r-=o.top),n.current.mini,{clientX:i,clientY:r}}),[n,t.grid]),i=sL(e,o),r=function(e,t){const n=R(Kk),o=Dd(e),i=Nd("touchstart");return F((()=>{let e,r,l,s=!1;const c=i.subscribe((t=>{t.stopPropagation(),s=!1;const n=t.target;e=vu(n,"touchmove"),r=vu(n,"touchend"),l=vu(n,"touchcancel")})),a=i.pipe(iv((t=>mu(150).pipe(rv(e)).pipe(rv(r)).pipe(rv(l)).pipe(Zp((()=>t)))))).pipe(iv((i=>{const c=i.touches[0],{value:a,onResizeStart:u}=o.current,d=c.clientX,{clientX:f}=t(c),h=YD(a,f,8)-1,p=qD(a,h),v=a.scrollWidth-a.scrollLeft-a.clientWidth;return s=!0,u?.(),n(oL(!0),iL(h)),e.pipe(rv(r)).pipe(rv(l)).pipe(Zp((e=>{e.preventDefault();const t=e.touches[0],n=Math.ceil(t.clientX-d),o=a.scrollWidth+n,i=a.clientWidth+Math.min(0,v+n);return{size:p+n,index:h,scrollWidth:o,clientWidth:i}})))}))).subscribe((({size:e,index:t,scrollWidth:n,clientWidth:i})=>{const{value:r,onChange:l}=o.current;l(Md(...[rN(e,t),oN(e,t),FI(i),RI(n),YN(!0)])(r))})),u=i.pipe(iv((e=>bu(r,l)))).pipe(tv((()=>s))).subscribe((e=>{s=!1,n(oL(!1),iL(-1))}));return()=>{c.unsubscribe(),a.unsubscribe(),u.unsubscribe(),e=null,r=null,l=null}}),[n,o,t,i]),Ld([i])}(e,o);return{row:i,column:r}}function sL(e,t){const n=R(Kk),o=Dd(e),i=Nd("touchstart");return F((()=>{let e,r,l,s=!1;const c=i.subscribe((t=>{t.stopPropagation(),s=!1;const n=t.target;e=vu(n,"touchmove"),r=vu(n,"touchend"),l=vu(n,"touchcancel")})),a=i.pipe(iv((t=>mu(150).pipe(rv(e)).pipe(rv(r)).pipe(rv(l)).pipe(Zp((()=>t)))))).pipe(iv((i=>{const c=i.touches[0],a=c.clientY,{value:u,onResizeStart:d}=o.current,{clientY:f}=t(c),h=KD(u,f,8)-1,p=UD(u,h),v=u.scrollHeight-u.scrollTop-u.clientHeight;return s=!0,d?.(),n(tL(!0),nL(h)),e.pipe(rv(r)).pipe(rv(l)).pipe(Zp((e=>{e.preventDefault();const t=e.touches[0],n=Math.ceil(t.clientY-a),o=u.scrollHeight+n,i=u.clientHeight+Math.min(0,v+n);return{size:p+n,index:h,clientHeight:i,scrollHeight:o}})))}))).subscribe((({size:e,index:t,scrollHeight:n,clientHeight:i})=>{const{onChange:r,value:l}=o.current;r(Md(...[iN(e,t),nN(e,t),PI(i),OI(n),YN(!0)])(l))})),u=i.pipe(iv((e=>bu(r,l)))).pipe(tv((()=>s))).subscribe((e=>{s=!1,n(tL(!1),nL(-1))}));return()=>{c.unsubscribe(),a.unsubscribe(),u.unsubscribe(),e=null,r=null,l=null}}),[n,o,t,i]),Ld([i])}function cL(e){const t=Dd(e),n=Nd("keydown");F((()=>{const e=e=>{t.current.focusing&&Td(n.listener,t.current.onKeyDown)(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[t,n]),F((()=>{const e=n.subscribe((e=>{const n=t.current,{value:o,onChange:i,editable:r,focusing:l}=n;if(void 0===o.indicatorRange)return;const{rowStartIndex:s,rowEndIndex:c,columnStartIndex:a,columnEndIndex:u}=o.indicatorRange,d=[];sI(e)?n.onCopy?.(o):aI(e)?d.push(vN()):uI(e)?d.push(gN(s,c)):dI(e)?d.push(mN(a,u)):CI(e)?d.push(jN()):wI(e)?d.push(WN()):xI(e)?d.push(VN()):SI(e)?d.push(zN()):EI(e)?d.push($N()):kI(e)?d.push(ZN()):DI(e)?d.push(qN()):II(e)&&d.push(UN()),!1!==r&&!1!==l?(e.stopPropagation(),lI(e)?(n.onCut?.(o),d.push(RN(n,o.indicatorRange),YN(!0))):cI(e)?n.onPaste?.(o):bI(e)?d.push(RN(n,o.indicatorRange),YN(!0)):fI(e)?d.push(yN(n,s),YN(!0)):hI(e)?d.push(yN(n,c),YN(!0)):pI(e)?d.push(bN(n,a),YN(!0)):vI(e)?d.push(bN(n,u),YN(!0)):gI(e)?d.push(CN(n,s,c),YN(!0)):mI(e)?d.push(wN(n,a,u),YN(!0)):yI(e)&&d.push(AN(o.indicatorRange),YN(!0)),i(Md(...d)(o))):i(Md(...d)(o))}));return()=>e.unsubscribe()}),[t,n])}function aL(e){return{main:Z(null),transition:Z(!1)}}function uL(e){return{grid:Z(null)}}function dL(e){return{indicator:Z(null),anchor:Z(null),top:Z(null),right:Z(null),bottom:Z(null),left:Z(null)}}function fL(e){return lh(Pf?pL:hL,{...e})}function hL(e){const t=uL(),n=function(e,t){const n=R(Kk),o=Dd(e),i=Nd("pointermove"),r=Nd("pointerup"),l=Nd("pointerdown"),s=Nd("pointerdown");F((()=>(window.addEventListener("pointermove",i.listener),window.addEventListener("pointerup",r.listener),()=>{window.removeEventListener("pointermove",i.listener),window.removeEventListener("pointerup",r.listener)})),[i,r]);const c=_((e=>{const n=t.grid.current?.getBoundingClientRect();let{clientX:i,clientY:r}=e;return void 0!==n&&(i-=n.left,r-=n.top),o.current.mini,{clientX:i,clientY:r}}),[o,t.grid]);return F((()=>{const e=l.pipe(iv((e=>{e.stopPropagation();const{value:t}=o.current,{clientY:n}=c(e),l=KD(t,n,3)-1,s=UD(t,l),a=t.scrollHeight-t.scrollTop-t.clientHeight;return i.pipe(rv(r)).pipe(Zp((n=>{const o=Math.ceil(n.clientY-e.clientY),i=t.scrollHeight+o,r=t.clientHeight+Math.min(0,a+o);return{size:s+o,index:l,clientHeight:r,scrollHeight:i}})))}))).subscribe((({size:e,index:t,scrollHeight:i,clientHeight:r})=>{const{onChange:l,value:s}=o.current;l(Md(iN(e,t),nN(e,t),PI(r),OI(i),YN(!0))(s)),n(tL(!0))})),t=l.pipe(iv((e=>r))).subscribe((()=>{n(tL(!1))}));return()=>{e.unsubscribe(),t.unsubscribe()}}),[n,o,c,i,r,l]),F((()=>{const e=s.pipe(iv((e=>{e.stopPropagation();const{value:t}=o.current,{clientX:l}=c(e),s=YD(t,l,3)-1,a=qD(t,s),u=t.scrollWidth-t.scrollLeft-t.clientWidth;return i.pipe(rv(r)).pipe(Zp((o=>{const i=Math.ceil(o.clientX-e.clientX),r=t.scrollWidth+i,l=t.clientWidth+Math.min(0,u+i);return n(oL(!0)),{size:a+i,index:s,scrollWidth:r,clientWidth:l}})))}))).subscribe((({size:e,index:t,scrollWidth:n,clientWidth:i})=>{const{value:r,onChange:l}=o.current;l(Md(rN(e,t),oN(e,t),FI(i),RI(n),YN(!0))(r))})),t=s.pipe(iv((e=>r))).subscribe((()=>{n(oL(!1))}));return()=>{e.unsubscribe(),t.unsubscribe()}}),[n,o,c,i,r,s]),{row:Ld([l]),column:Ld([s])}}(e,t);return lh(vL,{...e,refs:t,events:n})}function pL(e){const t=uL(),n=lL(e,t);return lh(vL,{...e,refs:t,events:n})}function vL(e){const{events:t,refs:n}=e,{rowStartIndex:o,rowEndIndex:i,rowTotalNumber:r,columnStartIndex:l,columnEndIndex:s,columnTotalNumber:c,scrollWidth:a,scrollHeight:u,rows:d,columns:f,cells:h,defaultCell:p}=e.value,v={borderStyle:"solid",borderWidth:0};let g;!1===e.border&&(void 0===e.value.indicatorRange?g="none":v.borderStyle="dashed");const m=[],y=e.CellRenderer;if(h||d||f)for(let n=o;n<i;n++)for(let i=l;i<s;i++){const r=$D(n,i),s=h?.[r],c=d?.[n],a=f?.[i],u=c?.merge||a?.merge||s?.merge;if(u){const d=WD(u),f=Math.max(o,d.rowStartIndex),h=Math.max(l,d.columnStartIndex);if(f===n&&h===i){const n=GD(e.value,d.rowStartIndex),o=XD(e.value,d.columnStartIndex),i=UD(e.value,d.rowStartIndex,d.rowEndIndex),l=qD(e.value,d.columnStartIndex,d.columnEndIndex),u={...p?.style,...SD,backgroundColor:"#fff",...c?.style,...a?.style,...s?.style,top:n,left:o,height:i,width:l};m.push(sh(Mh,{type:"bottom-right",style:u,children:[y&&lh(y,{style:u,rowIndex:d.rowStartIndex,columnIndex:d.columnStartIndex}),lh("div",{style:yD,...t.column}),lh("div",{style:wD,...t.row})]},r))}}else if(s){const t=GD(e.value,n),o=XD(e.value,i),l=UD(e.value,n),u=qD(e.value,i),d={...xD,...p?.style,...c?.style,...a?.style,...s?.style,top:t,left:o,height:l,width:u};m.push(lh("div",{style:d,children:y&&lh(y,{style:d,rowIndex:n,columnIndex:i})},r))}}if(p?.merge){const t=WD(p.merge),n=GD(e.value,t.rowStartIndex),o=XD(e.value,t.columnStartIndex),i=UD(e.value,t.rowStartIndex,t.rowEndIndex),r=qD(e.value,t.columnStartIndex,t.columnEndIndex),l={...p?.style,...SD,top:n,left:o,height:i,width:r};m.push(lh(Mh,{type:"bottom-right",style:l},p.merge))}for(let n=o;n<i;n++){const o=n===i-1?"div":gL,l=GD(e.value,n),s=UD(e.value,n),c={...nD,...v,top:l,height:s,width:a};let u={...iD};e.resize.rowIndex===n&&(u={...rD});let f=Pf?-4:-2;n===r-1&&(f=-4),u.top=l+s+f,m.push(lh("div",{style:{...c,zIndex:0,...d?.[n]?.style}},`row-style-${n}`),lh(o,{type:g??"bottom",style:c},`row-${n}`)),!1!==e.editable&&m.push(lh("div",{style:u,...t.row},`row-mark-${n}`))}for(let n=l;n<s;n++){const o=n===s-1?"div":mL,i=XD(e.value,n),r=qD(e.value,n),l={...oD,...v,left:i,width:r,height:u};let a={...lD};e.resize.columnIndex===n&&(a={...sD});let d=Pf?-4:-2;n===c-1&&(d=-4),a.left=i+r+d,m.push(lh("div",{style:{...l,zIndex:0,...f?.[n]?.style}},`column-style-${n}`),lh(o,{type:g??"right",style:l},`column-${n}`)),!1!==e.editable&&m.push(lh("div",{style:a,...t.column},`column-mark-${n}`))}return lh("div",{ref:n.grid,style:LI(e),children:m})}function gL(e){return lh(Mh,{style:e.style,type:e.type,children:e.children})}function mL(e){return lh(Mh,{style:e.style,type:e.type,children:e.children})}function yL(e){return"native"===e.selecter?null:lh(Pf?CL:bL,{...e})}function bL(e){const t=R(Kk),n=dL(),o=function(e,t,n){const o=Dd(e),i=R(Gk),r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("pointerdown"),c=Nd("pointerdown"),a=Nd("pointerdown"),u=Nd("pointerdown"),d=Nd("pointerdown");F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]);const f=_((e=>{const t=n.indicator.current?.getBoundingClientRect();let{clientX:i,clientY:r}=e;return void 0!==t&&(i-=t.left,r-=t.top),o.current.mini,{clientX:i,clientY:r}}),[o,n.indicator]);return F((()=>{let e=0,n=0;const c=s.subscribe((t=>{t.stopPropagation();const{clientX:o,clientY:i}=f(t);e=o,n=i})),a=bu(s.pipe(iv((()=>r.pipe(rv(l)))))).subscribe((r=>{const{value:l}=o.current,{clientX:s,clientY:c}=f(r);t(KN(e,n,s,c,l),eL(!0)),i.current=!0})),u=s.pipe(iv((()=>l.pipe(Xp(1))))).subscribe((r=>{e=0,n=0;const{indicator:l,value:s,onChange:c}=o.current;void 0!==l?.previewIndicatorRange&&(t(XN(),eL(!1)),c(Md(FN(o.current,l.previewIndicatorRange),ZI(l.previewIndicatorRange),YN(!0))(s)),i.current=!0)}));return()=>{c.unsubscribe(),a.unsubscribe(),u.unsubscribe()}}),[i,s,o,r,l,t,f]),F((()=>{let e=0,n=0;const s=bu(c.pipe(Zp((e=>({e:e,type:"top"})))),a.pipe(Zp((e=>({e:e,type:"right"})))),u.pipe(Zp((e=>({e:e,type:"bottom"})))),d.pipe(Zp((e=>({e:e,type:"left"}))))),h=s.subscribe((({e:t,type:i})=>{t.stopPropagation();const{value:r}=o.current,{clientX:l,clientY:s}=f(t);if(void 0===r.indicatorRange)return;const{rowStartIndex:c,rowEndIndex:a,columnStartIndex:u,columnEndIndex:d}=r.indicatorRange;e=KD(r,s),n=YD(r,l),"top"===i?e=c:"right"===i?n=d-1:"bottom"===i?e=a-1:"left"===i&&(n=u)})),p=bu(s.pipe(iv((()=>r.pipe(rv(l)))))).subscribe((r=>{const{value:l}=o.current,{clientX:s,clientY:c}=f(r),a=KD(l,c),u=YD(l,s);t(GN(n,e,u,a,l),QN(!0)),i.current=!0})),v=s.pipe(iv((()=>l.pipe(Xp(1))))).subscribe((()=>{e=0,n=0;const{indicator:r,value:l,onChange:s}=o.current;void 0!==r?.previewIndicatorRange&&void 0!==r?.previewSelectedCoordinates&&(t(JN(),XN(),QN(!1)),s(Md(PN(o.current,r.previewIndicatorRange),UI(r.previewSelectedCoordinates),ZI(r.previewIndicatorRange),YN(!0))(l)),i.current=!0)}));return()=>{h.unsubscribe(),p.unsubscribe(),v.unsubscribe()}}),[u,d,a,c,r,l,o,f,t,i]),{anchor:Ld([s]),top:Ld([c]),right:Ld([a]),bottom:Ld([u]),left:Ld([d])}}(e,t,n);return lh(wL,{...e,refs:n,events:o})}function CL(e){const t=R(Kk),n=dL(),o=function(e,t,n){const o=Dd(e),i=R(Gk),r=Nd("touchstart"),l=Nd("touchstart"),s=Nd("touchstart"),c=Nd("touchstart"),a=_((e=>{const t=n.indicator.current?.getBoundingClientRect();let{clientX:i,clientY:r}=e;return void 0!==t&&(i-=t.left,r-=t.top),o.current.mini,{clientX:i,clientY:r}}),[o,n.indicator]);return F((()=>{let e,n,u,d=!1;const f=bu(r.pipe(Zp((e=>({e:e,type:"top"})))),l.pipe(Zp((e=>({e:e,type:"right"})))),s.pipe(Zp((e=>({e:e,type:"bottom"})))),c.pipe(Zp((e=>({e:e,type:"left"}))))),h=f.subscribe((({e:t})=>{t.stopPropagation(),d=!1;const o=t.target;e=vu(o,"touchmove"),n=vu(o,"touchend"),u=vu(o,"touchcancel")})),p=f.pipe(iv((t=>mu(150).pipe(rv(e)).pipe(rv(n)).pipe(rv(u)).pipe(tv((()=>{const{value:e}=o.current;return!!e.indicatorRange}))).pipe(Zp((()=>t)))))).pipe(iv((({e:i,type:r})=>{const l=i.touches[0],{value:s,onDragStart:c}=o.current,{clientX:f,clientY:h}=a(l),{rowStartIndex:p,rowEndIndex:v,columnStartIndex:g,columnEndIndex:m}=s.indicatorRange;let y=KD(s,h),b=YD(s,f);return"top"===r?y=p:"right"===r?b=m-1:"bottom"===r?y=v-1:"left"===r&&(b=g),d=!0,c?.(),t(JN(s.selectedCoordinates),XN(s.indicatorRange),QN(!0)),e.pipe(rv(n)).pipe(rv(u)).pipe(Zp((e=>({e:e,startRowIndex:y,startColumnIndex:b}))))}))).subscribe((({e:e,startRowIndex:n,startColumnIndex:r})=>{e.preventDefault();const l=e.touches[0],{value:s}=o.current,{clientX:c,clientY:u}=a(l),d=KD(s,u),f=YD(s,c);t(GN(r,n,f,d,s)),i.current=!0})),v=f.pipe(iv((e=>bu(n,u)))).pipe(tv((()=>d))).subscribe((()=>{const{indicator:e,value:n,onChange:r}=o.current;d=!1,void 0!==e?.previewIndicatorRange&&void 0!==e?.previewSelectedCoordinates&&(t(JN(),XN(),QN(!1)),Ec(e.previewIndicatorRange,n.indicatorRange)||r(Md(PN(o.current,e.previewIndicatorRange),UI(e.previewSelectedCoordinates),ZI(e.previewIndicatorRange),YN(!0))(n)),i.current=!0)})),g=f.pipe(iv((({e:e,type:t})=>{const o=Date.now(),i=e.touches[0].clientX,r=e.touches[0].clientY;return bu(n,u).pipe(tv((e=>{const t=Date.now()-o,n=Math.abs(e.changedTouches[0].clientX-i),l=Math.abs(e.changedTouches[0].clientY-r);return t<150&&n<5&&l<5})))}))).subscribe((e=>{e.preventDefault();const t=e.changedTouches[0],{value:n,onChange:r,onClickCell:l}=o.current,{clientX:s,clientY:c}=a(t);r?.(Md(VI(s,c))(n));const u=$D(KD(n,c),YD(n,s)),d=n.cells?.[u];l?.(t,d,u),i.current=!0}));return()=>{h.unsubscribe(),p.unsubscribe(),v.unsubscribe(),g.unsubscribe()}}),[i,o,a,t,r,l,s,c]),{anchor:{},top:Ld([r]),right:Ld([l]),bottom:Ld([s]),left:Ld([c])}}(e,t,n);return lh(wL,{...e,refs:n,events:o})}function wL(e){const{events:t,refs:n,resize:o}=e,i=R(Gk),r=tI(e),l=oI(e),{indicatorRange:s,isScrolling:c,scrollWidth:a,scrollHeight:u}=e.value;if(void 0===s)return null;const{columnEndIndex:d,rowEndIndex:f}=s;let h="0ms";return i.current&&(h=`${Jk}ms`,i.current=!1),lh("div",{style:BI(e),ref:n.indicator,children:sh("div",{style:AI(e),children:[sh("div",{style:{...aD,...r,transitionDuration:h},children:[lh("div",{style:uD}),lh("div",{style:pD,children:lh("div",{style:{...hD,...l,transitionDuration:h,left:l.left-r.left,top:l.top-r.top,outlineWidth:Math.max(a,u)}})}),e.editable&&!Pf&&d!==1/0&&f!==1/0&&lh("div",{style:fD,ref:n.anchor,...t.anchor}),e.editable&&lh("div",{style:gD,ref:n.top,...t.top}),e.editable&&lh("div",{style:mD,ref:n.right,...t.right}),e.editable&&lh("div",{style:CD,ref:n.bottom,...t.bottom}),e.editable&&lh("div",{style:bD,ref:n.left,...t.left})]}),e.editable&&e.indicator?.previewIndicatorRange&&lh("div",{style:{...dD,...nI(e),transitionDuration:h}})]})})}function xL(e,t=1){const{rowStartIndex:n,rowEndIndex:o,columnStartIndex:i,columnEndIndex:r,rowTotalNumber:l,columnTotalNumber:s,cells:c,rows:a,columns:u,defaultCell:d}=e.value,f=[];if(void 0!==c)for(const e in c){const t=c[e].style;if(void 0===t||!TI(t))continue;const{rowIndex:a,columnIndex:u}=ZD(e);if(a>=n&&a<o&&u>=i&&u<r){h(a,u,l,s,t,c[e].merge)}}if(void 0!==a)for(const e in a){const t=a[e].style;if(void 0!==t&&TI(t))for(let n=i;n<r;n++){const o=a[e].merge;h(Number(e),n,l,s,t,o)}}if(void 0!==u)for(const e in u){const t=u[e].style;if(void 0!==t&&TI(t))for(let i=n;i<o;i++){const n=u[e].merge;h(i,Number(e),l,s,t,n)}}if(void 0!==d){const e=d.style;if(e&&TI(e))if(d.merge)h(0,0,l,s,e,d.merge);else for(let t=n;t<o;t++)for(let n=i;n<r;n++)h(t,n,l,s,e)}function h(o,r,l,s,c,a){let u={stroke:c.borderColor||kf,strokeWidth:1/t,d:""},d=!1;if(f.length>0){for(let e=0,t=f.length;e<t;e++)if(f[e].stroke===u.stroke){u=f[e],d=!0;break}}else d=!0,f.push(u);!1===d&&f.push(u);let h=1,p=1;if(a){const e=WD(a),t=Math.max(n,e.rowStartIndex),l=Math.max(i,e.columnStartIndex);if(t!==o||l!==r)return;h=e.rowEndIndex-e.rowStartIndex,p=e.columnEndIndex-e.columnStartIndex}if(c.borderTopWidth){let t=0;0===o&&(t=.5);const n=GD(e.value,o)+t,i=XD(e.value,r)+t,l=XD(e.value,r+p)+t;u.d+=` M ${i} ${n} L ${l} ${n}`}if(c.borderRightWidth){let t=0;r===s-1&&(t=-.5);const n=GD(e.value,o)+t,i=GD(e.value,o+h)+t,l=XD(e.value,r+p)+t;u.d+=` M ${l} ${n} L ${l} ${i}`}if(c.borderBottomWidth){let t=0;o===l-1&&(t=-.5);const n=GD(e.value,o+h)+t,i=XD(e.value,r)+t,s=XD(e.value,r+p)+t;u.d+=` M ${i} ${n} L ${s} ${n}`}if(c.borderLeftWidth){let t=0;0===r&&(t=.5);const n=GD(e.value,o)+t,i=GD(e.value,o+h)+t,l=XD(e.value,r)+t;u.d+=` M ${l} ${n} L ${l} ${i}`}}return f}function SL(e){const{scrollHeight:t,scrollWidth:n}=e.value;return lh("div",{style:ED,children:lh("div",{style:kD,children:lh("svg",{style:{...DD,width:n,height:t,...AI(e)},children:xL(e).map(((e,t)=>lh("path",{...e},t)))})})})}const EL={copy:"copy",paste:"paste",cut:"cut",addOneRowToTop:"addOneRowToTop",addOneRowToBottom:"addOneRowToBottom",selectCurrentRow:"selectCurrentRow",deleteCurrentRow:"deleteCurrentRow",addOneColumnToLeft:"addOneColumnToLeft",addOneColumnToRight:"addOneColumnToRight",selectCurrentColumn:"selectCurrentColumn",deleteCurrentColumn:"deleteCurrentColumn",selectAll:"Select All",mergeCell:"Merge Cell",splitCell:"Split Cell"},kL={cn:{[EL.copy]:"复制",[EL.paste]:"粘贴",[EL.cut]:"剪切",[EL.selectAll]:"全选",[EL.addOneRowToTop]:"向上插入行",[EL.addOneRowToBottom]:"向下插入行",[EL.selectCurrentRow]:"选中所在行",[EL.deleteCurrentRow]:"删除所在行",[EL.addOneColumnToLeft]:"向左插入列",[EL.addOneColumnToRight]:"向右插入列",[EL.selectCurrentColumn]:"选中所在列",[EL.deleteCurrentColumn]:"删除所在列",[EL.mergeCell]:"合并单元格",[EL.splitCell]:"拆分单元格"},en:{[EL.copy]:"Copy",[EL.paste]:"Paste",[EL.cut]:"Cut",[EL.selectAll]:"Select All",[EL.addOneRowToTop]:"Add Row To Top",[EL.addOneRowToBottom]:"Add Row To Bottom",[EL.selectCurrentRow]:"Select Current Row",[EL.deleteCurrentRow]:"Delete Current Row",[EL.addOneColumnToLeft]:"Add Column To Left",[EL.addOneColumnToRight]:"Add Column To Right",[EL.selectCurrentColumn]:"Select Current Column",[EL.deleteCurrentColumn]:"Delete Current Column",[EL.mergeCell]:"Merge Cell",[EL.splitCell]:"Split Cell"}},DL=[{value:EL.cut,hotkey:rI.cut,editable:!0},{value:EL.copy,hotkey:rI.copy},{value:EL.paste,hotkey:rI.paste,editable:!0},{value:EL.selectAll,hotkey:rI.selectAll},{separate:!0},{value:EL.selectCurrentRow,hotkey:rI.selectCurrentRow},{value:EL.addOneRowToTop,editable:!0},{value:EL.addOneRowToBottom,editable:!0},{value:EL.deleteCurrentRow,editable:!0},{separate:!0,editable:!0},{value:EL.selectCurrentColumn,hotkey:rI.selectCurrentColumn},{value:EL.addOneColumnToLeft,editable:!0},{value:EL.addOneColumnToRight,editable:!0},{value:EL.deleteCurrentColumn,editable:!0}],IL=Mf?170:200;function NL(e){const{value:{indicatorRange:t,contextMenu:n},contextmenu:o}=e,i=PD(t);if(void 0===n||!1===o)return null;const{visible:r,disableCopy:l,disableCut:s,rect:c}=n;return r?lh("div",{style:{...ID,...c},onPointerDown:e=>e.stopPropagation(),children:lh(gg,{style:{width:IL},options:DL.filter((t=>!0!==t.editable||!1!==e.editable)).map((t=>{let n=i&&t.value===EL.mergeCell;return(t.value===EL.cut&&s||t.value===EL.copy&&l)&&(n=!0),{...t,name:kL[e?.lang??"cn"][t.value],disable:n}})),onClick:n=>{if(void 0===t)return;const{rowStartIndex:o,rowEndIndex:i,columnStartIndex:r,columnEndIndex:l}=t,s=[HN(!1)];n.value===EL.selectCurrentRow?s.push(gN(o,i)):n.value===EL.selectCurrentColumn?s.push(mN(r,l)):n.value===EL.addOneRowToTop?s.push(yN(e,o),YN(!0)):n.value===EL.addOneRowToBottom?s.push(yN(e,i),YN(!0)):n.value===EL.addOneColumnToLeft?s.push(bN(e,r),YN(!0)):n.value===EL.addOneColumnToRight?s.push(bN(e,l),YN(!0)):n.value===EL.deleteCurrentRow?s.push(CN(e,o,i),YN(!0)):n.value===EL.deleteCurrentColumn?s.push(wN(e,r,l),YN(!0)):n.value===EL.mergeCell?s.push(AN(t),YN(!0)):n.value===EL.copy?e.onCopy?.(Md(...s)(e.value)):n.value===EL.paste?e.onPaste?.(Md(...s)(e.value)):n.value===EL.cut?(e.onCut?.(Md(...s)(e.value)),s.push(RN(e,t),YN(!0))):n.value===EL.selectAll&&s.push(vN()),e.onChange(Md(...s)(e.value))}})}):null}function LL(e){const t=Dd(e),n=Z(-1),o=_((e=>{cancelAnimationFrame(n.current);const{value:o}=t.current,i=(e-JD(o))*(o.scrollWidth-o.clientWidth);eI(t,i,n)}),[t,n]),i=_((e=>{cancelAnimationFrame(n.current);const{value:o}=t.current,i=Math.max(0,o.clientWidth*(e-1));eI(t,i,n)}),[t,n]),{clientWidth:r,scrollWidth:l,clientHeight:s}=e.value;let c=0;return void 0!==e.rect?.top&&(c=s-Math.min(s,e.rect?.top??0)),l>r?lh(vw,{style:{bottom:c},visible:e.scrollBar.visible,thumb:QD(e.value),value:JD(e.value),onChange:o,onChangeInterval:i}):null}function BL(e){return lh(Pf?AL:TL,{...e})}function TL(e){const t=R(Kk),n=aL(),o=function(e,t,n){const o=Dd(e),i=Nd("contextmenu"),r=Nd("pointerenter"),l=Nd("pointerdown"),s=Nd("pointermove"),c=Nd("pointerup"),a=Nd("pointerleave"),u=Nd("wheel"),d=Nd("scroll"),f=Nd("pointerenter"),h=Nd("pointerleave"),p=Nd("pointerdown"),v=Nd("pointerdown"),g=Nd("pointermove"),m=Nd("pointerup");cL(e);const y=_((e=>{const t=n.main.current?.getBoundingClientRect();let{clientX:i,clientY:r}=e;return void 0!==t&&(i-=t.left,r-=t.top),o.current.mini,{clientX:i,clientY:r}}),[o,n.main]);return F((()=>(window.addEventListener("pointerdown",v.listener),window.addEventListener("pointermove",g.listener),window.addEventListener("pointerup",m.listener),()=>{window.removeEventListener("pointerdown",v.listener),window.removeEventListener("pointermove",g.listener),window.removeEventListener("pointerup",m.listener)})),[o,v,g,m]),F((()=>{let e="xy";const t=u.subscribe((t=>{const{value:n,onChange:i,scroller:r}=o.current;if("native"===r)return;const{scrollHeight:l,scrollWidth:s,scrollTop:c,scrollLeft:a,clientHeight:u,clientWidth:d}=n;"x"===e&&s>d&&s>=d+a&&t.stopPropagation(),"y"===e&&l>u&&l>=u+c&&t.stopPropagation();const f="y"!==e?t.deltaX:0,h="x"!==e?t.deltaY:0;i(Md(_I(f,h),HI(!0))(n)),MI(o,!1)})),n=bu(s,u.pipe(Yp(300))).pipe(iv((()=>u.pipe(Xp(1))))).subscribe((t=>{e=Math.abs(t.deltaX)>=Math.abs(t.deltaY)?"x":"y"})),i=u.pipe(Yp(300)).subscribe((()=>{e="xy"})),r=d.subscribe((e=>{const{value:t,onChange:n,scroller:i}=o.current;if("native"!==i)return;e.stopPropagation();const r=e.target.scrollLeft-t.scrollLeft,l=e.target.scrollTop-t.scrollTop;n(Md(_I(r,l),HI(!0))(t)),MI(o,!1)}));return()=>{t.unsubscribe(),n.unsubscribe(),i.unsubscribe(),r.unsubscribe()}}),[o,m,s,u,d]),F((()=>{const e=i.subscribe((e=>{const{value:t,onChange:n,contextmenu:i}=o.current;if(!1===i)return;e.preventDefault(),e.stopPropagation();const{clientX:r,clientY:l}=y(e);n(Md(_N({left:r,top:l}),HN(!0))(t))}));return()=>e.unsubscribe()}),[o,y,i]),F((()=>{const e=v.subscribe((e=>{const{value:t,onChange:n}=o.current;t.contextMenu?.visible&&n(Md(HN(!1))(t))}));return()=>e.unsubscribe()}),[o,v]),F((()=>{const e=bu(u,l.pipe(iv((()=>g.pipe(nv(a)).pipe(rv(m))))),f).subscribe((()=>{o.current.scrollBar.visible||t(rL(!0))}));return()=>e.unsubscribe()}),[o,t,u,l,r,a,f,g,m]),F((()=>{const e=bu(a,f.pipe(iv((()=>h.pipe(rv(p))))),f.pipe(iv((()=>h.pipe(nv(p)).pipe(nv(m))))),u.pipe(iv((()=>u.pipe(Yp(1e3)).pipe(rv(f))))),l.pipe(iv((()=>m.pipe(nv(h)))))).subscribe((()=>{o.current.scrollBar.visible&&t(rL(!1))}));return()=>e.unsubscribe()}),[o,t,u,l,a,f,h,p,m]),F((()=>{let e=!1;const t=p.subscribe((t=>{e=!0})),i=m.subscribe((t=>{e=!1})),r=l.subscribe(c),s=l.pipe(iv((e=>{const{clientX:t,clientY:n}=e;return m.pipe(tv((e=>{const o=Math.abs(e.clientX-t),i=Math.abs(e.clientY-n);return o<5&&i<5})))}))).subscribe((e=>{c(e,!0)}));function c(t,i){if(e)return;const{value:r,onChange:l,onPureClick:s}=o.current,{clientX:c,clientY:a}=y(t),u=Md(HN(!1),VI(c,a))(r),d=PD(r.indicatorRange),f=FD(r.indicatorRange,u.indicatorRange);n.transition.current=!0,i?s?.(u):0!==t.button&&!d&&f||t.shiftKey||l(u)}return()=>{t.unsubscribe(),i.unsubscribe(),r.unsubscribe(),s.unsubscribe()}}),[n.transition,o,r,l,p,m,g,y]),F((()=>{let e=!1;const t=p.subscribe((t=>{e=!0})),i=m.subscribe((t=>{e=!1})),r=l.pipe(iv((()=>g.pipe(rv(m)).pipe(rv(p))))).subscribe((t=>{if(e)return;const{value:i,onChange:r}=o.current,{clientX:l,clientY:s}=y(t);r(Md($I(l,s))(i)),n.transition.current=!0}));return()=>{t.unsubscribe(),i.unsubscribe(),r.unsubscribe()}}),[n.transition,o,y,g,p,m,l]),F((()=>{let e=!1;const t=p.subscribe((t=>{e=!0})),i=m.subscribe((t=>{e=!1})),r=l.pipe(iv((()=>g.pipe(nv(a)).pipe(rv(m))))).pipe(iv((e=>{const t=o.current,i=n.main.current;let r=0,l=0;if(i){const{clientHeight:n,clientWidth:o}=t.value,s=i.getBoundingClientRect(),c=e.clientX-s.left,a=e.clientY-s.top;c<0?r=Math.max(c,-o):c>o&&(r=Math.min(c-o,o)),a<0?l=Math.max(a,-n):a>n&&(l=Math.min(a-n,n))}return yu(0,Ha).pipe(ov((()=>0===r&&0===l))).pipe(rv(m)).pipe(Zp((()=>({deltaX:r,deltaY:l}))))}))).subscribe((({deltaX:t,deltaY:n})=>{if(e)return;const{value:i,onChange:r}=o.current;r(Md(_I(t,n),qI(t,n))(i))}));return()=>{t.unsubscribe(),i.unsubscribe(),r.unsubscribe()}}),[o,n.main,v,m,g,a,l,p]),{main:Ld([r,a,l,s,c,i,u,d]),scrollBar:Ld([f,h,p])}}(e,t,n),i={...Qk,width:e.value.clientWidth,height:e.value.clientHeight};e.resize.row?i.cursor="row-resize":e.resize.column?i.cursor="col-resize":e.indicator?.drag?i.cursor="grab":e.indicator?.anchor&&(i.cursor="crosshair");const r="native"===e.scroller;let l;return!1===e.border&&(void 0===e.value.indicatorRange?l="none":i.borderStyle="dashed"),lh(Gk,{value:n.transition,children:sh(Mh,{style:i,type:l,borderStyle:{zIndex:100},children:[lh("div",{style:NI(e),className:"no-scrollbar",ref:n.main,...o.main,children:e.children}),r?null:lh("div",{...o.scrollBar,children:lh(LL,{...e})})]})})}function AL(e){R(Kk);const t=aL(),n=function(e,t,n){const o=Dd(e),i=Nd("click"),r=Nd("touchstart"),l=Nd("scroll");cL(e);const s=_((e=>{const t=n.main.current?.getBoundingClientRect();let{clientX:i,clientY:r}=e;return void 0!==t&&(i-=t.left,r-=t.top),o.current.mini,{clientX:i,clientY:r}}),[o,n.main]);H((()=>{const{scrollLeft:e}=o.current.value;e>0&&n.main.current?.scrollTo({left:e})}),[o,n.main]),F((()=>{const e=l.subscribe((e=>{const{value:t,onChange:n,scroller:i}=o.current;if("native"!==i)return;e.stopPropagation();const r=e.target.scrollLeft-t.scrollLeft,l=e.target.scrollTop-t.scrollTop;n(Md(_I(r,l),HI(!0))(t)),MI(o,!1)}));return()=>{e.unsubscribe()}}),[o,l]),F((()=>{let e,t,l;const c=r.subscribe((n=>{n.stopPropagation();const o=n.target;e=vu(o,"touchmove"),t=vu(o,"touchend"),l=vu(o,"touchcancel")})),a=r.pipe(iv((n=>mu(382).pipe(rv(e)).pipe(rv(t)).pipe(rv(l)).pipe(Zp((()=>n)))))).pipe(tv((e=>{const t=e.touches[0],{value:n,onExpandStart:i}=o.current,{selectedCoordinates:r,cells:l}=n,{clientX:c,clientY:a}=s(t);let u=KD(n,a),d=YD(n,c);const f=l?.[$D(u,d)];if(f?.merge){const e=WD(f.merge);u=e.rowStartIndex,d=e.columnStartIndex}return r?.rowIndex===u&&r?.columnIndex===d&&(i?.(),!0)}))).pipe(iv((n=>e.pipe(rv(t)).pipe(rv(l))))).subscribe((e=>{e.preventDefault();const t=e.touches[0],{value:i,onChange:r}=o.current,{clientX:l,clientY:c}=s(t);r(Md($I(l,c))(i)),n.transition.current=!0})),u=i.subscribe((e=>{const{value:t,onChange:i,onClickCell:r}=o.current,{clientX:l,clientY:c}=s(e);i?.(Md(VI(l,c))(t));const a=$D(KD(t,c),YD(t,l)),u=t.cells?.[a];r?.(e,u,a),n.transition.current=!0}));return()=>{c.unsubscribe(),a.unsubscribe(),u.unsubscribe()}}),[n.transition,o,i,r,s]);const c=sL(e,s);return{main:Ld([l,i,r]),edge:c}}(e,0,t),o={...Qk,width:e.value.clientWidth,height:e.value.clientHeight};let i;return!1===e.border&&(void 0===e.value.indicatorRange?i="none":o.borderStyle="dashed"),lh(Gk,{value:t.transition,children:sh(Mh,{style:o,type:i,borderStyle:{zIndex:100},children:[lh("div",{style:NI(e),className:"no-scrollbar",ref:t.main,...n.main,children:e.children}),lh("div",{style:ND,...n.edge})]})})}var ML=Object.freeze({__proto__:null,adjustColumnDiff:jI,adjustGridEdge:zI,adjustRowDiff:WI,calcIndicatorRangeByMerge:WD,calcIndicatorRangeMerge:_D,calcIndicatorRangeStyle:function(e,t,n){if(void 0===t)return{};let o=null;const i=e=>{if(null!==o)if(void 0!==e)for(const t in o){const n=t;void 0!==e[n]&&e[n]===o[n]||delete o[n]}else o={};else o={...e}};if(LD(t,{cell(t,n){const o=$D(t,n),r=e.cells?.[o]?.style;i(r)},row(t){const n=e.rows?.[t]?.style;i(n)},column(t){const n=e.columns?.[t]?.style;i(n)},infinite(){const t=e.defaultCell?.style;i(t)}}),n&&o)for(let e in o){const t=e;void 0===n[t]&&delete o[t]}return{...n,...o??{}}},calcIndicatorRangeWithMerge:VD,calcMergeByIndicatorRange:jD,calcScrollBarXScale:JD,calcScrollBarXThumb:QD,calcSelectedCoordinatesWithMerge:zD,calcTransform:AI,checkBorder:TI,collapsedSelection:VI,copyIndicatorRangeCell:FN,deleteCell:RN,deleteCellProp:(e,t,n)=>o=>{const i=$D(e,t),r=o.cells?.[i];return r?(r[n]&&delete r[n],Sc(r)&&delete o.cells?.[i],Sc(o.cells)&&delete o.cells,o):o},deleteCellProps:SN,deleteCellStyle:(e,t,n)=>o=>{const i=$D(e,t),r=o.cells?.[i];return r?.style?(r.style[n]&&delete r.style[n],Sc(r.style)&&delete r.style,Sc(r)&&delete o.cells?.[i],Sc(o.cells)&&delete o.cells,o):o},deleteColumn:wN,deleteRow:CN,existCell:JI,existCellState:(e,t,n)=>o=>{o=JI(e,t)(o);const i=$D(e,t);return void 0===o.cells[i].state&&(o.cells[i].state=n??{}),o},existCellStyle:QI,existColumn:GI,existColumnStyle:XI,existDefaultCell:eN,existDefaultCellStyle:tN,existRow:YI,existRowStyle:KI,expandAnchorIndicator:KN,expandDraggerIndicator:GN,expandSelection:$I,getCellSize:function(e,t,n){const o=$D(t,n),i=e.cells?.[o]?.merge;if(!i)return{height:UD(e,t),width:qD(e,n)};const{rowStartIndex:r,rowEndIndex:l,columnStartIndex:s,columnEndIndex:c}=WD(i);return{height:UD(e,r,l),width:qD(e,s,c)}},getColumnIndex:YD,getColumnOffset:XD,getColumnSize:qD,getIndexByKey:ZD,getKeyByIndex:$D,getMiniAxisXRect:function(e){if(void 0===e.indicatorRange)return{left:0,width:0};const{columnStartIndex:t,columnEndIndex:n}=e.indicatorRange;return{left:XD(e,t),width:qD(e,t,n)}},getMiniAxisYRect:function(e){if(void 0===e.indicatorRange)return{top:0,height:0};const{rowStartIndex:t,rowEndIndex:n}=e.indicatorRange;return{top:GD(e,t),height:UD(e,t,n)}},getPreviewRect:nI,getRangeRect:iI,getRowIndex:KD,getRowOffset:GD,getRowSize:UD,getSelectedRect:oI,getSelectorRect:tI,gridStyle:LI,hotkeys:rI,includeIndicatorRange:FD,indicatorStyle:BI,insertColumn:bN,insertRow:yN,interateCell:function(e,t){const n=Object.keys(e),o=n.length;let i=0;for(;i<o;){const o=n[i],r=ZD(o);t(r.rowIndex,r.columnIndex,e[o]),i++}},interateCellByColumnIndex:RD,interateCellByRowIndex:OD,interateColumn:MD,interateIndicatorRange:LD,interateIndicatorRangeCell:AD,interateIndicatorRangeColumn:TD,interateIndicatorRangeRow:BD,interateRow:function(e,t){const n=Object.keys(e),o=n.length;let i=0;for(;i<o;)t(Number(n[i])),i++},isAddOneColumnToLeft:pI,isAddOneColumnToRight:vI,isAddOneRowToBottom:hI,isAddOneRowToTop:fI,isBackspace:bI,isCellKey:function(e){return 2===e.split(".").length},isCopy:sI,isCut:lI,isDeleteCurrentColumn:mI,isDeleteCurrentRow:gI,isEqualSelectedIndicator:function(e,t){if(!PD(e)||!e||!t)return!1;const{rowStartIndex:n,columnStartIndex:o}=e,{rowIndex:i,columnIndex:r}=t;return n===i&&o===r},isExpandBackward:EI,isExpandDown:II,isExpandForward:kI,isExpandUp:DI,isIndicatorOutView:function(e){const{indicatorRange:t,rowStartIndex:n,columnEndIndex:o,rowEndIndex:i,columnStartIndex:r}=e;return!t||(t.rowEndIndex<=n||t.rowStartIndex>=i||t.columnEndIndex<=r||t.columnStartIndex>=o)},isMerge:yI,isMoveBackward:CI,isMoveDown:SI,isMoveForward:wI,isMoveUp:xI,isPaste:cI,isRangeInclude:HD,isRangesInclude:function(e,t){return e.some((e=>HD(e,t)))},isSelectAll:aI,isSelectCurrentColumn:dI,isSelectCurrentRow:uI,mainStyle:NI,moveBackward:jN,moveBackwardExpand:$N,moveDown:zN,moveDownExpand:UN,moveForward:WN,moveForwardExpand:ZN,moveIndicatorRangeCell:PN,moveUp:VN,moveUpExpand:qN,reduceStyle:uN,reflowColumn:hN,reflowRow:pN,removeAvaliableStyle:fN,removeCellMerge:ON,removeColumnProps:IN,removeDefaultCellProps:LN,removeIndicatorRangeProps:TN,removeRowProps:kN,removeStyle:dN,resetColumnSize:sN,resetGridSize:cN,resetRowSize:lN,resizeColumn:oN,resizeRow:nN,resizeSheet:(e,t)=>e=>e,scrollGrid:_I,scrollSelectedCoordinatesIntoView:()=>e=>{if(void 0===e.selectedCoordinates)return e;const{scrollLeft:t,scrollTop:n,clientWidth:o,clientHeight:i,selectedCoordinates:{rowIndex:r,columnIndex:l}}=e;let s=0,c=0;const a=GD(e,r),u=UD(e,r),d=XD(e,l),f=qD(e,l);return a<n?c=a-n:a+u>i+n&&(c=a+u-(i+n)),d<t?s=d-t:d+f>o+t&&(s=d+f-(o+t)),e=_I(s,c)(e)},scrollSheetXSafty:eI,selectAll:vN,setAvaliableStyle:e=>t=>{if(void 0!==t.rows)for(const n in t.rows)t=aN(Number(n),1/0,e)(t);if(void 0!==t.columns)for(const n in t.columns)t=aN(1/0,Number(n),e)(t);if(void 0!==t.cells)for(const n in t.cells){const{rowIndex:o,columnIndex:i}=ZD(n);t=aN(o,i,e)(t)}return t},setAxisColumn:mN,setAxisRow:gN,setCellMerge:MN,setCellProps:xN,setClientHeight:PI,setClientWidth:FI,setColumnMinSize:rN,setColumnProps:DN,setColumnResize:oL,setColumnResizeIndex:iL,setContextMenuRect:_N,setContextMenuVisible:HN,setDefaultCellProps:NN,setEditPending:YN,setIndicatorAnchor:eL,setIndicatorDrag:QN,setIndicatorRange:ZI,setIndicatorRangeProps:BN,setIndicatorRangeStyle:e=>t=>(void 0===t.indicatorRange||LD(t.indicatorRange,{row(n){t.columns&&MD(t.columns,(o=>{t=dN(n,o,e)(t)})),t.cells&&OD(t.cells,n,(o=>{t=dN(n,o,e)(t)})),t=aN(n,1/0,e)(t)},column(n){t.rows&&MD(t.rows,(o=>{t=dN(o,n,e)(t)})),t.cells&&RD(t.cells,n,(o=>{t=dN(o,n,e)(t)})),t=aN(1/0,n,e)(t)},cell(n,o){t=aN(n,o,e)(t)},infinite(){t=aN(1/0,1/0,e)(t),t=fN(e)(t)}}),t),setPreviewIndicatorRange:XN,setPreviewSelectedCoordinates:JN,setResizeVisible:e=>t=>(t.resize.visible=e,t),setRowMinSize:iN,setRowProps:EN,setRowResize:tL,setRowResizeIndex:nL,setScrollBarVisible:rL,setScrollHeight:OI,setScrollLeft:e=>t=>(t.scrollLeft=Math.max(e,0),t),setScrollTop:e=>t=>(t.scrollTop=Math.max(e,0),t),setScrollWidth:RI,setScrolling:HI,setScrollingDebounce:MI,setSelectedCoordinates:UI,setStyle:aN,singleIndicatorRange:PD,syncScrollIndicator:qI,toggleCellMerge:AN,writeToClipboard:async function(e){const{indicatorRange:t}=e}});function OL({portal:e=(e=>e),...t}){const[n,o]=Od((()=>({resize:{visible:!1},scrollBar:{visible:!1}}))),i={...t,...n};return lh(Kk,{value:o,children:sh(BL,{...i,children:[lh(fL,{...i}),lh(yL,{...i}),lh(SL,{...i}),e(lh(NL,{...i}))]})})}const RL=U(null),PL=U(null),FL=U({current:0}),HL=U(null),_L=U({current:[]}),jL=U({current:0}),WL=U(null),zL=Pf?38:30,VL={position:"relative",userSelect:"none",height:"100%"},$L={position:"relative",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},ZL={position:"relative",height:"100%",width:"100%"},UL={pointerEvents:"none",position:"absolute",top:0,left:-10,right:-10,zIndex:1,backgroundColor:mf,boxShadow:"0 -4px 8px rgba(0, 0, 0, 0.6)"},qL={position:"absolute",top:0,left:0,right:0,zIndex:1,backgroundColor:mf,boxShadow:"0 -4px 8px rgba(0, 0, 0, 0.6)"},YL={position:"absolute",left:0,right:0,transition:"background-color 400ms",height:zL},KL={position:"relative",height:zL},GL={transition:"top 100ms linear",willChange:"top"},XL={animation:"80ms fadein"},JL={height:"100%"},QL={position:"absolute",left:0,right:0,opacity:1,pointerEvents:"none",WebkitUserDrag:"none",boxSizing:"border-box",backgroundColor:yf},eB={height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:10,cursor:"pointer",color:kf},tB={display:"flex",alignItems:"center",flex:1,position:"relative",height:"100%",top:Pf?.5:0},nB={display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",right:10,top:"50%",transform:"translate(0, -50%)",zIndex:1},oB={width:14,height:14,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",left:-20},iB={transform:"rotate(90deg)"},rB={width:14,height:14,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",left:-20},lB={fontSize:14,lineHeight:"18px",fontWeight:Bf,width:"100%",marginRight:24,display:"flex"},sB={borderRadius:Pf?3:2,position:"relative",width:Pf?34:22,height:Pf?30:18,display:"flex",justifyContent:"center",alignItems:"center"},cB={borderRadius:Pf?3:2,display:"flex",justifyContent:"center",alignItems:"center",width:Pf?26:22,height:Pf?22:18},aB={position:"relative",marginTop:6,zIndex:1},uB={...nB,top:"100%",width:22},dB={position:"absolute",left:-16,width:7,height:7,marginTop:.5,borderRadius:"50%",boxSizing:"border-box"},fB={borderWidth:1,borderStyle:"solid",marginTop:Pf?-.5:0,borderColor:kf},hB={width:6.5,height:6.5,marginTop:Pf?-.5:0,backgroundColor:Df},pB={position:"absolute",left:0,top:0,bottom:0,pointerEvents:"none",zIndex:1},vB="M0.0104141 6.335C0.0104141 6.68906 0.147836 7.02863 0.392449 7.27899C0.637061 7.52935 0.968827 7.67 1.31476 7.67C1.6607 7.67 1.99246 7.52935 2.23708 7.27899C2.48169 7.02863 2.61911 6.68906 2.61911 6.335C2.61911 5.98094 2.48169 5.64137 2.23708 5.39101C1.99246 5.14065 1.6607 5 1.31476 5C0.968827 5 0.637061 5.14065 0.392449 5.39101C0.147836 5.64137 0.0104141 5.98094 0.0104141 6.335ZM4.70607 6.335C4.70607 6.68906 4.84349 7.02863 5.0881 7.27899C5.33271 7.52935 5.66448 7.67 6.01041 7.67C6.35635 7.67 6.68811 7.52935 6.93273 7.27899C7.17734 7.02863 7.31476 6.68906 7.31476 6.335C7.31476 5.98094 7.17734 5.64137 6.93273 5.39101C6.68811 5.14065 6.35635 5 6.01041 5C5.66448 5 5.33271 5.14065 5.0881 5.39101C4.84349 5.64137 4.70607 5.98094 4.70607 6.335ZM9.40172 6.335C9.40172 6.68906 9.53914 7.02863 9.78375 7.27899C10.0284 7.52935 10.3601 7.67 10.7061 7.67C11.052 7.67 11.3838 7.52935 11.6284 7.27899C11.873 7.02863 12.0104 6.68906 12.0104 6.335C12.0104 5.98094 11.873 5.64137 11.6284 5.39101C11.3838 5.14065 11.052 5 10.7061 5C10.3601 5 10.0284 5.14065 9.78375 5.39101C9.53914 5.64137 9.40172 5.98094 9.40172 6.335Z";function gB({width:e=12,fill:t=(Pf?If:Df)}){return lh("svg",{width:e,viewBox:"0 0 12 12",children:lh("path",{fill:t,d:vB})})}const mB="M11.1537 7.26559L1.60773 12.777C1.47083 12.856 1.29703 12.8568 1.16032 12.7781C1.0236 12.6993 0.937375 12.55 0.937564 12.3922L0.935701 1.36626C0.93589 1.2085 1.02346 1.05838 1.16036 0.979338C1.29727 0.900296 1.47106 0.899523 1.60778 0.978238L11.152 6.48662C11.2887 6.56533 11.375 6.71468 11.3748 6.87244C11.3746 7.0302 11.2906 7.18654 11.1537 7.26559V7.26559Z";function yB({width:e=12,fill:t=Df,style:n}){return lh("svg",{width:e,viewBox:"0 0 12 13",style:n,children:lh("path",{fill:t,d:mB})})}function bB({width:e=6,fill:t=kf,style:n}){return lh("svg",{width:e,viewBox:"0 0 6 12",style:n,children:lh("path",{d:"M0 1.5L4.5 6L0 10.5L0 12L6 6L0 -1.2666e-07L0 1.5Z",fill:t})})}const CB="M11.1996 5.29346H6.71914V0.813148C6.71914 0.382708 6.43124 0.0339355 6.07639 0.0339355H5.93333C5.57822 0.0339355 5.29058 0.382695 5.29058 0.813148V5.29346H0.810022C0.379705 5.29346 0.0308094 5.58135 0.0308094 5.93633V6.07927C0.0308094 6.43426 0.379705 6.72214 0.810022 6.72214H5.29033V11.2025C5.29033 11.6329 5.57822 11.9817 5.93333 11.9817H6.07613C6.43124 11.9817 6.71914 11.6329 6.71914 11.2025V6.72213H11.1996C11.6298 6.72213 11.9788 6.43424 11.9788 6.07926V5.93632C11.9788 5.58135 11.6298 5.29346 11.1996 5.29346Z";function wB({width:e=12,fill:t=(Pf?If:Df)}){return lh("svg",{width:e,viewBox:"0 0 12 12",children:lh("path",{fill:t,d:CB})})}const xB=e=>t=>(t.more=e,t),SB=e=>t=>(t.active=e,t),EB=e=>t=>(t.scrollBar.visible=e,t);function kB(e,t,n){for(let o=0;o<e.length;o++){if(!e[o])continue;const i=t(e[o],n);if(!0===i)return;if(!1===i)continue;const r=e[o]?.children;r?.length&&kB(r,t,e[o])}}function DB(e,t,n=[]){for(let o=0;o<e.length;o++){if(!e[o])continue;const i=n.concat(o),r=t(e[o],i);if(!0===r)return;if(!1===r)continue;const l=e[o]?.children;l?.length&&DB(l,t,i)}}function IB(e){const t=[];let n=e.length-1;for(;n>=0&&e[n]&&(t.push(n),!1!==e[n].expand);){const t=e[n].children;if(!t)break;n=(e=t).length-1}return t}function NB(e,t,n,o,i){if(0===t)return;let r=!1;const l=Date.now(),s=100;let c=0;requestAnimationFrame((function a(){r?i?.():(!function(){const n=Date.now(),i=Math.min(s,n-l);i>=s&&(r=!0);let a=i/s*t;a>0?a=Math.floor(a):a<0&&(a=Math.ceil(a));const u=a-c;c=a;const{onChange:d,value:f}=e.current;d(Md(eT(e,u,o))(f))}(),n.current=requestAnimationFrame(a))}))}function LB(e){const t=e.value.scrollTop/(e.value.scrollHeight-e.value.clientHeight);return isNaN(t)?1:Math.min(1,t)}function BB(e){const t=Math.max(1,e.value.scrollHeight/e.value.clientHeight);return Math.max(e.value.clientHeight/t,hw)}function TB(e){return(e?.top??0)+(e?.bottom??0)}function AB(e,t,n){let o=0,i=!1;const{tree:r,scrollTop:l,scrollOffset:s,clientHeight:c}=e.value;kB(r,(e=>!!i||(o++,n.id===e.id&&(i=!0),!1!==e.expand&&void 0)));const a=o*zL,u=s?.top??0,d=t.sticky.size-l+zL;return a+u<l+d+zL?a+u-l-d-zL:a+u>l+c?a+u-l-c:0}const MB=e=>{const{clientHeight:t,scrollHeight:n,scrollOffset:o}=e.value;return{...$L,...e.style,paddingTop:o?.top??0,height:t,overflow:Pf?"scroll":n>t?"hidden":"unset"}},OB=e=>{const t=Pf?0:-e.value.scrollTop,n={position:"relative",overflow:"hidden",height:e.value.scrollHeight,transform:`translate(0, ${t}px)`};return Of&&(delete n.transform,n.top=`${t}px`),n},RB=(e,t)=>{const{scrollTop:n}=e.value;if(0===n)return{};let o=1;t.sticky.size&&(o+=t.sticky.size-n+zL),o=Math.max(0,o);let i=n-1;return Pf&&(o=Math.ceil(o/zL)*zL,i=0),{...UL,height:o,top:i}},PB=(e,t)=>{const n=e.value.scrollOffset,o=t.length*zL,i={...qL,height:o,top:n?.top??0};return e.value.scrollTop<=0&&delete i.boxShadow,i},FB=Vs(((e,t)=>{const{value:n,onChange:o}=e.current;o(Md(nT(t))(n))}),100);function HB(e,t,n){const{scrollTop:o,clientHeight:i,scrollOffset:r,scrollHeight:l}=t;if(l<=i||n<0)return!0;const s=TB(r);return!(o+i+(r?.lower??0)<zL*(n-1)+s)}function _B(e,t){let n=0,o=e[t[n++]];for(;n<t.length;){if(!o?.children)return null;o=o.children[t[n++]]}return o||null}function jB(e,t){if(0===Js(t))return ec(t);if(0===t.length)return t;let n=_B(e,t=zB(t));for(;n?.children?.length&&!1!==n.expand;)n=_B(e,t=[...t,n.children.length-1]);return t}function WB(e,t){let n=_B(e,t);if(n?.children?.length&&!1!==n.expand)return[...t,0];let o=_B(e,ec(t));for(;o?.children&&Js(t)>=o.children.length-1;)t=ec(t),o=_B(e,ec(t));return 0===t.length?t:t=VB(t)}function zB(e){return 0===e.length||0===e[e.length-1]?e:[...e.slice(0,-1),e[e.length-1]-1]}function VB(e){return 0===e.length?e:[...e.slice(0,-1),e[e.length-1]+1]}function $B(e,t){if(!t.length)return e;const n=tc(t)??0,o=e.children?.slice(n);return o?.length&&o[0]&&(o[0]=$B(o[0],t.slice(1))),{...e,edge:!0,children:o}}function ZB(e,t=[],n,o,i=0,r,l){const s=t.length;if(0===s)return;const{scrollTop:c,clientHeight:a,scrollOffset:u,renderStart:d}=e.value;let f=c+a+(u?.lower??0)-(n.current*zL+TB(u));const h=d?.path??[0];let p=r?0:h[i]??0;const v=t[p];if(!v)return;let g=h.length-1>i;!0===r&&(g=!1);const m="inside"===l?l:v.move,y=[lh(yT,{index:p,...v,move:m,inner:r,level:i,edge:g},v.id)];for(p++,f-=zL;s>p&&f>0;){const e=t[p];if(void 0===e)return y;const n="inside"===l?l:e.move;y.push(lh(yT,{index:p,...e,inner:!0,move:n,level:i},e.id)),p++,f-=zL}if(2*(i+1)>a/zL)return y;if(c<=0&&!Pf)return y;let b=n.current,C=null;const w=[],x=c+i*zL;for(let e=0;e<y.length;e++){let t=y[e].props;if("page"!==t.type&&"root"!==t.type||!1===t.expand||!t.children?.length){if(C){b+=UB(w),w.length=0;const e=b*zL,t=e-zL;if(x<e&&x>t){C.top=t,delete C.sticky;break}if(!(x>=e))break;delete C.top,delete C.sticky,C=null}}else{b+=UB(w),w.length=0;const e=b*zL,n=e-zL;if(!(x>=e)){if(C&&x>n){C.top=n,delete C.sticky;break}break}t.top=x,t.sticky=!0,delete C?.top,delete C?.sticky,C=t}t.edge&&h.length>i&&(t=$B(t,h.slice(i+1))),w.push(t)}if("page"===C?.type||"root"===C?.type){if(p===s&&Js(y)?.props===C){b+=UB(w),w.length=0;const e=b*zL,t=e-zL;x<e&&x>t?(C.top=t,delete C.sticky):x>=e&&(delete C.top,delete C.sticky)}C.top&&o.current<C.top&&(o.current=C.top)}return y}function UB(e){let t=0;return kB(e,(e=>{if(e.edge||t++,!1===e.expand)return!1})),t}function qB(e){const t=e.renderStart?.path??[];let n=0,o=0,i=e.tree;for(;n<t.length;){const e=t[n]??0;o+=YB(i.slice(0,e))+1,i=i[e]?.children??[],n++}return o>0&&o--,o}function YB(e){let t=0;return kB(e,(e=>{if(t++,!e.expand)return!1})),t}const KB=e=>t=>{const{path:n,id:o}=e,{more:i}=t;if(t.more=void 0,n){if(i){const e=_B(t.tree,i);e&&(e.more=!1)}if(!Ec(i,n)){const e=_B(t.tree,n);e&&(e.more=!e.more,e.more&&(t.more=e.path))}}else DB(t.tree,((e,n)=>{e.id===o?(e.more=!e.more,e.more&&(t.more=n)):e.more=!1}));return t.isEditPending=!0,t},GB=()=>e=>(kB(e.tree,(e=>{e.more=!1})),e.isEditPending=!0,e),XB=e=>t=>(t.isEditPending=e,t),JB=(e=[],t=0)=>n=>{let o=n.tree;if(e.length){const t=_B(n.tree,e);if(!t)return n;if(t.path=e,!t.children)return n;o=t.children}for(let n=t;n<o.length;n++){const t=e.concat(n),i=o[n];i&&(i.path=t,i.children?.length&&DB(i.children,((e,t)=>{e&&(e.path=t)}),t))}return n},QB=()=>e=>(e.renderStart={path:[],index:0},e.scrollTop=0,e.isEditPending=!0,e),eT=(e,t,n)=>o=>0===t||o.scrollHeight<=o.clientHeight?o:(o=nT(!0)(o),FB(e,!1),o=tT(t)(o),o=rT(n.current)(o)),tT=e=>t=>{if(0===e)return t;if(t.scrollHeight<=t.clientHeight)return t=QB()(t);t.scrollTop+=Math.floor(e);let n=t.renderStart?.index??0,o=t.renderStart?.path??[0];0===o.length&&(o=[0]);const i=t.scrollOffset?.top??0,r=t.scrollOffset?.upper??0,l=Pf?i:0;if(t.scrollTop<0)t.scrollTop=0,n<=0&&(o.length>1||o[0]>0)&&n++;else if(t.scrollTop>t.scrollHeight-t.clientHeight+l){const e=t.scrollHeight-t.clientHeight;t.scrollTop=e+l}let s=t.scrollTop-zL*n-i-r;if(e>0){const e=IB(t.tree);for(;s>=zL&&!Ec(o,e);)s-=zL,n++,o=WB(t.tree,o)}else if(e<0){for(;s<=0&&n>0;)s+=zL,n--,o=jB(t.tree,o);n=Math.max(o.length-1,n)}return t.renderStart={path:o,index:n},t},nT=e=>t=>(t.isScrolling=e||void 0,t),oT=e=>t=>(t.scrollActive=e||void 0,t),iT=e=>t=>(t.scrollSmooth=e||void 0,t),rT=e=>t=>{const n=t.scrollOffset?.top??0,o=zL*(e+1)+(Pf?0:n);return o>t.scrollHeight&&(t.scrollHeight=o),t},lT=()=>e=>{const t=e.scrollOffset?.top??0;let n=zL+(Pf?0:t);return kB(e.tree,(e=>{if(n+=zL,!1===e.expand)return!1})),e=sT(n)(e)},sT=e=>t=>{const n=t.scrollOffset?.top??0;return e<t.clientHeight-n&&(e=t.clientHeight-n),t.scrollHeight=e,t=cT()(t)},cT=()=>e=>{const{clientHeight:t,scrollTop:n,scrollHeight:o,scrollOffset:i}=e,r=Pf?i?.top??0:0,l=Math.max(0,Math.min(o-t+r,n));return l!==n&&(e=tT(l-n)(e)),e},aT=(e,t)=>n=>{let{scrollTop:o,renderStart:i,tree:r}=n,l=0,s=!1;if(kB(n.tree,(t=>(s||l++,!!s||(t.id===e.id&&(s=!0),!1!==t.expand&&void 0)))),!1===s)return n;const c=i?.path.length??0;let a=0,u=0;for(;a<c;){const e=i?.path[a]??0;if(u+=YB(r.slice(0,e))+1,r=r[e]?.children??[],u>=l)break;a++}let d=(t??0)-o+zL;const f=(a+1)*zL;f<d&&(d=f);const h=l*zL-d;return h>o?n:(n=tT(h-o)(n),n=oT(!0)(n))},uT=(e,t,n)=>o=>{o=aT(e,t)(o);let{scrollHeight:i,clientHeight:r}=o,l=i<=r,s=!1;function c(e){if(void 0===e.expand?e.expand=!1:e.expand=!e.expand,void 0!==n&&(e.expand=n),l)return!0;kB(e.children??[],(({expand:t})=>{if(!1===e.expand?i-=zL:i+=zL,!1===t)return!1}))}if(e.path){const t=_B(o.tree,e.path);t&&(s=!0,c(t))}else kB(o.tree,(t=>!!s||(t.id===e.id?(s=!0,c(t),!0):!1!==t.expand&&void 0)));return!1===s?o:(l=i<=r,o=l?lT()(o):sT(i)(o),o=XB(!0)(o))},dT=e=>t=>(t.sticky.size=e,t);const fT={default:xf,hover:Cf,active:wf};function hT(e){return lh(ch,{style:{...sB,backgroundColor:e.more?bf:"transparent"},onClick:e.onClick,onPointerDown:e.onPointerDown,children:lh(dv,{touchDelay:0,colors:fT,style:cB,children:lh(gB,{})})})}function pT(e){return lh(ch,{style:sB,onClick:e.onClick,onPointerDown:e.onPointerDown,children:lh(dv,{touchDelay:0,colors:fT,style:cB,children:lh(wB,{})})})}function vT(e){const t=R(PL);let n="hollow"===e.type?fB:hB;if(e.active&&t.activeStyle?.color){const o=t.activeStyle.color;n="hollow"===e.type?{...n,borderColor:o}:{...n,backgroundColor:o}}return lh("div",{style:{...dB,...n}})}function gT(e){const[t,n]=Od((()=>({more:!1,active:!1}))),[o,i]=$({}),[r,l]=$(void 0),s=R(PL),c=R(HL),a=R(jL),u=R(WL),d=Z(null),f=Z(null),h=function(e,t,n){const o=Dd(R(PL)),i=Dd(e),r=Dd(t),l=R(jL),s=R(WL),c=Nd("pointerleave"),a=Nd("pointerenter"),u=Nd("pointermove"),d=Nd("pointerenter"),f=Nd("pointerleave");return F((()=>{const e=d.subscribe((()=>{const{more:e}=r.current;!0!==e&&n(xB(!0))}));return()=>e.unsubscribe()}),[n,d,r]),F((()=>{const e=f.subscribe((()=>{n(xB(!1))}));return()=>e.unsubscribe()}),[n,f]),F((()=>{const e=c.pipe(Du(0)).subscribe((()=>{n(SB(!1))}));return()=>e.unsubscribe()}),[n,c]),F((()=>{const e=c.subscribe((()=>{const e=i.current,t=r.current,{onPointerLeaveBranch:n}=o.current;n?.(e,s,t,l.current)}));return()=>e.unsubscribe()}),[n,c,s,i,r,o,l]),F((()=>{const e=a.subscribe((()=>{const e=i.current,t=r.current,{onPointerEnterBranch:n}=o.current;n?.(e,s,t,l.current)}));return()=>e.unsubscribe()}),[n,a,s,i,r,o,l]),F((()=>{const e=u.subscribe((()=>{const e=i.current,t=r.current,{onPointerMoveBranch:c}=o.current;c?.(e,s,t,l.current),!0!==t.active&&n(SB(!0))}));return()=>e.unsubscribe()}),[n,u,s,i,r,o,l]),{leaf:Ld([c,a,u]),more:Ld([d,f])}}(e,t,n),p=e.level??0,v=n=>{n.stopPropagation();const{value:o,onChange:i,onClickMore:r,showMore:l}=s;if(!1===l)return;const c=r?.(e,u,t);o&&i&&!c&&i(Md(KB(e))(o))},g=n=>{if(!s.draggable)return;s.onDrag?.(n,e,u,t,a.current);const o=n.target;if(!o)return;const i=n=>{s.onDrag?.(n,e,u,t,a.current)},r=e=>{i(e),o.removeEventListener("drag",i),o.removeEventListener("dragend",r)};o.addEventListener("drag",i),o.addEventListener("dragend",r)};F((()=>{if(e.more){const e=d.current?.getBoundingClientRect(),t=f.current?.getBoundingClientRect(),n=c.current?.getBoundingClientRect();if(!e||!t||!n)return;const o=t.bottom,r=n.bottom-o;e.height>r&&r<o?(i({transform:`translate(0, calc(-100% - ${zL+12}px))`}),l(o-zL-64)):(i({}),l(r-zL))}}),[e.more,c]);const m=sc(e.title)||Lc(e.title)?e.title:s.render?.(e,u,t),y=e.more&&s.options?.(e,u,t),b={...eB,...e.style,paddingLeft:"root"!==e.type||e.icon?12:10,...s.leafStyle};t.more||e.more?b.backgroundColor=Sf:e.active&&(b.backgroundColor=bf);const C={...JL};let w;e.active&&(C.backgroundColor=bf),"above"===e.move?w={...QL,top:-1,height:2}:"below"===e.move?w={...QL,bottom:-1,height:2}:"inside"===e.move?w={...QL,top:0,bottom:0,opacity:.24}:"drag"===e.move&&(w={...QL,top:0,bottom:0,backgroundColor:"transparent",border:`1px dashed ${yf}`});let x=!1;"root"!==e.type&&s.showDot&&!1!==e.dot&&(x=!0),s.flat&&(x=!1);let S=!1;"root"===e.type&&s.showRootArrow&&(S=!0),"root"!==e.type&&(e.children?.length??0)>0&&(S=!0),s.flat&&(S=!1);let E=!1;"root"===e.type&&e.icon&&(E=!0);let k=s.showMore;!1!==k&&!0!==k&&(t.more||t.active||e.more)&&(k=!0);let D=18*p+(s.showRootArrow||E?18:0);!1!==e.dot||S||(D-=15),s.flat&&(D=0);const I=!1===e.touchable||s.dragging?{default:xf,hover:xf,active:Ef}:uv;return sh("div",{style:C,draggable:s.draggable,onDragStart:g,onDragEnter:g,onDragLeave:g,onDragOver:g,children:[e.tag&&lh("div",{style:pB,children:lh("svg",{width:10,height:zL,children:lh("path",{fill:yf,fillOpacity:!1===e.expand?.6:1,d:`M 0 0 L 3 3 L 3 ${zL-3} L 0 ${zL} Z`})})}),lh("div",{style:uB,ref:f}),lh(dv,{colors:I,style:b,...h.leaf,onClick:n=>{n.stopPropagation();const{value:o,showMore:i,onChange:r,onClickBranch:l}=s;if(o&&r&&!1!==i){const t=[GB()];"page"!==e.type&&"root"!==e.type||t.push(aT(e,a.current)),r(Md(...t)(o))}l?.(e,u,t,a.current)},onDoubleClick:n=>{n.stopPropagation();const{value:o,showMore:i,onChange:r,onDoubleClickBranch:l}=s;if(o&&r&&!1!==i){const t=[GB()];"root"===e.type&&t.push(QB()),r(Md(...t)(o))}l?.(e,u,t)},children:m&&sh("div",{style:{...tB,marginLeft:D},onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),v(e)},children:[S?lh(ch,{onClick:n=>{n.stopPropagation();const{value:o,onChange:i,onClickArrow:r}=s,l=r?.(e,u,t,a.current);o&&!l&&i?.(Md(uT(e,a.current))(o))},style:{...oB,...!1!==e.expand&&iB,marginTop:Pf&&"outline"!==e.type?e.expand?0:-.5:0,marginLeft:"outline"===e.type?.5:0},children:"outline"!==e.type?lh(bB,{width:Pf?6.5:5.5}):lh(yB,{width:7.5})}):x?lh(vT,{type:"outline"===e.type?"solid":"hollow"}):null,E&&e.icon?lh(ch,{style:rB,children:lh(e.icon,{...e})}):null,lh("div",{style:{...lB,marginRight:"root"===e.type||!1===k?0:24},children:m})]})}),k&&sh("div",{style:nB,children:[lh(ch,{...h.more,children:lh(hT,{more:!!e.more,onClick:v,onPointerDown:e=>e.stopPropagation()})}),s.showAdd&&lh(ch,{style:{marginRight:-4},children:lh(pT,{onClick:n=>{n.stopPropagation();const{onClickAdd:o}=s;o?.(e,u,t)},onPointerDown:e=>e.stopPropagation()})}),e.more&&y&&$k(lh(ch,{style:{...aB,...o},ref:d,onClick:e=>e.stopPropagation(),children:We(y)?lh(gg,{style:{width:Mf?160:180},maxHeight:r,options:y,onClick:n=>{const{value:o,onChange:i,onClickMenu:r}=s;o&&i&&i(Md(KB(e))(o)),r?.(n,e,u,t,a.current)}}):y}),c,f)]}),e.move&&lh("div",{style:w})]})}function mT(e){const[t,n]=Od((()=>({more:!1,active:!1}))),o=R(PL),i=R(jL),r=R(WL),l=Z(null),s=e.level??0,c=n=>{n.stopPropagation();const{value:i,onChange:l,onClickMore:s,showMore:c}=o;if(!1===c)return;const a=s?.(e,r,t);i&&l&&!a&&l(Md(KB(e))(i))},a=sc(e.title)||Lc(e.title)?e.title:o.render?.(e,r,t),u={...eB,...e.style,paddingLeft:"root"!==e.type||e.icon?12:10,...o.leafStyle};t.more||e.more?u.backgroundColor=Sf:e.active&&(u.backgroundColor=bf,o.activeStyle&&Object.assign(u,o.activeStyle));const d={...JL};e.active&&(d.backgroundColor=bf);let f=!1;"root"!==e.type&&o.showDot&&!1!==e.dot&&(f=!0),o.flat&&(f=!1);let h=!1;"root"===e.type&&o.showRootArrow&&(h=!0),"root"!==e.type&&(e.children?.length??0)>0&&(h=!0),o.flat&&(h=!1);let p=!1;"root"===e.type&&e.icon&&(p=!0);let v=o.showMore;!1!==v&&!0!==v&&(t.more||t.active||e.more)&&(v=!0);let g=18*s+(o.showRootArrow||p?18:0);!1!==e.dot||h||(g-=15),o.flat&&(g=0);const m=!1===e.touchable?{default:xf,hover:xf,active:Ef}:uv;let y=kf,b=Df;if(e.active){const e=o.activeStyle?.color;e&&(y=e,b=e)}return sh("div",{style:d,children:[e.tag&&lh("div",{style:pB,children:lh("svg",{width:10,height:zL,children:lh("path",{fill:yf,fillOpacity:!1===e.expand?.6:1,d:`M 0 0 L 3 3 L 3 ${zL-3} L 0 ${zL} Z`})})}),lh("div",{style:uB,ref:l}),lh(dv,{colors:m,style:u,onClick:n=>{n.stopPropagation();const{value:l,showMore:s,onChange:c,onClickBranch:a}=o;a?.(e,r,t,i.current)},onDoubleClick:n=>{n.stopPropagation();const{value:i,showMore:l,onChange:s,onDoubleClickBranch:c}=o;c?.(e,r,t)},children:a&&sh("div",{style:{...tB,marginLeft:g},onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),c(e)},children:[h?lh(ch,{onClick:n=>{n.stopPropagation();const{value:l,onChange:s,onClickArrow:c}=o,a=c?.(e,r,t,i.current);l&&!a&&s?.(Md(uT(e,i.current))(l))},style:{...oB,...!1!==e.expand&&iB,marginTop:Pf&&"outline"!==e.type?e.expand?0:-.5:-1,marginLeft:"outline"===e.type?.5:0},children:"outline"!==e.type?lh(bB,{fill:y,width:Pf?6.5:5.5}):lh(yB,{fill:b,width:7.5})}):f?lh(vT,{active:e.active,type:"outline"===e.type?"solid":"hollow"}):null,p&&e.icon?lh(ch,{style:rB,children:lh(e.icon,{...e})}):null,lh("div",{style:{...lB,marginRight:"root"===e.type||!1===v?0:24},children:a})]})}),v&&sh("div",{style:nB,children:[lh(ch,{children:lh(hT,{more:!!e.more,onClick:c,onPointerDown:e=>e.stopPropagation()})}),o.showAdd&&lh(ch,{style:{marginRight:-4},children:lh(pT,{onClick:n=>{n.stopPropagation();const{onClickAdd:i}=o;i?.(e,r,t)},onPointerDown:e=>e.stopPropagation()})})]})]})}function yT(e){const t=R(PL),n=R(FL),o=R(_L),i=R(jL),r=R(WL),l=Dd(e),{id:s,top:c,type:a,edge:u,inner:d,disabled:f,expand:h,children:p,more:v,move:g}=e,{value:{isEditPending:m,scrollTop:y}}=t,b=(e.level??0)+1,C={...YL};let w=!1;"root"!==a&&"page"!==a||Pf?C.top=n.current*zL:(void 0!==c?(C.top=c,e.sticky?C.zIndex=3:C.zIndex=2,w=!0):C.top=n.current*zL,e.sticky&&(C.backgroundColor=mf)),f&&(C.opacity=.5),!e.transition&&!t.transition||e.sticky||0===C.top||Object.assign(C,GL),!e.animation&&!t.animation||e.sticky||Object.assign(C,XL),u||n.current++;const x=HB(0,t.value,n.current),S="outline"===a?r??s:s,E=kd(Boolean(m||!!g||!!v)),k=!1===h?[]:ZB(t,p,n,i,b,d,g),D=W((()=>{const e=l.current;return lh(Pf?mT:gT,{...e})}),[E,y]);if(!x&&"root"!==a)return null;if(Pf){function I(e){if(!e)return;const t=e.level??0;o.current[t]=e,o.current.length=t+1}e.sticky&&I(e)}return sh(rh,{children:[(!u||w||"root"===a&&!Pf)&&lh("div",{style:C,children:D}),!1!==h&&lh(WL,{value:S,children:k})]})}function bT(e){const t=Dd(e),n=R(FL),o=_((e=>{const o=t.current,i=(e-LB(o))*(o.value.scrollHeight-o.value.clientHeight);o.onChange(Md(eT(t,i,n))(o.value))}),[t,n]),i=_((e=>{const o=t.current,i=Math.max(0,o.value.clientHeight*(e-1));o.onChange(Md(eT(t,i,n))(o.value))}),[t,n]),{clientHeight:r,scrollHeight:l}=e.value;return l>r?lh(yw,{visible:e.scrollBar.visible,thumb:BB(e),value:LB(e),onChange:o,className:e.className,onChangeInterval:i,...fw(e)}):null}function CT(e){const t=Dd(e),n=function(e,t){const n=Dd(e),o=R(FL),i=Z(-1),r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("wheel"),c=Nd("scroll"),a=Nd("pointerenter"),u=Nd("pointerleave"),d=Nd("pointerdown"),f=Nd("pointerenter"),h=Nd("pointerleave"),p=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]),F((()=>{const e=s.subscribe((e=>{if(Pf)return;e.stopPropagation(),e.preventDefault();const{value:t,onChange:r}=n.current;if(t.more)return;const l=t.clientHeight,s=Math.max(-l,Math.min(l,e.deltaY));Mf||Math.abs(s)<100?r(Md(eT(n,s,o))(t)):NB(n,s,i,o)})),t=c.subscribe((e=>{if(!Pf)return;e.stopPropagation();const{value:t,onChange:i}=n.current;if(t.more)return;if(t.scrollActive)return void i(Md(oT(!1))(t));const r=e.target.scrollTop-t.scrollTop;i(Md(eT(n,r,o),oT(!1))(t))}));return()=>{e.unsubscribe(),t.unsubscribe()}}),[n,s,c,o]),F((()=>{const e=bu(s,c,d.pipe(iv((()=>r.pipe(nv(u)).pipe(rv(l))))),f).subscribe((()=>{n.current.scrollBar.visible||t(EB(!0))}));return()=>e.unsubscribe()}),[n,t,s,c,d,a,u,f,r,l]),F((()=>{const e=bu(u,f.pipe(iv((()=>h.pipe(rv(p))))),f.pipe(iv((()=>h.pipe(nv(p)).pipe(nv(l))))),s.pipe(iv((()=>s.pipe(Yp(1e3)).pipe(rv(f))))),c.pipe(iv((()=>c.pipe(Yp(1e3)).pipe(rv(f))))),d.pipe(iv((()=>l.pipe(nv(h)))))).subscribe((()=>{n.current.scrollBar.visible&&t(EB(!1))}));return()=>e.unsubscribe()}),[n,t,s,c,d,a,u,f,h,p,r,l]),{main:Ld([s,c,d,a,u]),scrollBar:Ld([f,h,p])}}(e,R(RL)),o=Z(null),{value:{scrollTop:i,scrollActive:r,scrollSmooth:l}}=e;H((()=>{if(!Pf||!r)return;const e={top:i};l&&(e.behavior="smooth"),o.current?.scrollTo(e);const{value:n,onChange:s}=t.current;s(Md(oT(!1),iT(!1))(n))}),[t,i,r,l]);const s=e.ScrollView??"div";return sh(Pf?"div":hh,{style:ZL,children:[lh(s,{ref:o,className:"no-scrollbar",style:MB(e),...n.main,children:e.children}),!1!==e.showScrollBar&&lh(bT,{...e,className:e.scrollBarClassName,...n.scrollBar})]})}function wT(e){const t=R(_L),n=[];for(let e=0;e<t.current.length;e++){const o=t.current[e];if(o?.level!==e)break;n.push(o)}return lh("div",{style:PB(e,n),className:e.stickyClassName,children:n.map((e=>lh("div",{style:KL,children:lh(mT,{...e})},e.id)))})}var xT=Object.freeze({__proto__:null,ADD_PATH:CB,Add:pT,AddIcon:wB,Arrow:bB,BRANCH_HEIGHT:zL,Branch:yT,MORE_PATH:vB,Main:CT,More:hT,PageId:WL,ReadMore:gB,ScrollBar:bT,Sticky:jL,StickyMobile:wT,TITLE_HEIGHT:18,TRIANGLE_PATH:mB,TreeContext:PL,TreeDispatch:RL,TreeIndex:FL,TreePortal:HL,TreeSticky:_L,Triangle:yB,adjustBranchLocation:aT,adjustScrollTop:cT,calcBranchDelta:AB,calcReflowIndex:qB,calcScrollBarScale:LB,calcScrollBarThumb:BB,calcScrollOffset:TB,calcStickyDiff:function(e,t){const{scrollTop:n,scrollOffset:o}=e.value;if(t<0)return 0;const i=zL*(t-1),r=o?.top??0;return n>i?n-i-r:-r},contentStyle:OB,countTree:YB,genNextLevelPath:VB,genPrevLevelPath:zB,getBranchByPath:_B,getEndPath:IB,getNextPath:WB,getPrevPath:jB,getTreeSourcePath:function(e,t){const n=[],o=e.indexOf(t[0]);if(-1===o)return n;n.push(o);for(let e=1;e<t.length;e++){const o=t[e-1].children,i=o?.indexOf(t[e]);if(void 0===i||-1===i)break;n.push(i)}return n},glassStyle:e=>{const{scrollOffset:t}=e.value;return{...ZL,height:zL+(t?.top??0)}},isBranchInclude:function(e,t){let n=!1;return kB([e],(e=>{if(e.id===t.id)return n=!0,!0})),n},isBranchVisible:HB,mainStyle:MB,mapTree:function e(t,n,o){t=[...t];for(let i=0;i<t.length;i++){if(!t[i])continue;t[i]=n(t[i],o);const r=t[i]?.children;r?.length&&(t[i].children=e(r,n,t[i]))}return t},recursivePath:DB,recursiveTree:kB,recursiveTreeReverse:function e(t,n,o){for(let i=t.length-1;i>=0;i--){if(!t[i])continue;const r=n(t[i],o);if(!0===r)return;if(!1===r)continue;const l=t[i]?.children;l?.length&&e(l,n,t[i])}},recursiveTreeSource:function e(t,n,o=[],i=[]){for(let r=0;r<t.length;r++){if(!t[r])continue;const l=o.concat(t[r]),s=i.concat(r),c=n(l,s);if(!0===c)return;if(!1===c)continue;const a=t[r]?.children;a?.length&&e(a,n,l,s)}},resetBranceMore:GB,resetTreePath:JB,resetTreeState:QB,saftyTreeState:()=>e=>{const t=e.renderStart?.index??0;return qB(e)!==t&&(e=QB()(e)),e.tree[0].path||(e=JB()(e)),e},scrollDelta:tT,scrollToBranch:(e,t=!0)=>n=>{const{tree:o,scrollTop:i,scrollOffset:r,clientHeight:l,scrollHeight:s}=n;let c=r?.top??0,a=!1;if(kB(o,(t=>!!a||(c+=zL,t.id===e?(a=!0,!0):!1!==t.expand&&void 0))),!a)return n;if(t&&c>i&&c<i+l)return n;c>l/2?c<s-2*l/3&&(c-=l/3):c=0;return n=tT(c-i)(n)},scrollTree:eT,scrollTreeAnimation:NB,scrollTreeSafty:function e(t,n,o,i){const r=t.current,l=r.value.clientHeight;if(n>0){const s=Math.min(n,l),c=Md(eT(t,s,i))(r.value);r.onChange(c),(n-=l)>0&&(o.current=requestAnimationFrame((()=>{e(t,n,o,i)})))}else if(n<0){const s=Math.max(n,-l),c=Md(eT(t,s,i))(r.value);r.onChange(c),(n+=l)<0&&(o.current=requestAnimationFrame((()=>{e(t,n,o,i)})))}},setBranchActive:SB,setBranchMore:xB,setBranchPayload:(e,t)=>n=>(kB(n.tree,(n=>{n.id===e.id&&(n.payload=t)})),n.isEditPending=!0,n),setEditPending:XB,setScrollActive:oT,setScrollBarVisible:EB,setScrollHeight:sT,setScrollHeightByIndex:rT,setScrollSmooth:iT,setScrollTop:e=>t=>{const{clientHeight:n,scrollHeight:o,scrollOffset:i}=t,r=Pf?i?.top??0:0;return t.scrollTop=Math.max(0,Math.min(o-n+r,e)),t},setScrolling:nT,setScrollingDebounce:FB,setStickySize:dT,sliceBranchByPath:$B,stickyMobile:PB,stickyStyle:RB,syncScrollHeight:lT,toggleBranchArrow:uT,toggleBranchMore:KB,virtualRender:ZB});function ST({className:e,contentClassName:t,...n}){const[o,i]=Od((()=>({scrollBar:{visible:!1},sticky:{size:0}}))),r=Z(null),l=Z(0),s=Z(0),c=Z([]),a={...n,...o};!function(e,t,n,o,i,r){const l=Dd(e),s=Dd(t),c=Z(-1),{isEditPending:a}=e.value,u=kd(a);H((()=>{const{value:e,onChange:t}=l.current;e.isEditPending&&t(Md(XB(!1),rT(o.current))(e))}),[l,o,u]),H((()=>{t.sticky.size!==i.current&&n(dT(i.current))})),j(r,(()=>({scrollIntoView(e,t,n){const{value:i,onChange:r}=l.current;t?(cancelAnimationFrame(c.current),NB(l,e,c,o,n)):(cancelAnimationFrame(c.current),r(Md(eT(l,e,o))(i)))},scrollBranchIntoView(e,t,n){const{value:i,onChange:r}=l.current,a=AB(l.current,s.current,e);0!==a&&(t?(cancelAnimationFrame(c.current),NB(l,a,c,o,n)):(cancelAnimationFrame(c.current),r(Md(eT(l,a,o))(i))))}})))}(n,o,i,l,s,n.ref);const{tree:u,renderStart:d}=n.value;l.current=d?.index??0,s.current=0,c.current.length=0;const f=ZB(n,u,l,s);return lh(RL,{value:i,children:lh(PL,{value:n,children:lh(HL,{value:r,children:lh(FL,{value:l,children:lh(_L,{value:c,children:lh(jL,{value:s,children:lh(WL,{value:null,children:sh("div",{style:VL,className:e,children:[lh(CT,{...a,children:sh("div",{style:OB(n),className:t,children:[f,!Pf&&lh("div",{style:RB(n,o)})]})}),Pf&&lh(wT,{...a}),lh(zk,{ref:r})]})})})})})})})})}const ET={display:"flex",alignItems:"center"},kT={width:"0.75em",height:"0.75em",borderWidth:1.5,borderRadius:3,borderStyle:"solid",borderColor:"currentcolor",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginRight:"0.35em",cursor:"pointer"},DT={width:"0.45em",height:"0.28em",borderWidth:0,borderLeftWidth:2,borderBottomWidth:2,borderBottomLeftRadius:1,borderColor:"currentColor",borderStyle:"solid",transform:"rotate(-45deg)",position:"relative",top:-1.5},IT={};function NT(e){const[t,n]=$(e.defaultValue);let o=t;return void 0!==e.value&&(o=e.value),sh(ch,{style:{...ET,...e.style},children:[lh(ch,{style:{...kT,...e.checkStyle},onClick:()=>{void 0===e.value?(n(!t),e.onChange?.(!t)):e.onChange?.(!e.value)},children:o?lh("div",{style:DT}):null}),lh("div",{style:IT,children:e.children})]})}var LT;!function(e){e[e.NONE=0]="NONE",e[e.BEFORE_ENTER_WORKSPACE=1]="BEFORE_ENTER_WORKSPACE",e[e.ENTER_WORKSPACE=2]="ENTER_WORKSPACE",e[e.LEAVE_WORKSPACE=3]="LEAVE_WORKSPACE",e[e.AFTER_ENTER_TRANSITION_WORKSPACE=4]="AFTER_ENTER_TRANSITION_WORKSPACE",e[e.BEFORE_ENTER_HOME=5]="BEFORE_ENTER_HOME",e[e.ENTER_HOME=6]="ENTER_HOME",e[e.LEAVE_HOME=7]="LEAVE_HOME",e[e.AFTER_ENTER_TRANSITION_HOME=8]="AFTER_ENTER_TRANSITION_HOME"}(LT||(LT={}));var BT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function TT(e){return"string"==typeof e&&BT.test(e)}const AT=[];for(let e=0;e<256;++e)AT.push((e+256).toString(16).slice(1));let MT;const OT=new Uint8Array(16);var RT={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function PT(e,t,n){if(RT.randomUUID&&!t&&!e)return RT.randomUUID();const o=(e=e||{}).random??e.rng?.()??function(){if(!MT){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");MT=crypto.getRandomValues.bind(crypto)}return MT(OT)}();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return(AT[e[t+0]]+AT[e[t+1]]+AT[e[t+2]]+AT[e[t+3]]+"-"+AT[e[t+4]]+AT[e[t+5]]+"-"+AT[e[t+6]]+AT[e[t+7]]+"-"+AT[e[t+8]]+AT[e[t+9]]+"-"+AT[e[t+10]]+AT[e[t+11]]+AT[e[t+12]]+AT[e[t+13]]+AT[e[t+14]]+AT[e[t+15]]).toLowerCase()}(o)}const FT={workspace:"workspace",editor:"editor",tools:"tools",about:"about",help:"help",more:"more",cloud:"cloud",share:"share",webdav:"webdav",setting:"setting",official:"official",update:"update",reader:"reader",float:"float",moving:"moving",blank:"blank",search:"search",selector:"selector"};PT(),PT();var HT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jT(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function WT(e,t){for(var n,o="",i=0,r=-1,l=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(r===s-1||1===l);else if(r!==s-1&&2===l){if(o.length<2||2!==i||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){var c=o.lastIndexOf("/");if(c!==o.length-1){-1===c?(o="",i=0):i=(o=o.slice(0,c)).length-1-o.lastIndexOf("/"),r=s,l=0;continue}}else if(2===o.length||1===o.length){o="",i=0,r=s,l=0;continue}t&&(o.length>0?o+="/..":o="..",i=2)}else o.length>0?o+="/"+e.slice(r+1,s):o=e.slice(r+1,s),i=s-r-1;r=s,l=0}else 46===n&&-1!==l?++l:l=-1}return o}var zT={resolve:function(){for(var e,t="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var i;o>=0?i=arguments[o]:(void 0===e&&(e=process.cwd()),i=e),jT(i),0!==i.length&&(t=i+"/"+t,n=47===i.charCodeAt(0))}return t=WT(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(jT(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=WT(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return jT(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];jT(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":zT.normalize(e)},relative:function(e,t){if(jT(e),jT(t),e===t)return"";if((e=zT.resolve(e))===(t=zT.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,i=o-n,r=1;r<t.length&&47===t.charCodeAt(r);++r);for(var l=t.length-r,s=i<l?i:l,c=-1,a=0;a<=s;++a){if(a===s){if(l>s){if(47===t.charCodeAt(r+a))return t.slice(r+a+1);if(0===a)return t.slice(r+a)}else i>s&&(47===e.charCodeAt(n+a)?c=a:0===a&&(c=0));break}var u=e.charCodeAt(n+a);if(u!==t.charCodeAt(r+a))break;47===u&&(c=a)}var d="";for(a=n+c+1;a<=o;++a)a!==o&&47!==e.charCodeAt(a)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(r+c):(r+=c,47===t.charCodeAt(r)&&++r,t.slice(r))},_makeLong:function(e){return e},dirname:function(e){if(jT(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,i=!0,r=e.length-1;r>=1;--r)if(47===(t=e.charCodeAt(r))){if(!i){o=r;break}}else i=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');jT(e);var n,o=0,i=-1,r=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,s=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!r){o=n+1;break}}else-1===s&&(r=!1,s=n+1),l>=0&&(c===t.charCodeAt(l)?-1==--l&&(i=n):(l=-1,i=s))}return o===i?i=s:-1===i&&(i=e.length),e.slice(o,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!r){o=n+1;break}}else-1===i&&(r=!1,i=n+1);return-1===i?"":e.slice(o,i)},extname:function(e){jT(e);for(var t=-1,n=0,o=-1,i=!0,r=0,l=e.length-1;l>=0;--l){var s=e.charCodeAt(l);if(47!==s)-1===o&&(i=!1,o=l+1),46===s?-1===t?t=l:1!==r&&(r=1):-1!==t&&(r=-1);else if(!i){n=l+1;break}}return-1===t||-1===o||0===r||1===r&&t===o-1&&t===n+1?"":e.slice(t,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+o:n+e+o:o}("/",e)},parse:function(e){jT(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,o=e.charCodeAt(0),i=47===o;i?(t.root="/",n=1):n=0;for(var r=-1,l=0,s=-1,c=!0,a=e.length-1,u=0;a>=n;--a)if(47!==(o=e.charCodeAt(a)))-1===s&&(c=!1,s=a+1),46===o?-1===r?r=a:1!==u&&(u=1):-1!==r&&(u=-1);else if(!c){l=a+1;break}return-1===r||-1===s||0===u||1===u&&r===s-1&&r===l+1?-1!==s&&(t.base=t.name=0===l&&i?e.slice(1,s):e.slice(l,s)):(0===l&&i?(t.name=e.slice(1,r),t.base=e.slice(1,s)):(t.name=e.slice(l,r),t.base=e.slice(l,s)),t.ext=e.slice(r,s)),l>0?t.dir=e.slice(0,l-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};zT.posix=zT;for(var VT=zT,$T=_T(VT),ZT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UT="undefined"==typeof Uint8Array?[]:new Uint8Array(256),qT=0;qT<64;qT++)UT[ZT.charCodeAt(qT)]=qT;var YT=function(e){var t,n=new Uint8Array(e),o=n.length,i="";for(t=0;t<o;t+=3)i+=ZT[n[t]>>2],i+=ZT[(3&n[t])<<4|n[t+1]>>4],i+=ZT[(15&n[t+1])<<2|n[t+2]>>6],i+=ZT[63&n[t+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},KT=function(e){var t,n,o,i,r,l=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--);var a=new ArrayBuffer(l),u=new Uint8Array(a);for(t=0;t<s;t+=4)n=UT[e.charCodeAt(t)],o=UT[e.charCodeAt(t+1)],i=UT[e.charCodeAt(t+2)],r=UT[e.charCodeAt(t+3)],u[c++]=n<<2|o>>4,u[c++]=(15&o)<<4|i>>2,u[c++]=(3&i)<<6|63&r;return a};async function GT(e,t){function n(e){return"json"===(null==t?void 0:t.type)?e.json():"arrayBuffer"===(null==t?void 0:t.type)?e.arrayBuffer():"formData"===(null==t?void 0:t.type)?e.formData():"text"===(null==t?void 0:t.type)?e.text():e.arrayBuffer()}if(Uf){if(e.startsWith(".")){const o=$T.join("https://com.codeartel.slinote",e);return fetch(o,{...t,mode:"no-cors"}).then(n)}return new Promise(((n,o)=>{const i=null==t?void 0:t.headers;if("application/octet-stream"===(null==i?void 0:i["Content-Type"])&&(null==t?void 0:t.body)&&mc(t.body)){const e=YT(t.body);t={...t,body:e}}WebPro.fetch(e,null!=t?t:{},(e=>{if(null!==e)if("arrayBuffer"!==(null==t?void 0:t.type))if("json"!==(null==t?void 0:t.type))n(e);else try{n(JSON.parse(e))}catch(e){o()}else{const t=KT(e);n(t)}else o()}))}))}return Ff?e.startsWith(".")?fetch(e,t).then(n):electron.net.fetch(e,t).then((e=>e.data)):fetch(e,t).then(n)}var XT={},JT={};!function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+t+"]["+(t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*",o=new RegExp("^"+n+"$");e.isExist=function(e){return void 0!==e},e.isEmptyObject=function(e){return 0===Object.keys(e).length},e.merge=function(e,t,n){if(t){const o=Object.keys(t),i=o.length;for(let r=0;r<i;r++)e[o[r]]="strict"===n?[t[o[r]]]:t[o[r]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(e){const t=o.exec(e);return!(null==t)},e.getAllMatches=function(e,t){const n=[];let o=t.exec(e);for(;o;){const i=[];i.startIndex=t.lastIndex-o[0].length;const r=o.length;for(let e=0;e<r;e++)i.push(o[e]);n.push(i),o=t.exec(e)}return n},e.nameRegexp=n}(JT);const QT=JT,eA={allowBooleanAttributes:!1,unpairedTags:[]};function tA(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function nA(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const o=e.substr(n,t-n);if(t>5&&"xml"===o)return uA("InvalidXml","XML declaration allowed only at the start of the document.",fA(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function oA(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}XT.validate=function(e,t){t=Object.assign({},eA,t);const n=[];let o=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let l=0;l<e.length;l++)if("<"===e[l]&&"?"===e[l+1]){if(l+=2,l=nA(e,l),l.err)return l}else{if("<"!==e[l]){if(tA(e[l]))continue;return uA("InvalidChar","char '"+e[l]+"' is not expected.",fA(e,l))}{let s=l;if(l++,"!"===e[l]){l=oA(e,l);continue}{let c=!1;"/"===e[l]&&(c=!0,l++);let a="";for(;l<e.length&&">"!==e[l]&&" "!==e[l]&&"\t"!==e[l]&&"\n"!==e[l]&&"\r"!==e[l];l++)a+=e[l];if(a=a.trim(),"/"===a[a.length-1]&&(a=a.substring(0,a.length-1),l--),r=a,!QT.isName(r)){let t;return t=0===a.trim().length?"Invalid space after '<'.":"Tag '"+a+"' is an invalid name.",uA("InvalidTag",t,fA(e,l))}const u=lA(e,l);if(!1===u)return uA("InvalidAttr","Attributes for '"+a+"' have open quote.",fA(e,l));let d=u.value;if(l=u.index,"/"===d[d.length-1]){const n=l-d.length;d=d.substring(0,d.length-1);const i=cA(d,t);if(!0!==i)return uA(i.err.code,i.err.msg,fA(e,n+i.err.line));o=!0}else if(c){if(!u.tagClosed)return uA("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",fA(e,l));if(d.trim().length>0)return uA("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",fA(e,s));if(0===n.length)return uA("InvalidTag","Closing tag '"+a+"' has not been opened.",fA(e,s));{const t=n.pop();if(a!==t.tagName){let n=fA(e,t.tagStartPos);return uA("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+a+"'.",fA(e,s))}0==n.length&&(i=!0)}}else{const r=cA(d,t);if(!0!==r)return uA(r.err.code,r.err.msg,fA(e,l-d.length+r.err.line));if(!0===i)return uA("InvalidXml","Multiple possible root nodes found.",fA(e,l));-1!==t.unpairedTags.indexOf(a)||n.push({tagName:a,tagStartPos:s}),o=!0}for(l++;l<e.length;l++)if("<"===e[l]){if("!"===e[l+1]){l++,l=oA(e,l);continue}if("?"!==e[l+1])break;if(l=nA(e,++l),l.err)return l}else if("&"===e[l]){const t=aA(e,l);if(-1==t)return uA("InvalidChar","char '&' is not expected.",fA(e,l));l=t}else if(!0===i&&!tA(e[l]))return uA("InvalidXml","Extra text at the end",fA(e,l));"<"===e[l]&&l--}}}var r;return o?1==n.length?uA("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",fA(e,n[0].tagStartPos)):!(n.length>0)||uA("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):uA("InvalidXml","Start tag expected.",1)};const iA='"',rA="'";function lA(e,t){let n="",o="",i=!1;for(;t<e.length;t++){if(e[t]===iA||e[t]===rA)""===o?o=e[t]:o!==e[t]||(o="");else if(">"===e[t]&&""===o){i=!0;break}n+=e[t]}return""===o&&{value:n,index:t,tagClosed:i}}const sA=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function cA(e,t){const n=QT.getAllMatches(e,sA),o={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return uA("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",hA(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return uA("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",hA(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return uA("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",hA(n[e]));const i=n[e][2];if(!dA(i))return uA("InvalidAttr","Attribute '"+i+"' is an invalid name.",hA(n[e]));if(o.hasOwnProperty(i))return uA("InvalidAttr","Attribute '"+i+"' is repeated.",hA(n[e]));o[i]=1}return!0}function aA(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function uA(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function dA(e){return QT.isName(e)}function fA(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function hA(e){return e.startIndex+e[1].length}var pA={};const vA={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}};pA.buildOptions=function(e){return Object.assign({},vA,e)},pA.defaultOptions=vA;var gA=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};const mA=JT;function yA(e,t){let n="";for(;t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)n+=e[t];if(n=n.trim(),-1!==n.indexOf(" "))throw new Error("External entites are not supported");const o=e[t++];let i="";for(;t<e.length&&e[t]!==o;t++)i+=e[t];return[n,i,t]}function bA(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}function CA(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7]}function wA(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8]}function xA(e,t){return"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8]}function SA(e,t){return"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9]}function EA(e){if(mA.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var kA=function(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let o=1,i=!1,r=!1,l="";for(;t<e.length;t++)if("<"!==e[t]||r)if(">"===e[t]){if(r?"-"===e[t-1]&&"-"===e[t-2]&&(r=!1,o--):o--,0===o)break}else"["===e[t]?i=!0:l+=e[t];else{if(i&&CA(e,t))t+=7,[entityName,val,t]=yA(e,t+1),-1===val.indexOf("&")&&(n[EA(entityName)]={regx:RegExp(`&${entityName};`,"g"),val:val});else if(i&&wA(e,t))t+=8;else if(i&&xA(e,t))t+=8;else if(i&&SA(e,t))t+=9;else{if(!bA)throw new Error("Invalid DOCTYPE");r=!0}o++,l=""}if(0!==o)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}};const DA=/^[-+]?0x[a-fA-F0-9]+$/,IA=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const NA={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};var LA=function(e,t={}){if(t=Object.assign({},NA,t),!e||"string"!=typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if(t.hex&&DA.test(n))return Number.parseInt(n,16);{const o=IA.exec(n);if(o){const i=o[1],r=o[2];let l=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e;return e}(o[3]);const s=o[4]||o[6];if(!t.leadingZeros&&r.length>0&&i&&"."!==n[2])return e;if(!t.leadingZeros&&r.length>0&&!i&&"."!==n[1])return e;{const o=Number(n),c=""+o;return-1!==c.search(/[eE]/)||s?t.eNotation?o:e:-1!==n.indexOf(".")?"0"===c&&""===l||c===l||i&&c==="-"+l?o:e:r?l===c||i+l===c?o:e:n===c||n===i+c?o:e}}return e}};const BA=JT,TA=gA,AA=kA,MA=LA;function OA(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n];this.lastEntities[o]={regex:new RegExp("&"+o+";","g"),val:e[o]}}}function RA(e,t,n,o,i,r,l){if(void 0!==e&&(this.options.trimValues&&!o&&(e=e.trim()),e.length>0)){l||(e=this.replaceEntitiesValue(e));const o=this.options.tagValueProcessor(t,e,n,i,r);if(null==o)return e;if(typeof o!=typeof e||o!==e)return o;if(this.options.trimValues)return qA(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?qA(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function PA(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const FA=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function HA(e,t,n){if(!this.options.ignoreAttributes&&"string"==typeof e){const n=BA.getAllMatches(e,FA),o=n.length,i={};for(let e=0;e<o;e++){const o=this.resolveNameSpace(n[e][1]);let r=n[e][4],l=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),"__proto__"===l&&(l="#__proto__"),void 0!==r){this.options.trimValues&&(r=r.trim()),r=this.replaceEntitiesValue(r);const e=this.options.attributeValueProcessor(o,r,t);i[l]=null==e?r:typeof e!=typeof r||e!==r?e:qA(r,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[l]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=i,e}return i}}const _A=function(e){e=e.replace(/\r\n?/g,"\n");const t=new TA("!xml");let n=t,o="",i="";for(let r=0;r<e.length;r++){if("<"===e[r])if("/"===e[r+1]){const t=$A(e,">",r,"Closing Tag is not closed.");let l=e.substring(r+2,t).trim();if(this.options.removeNSPrefix){const e=l.indexOf(":");-1!==e&&(l=l.substr(e+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&(o=this.saveTextToParentTag(o,n,i));const s=i.substring(i.lastIndexOf(".")+1);if(l&&-1!==this.options.unpairedTags.indexOf(l))throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let c=0;s&&-1!==this.options.unpairedTags.indexOf(s)?(c=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=i.lastIndexOf("."),i=i.substring(0,c),n=this.tagsNodeStack.pop(),o="",r=t}else if("?"===e[r+1]){let t=ZA(e,r,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,n,i),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new TA(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,i,t.tagName)),this.addChild(n,e,i)}r=t.closeIndex+1}else if("!--"===e.substr(r+1,3)){const t=$A(e,"--\x3e",r+4,"Comment is not closed.");if(this.options.commentPropName){const l=e.substring(r+4,t-2);o=this.saveTextToParentTag(o,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}r=t}else if("!D"===e.substr(r+1,2)){const t=AA(e,r);this.docTypeEntities=t.entities,r=t.i}else if("!["===e.substr(r+1,2)){const t=$A(e,"]]>",r,"CDATA is not closed.")-2,l=e.substring(r+9,t);o=this.saveTextToParentTag(o,n,i);let s=this.parseTextData(l,n.tagname,i,!0,!1,!0,!0);null==s&&(s=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):n.add(this.options.textNodeName,s),r=t+2}else{let l=ZA(e,r,this.options.removeNSPrefix),s=l.tagName;const c=l.rawTagName;let a=l.tagExp,u=l.attrExpPresent,d=l.closeIndex;this.options.transformTagName&&(s=this.options.transformTagName(s)),n&&o&&"!xml"!==n.tagname&&(o=this.saveTextToParentTag(o,n,i,!1));const f=n;if(f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),s!==t.tagname&&(i+=i?"."+s:s),this.isItStopNode(this.options.stopNodes,i,s)){let t="";if(a.length>0&&a.lastIndexOf("/")===a.length-1)"/"===s[s.length-1]?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),a=s):a=a.substr(0,a.length-1),r=l.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(s))r=l.closeIndex;else{const n=this.readStopNodeData(e,c,d+1);if(!n)throw new Error(`Unexpected end of ${c}`);r=n.i,t=n.tagContent}const o=new TA(s);s!==a&&u&&(o[":@"]=this.buildAttributesMap(a,i,s)),t&&(t=this.parseTextData(t,s,i,!0,u,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),o.add(this.options.textNodeName,t),this.addChild(n,o,i)}else{if(a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===s[s.length-1]?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),a=s):a=a.substr(0,a.length-1),this.options.transformTagName&&(s=this.options.transformTagName(s));const e=new TA(s);s!==a&&u&&(e[":@"]=this.buildAttributesMap(a,i,s)),this.addChild(n,e,i),i=i.substr(0,i.lastIndexOf("."))}else{const e=new TA(s);this.tagsNodeStack.push(n),s!==a&&u&&(e[":@"]=this.buildAttributesMap(a,i,s)),this.addChild(n,e,i),n=e}o="",r=d}}else o+=e[r]}return t.child};function jA(e,t,n){const o=this.options.updateTag(t.tagname,n,t[":@"]);!1===o||("string"==typeof o?(t.tagname=o,e.addChild(t)):e.addChild(t))}const WA=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function zA(e,t,n,o){return e&&(void 0===o&&(o=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,o))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function VA(e,t,n){const o="*."+n;for(const n in e){const i=e[n];if(o===i||t===i)return!0}return!1}function $A(e,t,n,o){const i=e.indexOf(t,n);if(-1===i)throw new Error(o);return i+t.length-1}function ZA(e,t,n,o=">"){const i=function(e,t,n=">"){let o,i="";for(let r=t;r<e.length;r++){let t=e[r];if(o)t===o&&(o="");else if('"'===t||"'"===t)o=t;else if(t===n[0]){if(!n[1])return{data:i,index:r};if(e[r+1]===n[1])return{data:i,index:r}}else"\t"===t&&(t=" ");i+=t}}(e,t+1,o);if(!i)return;let r=i.data;const l=i.index,s=r.search(/\s/);let c=r,a=!0;-1!==s&&(c=r.substring(0,s),r=r.substring(s+1).trimStart());const u=c;if(n){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),a=c!==i.data.substr(e+1))}return{tagName:c,tagExp:r,closeIndex:l,attrExpPresent:a,rawTagName:u}}function UA(e,t,n){const o=n;let i=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const r=$A(e,">",n,`${t} is not closed`);if(e.substring(n+2,r).trim()===t&&(i--,0===i))return{tagContent:e.substring(o,n),i:r};n=r}else if("?"===e[n+1]){n=$A(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=$A(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=$A(e,"]]>",n,"StopNode is not closed.")-2}else{const o=ZA(e,n,">");if(o){(o&&o.tagName)===t&&"/"!==o.tagExp[o.tagExp.length-1]&&i++,n=o.closeIndex}}}function qA(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&MA(e,n)}return BA.isExist(e)?e:""}var YA=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=OA,this.parseXml=_A,this.parseTextData=RA,this.resolveNameSpace=PA,this.buildAttributesMap=HA,this.isItStopNode=VA,this.replaceEntitiesValue=WA,this.readStopNodeData=UA,this.saveTextToParentTag=zA,this.addChild=jA}},KA={};function GA(e,t,n){let o;const i={};for(let r=0;r<e.length;r++){const l=e[r],s=XA(l);let c="";if(c=void 0===n?s:n+"."+s,s===t.textNodeName)void 0===o?o=l[s]:o+=""+l[s];else{if(void 0===s)continue;if(l[s]){let e=GA(l[s],t,c);const n=QA(e,t);l[":@"]?JA(e,l[":@"],c,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==i[s]&&i.hasOwnProperty(s)?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(e)):t.isArray(s,c,n)?i[s]=[e]:i[s]=e}}}return"string"==typeof o?o.length>0&&(i[t.textNodeName]=o):void 0!==o&&(i[t.textNodeName]=o),i}function XA(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function JA(e,t,n,o){if(t){const i=Object.keys(t),r=i.length;for(let l=0;l<r;l++){const r=i[l];o.isArray(r,n+"."+r,!0,!0)?e[r]=[t[r]]:e[r]=t[r]}}}function QA(e,t){const{textNodeName:n}=t,o=Object.keys(e).length;return 0===o||!(1!==o||!e[n]&&"boolean"!=typeof e[n]&&0!==e[n])}KA.prettify=function(e,t){return GA(e,t)};const{buildOptions:eM}=pA,tM=YA,{prettify:nM}=KA,oM=XT;var iM=class{constructor(e){this.externalEntities={},this.options=eM(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=oM.validate(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new tM(this.options);n.addExternalEntities(this.externalEntities);const o=n.parseXml(e);return this.options.preserveOrder||void 0===o?o:nM(o,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};function rM(e,t,n,o){let i="",r=!1;for(let l=0;l<e.length;l++){const s=e[l],c=lM(s);if(void 0===c)continue;let a="";if(a=0===n.length?c:`${n}.${c}`,c===t.textNodeName){let e=s[c];cM(a,t)||(e=t.tagValueProcessor(c,e),e=aM(e,t)),r&&(i+=o),i+=e,r=!1;continue}if(c===t.cdataPropName){r&&(i+=o),i+=`<![CDATA[${s[c][0][t.textNodeName]}]]>`,r=!1;continue}if(c===t.commentPropName){i+=o+`\x3c!--${s[c][0][t.textNodeName]}--\x3e`,r=!0;continue}if("?"===c[0]){const e=sM(s[":@"],t),n="?xml"===c?"":o;let l=s[c][0][t.textNodeName];l=0!==l.length?" "+l:"",i+=n+`<${c}${l}${e}?>`,r=!0;continue}let u=o;""!==u&&(u+=t.indentBy);const d=o+`<${c}${sM(s[":@"],t)}`,f=rM(s[c],t,a,u);-1!==t.unpairedTags.indexOf(c)?t.suppressUnpairedNode?i+=d+">":i+=d+"/>":f&&0!==f.length||!t.suppressEmptyNode?f&&f.endsWith(">")?i+=d+`>${f}${o}</${c}>`:(i+=d+">",f&&""!==o&&(f.includes("/>")||f.includes("</"))?i+=o+t.indentBy+f+o:i+=f,i+=`</${c}>`):i+=d+"/>",r=!0}return i}function lM(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n];if(e.hasOwnProperty(o)&&":@"!==o)return o}}function sM(e,t){let n="";if(e&&!t.ignoreAttributes)for(let o in e){if(!e.hasOwnProperty(o))continue;let i=t.attributeValueProcessor(o,e[o]);i=aM(i,t),!0===i&&t.suppressBooleanAttributes?n+=` ${o.substr(t.attributeNamePrefix.length)}`:n+=` ${o.substr(t.attributeNamePrefix.length)}="${i}"`}return n}function cM(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let o in t.stopNodes)if(t.stopNodes[o]===e||t.stopNodes[o]==="*."+n)return!0;return!1}function aM(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const o=t.entities[n];e=e.replace(o.regex,o.val)}return e}var uM=function(e,t){let n="";return t.format&&t.indentBy.length>0&&(n="\n"),rM(e,t,"",n)};const dM=uM,fM={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function hM(e){this.options=Object.assign({},fM,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=gM),this.processTextOrObjNode=pM,this.options.format?(this.indentate=vM,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function pM(e,t,n){const o=this.j2x(e,n+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,o.attrStr,n):this.buildObjectNode(o.val,t,o.attrStr,n)}function vM(e){return this.options.indentBy.repeat(e)}function gM(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}hM.prototype.build=function(e){return this.options.preserveOrder?dM(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},hM.prototype.j2x=function(e,t){let n="",o="";for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))if(void 0===e[i])this.isAttribute(i)&&(o+="");else if(null===e[i])this.isAttribute(i)?o+="":"?"===i[0]?o+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)o+=this.buildTextValNode(e[i],i,"",t);else if("object"!=typeof e[i]){const r=this.isAttribute(i);if(r)n+=this.buildAttrPairStr(r,""+e[i]);else if(i===this.options.textNodeName){let t=this.options.tagValueProcessor(i,""+e[i]);o+=this.replaceEntitiesValue(t)}else o+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){const n=e[i].length;let r="",l="";for(let s=0;s<n;s++){const n=e[i][s];if(void 0===n);else if(null===n)"?"===i[0]?o+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if("object"==typeof n)if(this.options.oneListGroup){const e=this.j2x(n,t+1);r+=e.val,this.options.attributesGroupName&&n.hasOwnProperty(this.options.attributesGroupName)&&(l+=e.attrStr)}else r+=this.processTextOrObjNode(n,i,t);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(i,n);e=this.replaceEntitiesValue(e),r+=e}else r+=this.buildTextValNode(n,i,"",t)}this.options.oneListGroup&&(r=this.buildObjectNode(r,i,l,t)),o+=r}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){const t=Object.keys(e[i]),o=t.length;for(let r=0;r<o;r++)n+=this.buildAttrPairStr(t[r],""+e[i][t[r]])}else o+=this.processTextOrObjNode(e[i],i,t);return{attrStr:n,val:o}},hM.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},hM.prototype.buildObjectNode=function(e,t,n,o){if(""===e)return"?"===t[0]?this.indentate(o)+"<"+t+n+"?"+this.tagEndChar:this.indentate(o)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,r="";return"?"===t[0]&&(r="?",i=""),!n&&""!==n||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===r.length?this.indentate(o)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(o)+"<"+t+n+r+this.tagEndChar+e+this.indentate(o)+i:this.indentate(o)+"<"+t+n+r+">"+e+i}},hM.prototype.closeTag=function(e){let t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":`></${e}`,t},hM.prototype.buildTextValNode=function(e,t,n,o){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(o)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(o)+`\x3c!--${e}--\x3e`+this.newLine;if("?"===t[0])return this.indentate(o)+"<"+t+n+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),""===i?this.indentate(o)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(o)+"<"+t+n+">"+i+"</"+t+this.tagEndChar}},hM.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};var mM,yM={XMLParser:iM,XMLValidator:XT,XMLBuilder:hM};
/**
* @license nested-property https://github.com/cosmosio/nested-property
*
* The MIT License (MIT)
*
* Copyright (c) 2014-2020 Olivier Scherrer <pode.fr@gmail.com>
*/function bM(e){return new yM.XMLParser({removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1}}).parse(e)}function CM(e,t,n=!1){const{getlastmodified:o=null,getcontentlength:i="0",resourcetype:r=null,getcontenttype:l=null,getetag:s=null}=e,c=r&&"object"==typeof r&&void 0!==r.collection?"directory":"file",a={filename:t,basename:$T.basename(t),lastmod:o,size:parseInt(i,10),type:c,etag:"string"==typeof s?s.replace(/"/g,""):null};return"file"===c&&(a.mime=l&&"string"==typeof l?l.split(";")[0]:""),n&&(void 0!==e.displayname&&(e.displayname=String(e.displayname)),a.props=e),a}function wM(e){let t=e;return"/"!==t[0]&&(t="/"+t),/^.+\/$/.test(t)&&(t=t.slice(0,-1)),t}!function(e){e.Array="array",e.Object="object",e.Original="original"}(mM||(mM={}));class xM{constructor(e,t){this.authorization="",this.url=e.replace(/\/$/,""),this.path=function(e){let t=new URL(e).pathname;return t.length<=0&&(t="/"),wM(t)}(this.url),this.options=t,this.initAuthorization()}initAuthorization(){const{username:e,password:t}=this.options,n=window.btoa(`${e}:${t}`);this.authorization=`Basic ${n}`}async getStat(e){var t,n,o;const i=await GT(`${this.url}${e}`,{method:"PROPFIND",type:"text",headers:{Accept:"text/plain,application/xml",Depth:"0",Authorization:this.authorization}}),r=sc(i)?i:null==i?void 0:i.content;if(!r)return{code:404};const l=bM(r),s=TM(l);if(200!==s.code)return s;let c=null===(t=null==l?void 0:l.multistatus)||void 0===t?void 0:t.response;if(Array.isArray(c)&&(c=c[0]),void 0===c)return{code:404};const a=null===(n=c.propstat)||void 0===n?void 0:n.prop,u=null===(o=c.propstat)||void 0===o?void 0:o.status;if(!a||!u)return{code:404};const[,d]=u.split(" ",3);if(parseInt(d,10)>=400)return{code:400};return{code:200,data:CM(a,wM(e))}}async getDirectoryContents(e){var t;const n=await GT(VT.join(this.url,e),{method:"PROPFIND",type:"text",headers:{Accept:"text/plain,application/xml",Depth:"1",Authorization:this.authorization}}),o=sc(n)?n:null==n?void 0:n.content;if(!o)return{code:404};const i=bM(o),r=TM(i);if(200!==r.code&&201!==r.code)return r;let l=null===(t=null==i?void 0:i.multistatus)||void 0===t?void 0:t.response;if(void 0===l)return{code:404};Array.isArray(l)||(l=[l]);const s=VT.join(this.path,"/"),c=(a=e,a.startsWith("/")?a:"/"+a).replace(/\/$/,"");var a;const u=l.map((e=>{const t=function(e){return e.replace(/^https?:\/\/[^\/]+/,"")}(e.href);return CM(e.propstat.prop,"/"===s?decodeURIComponent(wM(t)):wM(VT.relative(decodeURIComponent(s),decodeURIComponent(t))))})).filter((e=>{if(e.basename){if("file"===e.type)return!0;if(e.filename!==c)return!0}return!1}));return{code:200,data:u}}async createDirectory(e){const t=await GT(VT.join(this.url,e),{method:"MKCOL",type:"text",headers:{Authorization:this.authorization}}),n=sc(t)?t:null==t?void 0:t.content;return void 0===n?{code:403}:""===n?{code:200}:TM(n)}async deleteFile(e){const t=await GT(VT.join(this.url,e),{method:"DELETE",type:"text",headers:{Authorization:this.authorization}}),n=sc(t)?t:null==t?void 0:t.content;return void 0===n?{code:403}:""===n?{code:200}:TM(n)}async putFileContents(e,t){t instanceof Uint8Array&&(t=t.buffer);const n={Authorization:this.authorization};(t instanceof Uint8Array||t instanceof ArrayBuffer)&&(n["Content-Type"]="application/octet-stream");const o={method:"PUT",type:"text",headers:n,body:t},i=await GT(VT.join(this.url,e),o),r=sc(i)?i:null==i?void 0:i.content;return void 0===r?{code:403}:""===r?{code:200}:TM(r)}async getFileContents(e,t){var n;const o={Authorization:this.authorization};"arrayBuffer"===t&&(o.Accept="application/octet-stream");const i={method:"GET",type:t,cache:"no-cache",headers:o},r=await GT(VT.join(this.url,e),i),l=null!==(n=null==r?void 0:r.content)&&void 0!==n?n:r;return void 0===l?{code:404}:{code:200,data:l}}}const SM="config";function EM(e){window.localStorage.setItem(SM,JSON.stringify(e))}function kM(e){const t=DM(),n=Tc(t,e);window.localStorage.setItem(SM,JSON.stringify(n))}function DM(){let e=null;try{const t=window.localStorage.getItem(SM);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}async function IM(e){var t,n,o;const i=await async function(){try{return await GT("./api/config.json",{cache:"reload",type:"json"})}catch(e){console.error(e)}return null}(),r=DM(),l=null===(t=null==i?void 0:i.api)||void 0===t?void 0:t[e],s=null===(n=null==r?void 0:r.api)||void 0===n?void 0:n[e];return i&&(r?l&&l!==s&&(r.api=null!==(o=r.api)&&void 0!==o?o:{},r.api[e]=l,EM(r)):EM(i)),!s||s!==l}function NM(){return!!Uf}function LM(){let e=document.querySelector("#root");e||(e=document.body);const{clientWidth:t,clientHeight:n}=e;return{clientWidth:t,clientHeight:n}}function BM(e){if(!(null==e?void 0:e.trim()))return!1;try{return new URL(e),!0}catch(e){return!1}}function TM(e){var t,n,o,i;const r=sc(e)?bM(e):e;let l=200,s=null===(n=null===(t=null==r?void 0:r.html)||void 0===t?void 0:t.head)||void 0===n?void 0:n.title;void 0===s&&sc(e)&&(s=e),sc(s)&&(s.includes("100")?l=100:s.includes("101")?l=101:s.includes("200")||s.includes("201")?l=200:s.includes("202")?l=202:s.includes("204")?l=204:s.includes("301")?l=301:s.includes("302")?l=302:s.includes("303")?l=303:s.includes("304")?l=304:s.includes("307")?l=307:s.includes("308")?l=308:s.includes("400")?l=400:s.includes("401")?l=401:s.includes("403")?l=403:s.includes("404")?l=404:s.includes("405")?l=405:s.includes("408")?l=408:s.includes("409")?l=409:s.includes("410")?l=410:s.includes("414")?l=414:s.includes("422")?l=422:s.includes("423")?l=423:s.includes("424")?l=424:s.includes("429")?l=429:s.includes("500")?l=500:s.includes("501")?l=501:s.includes("502")?l=502:s.includes("503")?l=503:s.includes("504")?l=504:s.includes("505")&&(l=505));let c=null===(o=null==r?void 0:r.error)||void 0===o?void 0:o.exception;return void 0===c&&sc(e)&&(c=e),sc(c)&&(c=c.replace(/\s+/g,"").toLowerCase()),sc(c)&&(c.includes("continue")?l=100:c.includes("switchingprotocols")?l=101:c.includes("processing")?l=102:c.includes("ok")||c.includes("created")?l=200:c.includes("accepted")?l=202:c.includes("nocontent")?l=204:c.includes("movedpermanently")?l=301:c.includes("found")&&!c.includes("notfound")?l=302:c.includes("seeother")?l=303:c.includes("notmodified")?l=304:c.includes("temporaryredirect")?l=307:c.includes("permanentredirect")?l=308:c.includes("badrequest")?l=400:c.includes("unauthorized")||c.includes("notauthenticated")||c.includes("unauthenticated")?l=401:c.includes("forbidden")?l=403:c.includes("notfound")?l=404:c.includes("methodnotallowed")?l=405:c.includes("requesttimeout")?l=408:c.includes("conflict")?l=409:c.includes("gone")?l=410:c.includes("uritoolong")?l=414:c.includes("unprocessableentity")?l=422:c.includes("blockedtemporarily")?l=429:c.includes("locked")?l=423:c.includes("faileddependency")?l=424:c.includes("toomanyrequests")?l=429:c.includes("internalservererror")?l=500:c.includes("notimplemented")?l=501:c.includes("badgateway")?l=502:c.includes("serviceunavailable")?l=503:c.includes("gatewaytimeout")?l=504:c.includes("httpversionnotsupported")&&(l=505)),{code:l,msg:null!==(i={100:"客户端正在处理请求",101:"服务器已理解请求，将进行协议切换",102:"服务器已收到并正在处理该请求",200:"请求成功",201:"请求成功，并且服务器创建了新的资源",202:"服务器已接受请求，但尚未处理",204:"服务器成功处理了请求，但没有返回任何内容",301:"请求的资源已被永久移动到新位置",302:"请求的资源临时移动到了另一个URI",303:"建议使用GET方法获取资源",304:"资源未修改，使用缓存的版本",307:"临时重定向",308:"永久重定向",400:"服务器无法理解请求格式",401:"用户认证失败",403:"没有访问内容的权限",404:"服务器找不到请求的资源",405:"请求方法不被允许",408:"服务器等待请求时超时",409:"请求与服务器当前状态冲突",410:"请求的资源已被永久删除",414:"请求的链接过长",422:"请求格式由于语义错误而无法响应",423:"正在访问的资源已锁定",424:"连续请求失败",429:"请求过多，超出服务器限制",500:"服务器遇到错误，无法完成请求",501:"服务器不支持请求的功能",502:"服务器作为网关或代理，从上游服务器收到无效响应",503:"服务器暂时无法处理请求",504:"网关或代理在等待上游服务器响应时超时",505:"服务器不支持请求的HTTP版本"}[l])&&void 0!==i?i:""}}function AM({width:e=33,type:t="deep",style:n}){const o="deep"===t?"#132652":"#F4F4F4",i="deep"===t?"#23396B":"#FFFFFF";return X("svg",{width:e,viewBox:"0 0 168 243",style:n,children:[G("path",{d:"M89.9002 241.566L86.5002 239.566L83.2002 241.566C86.5 243.166 86.5002 243.166 89.9002 241.566Z",fill:o}),G("path",{d:"M92.6532 240.005C86.4837 243.566 86.4886 243.566 86.4886 236.566L63.0665 157.137C86.6999 143.132 86.6999 143.132 110 157.137L140.571 174.825C173.05 193.6 173.05 193.6 140.571 212.346L92.6532 240.005Z",fill:o}),G("path",{d:"M32.4961 12.316C-2.70083e-06 -6.43398 4.92856e-06 -6.43398 4.92856e-06 31.066L4.92856e-06 186.566C4.92856e-06 193.566 4.92856e-06 193.566 6.06161 197.066L80.5 240.047C82.0098 240.919 83.1456 241.575 84 241.962C84.4651 242.177 84.6902 242.286 85 242.406C85.6478 242.665 86.0065 242.764 86.5981 242.766L86.6563 62.316C86.6563 43.566 86.6563 43.566 70.4082 34.191L32.4961 12.316Z",fill:i})]})}function MM({width:e=20,fill:t=kf,style:n}){return X("svg",{viewBox:"0 0 1024 1024",width:e,style:n,children:[G("path",{d:"M782.426059 824.924989l-584.588225-584.727395c-11.987009-11.990079-11.984962-31.42778 0.005116-43.414789 11.990079-11.987009 31.42778-11.984962 43.414789 0.005117l584.588225 584.727395c11.987009 11.990079 11.984962 31.42778-0.005116 43.414788-11.989055 11.988032-31.42778 11.984962-43.414789-0.005116z",fill:t}),G("path",{d:"M197.768249 824.856427c-11.987009-11.990079-11.984962-31.42778 0.005117-43.414788l584.727394-584.589249c11.990079-11.987009 31.42778-11.984962 43.414789 0.005117 11.987009 11.990079 11.984962 31.42778-0.005116 43.414788l-584.727395 584.589249c-11.990079 11.987009-31.42778 11.984962-43.414789-0.005117z",fill:t})]})}function OM({width:e=12,fill:t=kf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M6 11.1176C7.01218 11.1176 8.00162 10.8175 8.84321 10.2552C9.68481 9.69283 10.3407 8.89357 10.7281 7.95844C11.1154 7.02331 11.2168 5.99432 11.0193 5.0016C10.8218 4.00887 10.3344 3.09699 9.61872 2.38128C8.90301 1.66556 7.99113 1.17816 6.9984 0.98069C6.00568 0.783224 4.97669 0.884571 4.04156 1.27191C3.10644 1.65926 2.30717 2.3152 1.74483 3.15679C1.1825 3.99838 0.882355 4.98783 0.882355 6C0.882355 7.35729 1.42153 8.65898 2.38128 9.61872C3.34102 10.5785 4.64272 11.1176 6 11.1176ZM6 12C4.81331 12 3.65328 11.6481 2.66658 10.9888C1.67989 10.3295 0.910851 9.39246 0.456725 8.2961C0.00259969 7.19974 -0.11622 5.99335 0.115291 4.82946C0.346802 3.66557 0.918247 2.59648 1.75736 1.75736C2.59648 0.918247 3.66557 0.346802 4.82946 0.115291C5.99335 -0.11622 7.19974 0.00259969 8.2961 0.456725C9.39246 0.910851 10.3295 1.67989 10.9888 2.66658C11.6481 3.65328 12 4.81331 12 6C12 6.78793 11.8448 7.56815 11.5433 8.2961C11.2417 9.02405 10.7998 9.68549 10.2426 10.2426C9.68549 10.7998 9.02405 11.2417 8.2961 11.5433C7.56815 11.8448 6.78793 12 6 12Z"}),G("path",{fill:t,d:"M6.62118 5.99999L8.30824 7.68705C8.39061 7.76943 8.43689 7.88115 8.43689 7.99764C8.43689 8.11413 8.39061 8.22586 8.30824 8.30823C8.22586 8.3906 8.11414 8.43688 7.99765 8.43688C7.88116 8.43688 7.76943 8.3906 7.68706 8.30823L6 6.62117L4.31294 8.30823C4.27216 8.34902 4.22374 8.38137 4.17044 8.40344C4.11715 8.42552 4.06004 8.43688 4.00236 8.43688C3.94467 8.43688 3.88756 8.42552 3.83427 8.40344C3.78098 8.38137 3.73255 8.34902 3.69177 8.30823C3.65098 8.26744 3.61863 8.21902 3.59655 8.16573C3.57448 8.11244 3.56312 8.05532 3.56312 7.99764C3.56312 7.93996 3.57448 7.88284 3.59655 7.82955C3.61863 7.77626 3.65098 7.72784 3.69177 7.68705L5.37883 5.99999L3.69177 4.31294C3.65098 4.27215 3.61863 4.22373 3.59655 4.17044C3.57448 4.11715 3.56312 4.06003 3.56312 4.00235C3.56312 3.94467 3.57448 3.88755 3.59655 3.83426C3.61863 3.78097 3.65098 3.73255 3.69177 3.69176C3.73255 3.65097 3.78098 3.61862 3.83427 3.59655C3.88756 3.57447 3.94467 3.56311 4.00236 3.56311C4.06004 3.56311 4.11715 3.57447 4.17044 3.59655C4.22374 3.61862 4.27216 3.65097 4.31294 3.69176L6 5.37882L7.68706 3.69176C7.72785 3.65097 7.77627 3.61862 7.82956 3.59655C7.88285 3.57447 7.93997 3.56311 7.99765 3.56311C8.05533 3.56311 8.11245 3.57447 8.16574 3.59655C8.21903 3.61862 8.26745 3.65097 8.30824 3.69176C8.34902 3.73255 8.38138 3.78097 8.40345 3.83426C8.42553 3.88755 8.43689 3.94467 8.43689 4.00235C8.43689 4.06003 8.42553 4.11715 8.40345 4.17044C8.38138 4.22373 8.34902 4.27215 8.30824 4.31294L6.62118 5.99999Z"})]})}function RM(){return G("svg",{width:"11.5",viewBox:"0 0 12 12",children:G("path",{fill:Lf,stroke:Lf,d:"M10.7449 10.979C10.6643 11.0244 10.5562 11.0532 10.4101 11.0546H1.58238C1.36044 11.0546 1.1842 10.9962 1.06322 10.8739C0.942181 10.7516 0.870126 10.5591 0.870126 10.2775V1.57498C0.870126 1.35303 0.907153 1.20974 1.00642 1.11926C1.10703 1.02755 1.28151 0.980727 1.58238 0.980727H6.25813C6.41043 0.980727 6.54909 0.948491 6.65068 0.873318C6.75411 0.796776 6.81439 0.679162 6.81439 0.520351C6.81439 0.361199 6.75413 0.24356 6.65066 0.167093C6.54906 0.0920083 6.41039 0.0599756 6.25813 0.0599756H1.58238C0.749321 0.0599756 0.0600004 0.740613 0.0600004 1.57424V10.4243C0.0600004 11.3329 0.750633 11.9393 1.58238 11.9393H10.484C11.3979 11.9393 12.0151 11.2583 11.9326 10.4223V5.778C11.9326 5.6257 11.9004 5.48704 11.8252 5.38545C11.7487 5.28202 11.6311 5.22175 11.4723 5.22175C11.3101 5.22175 11.1906 5.28175 11.113 5.38525C11.0367 5.48692 11.0045 5.62571 11.0045 5.778V10.2768C11.0045 10.4535 10.9966 10.647 10.9187 10.797C10.8803 10.8708 10.8251 10.9338 10.7449 10.979ZM7.07676 2.34623L7.07637 2.34623C6.91938 2.34776 6.77887 2.3868 6.67672 2.46771C6.57328 2.54964 6.51313 2.67147 6.51313 2.82873C6.51313 2.9873 6.57317 3.10994 6.67672 3.19196C6.779 3.27298 6.91967 3.31123 7.07676 3.31123H8.79201V4.89373C8.79201 5.04776 8.83242 5.18677 8.91647 5.28803C9.00135 5.39029 9.12743 5.44998 9.28926 5.44998C9.44765 5.44998 9.57352 5.39014 9.65914 5.28821C9.74404 5.18714 9.78651 5.04819 9.78651 4.89373V3.38498H11.3764C11.5321 3.38498 11.6712 3.33626 11.7719 3.24565C11.873 3.15464 11.9326 3.02375 11.9326 2.8656C11.9326 2.70746 11.873 2.57657 11.7719 2.48556C11.6712 2.39495 11.5321 2.34623 11.3764 2.34623H9.78651V0.616226C9.78651 0.46177 9.74404 0.322822 9.65914 0.221748C9.57352 0.119822 9.44765 0.0599756 9.28926 0.0599756C9.12743 0.0599756 9.00135 0.119664 8.91647 0.221929C8.83242 0.323192 8.79201 0.462198 8.79201 0.616226V2.34623L7.07676 2.34623Z",strokeWidth:"0.08"})})}function PM({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M5.59091 2.1648H4.73864V6.42616H9V5.57389H6.19416L10.7205 1.04752L10.1186 0.444275L5.59091 4.97197V2.1648Z"}),G("path",{fill:t,d:"M10.2784 6.01597V10.4744C10.2784 10.8273 10.0281 11.1146 9.72177 11.1136H1.46005C1.15377 11.1136 0.903413 10.8273 0.903413 10.4744V1.55752C0.903413 1.20462 1.15377 0.918313 1.46005 0.918313H5.59091V0.06604H1.46005C0.683686 0.06604 0.0511398 0.734541 0.0511398 1.55752V10.4744C0.0511398 11.2974 0.683686 11.9659 1.46005 11.9659H9.72177C10.4981 11.9659 11.1307 11.2974 11.1307 10.4744V6.01597H10.2784Z"})]})}function FM({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M10.2784 0.460205H6.86932V1.31248H9.67649L5.1488 5.84018L5.75071 6.44343L10.2784 1.91573V4.72157H11.1307V0.460205H10.2784Z"}),G("path",{fill:t,d:"M10.2784 10.4584C10.2784 10.8113 10.0281 11.0976 9.72177 11.0976H1.46005C1.15377 11.0976 0.903413 10.8113 0.903413 10.4584V1.54153C0.903413 1.18863 1.15377 0.902322 1.46005 0.902322H5.59091V0.0500488H1.46005C0.683686 0.0500488 0.0511398 0.71855 0.0511398 1.54153V10.4584C0.0511398 11.2814 0.683686 11.9499 1.46005 11.9499H9.72177C10.4981 11.9499 11.1307 11.2814 11.1307 10.4584V5.99998H10.2784V10.4584Z"})]})}function HM({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M10.6875 0.0341187C11.0136 0.0341005 11.3273 0.158689 11.5646 0.382393C11.8018 0.606097 11.9446 0.912005 11.9638 1.23753L11.9659 1.31253V8.13071C11.9659 8.45679 11.8413 8.77056 11.6176 9.00781C11.3939 9.24506 11.088 9.38786 10.7625 9.40699L10.6875 9.40912H9.40909V10.6875C9.40911 11.0136 9.28452 11.3274 9.06081 11.5646C8.83711 11.8019 8.5312 11.9447 8.20568 11.9638L8.13068 11.9659H1.3125C0.973442 11.9659 0.648274 11.8312 0.408526 11.5915C0.168777 11.3518 0.0340881 11.0266 0.0340881 10.6875V3.86935C0.0340881 3.53029 0.168777 3.20512 0.408526 2.96537C0.648274 2.72563 0.973442 2.59094 1.3125 2.59094H2.59091V1.31253C2.59089 0.986444 2.71548 0.672678 2.93918 0.435428C3.16288 0.198178 3.46879 0.0553797 3.79432 0.0362494L3.86932 0.0341187H10.6875ZM8.13068 3.44321H1.3125C1.19948 3.44321 1.09109 3.48811 1.01117 3.56802C0.931257 3.64794 0.886361 3.75633 0.886361 3.86935V10.6875C0.886361 10.8005 0.931257 10.9089 1.01117 10.9889C1.09109 11.0688 1.19948 11.1137 1.3125 11.1137H8.13068C8.2437 11.1137 8.35209 11.0688 8.432 10.9889C8.51192 10.9089 8.55682 10.8005 8.55682 10.6875V3.86935C8.55682 3.75633 8.51192 3.64794 8.432 3.56802C8.35209 3.48811 8.2437 3.44321 8.13068 3.44321ZM10.6875 0.886391H3.86932C3.76494 0.886405 3.6642 0.924725 3.5862 0.994082C3.5082 1.06344 3.45837 1.15901 3.44616 1.26267L3.44318 1.31253V2.59094H8.13068C8.45676 2.59092 8.77053 2.71551 9.00778 2.93921C9.24503 3.16291 9.38783 3.46882 9.40696 3.79435L9.40909 3.86935V8.55685H10.6875C10.7919 8.55683 10.8926 8.51851 10.9706 8.44915C11.0486 8.3798 11.0984 8.28423 11.1107 8.18057L11.1136 8.13071V1.31253C11.1136 1.20815 11.0753 1.10741 11.0059 1.02941C10.9366 0.951417 10.841 0.901586 10.7374 0.889374L10.6875 0.886391Z"})})}function _M({width:e=12.5,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M5.98142 11.637C5.76277 11.637 5.57127 11.4755 5.53268 11.2568C5.52268 11.1997 5.52411 11.1439 5.53411 11.0896C5.55841 10.4708 5.54268 4.73722 5.52554 0.932913C5.52411 0.682818 5.72561 0.479884 5.97571 0.478455H5.97714C6.2258 0.478455 6.42874 0.67996 6.43017 0.928626C6.43017 0.928626 6.4416 3.49103 6.44874 6.05486C6.4516 7.33678 6.45303 8.6187 6.4516 9.58192C6.44731 11.597 6.44732 11.597 6.02001 11.6356C6.00715 11.637 5.99429 11.637 5.98142 11.637V11.637Z"}),G("path",{fill:t,d:"M3.40186 6.52079H2.46579C0.45074 6.51651 0.450739 6.51651 0.412153 6.0892C0.390716 5.85483 0.559352 5.64189 0.790869 5.60187C0.848034 5.59187 0.905198 5.5933 0.958075 5.6033C1.57688 5.62903 7.30907 5.61188 11.1148 5.59473H11.1162C11.3649 5.59473 11.5678 5.79623 11.5693 6.0449C11.5707 6.29499 11.3692 6.49793 11.1191 6.49936C11.1191 6.49936 8.55668 6.51079 5.99285 6.51794C5.09251 6.51936 4.19216 6.52079 3.40186 6.52079V6.52079ZM7.46913 2.40208C7.35337 2.40208 7.23761 2.35778 7.14901 2.26917L6 1.12159L4.85099 2.2706C4.67378 2.44781 4.38795 2.44781 4.21074 2.2706C4.03353 2.09339 4.03353 1.80757 4.21074 1.63036L5.67987 0.161228C5.85708 -0.0159823 6.14291 -0.0159823 6.32012 0.161228L7.78925 1.63036C7.96646 1.80757 7.96646 2.09339 7.78925 2.2706C7.70064 2.35778 7.58489 2.40208 7.46913 2.40208V2.40208ZM6 11.9843C5.88424 11.9843 5.76848 11.94 5.67987 11.8514L4.21074 10.3823C4.03353 10.2051 4.03353 9.91923 4.21074 9.74202C4.38795 9.56481 4.67378 9.56481 4.85099 9.74202L6 10.891L7.14901 9.74202C7.32622 9.56481 7.61204 9.56481 7.78925 9.74202C7.96646 9.91923 7.96646 10.2051 7.78925 10.3823L6.32012 11.8514C6.23151 11.94 6.11575 11.9843 6 11.9843Z"}),G("path",{fill:t,d:"M10.0558 7.92702C9.94007 7.92702 9.82432 7.88272 9.73571 7.79412C9.5585 7.61691 9.5585 7.33108 9.73571 7.15387L10.8847 6.00486L9.73571 4.85585C9.5585 4.67864 9.5585 4.39282 9.73571 4.21561C9.91292 4.0384 10.1987 4.0384 10.376 4.21561L11.8451 5.68617C12.0223 5.86338 12.0223 6.1492 11.8451 6.32641L10.376 7.79555C10.2874 7.88272 10.1716 7.92702 10.0558 7.92702V7.92702ZM1.94417 7.92702C1.82841 7.92702 1.71265 7.88272 1.62405 7.79412L0.154919 6.32641C-0.0222918 6.1492 -0.0222918 5.86338 0.154919 5.68617L1.62405 4.21704C1.80126 4.03983 2.08708 4.03983 2.26429 4.21704C2.4415 4.39425 2.4415 4.68007 2.26429 4.85728L1.11528 6.00629L2.26429 7.1553C2.4415 7.33251 2.4415 7.61834 2.26429 7.79555C2.17569 7.88272 2.05993 7.92702 1.94417 7.92702V7.92702Z"})]})}function jM({width:e=11,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M10.5732 11.9451H1.42683C0.672256 11.9451 0.0548782 11.3277 0.0548782 10.5732V1.42682C0.0548782 0.672249 0.672256 0.0548706 1.42683 0.0548706H6C6.25152 0.0548706 6.45732 0.260663 6.45732 0.512188C6.45732 0.763712 6.25152 0.969505 6 0.969505H1.42683C1.17531 0.969505 0.969512 1.1753 0.969512 1.42682V10.5732C0.969512 10.8247 1.17531 11.0305 1.42683 11.0305H10.5732C10.8247 11.0305 11.0305 10.8247 11.0305 10.5732V5.99999C11.0305 5.74847 11.2363 5.54268 11.4878 5.54268C11.7393 5.54268 11.9451 5.74847 11.9451 5.99999V10.5732C11.9451 11.3277 11.3277 11.9451 10.5732 11.9451Z"}),G("path",{fill:t,d:"M4.46799 7.30334C4.28506 7.12042 4.28506 6.82316 4.46799 6.6631L10.7561 0.374988C10.939 0.192061 11.2363 0.192061 11.3963 0.374988C11.5793 0.557915 11.5793 0.855171 11.3963 1.01523L5.1311 7.30334C4.94817 7.48627 4.65092 7.48627 4.46799 7.30334Z"})]})}function WM({width:e=12.5,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M7.27841 9.40904C7.04276 9.40904 6.85227 9.21855 6.85227 8.9829V4.2954C6.85227 4.05975 7.04276 3.86926 7.27841 3.86926C7.51406 3.86926 7.70454 4.05975 7.70454 4.2954V8.9829C7.70454 9.21855 7.51406 9.40904 7.27841 9.40904Z"}),G("path",{fill:t,d:"M4.72159 9.40904C4.48594 9.40904 4.29546 9.21855 4.29546 8.9829V4.2954C4.29546 4.05975 4.48594 3.86926 4.72159 3.86926C4.95725 3.86926 5.14773 4.05975 5.14773 4.2954V8.9829C5.14773 9.21855 4.95725 9.40904 4.72159 9.40904Z"}),G("path",{fill:t,d:"M11.5398 2.16474H9.40909V1.31247C9.40909 0.607637 8.8402 0.0340576 8.14048 0.0340576H3.86932C3.16449 0.0340576 2.59091 0.607637 2.59091 1.31247V2.16474H0.460224C0.224571 2.16474 0.0340881 2.35522 0.0340881 2.59088C0.0340881 2.82653 0.224571 3.01701 0.460224 3.01701H11.5398C11.7754 3.01701 11.9659 2.82653 11.9659 2.59088C11.9659 2.35522 11.7754 2.16474 11.5398 2.16474ZM3.44318 1.31247C3.44318 1.07767 3.63451 0.88633 3.86932 0.88633H8.14048C8.374 0.88633 8.55682 1.0734 8.55682 1.31247V2.16474H3.44318V1.31247Z"}),G("path",{fill:t,d:"M8.98466 11.9659H3.0179C2.31307 11.9659 1.73949 11.3923 1.73949 10.6875V4.28905C1.73949 4.05382 1.9304 3.86292 2.16562 3.86292C2.40085 3.86292 2.59176 4.05382 2.59176 4.28905V10.6875C2.59176 10.9227 2.78309 11.1136 3.0179 11.1136H8.98466C9.21988 11.1136 9.41079 10.9227 9.41079 10.6875V4.30652C9.41079 4.0713 9.60128 3.88039 9.83693 3.88039C10.0726 3.88039 10.2631 4.0713 10.2631 4.30652V10.6875C10.2631 11.3923 9.68949 11.9659 8.98466 11.9659Z"})]})}function zM(){return G("svg",{width:"13",viewBox:"0 0 12 11",children:G("path",{fill:Lf,d:"M6.2929 0.00630784H11.0046C11.5414 0.00630784 11.9766 0.498285 11.9766 1.10506V9.89502C11.9766 10.5018 11.5414 10.9938 11.0046 10.9938L7.11909 10.9938H1.00846C0.471602 10.9938 0.036459 10.5018 0.036459 9.89502V1.10506C0.036459 0.498285 0.471615 0.00632266 1.00846 0.00632266H6.27602C6.28165 0.00619323 6.28728 0.00619323 6.2929 0.00632266V0.00630784ZM5.63879 0.948104H1.00846C0.931915 0.948104 0.869792 1.01832 0.869792 1.10506V9.89502C0.869792 9.98175 0.931902 10.052 1.00846 10.052H6.6718L6.57766 8.45554C6.38769 8.47347 6.19714 8.48241 6.00651 8.48235C5.12422 8.48235 4.32292 8.29367 3.61716 7.9785C3.36827 7.86735 3.14833 7.74769 2.95893 7.62705L2.94708 7.61947L2.92387 7.60448C2.92005 7.60201 2.91628 7.59953 2.91253 7.59708L2.89035 7.58242C2.86944 7.56851 2.84865 7.55436 2.82798 7.53998L2.80859 7.52635L2.79915 7.51964L2.78081 7.50646L2.76725 7.49656L2.75452 7.48714L2.7426 7.47819L2.73697 7.47392L2.72007 7.46087L2.70955 7.45251C2.52245 7.30109 2.47941 7.00693 2.6134 6.79549C2.74604 6.58618 3.00247 6.5364 3.18913 6.68236L3.19807 6.68939L3.20641 6.69575L3.21775 6.70422L3.23087 6.71383L3.23762 6.7187L3.25162 6.72868L3.25887 6.73379L3.27387 6.74424L3.28952 6.75496L3.29759 6.76042L3.31423 6.77158L3.3228 6.77726L3.34042 6.78879L3.35869 6.80059L3.36806 6.8066C3.52524 6.90669 3.71096 7.00776 3.9234 7.10263C4.53574 7.37607 5.23435 7.54056 6.00651 7.54056C6.18229 7.54056 6.35425 7.53204 6.52227 7.51564L6.44966 6.28485H5.17348C4.96819 6.28485 4.79383 6.11596 4.76192 5.88748L4.761 5.88053C4.69422 5.35211 4.71074 4.76233 4.79805 4.12074C4.89531 3.40602 5.07669 2.65042 5.31776 1.88235C5.41664 1.56744 5.52369 1.25589 5.63879 0.948104ZM11.0046 0.948104H6.54845L6.53251 0.987938L6.51548 1.03086L6.50392 1.06022L6.4922 1.09015L6.48628 1.10534C6.34684 1.46389 6.21904 1.82808 6.10315 2.19718C5.87828 2.91361 5.71011 3.61423 5.62169 4.26389C5.56999 4.64392 5.54706 4.99745 5.5549 5.3195L5.55553 5.34307H6.83949C7.05667 5.34307 7.23702 5.53147 7.25475 5.77526L7.25524 5.78266L7.3486 7.3658C7.60083 7.29814 7.84847 7.21019 8.08961 7.10263C8.29599 7.01046 8.47715 6.91246 8.63141 6.81518L8.65432 6.80061L8.6726 6.78879L8.69022 6.77726L8.70719 6.76597L8.71543 6.76042L8.73142 6.74956L8.74675 6.73897L8.75415 6.73379L8.76848 6.72366L8.7754 6.7187L8.7911 6.7073L8.80662 6.69575L8.81905 6.6862L8.82389 6.68236C9.01055 6.5364 9.26698 6.58618 9.39962 6.79549C9.53228 7.00481 9.49142 7.29522 9.30905 7.44792L9.30172 7.45394L9.29296 7.46087L9.2815 7.46976L9.27606 7.47391L9.26456 7.48259L9.25224 7.49179L9.23909 7.50144L9.23221 7.50645C9.22322 7.51298 9.21395 7.51961 9.20443 7.52635L9.18503 7.53998C9.16436 7.55436 9.14357 7.56851 9.12266 7.58242L9.1005 7.59708C9.09675 7.59953 9.09297 7.60201 9.08915 7.60448L9.06595 7.61949L9.05409 7.62705C8.86469 7.74769 8.64475 7.86735 8.39586 7.97851C8.08374 8.11788 7.75292 8.23253 7.40469 8.31705L7.50698 10.052H11.0046C11.0799 10.052 11.1412 9.98399 11.1432 9.8992L11.1432 9.89502V1.10506C11.1432 1.01832 11.0811 0.948104 11.0046 0.948104ZM8.7832 2.51773C9.01102 2.51773 9.19613 2.72436 9.19982 2.98083L9.19987 2.98863V3.61648C9.19987 3.87654 9.01332 4.08737 8.7832 4.08737C8.55539 4.08737 8.37027 3.88074 8.36659 3.62428L8.36654 3.61648V2.98862C8.36654 2.72855 8.55309 2.51773 8.7832 2.51773ZM3.22982 2.51773C3.45763 2.51773 3.64275 2.72436 3.64643 2.98083L3.64649 2.98863V3.61648C3.64649 3.87654 3.45994 4.08737 3.22982 4.08737C3.00201 4.08737 2.81689 3.88074 2.8132 3.62428L2.81315 3.61648V2.98862C2.81315 2.72855 2.9997 2.51773 3.22982 2.51773Z"})})}function VM({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 11",style:n,children:[G("path",{fill:t,d:"M11.0687 1.5412H7.48352C7.48352 0.717021 6.81593 0.0494385 5.99176 0.0494385H0.782967C0.370879 0.0494385 0.0329666 0.387351 0.0329666 0.799439V7.84614H11.9588V2.43131C11.9588 1.9368 11.5632 1.5412 11.0687 1.5412Z"}),G("path",{fill:"white",d:"M1.52472 6.6923V2.21702H10.467V6.6923H1.52472Z"}),G("path",{fill:Df,d:"M10.9451 10.5412H1.0467C0.486263 10.5412 0.0329666 10.0879 0.0329666 9.52746V3.09065H11.9588V9.5357C11.9588 10.0879 11.5055 10.5412 10.9451 10.5412Z"})]})}function $M({width:e=6,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 6 12",style:n,children:G("path",{d:"M0 1.5L4.5 6L0 10.5L0 12L6 6L0 -1.2666e-07L0 1.5Z",fill:t})})}function ZM(){return X("svg",{width:13,viewBox:"0 0 12 12",children:[G("path",{fill:Lf,d:"M0 6.00895C-2.43206e-09 6.12436 0.0227314 6.23864 0.0668964 6.34526C0.111061 6.45188 0.175795 6.54876 0.257401 6.63037C0.339008 6.71198 0.435888 6.77671 0.542512 6.82087C0.649136 6.86504 0.763414 6.88777 0.878823 6.88777C0.994232 6.88777 1.10851 6.86504 1.21513 6.82087C1.32176 6.77671 1.41864 6.71198 1.50024 6.63037C1.58185 6.54876 1.64658 6.45188 1.69075 6.34526C1.73491 6.23864 1.75765 6.12436 1.75765 6.00895C1.75765 5.89354 1.73491 5.77926 1.69075 5.67264C1.64658 5.56601 1.58185 5.46913 1.50024 5.38753C1.41864 5.30592 1.32176 5.24119 1.21513 5.19702C1.10851 5.15286 0.994232 5.13013 0.878823 5.13013C0.763414 5.13013 0.649136 5.15286 0.542512 5.19702C0.435888 5.24119 0.339008 5.30592 0.257401 5.38753C0.175795 5.46913 0.111061 5.56601 0.0668964 5.67264C0.0227314 5.77926 -2.43206e-09 5.89354 0 6.00895H0Z"}),G("path",{fill:Lf,d:"M4.24386 6.00898C4.24386 6.47514 4.42904 6.92221 4.75867 7.25184C5.0883 7.58147 5.53537 7.76665 6.00153 7.76665C6.4677 7.76665 6.91477 7.58147 7.24439 7.25184C7.57402 6.92221 7.7592 6.47514 7.7592 6.00898C7.7592 5.54282 7.57402 5.09575 7.24439 4.76612C6.91477 4.43649 6.4677 4.25131 6.00153 4.25131C5.53537 4.25131 5.0883 4.43649 4.75867 4.76612C4.42904 5.09575 4.24386 5.54282 4.24386 6.00898V6.00898Z"}),G("path",{fill:Lf,d:"M10.2454 6.00895C10.2454 6.24203 10.338 6.46556 10.5028 6.63037C10.6676 6.79518 10.8912 6.88777 11.1242 6.88777C11.3573 6.88777 11.5808 6.79518 11.7457 6.63037C11.9105 6.46556 12.0031 6.24203 12.0031 6.00895C12.0031 5.77587 11.9105 5.55234 11.7457 5.38753C11.5808 5.22272 11.3573 5.13013 11.1242 5.13013C10.8912 5.13013 10.6676 5.22272 10.5028 5.38753C10.338 5.55234 10.2454 5.77587 10.2454 6.00895Z"})]})}function UM(){return G("svg",{width:"12",viewBox:"0 0 12 12",children:G("path",{fill:Lf,d:"M0.0104141 6.335C0.0104141 6.68906 0.147836 7.02863 0.392449 7.27899C0.637061 7.52935 0.968827 7.67 1.31476 7.67C1.6607 7.67 1.99246 7.52935 2.23708 7.27899C2.48169 7.02863 2.61911 6.68906 2.61911 6.335C2.61911 5.98094 2.48169 5.64137 2.23708 5.39101C1.99246 5.14065 1.6607 5 1.31476 5C0.968827 5 0.637061 5.14065 0.392449 5.39101C0.147836 5.64137 0.0104141 5.98094 0.0104141 6.335ZM4.70607 6.335C4.70607 6.68906 4.84349 7.02863 5.0881 7.27899C5.33271 7.52935 5.66448 7.67 6.01041 7.67C6.35635 7.67 6.68811 7.52935 6.93273 7.27899C7.17734 7.02863 7.31476 6.68906 7.31476 6.335C7.31476 5.98094 7.17734 5.64137 6.93273 5.39101C6.68811 5.14065 6.35635 5 6.01041 5C5.66448 5 5.33271 5.14065 5.0881 5.39101C4.84349 5.64137 4.70607 5.98094 4.70607 6.335ZM9.40172 6.335C9.40172 6.68906 9.53914 7.02863 9.78375 7.27899C10.0284 7.52935 10.3601 7.67 10.7061 7.67C11.052 7.67 11.3838 7.52935 11.6284 7.27899C11.873 7.02863 12.0104 6.68906 12.0104 6.335C12.0104 5.98094 11.873 5.64137 11.6284 5.39101C11.3838 5.14065 11.052 5 10.7061 5C10.3601 5 10.0284 5.14065 9.78375 5.39101C9.53914 5.64137 9.40172 5.98094 9.40172 6.335Z"})})}function qM({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M0 1.28C0 0.573076 0.573076 0 1.28 0H10.72C11.4269 0 12 0.573076 12 1.28V10.72C12 11.4269 11.4269 12 10.72 12H1.28C0.573076 12 0 11.4269 0 10.72V1.28Z"}),G("path",{d:"M6.79601 10.8226L6.66001 10.7426L6.52801 10.8226C6.66 10.8866 6.66001 10.8866 6.79601 10.8226Z",fill:"#F4F4F4"}),G("path",{d:"M6.90613 10.7602C6.65935 10.9026 6.65955 10.9026 6.65955 10.6226L5.72266 7.44549C6.668 6.88528 6.668 6.88528 7.6 7.44549L8.82285 8.15298C10.122 8.904 10.122 8.904 8.82285 9.65385L6.90613 10.7602Z",fill:"#F4F4F4"}),G("path",{d:"M4.49984 1.65264C3.2 0.902641 3.2 0.902641 3.2 2.40264V8.62264C3.2 8.90264 3.2 8.90264 3.44246 9.04264L6.42 10.7619C6.48039 10.7968 6.52582 10.823 6.56 10.8385C6.5786 10.8471 6.58761 10.8514 6.6 10.8562C6.62591 10.8666 6.64026 10.8705 6.66392 10.8706L6.66625 3.65264C6.66625 2.90264 6.66625 2.90264 6.01633 2.52764L4.49984 1.65264Z",fill:"white"})]})}function YM({width:e=12,fill:t=Df,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M0.642861 0H11.3571C11.515 0 11.6664 0.0627124 11.778 0.174341C11.8897 0.28597 11.9524 0.437371 11.9524 0.595238V10.119C11.9524 10.2769 11.8897 10.4283 11.778 10.5399C11.6664 10.6516 11.515 10.7143 11.3571 10.7143H0.642861C0.484994 10.7143 0.333593 10.6516 0.221964 10.5399C0.110335 10.4283 0.0476227 10.2769 0.0476227 10.119V0.595238C0.0476227 0.437371 0.110335 0.28597 0.221964 0.174341C0.333593 0.0627124 0.484994 0 0.642861 0V0ZM3.02381 7.44048V5.05952L4.21429 6.25L5.40477 5.05952V7.44048H6.59524V3.27381H5.40477L4.21429 4.46429L3.02381 3.27381H1.83334V7.44048H3.02381V7.44048ZM9.57143 5.65476V3.27381H8.38096V5.65476H7.19048L8.97619 7.44048L10.7619 5.65476H9.57143V5.65476Z"})})}function KM({width:e=13,fill:t=Df,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M0.75 0H11.25L10.295 10.7815L5.9885 12L1.7065 10.781L0.75 0ZM4.2655 4.875L4.1495 3.516L9.179 3.5175L9.294 2.2065L2.706 2.205L3.055 6.21H7.618L7.455 7.923L6 8.325L4.5225 7.92L4.4285 6.865H3.124L3.289 8.9505L6 9.6755L8.6895 8.954L9.0615 4.8755H4.2655V4.875Z"})})}function GM({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 13",style:n,children:G("path",{fill:t,d:"M11.1537 7.26559L1.60773 12.777C1.47083 12.856 1.29703 12.8568 1.16032 12.7781C1.0236 12.6993 0.937375 12.55 0.937564 12.3922L0.935701 1.36626C0.93589 1.2085 1.02346 1.05838 1.16036 0.979338C1.29727 0.900296 1.47106 0.899523 1.60778 0.978238L11.152 6.48662C11.2887 6.56533 11.375 6.71468 11.3748 6.87244C11.3746 7.0302 11.2906 7.18654 11.1537 7.26559V7.26559Z"})})}U({current:{layout:{status:LT.NONE}}});const XM="M8.2 0.027771H1.53333C1.3327 0.027771 1.13404 0.0672881 0.948677 0.144066C0.763318 0.220844 0.594897 0.333379 0.45303 0.475247C0.311163 0.617114 0.198627 0.785535 0.121849 0.970893C0.0450712 1.15625 0.0055542 1.35492 0.0055542 1.55555V10.4444C0.0055542 10.6451 0.0450712 10.8437 0.121849 11.0291C0.198627 11.2145 0.311163 11.3829 0.45303 11.5247C0.594897 11.6666 0.763318 11.7791 0.948677 11.8559C1.13404 11.9327 1.3327 11.9722 1.53333 11.9722H8.2C8.40063 11.9722 8.5993 11.9327 8.78465 11.8559C8.97001 11.7791 9.13843 11.6666 9.2803 11.5247C9.42217 11.3829 9.5347 11.2145 9.61148 11.0291C9.68826 10.8437 9.72778 10.6451 9.72778 10.4444V1.55555C9.72778 1.35492 9.68826 1.15625 9.61148 0.970893C9.5347 0.785535 9.42217 0.617114 9.2803 0.475247C9.13843 0.333379 8.97001 0.220844 8.78465 0.144066C8.5993 0.0672881 8.40063 0.027771 8.2 0.027771V0.027771ZM1.53333 0.861104H8.2C8.29119 0.861104 8.3815 0.879067 8.46575 0.913966C8.55001 0.948865 8.62656 1.00002 8.69104 1.0645C8.75553 1.12899 8.80668 1.20554 8.84158 1.2898C8.87648 1.37405 8.89444 1.46435 8.89444 1.55555V10.4444C8.89444 10.5356 8.87648 10.6259 8.84158 10.7102C8.80668 10.7944 8.75553 10.871 8.69104 10.9355C8.62656 11 8.55001 11.0511 8.46575 11.086C8.3815 11.1209 8.29119 11.1389 8.2 11.1389H1.53333C1.44214 11.1389 1.35183 11.1209 1.26758 11.086C1.18333 11.0511 1.10677 11 1.04229 10.9355C0.977801 10.871 0.926648 10.7944 0.891749 10.7102C0.85685 10.6259 0.838888 10.5356 0.838888 10.4444V1.55555C0.838888 1.46435 0.85685 1.37405 0.891749 1.2898C0.926648 1.20554 0.977801 1.12899 1.04229 1.0645C1.10677 1.00002 1.18333 0.948865 1.26758 0.913966C1.35183 0.879067 1.44214 0.861104 1.53333 0.861104V0.861104Z",JM="M7.08889 5.44446C7.19589 5.44451 7.29877 5.48573 7.37622 5.55957C7.45366 5.63341 7.49972 5.73422 7.50487 5.8411C7.51001 5.94798 7.47383 6.05274 7.40384 6.13368C7.33384 6.21462 7.23539 6.26552 7.12889 6.27585L7.08889 6.27779H2.64444C2.53744 6.27774 2.43455 6.23652 2.35711 6.16268C2.27967 6.08884 2.23361 5.98803 2.22846 5.88115C2.22332 5.77427 2.2595 5.6695 2.32949 5.58857C2.39949 5.50763 2.49794 5.45673 2.60444 5.4464L2.64444 5.44446H7.08889ZM7.08889 7.94446C7.19589 7.94451 7.29877 7.98573 7.37622 8.05957C7.45366 8.13341 7.49972 8.23422 7.50487 8.3411C7.51001 8.44798 7.47383 8.55274 7.40384 8.63368C7.33384 8.71462 7.23539 8.76552 7.12889 8.77585L7.08889 8.77779H2.64444C2.53744 8.77774 2.43455 8.73652 2.35711 8.66268C2.27967 8.58884 2.23361 8.48803 2.22846 8.38115C2.22332 8.27427 2.2595 8.16951 2.32949 8.08857C2.39949 8.00763 2.49794 7.95673 2.60444 7.9464L2.64444 7.94446H7.08889ZM4.86666 2.94446C4.97367 2.94451 5.07655 2.98573 5.15399 3.05957C5.23144 3.13341 5.2775 3.23422 5.28264 3.3411C5.28779 3.44798 5.25161 3.55274 5.18162 3.63368C5.11162 3.71462 5.01317 3.76552 4.90666 3.77585L4.86666 3.77779H2.64444C2.53744 3.77774 2.43455 3.73652 2.35711 3.66268C2.27967 3.58884 2.23361 3.48803 2.22846 3.38115C2.22332 3.27427 2.2595 3.1695 2.32949 3.08857C2.39949 3.00763 2.49794 2.95673 2.60444 2.9464L2.64444 2.94446H4.86666Z";function QM({fill:e=kf,style:t,width:n=13.5}){return X("svg",{width:n,viewBox:"0 0 10 12",style:t,children:[G("path",{fill:e,d:XM}),G("path",{fill:e,d:JM})]})}function eO({fill:e=kf,style:t,width:n=13.5}){return X("svg",{width:n,viewBox:"0 0 10 12",style:t,children:[G("path",{fill:e,d:"M1.53333 0.027771H8.2C8.40063 0.027771 8.5993 0.0672881 8.78466 0.144066C8.97002 0.220844 9.13844 0.333379 9.2803 0.475247C9.42217 0.617114 9.53471 0.785535 9.61148 0.970894C9.68826 1.15625 9.72778 1.35492 9.72778 1.55555V10.4444C9.72778 10.6451 9.68826 10.8437 9.61148 11.0291C9.53471 11.2145 9.42217 11.3829 9.2803 11.5247C9.13844 11.6666 8.97002 11.7791 8.78466 11.8559C8.5993 11.9327 8.40063 11.9722 8.2 11.9722H5.20797C4.70312 11.9722 4.70312 11.9722 4.70312 11.5555C4.70312 11.1389 4.72176 11.1389 5.20797 11.1389H8.2C8.2912 11.1389 8.3815 11.1209 8.46575 11.086C8.55001 11.0511 8.62656 11 8.69105 10.9355C8.75553 10.871 8.80668 10.7944 8.84158 10.7102C8.87648 10.6259 8.89444 10.5356 8.89444 10.4444V1.55555C8.89444 1.46435 8.87648 1.37405 8.84158 1.2898C8.80668 1.20554 8.75553 1.12899 8.69105 1.0645C8.62656 1.00002 8.55001 0.948865 8.46575 0.913966C8.3815 0.879067 8.2912 0.861104 8.2 0.861104H1.53333C1.44214 0.861104 1.35184 0.879067 1.26758 0.913966C1.18333 0.948865 1.10677 1.00002 1.04229 1.0645C0.977803 1.12899 0.92665 1.20554 0.891751 1.2898C0.856852 1.37405 0.838889 1.46435 0.838889 1.55555V3.52777V5.76563C0.838889 6.26563 0.838889 6.26562 0.422223 6.26562H0.422204C0.00555591 6.26562 0 6.26562 0 5.76563C0 5.26563 0.00555611 3.77777 0.00555611 3.77777V1.55555C0.0055561 1.35492 0.0450731 1.15625 0.121851 0.970894C0.198629 0.785535 0.311165 0.617114 0.453032 0.475247C0.594899 0.333379 0.76332 0.220844 0.948679 0.144066C1.13404 0.0672881 1.3327 0.027771 1.53333 0.027771Z"}),G("path",{fill:e,d:"M7.08889 5.44446C7.1959 5.44451 7.29878 5.48573 7.37622 5.55957C7.45366 5.63341 7.49973 5.73422 7.50487 5.8411C7.51001 5.94798 7.47384 6.05274 7.40384 6.13368C7.33385 6.21462 7.2354 6.26552 7.12889 6.27585L7.08889 6.27779H2.64445C2.53744 6.27774 2.43456 6.23652 2.35712 6.16268C2.27967 6.08884 2.23361 5.98803 2.22847 5.88115C2.22332 5.77427 2.2595 5.6695 2.32949 5.58857C2.39949 5.50763 2.49794 5.45673 2.60445 5.4464L2.64445 5.44446H7.08889ZM4.86667 2.94446C4.97367 2.94451 5.07656 2.98573 5.154 3.05957C5.23144 3.13341 5.2775 3.23422 5.28265 3.3411C5.28779 3.44798 5.25161 3.55274 5.18162 3.63368C5.11162 3.71462 5.01317 3.76552 4.90667 3.77585L4.86667 3.77779H2.64445C2.53744 3.77774 2.43456 3.73652 2.35712 3.66268C2.27967 3.58884 2.23361 3.48803 2.22847 3.38115C2.22332 3.27427 2.2595 3.1695 2.32949 3.08857C2.39949 3.00763 2.49794 2.95673 2.60445 2.9464L2.64445 2.94446H4.86667Z"}),G("path",{fill:e,d:"M7.41622 8.10601C7.33878 8.03217 7.23589 7.99095 7.12889 7.99089L5.154 7.98895L5.114 7.99089C5.00749 8.00122 4.90904 8.05212 4.83905 8.13306C4.76905 8.214 4.73288 8.31876 4.73802 8.42564C4.74316 8.53252 4.78923 8.63333 4.86667 8.70717C4.94411 8.78101 5.04699 8.82223 5.154 8.82228L7.12889 8.82423L7.16889 8.82228C7.2754 8.81196 7.37385 8.76105 7.44384 8.68012C7.51384 8.59918 7.55001 8.49442 7.54487 8.38754C7.53973 8.28066 7.49366 8.17985 7.41622 8.10601Z"}),G("path",{fill:e,d:"M0.360988 7C0.0409945 7 -0.121002 7.40498 0.105993 7.64097L1.25597 8.83893C0.699981 9.87289 0.788979 11.1058 1.54596 11.8288C1.59996 11.8788 1.65496 11.9258 1.71296 11.9698C1.81896 12.0518 1.96095 11.9548 1.92895 11.8228C1.78696 11.2328 1.92995 10.5429 2.35095 9.97888L3.38392 11.0538C3.61092 11.2908 3.99991 11.1238 3.99991 10.7888V7.37599C4.00097 7.32766 3.9925 7.27959 3.97498 7.23454C3.95747 7.18949 3.93124 7.14833 3.89781 7.11341C3.86438 7.0785 3.8244 7.05051 3.78015 7.03105C3.7359 7.01159 3.68825 7.00104 3.63992 7H0.360988Z"})]})}const tO="M7.58869 11.7531C7.38361 11.7531 7.18253 11.6719 7.03205 11.5187L5.99601 10.4614C5.99468 10.4601 5.98802 10.4534 5.97736 10.4534C5.96671 10.4534 5.96005 10.4587 5.95872 10.4614L4.92134 11.5121C4.68697 11.7491 4.32875 11.8117 4.02779 11.6666L2.77069 11.0593C2.47106 10.9142 2.29661 10.5946 2.33656 10.263L2.51634 8.7928C2.51634 8.79014 2.51767 8.78215 2.51101 8.77282C2.50435 8.7635 2.49636 8.7635 2.49237 8.7635L1.02486 8.60903C0.693272 8.5744 0.42161 8.33204 0.347036 8.00711L0.0380872 6.64481C-0.035155 6.31988 0.104671 5.98429 0.38965 5.80851L1.65075 5.03215C1.65341 5.03081 1.66007 5.02682 1.66273 5.01483C1.6654 5.00418 1.66007 4.99752 1.65874 4.99486L0.863727 3.75107C0.68395 3.47009 0.703925 3.10654 0.911667 2.84553L1.78258 1.75356C1.99032 1.49255 2.34056 1.39401 2.65483 1.5072L4.04776 2.00791C4.05043 2.00924 4.05842 2.0119 4.06774 2.00658C4.07839 2.00125 4.08106 1.99326 4.08106 1.9906L4.55913 0.595001C4.66699 0.279394 4.96263 0.0676575 5.29688 0.0676575H6.69247C7.02539 0.0676575 7.32236 0.279394 7.43022 0.595001L7.91096 2.00658C7.91229 2.00924 7.91495 2.01723 7.92427 2.02256C7.93493 2.02788 7.94159 2.02522 7.94425 2.02389L9.34517 1.52584C9.65945 1.41398 10.0097 1.51519 10.2161 1.7762L11.083 2.87084C11.2908 3.13184 11.3081 3.49539 11.127 3.77638L10.328 5.02016C10.3266 5.02282 10.3213 5.02948 10.324 5.04014C10.3266 5.05079 10.3333 5.05478 10.3359 5.05745L11.5904 5.83648C11.874 6.01226 12.0139 6.34917 11.9379 6.6741L11.6237 8.03508C11.5491 8.36 11.2761 8.60104 10.9432 8.63433L9.47035 8.78481C9.46769 8.78481 9.4597 8.78614 9.45171 8.79413C9.44505 8.80345 9.44638 8.81144 9.44638 8.81411L9.62216 10.2789C9.66211 10.6105 9.48633 10.9288 9.18537 11.0726L7.92561 11.6759C7.81774 11.7278 7.70322 11.7531 7.58869 11.7531ZM5.97736 9.70766H5.9787C6.18777 9.70766 6.38219 9.79023 6.52868 9.93937L7.56472 10.9967C7.57404 11.0074 7.59002 11.01 7.60334 11.0034L8.86311 10.4001C8.87642 10.3935 8.88308 10.3802 8.88175 10.3668L8.7073 8.90067C8.68333 8.69292 8.74059 8.48918 8.8711 8.32671C9.0016 8.16425 9.18804 8.06304 9.39578 8.04173L10.8686 7.89125C10.8833 7.88992 10.8939 7.87927 10.8979 7.86595L11.2122 6.50498C11.2148 6.49166 11.2095 6.47701 11.1975 6.46902L9.9431 5.68999C9.76598 5.57947 9.64214 5.40768 9.59686 5.20393C9.55158 5.00019 9.58754 4.79111 9.70073 4.61666L10.5024 3.37155C10.5104 3.35956 10.5091 3.34358 10.5011 3.33293L9.63415 2.23829C9.62483 2.22764 9.61018 2.22231 9.59686 2.22764L8.1946 2.72568C7.99885 2.79493 7.78711 2.78428 7.59935 2.69372C7.41158 2.60317 7.27175 2.4447 7.20384 2.24761L6.7231 0.836035C6.71911 0.822718 6.70579 0.813396 6.69114 0.813396H5.29555C5.2809 0.813396 5.26891 0.822718 5.26359 0.836035L4.78818 2.23296C4.72026 2.43005 4.58044 2.58852 4.39267 2.67907C4.2049 2.76963 3.99317 2.78028 3.79608 2.7097L2.40314 2.20899C2.38983 2.20367 2.37518 2.20899 2.36586 2.21965L1.49494 3.31162C1.48562 3.32227 1.48562 3.33825 1.49228 3.35024L2.28729 4.59402C2.39915 4.76981 2.43644 4.97888 2.38983 5.18263C2.34322 5.38637 2.21937 5.55816 2.04226 5.66736L0.779831 6.44372C0.767846 6.45171 0.761187 6.46503 0.765182 6.47968L1.07413 7.84198C1.07679 7.8553 1.08878 7.86595 1.10343 7.86728L2.57094 8.02176C2.77868 8.04307 2.96378 8.14561 3.09428 8.3094C3.22479 8.4732 3.28205 8.67694 3.25675 8.88335L3.07697 10.3535C3.07564 10.3682 3.0823 10.3815 3.09562 10.3868L4.35272 10.9941C4.36604 11.0007 4.38068 10.9981 4.39134 10.9874L5.42871 9.93671C5.57387 9.78889 5.76962 9.70766 5.97736 9.70766Z";function nO({fill:e=kf,style:t,width:n=14.5}){return X("svg",{width:n,viewBox:"0 0 12 12",style:t,children:[G("path",{fill:e,d:"M5.98802 7.93918C4.86941 7.93918 3.95987 7.02965 3.95987 5.91104C3.95987 4.79244 4.86941 3.8829 5.98802 3.8829C7.10663 3.8829 8.01617 4.79244 8.01617 5.91104C8.01617 7.02965 7.10663 7.93918 5.98802 7.93918ZM5.98802 4.62731C5.2809 4.62731 4.70561 5.20259 4.70561 5.90971C4.70561 6.61683 5.2809 7.19211 5.98802 7.19211C6.69514 7.19211 7.27043 6.61683 7.27043 5.90971C7.27043 5.20259 6.69647 4.62731 5.98802 4.62731Z"}),G("path",{fill:e,d:tO})]})}function oO({width:e=12}){return G("svg",{width:e,viewBox:"0 0 12 12",children:G("path",{fill:Df,d:"M9.33981 10.069C9.33981 10.471 9.01283 10.7982 8.6106 10.7982H3.36024C3.16691 10.798 2.98156 10.7211 2.84486 10.5844C2.70815 10.4477 2.63125 10.2624 2.63102 10.069V2.33932H9.33981V10.069V10.069ZM4.08945 1.02673C4.08945 0.988053 4.10482 0.950957 4.13217 0.923606C4.15952 0.896255 4.19662 0.880889 4.2353 0.880889H7.73554C7.77422 0.880889 7.81131 0.896255 7.83866 0.923606C7.86602 0.950957 7.88138 0.988053 7.88138 1.02673V1.46426H4.08945V1.02673V1.02673ZM11.5275 1.46426H8.75644V1.02673C8.75644 0.463777 8.29849 0.00582886 7.73554 0.00582886H4.2353C3.67234 0.00582886 3.21439 0.463777 3.21439 1.02673V1.46426H0.443367C0.327327 1.46426 0.216039 1.51036 0.133986 1.59241C0.0519333 1.67447 0.00583649 1.78575 0.00583649 1.90179C0.00583649 2.01783 0.0519333 2.12912 0.133986 2.21117C0.216039 2.29323 0.327327 2.33932 0.443367 2.33932H1.75596V10.069C1.75596 10.9537 2.47584 11.6733 3.36024 11.6733H8.6106C9.49499 11.6733 10.2149 10.9537 10.2149 10.069V2.33932H11.5275C11.6435 2.33932 11.7548 2.29323 11.8368 2.21117C11.9189 2.12912 11.965 2.01783 11.965 1.90179C11.965 1.78575 11.9189 1.67447 11.8368 1.59241C11.7548 1.51036 11.6435 1.46426 11.5275 1.46426V1.46426ZM5.98542 9.48565C6.10146 9.48565 6.21274 9.43955 6.2948 9.3575C6.37685 9.27545 6.42295 9.16416 6.42295 9.04812V4.38113C6.42295 4.26509 6.37685 4.1538 6.2948 4.07175C6.21274 3.9897 6.10146 3.9436 5.98542 3.9436C5.86938 3.9436 5.75809 3.9897 5.67604 4.07175C5.59398 4.1538 5.54789 4.26509 5.54789 4.38113V9.04812C5.54789 9.16416 5.59398 9.27545 5.67604 9.3575C5.75809 9.43955 5.86938 9.48565 5.98542 9.48565ZM3.94361 9.48565C4.05965 9.48565 4.17094 9.43955 4.25299 9.3575C4.33504 9.27545 4.38114 9.16416 4.38114 9.04812V4.38113C4.38114 4.26509 4.33504 4.1538 4.25299 4.07175C4.17094 3.9897 4.05965 3.9436 3.94361 3.9436C3.82757 3.9436 3.71628 3.9897 3.63423 4.07175C3.55218 4.1538 3.50608 4.26509 3.50608 4.38113V9.04812C3.50608 9.16416 3.55218 9.27545 3.63423 9.3575C3.71628 9.43955 3.82757 9.48565 3.94361 9.48565V9.48565ZM8.02722 9.48565C8.14326 9.48565 8.25455 9.43955 8.33661 9.3575C8.41866 9.27545 8.46475 9.16416 8.46475 9.04812V4.38113C8.46476 4.32367 8.45345 4.26677 8.43147 4.21367C8.40949 4.16058 8.37726 4.11234 8.33663 4.0717C8.296 4.03107 8.24777 3.99883 8.19468 3.97684C8.14159 3.95485 8.08469 3.94353 8.02722 3.94353C7.96976 3.94353 7.91286 3.95485 7.85977 3.97684C7.80668 3.99883 7.75845 4.03107 7.71782 4.0717C7.67719 4.11234 7.64496 4.16058 7.62298 4.21367C7.60099 4.26677 7.58968 4.32367 7.58969 4.38113V9.04812C7.58969 9.16416 7.63579 9.27545 7.71784 9.3575C7.7999 9.43955 7.91118 9.48565 8.02722 9.48565"})})}function iO({width:e=12,fill:t=Lf}){return G("svg",{width:e,viewBox:"0 0 12 12",children:G("path",{fill:t,d:"M6 11.9655C2.71724 11.9655 0.034483 9.2827 0.034483 5.99994C0.034483 2.71718 2.71724 0.0344238 6 0.0344238C9.28276 0.0344238 11.9655 2.71718 11.9655 5.99994C11.9655 9.2827 9.28276 11.9655 6 11.9655ZM6 11.1103C8.81379 11.1103 11.1103 8.81373 11.1103 5.99994C11.1103 3.18615 8.81379 0.889596 6 0.889596C3.18621 0.889596 0.889655 3.18615 0.889655 5.99994C0.889655 8.81373 3.18621 11.1103 6 11.1103ZM8.97931 5.99994C8.97931 6.25511 8.8069 6.42753 8.55172 6.42753H3.44138C3.18621 6.42753 3.01379 6.25511 3.01379 5.99994C3.01379 5.74477 3.18621 5.57235 3.44138 5.57235H8.55172C8.81379 5.57235 8.97931 5.74477 8.97931 5.99994Z"})})}function rO({width:e=12,fill:t=Lf}){return X("svg",{width:e,viewBox:"0 0 12 12",children:[G("path",{fill:t,d:"M5.99655 3.01739C6.25172 3.01739 6.42414 3.18981 6.42414 3.44498V8.55532C6.42414 8.8105 6.25172 8.98291 5.99655 8.98291C5.74138 8.98291 5.56897 8.8105 5.56897 8.55532V3.44498C5.56897 3.18291 5.74138 3.01739 5.99655 3.01739Z"}),G("path",{fill:t,d:"M6 11.9655C2.71724 11.9655 0.034483 9.2827 0.034483 5.99994C0.034483 2.71718 2.71724 0.0344238 6 0.0344238C9.28276 0.0344238 11.9655 2.71718 11.9655 5.99994C11.9655 9.2827 9.28276 11.9655 6 11.9655ZM6 11.1103C8.81379 11.1103 11.1103 8.81373 11.1103 5.99994C11.1103 3.18615 8.81379 0.889596 6 0.889596C3.18621 0.889596 0.889655 3.18615 0.889655 5.99994C0.889655 8.81373 3.18621 11.1103 6 11.1103Z"})]})}function lO({width:e=12,fill:t=Df,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M9.57143 8.38094V1.23808C9.57143 1.08175 9.54064 0.926943 9.48081 0.782508C9.42098 0.638073 9.33329 0.506836 9.22275 0.39629C9.1122 0.285744 8.98096 0.198054 8.83653 0.138227C8.69209 0.0784 8.53729 0.0476074 8.38095 0.0476074H1.2381C1.08176 0.0476074 0.926958 0.0784 0.782523 0.138227C0.638088 0.198054 0.506851 0.285744 0.396305 0.39629C0.285759 0.506836 0.198069 0.638073 0.138242 0.782508C0.0784152 0.926943 0.0476227 1.08175 0.0476227 1.23808V8.38094C0.0476227 8.53727 0.0784152 8.69208 0.138242 8.83651C0.198069 8.98095 0.285759 9.11219 0.396305 9.22273C0.506851 9.33328 0.638088 9.42097 0.782523 9.48079C0.926958 9.54062 1.08176 9.57141 1.2381 9.57141H8.38095C8.69669 9.57141 8.99949 9.44599 9.22275 9.22273C9.446 8.99947 9.57143 8.69667 9.57143 8.38094ZM1.2381 1.23808H8.38095V8.38094H1.2381V1.23808ZM10.7619 2.42856V9.57141C10.7619 9.88715 10.6365 10.1899 10.4132 10.4132C10.19 10.6365 9.88716 10.7619 9.57143 10.7619H2.42857C2.42857 10.9182 2.45937 11.073 2.51919 11.2175C2.57902 11.3619 2.66671 11.4931 2.77726 11.6037C2.8878 11.7142 3.01904 11.8019 3.16347 11.8617C3.30791 11.9216 3.46271 11.9524 3.61905 11.9524H9.57143C10.2029 11.9524 10.8085 11.7015 11.255 11.255C11.7015 10.8085 11.9524 10.2029 11.9524 9.57141V3.61903C11.9524 3.4627 11.9216 3.30789 11.8618 3.16346C11.8019 3.01902 11.7142 2.88779 11.6037 2.77724C11.4932 2.6667 11.3619 2.57901 11.2175 2.51918C11.073 2.45935 10.9182 2.42856 10.7619 2.42856V2.42856Z"})})}function sO({width:e=12.5,fill:t=Df,style:n}){return G("svg",{width:e,viewBox:"-1 0 12 12",style:n,children:G("path",{fill:t,d:"M7.37825 1.05801L5.82133 0.061157C5.64022 -0.0545086 5.39976 -0.00124151 5.28409 0.179866L4.81686 0.911908C4.7012 1.09302 4.75446 1.33348 4.93557 1.44914L6.49097 2.44448C6.67208 2.56014 6.91254 2.50688 7.02821 2.32577L7.49543 1.59373C7.61262 1.41414 7.55935 1.17216 7.37825 1.05801ZM6.56554 2.74277L4.63271 1.50698C4.55509 1.45828 4.4516 1.4811 4.4029 1.5572C4.3542 1.63482 4.37703 1.73831 4.45313 1.78701L6.38596 3.02281C6.46358 3.07151 6.56707 3.04868 6.61577 2.97258C6.66599 2.89496 6.64316 2.79147 6.56554 2.74277ZM5.9583 3.07151L4.58858 2.19488C4.35724 2.04726 4.04525 2.11574 3.89763 2.34707L0.450487 7.74074C0.441356 7.75444 0.432224 7.76966 0.424614 7.78488C0.394176 7.82902 0.371347 7.87772 0.36526 7.9249L0.00304378 10.5076C-0.0258726 10.6963 0.18263 10.8287 0.340909 10.7222L2.51877 9.30527C2.52942 9.29766 2.54008 9.28853 2.55073 9.2794C2.59334 9.24592 2.63139 9.20483 2.66335 9.15613L6.11049 3.76398C6.25964 3.53113 6.19115 3.22065 5.9583 3.07151ZM0.920759 9.63553C0.899452 9.60814 0.872058 9.58378 0.840097 9.564C0.808137 9.54421 0.774655 9.529 0.741173 9.52139L0.878145 8.60824L1.68628 9.12569L0.920759 9.63553ZM10.451 11.9793H0.0958807C0.0426137 11.9793 0 11.9367 0 11.8834V11.3325C0 11.2792 0.0441356 11.2366 0.0958807 11.2366H10.4495C10.5027 11.2366 10.5454 11.2792 10.5454 11.3325V11.8834C10.5469 11.9367 10.5027 11.9793 10.451 11.9793V11.9793Z"})})}function cO(){return G("svg",{width:12.5,viewBox:"0 0 12 12",children:G("path",{fill:Df,d:"M4.88672 0.0117188C4.31716 0.0117188 3.85547 0.473426 3.85547 1.04297V5.09766H1.04297C0.473438 5.09766 0.0117188 5.55936 0.0117188 6.12891V10.957C0.0117188 11.5266 0.473438 11.9883 1.04297 11.9883H4.73074C4.78161 11.996 4.8337 12 4.88672 12H10.9453C11.2331 12 11.4933 11.8821 11.6804 11.6921C11.8704 11.505 11.9883 11.2448 11.9883 10.957V6.12891C11.9883 6.07589 11.9843 6.02381 11.9766 5.97293V1.04297C11.9766 0.473426 11.5149 0.0117188 10.9453 0.0117188H4.88672ZM7.81683 7.57897V4.56013C7.81683 4.24215 8.07437 3.98438 8.39207 3.98438C8.70976 3.98438 8.96732 4.24215 8.96732 4.56013V8.73047H5.31679L5.68777 9.10145C5.91246 9.32613 5.91238 9.69047 5.68762 9.91521C5.46288 10.14 5.09855 10.14 4.87386 9.91536L3.11719 8.15868L4.87448 6.40139C5.09924 6.17664 5.46357 6.17657 5.68825 6.40124C5.91292 6.62592 5.91286 6.99026 5.68811 7.215L5.32413 7.57897H7.81683V7.57897Z"})})}function aO({width:e=12,fill:t=Df,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M7.49903 4.65002C7.40736 4.55896 7.30965 4.47687 7.20896 4.40076C7.10533 4.30172 6.96443 4.24088 6.8093 4.24088C6.49089 4.24088 6.23279 4.49737 6.23279 4.81376C6.23279 4.95376 6.2834 5.08199 6.36736 5.1815C6.36733 5.18148 6.36738 5.18151 6.36736 5.1815C6.40769 5.2293 6.45574 5.27057 6.50961 5.30319C6.56397 5.34774 6.61732 5.3916 6.66722 5.44118L6.71475 5.48843C7.31224 6.08143 7.13387 7.10311 6.53637 7.69686L3.98672 10.2297C3.38923 10.8227 2.41786 10.8227 1.82034 10.2297L1.77244 10.1821C1.17491 9.58836 1.17491 8.62239 1.77244 8.0301L2.89885 6.91115C3.04338 6.79716 3.13616 6.62121 3.13616 6.42364C3.13616 6.08 2.85582 5.80142 2.51 5.80142C2.3795 5.80142 2.25837 5.84112 2.15806 5.90899C2.15774 5.90832 2.15741 5.90769 2.15707 5.90701L2.14507 5.91817C2.10073 5.94985 2.06064 5.987 2.02601 6.02888L0.855424 7.11735C-0.244929 8.21153 -0.244929 10.0011 0.855424 11.0937L0.902951 11.141C2.0033 12.2336 3.80341 12.2336 4.90376 11.141L7.45266 8.60734C8.55149 7.51397 8.64466 5.78917 7.54584 4.6965L7.49903 4.65002Z"}),G("path",{fill:t,d:"M11.1732 0.934624L11.1256 0.887396C10.0253 -0.206036 8.22519 -0.206036 7.12483 0.887396L4.57594 3.421C3.47559 4.51443 3.41499 6.09341 4.51534 7.18755L4.56211 7.23331C4.61208 7.28295 4.66395 7.32976 4.7169 7.37465C4.75523 7.41719 4.80025 7.4536 4.85029 7.4824C4.85067 7.4827 4.85107 7.48301 4.85145 7.48332C4.93122 7.5289 5.02381 7.55497 5.12245 7.55497C5.42304 7.55497 5.6667 7.31281 5.6667 7.01414C5.6667 6.92984 5.64727 6.85004 5.61263 6.7789C5.54068 6.61836 5.40599 6.52063 5.31283 6.42805L5.26605 6.38231C4.66856 5.78859 4.89545 4.926 5.49294 4.33228L8.04334 1.7994C8.63935 1.20564 9.61105 1.20564 10.2086 1.7994L10.2561 1.84587C10.8536 2.43964 10.8536 3.40599 10.2561 3.99899L9.1334 5.11541C8.98066 5.22786 8.88161 5.40824 8.88161 5.61162C8.88161 5.95248 9.15969 6.22882 9.50272 6.22882C9.6221 6.22882 9.73358 6.19527 9.82824 6.13726C9.82896 6.13846 9.82962 6.13958 9.83034 6.1408L9.84775 6.12483C9.90139 6.08914 9.94904 6.04532 9.9891 5.99522L11.1723 4.91027C12.2735 3.81685 12.2735 2.02804 11.1732 0.934624Z"})]})}function uO({width:e=13,fill:t=kf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M4.90125 4.83703H4.90504C4.90504 4.43018 4.98745 4.11596 5.15202 3.89403C5.33477 3.62897 5.63356 3.49652 6.04813 3.49652C6.38332 3.49652 6.64241 3.5889 6.82519 3.77382C7.00188 3.96493 7.09035 4.21759 7.09035 4.53191C7.09035 4.75992 7.00491 4.98491 6.83428 5.20672L6.67882 5.3824C6.10576 5.9001 5.76148 6.28218 5.6457 6.52889C5.52386 6.7569 5.46294 7.04965 5.46294 7.40706V7.5643H6.44121V7.40706C6.44121 7.17907 6.48974 6.97557 6.58732 6.79684C6.67276 6.61815 6.80066 6.45786 6.97153 6.31606C7.4043 5.93399 7.66011 5.69371 7.73948 5.595C7.97104 5.29305 8.08682 4.91717 8.08682 4.46722C8.08682 3.90643 7.90379 3.46571 7.53828 3.14529C7.17883 2.81858 6.70309 2.65527 6.11209 2.65527C5.43539 2.65527 4.90505 2.85246 4.52133 3.24691C4.14974 3.62241 3.95814 4.13052 3.946 4.77118C3.9455 4.77939 3.94524 4.78774 3.94524 4.79609C3.94524 4.79987 3.94524 4.80367 3.9455 4.80733C3.94524 4.8172 3.94524 4.82705 3.94524 4.83703H3.94701C3.96749 5.08526 4.17325 5.28029 4.42427 5.28029C4.67501 5.28029 4.88077 5.08526 4.90125 4.83703Z"}),G("path",{fill:t,d:"M6.01603 0.0667725C2.72809 0.0667725 0.0625076 2.73223 0.0625076 6.0203C0.0625076 9.30849 2.72809 11.9738 6.01603 11.9738C9.30421 11.9738 11.9696 9.30849 11.9696 6.0203C11.9696 2.73223 9.3042 0.0667725 6.01603 0.0667725ZM6.01603 11.1973C3.1568 11.1973 0.839039 8.87952 0.839039 6.0203C0.839039 3.16107 3.1568 0.843317 6.01603 0.843317C8.87524 0.843317 11.193 3.16107 11.193 6.0203C11.193 8.87952 8.87523 11.1973 6.01603 11.1973Z"}),G("path",{fill:t,d:"M6.43211 8.2484C6.56002 8.36543 6.62398 8.52242 6.62398 8.71982C6.62398 8.90463 6.55698 9.06487 6.42301 9.20037C6.28879 9.32373 6.13028 9.38541 5.94753 9.38541C5.75845 9.38541 5.6002 9.32069 5.47204 9.19127C5.34388 9.06185 5.28018 8.90463 5.28018 8.71982C5.28018 8.52242 5.34388 8.36543 5.47204 8.2484C5.59414 8.12504 5.75236 8.06335 5.94753 8.06335C6.14849 8.06335 6.31026 8.12504 6.43211 8.2484Z"})]})}function dO({width:e=13,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 9",style:n,children:G("path",{fill:t,d:"M6 0.0332031C7.71051 0.0332031 9.14233 1.25025 9.49176 2.89002C10.8844 3.05195 11.9659 4.25366 11.9659 5.71531C11.9659 7.28178 10.7173 8.55593 9.18153 8.55593H2.81847C1.28267 8.55593 0.03409 7.28178 0.03409 5.71531C0.03409 4.25281 1.11648 3.05281 2.50824 2.88917C2.85767 1.25025 4.28949 0.0340553 6 0.0340553V0.0332031ZM6 0.885476C4.70795 0.885476 3.61108 1.80593 3.34091 3.06815L3.21307 3.66559L2.60625 3.73718C1.65 3.84798 0.886363 4.68065 0.886363 5.71445C0.886363 6.82837 1.77017 7.70451 2.81847 7.70451H9.18153C10.2298 7.70451 11.1136 6.82837 11.1136 5.71616C11.1136 4.6815 10.35 3.84968 9.39375 3.73803L8.78608 3.66644L8.65824 3.069C8.38892 1.80593 7.29204 0.885476 6 0.885476Z"})})}function fO({width:e=12,fill:t=Df,style:n,fully:o}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M1.14307 5.88991C1.15719 5.27291 1.28426 4.67427 1.52287 4.11092C1.76713 3.53204 2.11728 3.01387 2.56344 2.5663C3.0096 2.11873 3.52918 1.76858 4.10806 1.52432C4.7067 1.27159 5.34206 1.14311 5.99859 1.14311C6.65512 1.14311 7.29047 1.27159 7.88771 1.52432C8.46517 1.76858 8.98475 2.11873 9.43091 2.5663C9.57069 2.70608 9.70199 2.85433 9.82342 3.00964L8.97346 3.67323C8.89862 3.73112 8.92404 3.84972 9.01581 3.87231L11.4965 4.47942C11.5671 4.49637 11.6363 4.44272 11.6363 4.37071L11.6476 1.81659C11.6476 1.72199 11.5389 1.66834 11.4655 1.72764L10.6691 2.35028C9.5834 0.960976 7.89477 0.0700684 5.99718 0.0700684C2.76252 0.0700684 0.130742 2.66231 0.0700303 5.88426C0.0686184 5.9478 0.119447 6.00004 0.182982 6.00004H1.03012C1.09224 6.00004 1.14166 5.95062 1.14307 5.88991ZM11.817 6.00004H10.9699C10.9078 6.00004 10.8583 6.04945 10.8569 6.11017C10.8428 6.72717 10.7157 7.32581 10.4771 7.88916C10.2329 8.46804 9.88272 8.98761 9.43656 9.43377C8.9904 9.87993 8.47082 10.2315 7.89194 10.4758C7.2933 10.7285 6.65794 10.857 6.00141 10.857C5.34488 10.857 4.70953 10.7285 4.11088 10.4758C3.53342 10.2315 3.01384 9.88134 2.56768 9.43377C2.4279 9.294 2.29659 9.14575 2.17517 8.99044L3.02513 8.32685C3.09996 8.26896 3.07455 8.15036 2.98277 8.12777L0.502071 7.52065C0.431476 7.50371 0.362293 7.55736 0.362293 7.62937L0.35241 10.1849C0.35241 10.2795 0.461126 10.3332 0.534545 10.2739L1.33085 9.65121C2.4166 11.0391 4.10523 11.93 6.00282 11.93C9.23889 11.93 11.8693 9.33635 11.93 6.11581C11.9314 6.05228 11.8806 6.00004 11.817 6.00004Z"}),o&&G("path",{fill:t,d:"M9 7.33571C9 7.07857 8.82857 6.90714 8.57143 6.90714H3.42857C3.17143 6.90714 3 7.07857 3 7.33571C3 7.59286 3.17143 7.76429 3.42857 7.76429H8.57143C8.82857 7.76429 9 7.59286 9 7.33571Z"}),o&&G("path",{fill:t,d:"M9 4.67857C9 4.42143 8.82857 4.25 8.57143 4.25H3.42857C3.17143 4.25 3 4.42143 3 4.67857C3 4.93571 3.17143 5.10714 3.42857 5.10714H8.57143C8.82857 5.10714 9 4.93571 9 4.67857Z"})]})}function hO({width:e=13,fill:t=kf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M6 11.9659C2.71091 11.9659 0.0340918 9.28906 0.0340918 5.99997C0.0340918 2.71088 2.71091 0.0340576 6 0.0340576C9.28909 0.0340576 11.9659 2.71088 11.9659 5.99997C11.9659 9.28906 9.28909 11.9659 6 11.9659ZM6 0.542694C2.98977 0.542694 0.542728 2.98974 0.542728 5.99997C0.542728 9.01019 2.98977 11.4572 6 11.4572C9.01023 11.4572 11.4573 9.01019 11.4573 5.99997C11.4573 2.98974 9.01023 0.542694 6 0.542694ZM6 11.9659C4.29205 11.9659 2.96591 9.33747 2.96591 5.99997C2.96591 2.66247 4.29136 0.0340576 6 0.0340576C7.70864 0.0340576 9.03409 2.66247 9.03409 5.99997C9.03409 9.33747 7.68409 11.9659 6 11.9659ZM6 0.542694C4.62546 0.542694 3.47455 3.04428 3.47455 5.99997C3.47455 8.95565 4.61932 11.4572 6 11.4572C7.38068 11.4572 8.52545 8.95565 8.52545 5.99997C8.52545 3.04428 7.35068 0.542694 6 0.542694ZM6 3.85633C4.405 3.85345 2.83638 3.44922 1.43864 2.68088C1.31182 2.60178 1.26341 2.45042 1.33636 2.3236C1.41477 2.1961 1.56614 2.14769 1.69364 2.22065C2.98977 2.94133 4.49796 3.32315 6 3.32315C7.51758 3.3269 9.0107 2.94094 10.3364 2.20224C10.4639 2.12383 10.6152 2.17838 10.6943 2.30519C10.7727 2.43269 10.7182 2.58406 10.5914 2.66247C9.18834 3.44681 7.60738 3.85766 6 3.85565V3.85633ZM1.61523 9.94906C1.56906 9.94958 1.52355 9.9381 1.48316 9.91575C1.44276 9.8934 1.40886 9.86095 1.38477 9.82156C1.30568 9.69474 1.36023 9.54338 1.48773 9.46428C2.86227 8.72519 4.41955 8.31951 5.97545 8.31951C7.53205 8.31951 9.08864 8.70133 10.4639 9.44042C10.5914 9.51883 10.6398 9.67019 10.5668 9.79769C10.4877 9.92451 10.3364 9.97292 10.2095 9.89997C8.91104 9.19163 7.45459 8.82294 5.97545 8.82815C4.49796 8.82815 3.01977 9.20997 1.71818 9.90065C1.69364 9.94838 1.66364 9.94838 1.61523 9.94838V9.94906ZM11.7116 6.30883H0.28841C0.254521 6.3107 0.220617 6.30541 0.188913 6.29329C0.157209 6.28117 0.128417 6.2625 0.104418 6.2385C0.0804177 6.2145 0.0617494 6.18571 0.0496315 6.15401C0.0375135 6.1223 0.0322184 6.0884 0.0340918 6.05451C0.0340918 5.90315 0.137046 5.80019 0.28841 5.80019H11.7116C11.863 5.80019 11.9659 5.90247 11.9659 6.05451C11.9656 6.12185 11.9386 6.18633 11.891 6.23395C11.8434 6.28156 11.7789 6.30847 11.7116 6.30883Z"}),G("path",{fill:t,d:"M0.8 5.80005H11.2C11.7333 5.80005 12 6.0756 12 6.62672V11.1734C12 11.7245 11.7333 12 11.2 12H0.8C0.266667 12 0 11.7245 0 11.1734V6.62672C0 6.0756 0.266667 5.80005 0.8 5.80005Z"}),G("path",{fill:"white",stroke:"white","stroke-width":"0.3",d:"M1.1 6.30005V11.4667H2.2424C2.7584 11.4667 3.1544 11.228 3.4312 10.7578C3.6936 10.3094 3.8272 9.67905 3.8272 8.88338C3.8272 8.07325 3.7024 7.44395 3.4592 7.00891C3.1912 6.53151 2.8 6.30005 2.2792 6.30005H1.1ZM1.4776 6.81362H2.2192C2.652 6.81362 2.9656 6.98721 3.168 7.34165C3.3576 7.67541 3.4536 8.18898 3.4536 8.88338C3.4536 9.55608 3.348 10.0707 3.1456 10.4179C2.9288 10.7723 2.6064 10.9531 2.1776 10.9531H1.4776V6.81362ZM5.3824 6.30005L3.8272 11.4667H4.3144L4.7352 10.02H6.5504L6.9712 11.4667H7.4632L5.908 6.30005H5.3824ZM4.8784 9.51992L5.6368 6.93658H5.6592L6.4064 9.51992H4.8784ZM7.464 6.30005L8.9896 11.4667H9.5736L11.1 6.30005H10.58L9.2904 10.8229H9.2728L7.984 6.30005H7.464Z"})]})}function pO({width:e=12.5,fill:t=kf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M6.01603 0.0667725C2.72809 0.0667725 0.0625095 2.73223 0.0625095 6.0203C0.0625095 9.30849 2.72809 11.9738 6.01603 11.9738C9.30422 11.9738 11.9696 9.30849 11.9696 6.0203C11.9696 2.73223 9.3042 0.0667725 6.01603 0.0667725ZM6.01603 11.1973C3.1568 11.1973 0.839041 8.87952 0.839041 6.0203C0.839041 3.16107 3.1568 0.843317 6.01603 0.843317C8.87525 0.843317 11.193 3.16107 11.193 6.0203C11.193 8.87952 8.87523 11.1973 6.01603 11.1973Z"}),G("path",{fill:t,d:"M6.48192 2.98509C6.60984 3.10212 6.67379 3.25911 6.67379 3.45651C6.67379 3.64132 6.6068 3.80157 6.47283 3.93707C6.3386 4.06043 6.18009 4.12211 5.99734 4.12211C5.80827 4.12211 5.65001 4.05738 5.52186 3.92796C5.3937 3.79855 5.33 3.64132 5.33 3.45651C5.33 3.25911 5.3937 3.10212 5.52186 2.98509C5.64396 2.86173 5.80218 2.80005 5.99734 2.80005C6.19831 2.80005 6.36008 2.86173 6.48192 2.98509Z"}),G("path",{fill:t,d:"M5.9794 4.80005C5.71573 4.80005 5.5 5.01578 5.5 5.27945V8.70852C5.5 8.97219 5.71573 9.18792 5.9794 9.18792C6.24307 9.18792 6.45881 8.97219 6.45881 8.70852V5.27945C6.45881 5.01578 6.24307 4.80005 5.9794 4.80005Z"})]})}function vO({width:e=12,fill:t=kf,style:n={position:"relative",top:-.5}}){return X("svg",{width:e,viewBox:"0 0 12 13",style:n,children:[G("path",{fill:t,d:"M4.73684 9.37949C4.73684 9.47329 4.73684 9.47329 4.73684 9.37949L4.82707 9.47329C4.82707 9.47329 4.91729 9.56708 5.00752 9.56708H5.09774C5.18797 9.56708 5.18797 9.47329 5.27819 9.47329C5.36842 9.37949 5.45865 9.37949 5.45865 9.37949L7.53383 5.62769C7.62406 5.4401 7.62406 5.15871 7.35338 5.06492C7.17293 4.87733 6.90225 4.97112 6.81203 5.15871L5.09774 8.25395L3.38346 5.15871C3.20301 4.97112 2.93233 4.87733 2.75188 4.97112C2.57143 5.15871 2.4812 5.3463 2.57143 5.62769L4.73684 9.37949ZM2.57143 11.3492H7.62406C7.89474 11.3492 8.07519 11.1616 8.07519 10.8802C8.07519 10.5988 7.89474 10.4112 7.62406 10.4112H2.57143C2.30075 10.4112 2.1203 10.5988 2.1203 10.8802C2.1203 11.1616 2.30075 11.3492 2.57143 11.3492Z"}),G("path",{fill:t,d:"M9.24812 1.7821H0.857143C0.406015 1.7821 0.0451126 2.15728 0.0451126 2.62626V12.0996C0.0451126 12.5685 0.406015 12.9437 0.857143 12.9437H9.24812C9.69925 12.9437 10.0602 12.5685 10.0602 12.0996V2.62626C10.0602 2.15728 9.69925 1.7821 9.24812 1.7821ZM9.24812 12.0996H0.857143V2.62626H9.24812V12.0996Z"}),G("path",{fill:t,d:"M10.9624 0H2.1203C1.93985 0 1.7594 0.18759 1.7594 0.468976C1.7594 0.750361 1.93985 0.937951 2.21053 0.937951H11.0526V10.8802C11.0526 11.1616 11.2331 11.3492 11.5038 11.3492C11.7744 11.3492 11.9549 11.1616 11.9549 10.8802V0.844156C11.7744 0.37518 11.4135 0 10.9624 0Z"})]})}function gO({width:e=11,fill:t=kf,style:n={position:"relative",top:-.5}}){return X("svg",{width:e,viewBox:"0 0 11 13",style:n,children:[G("path",{fill:t,d:"M8.01524 5.40002H2.98476C2.87357 5.40002 2.76695 5.44556 2.68833 5.52661C2.60971 5.60766 2.56555 5.71758 2.56555 5.83221C2.56555 5.94683 2.60971 6.05675 2.68833 6.1378C2.76695 6.21885 2.87357 6.26439 2.98476 6.26439H8.01524C8.12642 6.26439 8.23305 6.21885 8.31167 6.1378C8.39028 6.05675 8.43445 5.94683 8.43445 5.83221C8.43445 5.71758 8.39028 5.60766 8.31167 5.52661C8.23305 5.44556 8.12642 5.40002 8.01524 5.40002ZM8.01524 7.99311H2.98476C2.87357 7.99311 2.76695 8.03864 2.68833 8.11969C2.60971 8.20074 2.56555 8.31067 2.56555 8.42529C2.56555 8.53991 2.60971 8.64984 2.68833 8.73089C2.76695 8.81194 2.87357 8.85747 2.98476 8.85747H8.01524C8.12642 8.85747 8.23305 8.81194 8.31167 8.73089C8.39028 8.64984 8.43445 8.53991 8.43445 8.42529C8.43445 8.31067 8.39028 8.20074 8.31167 8.11969C8.23305 8.03864 8.12642 7.99311 8.01524 7.99311Z"}),G("path",{fill:t,d:"M9.69207 0.017334H1.30793C0.614557 0.017334 0.0503044 0.599049 0.0503044 1.31388V11.6862C0.0503044 12.401 0.614557 12.9828 1.30793 12.9828H9.69207C10.3854 12.9828 10.9497 12.401 10.9497 11.6862V1.31388C10.9497 0.599049 10.3854 0.017334 9.69207 0.017334ZM2.98476 0.881696H8.01524V2.17824H2.98476V0.881696ZM10.1113 11.6862C10.1113 11.8008 10.0671 11.9108 9.9885 11.9918C9.90988 12.0729 9.80325 12.1184 9.69207 12.1184H1.30793C1.07694 12.1184 0.888719 11.9248 0.888719 11.6862V1.31388C0.888719 1.07574 1.07694 0.881696 1.30793 0.881696H2.14634V2.17824C2.14634 2.65493 2.52237 3.0426 2.98476 3.0426H8.01524C8.47763 3.0426 8.85366 2.65493 8.85366 2.17824V0.881696H9.69207C9.92348 0.881696 10.1113 1.07574 10.1113 1.31388V11.6862Z"})]})}function mO({width:e=12,fill:t=kf,style:n={position:"relative",top:-.5}}){return X("svg",{width:e,viewBox:"0 0 12 13",style:n,children:[G("path",{fill:t,d:"M9.67737 12.9632H1.44458C0.687433 12.9632 0.0728626 12.3428 0.0728626 11.5785V2.34711C0.0728626 1.58279 0.687433 0.962402 1.44458 0.962402H7.84595C8.09915 0.962402 8.30319 1.16837 8.30319 1.42397C8.30319 1.67957 8.09915 1.88554 7.84595 1.88554H1.44458C1.19384 1.88554 0.987343 2.09399 0.987343 2.34711V11.5785C0.987343 11.8341 1.19384 12.0401 1.44458 12.0401H9.67491C9.92811 12.0401 10.1321 11.8341 10.1321 11.5785V4.19091C10.1321 3.93531 10.3362 3.72934 10.5894 3.72934C10.8426 3.72934 11.0466 3.93531 11.0466 4.19091V11.576C11.0491 12.3404 10.4321 12.9632 9.67737 12.9632Z"}),G("path",{fill:t,d:"M6.99047 5.57562C6.87247 5.57562 6.75693 5.53095 6.66597 5.43914C6.48652 5.25798 6.48652 4.96764 6.66597 4.78649L11.2113 0.200563C11.3908 0.0194088 11.6784 0.0194088 11.8579 0.200563C12.0373 0.381717 12.0373 0.672059 11.8579 0.853213L7.3125 5.44162C7.224 5.53095 7.106 5.57562 6.99047 5.57562Z"}),G("path",{fill:t,d:"M5.10251 5.57561H2.35907C2.10586 5.57561 1.90182 5.36964 1.90182 5.11404C1.90182 4.85844 2.10586 4.65247 2.35907 4.65247H5.10251C5.35571 4.65247 5.55975 4.85844 5.55975 5.11404C5.55975 5.36964 5.35571 5.57561 5.10251 5.57561Z"}),G("path",{fill:t,d:"M7.84841 8.34502H2.35907C2.10586 8.34502 1.90182 8.13905 1.90182 7.88345C1.90182 7.62784 2.10586 7.42188 2.35907 7.42188H7.84595C8.09915 7.42188 8.30319 7.62784 8.30319 7.88345C8.30319 8.13905 8.09915 8.34502 7.84841 8.34502Z"})]})}function yO({width:e=13,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M2.07608 11.9782C1.53556 11.9782 1.01718 11.7635 0.634969 11.3813C0.252762 10.9991 0.0380402 10.4807 0.0380402 9.94021V2.05977C0.0380402 1.79213 0.0907557 1.52711 0.193177 1.27985C0.295598 1.03258 0.445719 0.807907 0.634969 0.618658C1.01718 0.23645 1.53556 0.0217285 2.07608 0.0217285H6.96739C7.50791 0.0217285 8.02629 0.23645 8.4085 0.618658C8.79071 1.00086 9.00543 1.51925 9.00543 2.05977V5.18477H10.2283C10.4715 5.18475 10.7055 5.27792 10.8821 5.44511C11.0588 5.61231 11.1646 5.84083 11.178 6.08369L11.1793 6.13586V9.94021C11.1793 10.4807 10.9646 10.9991 10.5824 11.3813C10.2002 11.7635 9.68182 11.9782 9.1413 11.9782H2.07608ZM8.19021 2.05977C8.19021 1.74543 8.06916 1.44316 7.85219 1.21572C7.63522 0.98827 7.33899 0.853113 7.025 0.838304L6.96739 0.836946H2.07608C1.75177 0.836946 1.44074 0.965779 1.21141 1.1951C0.982091 1.42443 0.853258 1.73546 0.853258 2.05977V9.94021C0.853258 10.2645 0.982091 10.5756 1.21141 10.8049C1.44074 11.0342 1.75177 11.163 2.07608 11.163H8.19021V2.05977ZM10.2283 5.99999H9.00543V11.163H9.1413C9.46561 11.163 9.77664 11.0342 10.006 10.8049C10.2353 10.5756 10.3641 10.2645 10.3641 9.94021V6.13586C10.3641 6.09982 10.3498 6.06527 10.3243 6.03978C10.2989 6.0143 10.2643 5.99999 10.2283 5.99999ZM5.20108 5.99999C5.30919 5.99999 5.41287 6.04293 5.48931 6.11937C5.56575 6.19582 5.60869 6.29949 5.60869 6.4076C5.60869 6.5157 5.56575 6.61938 5.48931 6.69582C5.41287 6.77226 5.30919 6.81521 5.20108 6.81521H2.21195C2.10385 6.81521 2.00017 6.77226 1.92373 6.69582C1.84729 6.61938 1.80434 6.5157 1.80434 6.4076C1.80434 6.29949 1.84729 6.19582 1.92373 6.11937C2.00017 6.04293 2.10385 5.99999 2.21195 5.99999H5.20108ZM6.83152 3.01086C6.93962 3.01086 7.0433 3.0538 7.11974 3.13024C7.19618 3.20669 7.23913 3.31036 7.23913 3.41847C7.23913 3.52657 7.19618 3.63025 7.11974 3.70669C7.0433 3.78313 6.93962 3.82608 6.83152 3.82608H2.21195C2.10385 3.82608 2.00017 3.78313 1.92373 3.70669C1.84729 3.63025 1.80434 3.52657 1.80434 3.41847C1.80434 3.31036 1.84729 3.20669 1.92373 3.13024C2.00017 3.0538 2.10385 3.01086 2.21195 3.01086H6.83152Z"})})}function bO(){return G("svg",{style:{position:"relative",left:.5},width:"12",viewBox:"0 0 12 12",children:G("path",{fill:kf,d:"M10.6667 1C10.7104 1 10.7538 1.00862 10.7942 1.02537C10.8347 1.04213 10.8714 1.06668 10.9024 1.09763C10.9333 1.12858 10.9579 1.16533 10.9746 1.20577C10.9914 1.24621 11 1.28956 11 1.33333V7.33333C11 7.37711 10.9914 7.42045 10.9746 7.4609C10.9579 7.50134 10.9333 7.53808 10.9024 7.56904C10.8714 7.59999 10.8347 7.62454 10.7942 7.64129C10.7538 7.65805 10.7104 7.66667 10.6667 7.66667H1.33333C1.28956 7.66667 1.24621 7.65805 1.20577 7.64129C1.16533 7.62454 1.12858 7.59999 1.09763 7.56904C1.06668 7.53808 1.04213 7.50134 1.02537 7.4609C1.00862 7.42045 1 7.37711 1 7.33333V1.33333C1 1.28956 1.00862 1.24621 1.02537 1.20577C1.04213 1.16533 1.06668 1.12858 1.09763 1.09763C1.12858 1.06668 1.16533 1.04213 1.20577 1.02537C1.24621 1.00862 1.28956 1 1.33333 1H10.6667ZM10.6667 0H1.33333C0.979711 0 0.640573 0.140476 0.390524 0.390524C0.140476 0.640573 0 0.979711 0 1.33333V7.33333C-2.0519e-09 7.50843 0.0344876 7.68181 0.101494 7.84358C0.1685 8.00535 0.266713 8.15233 0.390524 8.27614C0.514336 8.39995 0.661321 8.49817 0.823089 8.56517C0.984856 8.63218 1.15824 8.66667 1.33333 8.66667H5.5V10.6667H3.16667C3.03406 10.6667 2.90688 10.7193 2.81311 10.8131C2.71935 10.9069 2.66667 11.0341 2.66667 11.1667C2.66667 11.2993 2.71935 11.4265 2.81311 11.5202C2.90688 11.614 3.03406 11.6667 3.16667 11.6667H8.83333C8.96594 11.6667 9.09312 11.614 9.18689 11.5202C9.28065 11.4265 9.33333 11.2993 9.33333 11.1667C9.33333 11.0341 9.28065 10.9069 9.18689 10.8131C9.09312 10.7193 8.96594 10.6667 8.83333 10.6667H6.5V8.66667H10.6667C10.8418 8.66667 11.0151 8.63218 11.1769 8.56517C11.3387 8.49817 11.4857 8.39995 11.6095 8.27614C11.7333 8.15233 11.8315 8.00535 11.8985 7.84358C11.9655 7.68181 12 7.50843 12 7.33333V1.33333C12 0.979711 11.8595 0.640573 11.6095 0.390524C11.3594 0.140476 11.0203 0 10.6667 0Z"})})}function CO({width:e=12,fill:t=kf}){return G("svg",{width:e,viewBox:"0 0 12 12",children:G("path",{fill:t,d:"M11.1996 5.29346H6.71914V0.813148C6.71914 0.382708 6.43124 0.0339355 6.07639 0.0339355H5.93333C5.57822 0.0339355 5.29058 0.382695 5.29058 0.813148V5.29346H0.810022C0.379705 5.29346 0.0308094 5.58135 0.0308094 5.93633V6.07927C0.0308094 6.43426 0.379705 6.72214 0.810022 6.72214H5.29033V11.2025C5.29033 11.6329 5.57822 11.9817 5.93333 11.9817H6.07613C6.43124 11.9817 6.71914 11.6329 6.71914 11.2025V6.72213H11.1996C11.6298 6.72213 11.9788 6.43424 11.9788 6.07926V5.93632C11.9788 5.58135 11.6298 5.29346 11.1996 5.29346Z"})})}function wO({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 11",style:n,children:[G("path",{fill:t,d:"M4.45594 5.98841L5.22797 6.76044C5.28341 6.81587 5.32738 6.88169 5.35738 6.95412C5.38739 7.02655 5.40283 7.10418 5.40283 7.18258C5.40283 7.26097 5.38739 7.3386 5.35738 7.41103C5.32738 7.48346 5.28341 7.54928 5.22797 7.60471C5.17254 7.66015 5.10672 7.70412 5.03429 7.73412C4.96186 7.76413 4.88423 7.77957 4.80583 7.77957C4.72744 7.77957 4.64981 7.76413 4.57737 7.73412C4.50494 7.70412 4.43913 7.66015 4.3837 7.60471L2.59245 5.81346C2.53695 5.75806 2.49292 5.69226 2.46288 5.61983C2.43284 5.54739 2.41738 5.46974 2.41738 5.39133C2.41738 5.31291 2.43284 5.23526 2.46288 5.16283C2.49292 5.09039 2.53695 5.02459 2.59245 4.96919L4.3837 3.17794C4.43913 3.1225 4.50494 3.07853 4.57737 3.04853C4.64981 3.01853 4.72744 3.00308 4.80583 3.00308C4.88423 3.00308 4.96186 3.01853 5.03429 3.04853C5.10672 3.07853 5.17254 3.1225 5.22797 3.17794C5.28341 3.23337 5.32738 3.29919 5.35738 3.37162C5.38739 3.44405 5.40283 3.52168 5.40283 3.60008C5.40283 3.67847 5.38739 3.75611 5.35738 3.82854C5.32738 3.90097 5.28341 3.96678 5.22797 4.02221L4.45594 4.79424H11.3737C11.5321 4.79424 11.684 4.85715 11.7959 4.96912C11.9079 5.0811 11.9708 5.23297 11.9708 5.39133C11.9708 5.54968 11.9079 5.70155 11.7959 5.81353C11.684 5.9255 11.5321 5.98841 11.3737 5.98841H4.45594ZM8.98542 0.0175781C9.14376 0.0176022 9.2956 0.0805197 9.40756 0.192492C9.51951 0.304464 9.58241 0.456321 9.58241 0.614661C9.58241 0.773002 9.51951 0.924858 9.40756 1.03683C9.2956 1.1488 9.14376 1.21172 8.98542 1.21174H0.626253C0.467912 1.21172 0.316065 1.1488 0.20411 1.03683C0.0921549 0.924858 0.0292606 0.773002 0.0292606 0.614661C0.0292606 0.456321 0.0921549 0.304464 0.20411 0.192492C0.316065 0.0805197 0.467912 0.0176022 0.626253 0.0175781H8.98542Z"}),G("path",{fill:t,fillOpacity:.5,d:"M9.40756 9.74584C9.2956 9.63386 9.14376 9.57095 8.98542 9.57092H0.626253C0.467912 9.57095 0.316065 9.63386 0.20411 9.74584C0.0921549 9.85781 0.0292606 10.0097 0.0292606 10.168C0.0292606 10.3263 0.0921549 10.4782 0.20411 10.5902C0.316065 10.7021 0.467912 10.7651 0.626253 10.7651H8.98542C9.14376 10.7651 9.2956 10.7021 9.40756 10.5902C9.51952 10.4782 9.58241 10.3263 9.58241 10.168C9.58241 10.0097 9.51952 9.85781 9.40756 9.74584Z"})]})}function xO({width:e=11,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M11.7913 11.2762C11.5612 11.4757 11.2129 11.4509 11.0134 11.2207L6.15183 5.50987C6.08289 5.43042 5.95933 5.43059 5.89091 5.51056L0.98834 11.2216C0.789983 11.4527 0.441867 11.4792 0.210766 11.2808C-0.0203344 11.0825 -0.046874 10.7344 0.151483 10.5033L5.75666 3.97368C5.89384 3.81392 6.1408 3.81341 6.27867 3.97247L11.8468 10.4984C12.0462 10.7283 12.0214 11.0766 11.7913 11.2762Z"}),G("path",{fill:t,d:"M11.7913 7.49598C11.5612 7.69554 11.2129 7.67073 11.0134 7.44049L6.15183 1.72967C6.08289 1.65022 5.95933 1.65039 5.89091 1.73035L0.98834 7.44135C0.789983 7.67245 0.441867 7.69899 0.210766 7.50063C-0.0203344 7.30228 -0.046874 6.95416 0.151483 6.72306L5.75666 0.193648C5.89384 0.0338934 6.1408 0.0333763 6.27867 0.192441L11.8468 6.71841C12.0462 6.94813 12.0214 7.29642 11.7913 7.49598Z"})]})}function SO({width:e=11,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M0.208696 0.194426C0.438763 -0.00513717 0.787051 0.0196788 0.986614 0.249918L5.84817 5.96074C5.91711 6.04019 6.04067 6.04001 6.10909 5.96005L11.0117 0.249056C11.21 0.0179556 11.5581 -0.00858394 11.7892 0.189773C12.0203 0.38813 12.0469 0.736246 11.8485 0.967347L6.24333 7.49693C6.10616 7.65668 5.8592 7.6572 5.72133 7.49814L0.153204 0.972344C-0.0461869 0.742278 -0.0213707 0.39399 0.208696 0.194426Z"}),G("path",{fill:t,d:"M0.208696 3.97458C0.438763 3.77501 0.787051 3.79983 0.986614 4.03007L5.84817 9.74089C5.91711 9.82034 6.04067 9.82017 6.10909 9.7402L11.0117 4.02921C11.21 3.79811 11.5581 3.77157 11.7892 3.96992C12.0203 4.16828 12.0469 4.5164 11.8485 4.7475L6.24333 11.2771C6.10616 11.4368 5.8592 11.4374 5.72133 11.2783L0.153204 4.75232C-0.0461869 4.52243 -0.0213707 4.17414 0.208696 3.97458Z"})]})}function EO({width:e=12,fill:t=Lf}){return G("svg",{width:e,viewBox:"0 0 12 12",children:G("path",{fill:t,d:"M8.23506 0.985232L9.64194 2.40148L9.64311 2.40265L9.64428 2.40382L9.65248 2.41202L9.65365 2.41319L9.65482 2.41436L11.0687 3.81889H10.5111C10.1808 3.81889 9.86802 3.96298 9.65482 4.21483L7.37759 6.89269C7.06365 7.26169 6.87505 7.73025 6.84576 8.21405L6.78251 9.26012L2.79383 5.27028L3.83991 5.20702C4.32253 5.17773 4.79227 4.98914 5.16127 4.6752L7.83913 2.39796C8.09098 2.18359 8.23506 1.87199 8.23506 1.54166V0.985232ZM8.08981 0.0539551C7.98438 0.0539551 7.87778 0.0797263 7.78056 0.13244C7.60133 0.230839 7.45607 0.419437 7.48536 0.779062V1.54166C7.48536 1.65177 7.43733 1.75602 7.35299 1.82748L4.67513 4.10472C4.42796 4.31557 4.1187 4.43974 3.79422 4.45966L2.49043 4.53814C2.30769 4.54868 2.13198 4.62014 1.99844 4.74548C1.90707 4.83217 1.82741 4.94814 1.81335 5.10042C1.7993 5.25036 1.8567 5.39796 1.9633 5.50456L1.96564 5.5069L3.71808 7.23592L0.0808281 11.9649L0.0538855 12.0001L0.089028 11.9731L4.81804 8.33588L6.54705 10.0883L6.5494 10.0907C6.64545 10.1867 6.77431 10.2429 6.90902 10.2429C6.92425 10.2429 6.93948 10.2418 6.95353 10.2406C7.10465 10.2265 7.22179 10.1469 7.30847 10.0555C7.43382 9.92198 7.50527 9.74626 7.51581 9.56352L7.5943 8.25973C7.61421 7.93525 7.73838 7.626 7.94924 7.37883L10.2265 4.70097C10.2979 4.61663 10.4022 4.5686 10.5123 4.5686H11.2749C11.3065 4.57094 11.337 4.57211 11.3663 4.57211C11.6673 4.57211 11.8325 4.4374 11.9215 4.2734C12.0621 4.01686 12.0094 3.69706 11.8032 3.49089L11.802 3.48972L10.182 1.88019L10.1738 1.87199L8.56423 0.253096L8.56306 0.251925C8.43421 0.123069 8.26318 0.0539551 8.08981 0.0539551Z"})})}function kO({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M0.779063 3.51795L5.36219 0.228414C5.54809 0.094969 5.77116 0.0231934 6 0.0231934C6.22884 0.0231934 6.45191 0.094969 6.63781 0.228414L11.2209 3.51795C11.4426 3.67706 11.6232 3.88667 11.7479 4.12944C11.8725 4.37221 11.9375 4.64116 11.9375 4.91404V10.2187C11.9375 11.1679 11.168 11.9375 10.2188 11.9375H1.78125C0.832031 11.9375 0.0625 11.1679 0.0625 10.2187V4.9142C0.0625118 4.64129 0.12751 4.37231 0.252115 4.12951C0.376721 3.88671 0.557352 3.67707 0.779063 3.51795ZM1.32578 4.27951C1.22499 4.35183 1.14287 4.44713 1.08621 4.55749C1.02956 4.66786 1.00001 4.79014 1 4.9142V10.2187C1 10.4259 1.08231 10.6246 1.22882 10.7712C1.37534 10.9177 1.57405 11 1.78125 11H10.2188C10.426 11 10.6247 10.9177 10.7712 10.7712C10.9177 10.6246 11 10.4259 11 10.2187V4.9142C11 4.79014 10.9704 4.66786 10.9138 4.55749C10.8571 4.44713 10.775 4.35183 10.6742 4.27951L6.09109 0.989976C6.06454 0.970923 6.03268 0.960675 6 0.960675C5.96732 0.960675 5.93546 0.970923 5.90891 0.989976L1.32578 4.27966V4.27951Z"})})}function DO({width:e=13.5,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M9.07422 4.1849C9.24006 4.18793 9.40484 4.15788 9.55893 4.09651C9.71303 4.03514 9.85335 3.94368 9.9717 3.82747C10.0901 3.71126 10.1841 3.57264 10.2482 3.41969C10.3124 3.26674 10.3455 3.10253 10.3455 2.93667C10.3455 2.7708 10.3124 2.6066 10.2482 2.45365C10.1841 2.3007 10.0901 2.16207 9.9717 2.04586C9.85335 1.92965 9.71303 1.83819 9.55893 1.77682C9.40484 1.71545 9.24006 1.68541 9.07422 1.68844C8.74712 1.69441 8.43543 1.82855 8.20622 2.06199C7.97701 2.29543 7.84859 2.60951 7.84859 2.93667C7.84859 3.26382 7.97701 3.57791 8.20622 3.81134C8.43543 4.04478 8.74712 4.17892 9.07422 4.1849ZM11.2578 0.0253334H1.06533C0.659553 0.0253334 0.336897 0.355552 0.336897 0.761333V9.27245C0.336897 9.67822 0.659553 10.0084 1.06533 10.0084H11.2578C11.6636 10.0084 11.9862 9.67822 11.9862 9.27245V0.761333C11.9862 0.355552 11.6636 0.0253334 11.2578 0.0253334ZM8.57778 5.16533C8.53706 5.1162 8.48627 5.07638 8.42884 5.04854C8.37141 5.02071 8.30868 5.00552 8.24489 5.004C8.11245 5.004 8.01912 5.06622 7.912 5.152L7.42578 5.56311C7.32445 5.636 7.24355 5.68533 7.12712 5.68533C7.02187 5.68599 6.92004 5.64804 6.84089 5.57867C6.80278 5.54394 6.76543 5.50837 6.72889 5.472L5.33022 3.95911C5.27608 3.89731 5.20929 3.84786 5.13438 3.81412C5.05946 3.78038 4.97816 3.76313 4.896 3.76355C4.72178 3.76355 4.56045 3.84978 4.45912 3.96667L1.16889 7.93378V1.16177C1.19467 0.984875 1.33245 0.857323 1.50933 0.857323H10.8107C10.9902 0.857323 11.1356 0.990208 11.1462 1.16932L11.1538 7.9391L8.57688 5.16533H8.57778Z"})})}function IO({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M8.19876 2.38663H7.18975L6.61374 3.44529C6.29595 4.04116 6.10328 4.43642 6.02979 4.63305H6.00993C5.84905 4.26759 5.46173 3.51679 4.85395 2.38663H3.77542L5.19756 4.83167H3.48543V5.62418H5.48954V6.71661H3.48742V7.51706H5.49152V9.10604H6.48663V7.51706H8.42121V6.71661H6.48663V5.62418H8.42121V4.83366H6.76271L8.19876 2.38663ZM0.0810376 0.28917V3.12352C0.0810376 3.27249 0.202198 3.39365 0.351165 3.39365H0.708686C0.857653 3.39365 0.978813 3.27249 0.978813 3.12352V1.20482C0.978813 1.05585 1.09997 0.934694 1.24894 0.934694H3.72378C3.87275 0.934694 3.99391 0.813534 3.99391 0.664567V0.313005C3.99391 0.164037 3.87473 0.0448636 3.72577 0.0428773L0.355137 0.019043C0.202198 0.019043 0.0810376 0.140202 0.0810376 0.28917ZM0.315413 10.9731H3.14976C3.29873 10.9731 3.41989 10.8519 3.41989 10.703V10.3454C3.41989 10.1965 3.29873 10.0753 3.14976 10.0753H1.23106C1.0821 10.0753 0.960937 9.95416 0.960937 9.80519V7.33234C0.960937 7.18337 0.839777 7.06221 0.69081 7.06221H0.339247C0.19028 7.06221 0.0711064 7.18138 0.0691201 7.33035L0.0452855 10.701C0.0432992 10.8499 0.164459 10.9731 0.315413 10.9731ZM11.911 10.7387V7.90437C11.911 7.7554 11.7899 7.63424 11.6409 7.63424H11.2834C11.1344 7.63424 11.0132 7.7554 11.0132 7.90437V9.82307C11.0132 9.97203 10.8921 10.0932 10.7431 10.0932H8.27026C8.12129 10.0932 8.00013 10.2144 8.00013 10.3633V10.7149C8.00013 10.8639 8.11931 10.983 8.26827 10.985L11.6389 11.0088C11.7899 11.0088 11.911 10.8877 11.911 10.7387ZM11.6766 0.0547948H8.84229C8.69333 0.0547948 8.57217 0.175955 8.57217 0.324922V0.682443C8.57217 0.83141 8.69333 0.95257 8.84229 0.95257H10.761C10.91 0.95257 11.0311 1.07373 11.0311 1.2227V3.69754C11.0311 3.84651 11.1523 3.96767 11.3012 3.96767H11.6528C11.8018 3.96767 11.9209 3.84849 11.9229 3.69952L11.9468 0.328894C11.9488 0.175955 11.8276 0.0547948 11.6766 0.0547948Z"})})}function NO({width:e=12,fill:t=Lf}){return G("svg",{width:e,viewBox:"0 0 12 12",children:G("path",{fill:t,d:"M6 0.0406494C5.76744 0.0406494 5.56395 0.244138 5.56395 0.476696V2.51158C5.56395 2.74414 5.76744 2.94763 6 2.94763C6.23256 2.94763 6.43605 2.74414 6.43605 2.51158V0.476696C6.43605 0.244138 6.23256 0.0406494 6 0.0406494ZM8.47093 3.96507C8.58721 3.96507 8.70349 3.936 8.7907 3.84879L10.2151 2.42437C10.3895 2.24995 10.3895 1.98832 10.2151 1.81391C10.0407 1.63949 9.77907 1.63949 9.60465 1.81391L8.18023 3.23832C8.00581 3.41274 8.00581 3.67437 8.18023 3.84879C8.23837 3.936 8.35465 3.96507 8.47093 3.96507ZM11.5233 5.56391H9.48837C9.25581 5.56391 9.05232 5.76739 9.05232 5.99995C9.05232 6.23251 9.25581 6.436 9.48837 6.436H11.5233C11.7558 6.436 11.9593 6.23251 11.9593 5.99995C11.9593 5.76739 11.7558 5.56391 11.5233 5.56391ZM8.76163 8.15111C8.58721 7.9767 8.32558 7.9767 8.15116 8.15111C7.97674 8.32553 7.97674 8.58716 8.15116 8.76158L9.57558 10.186C9.66279 10.2732 9.77907 10.3023 9.89535 10.3023C10.0116 10.3023 10.1279 10.2732 10.2151 10.186C10.3895 10.0116 10.3895 9.74995 10.2151 9.57553L8.76163 8.15111ZM6 9.05228C5.76744 9.05228 5.56395 9.25577 5.56395 9.48832V11.5232C5.56395 11.7558 5.76744 11.9593 6 11.9593C6.23256 11.9593 6.43605 11.7558 6.43605 11.5232V9.48832C6.43605 9.25577 6.23256 9.05228 6 9.05228ZM3.23837 8.15111L1.81395 9.57553C1.63953 9.74995 1.63953 10.0116 1.81395 10.186C1.90116 10.2732 2.01744 10.3023 2.13372 10.3023C2.25 10.3023 2.36628 10.2732 2.45349 10.186L3.87791 8.76158C4.05233 8.58716 4.05233 8.32553 3.87791 8.15111C3.70349 7.9767 3.38372 7.9767 3.23837 8.15111ZM2.94767 5.99995C2.94767 5.76739 2.74419 5.56391 2.51163 5.56391H0.476744C0.244185 5.56391 0.0406971 5.76739 0.0406971 5.99995C0.0406971 6.23251 0.244185 6.436 0.476744 6.436H2.51163C2.74419 6.436 2.94767 6.23251 2.94767 5.99995ZM2.39535 1.78484C2.22093 1.61042 1.9593 1.61042 1.78488 1.78484C1.61046 1.95925 1.61046 2.22088 1.78488 2.3953L3.2093 3.81972C3.29651 3.90693 3.41279 3.936 3.52907 3.936C3.64535 3.936 3.76163 3.90693 3.84884 3.81972C4.02326 3.6453 4.02326 3.38367 3.84884 3.20925L2.39535 1.78484Z"})})}function LO({width:e=12,fill:t=Lf}){return G("svg",{width:e,viewBox:"0 0 12 9",children:G("path",{fill:t,d:"M6 8.96422C3.81741 8.96422 1.87024 7.58685 0.162807 4.89607C0.0875492 4.77765 0.0475807 4.64024 0.0475807 4.49993C0.0475807 4.35962 0.0875492 4.22221 0.162807 4.1038C1.87023 1.41303 3.8174 0.0356445 6 0.0356445C8.18259 0.0356445 10.1298 1.41302 11.8372 4.1038C11.9125 4.22221 11.9524 4.35962 11.9524 4.49993C11.9524 4.64024 11.9125 4.77765 11.8372 4.89607C10.1298 7.58683 8.1826 8.96422 6 8.96422ZM6 0.928502C4.19315 0.928502 2.5198 2.09828 0.976047 4.49993C2.5198 6.90158 4.19315 8.07136 6 8.07136C7.80685 8.07136 9.4802 6.90158 11.024 4.49993C9.4802 2.09828 7.80685 0.928502 6 0.928502ZM6 6.58326C4.83915 6.58326 3.89806 5.65053 3.89806 4.49993C3.89806 3.34933 4.83915 2.4166 6 2.4166C7.16085 2.4166 8.10194 3.34933 8.10194 4.49993C8.10194 5.65053 7.16085 6.58326 6 6.58326ZM6 5.6904C6.66339 5.6904 7.20119 5.15737 7.20119 4.49993C7.20119 3.84249 6.66339 3.30946 6 3.30946C5.33661 3.30946 4.79881 3.84249 4.79881 4.49993C4.79881 5.15737 5.33661 5.6904 6 5.6904Z"})})}function BO({width:e=12,fill:t=Lf}){return G("svg",{width:e,viewBox:"0 0 12 7",children:G("path",{fill:t,d:"M11.7927 3.51827L10.5427 2.26826C11.0305 1.81094 11.4878 1.29265 11.8537 0.713384C11.9756 0.499974 11.9146 0.225583 11.7012 0.0731397C11.4878 -0.0488068 11.2134 0.0121596 11.061 0.225584C9.96341 2.02435 8.07317 3.09143 5.96952 3.09143C3.89634 3.09143 1.97561 2.02435 0.908531 0.256067C0.786585 0.0426569 0.481712 -0.0183234 0.268287 0.103623C0.0548776 0.225584 -0.00610281 0.530457 0.115858 0.743867C0.481712 1.32314 0.908531 1.84143 1.42683 2.29874L0.207321 3.51827C0.0243945 3.70119 0.0243945 3.97558 0.207321 4.15851C0.298785 4.24997 0.420731 4.28046 0.542678 4.28046C0.664624 4.28046 0.786585 4.24997 0.878048 4.15851L2.18902 2.84752C2.7378 3.21338 3.34756 3.51827 3.9878 3.70119L3.5 5.56094C3.43902 5.80485 3.59147 6.04874 3.83536 6.10973C3.86586 6.10973 3.92682 6.14021 3.95732 6.14021C4.17073 6.14021 4.35366 6.01826 4.38414 5.80485L4.90244 3.9146C5.26829 3.97558 5.63415 4.00607 6.03048 4.00607C6.42683 4.00607 6.82317 3.97558 7.21951 3.9146L7.7378 5.80485C7.79878 6.01826 7.98171 6.14021 8.16464 6.14021C8.19512 6.14021 8.2561 6.14021 8.28658 6.10973C8.53049 6.04874 8.68292 5.80485 8.62196 5.56094L8.13414 3.6707C8.77438 3.48777 9.35366 3.1829 9.90244 2.81704L11.2134 4.12801C11.3049 4.21948 11.4268 4.24997 11.5488 4.24997C11.6707 4.24997 11.7927 4.21948 11.8841 4.12801C11.9756 3.97558 11.9756 3.70119 11.7927 3.51827Z"})})}function TO({width:e=12,fill:t=Lf}){return G("svg",{width:e,viewBox:"0 0 12 9",children:G("path",{fill:t,d:"M4.29705 8.27557C4.13833 8.27557 3.9796 8.21528 3.85844 8.09482L0.215586 4.46985C-0.0267316 4.22872 -0.0267316 3.83788 0.215586 3.59685C0.457903 3.35571 0.85046 3.35581 1.09278 3.59675L4.29705 6.78527L10.8912 0.223574C11.1335 -0.0175584 11.526 -0.0175584 11.7683 0.223574C12.0107 0.46461 12.0107 0.85545 11.7683 1.09658L4.73565 8.09472C4.61448 8.21528 4.45576 8.27557 4.29705 8.27557Z"})})}function AO({width:e=11,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 11 12",style:n,children:[G("path",{fill:t,d:"M5.35 3.30005H10.85C11.2167 3.30005 11.4 3.45005 11.4 3.75005C11.4 4.05005 11.2167 4.20005 10.85 4.20005H5.35C4.98333 4.20005 4.8 4.05005 4.8 3.75005C4.8 3.45005 4.98333 3.30005 5.35 3.30005Z"}),G("path",{fill:t,d:"M5.35 0.600098H10.85C11.2167 0.600098 11.4 0.750098 11.4 1.0501C11.4 1.3501 11.2167 1.5001 10.85 1.5001H5.35C4.98333 1.5001 4.8 1.3501 4.8 1.0501C4.8 0.750098 4.98333 0.600098 5.35 0.600098Z"}),G("path",{fill:t,d:"M1.2 0.5V11.5C1.2 11.8333 1.05 12 0.749999 12C0.449999 12 0.299999 11.8333 0.299999 11.5V0.5C0.299999 0.166667 0.449999 0 0.749999 0C1.05 0 1.2 0.166667 1.2 0.5Z"}),G("path",{fill:t,d:"M2.55 3.30005H3.45C3.75 3.30005 3.9 3.45005 3.9 3.75005C3.9 4.05005 3.75 4.20005 3.45 4.20005H2.55C2.25 4.20005 2.1 4.05005 2.1 3.75005C2.1 3.45005 2.25 3.30005 2.55 3.30005Z"}),G("path",{fill:t,d:"M2.55 0.600098H3.45C3.75 0.600098 3.9 0.750098 3.9 1.0501C3.9 1.3501 3.75 1.5001 3.45 1.5001H2.55C2.25 1.5001 2.1 1.3501 2.1 1.0501C2.1 0.750098 2.25 0.600098 2.55 0.600098Z"}),G("path",{fill:t,d:"M5.35 7.80005H10.85C11.2167 7.80005 11.4 7.95005 11.4 8.25005C11.4 8.55005 11.2167 8.70005 10.85 8.70005H5.35C4.98333 8.70005 4.8 8.55005 4.8 8.25005C4.8 7.95005 4.98333 7.80005 5.35 7.80005Z"}),G("path",{fill:t,d:"M2.55 7.80005H3.45C3.75 7.80005 3.9 7.95005 3.9 8.25005C3.9 8.55005 3.75 8.70005 3.45 8.70005H2.55C2.25 8.70005 2.1 8.55005 2.1 8.25005C2.1 7.95005 2.25 7.80005 2.55 7.80005Z"}),G("path",{fill:t,d:"M5.35 10.5H10.85C11.2167 10.5 11.4 10.65 11.4 10.95C11.4 11.25 11.2167 11.4 10.85 11.4H5.35C4.98333 11.4 4.8 11.25 4.8 10.95C4.8 10.65 4.98333 10.5 5.35 10.5Z"}),G("path",{fill:t,d:"M2.55 10.5H3.45C3.75 10.5 3.9 10.65 3.9 10.95C3.9 11.25 3.75 11.4 3.45 11.4H2.55C2.25 11.4 2.1 11.25 2.1 10.95C2.1 10.65 2.25 10.5 2.55 10.5Z"})]})}function MO({width:e=13,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 10",style:n,children:G("path",{fill:t,d:"M3.04882 0.029092C3.55262 0.0178972 4.05375 0.105238 4.52406 0.286205C5.02502 0.532699 5.50196 0.825261 5.94872 1.16011C6.34551 0.839227 6.77808 0.565308 7.2378 0.34381C7.68204 0.139867 8.16453 0.0325946 8.65333 0.029092H8.78751C9.40434 0.025484 10.0159 0.143158 10.5873 0.375422C11.0759 0.602799 11.5341 0.890231 11.9515 1.23106C11.9595 1.23767 11.9659 1.24594 11.9702 1.25529C11.9746 1.26464 11.9769 1.27483 11.9768 1.28515L11.9909 9.66733C11.9909 9.68009 11.9874 9.69262 11.9809 9.70357C11.9743 9.71451 11.9649 9.72346 11.9536 9.72946C11.9424 9.73545 11.9297 9.73826 11.9169 9.73759C11.9042 9.73692 11.8919 9.73279 11.8813 9.72564C11.397 9.40512 10.8836 9.13109 10.3477 8.90723C9.92223 8.74025 9.47523 8.63429 9.02003 8.59251H8.89358C8.30794 8.59588 7.73097 8.73436 7.20759 8.99715C6.7623 9.26866 6.35604 9.59953 6 9.98065C5.98795 9.99349 5.97152 10.0013 5.95395 10.0026C5.93639 10.0039 5.91898 9.9986 5.90517 9.98767C5.40248 9.57978 4.86136 9.2217 4.28943 8.91847C3.80269 8.75436 3.30032 8.64089 2.7903 8.57987H2.78538C2.35478 8.57696 1.92647 8.64289 1.51668 8.77516C1.03525 9.0342 0.584861 9.34719 0.174208 9.70808C0.164003 9.71681 0.151509 9.72243 0.138208 9.72427C0.124906 9.72612 0.111354 9.72412 0.0991562 9.7185C0.0869586 9.71288 0.0766271 9.70388 0.0693854 9.69257C0.0621437 9.68126 0.0582953 9.66812 0.0582962 9.65469V1.33925C0.0582949 1.3225 0.064274 1.30631 0.0751561 1.29358C0.407735 0.911342 0.808691 0.594484 1.25746 0.359265C1.75995 0.171399 2.28828 0.0617056 2.82402 0.0340095C2.82402 0.0340095 2.91183 0.029092 3.04882 0.029092ZM5.56937 1.7755C4.9104 1.11183 4.01903 0.730641 3.08394 0.71262C3.00456 0.71262 2.92518 0.71262 2.8472 0.722455C2.43823 0.69718 2.02908 0.769111 1.65325 0.932362C1.27742 1.09561 0.945591 1.34554 0.684922 1.66169C0.684922 2.09864 0.700377 7.36525 0.693352 8.42883C1.29298 7.96975 2.04304 7.7524 2.79522 7.81977C3.8111 7.89165 4.78363 8.25971 5.59256 8.87843C5.59607 6.45201 5.59607 2.06633 5.56937 1.7755ZM11.3158 1.65958C10.7091 1.08966 9.91587 0.759829 9.08396 0.731588C9.02425 0.731588 8.96383 0.727373 8.90412 0.727373C8.42834 0.711672 7.95474 0.798385 7.51539 0.981641C7.07603 1.1649 6.68118 1.44042 6.35757 1.78955C6.33088 2.12815 6.33088 6.44217 6.33509 8.85876C6.99018 8.21358 7.8606 7.83329 8.77908 7.79097C9.68194 7.77887 10.5646 8.05823 11.2961 8.5876L11.3151 1.65958H11.3158Z"})})}function OO({width:e=7,fill:t=kf,style:n}){return X("svg",{width:e,viewBox:"0 0 7 12",style:n,children:[G("path",{fill:t,d:"M0.232433 5.57218C0.01054 5.79408 0.01054 6.15327 0.232433 6.37516L5.62167 11.7644C5.84357 11.9863 6.20276 11.9863 6.42465 11.7644C6.64654 11.5425 6.64654 11.1833 6.42465 10.9614L1.03541 5.57218C0.813517 5.35029 0.454327 5.35029 0.232433 5.57218Z"}),G("path",{fill:t,d:"M0.232433 6.39477C0.454327 6.61666 0.813517 6.61666 1.03541 6.39477L6.42465 1.00553C6.64654 0.783637 6.64654 0.424446 6.42465 0.202553C6.20276 -0.0193406 5.84357 -0.0193406 5.62167 0.202553L0.232433 5.59179C0.01054 5.81368 0.01054 6.17288 0.232433 6.39477Z"})]})}function RO({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M0.0104141 6.335C0.0104141 6.68906 0.147836 7.02863 0.392449 7.27899C0.637061 7.52935 0.968827 7.67 1.31476 7.67C1.6607 7.67 1.99246 7.52935 2.23708 7.27899C2.48169 7.02863 2.61911 6.68906 2.61911 6.335C2.61911 5.98094 2.48169 5.64137 2.23708 5.39101C1.99246 5.14065 1.6607 5 1.31476 5C0.968827 5 0.637061 5.14065 0.392449 5.39101C0.147836 5.64137 0.0104141 5.98094 0.0104141 6.335ZM4.70607 6.335C4.70607 6.68906 4.84349 7.02863 5.0881 7.27899C5.33271 7.52935 5.66448 7.67 6.01041 7.67C6.35635 7.67 6.68811 7.52935 6.93273 7.27899C7.17734 7.02863 7.31476 6.68906 7.31476 6.335C7.31476 5.98094 7.17734 5.64137 6.93273 5.39101C6.68811 5.14065 6.35635 5 6.01041 5C5.66448 5 5.33271 5.14065 5.0881 5.39101C4.84349 5.64137 4.70607 5.98094 4.70607 6.335ZM9.40172 6.335C9.40172 6.68906 9.53914 7.02863 9.78375 7.27899C10.0284 7.52935 10.3601 7.67 10.7061 7.67C11.052 7.67 11.3838 7.52935 11.6284 7.27899C11.873 7.02863 12.0104 6.68906 12.0104 6.335C12.0104 5.98094 11.873 5.64137 11.6284 5.39101C11.3838 5.14065 11.052 5 10.7061 5C10.3601 5 10.0284 5.14065 9.78375 5.39101C9.53914 5.64137 9.40172 5.98094 9.40172 6.335Z"})})}function PO({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M6 0C4.4087 0 2.88258 0.632141 1.75736 1.75736C0.632141 2.88258 0 4.4087 0 6C0 7.5913 0.632141 9.11742 1.75736 10.2426C2.88258 11.3679 4.4087 12 6 12C6.78793 12 7.56815 11.8448 8.2961 11.5433C9.02405 11.2417 9.68549 10.7998 10.2426 10.2426C10.7998 9.68549 11.2417 9.02405 11.5433 8.2961C11.8448 7.56815 12 6.78793 12 6C12 5.21207 11.8448 4.43185 11.5433 3.7039C11.2417 2.97595 10.7998 2.31451 10.2426 1.75736C9.68549 1.20021 9.02405 0.758251 8.2961 0.456723C7.56815 0.155195 6.78793 -1.17411e-08 6 0ZM10.3484 3.06395C10.8653 3.82423 11.1715 4.70791 11.2358 5.625H8.23342C8.21879 4.94536 8.156 4.26761 8.04553 3.59684C8.82711 3.48868 9.59842 3.31105 10.3484 3.06395ZM9.83211 2.41737C9.21947 2.61079 8.57368 2.75842 7.89868 2.85789C7.74947 2.19474 7.545 1.545 7.28763 0.91579C8.26184 1.16292 9.14484 1.684 9.83211 2.41737ZM4.51737 5.625C4.53789 4.965 4.59711 4.31526 4.71079 3.69158C5.13948 3.72975 5.56962 3.74924 6 3.75C6.43737 3.75 6.86684 3.72868 7.28921 3.69158C7.40211 4.31526 7.46289 4.965 7.48184 5.62579H4.51737V5.625ZM7.48184 6.375C7.4658 7.02363 7.40141 7.67016 7.28921 8.30921C6.86054 8.27078 6.43039 8.25103 6 8.25C5.56184 8.25 5.13158 8.2721 4.71079 8.30842C4.59856 7.66962 4.53391 7.02337 4.51737 6.375H7.48184ZM5.63526 0.768947C5.75684 0.761053 5.87684 0.75 6 0.75C6.12237 0.75 6.24237 0.760263 6.36316 0.768947C6.68368 1.43289 6.94105 2.17263 7.13289 2.95737C6.75947 2.98974 6.38289 3.00947 6 3.00947C5.61711 3.00947 5.23974 2.98974 4.86711 2.95737C5.05816 2.17263 5.31711 1.43368 5.63526 0.768947ZM4.71158 0.91579C4.45421 1.545 4.24974 2.19474 4.10053 2.85789C3.44563 2.76265 2.79937 2.61534 2.16789 2.41737C2.85494 1.68413 3.73765 1.16305 4.71158 0.91579ZM1.65158 3.06395C2.40158 3.31105 3.17211 3.48868 3.95368 3.59684C3.84316 4.24737 3.78474 4.92789 3.76579 5.62579H0.764211C0.828575 4.70846 1.13474 3.82455 1.65158 3.06395ZM1.65158 8.93605C1.13488 8.17568 0.828712 7.29205 0.764211 6.375H3.76579C3.78474 7.07211 3.84316 7.75342 3.95368 8.40395C3.17211 8.51132 2.40158 8.68974 1.65158 8.93605ZM2.16789 9.58342C2.79947 9.38526 3.44526 9.23763 4.10053 9.14211C4.25842 9.82895 4.46211 10.4818 4.71158 11.0842C3.73765 10.8369 2.85494 10.3159 2.16789 9.58263V9.58342ZM6.36395 11.2318C6.24237 11.2397 6.12237 11.25 6 11.25C5.87684 11.25 5.75684 11.2405 5.63526 11.2318C5.30384 10.5307 5.04614 9.79702 4.86632 9.04263C5.23895 9.01105 5.61711 8.99053 5.99921 8.99053C6.38132 8.99053 6.75947 9.01026 7.13211 9.04263C6.94105 9.82816 6.68289 10.5671 6.36395 11.2318ZM7.28763 11.085C7.545 10.4558 7.74947 9.80605 7.89868 9.14289C8.5729 9.24237 9.21947 9.38921 9.83211 9.58263C9.14494 10.3163 8.26193 10.8377 7.28763 11.085ZM10.3484 8.93605C9.5983 8.68982 8.82757 8.51147 8.04553 8.40316C8.15605 7.75342 8.21447 7.07211 8.23342 6.375H11.2358C11.1713 7.29205 10.8651 8.17568 10.3484 8.93605Z"})})}function FO({width:e=14,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M6 11.9395C4.40667 11.9395 2.9088 11.322 1.7821 10.2009C0.654969 9.07884 0.0340881 7.58736 0.0340881 6C0.0340881 4.41307 0.654969 2.92117 1.78167 1.79958C2.90838 0.678415 4.40625 0.0609436 5.99957 0.0609436C7.59289 0.0609436 9.09076 0.678415 10.217 1.79958C11.3446 2.92117 11.9651 4.41307 11.9651 5.99958C11.9655 7.58694 11.3446 9.07884 10.217 10.2004C9.09119 11.3216 7.59332 11.9395 6 11.9395ZM6 0.91279C4.63338 0.91279 3.349 1.44205 2.38338 2.40341C1.41818 3.36393 0.886361 4.64148 0.886361 6C0.886361 7.35853 1.41775 8.63608 2.38295 9.59617C3.34858 10.5575 4.63295 11.0868 5.99957 11.0868C7.36576 11.0868 8.65056 10.5575 9.61619 9.59617C10.5814 8.63523 11.1132 7.3581 11.1128 5.99958C11.1128 4.64106 10.5814 3.36393 9.61619 2.40384C8.65099 1.44248 7.36619 0.91279 6 0.91279Z"}),G("path",{fill:t,d:"M8.98295 5.57387H6.42613V3.01705C6.42613 2.78182 6.23522 2.59092 6 2.59092C5.76477 2.59092 5.57386 2.78182 5.57386 3.01705V5.57387H3.01704C2.78182 5.57387 2.59091 5.76478 2.59091 6.00001C2.59091 6.23523 2.78182 6.42614 3.01704 6.42614H5.57386V8.98296C5.57386 9.21861 5.76477 9.4091 6 9.4091C6.23522 9.4091 6.42613 9.21861 6.42613 8.98296V6.42614H8.98295C9.21861 6.42614 9.40909 6.23523 9.40909 6.00001C9.40909 5.76478 9.21861 5.57387 8.98295 5.57387Z"})]})}function HO({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M6.89898 8.09839C7.06439 7.93298 7.33258 7.93268 7.4983 8.09839C7.66401 8.26411 7.66371 8.5323 7.4983 8.69771L6.29966 9.89635C6.13425 10.0618 5.86605 10.0621 5.70034 9.89635L4.5017 8.69771C4.33599 8.532 4.33629 8.26381 4.5017 8.09839C4.66712 7.93298 4.93531 7.93268 5.10102 8.09839L6 8.99737L6.89898 8.09839Z"}),G("path",{fill:t,d:"M8.92674 2.92075C8.69239 2.92075 8.50296 3.1106 8.50296 3.34453V4.61588H7.23161C6.99726 4.61588 6.80783 4.80573 6.80783 5.03966C6.80783 5.27359 6.99726 5.46344 7.23161 5.46344H8.92674C9.16109 5.46344 9.35052 5.27359 9.35052 5.03966V3.34453C9.35052 3.1106 9.16109 2.92075 8.92674 2.92075ZM8.92674 7.15857H2.99379C2.75986 7.15857 2.57001 6.96914 2.57001 6.73479C2.57001 6.50044 2.75986 6.31101 2.99379 6.31101H8.92674C9.16109 6.31101 9.35052 6.50044 9.35052 6.73479C9.35052 6.96914 9.16109 7.15857 8.92674 7.15857ZM5.53648 5.46344H5.1127C4.87877 5.46344 4.68892 5.27359 4.68892 5.03966C4.68892 4.80573 4.87877 4.61588 5.1127 4.61588H5.53648C5.77041 4.61588 5.96027 4.80573 5.96027 5.03966C5.96027 5.27359 5.77041 5.46344 5.53648 5.46344ZM3.41757 5.46344H2.99379C2.75986 5.46344 2.57001 5.27359 2.57001 5.03966C2.57001 4.80573 2.75986 4.61588 2.99379 4.61588H3.41757C3.6515 4.61588 3.84135 4.80573 3.84135 5.03966C3.84135 5.27359 3.6515 5.46344 3.41757 5.46344ZM5.53648 3.76831H5.1127C4.87877 3.76831 4.68892 3.57846 4.68892 3.34453C4.68892 3.1106 4.87877 2.92075 5.1127 2.92075H5.53648C5.77041 2.92075 5.96027 3.1106 5.96027 3.34453C5.96027 3.57846 5.77041 3.76831 5.53648 3.76831ZM7.65539 3.76831H7.23161C6.99726 3.76831 6.80783 3.57846 6.80783 3.34453C6.80783 3.1106 6.99726 2.92075 7.23161 2.92075H7.65539C7.88975 2.92075 8.07918 3.1106 8.07918 3.34453C8.07918 3.57846 7.88975 3.76831 7.65539 3.76831ZM3.41757 3.76831H2.99379C2.75986 3.76831 2.57001 3.57846 2.57001 3.34453C2.57001 3.1106 2.75986 2.92075 2.99379 2.92075H3.41757C3.6515 2.92075 3.84135 3.1106 3.84135 3.34453C3.84135 3.57846 3.6515 3.76831 3.41757 3.76831ZM5.96196 11.9374C2.69036 11.9374 0.029007 9.27609 0.029007 6.00449C0.029007 2.73289 2.69036 0.0715332 5.96196 0.0715332C9.23356 0.0715332 11.8949 2.73289 11.8949 6.00449C11.8949 9.27609 9.23356 11.9374 5.96196 11.9374ZM5.96196 0.919098C3.15779 0.919098 0.876572 3.20032 0.876572 6.00449C0.876572 8.80865 3.15779 11.0899 5.96196 11.0899C8.76613 11.0899 11.0473 8.80865 11.0473 6.00449C11.0473 3.20032 8.76613 0.919098 5.96196 0.919098Z"})]})}function _O({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M5.10102 9.90161C4.93561 10.067 4.66742 10.0673 4.5017 9.90161C4.33599 9.73589 4.33629 9.4677 4.5017 9.30229L5.70034 8.10365C5.86575 7.93824 6.13395 7.93794 6.29966 8.10365L7.4983 9.30229C7.66401 9.468 7.66371 9.73619 7.4983 9.90161C7.33288 10.067 7.06469 10.0673 6.89898 9.90161L6 9.00263L5.10102 9.90161Z"}),G("path",{fill:t,d:"M8.92674 2.92075C8.69239 2.92075 8.50296 3.1106 8.50296 3.34453V4.61588H7.23161C6.99726 4.61588 6.80783 4.80573 6.80783 5.03966C6.80783 5.27359 6.99726 5.46344 7.23161 5.46344H8.92674C9.16109 5.46344 9.35052 5.27359 9.35052 5.03966V3.34453C9.35052 3.1106 9.16109 2.92075 8.92674 2.92075ZM8.92674 7.15857H2.99379C2.75986 7.15857 2.57001 6.96914 2.57001 6.73479C2.57001 6.50044 2.75986 6.31101 2.99379 6.31101H8.92674C9.16109 6.31101 9.35052 6.50044 9.35052 6.73479C9.35052 6.96914 9.16109 7.15857 8.92674 7.15857ZM5.53648 5.46344H5.1127C4.87877 5.46344 4.68892 5.27359 4.68892 5.03966C4.68892 4.80573 4.87877 4.61588 5.1127 4.61588H5.53648C5.77041 4.61588 5.96027 4.80573 5.96027 5.03966C5.96027 5.27359 5.77041 5.46344 5.53648 5.46344ZM3.41757 5.46344H2.99379C2.75986 5.46344 2.57001 5.27359 2.57001 5.03966C2.57001 4.80573 2.75986 4.61588 2.99379 4.61588H3.41757C3.6515 4.61588 3.84135 4.80573 3.84135 5.03966C3.84135 5.27359 3.6515 5.46344 3.41757 5.46344ZM5.53648 3.76831H5.1127C4.87877 3.76831 4.68892 3.57846 4.68892 3.34453C4.68892 3.1106 4.87877 2.92075 5.1127 2.92075H5.53648C5.77041 2.92075 5.96027 3.1106 5.96027 3.34453C5.96027 3.57846 5.77041 3.76831 5.53648 3.76831ZM7.65539 3.76831H7.23161C6.99726 3.76831 6.80783 3.57846 6.80783 3.34453C6.80783 3.1106 6.99726 2.92075 7.23161 2.92075H7.65539C7.88975 2.92075 8.07918 3.1106 8.07918 3.34453C8.07918 3.57846 7.88975 3.76831 7.65539 3.76831ZM3.41757 3.76831H2.99379C2.75986 3.76831 2.57001 3.57846 2.57001 3.34453C2.57001 3.1106 2.75986 2.92075 2.99379 2.92075H3.41757C3.6515 2.92075 3.84135 3.1106 3.84135 3.34453C3.84135 3.57846 3.6515 3.76831 3.41757 3.76831ZM5.96196 11.9374C2.69036 11.9374 0.029007 9.27609 0.029007 6.00449C0.029007 2.73289 2.69036 0.0715332 5.96196 0.0715332C9.23356 0.0715332 11.8949 2.73289 11.8949 6.00449C11.8949 9.27609 9.23356 11.9374 5.96196 11.9374ZM5.96196 0.919098C3.15779 0.919098 0.876572 3.20032 0.876572 6.00449C0.876572 8.80865 3.15779 11.0899 5.96196 11.0899C8.76613 11.0899 11.0473 8.80865 11.0473 6.00449C11.0473 3.20032 8.76613 0.919098 5.96196 0.919098Z"})]})}function jO({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M8.30224 11.5746C8.08419 11.5746 7.8778 11.4382 7.79501 11.2155L4.42281 2.132L1.04944 11.2155C0.942167 11.5047 0.628501 11.6481 0.34865 11.5385C0.0687995 11.4277 -0.0711259 11.1047 0.0361502 10.8155L3.91558 0.36777C3.99604 0.150886 4.19776 0.0074625 4.42281 0.0074625C4.64786 0.0074625 4.84958 0.150886 4.93004 0.366604L8.80947 10.8144C8.91675 11.1035 8.77682 11.4265 8.49697 11.5373C8.43167 11.563 8.36637 11.5746 8.30224 11.5746ZM11.3981 11.5746C11.18 11.5746 10.9737 11.4382 10.8909 11.2155L8.29758 4.23321L7.96759 5.12057C7.86031 5.40975 7.54665 5.55317 7.26679 5.44356C6.98694 5.33279 6.84702 5.00979 6.95429 4.72062L7.79151 2.46782C7.87197 2.25093 8.0737 2.10868 8.29874 2.10868C8.52379 2.10868 8.72552 2.2521 8.80597 2.46782L11.9053 10.8155C12.0126 11.1047 11.8727 11.4277 11.5928 11.5385C11.5275 11.563 11.4622 11.5746 11.3981 11.5746Z"}),G("path",{fill:t,d:"M6.75023 8.09165H2.09421C1.79454 8.09165 1.552 7.84095 1.552 7.53195C1.552 7.22295 1.79454 6.97225 2.09421 6.97225H6.74906C7.04874 6.97225 7.29127 7.22295 7.29127 7.53195C7.29127 7.84095 7.0499 8.09165 6.75023 8.09165ZM9.85424 8.96269H8.86543C8.56576 8.96269 8.32322 8.71199 8.32322 8.40299C8.32322 8.09398 8.56576 7.84328 8.86543 7.84328H9.85424C10.1539 7.84328 10.3965 8.09398 10.3965 8.40299C10.3965 8.71199 10.1539 8.96269 9.85424 8.96269Z"})]})}function WO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M11.8664 3.68664H7.48848C7.42512 3.68664 7.37327 3.73848 7.37327 3.80184V5.41475C7.37327 5.47811 7.42512 5.52995 7.48848 5.52995H8.17972C8.24309 5.52995 8.29493 5.47811 8.29493 5.41475V4.60829H9.15899V9.21659H8.49654C8.43318 9.21659 8.38134 9.26843 8.38134 9.3318V10.023C8.38134 10.0864 8.43318 10.1382 8.49654 10.1382H10.8583C10.9217 10.1382 10.9735 10.0864 10.9735 10.023V9.3318C10.9735 9.26843 10.9217 9.21659 10.8583 9.21659H10.1959V4.60829H11.0599V5.41475C11.0599 5.47811 11.1118 5.52995 11.1751 5.52995H11.8664C11.9297 5.52995 11.9816 5.47811 11.9816 5.41475V3.80184C11.9816 3.73848 11.9297 3.68664 11.8664 3.68664ZM8.06452 1.95853V0.115207C8.06452 0.0518433 8.01267 0 7.94931 0H0.115207C0.0518433 0 0 0.0518433 0 0.115207V1.95853C0 2.02189 0.0518433 2.07373 0.115207 2.07373H0.921659C0.985023 2.07373 1.03687 2.02189 1.03687 1.95853V1.03687H3.45622V9.10138H2.13134C2.06797 9.10138 2.01613 9.15323 2.01613 9.21659V10.023C2.01613 10.0864 2.06797 10.1382 2.13134 10.1382H5.93318C5.99654 10.1382 6.04839 10.0864 6.04839 10.023V9.21659C6.04839 9.15323 5.99654 9.10138 5.93318 9.10138H4.60829V1.03687H7.02765V1.95853C7.02765 2.02189 7.07949 2.07373 7.14286 2.07373H7.94931C8.01267 2.07373 8.06452 2.02189 8.06452 1.95853Z"})})}function zO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 11 12",style:n,children:G("path",{fill:t,stroke:t,"stroke-width":"0.08",d:"M8.69489 1.54432H9.76023C9.81754 1.5427 9.8746 1.55259 9.92802 1.57341C9.98145 1.59423 10.0302 1.62555 10.0713 1.66551C10.1124 1.70548 10.1451 1.75329 10.1674 1.8061C10.1897 1.85892 10.2012 1.91567 10.2012 1.97301C10.2012 2.03035 10.1897 2.0871 10.1674 2.13992C10.1451 2.19274 10.1124 2.24054 10.0713 2.28051C10.0302 2.32048 9.98145 2.35179 9.92802 2.37261C9.8746 2.39343 9.81754 2.40332 9.76023 2.4017H6.76261C6.65192 2.39729 6.54723 2.35021 6.47047 2.27033C6.39371 2.19045 6.35085 2.08396 6.35085 1.97318C6.35085 1.8624 6.39371 1.75592 6.47047 1.67604C6.54723 1.59616 6.65192 1.54908 6.76261 1.54466H8.69489V1.54432ZM8.70375 2.39318V3.45852C8.70537 3.51584 8.69547 3.57289 8.67466 3.62632C8.65384 3.67974 8.62252 3.72845 8.58255 3.76956C8.54259 3.81067 8.49478 3.84335 8.44196 3.86566C8.38915 3.88798 8.33239 3.89948 8.27506 3.89948C8.21772 3.89948 8.16096 3.88798 8.10815 3.86566C8.05533 3.84335 8.00753 3.81067 7.96756 3.76956C7.92759 3.72845 7.89627 3.67974 7.87546 3.62632C7.85464 3.57289 7.84475 3.51584 7.84636 3.45852V0.460228C7.84951 0.348624 7.89606 0.242647 7.97611 0.164821C8.05616 0.0869942 8.16341 0.0434542 8.27506 0.0434542C8.3867 0.0434542 8.49395 0.0869942 8.574 0.164821C8.65406 0.242647 8.7006 0.348624 8.70375 0.460228V2.39318ZM7.99398 12C8.07375 12 8.14329 11.9847 8.20295 11.954C8.32227 11.9138 8.41602 11.8449 8.48625 11.7474C8.55545 11.6526 8.59193 11.537 8.59091 11.4188C8.59144 11.3498 8.57604 11.2817 8.54591 11.2197L4.875 0.466023C4.82998 0.349595 4.75233 0.248625 4.65136 0.175228C4.55615 0.105195 4.44092 0.0676627 4.32273 0.0681821C4.20548 0.0673731 4.09172 0.108069 4.00159 0.183068C3.90818 0.258068 3.8342 0.354887 3.78545 0.466023L0.0988625 11.2193C0.0494307 11.3656 0.0596579 11.5258 0.126817 11.6639C0.194317 11.8023 0.313294 11.9066 0.456817 11.9536C0.517158 11.9843 0.583635 12 0.651135 11.9997C0.77146 11.9997 0.888604 11.961 0.985282 11.8894C1.08196 11.8177 1.15305 11.7169 1.18807 11.6018L2.11364 8.80261H6.54579L7.47136 11.6018C7.51057 11.7245 7.57773 11.8203 7.6725 11.8926C7.76523 11.9632 7.87807 12.001 7.99364 11.9997L7.99398 12ZM6.20284 7.77784H2.45693L4.32273 2.13341L6.20284 7.77784Z"})})}function VO({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M2.51429 3.27273V8.72727H4.19048L2.09524 12L0 8.72727H1.67619V3.27273H0L2.09524 0L4.19048 3.27273H2.51429Z"}),G("path",{fill:t,d:"M5.5 1.5C5.5 1.224 5.62133 1 5.77083 1H11.7292C11.8787 1 12 1.224 12 1.5C12 1.776 11.8787 2 11.7292 2H5.77083C5.62133 2 5.5 1.776 5.5 1.5ZM5.5 4.5C5.5 4.776 5.62133 5 5.77083 5H11.7292C11.8787 5 12 4.776 12 4.5C12 4.224 11.8787 4 11.7292 4H5.77083C5.62133 4 5.5 4.224 5.5 4.5ZM5.5 7.5C5.5 7.776 5.62133 8 5.77083 8H11.7292C11.8787 8 12 7.776 12 7.5C12 7.224 11.8787 7 11.7292 7H5.77083C5.62133 7 5.5 7.224 5.5 7.5ZM5.5 10.5C5.5 10.776 5.62133 11 5.77083 11H11.7292C11.8787 11 12 10.776 12 10.5C12 10.224 11.8787 10 11.7292 10H5.77083C5.62133 10 5.5 10.224 5.5 10.5Z"})]})}function $O({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M5.37878 2.4H6.69507L9.39693 9.65417H8.15982L7.51652 7.83576H4.55734L3.91404 9.65417H2.67693L5.37878 2.4ZM4.90373 6.86053H7.17012L6.06167 3.68085H6.02208L4.90373 6.86053Z"}),G("path",{fill:t,d:"M12 0.0230507H10.7585V12H12V0Z"}),G("path",{fill:t,d:"M0 0H1.24155V12H0V0Z"})]})}function ZO({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M11 9.78041V10.77H4V9.78041H11ZM11 5.52916V6.51875H4V5.52916H11ZM11 1.27V2.25958H4V1.27H11Z"}),G("path",{fill:t,d:"M2.39091 0.900002C2.61673 0.900002 2.8 1.08327 2.8 1.30909V2.29091C2.8 2.51673 2.61673 2.7 2.39091 2.7H1.40909C1.18327 2.7 1 2.51673 1 2.29091V1.30909C1 1.08327 1.18327 0.900002 1.40909 0.900002H2.39091Z"}),G("path",{fill:t,d:"M2.39091 5.1C2.61673 5.1 2.8 5.28327 2.8 5.50909V6.49091C2.8 6.71673 2.61673 6.9 2.39091 6.9H1.40909C1.18327 6.9 1 6.71673 1 6.49091V5.50909C1 5.28327 1.18327 5.1 1.40909 5.1H2.39091Z"}),G("path",{fill:t,d:"M2.39091 9.4C2.61673 9.4 2.8 9.58327 2.8 9.80909V10.7909C2.8 11.0167 2.61673 11.2 2.39091 11.2H1.40909C1.18327 11.2 1 11.0167 1 10.7909V9.80909C1 9.58327 1.18327 9.4 1.40909 9.4H2.39091Z"})]})}function UO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M11.3667 6.3814H3.64003C2.84102 6.3814 2.84102 5.18289 3.64003 5.18289H11.3667C12.1657 5.18289 12.1657 6.3814 11.3667 6.3814ZM11.3616 11.3219H3.63501C2.836 11.3219 2.836 10.1234 3.63501 10.1234H11.3616C12.1606 10.1234 12.1606 11.3219 11.3616 11.3219ZM11.3616 1.45419H3.63501C2.836 1.45419 2.836 0.255685 3.63501 0.255685H11.3616C12.1606 0.255685 12.1606 1.45419 11.3616 1.45419ZM0.886361 1.72053C0.415667 1.72053 0.0340881 1.33895 0.0340881 0.868256C0.0340881 0.397562 0.415667 0.0159836 0.886361 0.0159836C1.35706 0.0159836 1.73863 0.397562 1.73863 0.868256C1.73863 1.33895 1.35706 1.72053 0.886361 1.72053ZM0.886361 11.5882C0.415667 11.5882 0.0340881 11.2067 0.0340881 10.736C0.0340881 10.2653 0.415667 9.8837 0.886361 9.8837C1.35706 9.8837 1.73863 10.2653 1.73863 10.736C1.73863 11.2067 1.35706 11.5882 0.886361 11.5882ZM0.886361 6.64773C0.415667 6.64773 0.0340881 6.26615 0.0340881 5.79546C0.0340881 5.32476 0.415667 4.94319 0.886361 4.94319C1.35706 4.94319 1.73863 5.32476 1.73863 5.79546C1.73863 6.26615 1.35706 6.64773 0.886361 6.64773Z"})})}function qO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M4.16471 6.92157L5.29412 8.4902H0L1.2 3L2.32941 4.4902C2.96471 3.86274 4.37647 3.07843 6.77647 3.07843C10.5176 3.07843 12 7.31373 12 7.31373C12 7.31373 9.81177 4.56863 7.41176 4.56863C5.57647 4.56863 4.51765 6.13725 4.16471 6.92157Z"})})}function YO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M7.86282 6.93098L6.70588 8.4902H12L10.7809 3L9.66565 4.50275C9.00635 3.91373 7.65035 3.08941 5.22353 3.08941C1.44847 3.08941 0 7.3498 0 7.3498C0 7.3498 2.16494 4.60392 4.58259 4.60392C6.39176 4.60314 7.44635 6.15137 7.86282 6.93098V6.93098Z"})})}function KO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M5.98462 6.46154V5.53846H10.9692V0.923077H9.30769V0H1V3.69231H9.30769V1.84615H10.1385V4.61538H5.15385V6.46154H4.32308V12H6.81538V6.46154H5.98462Z"})})}function GO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M2.72 10.2222L0 7.2L6.48 0L11.28 5.33333L6.96 10.2222H2.72ZM6.56 9.33333L7.68 8.08889L4 4L1.12 7.11111L3.12 9.33333H6.56ZM0.8 11.1111H11.2V12H0.8V11.1111Z"})})}const XO="M8.92911 8.22917C8.95429 8.24679 8.97896 8.26643 9.00112 8.2896L11.8533 11.1412C12.0451 11.3331 12.0481 11.6549 11.8518 11.8513C11.8053 11.8982 11.7501 11.9355 11.6892 11.9611C11.6283 11.9866 11.5629 11.9998 11.4969 12C11.4309 12.0002 11.3655 11.9873 11.3044 11.9621C11.2434 11.937 11.1879 11.9 11.1412 11.8533L8.28909 9.00114C8.26703 8.97908 8.24713 8.95496 8.22966 8.92912C7.32995 9.66926 6.20062 10.0731 5.03559 10.0712C2.25444 10.0712 0 7.81675 0 5.0356C0 2.25444 2.25444 0 5.03559 0C7.81675 0 10.0712 2.25444 10.0712 5.0356C10.0712 6.24765 9.64316 7.36002 8.92911 8.22917V8.22917ZM5.03559 9.06406C6.10401 9.06406 7.12867 8.63964 7.88416 7.88415C8.63964 7.12867 9.06407 6.10401 9.06407 5.03559C9.06407 3.96717 8.63964 2.94251 7.88416 2.18703C7.12867 1.43154 6.10401 1.00711 5.03559 1.00711C3.96718 1.00711 2.94252 1.43154 2.18703 2.18703C1.43155 2.94251 1.00712 3.96717 1.00712 5.03559C1.00712 6.10401 1.43155 7.12867 2.18703 7.88415C2.94252 8.63964 3.96718 9.06406 5.03559 9.06406V9.06406Z";function JO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:XO})})}function QO({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M4.65678 5.18644H3.92458L3.40169 3.78305H1.2661L0.773728 5.18644H0.0415249L1.99491 0.0584717H2.70339L4.65678 5.18644ZM3.19661 3.20339L2.42203 1.07203C2.38636 0.955038 2.35973 0.835477 2.34237 0.714404H2.32542C2.30169 0.868641 2.27458 0.987285 2.24322 1.07203L1.47542 3.20339H3.19661ZM7.9678 11.9661V6.7822H9.76864C10.3068 6.7822 10.7373 6.89067 11.0576 7.10847C11.3797 7.32627 11.5407 7.61525 11.5407 7.97373C11.5407 8.25932 11.4449 8.51101 11.2534 8.73051C11.0619 8.94915 10.7992 9.10339 10.4636 9.19576V9.20932C10.8805 9.24915 11.2136 9.3822 11.4636 9.60932C11.7127 9.83644 11.8364 10.1229 11.8364 10.4712C11.8364 10.9178 11.6475 11.2788 11.2686 11.5542C10.8924 11.8288 10.4068 11.9661 9.8161 11.9661H7.9678ZM8.76017 7.36779V8.99067H9.48051C9.86271 8.99067 10.1636 8.91186 10.3805 8.75508C10.4855 8.68217 10.5705 8.58405 10.6276 8.46974C10.6848 8.35542 10.7123 8.22857 10.7076 8.10084C10.7076 7.61271 10.3229 7.36864 9.55254 7.36864H8.76017V7.36779ZM8.76017 9.57373V11.3805H9.70932C10.1229 11.3805 10.4432 11.3 10.6695 11.1381C10.778 11.0632 10.8658 10.9621 10.9248 10.8442C10.9838 10.7262 11.012 10.5953 11.0068 10.4636C11.0068 9.87034 10.5305 9.57373 9.57797 9.57373H8.76017ZM5.05085 10.6186L5.13559 10.1186C4.20415 9.88255 3.36925 9.36248 2.74667 8.63057C2.12408 7.89865 1.74466 6.99114 1.66102 6.0339H2.50847C2.59422 6.79175 2.90474 7.50663 3.4001 8.08656C3.89546 8.66649 4.553 9.08496 5.28813 9.28813L5.41525 8.57627L7 9.91525L5.05085 10.6186Z"})})}function eR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 10 12",style:n,children:G("path",{fill:t,d:"M9.54545 2.31818V0.136364C9.54545 0.0613636 9.48409 0 9.40909 0H0.136364C0.0613636 0 0 0.0613636 0 0.136364V2.31818C0 2.39318 0.0613636 2.45455 0.136364 2.45455H1.09091C1.16591 2.45455 1.22727 2.39318 1.22727 2.31818V1.22727H4.09091V10.7727H2.52273C2.44773 10.7727 2.38636 10.8341 2.38636 10.9091V11.8636C2.38636 11.9386 2.44773 12 2.52273 12H7.02273C7.09773 12 7.15909 11.9386 7.15909 11.8636V10.9091C7.15909 10.8341 7.09773 10.7727 7.02273 10.7727H5.45455V1.22727H8.31818V2.31818C8.31818 2.39318 8.37955 2.45455 8.45455 2.45455H9.40909C9.48409 2.45455 9.54545 2.39318 9.54545 2.31818Z"})})}function tR({width:e=8,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 8 12",style:n,children:G("path",{fill:t,d:"M1.35187 5.33801H6.64813V0.70378C6.64813 0.528199 6.71788 0.359808 6.84203 0.235653C6.96619 0.111498 7.13458 0.041748 7.31016 0.041748C7.48574 0.041748 7.65413 0.111498 7.77829 0.235653C7.90244 0.359808 7.9722 0.528199 7.9722 0.70378V11.2963C7.9722 11.4719 7.90244 11.6403 7.77829 11.7644C7.65413 11.8886 7.48574 11.9583 7.31016 11.9583C7.13458 11.9583 6.96619 11.8886 6.84203 11.7644C6.71788 11.6403 6.64813 11.4719 6.64813 11.2963V6.66207H1.35187V11.2963C1.35187 11.4719 1.28212 11.6403 1.15797 11.7644C1.03381 11.8886 0.86542 11.9583 0.689838 11.9583C0.514256 11.9583 0.345865 11.8886 0.22171 11.7644C0.097555 11.6403 0.0278053 11.4719 0.0278053 11.2963V0.70378C0.0278053 0.528199 0.097555 0.359808 0.22171 0.235653C0.345865 0.111498 0.514256 0.041748 0.689838 0.041748C0.86542 0.041748 1.03381 0.111498 1.15797 0.235653C1.28212 0.359808 1.35187 0.528199 1.35187 0.70378V5.33801Z"})})}function nR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M5.93348 5.07273C6.52639 5.07273 6.98819 4.97782 7.31791 4.78691C7.83562 4.48691 8.09496 3.948 8.09496 3.16909C8.09496 2.38473 7.81923 1.85673 7.26874 1.584C6.9583 1.43127 6.4965 1.35491 5.88431 1.35491H3.37768V5.07273H5.93348ZM6.40588 10.6113C7.26778 10.6113 7.8819 10.3222 8.24922 9.74509C8.47963 9.38073 8.59532 8.93891 8.59532 8.42182C8.59532 7.55018 8.25886 6.95673 7.58592 6.64145C7.22728 6.47236 6.75488 6.38836 6.16582 6.38836H3.37672V10.6113H6.40588ZM2 0H6.45601C7.67076 0 8.53459 0.418909 9.04748 1.25782C9.34924 1.75309 9.49964 2.32473 9.49964 2.97273C9.49964 3.72982 9.31357 4.35055 8.94143 4.83491C8.74861 5.09236 8.46999 5.32582 8.1075 5.53855C8.63967 5.77309 9.03784 6.03709 9.30104 6.33055C9.76669 6.85309 10 7.57527 10 8.49491C10 9.26836 9.79079 9.96764 9.37141 10.5938C8.74572 11.532 7.74982 12 6.38467 12H2V0Z"})})}function oR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M7.2957 1.09091H8.4V0H4.8V1.09091H5.9457L4.1052 10.9091H3V12H6.6V10.9091H5.4543L7.2957 1.09091Z"})})}function iR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M2.8422 5.45455H0V6.54545H5.4747L6.1767 6.732C6.8886 6.92291 7.4115 7.14764 7.7454 7.40618C8.0757 7.66909 8.2404 8.11091 8.2404 8.73055C8.2404 9.55636 7.8489 10.1302 7.0668 10.4509C6.63268 10.6215 6.17852 10.7051 5.7222 10.6985C4.6233 10.6985 3.8565 10.3211 3.4218 9.56727C3.1932 9.16473 3.0636 8.64 3.033 7.99527H1.8C1.7865 9.22473 2.1204 10.1978 2.8017 10.9156C3.4839 11.6389 4.4262 12 5.6304 12C6.6627 12 7.5699 11.7284 8.3493 11.1862C9.1296 10.644 9.5193 9.74291 9.5193 8.48291C9.5193 7.68982 9.3303 7.044 8.9523 6.54545H11.7V5.45455H7.1118L7.0803 5.44582L5.7222 5.08145C4.8087 4.83382 4.2219 4.62764 3.9627 4.46182C3.5667 4.20436 3.3696 3.79636 3.3696 3.23782C3.3696 2.73164 3.5388 2.28764 3.8772 1.90582C4.2156 1.524 4.7718 1.332 5.5449 1.332C6.5025 1.332 7.182 1.62873 7.5816 2.22327C7.7967 2.54836 7.938 3.01636 8.0037 3.62509H9.2367C9.2367 2.35964 8.8821 1.43891 8.172 0.862909C7.4619 0.288 6.5988 0 5.5845 0C4.4811 0 3.6288 0.328364 3.0267 0.984C2.4246 1.63964 2.1231 2.47855 2.1231 3.50182C2.1231 4.33527 2.3625 4.98655 2.8422 5.45455Z"})})}function rR({width:e=13,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M3.35718 0V5.55785C3.35718 6.21046 3.46927 6.75323 3.69264 7.18615C4.02482 7.83877 4.58364 8.16554 5.37073 8.16554C6.31409 8.16554 6.95555 7.81292 7.29509 7.10677C7.47755 6.72277 7.56918 6.20677 7.56918 5.55785V0H8.69909V5.05015C8.69909 6.156 8.56327 7.00708 8.29082 7.60246C7.79009 8.688 6.84673 9.23077 5.45991 9.23077C4.07309 9.23077 3.13136 8.688 2.63555 7.60246C2.36309 7.00708 2.22727 6.156 2.22727 5.05015V0H3.35718V0ZM1 11.0769H10V12H1V11.0769Z"})})}function lR({width:e=11,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M7.32782 7.08218L5.72451 1.78036L4.02007 7.08218H7.32782ZM4.97636 0H6.5944L10.4274 12H8.85945L7.78829 8.40545H3.61065L2.46684 12H1L4.97636 0Z"})})}function sR({width:e=14.5,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,fill:"none",children:[G("path",{stroke:t,d:"M5.6667 1L5.56205 1.33639L1.11349 6.1027C0.96217 6.26483 0.96217 6.5277 1.11349 6.68983L4.67539 10.5061C4.82671 10.6683 5.07205 10.6683 5.22337 10.5061L9.44675 5.9811H10.1656L10.0905 5.73984L5.6667 1Z"}),G("path",{fill:t,d:"M4.92103 10.5437L7.93666 7.28917H2.01357L4.92103 10.5437Z"}),G("path",{fill:t,d:"M10.2381 7.91561L10.4188 7.78655C10.5906 7.66384 10.8227 7.71358 10.9372 7.89765C10.9782 7.96345 11 8.04076 11 8.11983V9.23962C11 9.81283 10.5663 10.2775 10.0313 10.2775C9.66908 10.2775 9.37544 9.96291 9.37544 9.57482C9.37544 9.48543 9.39136 9.39685 9.42235 9.31385L9.65876 8.6806C9.77521 8.36869 9.97721 8.10196 10.2381 7.91561Z"})]})}function cR({width:e=13,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,fill:"none",children:G("path",{fill:t,d:"M6.63788 0.0565796L11.9949 5.41365L8.21818 9.04597L7.53636 8.36415L5.76818 10.1111L4.81667 9.11769L3.99344 9.899H0.0166702L2.86061 7.07426L1.82728 5.99446L3.51818 4.34648L2.86111 3.68941L6.63788 0.0565796V0.0565796ZM4.25909 5.10456L3.31818 6.02072L5.75758 8.5687L6.73485 7.60203L4.25859 5.10456H4.25909ZM6.62273 1.57224L4.41566 3.69345L7.03182 6.33082L8.23232 7.53082L10.4495 5.3985L6.62273 1.57224V1.57224Z"})})}function aR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M0 0.540001C0 0.816001 0.224 1.04 0.5 1.04H11.5C11.776 1.04 12 0.816001 12 0.540001C12 0.264001 11.776 0.0400009 11.5 0.0400009H0.5C0.224 0.0400009 0 0.264001 0 0.540001ZM0 3.54C0 3.264 0.224 3.04 0.5 3.04H8.5C8.776 3.04 9 3.264 9 3.54C9 3.816 8.776 4.04 8.5 4.04H0.5C0.224 4.04 0 3.816 0 3.54ZM0 6.54C0 6.264 0.224 6.04 0.5 6.04H11.5C11.776 6.04 12 6.264 12 6.54C12 6.816 11.776 7.04 11.5 7.04H0.5C0.224 7.04 0 6.816 0 6.54ZM0 9.54C0 9.264 0.224 9.04 0.5 9.04H8.5C8.776 9.04 9 9.264 9 9.54C9 9.816 8.776 10.04 8.5 10.04H0.5C0.224 10.04 0 9.816 0 9.54Z"})})}function uR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M12 0.540001C12 0.816001 11.776 1.04 11.5 1.04H0.5C0.224 1.04 0 0.816001 0 0.540001C0 0.264001 0.224 0.0400009 0.5 0.0400009H11.5C11.776 0.0400009 12 0.264001 12 0.540001ZM12 3.54C12 3.264 11.776 3.04 11.5 3.04H3.5C3.224 3.04 3 3.264 3 3.54C3 3.816 3.224 4.04 3.5 4.04H11.5C11.776 4.04 12 3.816 12 3.54ZM12 6.54C12 6.264 11.776 6.04 11.5 6.04H0.5C0.224 6.04 0 6.264 0 6.54C0 6.816 0.224 7.04 0.5 7.04H11.5C11.776 7.04 12 6.816 12 6.54ZM12 9.54C12 9.264 11.776 9.04 11.5 9.04H3.5C3.224 9.04 3 9.264 3 9.54C3 9.816 3.224 10.04 3.5 10.04H11.5C11.776 10.04 12 9.816 12 9.54Z"})})}function dR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M0 0.540001C0 0.264001 0.224 0.0400009 0.5 0.0400009H11.5C11.776 0.0400009 12 0.264001 12 0.540001C12 0.816001 11.776 1.04 11.5 1.04H0.5C0.224 1.04 0 0.816001 0 0.540001ZM2 3.54C2 3.816 2.224 4.04 2.5 4.04H9.5C9.776 4.04 10 3.816 10 3.54C10 3.264 9.776 3.04 9.5 3.04H2.5C2.224 3.04 2 3.264 2 3.54ZM0 6.54C0 6.816 0.224 7.04 0.5 7.04H11.5C11.776 7.04 12 6.816 12 6.54C12 6.264 11.776 6.04 11.5 6.04H0.5C0.224 6.04 0 6.264 0 6.54ZM2 9.54C2 9.816 2.224 10.04 2.5 10.04H9.5C9.776 10.04 10 9.816 10 9.54C10 9.264 9.776 9.04 9.5 9.04H2.5C2.224 9.04 2 9.264 2 9.54Z"})})}function fR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,d:"M0 0.540001C0 0.264001 0.224 0.0400009 0.5 0.0400009H11.5C11.776 0.0400009 12 0.264001 12 0.540001C12 0.816001 11.776 1.04 11.5 1.04H0.5C0.224 1.04 0 0.816001 0 0.540001ZM0 3.54C0 3.816 0.224 4.04 0.5 4.04H11.5C11.776 4.04 12 3.816 12 3.54C12 3.264 11.776 3.04 11.5 3.04H0.5C0.224 3.04 0 3.264 0 3.54ZM0 6.54C0 6.816 0.224 7.04 0.5 7.04H11.5C11.776 7.04 12 6.816 12 6.54C12 6.264 11.776 6.04 11.5 6.04H0.5C0.224 6.04 0 6.264 0 6.54ZM0 9.54C0 9.816 0.224 10.04 0.5 10.04H11.5C11.776 10.04 12 9.816 12 9.54C12 9.264 11.776 9.04 11.5 9.04H0.5C0.224 9.04 0 9.264 0 9.54Z"})})}function hR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M11.438 1.5H0.562C0.252 1.5 0 1.276 0 1C0 0.724 0.252 0.5 0.563 0.5H11.437C11.748 0.5 12 0.724 12 1C12 1.276 11.748 1.5 11.437 1.5"}),G("path",{fill:t,d:"M8.476 4.51997C8.56458 4.60816 8.61692 4.72633 8.6227 4.8512C8.62848 4.97606 8.58728 5.09856 8.50722 5.19456C8.42717 5.29055 8.31405 5.35308 8.19018 5.36981C8.06631 5.38655 7.94066 5.35628 7.838 5.28497L7.769 5.22697L6.001 3.45897L4.234 5.22697C4.15127 5.3098 4.04209 5.36097 3.92551 5.37157C3.80892 5.38217 3.69231 5.35152 3.596 5.28497L3.526 5.22697C3.44332 5.14412 3.39234 5.03488 3.38192 4.9183C3.3715 4.80171 3.40232 4.68517 3.469 4.58897L3.526 4.51897L5.648 2.39897C5.73073 2.31614 5.8399 2.26497 5.95649 2.25437C6.07308 2.24377 6.18969 2.27442 6.286 2.34097L6.355 2.39797L8.476 4.51997Z"}),G("path",{fill:t,d:"M6 2.70502C6.11703 2.70497 6.23036 2.75769 6.32026 2.854C6.41016 2.95031 6.47094 3.08411 6.492 3.23209L6.5 3.34779V11.0611C6.50023 11.2217 6.45367 11.3766 6.36949 11.4953C6.28531 11.614 6.16961 11.6879 6.04518 11.7024C5.92074 11.7169 5.79659 11.671 5.69717 11.5737C5.59775 11.4764 5.53026 11.3348 5.508 11.1768L5.5 11.0611V3.34779C5.5 3.17732 5.55268 3.01382 5.64645 2.89328C5.74021 2.77274 5.86739 2.70502 6 2.70502Z"})]})}function pR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M11.438 6.5H0.562C0.252 6.5 0 6.276 0 6C0 5.724 0.252 5.5 0.563 5.5H11.437C11.748 5.5 12 5.724 12 6C12 6.276 11.748 6.5 11.437 6.5"}),G("path",{fill:t,d:"M8.476 9.26765C8.56458 9.35584 8.61692 9.47401 8.6227 9.59888C8.62848 9.72374 8.58728 9.84624 8.50722 9.94224C8.42717 10.0382 8.31405 10.1008 8.19018 10.1175C8.06631 10.1342 7.94066 10.104 7.838 10.0327L7.769 9.97465L6.001 8.20665L4.234 9.97465C4.15127 10.0575 4.04209 10.1087 3.92551 10.1193C3.80892 10.1299 3.69231 10.0992 3.596 10.0327L3.526 9.97465C3.44332 9.8918 3.39234 9.78256 3.38192 9.66598C3.3715 9.5494 3.40232 9.43285 3.469 9.33665L3.526 9.26665L5.648 7.14665C5.73073 7.06383 5.8399 7.01265 5.95649 7.00205C6.07308 6.99146 6.18969 7.0221 6.286 7.08865L6.355 7.14565L8.476 9.26765Z"}),G("path",{fill:t,d:"M6 7.5C6.11703 7.49997 6.23036 7.52634 6.32026 7.57449C6.41016 7.62265 6.47094 7.68954 6.492 7.76354L6.5 7.82139V11.678C6.50023 11.7583 6.45367 11.8358 6.36949 11.8951C6.28531 11.9545 6.16961 11.9914 6.04518 11.9987C5.92074 12.0059 5.79659 11.983 5.69717 11.9343C5.59775 11.8857 5.53026 11.8149 5.508 11.7359L5.5 11.678V7.82139C5.5 7.73615 5.55268 7.6544 5.64645 7.59413C5.74021 7.53386 5.86739 7.5 6 7.5Z"}),G("path",{fill:t,d:"M3.52718 2.73235C3.43859 2.64416 3.38625 2.52599 3.38047 2.40112C3.37469 2.27626 3.41589 2.15376 3.49595 2.05776C3.57601 1.96177 3.68912 1.89924 3.81299 1.88251C3.93686 1.86577 4.06251 1.89604 4.16517 1.96735L4.23418 2.02535L6.00218 3.79335L7.76918 2.02535C7.85191 1.94252 7.96108 1.89135 8.07767 1.88075C8.19425 1.87015 8.31086 1.9008 8.40718 1.96735L8.47718 2.02535C8.55985 2.1082 8.61084 2.21744 8.62125 2.33402C8.63167 2.4506 8.60085 2.56715 8.53418 2.66335L8.47718 2.73335L6.35518 4.85335C6.27244 4.93617 6.16327 4.98735 6.04668 4.99795C5.9301 5.00854 5.81349 4.9779 5.71718 4.91135L5.64818 4.85435L3.52718 2.73235Z"}),G("path",{fill:t,d:"M6 4.20001C5.88297 4.20004 5.76964 4.17543 5.67974 4.13049C5.58984 4.08554 5.52906 4.0231 5.508 3.95404L5.5 3.90005V0.300526C5.49977 0.225568 5.54633 0.153275 5.63051 0.0978828C5.71469 0.0424903 5.83039 0.00801262 5.95482 0.00123983C6.07926 -0.00553296 6.20341 0.01589 6.30283 0.0612894C6.40225 0.106689 6.46974 0.172774 6.492 0.246533L6.5 0.300526L6.5 3.90005C6.5 3.97961 6.44732 4.0559 6.35355 4.11216C6.25979 4.16841 6.13261 4.20001 6 4.20001Z"})]})}function vR({width:e=12,fill:t=Lf,style:n}){return G(hR,{width:e,fill:t,style:{...n,transform:"rotate(180deg)"}})}function gR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 11",style:n,children:[G("path",{fill:t,d:"M3.5 0.68C3.5 0.956 3.738 1.18 4.03125 1.18H11.4688C11.762 1.18 12 0.956 12 0.68C12 0.404 11.762 0.18 11.4688 0.18H4.03125C3.738 0.18 3.5 0.404 3.5 0.68ZM3.5 3.68C3.5 3.956 3.738 4.18 4.03125 4.18H11.4688C11.762 4.18 12 3.956 12 3.68C12 3.404 11.762 3.18 11.4688 3.18H4.03125C3.738 3.18 3.5 3.404 3.5 3.68Z"}),G("path",{fill:t,d:"M0 6.54C0 6.264 0.224 6.04 0.5 6.04H11.5C11.776 6.04 12 6.264 12 6.54C12 6.816 11.776 7.04 11.5 7.04H0.5C0.224 7.04 0 6.816 0 6.54ZM0 9.54C0 9.816 0.224 10.04 0.5 10.04H11.5C11.776 10.04 12 9.816 12 9.54C12 9.264 11.776 9.04 11.5 9.04H0.5C0.224 9.04 0 9.264 0 9.54Z"}),G("path",{fill:t,d:"M2.47159 2.07841L0.484089 0.0900564C0.426987 0.0329542 0.361362 0.00482941 0.282953 0.00482941C0.207952 0.00482941 0.141475 0.0329542 0.0835209 0.0900564C0.0272708 0.145454 -1.90735e-06 0.211931 -1.90735e-06 0.288635L-1.90735e-06 4.26704C-1.90735e-06 4.34375 0.0272708 4.41023 0.0835209 4.46648C0.141475 4.52358 0.2071 4.55 0.282953 4.55C0.360509 4.55 0.426987 4.52273 0.484089 4.46648L2.47159 2.47727C2.52869 2.42102 2.55682 2.35369 2.55682 2.27784C2.55682 2.20199 2.52869 2.13466 2.47159 2.07841Z"})]})}function mR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 11",style:n,children:[G("path",{fill:t,d:"M3.5 3.54C3.5 3.816 3.738 4.04 4.03125 4.04H11.4688C11.762 4.04 12 3.816 12 3.54C12 3.264 11.762 3.04 11.4688 3.04H4.03125C3.738 3.04 3.5 3.264 3.5 3.54ZM3.5 6.54C3.5 6.816 3.738 7.04 4.03125 7.04H11.4688C11.762 7.04 12 6.816 12 6.54C12 6.264 11.762 6.04 11.4688 6.04H4.03125C3.738 6.04 3.5 6.264 3.5 6.54Z"}),G("path",{fill:t,d:"M0 0.540001C0 0.264001 0.224 0.0400009 0.5 0.0400009H11.5C11.776 0.0400009 12 0.264001 12 0.540001C12 0.816001 11.776 1.04 11.5 1.04H0.5C0.224 1.04 0 0.816001 0 0.540001ZM0 9.54C0 9.816 0.224 10.04 0.5 10.04H11.5C11.776 10.04 12 9.816 12 9.54C12 9.264 11.776 9.04 11.5 9.04H0.5C0.224 9.04 0 9.264 0 9.54Z"}),G("path",{fill:t,d:"M2.47159 4.82358L0.484089 2.83523C0.426987 2.77812 0.361362 2.75 0.282953 2.75C0.207952 2.75 0.141475 2.77812 0.0835209 2.83523C0.0272708 2.89062 -1.90735e-06 2.9571 -1.90735e-06 3.03381L-1.90735e-06 7.01222C-1.90735e-06 7.08892 0.0272708 7.1554 0.0835209 7.21165C0.141475 7.26875 0.2071 7.29517 0.282953 7.29517C0.360509 7.29517 0.426987 7.2679 0.484089 7.21165L2.47159 5.22244C2.52869 5.16619 2.55682 5.09886 2.55682 5.02301C2.55682 4.94716 2.52869 4.87983 2.47159 4.82358Z"})]})}function yR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 11",style:n,children:[G("path",{fill:t,d:"M3.5 3.54C3.5 3.816 3.738 4.04 4.03125 4.04H11.4688C11.762 4.04 12 3.816 12 3.54C12 3.264 11.762 3.04 11.4688 3.04H4.03125C3.738 3.04 3.5 3.264 3.5 3.54ZM3.5 6.54C3.5 6.816 3.738 7.04 4.03125 7.04H11.4688C11.762 7.04 12 6.816 12 6.54C12 6.264 11.762 6.04 11.4688 6.04H4.03125C3.738 6.04 3.5 6.264 3.5 6.54Z"}),G("path",{fill:t,d:"M0 0.540001C0 0.264001 0.224 0.0400009 0.5 0.0400009H11.5C11.776 0.0400009 12 0.264001 12 0.540001C12 0.816001 11.776 1.04 11.5 1.04H0.5C0.224 1.04 0 0.816001 0 0.540001ZM0 9.54C0 9.816 0.224 10.04 0.5 10.04H11.5C11.776 10.04 12 9.816 12 9.54C12 9.264 11.776 9.04 11.5 9.04H0.5C0.224 9.04 0 9.264 0 9.54Z"}),G("path",{fill:t,d:"M0.0852273 5.22159L2.07273 7.20994C2.12983 7.26705 2.19545 7.29517 2.27386 7.29517C2.34886 7.29517 2.41534 7.26705 2.4733 7.20994C2.52955 7.15455 2.55682 7.08807 2.55682 7.01136V3.03295C2.55682 2.95625 2.52955 2.88977 2.4733 2.83352C2.41534 2.77642 2.34972 2.75 2.27386 2.75C2.19631 2.75 2.12983 2.77727 2.07273 2.83352L0.0852273 4.82273C0.028125 4.87898 0 4.94631 0 5.02216C0 5.09801 0.028125 5.16534 0.0852273 5.22159Z"})]})}function bR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,stroke:t,"stroke-width":"0.1",d:"M4.9125 1.10625V4.73125C4.9125 4.83093 4.83093 4.9125 4.73125 4.9125H1.10625C1.00656 4.9125 0.924997 4.83093 0.924997 4.73125V1.10625C0.924997 1.00656 1.00656 0.924997 1.10625 0.924997H4.73125C4.83093 0.924997 4.9125 1.00656 4.9125 1.10625ZM0.199997 0.924997V4.9125C0.199997 5.31238 0.525114 5.6375 0.924997 5.6375H4.9125C5.31238 5.6375 5.6375 5.31238 5.6375 4.9125V0.924997C5.6375 0.525114 5.31238 0.199997 4.9125 0.199997H0.924997C0.525114 0.199997 0.199997 0.525114 0.199997 0.924997ZM11.075 1.10625V4.73125C11.075 4.83093 10.9934 4.9125 10.8937 4.9125H7.26875C7.16906 4.9125 7.0875 4.83093 7.0875 4.73125V1.10625C7.0875 1.00656 7.16906 0.924997 7.26875 0.924997H10.8937C10.9934 0.924997 11.075 1.00656 11.075 1.10625ZM6.3625 0.924997V4.9125C6.3625 5.31238 6.68761 5.6375 7.0875 5.6375H11.075C11.4749 5.6375 11.8 5.31238 11.8 4.9125V0.924997C11.8 0.525114 11.4749 0.199997 11.075 0.199997H7.0875C6.68761 0.199997 6.3625 0.525114 6.3625 0.924997ZM4.9125 7.26875V10.8937C4.9125 10.9934 4.83093 11.075 4.73125 11.075H1.10625C1.00656 11.075 0.924997 10.9934 0.924997 10.8937V7.26875C0.924997 7.16906 1.00656 7.0875 1.10625 7.0875H4.73125C4.83093 7.0875 4.9125 7.16906 4.9125 7.26875ZM0.199997 7.0875V11.075C0.199997 11.4749 0.525114 11.8 0.924997 11.8H4.9125C5.31238 11.8 5.6375 11.4749 5.6375 11.075V7.0875C5.6375 6.68761 5.31238 6.3625 4.9125 6.3625H0.924997C0.525114 6.3625 0.199997 6.68761 0.199997 7.0875ZM11.075 7.26875V10.8937C11.075 10.9934 10.9934 11.075 10.8937 11.075H7.26875C7.16906 11.075 7.0875 10.9934 7.0875 10.8937V7.26875C7.0875 7.16906 7.16906 7.0875 7.26875 7.0875H10.8937C10.9934 7.0875 11.075 7.16906 11.075 7.26875ZM6.3625 7.0875V11.075C6.3625 11.4749 6.68761 11.8 7.0875 11.8H11.075C11.4749 11.8 11.8 11.4749 11.8 11.075V7.0875C11.8 6.68761 11.4749 6.3625 11.075 6.3625H7.0875C6.68761 6.3625 6.3625 6.68761 6.3625 7.0875Z"})})}function CR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M11.7698 2.78713C12.0063 3.02364 12.0063 3.40569 11.7698 3.6422L9.20275 6.20922C8.96624 6.44573 8.58419 6.44573 8.34768 6.20922L5.78066 3.6422C5.54415 3.40569 5.54415 3.02364 5.78066 2.78713L8.34768 0.220106C8.58419 -0.0164024 8.96624 -0.0164024 9.20275 0.220106L11.7698 2.78713ZM8.77522 0.933269L6.49383 3.21466L8.77522 5.49606L11.0566 3.21466L8.77522 0.933269Z"}),G("path",{fill:t,stroke:t,"stroke-width":"0.1",d:"M4.56875 1.49937V4.93687C4.56875 5.03141 4.49141 5.10875 4.39687 5.10875H0.959375C0.864844 5.10875 0.7875 5.03141 0.7875 4.93687V1.49937C0.7875 1.40484 0.864844 1.3275 0.959375 1.3275H4.39687C4.49141 1.3275 4.56875 1.40484 4.56875 1.49937ZM0.0999999 1.3275V5.10875C0.0999999 5.48795 0.408301 5.79625 0.7875 5.79625H4.56875C4.94795 5.79625 5.25625 5.48795 5.25625 5.10875V1.3275C5.25625 0.9483 4.94795 0.639999 4.56875 0.639999H0.7875C0.408301 0.639999 0.0999999 0.9483 0.0999999 1.3275Z"}),G("path",{fill:t,stroke:t,"stroke-width":"0.1",d:"M4.56875 7.65938V11.0969C4.56875 11.1914 4.49141 11.2688 4.39687 11.2688H0.959375C0.864844 11.2688 0.7875 11.1914 0.7875 11.0969V7.65938C0.7875 7.56485 0.864844 7.4875 0.959375 7.4875H4.39687C4.49141 7.4875 4.56875 7.56485 4.56875 7.65938ZM0.0999999 7.4875V11.2688C0.0999999 11.648 0.408301 11.9563 0.7875 11.9563H4.56875C4.94795 11.9563 5.25625 11.648 5.25625 11.2688V7.4875C5.25625 7.1083 4.94795 6.8 4.56875 6.8H0.7875C0.408301 6.8 0.0999999 7.1083 0.0999999 7.4875Z"}),G("path",{fill:t,stroke:t,"stroke-width":"0.1",d:"M10.7688 7.65938V11.0969C10.7688 11.1914 10.6914 11.2688 10.5969 11.2688H7.15938C7.06484 11.2688 6.9875 11.1914 6.9875 11.0969V7.65938C6.9875 7.56485 7.06484 7.4875 7.15938 7.4875H10.5969C10.6914 7.4875 10.7688 7.56485 10.7688 7.65938ZM6.3 7.4875V11.2688C6.3 11.648 6.6083 11.9563 6.9875 11.9563H10.7688C11.1479 11.9563 11.4562 11.648 11.4562 11.2688V7.4875C11.4562 7.1083 11.1479 6.8 10.7688 6.8H6.9875C6.6083 6.8 6.3 7.1083 6.3 7.4875Z"})]})}function wR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M6.85959 7.73697C6.85959 7.7359 6.85959 7.73483 6.85959 7.73376V7.73268V7.72947C6.85966 6.39936 7.20375 5.09188 7.85844 3.93405C8.51314 2.77623 9.45617 1.80742 10.5959 1.12175C10.7906 1.00421 11.0241 0.968833 11.2449 1.02341C11.4657 1.07798 11.6558 1.21803 11.7733 1.41275C11.8909 1.60747 11.9262 1.84091 11.8717 2.06171C11.8171 2.28251 11.677 2.47259 11.4823 2.59013C10.4645 3.20304 9.65106 4.10375 9.1447 5.17856C9.66182 5.12084 10.1843 5.22144 10.643 5.46705C11.1017 5.71267 11.4751 6.09173 11.7137 6.55411C11.9524 7.0165 12.0451 7.54042 11.9795 8.05662C11.914 8.57281 11.6933 9.05695 11.3467 9.44503C11.0001 9.83311 10.5438 10.1068 10.0383 10.23C9.53275 10.3532 9.00172 10.3201 8.51543 10.135C8.02913 9.94985 7.61048 9.62149 7.31482 9.19332C7.01916 8.76514 6.86042 8.25731 6.85959 7.73697V7.73697ZM1.47768e-06 7.73697C-4.92561e-07 7.7359 -4.92561e-07 7.73483 1.47768e-06 7.73376V7.73268V7.72947C6.32337e-05 6.39936 0.344155 5.09188 0.998849 3.93405C1.65354 2.77623 2.59658 1.80742 3.73634 1.12175C3.93106 1.00421 4.16449 0.968833 4.3853 1.02341C4.49463 1.05043 4.59756 1.09872 4.68823 1.16552C4.7789 1.23233 4.85552 1.31633 4.91372 1.41275C4.97192 1.50916 5.01056 1.6161 5.02744 1.72745C5.04431 1.8388 5.03909 1.95238 5.01207 2.06171C4.98504 2.17104 4.93675 2.27398 4.86995 2.36464C4.80315 2.45531 4.71914 2.53193 4.62272 2.59013C3.6049 3.20304 2.79147 4.10375 2.2851 5.17856C2.80223 5.12084 3.32469 5.22144 3.78341 5.46705C4.24213 5.71267 4.6155 6.09173 4.85415 6.55411C5.09279 7.0165 5.18547 7.54042 5.11994 8.05662C5.0544 8.57281 4.83373 9.05695 4.48711 9.44503C4.14049 9.83311 3.68425 10.1068 3.1787 10.23C2.67316 10.3532 2.14213 10.3201 1.65584 10.135C1.16954 9.94985 0.750884 9.62149 0.455223 9.19332C0.159563 8.76514 0.000825696 8.25731 1.47768e-06 7.73697V7.73697Z"})})}function xR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 9",style:n,children:G("path",{fill:t,d:"M3 8.071V9.071H0V8.071H3ZM7.52 8.071V9.071H4.52V8.071H7.52ZM12 8.071V9.071H9V8.071H12ZM1 4.071V5.071H0V4.071H1ZM3.22 4.071V5.071H2.22V4.071H3.22ZM5.332 4.071V5.071H4.332V4.071H5.332ZM7.521 4.071V5.071H6.521V4.071H7.521ZM9.718 4.071V5.071H8.718V4.071H9.718ZM12 4.071V5.071H11V4.071H12ZM12 0.0709991V1.071H0V0.0709991H12Z"})})}function SR({width:e=12,fill:t=kf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,stroke:t,"stroke-width":"0.2",d:"M10.06 0.200009C9.09902 0.200009 8.32 0.972591 8.32 1.92562C8.32 2.1073 8.34838 2.28237 8.40087 2.44683L3.53916 5.12545L3.82083 5.62827L8.66614 2.95869C8.98348 3.37913 9.48969 3.65124 10.06 3.65124C11.021 3.65124 11.8 2.87866 11.8 1.92562C11.8 0.972591 11.021 0.200009 10.06 0.200009ZM10.06 3.07604C9.42036 3.07604 8.89999 2.55997 8.89999 1.92562C8.89999 1.29128 9.42036 0.77521 10.06 0.77521C10.6996 0.77521 11.22 1.29128 11.22 1.92562C11.22 2.55997 10.6996 3.07604 10.06 3.07604Z"}),G("path",{fill:t,stroke:t,"stroke-width":"0.2",d:"M8.87728 7.15329C8.00459 7.15329 7.24344 7.62656 6.84031 8.32838L3.93205 6.75849C3.95735 6.63506 3.97007 6.50942 3.97001 6.38346C3.97001 5.74419 3.64637 5.17995 3.1528 4.84285L4.13358 2.55983C4.37878 2.52389 4.61492 2.41243 4.80366 2.22525C5.27082 1.76195 5.27082 1.01079 4.80366 0.547477C4.57008 0.315828 4.26393 0.199997 3.95779 0.199997C3.65165 0.199997 3.3455 0.315828 3.11192 0.547477C2.64476 1.01078 2.64476 1.76194 3.11192 2.22525C3.23221 2.34474 3.37693 2.43726 3.53632 2.49658L2.61387 4.58875C2.44205 4.53908 2.26397 4.51392 2.085 4.51404C1.04395 4.51404 0.199997 5.35101 0.199997 6.38346C0.199997 7.41592 1.04395 8.25289 2.085 8.25289C2.7897 8.25289 3.404 7.86931 3.72744 7.30125L6.61753 8.86229C6.56235 9.06249 6.53446 9.26911 6.53457 9.47664C6.53457 10.7598 7.58345 11.8 8.87729 11.8C10.1711 11.8 11.22 10.7598 11.22 9.47664C11.22 8.19349 10.1711 7.15329 8.87728 7.15329ZM4.04246 2.57273L4.03664 2.56985C4.04044 2.56961 4.04424 2.56932 4.04806 2.56904L4.04246 2.57273ZM3.52202 0.954214C3.63842 0.838779 3.79317 0.77521 3.95778 0.77521C4.12239 0.77521 4.27714 0.838779 4.39352 0.954214C4.63379 1.1925 4.63379 1.58023 4.39352 1.81852C4.27713 1.93395 4.12237 1.99752 3.95776 1.99752C3.79316 1.99752 3.6384 1.93395 3.52202 1.81852C3.28175 1.58023 3.28175 1.1925 3.52202 0.954214ZM2.085 7.67769C1.36542 7.67769 0.779991 7.0971 0.779991 6.38348C0.779991 5.66985 1.36541 5.08927 2.085 5.08927C2.80459 5.08927 3.39001 5.66985 3.39001 6.38348C3.39001 7.0971 2.80458 7.67769 2.085 7.67769ZM10.1237 10.7128C9.79078 11.0429 9.34811 11.2248 8.87728 11.2248C8.40644 11.2248 7.96378 11.0429 7.63085 10.7128C7.29792 10.3826 7.11455 9.94358 7.11455 9.47663C7.11455 9.00969 7.2979 8.57068 7.63085 8.2405C7.96378 7.91032 8.40644 7.72849 8.87728 7.72849C9.34811 7.72849 9.79078 7.91032 10.1237 8.2405C10.4566 8.57068 10.64 9.00969 10.64 9.47663C10.64 9.94358 10.4566 10.3826 10.1237 10.7128Z"})]})}function ER({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 10",style:n,children:G("path",{fill:t,d:"M7.19318 0.886361L8.21591 2.16477H11.1136V8.55682H0.886364V2.16477H3.57102L4.59375 0.886361H7.19318ZM7.59801 0.0340881H4.18892L3.16619 1.3125H0.886364C0.417614 1.3125 0.0340909 1.69602 0.0340909 2.16477V8.55682C0.0340909 9.02557 0.417614 9.40909 0.886364 9.40909H11.1136C11.5824 9.40909 11.9659 9.02557 11.9659 8.55682V2.16477C11.9659 1.69602 11.5824 1.3125 11.1136 1.3125H8.62074L7.59801 0.0340881ZM6 2.59091C4.5831 2.59091 3.44318 3.73082 3.44318 5.14772C3.44318 6.56463 4.5831 7.70454 6 7.70454C7.4169 7.70454 8.55682 6.56463 8.55682 5.14772C8.55682 3.73082 7.4169 2.59091 6 2.59091ZM6 6.85227C5.0625 6.85227 4.29545 6.08522 4.29545 5.14772C4.29545 4.21022 5.0625 3.44318 6 3.44318C6.9375 3.44318 7.70455 4.21022 7.70455 5.14772C7.70455 6.08522 6.9375 6.85227 6 6.85227Z"})})}function kR({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 11",style:n,children:G("path",{fill:t,stroke:t,"stroke-width":"0.1",d:"M10.8388 10.1735H2.76736C2.13064 10.1735 1.61429 9.65715 1.61429 9.02043H1.15307C0.516343 9.02043 0 8.50408 0 7.86736V1.17957C0 0.542852 0.516343 0.0265083 1.15307 0.0265083H9.45515C10.0919 0.0265083 10.6082 0.542852 10.6082 1.17957V1.6408H10.8388C11.4755 1.6408 11.9919 2.15714 11.9919 2.79387V9.02043C11.9919 9.65715 11.4755 10.1735 10.8388 10.1735ZM9.91637 1.41019C9.91637 1.02806 9.60666 0.718348 9.22453 0.718348H1.38368C1.00155 0.718348 0.69184 1.02806 0.69184 1.41019V7.63675C0.69184 8.01887 1.00155 8.32859 1.38368 8.32859H1.61429V2.79387C1.61429 2.15714 2.13064 1.6408 2.76736 1.6408H9.91637V1.41019ZM11.3001 3.02448C11.3001 2.64236 10.9903 2.33264 10.6082 2.33264H2.99797C2.61585 2.33264 2.30613 2.64236 2.30613 3.02448V8.78981C2.30613 9.17194 2.61585 9.48165 2.99797 9.48165H10.6082C10.9903 9.48165 11.3001 9.17194 11.3001 8.78981V3.02448Z"})})}function DR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},children:[G("path",{fill:t,d:"M6.54546 0H5.45455V12H6.54546V0Z"}),G("path",{fill:t,d:"M12 5.45453H0V6.54544H12V5.45453Z"}),G("path",{fill:t,d:"M0 0H12V12H0V0ZM1.09091 1.09091V10.9091H10.9091V1.09091H1.09091Z"})]})}const IR="M1.09091 5.45455H5.45455V1.09091H1.09091V5.45455ZM1.09091 6.54545V10.9091H5.45455V6.54545H1.09091ZM10.9091 5.45455V1.09091H6.54545V5.45455H10.9091ZM10.9091 6.54545H6.54545V10.9091H10.9091V6.54545ZM0 0H12V12H0V0Z";function NR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},children:[G("path",{fill:t,d:IR}),G("path",{d:"M10.9091 5.45453H1.09091V6.54544H10.9091V5.45453Z",fill:"#D8D8D8"}),G("path",{d:"M6.54545 10.9091L6.54545 1.09088H5.45455L5.45455 10.9091H6.54545Z",fill:"#D8D8D8"})]})}function LR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},fill:"none",children:[G("path",{fill:t,d:IR}),G("path",{d:"M11.4545 0.545471H0.545456V11.4546H11.4545V0.545471Z",stroke:"#D8D8D8"})]})}function BR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},fill:"none",children:[G("path",{fill:t,d:IR}),G("path",{d:"M11.4545 0.545471H0.545456V11.4546H11.4545V0.545471Z",stroke:"#D8D8D8"}),G("path",{d:"M10.9091 5.45459H1.09091V6.5455H10.9091V5.45459Z",fill:"#D8D8D8"}),G("path",{d:"M6.54546 10.9091L6.54546 1.09094H5.45455L5.45455 10.9091H6.54546Z",fill:"#D8D8D8"})]})}function TR({width:e=12,fill:t="#D8D8D8",style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},fill:"none",children:[G("path",{d:"M11.4545 0.545471H0.545456V11.4546H11.4545V0.545471Z",stroke:t}),G("path",{d:"M10.9091 5.45459H1.09091V6.5455H10.9091V5.45459Z",fill:t}),G("path",{d:"M6.54546 10.9091L6.54546 1.09094H5.45455L5.45455 10.9091H6.54546Z",fill:t})]})}function AR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},children:[G("path",{fill:"#D8D8D8",d:IR}),G("path",{d:"M1.09091 0H0V12H1.09091V0Z",fill:t})]})}function MR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},children:[G("path",{fill:"#D8D8D8",d:IR}),G("path",{d:"M12 0H10.9091V12H12V0Z",fill:t})]})}function OR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},children:[G("path",{fill:"#D8D8D8",d:IR}),G("path",{d:"M12 1.09091V0L0 0V1.09091L12 1.09091Z",fill:t})]})}function RR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:{...n,borderRadius:1.5},children:[G("path",{fill:"#D8D8D8",d:IR}),G("path",{d:"M12 12V10.9091H0V12H12Z",fill:t})]})}function PR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M11.5767 0.00982666H7.62563C7.19196 0.00982666 6.83916 0.377435 6.83916 0.829273V2.95202C6.83916 3.18583 7.0287 3.37535 7.26249 3.37535C7.49628 3.37535 7.68583 3.18583 7.68583 2.95202V0.856493H11.1533V10.9035H7.72426V8.81248C7.72426 8.57868 7.53472 8.38914 7.30093 8.38914C7.06714 8.38914 6.8776 8.57868 6.8776 8.81248V10.9307C6.8776 11.3826 7.2304 11.7502 7.66407 11.7502H11.5767C11.8105 11.7502 12 11.5607 12 11.3269V0.43316C12 0.199353 11.8105 0.00982666 11.5767 0.00982666Z"}),G("path",{fill:t,d:"M7.76304 7.64502C7.84572 7.72768 7.95404 7.76902 8.06239 7.76902C8.17073 7.76902 8.27907 7.72767 8.36173 7.64504C8.52706 7.47971 8.52706 7.21167 8.36175 7.04634L7.66439 6.34897H9.62314C9.85693 6.34897 10.0465 6.15943 10.0465 5.92564C10.0465 5.69185 9.85693 5.50231 9.62314 5.50231H7.66439L8.39436 4.77234C8.55968 4.60701 8.55968 4.33897 8.39436 4.17366C8.22905 4.00834 7.96099 4.00834 7.79568 4.17366L6.34304 5.6263C6.33477 5.63464 6.32683 5.64332 6.31925 5.65229C6.3067 5.6671 6.29517 5.68275 6.28476 5.69913L6.28318 5.70167C6.27258 5.71862 6.26321 5.7363 6.25514 5.75459L6.25463 5.75576C6.24663 5.77403 6.23993 5.79285 6.2346 5.81207C6.23436 5.81291 6.23415 5.81375 6.23392 5.81459C6.2289 5.8331 6.22514 5.85194 6.22267 5.87096C6.22243 5.87282 6.22222 5.8747 6.222 5.87658C6.22101 5.88507 6.22023 5.89357 6.21975 5.90209C6.21971 5.90294 6.21961 5.9038 6.21957 5.90464C6.21915 5.91357 6.21902 5.92252 6.21917 5.93145C6.2192 5.93391 6.21927 5.93636 6.21934 5.93883C6.21961 5.94741 6.22006 5.95598 6.22084 5.96452C6.2209 5.96505 6.22091 5.9656 6.22095 5.96614C6.22206 5.97731 6.2236 5.98843 6.22558 5.99948C6.22899 6.0188 6.23374 6.03786 6.23979 6.05652L6.24045 6.05857C6.24701 6.07843 6.25503 6.09779 6.26446 6.11646L6.2646 6.11673C6.26931 6.12605 6.27436 6.13523 6.27982 6.14425L6.27987 6.14431C6.28483 6.15252 6.29014 6.16058 6.29571 6.16852C6.29645 6.16958 6.29717 6.17064 6.29791 6.17168C6.30343 6.1794 6.3092 6.18698 6.31531 6.19439C6.3162 6.19547 6.31715 6.19649 6.31805 6.19758C6.32478 6.20559 6.33181 6.21335 6.33912 6.22084C6.34044 6.2222 6.34169 6.22361 6.34303 6.22495L7.76304 7.64502ZM4.69907 8.38913C4.46526 8.38913 4.27574 8.57867 4.27574 8.81246V10.9035H0.846666V0.856479H4.31416V2.95201C4.31416 3.18581 4.5037 3.37534 4.73749 3.37534C4.97129 3.37534 5.16083 3.18581 5.16083 2.95201V0.829273C5.16083 0.377421 4.80802 0.00982666 4.37436 0.00982666H0.423333C0.18954 0.00982666 0 0.199353 0 0.43316V11.3269C0 11.5607 0.18954 11.7502 0.423333 11.7502H4.33593C4.7696 11.7502 5.1224 11.3826 5.1224 10.9307V8.81246C5.1224 8.57865 4.93288 8.38913 4.69907 8.38913Z"}),G("path",{fill:t,d:"M5.78042 5.90467C5.78037 5.90382 5.78028 5.90296 5.78023 5.90211C5.77975 5.89359 5.779 5.88508 5.77799 5.8766C5.77776 5.87472 5.77757 5.87286 5.77731 5.87098C5.77215 5.83127 5.76138 5.79248 5.74534 5.75578L5.74483 5.75461C5.73676 5.73633 5.72739 5.71865 5.71679 5.70171L5.71519 5.69915C5.70479 5.68277 5.69327 5.66712 5.68072 5.65232C5.67932 5.65067 5.6779 5.64902 5.67647 5.64737C5.6702 5.64013 5.66368 5.63311 5.65693 5.62631L4.20429 4.17367C4.03896 4.00835 3.77094 4.00836 3.60561 4.17367C3.44029 4.33898 3.4403 4.60702 3.60561 4.77235L4.33559 5.50232H2.37687C2.14308 5.50232 1.95354 5.69186 1.95354 5.92565C1.95354 6.15944 2.14308 6.34898 2.37687 6.34898H4.33562L3.63827 7.04635C3.47294 7.21168 3.47295 7.47972 3.63827 7.64503C3.72093 7.72769 3.82926 7.76903 3.9376 7.76903C4.04595 7.76903 4.15428 7.72769 4.23694 7.64503L5.65696 6.22499C5.65828 6.22366 5.6595 6.22228 5.6608 6.22094C5.66809 6.21345 5.67511 6.2057 5.68184 6.1977C5.68277 6.19658 5.68376 6.19551 5.68467 6.1944C5.69077 6.18699 5.69654 6.17941 5.70206 6.17171L5.70423 6.16859C5.71585 6.15206 5.72627 6.13471 5.7354 6.11669L5.73543 6.11662C5.74492 6.09786 5.75298 6.07843 5.75955 6.05846L5.76011 6.05671C5.7668 6.03613 5.7719 6.01506 5.77536 5.99369C5.77688 5.98455 5.7781 5.97535 5.77902 5.96612L5.77912 5.96465C5.77991 5.95605 5.78036 5.94742 5.78063 5.93879C5.7807 5.93636 5.78077 5.93393 5.7808 5.93149C5.78094 5.92257 5.78087 5.91361 5.78042 5.90467Z"})]})}function FR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 12 12",style:n,children:[G("path",{fill:t,d:"M9.28144 9.64071V10.5389C9.28144 10.5782 9.27369 10.6172 9.25865 10.6535C9.2436 10.6898 9.22155 10.7228 9.19374 10.7506C9.16594 10.7784 9.13294 10.8005 9.09661 10.8155C9.06029 10.8306 9.02135 10.8383 8.98204 10.8383H1.1976C1.15829 10.8383 1.11935 10.8306 1.08303 10.8155C1.0467 10.8005 1.0137 10.7784 0.985896 10.7506C0.958094 10.7228 0.93604 10.6898 0.920994 10.6535C0.905948 10.6172 0.898204 10.5782 0.898204 10.5389V1.25748C0.898204 1.21816 0.905948 1.17923 0.920994 1.1429C0.93604 1.10658 0.958094 1.07357 0.985896 1.04577C1.0137 1.01797 1.0467 0.995916 1.08303 0.98087C1.11935 0.965823 1.15829 0.958079 1.1976 0.958079H8.98204C9.06144 0.958079 9.1376 0.989623 9.19374 1.04577C9.24989 1.10192 9.28144 1.17807 9.28144 1.25748V2.15568C9.28144 2.195 9.28918 2.23393 9.30423 2.27026C9.31927 2.30658 9.34133 2.33959 9.36913 2.36739C9.39693 2.39519 9.42994 2.41725 9.46626 2.43229C9.50259 2.44734 9.54152 2.45509 9.58084 2.45509H9.88024C9.91956 2.45509 9.95849 2.44734 9.99481 2.43229C10.0311 2.41725 10.0641 2.39519 10.0919 2.36739C10.1197 2.33959 10.1418 2.30658 10.1568 2.27026C10.1719 2.23393 10.1796 2.195 10.1796 2.15568V0.958079C10.1796 0.719861 10.085 0.491399 9.91656 0.322953C9.74812 0.154507 9.51965 0.0598755 9.28144 0.0598755H0.898204C0.659985 0.0598755 0.431524 0.154507 0.263078 0.322953C0.0946318 0.491399 0 0.719861 0 0.958079V10.8383C0 11.0765 0.0946318 11.305 0.263078 11.4734C0.431524 11.6419 0.659985 11.7365 0.898204 11.7365H9.28144C9.51965 11.7365 9.74812 11.6419 9.91656 11.4734C10.085 11.305 10.1796 11.0765 10.1796 10.8383V9.64071C10.1796 9.56131 10.1481 9.48515 10.0919 9.42901C10.0358 9.37286 9.95965 9.34131 9.88024 9.34131H9.58084C9.54152 9.34131 9.50259 9.34906 9.46626 9.3641C9.42994 9.37915 9.39693 9.4012 9.36913 9.42901C9.34133 9.45681 9.31927 9.48981 9.30423 9.52614C9.28918 9.56246 9.28144 9.6014 9.28144 9.64071Z"}),G("path",{fill:t,d:"M6.69821 10.8383V0.658691H5.8V10.8383H6.69821Z"}),G("path",{fill:t,d:"M11.976 6.0479V5.7485C11.976 5.66909 11.9445 5.59294 11.8884 5.53679C11.8322 5.48064 11.7561 5.4491 11.6766 5.4491H7.78443C7.74512 5.4491 7.70618 5.45684 7.66986 5.47189C7.63353 5.48693 7.60053 5.50899 7.57272 5.53679C7.54492 5.56459 7.52287 5.5976 7.50782 5.63392C7.49278 5.67025 7.48503 5.70918 7.48503 5.7485V6.0479C7.48503 6.08722 7.49278 6.12615 7.50782 6.16248C7.52287 6.1988 7.54492 6.23181 7.57272 6.25961C7.60053 6.28741 7.63353 6.30946 7.66986 6.32451C7.70618 6.33956 7.74512 6.3473 7.78443 6.3473H11.6766C11.716 6.3473 11.7549 6.33956 11.7912 6.32451C11.8275 6.30946 11.8606 6.28741 11.8884 6.25961C11.9162 6.23181 11.9382 6.1988 11.9533 6.16248C11.9683 6.12615 11.976 6.08722 11.976 6.0479Z"}),G("path",{fill:t,d:"M5.1 6.04881V5.74941C5.1 5.67001 5.07471 5.59385 5.02971 5.5377C4.9847 5.48156 4.92365 5.45001 4.86 5.45001H1.74C1.70848 5.45001 1.67727 5.45776 1.64816 5.4728C1.61904 5.48785 1.59258 5.5099 1.57029 5.5377C1.54801 5.56551 1.53033 5.59851 1.51827 5.63484C1.50621 5.67116 1.5 5.7101 1.5 5.74941V6.04881C1.5 6.08813 1.50621 6.12707 1.51827 6.16339C1.53033 6.19972 1.54801 6.23272 1.57029 6.26052C1.59258 6.28833 1.61904 6.31038 1.64816 6.32543C1.67727 6.34047 1.70848 6.34822 1.74 6.34822H4.86C4.89152 6.34822 4.92273 6.34047 4.95184 6.32543C4.98096 6.31038 5.00742 6.28833 5.02971 6.26052C5.05199 6.23272 5.06967 6.19972 5.08173 6.16339C5.09379 6.12707 5.1 6.08813 5.1 6.04881Z"}),G("path",{fill:t,d:"M10.1796 7.84433V3.95211C10.1796 3.87271 10.1481 3.79655 10.0919 3.7404C10.0358 3.68425 9.95964 3.65271 9.88024 3.65271H9.58083C9.54152 3.65271 9.50258 3.66045 9.46626 3.6755C9.42993 3.69055 9.39693 3.7126 9.36913 3.7404C9.34132 3.7682 9.31927 3.80121 9.30422 3.83754C9.28918 3.87386 9.28143 3.91279 9.28143 3.95211V7.84433C9.28143 7.88364 9.28918 7.92258 9.30422 7.9589C9.31927 7.99523 9.34132 8.02823 9.36913 8.05604C9.39693 8.08384 9.42993 8.10589 9.46626 8.12094C9.50258 8.13598 9.54152 8.14373 9.58083 8.14373H9.88024C9.91955 8.14373 9.95849 8.13598 9.99481 8.12094C10.0311 8.10589 10.0641 8.08384 10.0919 8.05604C10.1197 8.02823 10.1418 7.99523 10.1568 7.9589C10.1719 7.92258 10.1796 7.88364 10.1796 7.84433Z"})]})}function HR({width:e=12,fill:t=Lf,style:n}){return X("svg",{width:e,viewBox:"0 0 11 12",style:n,children:[G("path",{fill:t,d:"M0.912913 11.9546C0.74983 11.9312 0.594394 11.8669 0.459527 11.7671C0.323939 11.6684 0.212558 11.537 0.134639 11.3837C0.0510982 11.2203 0.00932789 11.0447 0.00932789 10.857V1.56036C0.00932789 1.3558 0.0467691 1.15979 0.121699 0.972446C0.193135 0.792992 0.296961 0.63 0.427366 0.492597C0.557233 0.354624 0.711284 0.244772 0.880895 0.169191C1.05662 0.0902281 1.24565 0.0497823 1.43657 0.0502978H8.76306C8.95645 0.0502978 9.14166 0.0899121 9.31873 0.169191C9.48835 0.244765 9.6424 0.354618 9.77226 0.492597C9.90266 0.630001 10.0065 0.792992 10.0779 0.972446C10.1526 1.15836 10.1908 1.35837 10.1903 1.56036V10.8539C10.1903 11.0419 10.1484 11.2177 10.0645 11.3813C9.98632 11.5349 9.87457 11.6664 9.73858 11.765C9.60334 11.8647 9.44753 11.9288 9.28414 11.9518C9.10988 11.9769 8.93961 11.9562 8.77338 11.8897L5.12274 10.4287L1.42291 11.8942C1.25678 11.9599 1.0868 11.9801 0.912913 11.9546ZM5.29192 9.42011L9.10997 10.948C9.14114 10.9605 9.17039 10.9567 9.19775 10.9367C9.22511 10.9167 9.23881 10.8891 9.23881 10.8539V1.56036C9.239 1.49423 9.22678 1.42872 9.20286 1.36762C9.17894 1.30652 9.1438 1.25106 9.09946 1.20444C9.05538 1.15756 9.00295 1.12039 8.94521 1.09509C8.88747 1.06978 8.82556 1.05684 8.76306 1.05701H1.43657C1.37407 1.05683 1.31215 1.06976 1.25441 1.09507C1.19666 1.12038 1.14424 1.15755 1.10017 1.20444C1.05585 1.25107 1.02071 1.30654 0.996792 1.36763C0.972873 1.42873 0.960647 1.49424 0.96082 1.56036V10.857C0.96082 10.8922 0.974474 10.9198 1.00173 10.9398C1.02904 10.9598 1.05825 10.9637 1.08932 10.9513L5.12446 9.35307L5.29192 9.42011Z"}),G("path",{fill:t,d:"M3.33974 3.5235C3.33974 3.24549 3.55273 3.02014 3.81549 3.02014H6.28937C6.55212 3.02014 6.76511 3.24549 6.76511 3.5235C6.76511 3.8015 6.55212 4.02685 6.28937 4.02685H3.81549C3.55273 4.02685 3.33974 3.8015 3.33974 3.5235Z"})]})}function _R({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 11 12",style:n,children:G("path",{fill:t,d:"M4.73834 0.135672C4.98128 0.0651275 5.23872 0.0651275 5.48166 0.135672L9.17792 1.20842C9.77023 1.38032 10.1796 1.9379 10.1796 2.57307V6.68842C10.1796 7.68674 9.78282 8.64135 9.08193 9.32925L8.9811 9.42786L8.78245 9.61939L8.58808 9.80358L8.39819 9.98004L8.21232 10.1491L8.03064 10.3107L7.85297 10.4649C7.63533 10.6522 7.41208 10.8327 7.18356 11.006L7.02598 11.1226C6.24825 11.6865 5.6168 11.969 5.11009 11.969C4.60338 11.969 3.97193 11.6865 3.19421 11.1226L3.03662 11.006C2.80808 10.8327 2.58484 10.6522 2.36721 10.4649L2.18954 10.3107L2.00786 10.1491L1.82199 9.98004L1.6321 9.80358L1.43773 9.61939L1.33891 9.52451L1.13816 9.32916C0.43736 8.64135 0.0406055 7.68674 0.0406055 6.68842V2.57307C0.0406055 1.9379 0.449953 1.38032 1.04226 1.20842L4.73843 0.135858L4.73834 0.135672ZM5.23839 1.02832C5.15449 1.004 5.0656 1.004 4.9817 1.02832L1.28544 2.10153C1.08067 2.16088 0.939053 2.35363 0.938962 2.57316V6.68879C0.938962 7.43297 1.23479 8.14442 1.7572 8.65716L1.85018 8.74795L2.03314 8.92442L2.21181 9.09372L2.38637 9.25623L2.55655 9.41149L2.72235 9.55958C2.74982 9.58377 2.77674 9.60758 2.80402 9.63084L2.96316 9.7687L3.11819 9.8993L3.26876 10.0225C3.3173 10.0617 3.36612 10.1006 3.41512 10.1391L3.55629 10.2482L3.62564 10.3005L3.76041 10.3991L3.89026 10.4907C3.91125 10.5053 3.93242 10.5196 3.95368 10.5339L4.07687 10.615C4.51961 10.8993 4.86691 11.0416 5.11 11.0416C5.35309 11.0416 5.70066 10.8993 6.14313 10.615L6.26632 10.5339C6.28712 10.52 6.30848 10.5055 6.32974 10.4907L6.45986 10.399L6.52665 10.3506L6.66344 10.2482C6.6868 10.2307 6.71016 10.2131 6.7337 10.1945L6.87751 10.0816C6.90187 10.0626 6.92651 10.0426 6.95115 10.0227L7.1018 9.8993L7.25693 9.7687L7.33595 9.70079L7.49765 9.55958L7.58005 9.48646L7.74813 9.33483L7.92041 9.17586L8.09698 9.01L8.27793 8.83697L8.4628 8.65735C8.9853 8.14451 9.28104 7.43288 9.28104 6.68851V2.57316C9.28104 2.35363 9.1396 2.1607 8.93483 2.10125L5.23857 1.0287L5.23839 1.02832ZM6.92131 4.69651C7.00052 4.76904 7.04971 4.86955 7.05893 4.97768C7.06815 5.08581 7.0367 5.19346 6.97095 5.27883L6.94476 5.30935L5.14467 7.22404C5.07717 7.29626 4.98641 7.34126 4.88901 7.35081C4.79161 7.36036 4.6941 7.33382 4.61433 7.27604L4.58248 7.25056L3.30225 6.11539C3.13562 5.96804 3.11062 5.71167 3.24531 5.53288C3.30952 5.44703 3.40402 5.39006 3.50875 5.37404C3.61348 5.35803 3.72022 5.38424 3.80631 5.44711L3.83761 5.47204L4.8243 6.3473L6.35547 4.71893C6.42847 4.64103 6.52834 4.59513 6.63394 4.59095C6.73954 4.58676 6.8426 4.62462 6.92131 4.69651Z"})})}function jR({width:e=12.5,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:{position:"relative",top:-.5,...n},children:G("path",{fill:t,d:"M10.7752 4.08285L6.83432 6.22191C6.47042 6.41717 6.24852 6.80771 6.24852 7.24262V11.3787C6.24852 11.8225 6.68344 12.1154 7.04734 11.9113L10.9882 9.7722C11.3432 9.57694 11.574 9.1864 11.574 8.75149V4.62427C11.574 4.17161 11.1391 3.88759 10.7752 4.08285ZM4.77515 6.21303L0.834324 4.08285C0.470418 3.88759 0.0355072 4.17161 0.0355072 4.6154V8.76924C0.0355072 9.20416 0.257401 9.59469 0.621306 9.78996L4.56213 11.9201C4.92604 12.1154 5.36095 11.8225 5.36095 11.3787V7.23374C5.36095 6.79883 5.13906 6.4083 4.77515 6.21303ZM10.4112 3.1154C10.5976 3.01777 10.6864 2.84913 10.6686 2.68936C10.6864 2.52072 10.5976 2.36096 10.4112 2.26333L6.39941 0.168654C6.2219 0.0710206 6.00888 0.0266418 5.79586 0.0266418C5.58284 0.0266418 5.36983 0.0710206 5.19231 0.168654L1.18048 2.25445C0.994087 2.35209 0.914205 2.52072 0.923081 2.68049C0.914205 2.84913 0.994087 3.01777 1.18048 3.1154L5.19231 5.2012C5.36983 5.29883 5.58284 5.34321 5.79586 5.34321C6.00888 5.34321 6.2219 5.29883 6.39941 5.2012L10.4112 3.1154Z"})})}function WR({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:{borderRadius:1,...n},children:G("path",{fill:t,d:"M1.8462 8.3076H3.6924V10.1538H1.8462V8.3076ZM6.4614 6.4614H7.3848V10.1538H6.4614V6.4614ZM0 12H5.5386V6.4614H0V12ZM0.9228 11.0772V7.3848H4.6152V11.0772H0.9228ZM6.4614 11.0772H8.3076V12H6.4614V11.0772ZM11.0772 8.3076H12V9.231H11.0772V8.3076ZM9.231 6.4614H12V7.3848H9.231V6.4614ZM8.3076 1.8462H10.1538V3.6924H8.3076V1.8462ZM12 0H6.4614V5.5386H12V0ZM11.0772 4.6152H7.3848V0.9228H11.0772V4.6152ZM0 5.5386H5.5386V0H0V5.5386ZM0.9228 0.9228H4.6152V4.6152H0.9228V0.9228ZM11.0772 11.0772H9.231V12H12V10.1538H11.0772V11.0772ZM8.3076 8.3076V10.1538H10.1538V9.231H9.231V8.3076H8.3076ZM1.8462 1.8462H3.6924V3.6924H1.8462V1.8462Z"})})}function zR({width:e=12,fill:t=Lf}){return X("svg",{width:e,viewBox:"0 0 12 12",children:[G("path",{fill:t,d:"M0.5 4C0.225 4 0 3.775 0 3.5V1.25C0 0.55 0.55 0 1.25 0H3.5C3.775 0 4 0.225 4 0.5C4 0.775 3.775 1 3.5 1H1.25C1.125 1 1 1.125 1 1.25V3.5C1 3.775 0.775 4 0.5 4ZM11.5 4C11.225 4 11 3.775 11 3.5V1.25C11 1.125 10.875 1 10.75 1H8.5C8.225 1 8 0.775 8 0.5C8 0.225 8.225 0 8.5 0H10.75C11.45 0 12 0.55 12 1.25V3.5C12 3.775 11.775 4 11.5 4ZM10.75 12H8.5C8.225 12 8 11.775 8 11.5C8 11.225 8.225 11 8.5 11H10.75C10.875 11 11 10.875 11 10.75V8.5C11 8.225 11.225 8 11.5 8C11.775 8 12 8.225 12 8.5V10.75C12 11.45 11.45 12 10.75 12ZM3.5 12H1.25C0.55 12 0 11.45 0 10.75V8.5C0 8.225 0.225 8 0.5 8C0.775 8 1 8.225 1 8.5V10.75C1 10.875 1.125 11 1.25 11H3.5C3.775 11 4 11.225 4 11.5C4 11.775 3.775 12 3.5 12Z"}),G("path",{fill:t,d:"M11.5 6.625H0.5C0.225 6.625 0 6.4 0 6.125C0 5.85 0.225 5.625 0.5 5.625H11.5C11.775 5.625 12 5.85 12 6.125C12 6.4 11.775 6.625 11.5 6.625Z"})]})}function VR({width:e=12,fill:t=kf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M6.00001 0.0245361C2.69051 0.0245361 0.0245209 2.69052 0.0245209 6.00002C0.0245209 9.30952 2.69051 11.9755 6.00001 11.9755C9.30951 11.9755 11.9755 9.30952 11.9755 6.00002C11.9755 2.69052 9.30951 0.0245361 6.00001 0.0245361ZM6.00001 11.0562C3.21145 11.0562 0.943826 8.78858 0.943826 6.00002C0.943826 4.83557 1.34219 3.79369 1.98571 2.93567L9.06436 10.0143C8.20634 10.6578 7.16446 11.0562 6.00001 11.0562ZM9.73851 9.40145L2.59858 2.26151C3.48724 1.43414 4.68233 0.943842 6.00001 0.943842C8.78857 0.943842 11.0562 3.21146 11.0562 6.00002C11.0562 7.31769 10.5659 8.48215 9.73851 9.40145Z"})})}function $R({width:e=12,fill:t=Lf,style:n}){return G("svg",{width:e,viewBox:"0 0 12 12",style:n,children:G("path",{fill:t,d:"M4.32317 3.40853H7.67682V0.512188C7.67682 0.3909 7.725 0.274579 7.81076 0.188816C7.89653 0.103052 8.01285 0.0548706 8.13413 0.0548706C8.25542 0.0548706 8.37174 0.103052 8.45751 0.188816C8.54327 0.274579 8.59145 0.3909 8.59145 0.512188V3.40853H11.4878C11.6091 3.40853 11.7254 3.45672 11.8112 3.54248C11.8969 3.62824 11.9451 3.74456 11.9451 3.86585C11.9451 3.98714 11.8969 4.10346 11.8112 4.18922C11.7254 4.27499 11.6091 4.32317 11.4878 4.32317H8.59145V7.67682H11.4878C11.6091 7.67682 11.7254 7.725 11.8112 7.81076C11.8969 7.89653 11.9451 8.01285 11.9451 8.13413C11.9451 8.25542 11.8969 8.37174 11.8112 8.45751C11.7254 8.54327 11.6091 8.59145 11.4878 8.59145H8.59145V11.4878C8.59145 11.6091 8.54327 11.7254 8.45751 11.8112C8.37174 11.8969 8.25542 11.9451 8.13413 11.9451C8.01285 11.9451 7.89653 11.8969 7.81076 11.8112C7.725 11.7254 7.67682 11.6091 7.67682 11.4878V8.59145H4.32317V11.4878C4.32317 11.6091 4.27499 11.7254 4.18922 11.8112C4.10346 11.8969 3.98714 11.9451 3.86585 11.9451C3.74456 11.9451 3.62824 11.8969 3.54248 11.8112C3.45672 11.7254 3.40853 11.6091 3.40853 11.4878V8.59145H0.512188C0.3909 8.59145 0.274579 8.54327 0.188816 8.45751C0.103052 8.37174 0.0548706 8.25542 0.0548706 8.13413C0.0548706 8.01285 0.103052 7.89653 0.188816 7.81076C0.274579 7.725 0.3909 7.67682 0.512188 7.67682H3.40853V4.32317H0.512188C0.3909 4.32317 0.274579 4.27499 0.188816 4.18922C0.103052 4.10346 0.0548706 3.98714 0.0548706 3.86585C0.0548706 3.74456 0.103052 3.62824 0.188816 3.54248C0.274579 3.45672 0.3909 3.40853 0.512188 3.40853H3.40853V0.512188C3.40853 0.3909 3.45672 0.274579 3.54248 0.188816C3.62824 0.103052 3.74456 0.0548706 3.86585 0.0548706C3.98714 0.0548706 4.10346 0.103052 4.18922 0.188816C4.27499 0.274579 4.32317 0.3909 4.32317 0.512188V3.40853ZM4.32317 4.32317V7.67682H7.67682V4.32317H4.32317Z"})})}function ZR({height:e=(Mf?12.5:12),fill:t=Lf,style:n}){return G("svg",{height:e,viewBox:"0 0 12 10",style:n,children:G("path",{fill:t,d:"M11.4215 8.92809C11.5562 8.92749 11.6859 8.97973 11.7831 9.07379C11.8803 9.16786 11.9375 9.29637 11.9426 9.43218C11.9476 9.568 11.9001 9.70047 11.8102 9.80163C11.7202 9.90278 11.5948 9.96469 11.4605 9.97428L11.4215 9.97558H0.521378C0.386688 9.97619 0.257037 9.92395 0.159817 9.82988C0.0625963 9.73582 0.00541955 9.60731 0.00036585 9.4715C-0.00468785 9.33568 0.0427772 9.20321 0.132734 9.10205C0.22269 9.0009 0.348093 8.93899 0.482449 8.9294L0.521378 8.92809H11.4215ZM11.4215 4.47626C11.5562 4.47565 11.6859 4.52789 11.7831 4.62196C11.8803 4.71602 11.9375 4.84453 11.9426 4.98035C11.9476 5.11616 11.9001 5.24864 11.8102 5.34979C11.7202 5.45094 11.5948 5.51285 11.4605 5.52244L11.4215 5.52375H0.521378C0.386688 5.52436 0.257037 5.47211 0.159817 5.37805C0.0625963 5.28398 0.00541955 5.15547 0.00036585 5.01966C-0.00468785 4.88385 0.0427772 4.75137 0.132734 4.65021C0.22269 4.54906 0.348093 4.48715 0.482449 4.47757L0.521378 4.47626H11.4215ZM11.4215 0.0244193C11.5562 0.0238112 11.6859 0.0760571 11.7831 0.17012C11.8803 0.264183 11.9375 0.392695 11.9426 0.528508C11.9476 0.664322 11.9001 0.796799 11.8102 0.897953C11.7202 0.999107 11.5948 1.06102 11.4605 1.0706L11.4215 1.07191H0.521378C0.386688 1.07252 0.257037 1.02027 0.159817 0.92621C0.0625963 0.832147 0.00541955 0.703634 0.00036585 0.567821C-0.00468785 0.432008 0.0427772 0.299531 0.132734 0.198377C0.22269 0.0972227 0.348093 0.0353137 0.482449 0.0257287L0.521378 0.0244193H11.4215Z"})})}const UR=(e,t)=>t.some((t=>e instanceof t));let qR,YR;const KR=new WeakMap,GR=new WeakMap,XR=new WeakMap;let JR={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return KR.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nP(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function QR(e){JR=e(JR)}function eP(e){return(YR||(YR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(oP(this),t),nP(this.request)}:function(...t){return nP(e.apply(oP(this),t))}}function tP(e){return"function"==typeof e?eP(e):(e instanceof IDBTransaction&&function(e){if(KR.has(e))return;const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{t(),o()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)}));KR.set(e,t)}(e),UR(e,qR||(qR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,JR):e)}function nP(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{t(nP(e.result)),o()},r=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",r)}));return XR.set(t,e),t}(e);if(GR.has(e))return GR.get(e);const t=tP(e);return t!==e&&(GR.set(e,t),XR.set(t,e)),t}const oP=e=>XR.get(e);const iP=["get","getKey","getAll","getAllKeys","count"],rP=["put","add","delete","clear"],lP=new Map;function sP(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(lP.get(t))return lP.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,i=rP.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!i&&!iP.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,i?"readwrite":"readonly");let l=r.store;return o&&(l=l.index(t.shift())),(await Promise.all([l[n](...t),i&&r.done]))[0]};return lP.set(t,r),r}QR((e=>({...e,get:(t,n,o)=>sP(t,n)||e.get(t,n,o),has:(t,n)=>!!sP(t,n)||e.has(t,n)})));const cP=["continue","continuePrimaryKey","advance"],aP={},uP=new WeakMap,dP=new WeakMap,fP={get(e,t){if(!cP.includes(t))return e[t];let n=aP[t];return n||(n=aP[t]=function(...e){uP.set(this,dP.get(this)[t](...e))}),n}};async function*hP(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const n=new Proxy(t,fP);for(dP.set(n,t),XR.set(n,oP(t));t;)yield n,t=await(uP.get(n)||t.continue()),uP.delete(n)}function pP(e,t){return t===Symbol.asyncIterator&&UR(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&UR(e,[IDBIndex,IDBObjectStore])}QR((e=>({...e,get:(t,n,o)=>pP(t,n)?hP:e.get(t,n,o),has:(t,n)=>pP(t,n)||e.has(t,n)})));var vP={exports:{}};!function(e,t){!function(n,o){var i="function",r="undefined",l="object",s="string",c="major",a="model",u="name",d="type",f="vendor",h="version",p="architecture",v="console",g="mobile",m="tablet",y="smarttv",b="wearable",C="embedded",w="Amazon",x="Apple",S="ASUS",E="BlackBerry",k="Browser",D="Chrome",I="Firefox",N="Google",L="Huawei",B="LG",T="Microsoft",A="Motorola",M="Opera",O="Samsung",R="Sharp",P="Sony",F="Xiaomi",H="Zebra",_="Facebook",j="Chromium OS",W="Mac OS",z=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},V=function(e,t){return typeof e===s&&-1!==$(t).indexOf($(e))},$=function(e){return e.toLowerCase()},Z=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===r?e:e.substring(0,500)},U=function(e,t){for(var n,r,s,c,a,u,d=0;d<t.length&&!a;){var f=t[d],h=t[d+1];for(n=r=0;n<f.length&&!a&&f[n];)if(a=f[n++].exec(e))for(s=0;s<h.length;s++)u=a[++r],typeof(c=h[s])===l&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):o:this[c[0]]=u?c[1].call(this,u,c[2]):o:4===c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):o):this[c]=u||o;d+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(V(t[n][i],e))return"?"===n?o:n}else if(V(t[n],e))return"?"===n?o:n;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,h],[/opios[\/ ]+([\w\.]+)/i],[h,[u,M+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[h,[u,M+" GX"]],[/\bopr\/([\w\.]+)/i],[h,[u,M]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[h,[u,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,h],[/\bddg\/([\w\.]+)/i],[h,[u,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[u,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[h,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[h,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[h,[u,"Smart Lenovo "+k]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+k],h],[/\bfocus\/([\w\.]+)/i],[h,[u,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[u,M+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[u,M+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[u,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[h,[u,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+k]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+k],h],[/samsungbrowser\/([\w\.]+)/i],[h,[u,O+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],h],[/metasr[\/ ]?([\d\.]+)/i],[h,[u,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,"Sogou Mobile"],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[u,h],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,_],h],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[h,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[u,D+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,D+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[u,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[h,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[u,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,h],[/(cobalt)\/([\w\.]+)/i],[u,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,$]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",$]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,$]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[f,O],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[f,O],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[a,[f,x],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[f,x],[d,m]],[/(macintosh);/i],[a,[f,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[f,R],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[f,L],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[a,[f,L],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[f,F],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[f,F],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[f,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[a,[f,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[f,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[a,[f,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[f,A],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[f,A],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[f,B],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[f,B],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[f,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[f,"Nokia"],[d,g]],[/(pixel c)\b/i],[a,[f,N],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[f,N],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[f,P],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[f,P],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[f,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[f,w],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[f,w],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[a,f,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[f,E],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[f,S],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[f,S],[d,g]],[/(nexus 9)/i],[a,[f,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[a,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[f,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[f,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[a,[f,"Ulefone"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,a,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,a,[d,m]],[/(surface duo)/i],[a,[f,T],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[f,"Fairphone"],[d,g]],[/(u304aa)/i],[a,[f,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[a,[f,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[a,[f,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[a,[f,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[a,[f,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[f,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[a,[f,"NuVision"],[d,m]],[/\b(k88) b/i],[a,[f,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[a,[f,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[a,[f,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[a,[f,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[a,[f,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],a,[d,m]],[/\b(ns-?\w{0,9}) b/i],[a,[f,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[f,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],a,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],a,[d,g]],[/\b(ph-1) /i],[a,[f,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[f,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[a,[f,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[a,[f,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[a,[f,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[f,a,[d,g]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[f,T],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[f,H],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[f,H],[d,g]],[/smart-tv.+(samsung)/i],[f,[d,y]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[f,O],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,B],[d,y]],[/(apple) ?tv/i],[f,[a,x+" TV"],[d,y]],[/crkey/i],[[a,D+"cast"],[f,N],[d,y]],[/droid.+aft(\w+)( bui|\))/i],[a,[f,w],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[a,[f,R],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[a,[f,P],[d,y]],[/(mitv-\w{5}) bui/i],[a,[f,F],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[f,a,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Z],[a,Z],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,a,[d,v]],[/droid.+; (shield) bui/i],[a,[f,"Nvidia"],[d,v]],[/(playstation [345portablevi]+)/i],[a,[f,P],[d,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[f,T],[d,v]],[/((pebble))app/i],[f,a,[d,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[a,[f,x],[d,b]],[/droid.+; (glass) \d/i],[a,[f,N],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[a,[f,H],[d,b]],[/(quest( \d| pro)?)/i],[a,[f,_],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[d,C]],[/(aeobc)\b/i],[a,[f,w],[d,C]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[a,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,h],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[u,[h,q,Y]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,q,Y],[u,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,W],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,h],[/\(bb(10);/i],[h,[u,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[u,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[u,D+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,j],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,h],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,h]]},G=function(e,t){if(typeof e===l&&(t=e,e=o),!(this instanceof G))return new G(e,t).getResult();var v=typeof n!==r&&n.navigator?n.navigator:o,y=e||(v&&v.userAgent?v.userAgent:""),b=v&&v.userAgentData?v.userAgentData:o,C=t?function(e,t){var n={};for(var o in e)t[o]&&t[o].length%2==0?n[o]=t[o].concat(e[o]):n[o]=e[o];return n}(K,t):K,w=v&&v.userAgent==y;return this.getBrowser=function(){var e={};return e[u]=o,e[h]=o,U.call(e,y,C.browser),e[c]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:o}(e[h]),w&&v&&v.brave&&typeof v.brave.isBrave==i&&(e[u]="Brave"),e},this.getCPU=function(){var e={};return e[p]=o,U.call(e,y,C.cpu),e},this.getDevice=function(){var e={};return e[f]=o,e[a]=o,e[d]=o,U.call(e,y,C.device),w&&!e[d]&&b&&b.mobile&&(e[d]=g),w&&"Macintosh"==e[a]&&v&&typeof v.standalone!==r&&v.maxTouchPoints&&v.maxTouchPoints>2&&(e[a]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[u]=o,e[h]=o,U.call(e,y,C.engine),e},this.getOS=function(){var e={};return e[u]=o,e[h]=o,U.call(e,y,C.os),w&&!e[u]&&b&&b.platform&&"Unknown"!=b.platform&&(e[u]=b.platform.replace(/chrome os/i,j).replace(/macos/i,W)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(e){return y=typeof e===s&&e.length>500?Z(e,500):e,this},this.setUA(y),this};G.VERSION="1.0.38",G.BROWSER=z([u,h,c]),G.CPU=z([p]),G.DEVICE=z([a,f,d,v,g,y,m,b,C]),G.ENGINE=G.OS=z([u,h]),e.exports&&(t=e.exports=G),t.UAParser=G;var X=typeof n!==r&&(n.jQuery||n.Zepto);if(X&&!X.ua){var J=new G;X.ua=J.getResult(),X.ua.get=function(){return J.getUA()},X.ua.set=function(e){J.setUA(e);var t=J.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:HT)}(vP,vP.exports);var gP=vP.exports;const mP=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,yP=e=>{if("string"!=typeof e)throw new TypeError("Invalid argument expected string");const t=e.match(mP);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},bP=e=>"*"===e||"x"===e||"X"===e,CP=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},wP=(e,t)=>{if(bP(e)||bP(t))return 0;const[n,o]=((e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t])(CP(e),CP(t));return n>o?1:n<o?-1:0},xP=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){const o=wP(e[n]||"0",t[n]||"0");if(0!==o)return o}return 0},SP=(e,t,n)=>{DP(n);const o=((e,t)=>{const n=yP(e),o=yP(t),i=n.pop(),r=o.pop(),l=xP(n,o);return 0!==l?l:i&&r?xP(i.split("."),r.split(".")):i||r?i?-1:1:0})(e,t);return EP[n].includes(o)},EP={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},kP=Object.keys(EP),DP=e=>{if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===kP.indexOf(e))throw new Error(`Invalid operator, expected one of ${kP.join("|")}`)},IP="reference",NP="catalog",LP="editor",BP="assets",TP="changelog",AP="bootstrap",MP="segment";const OP=new class{constructor(e){this.name="note",this.version=3,this.db=null,void 0!==e&&(this.name=e)}async open(){return null!==this.db||(this.db=await function(e,t,{blocked:n,upgrade:o,blocking:i,terminated:r}={}){const l=indexedDB.open(e,t),s=nP(l);return o&&l.addEventListener("upgradeneeded",(e=>{o(nP(l.result),e.oldVersion,e.newVersion,nP(l.transaction),e)})),n&&l.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{r&&e.addEventListener("close",(()=>r())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}(this.name,this.version,{upgrade(e){const t={[AP]:()=>{e.createObjectStore(AP,{keyPath:"version",autoIncrement:!0})},[TP]:()=>{e.createObjectStore(TP,{keyPath:"version",autoIncrement:!0})},[IP]:()=>{e.createObjectStore(IP,{keyPath:"id",autoIncrement:!0})},[NP]:()=>{e.createObjectStore(NP,{keyPath:"id",autoIncrement:!0})},[LP]:()=>{e.createObjectStore(LP,{keyPath:"id",autoIncrement:!0})},[BP]:()=>{e.createObjectStore(BP,{keyPath:"id",autoIncrement:!0})},[MP]:()=>{e.createObjectStore(MP,{keyPath:"id",autoIncrement:!0})}};for(const n of e.objectStoreNames)delete t[n];for(const e in t)t[e]()}})),this.db}async set(e,t,n){const o=(await this.open()).transaction(e,"readwrite");if("string"==typeof t){const e=await o.store.put({id:t,data:n});return await o.done,{ok:1,data:e}}const i=Object.keys(t).map((async e=>await o.store.put({id:e,data:t[e]}))),r=await Promise.all(i);return await o.done,{ok:1,data:r}}async get(e,t){const n=(await this.open()).transaction(e,"readonly"),o=n.objectStore(e);if("string"==typeof t){const e=await o.get(t);if("string"==typeof(null==e?void 0:e.data))try{e.data=JSON.parse(e.data)}catch(e){console.warn(e)}return await n.done,(null==e?void 0:e.id)===t?{ok:1,data:e.data}:{ok:0}}const i=t.map((async e=>{const t=await o.get(e);if("string"==typeof(null==t?void 0:t.data))try{t.data=JSON.parse(t.data)}catch(e){console.warn(e)}return t})),r=await Promise.all(i),l={};for(let e=0;e<r.length;e++)void 0!==r[e]&&(l[r[e].id]=r[e].data);return await n.done,{ok:1,data:l}}async getAll(e){const t=(await this.open()).transaction(e,"readonly"),n=await t.objectStore(e).getAll(),o={};for(let e=0;e<n.length;e++){const{id:t,data:i}=n[e];if("string"==typeof i)try{o[t]=JSON.parse(i)}catch(e){console.warn(e)}else o[t]=i}return await t.done,{ok:1,data:o}}async remove(e,t){const n=(await this.open()).transaction(e,"readwrite"),o=n.objectStore(e);if("string"==typeof t)return await o.delete(t),await n.done,{ok:1};const i=t.map((async e=>{await o.delete(e)}));return await Promise.all(i),await n.done,{ok:1}}async setVersion(e,t){const n=(await this.open()).transaction(e,"readwrite"),o=await n.store.put({version:1,data:t});return await n.done,{ok:1,data:o}}async getVersion(e){const t=(await this.open()).transaction(e,"readonly"),n=t.objectStore(e),o=await n.get(1);if("string"==typeof(null==o?void 0:o.data))try{o.data=JSON.parse(o.data)}catch(e){console.warn(e)}return await t.done,o?{ok:1,data:o.data}:{ok:0}}async removeVersion(e){const t=(await this.open()).transaction(e,"readwrite");return await t.objectStore(e).delete(1),await t.done,{ok:1}}async setBootstrap(e){return await this.setVersion(AP,e)}async getBootstrap(){return await this.getVersion(AP)}async removeBootstrap(){return await this.removeVersion(AP)}async setChangelog(e){return await this.setVersion(TP,e)}async getChangelog(){return await this.getVersion(TP)}async removeChangelog(){return await this.removeVersion(TP)}async getAssets(e){const t=(await this.open()).transaction(BP,"readonly"),n=t.objectStore(BP),o=await n.get(e);return await t.done,(null==o?void 0:o.id)===e?{ok:1,data:o.data}:{ok:0}}async setAssets(e,t){const n=(await this.open()).transaction(BP,"readwrite"),o=await n.store.put({id:e,data:t});return await n.done,{ok:1,data:o}}};function RP(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}const PP=new gP.UAParser({browser:[[/(shuli)\/([\w\\.]+)/i],[gP.UAParser.BROWSER.NAME,gP.UAParser.BROWSER.VERSION]]}).getResult();var FP,HP;!function(e){e[e.ONE=0]="ONE",e[e.TWO=1]="TWO"}(FP||(FP={})),function(e){e[e.H=24]="H",e[e.H0=11]="H0",e[e.H1=20]="H1",e[e.H2=18]="H2",e[e.H3=16]="H3",e[e.H4=14]="H4",e[e.H5=13]="H5",e[e.H6=12]="H6"}(HP||(HP={}));const _P="decorate-block-node",jP="reference-block-node",WP="outline-list",zP="toggle-list",VP="div",$P="sheet";function ZP(e){return Array.isArray(null==e?void 0:e.children)}function UP(e){return ZP(e)&&(e.type===VP||e.type===_P||e.type===jP)}function qP(e,t){var n,o;if(!ZP(e))return!1;if(e.type===_P&&(null===(n=e.props)||void 0===n?void 0:n.type)===WP){if(void 0===t)return!0;if((null===(o=e.props)||void 0===o?void 0:o.subclass)===t)return!0}return!1}function YP(e){return ZP(e)&&e.type===$P}function KP(e,t){var n,o;if(!ZP(e))return!1;if(e.type===_P&&(null===(n=e.props)||void 0===n?void 0:n.type)===zP){if(void 0===t)return!0;if((null===(o=e.props)||void 0===o?void 0:o.subclass)===t)return!0}return!1}function GP(e){const t=e.split(".");return{rowIndex:Number(t[0]),columnIndex:Number(t[1])}}const XP={EDITOR:"editor",FILE:"file",NODE:"node",SHEET:"sheet",REFER:"refer",LINK:"link",PANEL:"panel",EMOJI:"emoji",TOGGLE:"toggle",OUTLINE:"outline",SELECTOR:"selector",OPTION:"option",SLASH:"slash",TOOL_BAR:"tool-bar",NONE:"none"};function JP(e){return{type:XP.NODE,path:e}}function QP(e){return{type:XP.TOGGLE,path:e}}function eF(e){return{type:XP.OUTLINE,path:e}}function tF(e){return{type:XP.SHEET,key:e}}function nF(e,...t){return e.child?{...e,child:nF(e.child,...t)}:0===t.length?e:1===t.length?{...e,child:t[0]}:t.length>1?{...e,child:nF(t[0],...t.slice(1))}:e}async function oF(){return"undefined"!=typeof electron?await electron.file.readBootstrap():"undefined"!=typeof WebPro?new Promise((e=>{WebPro.readBootstrap((t=>{if(0===t.ok||!t.data)return void e({ok:0});let n=t.data;"string"==typeof n&&(n=JSON.parse(n)),e({ok:1,data:n})}))})):await OP.getBootstrap()}async function iF(){if("undefined"!=typeof electron){const{version:e}=PP.browser;if(e&&SP(e,"0.1.0",">=")){const e=await electron.file.readChangelog();if(0===e.ok){const e=await OP.getChangelog();if(1===e.ok&&e.data)return await OP.removeChangelog(),e}return e}}return"undefined"!=typeof WebPro?new Promise((e=>{WebPro.readChangelog((t=>{if(0===t.ok||!t.data)return void e({ok:0});let n=t.data;"string"==typeof n&&(n=JSON.parse(n)),e({ok:1,data:n})}))})):await OP.getChangelog()}async function rF(e,t){if("undefined"!=typeof electron){const n=await electron.file.writeEditor(e,t);if(1===n.ok)return n}if("undefined"!=typeof WebPro){const n=JSON.stringify(t);return new Promise((t=>{WebPro.writeEditor(e,n,(e=>{t(e)}))}))}const n={ok:0};try{await OP.set(LP,e,t),n.ok=1}catch(e){console.error("setEditor noteDB.set(EDITOR: ",e)}return n}async function lF(e){if("undefined"!=typeof electron){const{version:t}=PP.browser;let n="uint8Array";t&&SP(t,"0.0.9","<=")&&(n="string");const o=await electron.file.readEditor(e,n);if(sc(o.data))try{o.data=JSON.parse(o.data)}catch(e){}return o}return"undefined"!=typeof WebPro?new Promise((t=>{WebPro.readEditor(e,(e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})}))})):await OP.get(LP,e)}async function sF(){if("undefined"!=typeof electron){const e=await electron.file.readEditorIds();return 1===e.ok&&e.data&&(e.data=Zc(e.data)),e}if("undefined"!=typeof WebPro)return new Promise((e=>{WebPro.readEditorIds((t=>{if(0===t.ok||!t.data)return void e({ok:0});let n=t.data;"string"==typeof n&&(n=JSON.parse(n)),e({ok:1,data:n})}))}));const e=await OP.getAll(LP);if(1===e.ok&&e.data){return{ok:1,data:Zc(Object.keys(e.data))}}return{ok:0}}async function cF(e){return"undefined"!=typeof electron?await electron.file.unlinkEditor(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.unlinkEditor(e,(e=>{t(e)}))})):await OP.remove(LP,e)}async function aF(e,t){if("undefined"!=typeof electron){const n=await electron.file.writeSegment(e,t);if(1===n.ok)return n}if("undefined"!=typeof WebPro){const n=JSON.stringify(t);return new Promise((t=>{WebPro.writeSegment(e,n,(e=>{t(e)}))}))}const n={ok:0};try{await OP.set(MP,e,t),n.ok=1}catch(e){console.error("setSegment noteDB.set(SEGMENT: ",e)}return n}async function uF(e){if("undefined"!=typeof electron){const t="uint8Array";return await electron.file.readSegment(e,t)}return"undefined"!=typeof WebPro?new Promise((t=>{WebPro.readSegment(e,(e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})}))})):await OP.get(MP,e)}async function dF(e){return"undefined"!=typeof electron?await electron.file.unlinkSegment(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.unlinkSegment(e,(e=>{t(e)}))})):await OP.remove(MP,e)}async function fF(e){if("undefined"!=typeof electron){const{version:t}=PP.browser;t&&SP(t,"0.0.9","<=")&&(e=JSON.stringify(e));const n=await electron.file.writeCatalogBatch(e);if(1===n.ok)return n}if("undefined"!=typeof WebPro){const t=JSON.stringify(e);return new Promise((e=>{WebPro.writeCatalogBatch(t,(t=>{e(t)}))}))}const t={ok:0};try{await OP.set(NP,e),t.ok=1}catch(e){console.error("setCatalogs noteDB.set(CATALOG: ",e)}return t}async function hF(e){return"undefined"!=typeof electron?await electron.file.readCatalog(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.readCatalog(e,(e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})}))})):await OP.get(NP,e)}async function pF(e){return"undefined"!=typeof electron?e?await electron.file.readCatalogBatch(e):await electron.file.readAllCatalog():"undefined"!=typeof WebPro?new Promise((t=>{e?WebPro.readCatalogBatch(e,(e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})})):WebPro.readAllCatalog((e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})}))})):e?await OP.get(NP,e):await OP.getAll(NP)}async function vF(e){if("undefined"!=typeof electron){const{version:t}=PP.browser;t&&SP(t,"0.0.9","<=")&&(e=JSON.stringify(e));const n=await electron.file.writeReferenceBatch(e);if(1===n.ok)return n}if("undefined"!=typeof WebPro){const t=JSON.stringify(e);return new Promise((e=>{WebPro.writeReferenceBatch(t,(t=>{e(t)}))}))}const t={ok:0};try{await OP.set(IP,e),t.ok=1}catch(e){console.error("setReferences noteDB.set(REFERENCE: ",e)}return t}async function gF(e){return"undefined"!=typeof electron?await electron.file.readReference(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.readReference(e,(e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})}))})):await OP.get(IP,e)}async function mF(e){return"undefined"!=typeof electron?e?await electron.file.readReferenceBatch(e):await electron.file.readAllReference():"undefined"!=typeof WebPro?new Promise((t=>{e?WebPro.readReferenceBatch(e,(e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})})):WebPro.readAllReference((e=>{if(0===e.ok||!e.data)return void t({ok:0});let n=e.data;"string"==typeof n&&(n=JSON.parse(n)),t({ok:1,data:n})}))})):e?await OP.get(IP,e):await OP.getAll(IP)}async function yF(e,t){if("undefined"!=typeof electron){const n=await electron.file.writeAssets(e,t);if(1===n.ok)return n}if("undefined"!=typeof WebPro)return new Promise((n=>{mc(t)&&(t=YT(t)),WebPro.writeAssets(e,t,(e=>{n(e)}))}));const n={ok:0};try{await OP.setAssets(e,t),n.ok=1}catch(e){console.error("setAssets noteDB.set(ASSETS: ",e)}return n}async function bF(e,t){return"undefined"!=typeof electron?await electron.file.readAssets(e,t):"undefined"!=typeof WebPro?new Promise((n=>{WebPro.readAssets(e,(e=>{if(0===e.ok||!e.data)return void n({ok:0});let o=e.data;"arrayBuffer"===t&&(o=KT(o)),n({ok:1,data:o})}))})):await OP.getAssets(e)}async function CF(e){return"undefined"!=typeof electron?await electron.file.unlinkAssets(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.unlinkAssets(e,(e=>{t(e)}))})):await OP.remove(BP,e)}async function wF(e,t){if("undefined"!=typeof WebPro)return new Promise((t=>{WebPro.readAssets(e,(n=>{if(0===n.ok||!n.data)return void t({ok:0});let o=`image/${e}`;const i=e.split(".");i.length>1&&(o=i[i.length-1]),t({ok:1,data:`data:${o};base64,${n.data}`})}))}));let n=null;if("undefined"!=typeof electron){if(!t)return await electron.file.getAssetsPath(e);n=await electron.file.readAssets(e,"arrayBuffer")}if(null===n)try{n=await OP.getAssets(e)}catch(e){console.error("offlineImage getNoteAssetsDB: ",e)}if(null!=n&&1===n.ok&&null!=n.data){let t="";try{t=YT(n.data)}catch(e){console.error("offlineImage arrayBufferToBase64: ",e)}if(t.length>0){let n=`image/${e}`;const o=e.split(".");return o.length>1&&(n=o[o.length-1]),{ok:1,data:`data:${n};base64,${t}`}}}return{ok:0}}var xF=Uint8Array,SF=Uint16Array,EF=Int32Array,kF=new xF([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),DF=new xF([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),IF=new xF([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NF=function(e,t){for(var n=new SF(31),o=0;o<31;++o)n[o]=t+=1<<e[o-1];var i=new EF(n[30]);for(o=1;o<30;++o)for(var r=n[o];r<n[o+1];++r)i[r]=r-n[o]<<5|o;return{b:n,r:i}},LF=NF(kF,2),BF=LF.b,TF=LF.r;BF[28]=258,TF[258]=28;for(var AF=NF(DF,0),MF=AF.b,OF=AF.r,RF=new SF(32768),PF=0;PF<32768;++PF){var FF=(43690&PF)>>1|(21845&PF)<<1;FF=(61680&(FF=(52428&FF)>>2|(13107&FF)<<2))>>4|(3855&FF)<<4,RF[PF]=((65280&FF)>>8|(255&FF)<<8)>>1}var HF=function(e,t,n){for(var o=e.length,i=0,r=new SF(t);i<o;++i)e[i]&&++r[e[i]-1];var l,s=new SF(t);for(i=1;i<t;++i)s[i]=s[i-1]+r[i-1]<<1;if(n){l=new SF(1<<t);var c=15-t;for(i=0;i<o;++i)if(e[i])for(var a=i<<4|e[i],u=t-e[i],d=s[e[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)l[RF[d]>>c]=a}else for(l=new SF(o),i=0;i<o;++i)e[i]&&(l[i]=RF[s[e[i]-1]++]>>15-e[i]);return l},_F=new xF(288);for(PF=0;PF<144;++PF)_F[PF]=8;for(PF=144;PF<256;++PF)_F[PF]=9;for(PF=256;PF<280;++PF)_F[PF]=7;for(PF=280;PF<288;++PF)_F[PF]=8;var jF=new xF(32);for(PF=0;PF<32;++PF)jF[PF]=5;var WF=HF(_F,9,0),zF=HF(_F,9,1),VF=HF(jF,5,0),$F=HF(jF,5,1),ZF=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},UF=function(e,t,n){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(7&t)&n},qF=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},YF=function(e){return(e+7)/8|0},KF=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new xF(e.subarray(t,n))},GF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],XF=function(e,t,n){var o=new Error(t||GF[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,XF),!n)throw o;return o},JF=function(e,t,n,o){var i=e.length,r=o?o.length:0;if(!i||t.f&&!t.l)return n||new xF(0);var l=!n,s=l||2!=t.i,c=t.i;l&&(n=new xF(3*i));var a=function(e){var t=n.length;if(e>t){var o=new xF(Math.max(2*t,e));o.set(n),n=o}},u=t.f||0,d=t.p||0,f=t.b||0,h=t.l,p=t.d,v=t.m,g=t.n,m=8*i;do{if(!h){u=UF(e,d,1);var y=UF(e,d+1,3);if(d+=3,!y){var b=e[(B=YF(d)+4)-4]|e[B-3]<<8,C=B+b;if(C>i){c&&XF(0);break}s&&a(f+b),n.set(e.subarray(B,C),f),t.b=f+=b,t.p=d=8*C,t.f=u;continue}if(1==y)h=zF,p=$F,v=9,g=5;else if(2==y){var w=UF(e,d,31)+257,x=UF(e,d+10,15)+4,S=w+UF(e,d+5,31)+1;d+=14;for(var E=new xF(S),k=new xF(19),D=0;D<x;++D)k[IF[D]]=UF(e,d+3*D,7);d+=3*x;var I=ZF(k),N=(1<<I)-1,L=HF(k,I,1);for(D=0;D<S;){var B,T=L[UF(e,d,N)];if(d+=15&T,(B=T>>4)<16)E[D++]=B;else{var A=0,M=0;for(16==B?(M=3+UF(e,d,3),d+=2,A=E[D-1]):17==B?(M=3+UF(e,d,7),d+=3):18==B&&(M=11+UF(e,d,127),d+=7);M--;)E[D++]=A}}var O=E.subarray(0,w),R=E.subarray(w);v=ZF(O),g=ZF(R),h=HF(O,v,1),p=HF(R,g,1)}else XF(1);if(d>m){c&&XF(0);break}}s&&a(f+131072);for(var P=(1<<v)-1,F=(1<<g)-1,H=d;;H=d){var _=(A=h[qF(e,d)&P])>>4;if((d+=15&A)>m){c&&XF(0);break}if(A||XF(2),_<256)n[f++]=_;else{if(256==_){H=d,h=null;break}var j=_-254;if(_>264){var W=kF[D=_-257];j=UF(e,d,(1<<W)-1)+BF[D],d+=W}var z=p[qF(e,d)&F],V=z>>4;z||XF(3),d+=15&z;R=MF[V];if(V>3){W=DF[V];R+=qF(e,d)&(1<<W)-1,d+=W}if(d>m){c&&XF(0);break}s&&a(f+131072);var $=f+j;if(f<R){var Z=r-R,U=Math.min(R,$);for(Z+f<0&&XF(3);f<U;++f)n[f]=o[Z+f]}for(;f<$;++f)n[f]=n[f-R]}}t.l=h,t.p=H,t.b=f,t.f=u,h&&(u=1,t.m=v,t.d=p,t.n=g)}while(!u);return f!=n.length&&l?KF(n,0,f):n.subarray(0,f)},QF=function(e,t,n){n<<=7&t;var o=t/8|0;e[o]|=n,e[o+1]|=n>>8},eH=function(e,t,n){n<<=7&t;var o=t/8|0;e[o]|=n,e[o+1]|=n>>8,e[o+2]|=n>>16},tH=function(e,t){for(var n=[],o=0;o<e.length;++o)e[o]&&n.push({s:o,f:e[o]});var i=n.length,r=n.slice();if(!i)return{t:cH,l:0};if(1==i){var l=new xF(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],a=0,u=1,d=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=i-1;)s=n[n[a].f<n[d].f?a++:d++],c=n[a!=u&&n[a].f<n[d].f?a++:d++],n[u++]={s:-1,f:s.f+c.f,l:s,r:c};var f=r[0].s;for(o=1;o<i;++o)r[o].s>f&&(f=r[o].s);var h=new SF(f+1),p=nH(n[u-1],h,0);if(p>t){o=0;var v=0,g=p-t,m=1<<g;for(r.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));o<i;++o){var y=r[o].s;if(!(h[y]>t))break;v+=m-(1<<p-h[y]),h[y]=t}for(v>>=g;v>0;){var b=r[o].s;h[b]<t?v-=1<<t-h[b]++-1:++o}for(;o>=0&&v;--o){var C=r[o].s;h[C]==t&&(--h[C],++v)}p=t}return{t:new xF(h),l:p}},nH=function(e,t,n){return-1==e.s?Math.max(nH(e.l,t,n+1),nH(e.r,t,n+1)):t[e.s]=n},oH=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new SF(++t),o=0,i=e[0],r=1,l=function(e){n[o++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++r;else{if(!i&&r>2){for(;r>138;r-=138)l(32754);r>2&&(l(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(l(i),--r;r>6;r-=6)l(8304);r>2&&(l(r-3<<5|8208),r=0)}for(;r--;)l(i);r=1,i=e[s]}return{c:n.subarray(0,o),n:t}},iH=function(e,t){for(var n=0,o=0;o<t.length;++o)n+=e[o]*t[o];return n},rH=function(e,t,n){var o=n.length,i=YF(t+2);e[i]=255&o,e[i+1]=o>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var r=0;r<o;++r)e[i+r+4]=n[r];return 8*(i+4+o)},lH=function(e,t,n,o,i,r,l,s,c,a,u){QF(t,u++,n),++i[256];for(var d=tH(i,15),f=d.t,h=d.l,p=tH(r,15),v=p.t,g=p.l,m=oH(f),y=m.c,b=m.n,C=oH(v),w=C.c,x=C.n,S=new SF(19),E=0;E<y.length;++E)++S[31&y[E]];for(E=0;E<w.length;++E)++S[31&w[E]];for(var k=tH(S,7),D=k.t,I=k.l,N=19;N>4&&!D[IF[N-1]];--N);var L,B,T,A,M=a+5<<3,O=iH(i,_F)+iH(r,jF)+l,R=iH(i,f)+iH(r,v)+l+14+3*N+iH(S,D)+2*S[16]+3*S[17]+7*S[18];if(c>=0&&M<=O&&M<=R)return rH(t,u,e.subarray(c,c+a));if(QF(t,u,1+(R<O)),u+=2,R<O){L=HF(f,h,0),B=f,T=HF(v,g,0),A=v;var P=HF(D,I,0);QF(t,u,b-257),QF(t,u+5,x-1),QF(t,u+10,N-4),u+=14;for(E=0;E<N;++E)QF(t,u+3*E,D[IF[E]]);u+=3*N;for(var F=[y,w],H=0;H<2;++H){var _=F[H];for(E=0;E<_.length;++E){var j=31&_[E];QF(t,u,P[j]),u+=D[j],j>15&&(QF(t,u,_[E]>>5&127),u+=_[E]>>12)}}}else L=WF,B=_F,T=VF,A=jF;for(E=0;E<s;++E){var W=o[E];if(W>255){eH(t,u,L[(j=W>>18&31)+257]),u+=B[j+257],j>7&&(QF(t,u,W>>23&31),u+=kF[j]);var z=31&W;eH(t,u,T[z]),u+=A[z],z>3&&(eH(t,u,W>>5&8191),u+=DF[z])}else eH(t,u,L[W]),u+=B[W]}return eH(t,u,L[256]),u+B[256]},sH=new EF([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cH=new xF(0),aH=function(){var e=1,t=0;return{p:function(n){for(var o=e,i=t,r=0|n.length,l=0;l!=r;){for(var s=Math.min(l+2655,r);l<s;++l)i+=o+=n[l];o=(65535&o)+15*(o>>16),i=(65535&i)+15*(i>>16)}e=o,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},uH=function(e,t,n,o,i){if(!i&&(i={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),l=new xF(r.length+e.length);l.set(r),l.set(e,r.length),e=l,i.w=r.length}return function(e,t,n,o,i,r){var l=r.z||e.length,s=new xF(o+l+5*(1+Math.ceil(l/7e3))+i),c=s.subarray(o,s.length-i),a=r.l,u=7&(r.r||0);if(t){u&&(c[0]=r.r>>3);for(var d=sH[t-1],f=d>>13,h=8191&d,p=(1<<n)-1,v=r.p||new SF(32768),g=r.h||new SF(p+1),m=Math.ceil(n/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&p},C=new EF(25e3),w=new SF(288),x=new SF(32),S=0,E=0,k=r.i||0,D=0,I=r.w||0,N=0;k+2<l;++k){var L=b(k),B=32767&k,T=g[L];if(v[B]=T,g[L]=B,I<=k){var A=l-k;if((S>7e3||D>24576)&&(A>423||!a)){u=lH(e,c,0,C,w,x,E,D,N,k-N,u),D=S=E=0,N=k;for(var M=0;M<286;++M)w[M]=0;for(M=0;M<30;++M)x[M]=0}var O=2,R=0,P=h,F=B-T&32767;if(A>2&&L==b(k-F))for(var H=Math.min(f,A)-1,_=Math.min(32767,k),j=Math.min(258,A);F<=_&&--P&&B!=T;){if(e[k+O]==e[k+O-F]){for(var W=0;W<j&&e[k+W]==e[k+W-F];++W);if(W>O){if(O=W,R=F,W>H)break;var z=Math.min(F,W-2),V=0;for(M=0;M<z;++M){var $=k-F+M&32767,Z=$-v[$]&32767;Z>V&&(V=Z,T=$)}}}F+=(B=T)-(T=v[B])&32767}if(R){C[D++]=268435456|TF[O]<<18|OF[R];var U=31&TF[O],q=31&OF[R];E+=kF[U]+DF[q],++w[257+U],++x[q],I=k+O,++S}else C[D++]=e[k],++w[e[k]]}}for(k=Math.max(k,I);k<l;++k)C[D++]=e[k],++w[e[k]];u=lH(e,c,a,C,w,x,E,D,N,k-N,u),a||(r.r=7&u|c[u/8|0]<<3,u-=7,r.h=g,r.p=v,r.i=k,r.w=I)}else{for(k=r.w||0;k<l+a;k+=65535){var Y=k+65535;Y>=l&&(c[u/8|0]=a,Y=l),u=rH(c,u+1,e.subarray(k,Y))}r.i=l}return KF(s,0,o+YF(u)+i)}(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,o,i)},dH=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},fH=function(e){31==e[0]&&139==e[1]&&8==e[2]||XF(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[n++]);return n+(2&t)},hH=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},pH=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&XF(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&XF(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function vH(e,t){t||(t={});var n=aH();n.p(e);var o=uH(e,t,t.dictionary?6:2,4);return function(e,t){var n=t.level,o=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=o<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=aH();i.p(t.dictionary),dH(e,2,i.d())}}(o,t),dH(o,o.length-4,n.d()),o}function gH(e,t){return JF(e.subarray(pH(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function mH(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?function(e,t){var n=fH(e);return n+8>e.length&&XF(6,"invalid gzip data"),JF(e.subarray(n,-8),{i:2},t&&t.out||new xF(hH(e)),t&&t.dictionary)}(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?function(e,t){return JF(e,{i:2},t&&t.out,t&&t.dictionary)}(e,t):gH(e,t)}var yH="undefined"!=typeof TextEncoder&&new TextEncoder,bH="undefined"!=typeof TextDecoder&&new TextDecoder;try{bH.decode(cH,{stream:!0}),1}catch(e){}function CH(e,t){if(t){for(var n=new xF(e.length),o=0;o<e.length;++o)n[o]=e.charCodeAt(o);return n}if(yH)return yH.encode(e);var i=e.length,r=new xF(e.length+(e.length>>1)),l=0,s=function(e){r[l++]=e};for(o=0;o<i;++o){if(l+5>r.length){var c=new xF(l+8+(i-o<<1));c.set(r),r=c}var a=e.charCodeAt(o);a<128||t?s(a):a<2048?(s(192|a>>6),s(128|63&a)):a>55295&&a<57344?(s(240|(a=65536+(1047552&a)|1023&e.charCodeAt(++o))>>18),s(128|a>>12&63),s(128|a>>6&63),s(128|63&a)):(s(224|a>>12),s(128|a>>6&63),s(128|63&a))}return KF(r,0,l)}function wH(e,t){if(t){for(var n="",o=0;o<e.length;o+=16384)n+=String.fromCharCode.apply(null,e.subarray(o,o+16384));return n}if(bH)return bH.decode(e);var i=function(e){for(var t="",n=0;;){var o=e[n++],i=(o>127)+(o>223)+(o>239);if(n+i>e.length)return{s:t,r:KF(e,n-1)};i?3==i?(o=((15&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|o>>10,56320|1023&o)):t+=1&i?String.fromCharCode((31&o)<<6|63&e[n++]):String.fromCharCode((15&o)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(o)}}(e),r=i.s;return(n=i.r).length&&XF(8),r}const xH={START:"START_COMPRESSION",END:"COMPRESSION_END",DELETE:"DELETE_COMPRESSION"};class SH{constructor(e){this.record={},this.postMessage=e}start(e){for(const t in e){const n=vH(CH(JSON.stringify(e[t])));this.record[t]=n}this.end()}end(){this.postMessage(this.record)}}const EH={START:"START_DECOMPRESSION",END:"DECOMPRESSION_END",DELETE:"DELETE_DECOMPRESSION"};class kH{constructor(e){this.limit=10,this.ids=[],this.record={},this.postMessage=e}delete(e){for(const t of e){delete this.record[t];const e=this.ids.indexOf(t);-1!==e&&this.ids.splice(e,1)}}reduce(){if(this.ids.length>this.limit){const e=this.ids.slice(this.limit);this.delete(e),this.ids=this.ids.slice(0,this.limit)}}start(e,t=!0){for(const t in e){if(this.record[t])continue;const n=e[t];if(!RP(n))continue;let o=null;try{o=gH(n)}catch(e){o=mH(n)}if(o){const e=wH(o),n=JSON.parse(e);this.record[t]=n}this.ids.includes(t)||this.ids.unshift(t)}if(this.end(),!1===t){const t=Object.keys(e);this.delete(t)}}end(){this.postMessage(this.record),this.reduce()}}const DH={CRUD:"crud",LOST:"lost"},IH={START:"START_NOTESEARCH",END:"NOTESEARCH_END",CANCEL:"CANCEL_NOTESEARCH"};class NH{constructor(e){this.selections=[],this.postMessage=e}start(e){const{text:t,node:n,excludeIds:o}=e;try{this.selections=function(e,t,n){var o,i,r,l,s,c,a,u,d,f,h,p,v,g,m,y;const b=[],C=e.length;if(0===C)return[];let w=0,x=0,S=null;const E=[{node:t,path:[]}];for(;E.length;){const t=E.shift();if(void 0===t)continue;let{node:k,path:D,search:I}=t;if(ZP(k)){const e=null===(o=k.props)||void 0===o?void 0:o.uid;if(n.includes(e)){w=0,x=0,S=null;continue}}if("string"==typeof k){const n=e.slice(w);if(k.length-x>=C-w){const e=k.indexOf(n,x);if(-1!==e){if(0===w){x=e+C-w;const t={anchor:{path:D.slice(),offset:e},focus:{path:D.slice(),offset:x}};I&&(t.search=JSON.parse(JSON.stringify(I))),b.push(t)}else if(S&&0===e){x=e+C-w;const t={anchor:S,focus:{path:D.slice(),offset:x}};I&&(t.search=JSON.parse(JSON.stringify(I))),b.push(t)}else x=e+1;x<k.length?E.unshift(t):x=0,w=0,S=null;continue}}else if(-1!==n.indexOf(k.slice(x))){0===w&&(S={path:D.slice(),offset:x}),w+=k.length-x,x=0;continue}if(0===w){do{const t=e.slice(0,++w),n=k.indexOf(t,x);if(-1===n){w=0;break}if(n+w===k.length)break}while(w<C);w>0&&(S={path:D.slice(),offset:k.length-w})}else w=0,S=null;x=0;continue}if(YP(k)){const e=null!==(l=null===(r=null===(i=k.props)||void 0===i?void 0:i.value)||void 0===r?void 0:r.cells)&&void 0!==l?l:{};Object.keys(e).sort(((e,t)=>{const{rowIndex:n,columnIndex:o}=GP(e),{rowIndex:i,columnIndex:r}=GP(t);let l=i-n;return 0===l&&(l=r-o),l})).forEach((t=>{var n;const o=null===(n=e[t].state)||void 0===n?void 0:n.editor.node;if(o){const e=[JP(D.slice()),tF(t)];I&&e.unshift(I);const n=nF(e[0],...e.slice(1));E.unshift({node:o,path:[],search:n})}}));continue}if(KP(k)&&!1===(null===(s=k.props)||void 0===s?void 0:s.expand)&&(null===(a=null===(c=k.props)||void 0===c?void 0:c.list)||void 0===a?void 0:a.length)){const e=k.children.slice();if(!1===(null===(u=k.props)||void 0===u?void 0:u.expand)){const t=null!==(f=null===(d=k.props)||void 0===d?void 0:d.list)&&void 0!==f?f:[];for(const n of t)e.push(n)}let t=e.length-1;for(;t>=0;){const n=[JP(D.slice()),QP([t])];I&&n.unshift(I);const o=nF(n[0],...n.slice(1));E.unshift({node:e[t],path:[],search:o}),t--}continue}if(qP(k)&&!1===(null===(h=k.props)||void 0===h?void 0:h.expand)&&(null===(v=null===(p=k.props)||void 0===p?void 0:p.list)||void 0===v?void 0:v.length)){const e=k.children.slice();if(!1===(null===(g=k.props)||void 0===g?void 0:g.expand)){const t=null!==(y=null===(m=k.props)||void 0===m?void 0:m.list)&&void 0!==y?y:[];for(const n of t)e.push(n)}let t=e.length-1;for(;t>=0;){const n=[JP(D.slice()),eF([t])];I&&n.unshift(I);const o=nF(n[0],...n.slice(1));E.unshift({node:e[t],path:[],search:o}),t--}continue}UP(k)&&(w=0,x=0,S=null);const N=k.children;let L=N.length-1;for(;L>=0;)E.unshift({node:N[L],path:[...D,L],search:I}),L--}return b}(t,n,o)}catch(e){console.error(e)}this.end()}end(){this.postMessage({selections:this.selections})}}var LH;let BH;!function(e){e.STRINGIFY="JSON_STRINGIFY",e.PARSE="JSON_PARSE"}(LH||(LH={}));const TH=new Uint8Array(16);function AH(){if(!BH&&(BH="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!BH))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return BH(TH)}const MH=[];for(let e=0;e<256;++e)MH.push((e+256).toString(16).slice(1));var OH={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function RH(e,t,n){if(OH.randomUUID&&!t&&!e)return OH.randomUUID();const o=(e=e||{}).random||(e.rng||AH)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return MH[e[t+0]]+MH[e[t+1]]+MH[e[t+2]]+MH[e[t+3]]+"-"+MH[e[t+4]]+MH[e[t+5]]+"-"+MH[e[t+6]]+MH[e[t+7]]+"-"+MH[e[t+8]]+MH[e[t+9]]+"-"+MH[e[t+10]]+MH[e[t+11]]+MH[e[t+12]]+MH[e[t+13]]+MH[e[t+14]]+MH[e[t+15]]}(o)}let PH=0;function FH(){if("undefined"!=typeof WebPro){const e=WebPro.getWindowAvoidArea("TYPE_SYSTEM"),t=null==e?void 0:e.topRect.height;return t&&(PH=Math.max(PH,t/window.devicePixelRatio)),PH}return 0}let HH=0;function _H(){if("undefined"!=typeof WebPro){const e=WebPro.getWindowAvoidArea("TYPE_NAVIGATION_INDICATOR"),t=null==e?void 0:e.bottomRect.height;return t&&(HH=t/window.devicePixelRatio),HH}return 0}function jH(e,t){var n;if("undefined"!=typeof WebPro){const o=null==t?void 0:t.payload;return o&&"string"!=typeof o&&(t.payload=JSON.stringify(o)),null===(n=WebPro.setNavigateStack)||void 0===n?void 0:n.call(WebPro,e,t)}}function WH(e){var t;if("undefined"!=typeof WebPro)return null===(t=WebPro.getNavigateStack)||void 0===t?void 0:t.call(WebPro,e)}function zH(){var e;if("undefined"!=typeof WebPro)return null===(e=WebPro.getNavigateUid)||void 0===e?void 0:e.call(WebPro)}const VH=new WeakMap;function $H(e,t){if("undefined"==typeof WebPro)return;if(VH.has(t))return;const n=RH();VH.set(t,n),WebPro.addEventListener(e,n,t)}function ZH(e,t){if("undefined"==typeof WebPro)return;if(!VH.has(t))return;const n=VH.get(t);"string"==typeof n&&(VH.delete(t),WebPro.removeEventListener(e,n))}function UH(e,t){"undefined"!=typeof WebPro&&WebPro.postMessage(e,t)}function qH(e){if("undefined"==typeof WebPro)return"undefined"!=typeof electron?electron.shell.openExternal(e):void window.open(e,"_blank");WebPro.open(e)}function YH(e){"undefined"!=typeof WebPro&&WebPro.toast({duration:1500,...e})}function KH(e){var t,n;"undefined"!=typeof WebPro?WebPro.alert({cornerRadius:16,...e}):null===(n=null===(t=e.confirm)||void 0===t?void 0:t.action)||void 0===n||n.call(t)}function GH(e){return"undefined"==typeof WebPro?()=>{}:(WebPro.loading({cornerRadius:16,autoCancel:!1,...e}),()=>{WebPro.loading({visible:!1})})}async function XH(e,t){return"undefined"==typeof WebPro?null:new Promise(((n,o)=>{WebPro.select(e,(e=>{try{null==t||t(e)}catch(e){return void o(e)}n(e)}))}))}async function JH(e,t){return"undefined"==typeof WebPro?null:new Promise(((n,o)=>{WebPro.save(e,(e=>{try{null==t||t(e)}catch(e){return void o(e)}n(e)}))}))}function QH(){"undefined"!=typeof WebPro&&WebPro.hideSoftKeyboard()}function e_(e){"undefined"!=typeof WebPro&&WebPro.showSoftKeyboard(e)}function t_(e,t,n){"undefined"!=typeof WebPro&&WebPro.startVibration(e,t,n)}function n_(e,t){"undefined"!=typeof WebPro&&WebPro.writeToClipboard(e,t)}function o_(e){"undefined"!=typeof WebPro&&WebPro.readFromClipboard(e)}async function i_(e,t,n){return"undefined"==typeof WebPro?null:new Promise(((o,i)=>{WebPro.writeFile(e,t,(e=>{null===e?o(!0):i(e),null==n||n(e)}))}))}async function r_(e,t){return"undefined"==typeof WebPro?null:new Promise(((n,o)=>{WebPro.readFile(e,((e,i)=>{null===e?n(null!=i?i:null):o(e),null==t||t(e,i)}))}))}const{getEditBlockNodeStartPath:l_,getEditBlockNodeEndPath:s_,getEditNodeByPath:c_,getBlockNodeEndPath:a_,getBlockNodeStartPath:u_,getNodeByPath:d_,getNodeLength:f_,isBlockNodeX:h_,getPathFromKey:p_}=ek;function v_(e,t){const n=l_(t),o=s_(t),i=d_(e,n),r=d_(e,o),l=c_(t,n),s=c_(t,o);let c=!1,a=!1;return null===i||(c=f_(i)>f_(l)),null===r||(a=f_(r)>f_(s)),{start:{path:n,slice:c},end:{path:o,slice:a}}}function g_(e,t){for(;h_(t);)t=tc(t.children);const n=p_(t.key),o=d_(e,n);return null!==o&&f_(o)>f_(t)}function m_(e,t){for(;h_(t);)t=Js(t.children);const n=p_(t.key),o=d_(e,n);return null!==o&&f_(o)>f_(t)}const y_=5,b_={position:"relative",display:"flex",fontSize:12,height:28},C_={position:"relative",display:"flex",alignItems:"center",height:"100%",marginRight:y_,color:kf},w_={position:"absolute",right:0,marginTop:1,height:"60%"},x_={marginRight:y_,userSelect:"none"},S_={position:"relative",height:24,minWidth:24,maxWidth:200,borderRadius:2,overflow:"hidden",display:"flex"},E_={height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},k_={position:"relative",height:"100%"},D_={position:"relative",minWidth:24,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flex:1},I_={position:"relative",width:15,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},N_={marginTop:5,borderWidth:"5px 4px",borderStyle:"solid dashed dashed dashed",borderColor:`${If} transparent transparent transparent`,pointerEvents:"none"},L_={boxSizing:"border-box",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",paddingLeft:3},B_={flex:1,display:"flex",justifyContent:"center",alignItems:"center"},T_={display:"flex",flex:1,alignItems:"center",justifyContent:"center"},A_={display:"flex",flex:"none",alignItems:"center",justifyContent:"unset",position:"absolute",top:0,left:0,right:0,bottom:0,paddingLeft:16,width:"auto"},M_={display:"inline-block",marginLeft:25},O_={position:"absolute",right:17,color:If},R_={position:"absolute",top:0,zIndex:1},P_={paddingBottom:10,borderRadius:4,overflow:"hidden",boxShadow:Nf},F_={display:"flex",height:33,margin:"0 15px",position:"relative",fontSize:12,marginTop:-5,marginBottom:5,borderRadius:2,color:kf},H_={flex:1,borderRadius:2,overflow:"hidden",userSelect:"none",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},__={width:330,padding:15};function j_({d:e,width:t=12,...n}){var o;return G(ch,{style:{...B_,...n.style},onClick:n.onClick,children:n.children?n.children:G("svg",{width:t,viewBox:"0 0 12 12",children:G("path",{fill:null!==(o=n.fill)&&void 0!==o?o:Lf,d:e})})})}function W_(e){return G(j_,{...e,children:G(ZM,{})})}const z_=Mf?180:200;function V_(e){var t,n;const o=null!==(n=null===(t=e.value)||void 0===t?void 0:t.map((t=>{var n;return{name:$_({...t,lang:e.lang}),value:t.name,hotkey:t.inner||null===(n=t.hotkey)||void 0===n?void 0:n.call(t,e)}})))&&void 0!==n?n:[];return G(gg,{style:{width:z_},options:o,onClick:t=>{var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,t.value)}})}function $_(e){return G(e.outer,{...e,menu:!0,style:A_,children:G("span",{style:M_,children:e.label(e)})})}function Z_(e){var t,n;return e.menu?G(U_,{...e}):X(ch,{style:{...e.style,...E_},onClick:t=>{var n;t.stopPropagation(),null===(n=e.onClick)||void 0===n||n.call(e,t)},children:[G(ch,{style:{...k_,flex:1,...null===(t=e.left)||void 0===t?void 0:t.style},children:G(dv,{...e.left,style:D_,children:e.children})}),G(ch,{style:{...k_,...null===(n=e.right)||void 0===n?void 0:n.style},children:G(dv,{...e.right,style:I_,children:G("div",{style:N_})})})]})}function U_(e){const t=Z(null),n=Z(null),[o,i]=$(!1),[r,l]=$({});return H((()=>{if(!0===o&&null!==n.current){const e=n.current.getBoundingClientRect();if(e.bottom>window.innerHeight){const t=window.innerHeight-e.bottom;r.top!==t&&l({...r,top:t})}}}),[o,r]),"function"!=typeof e.inner?null:X(ch,{ref:t,style:{...e.style,...A_},onPointerEnter:e=>{if(null===t.current)return;const n=t.current.getBoundingClientRect();window.innerWidth-n.right<z_?l({right:"calc(100%)"}):l({left:"calc(100%)"}),i(!0)},onPointerLeave:e=>{i(!1),l({})},children:[G(ch,{children:e.children}),G(W_,{style:O_}),o&&G("div",{ref:n,style:{...R_,...r},children:G(e.inner,{...e})})]})}function q_(e){return G(ch,{style:{...L_,...e.style},onClick:e.onClick,children:e.children})}function Y_(e){const[t,n]=$(e.value),[o,i]=$("theme");return X(hh,{style:P_,children:["theme"===o?G(Uv,{value:t,onChange:e.onChange}):null,"picker"===o?G(ch,{onClick:e=>e.stopPropagation(),children:G(Av,{style:__,value:t,onChange:n})}):null,G("div",{style:F_,children:G(dv,{type:"light",style:H_,onClick:n=>{var r;"theme"===o?(t=>{var n;t.stopPropagation(),i("picker"),null===(n=e.onMore)||void 0===n||n.call(e)})(n):"picker"===o&&(null===(r=e.onChange)||void 0===r||r.call(e,t))},children:"theme"===o?e.more:e.ok})})]})}function K_(e){return G(j_,{...e,children:G(UM,{})})}const G_="more",X_={cn:{[G_]:"更多"},en:{[G_]:"More"}};function J_(e){return G(V_,{...e})}const Q_=U(null),ej=U(null),tj=U(null),nj=e=>t=>(t.more.fold=e,t),oj=e=>t=>(t.more.active=e,t);const ij="more";var rj=Object.freeze({__proto__:null,More:K_,i18n:X_,inner:J_,label:function(e){return X_[e.lang][G_]},name:ij,outer:function(e){const t=R(ej),{more:{active:n}}=R(Q_);return F((()=>{const e=()=>{!0===n&&t(oj(!1))};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[n,t]),G(K_,{...e,onClick:e=>{e.stopPropagation(),t(oj(!n))}})}});function lj(e,t,n,o){var i;const r=Dd(e),l=_((()=>{const e=wi(r.current.tools);let t=e.length-1;const i=o.tools.get(ij);if(void 0!==i){if(!(i.getBoundingClientRect().right+20>window.innerWidth))return;t--}for(;t>=0;){const{name:n}=e[t],i=o.tools.get(n);if(void 0===i){t--;continue}if(!(i.getBoundingClientRect().right+20>window.innerWidth))break;t--}t<e.length-1&&n(nj(e.length-1-t))}),[r,o.tools,n]);F((()=>{n(oj(!1),nj(0)),l()}),[l,n,null===(i=e.style)||void 0===i?void 0:i.width]),H(l,[l,0===t.more.fold,e.resize])}function sj(e){const t=Z(null),n=W((()=>{const e={};return{set:(t,n)=>{null===n?delete e[t]:e[t]=n},get:t=>e[t]}}),[]);return{container:t,tools:n}}var cj=Object.freeze({__proto__:null,useEffects:lj,useHotkey:function(e,t){const n=Nd("keydown");F((()=>(window.addEventListener("keydown",n.listener),()=>{window.removeEventListener("keydown",n.listener)})),[n]),F((()=>{const o=n.subscribe((n=>{e&&eh(e,n)&&t()}));return()=>o.unsubscribe()}),[t,e,n])},useHotkeys:function(e,t){const n=Dd(e),o=Nd("keydown");F((()=>(window.addEventListener("keydown",o.listener),()=>{window.removeEventListener("keydown",o.listener)})),[o]),F((()=>{const e=o.subscribe((e=>{const o=n.current;for(let n=0;n<o.length;n++){const i=o[n];i&&(eh(i,e)&&t(i,n))}}));return()=>e.unsubscribe()}),[t,n,o])},useRefs:sj});const aj="redo",uj={cn:{[aj]:"重做"},en:{[aj]:"REDO"}};function dj(e){return G(j_,{...e,children:G(YO,{width:16})})}function fj({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:e,children:[G(dj,{...n}),t]})}const hj="redo";var pj=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+Y":"Ctrl+Y"},i18n:uj,label:function(e){return uj[e.lang][aj]},name:hj,outer:fj});const vj="undo",gj={cn:{[vj]:"撤销"},en:{[vj]:"Undo"}};function mj(e){return G(j_,{...e,children:G(qO,{width:16})})}function yj({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:e,children:[G(mj,{...n}),t]})}const bj="undo";var Cj=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+Z":"Ctrl+Z"},i18n:gj,label:function(e){return gj[e.lang][vj]},name:bj,outer:yj});const wj={unicode:"unicode"},xj={cn:{[wj.unicode]:"字符表"},en:{[wj.unicode]:"Unicode Table"}};function Sj(e){return G(j_,{...e,children:G($R,{width:13})})}function Ej({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:e,children:[G(Sj,{...n}),t]})}var kj=Object.freeze({__proto__:null,i18n:xj,keys:wj,label:function(e){return xj[e.lang][wj.unicode]},name:"unicode",outer:Ej});const Dj="readonly",Ij={cn:{[Dj]:"模式切换"},en:{[Dj]:"readonly"}};function Nj(e){return G(j_,{...e,children:G(MO,{width:15})})}function Lj({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:e,children:[G(Nj,{...n}),t]})}var Bj=Object.freeze({__proto__:null,hotkey:function(){return Mf?"⌥+R":"Alt+R"},i18n:Ij,label:function(e){return Ij[e.lang][Dj]},name:"readonly",outer:Lj});const Tj="add",Aj={cn:{[Tj]:"插入"},en:{[Tj]:"Add"}};function Mj(e){return G(j_,{...e,children:G(FO,{})})}const Oj={display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,bottom:0,right:0};function Rj({onClick:e,...t}){return G(ch,{style:Oj,onClick:t=>{t.stopPropagation(),null==e||e(t)},children:G(Mj,{...t})})}function Pj(e){return G(V_,{...e})}const Fj="add";var Hj=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+⇧+X":"Ctrl+Shift+X"},i18n:Aj,inner:Pj,label:function(e){return Aj[e.lang][Tj]},name:Fj,outer:Rj});const _j="paintFormat",jj={cn:{[_j]:"格式刷"},en:{[_j]:"Paint Format"}};function Wj(e){return G(j_,{...e,children:G(KO,{})})}function zj({onClick:e,children:t,...n}){const o={...T_,...n.style};return n.active&&(o.backgroundColor=Sf),X(ch,{style:o,onClick:e,children:[G(Wj,{...n}),t]})}const Vj="paint-format";var $j=Object.freeze({__proto__:null,i18n:jj,label:function(e){return jj[e.lang][_j]},name:Vj,outer:zj});const Zj="clearFormat",Uj={cn:{[Zj]:"清除格式"},en:{[Zj]:"Clear Format"}};function qj(e){return G(j_,{...e,children:G(GO,{width:13})})}function Yj({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:e,children:[G(qj,{...n}),t]})}const Kj="clear-format";var Gj=Object.freeze({__proto__:null,i18n:Uj,label:function(e){return Uj[e.lang][Zj]},name:Kj,outer:Yj});const Xj="bold",Jj={cn:{[Xj]:"粗体"},en:{[Xj]:"Bold"}};function Qj(e){return G(j_,{...e,children:G(nR,{})})}function eW({onClick:e,children:t,...n}){const o={...T_,...n.style};return n.active&&(o.backgroundColor=Sf),X(ch,{style:o,onClick:e,children:[G(Qj,{...n}),t]})}const tW="bold";var nW=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+B":"Ctrl+B"},i18n:Jj,icon:Qj,label:function(e){return Jj[e.lang][Xj]},name:tW,outer:eW});const oW={fontFamily:"fontFamily",fontFamilyPackage:"fontFamilyPackage"},iW={cn:{[oW.fontFamily]:"字体",[oW.fontFamilyPackage]:[{name:"Arial",value:"Arial"},{name:"Comic Sans MS",value:"Comic Sans MS"},{name:"Courier New",value:"Courier New"},{name:"Georgia",value:"Georgia"},{name:"Impact",value:"Impact"},{name:"Quicksand",value:"Quicksand"},{name:"Times New Roman",value:"Times New Roman"},{name:"Trebuchet MS",value:"Trebuchet MS"},{name:"Verdana",value:"Verdana"},{name:"微软雅黑",value:"Microsoft YaHei, 微软雅黑"},{name:"仿宋",value:"FangSong"},{name:"华文仿宋",value:"STFangsong"},{name:"华文宋体",value:"STsong"},{name:"华文楷体",value:"STKaiti, Kaiti"},{name:"宋体",value:"SimSun"},{name:"宋体-ExtB",value:"SimSun-ExtB"},{name:"楷体",value:"Kai, Kaiti"},{name:"黑体",value:"Hei"}]},en:{[oW.fontFamily]:"Font",[oW.fontFamilyPackage]:[{name:"Amatic SC",value:"Amatic SC"},{name:"Arial",value:"Arial"},{name:"Caveat",value:"Caveat"},{name:"Comfortaa",value:"Comfortaa"},{name:"Comic Sans MS",value:"Comic Sans MS"},{name:"Courier New",value:"Courier New"},{name:"EB Garamond",value:"EB Garamond"},{name:"Georgia",value:"Georgia"},{name:"Impact",value:"Impact"},{name:"Lobster",value:"Lobster"},{name:"Lora",value:"Lora"},{name:"Merriweather",value:"Merriweather"},{name:"Montserrat",value:"Montserrat"},{name:"Nunito",value:"Nunito"},{name:"Oswald",value:"Oswald"},{name:"Pacifico",value:"Pacifico"},{name:"Playfair Display",value:"Playfair Display"},{name:"Quicksand",value:"Quicksand"},{name:"Roboto",value:"Roboto"},{name:"Roboto Mono",value:"Roboto Mono"},{name:"Spectral",value:"Spectral"},{name:"Times New Roman",value:"Times New Roman"},{name:"Trebuchet MS",value:"Trebuchet MS"},{name:"Verdana",value:"Verdana"}]}};function rW({onClick:e,children:t,...n}){var o,i;let r=null===(o=iW[n.lang][oW.fontFamilyPackage].find((e=>e.value===n.value)))||void 0===o?void 0:o.name;r||(r=null===(i=n.value)||void 0===i?void 0:i.replace(/^"|"$/g,""));const l={fontFamily:n.value,width:70},s={width:Number(l.width)-15,textAlign:"center"};return X(Z_,{...n,style:l,onClick:e,children:[!0!==n.menu&&G(q_,{...n,style:s,children:r}),t]})}function lW(e){const t=iW[e.lang][oW.fontFamilyPackage].map((t=>({...t,name:G("div",{style:{fontFamily:t.value},children:t.name}),selected:t.value===e.value})));return G(gg,{style:{width:140},options:t,onClick:t=>{var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,t.value)}})}const sW="font-family";var cW=Object.freeze({__proto__:null,i18n:iW,inner:lW,label:function(e){return iW[e.lang][oW.fontFamily]},name:sW,outer:rW});const aW={fontSize:"fontSize",fontSizePackage:"fontSizePackage"},uW={cn:{[aW.fontSize]:"字号",[aW.fontSizePackage]:[{name:"9",value:Kf(9)},{name:"10",value:Kf(10)},{name:"11",value:Kf(11)},{name:"12",value:Kf(12)},{name:"13",value:Kf(13)},{name:"14",value:Kf(14)},{name:"16",value:Kf(16)},{name:"18",value:Kf(18)},{name:"20",value:Kf(20)},{name:"22",value:Kf(22)},{name:"24",value:Kf(24)},{name:"26",value:Kf(26)},{name:"28",value:Kf(28)},{name:"36",value:Kf(36)},{name:"48",value:Kf(48)},{name:"72",value:Kf(72)}]},en:{[aW.fontSize]:"Font Size",[aW.fontSizePackage]:[{name:"9",value:Kf(9)},{name:"10",value:Kf(10)},{name:"11",value:Kf(11)},{name:"12",value:Kf(12)},{name:"14",value:Kf(14)},{name:"16",value:Kf(16)},{name:"18",value:Kf(18)},{name:"20",value:Kf(20)},{name:"22",value:Kf(22)},{name:"24",value:Kf(24)},{name:"26",value:Kf(26)},{name:"28",value:Kf(28)},{name:"36",value:Kf(36)},{name:"48",value:Kf(48)},{name:"72",value:Kf(72)}]}};function dW({onClick:e,children:t,...n}){var o;let i=null===(o=uW[n.lang][aW.fontSizePackage].find((e=>e.value===n.value)))||void 0===o?void 0:o.name;return i||(i=hi(parseFloat(n.value))),X(Z_,{...n,onClick:e,children:[!0!==n.menu&&G(q_,{...n,children:i}),t]})}function fW(e){const t=uW[e.lang][aW.fontSizePackage].map((t=>({...t,selected:t.value===e.value})));return G(gg,{style:{width:56},options:t,onClick:t=>{var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,t.value)}})}const hW="font-size";var pW=Object.freeze({__proto__:null,i18n:uW,icon:function(e){return G(j_,{...e,children:G("svg",{width:13,style:{position:"relative",top:.5},viewBox:"0 0 12 11",children:G("path",{fill:Lf,d:"M11.8664 3.68664H7.48848C7.42512 3.68664 7.37327 3.73848 7.37327 3.80184V5.41475C7.37327 5.47811 7.42512 5.52995 7.48848 5.52995H8.17972C8.24309 5.52995 8.29493 5.47811 8.29493 5.41475V4.60829H9.15899V9.21659H8.49654C8.43318 9.21659 8.38134 9.26843 8.38134 9.3318V10.023C8.38134 10.0864 8.43318 10.1382 8.49654 10.1382H10.8583C10.9217 10.1382 10.9735 10.0864 10.9735 10.023V9.3318C10.9735 9.26843 10.9217 9.21659 10.8583 9.21659H10.1959V4.60829H11.0599V5.41475C11.0599 5.47811 11.1118 5.52995 11.1751 5.52995H11.8664C11.9297 5.52995 11.9816 5.47811 11.9816 5.41475V3.80184C11.9816 3.73848 11.9297 3.68664 11.8664 3.68664ZM8.06452 1.95853V0.115207C8.06452 0.0518433 8.01267 0 7.94931 0H0.115207C0.0518433 0 0 0.0518433 0 0.115207V1.95853C0 2.02189 0.0518433 2.07373 0.115207 2.07373H0.921659C0.985023 2.07373 1.03687 2.02189 1.03687 1.95853V1.03687H3.45622V9.10138H2.13134C2.06797 9.10138 2.01613 9.15323 2.01613 9.21659V10.023C2.01613 10.0864 2.06797 10.1382 2.13134 10.1382H5.93318C5.99654 10.1382 6.04839 10.0864 6.04839 10.023V9.21659C6.04839 9.15323 5.99654 9.10138 5.93318 9.10138H4.60829V1.03687H7.02765V1.95853C7.02765 2.02189 7.07949 2.07373 7.14286 2.07373H7.94931C8.01267 2.07373 8.06452 2.02189 8.06452 1.95853Z"})})})},inner:fW,label:function(e){return uW[e.lang][aW.fontSize]},name:hW,outer:dW});const vW="image",gW={cn:{[vW]:"图片"},en:{[vW]:"Image"}};const mW={opacity:0,cursor:"pointer",width:"100%",height:"100%",fontSize:0,position:"absolute",top:0,left:0},yW={opacity:0,width:0,height:0,fontSize:0,position:"absolute",top:0,left:0};function bW(e){return G(j_,{...e,children:G(DO,{style:{position:"relative",right:.5}})})}function CW({children:e,dataType:t,...n}){const o=R(tj),[i,r]=$(""),l=Z(null);j((e=>{dt(o)?o(e):o.current&&Object.assign(o.current,e)}),(()=>({image:{click(){var e;null===(e=l.current)||void 0===e||e.click()}}})),[]);const s=e=>{var t;r(""),null===(t=n.onClick)||void 0===t||t.call(n,e)},c=e=>{var o;const i=null===(o=e.target.files)||void 0===o?void 0:o[0];if(i){const e=new FileReader;e.onload=t=>{var o;return null===(o=n.onLoad)||void 0===o?void 0:o.bind(e)(t,i.type)},"data-url"===t?e.readAsDataURL(i):"array-buffer"===t?e.readAsArrayBuffer(i):"binary-string"===t?e.readAsBinaryString(i):"text"===t&&e.readAsText(i)}};return n.silence?G("input",{style:yW,value:i,ref:l,type:"file",accept:"image/*",title:"",onClick:s,onChange:c}):X(K,{children:[G(bW,{...n}),e,G("input",{style:mW,value:i,ref:l,type:"file",accept:"image/*",title:"",onClick:s,onChange:c})]})}const wW="image";var xW=Object.freeze({__proto__:null,i18n:gW,icon:bW,label:function(e){return gW[e.lang][vW]},name:wW,outer:CW});const SW="italic",EW={cn:{[SW]:"斜体"},en:{[SW]:"Italic"}};function kW(e){return G(j_,{...e,children:G(oR,{})})}function DW({onClick:e,children:t,...n}){const o={...T_,...n.style};return n.active&&(o.backgroundColor=Sf),X(ch,{style:o,onClick:e,children:[G(kW,{...n}),t]})}const IW="italic";var NW=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+I":"Ctrl+I"},i18n:EW,icon:kW,label:function(e){return EW[e.lang][SW]},name:IW,outer:DW});const LW="strikeThrough",BW={cn:{[LW]:"中划线"},en:{[LW]:"Strike Through"}};function TW(e){return G(j_,{...e,children:G(iR,{})})}function AW({onClick:e,children:t,...n}){const o={...T_,...n.style};return n.active&&(o.backgroundColor=Sf),X(ch,{style:o,onClick:e,children:[G(TW,{...n}),t]})}const MW="strike-through";var OW=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+⇧+S":"Ctrl+Shift+S"},i18n:BW,icon:TW,label:function(e){return BW[e.lang][LW]},name:MW,outer:AW});const RW="strikeUnderline",PW={cn:{[RW]:"下划线"},en:{[RW]:"Strike Underline"}};function FW(e){return G(j_,{...e,children:G(rR,{style:{position:"relative",top:.5},width:13})})}function HW({onClick:e,children:t,...n}){const o={...T_,...n.style};return n.active&&(o.backgroundColor=Sf),X(ch,{style:o,onClick:e,children:[G(FW,{...n}),t]})}const _W="strike-underline";var jW=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+U":"Ctrl+U"},i18n:PW,icon:FW,label:function(e){return PW[e.lang][RW]},name:_W,outer:HW});const WW={textColor:"textColor",autoColor:"autoColor",moreColor:"moreColor",ok:"ok"},zW={cn:{[WW.textColor]:"文本颜色",[WW.autoColor]:"自动",[WW.moreColor]:"更多颜色",[WW.ok]:"确定"},en:{[WW.textColor]:"Text Color",[WW.autoColor]:"Auto Color",[WW.moreColor]:"More Color",[WW.ok]:"OK"}};const VW={top:-1},$W={position:"absolute",bottom:3,height:3,width:14,boxSizing:"border-box"};function ZW(e){return G(j_,{...e,children:G(lR,{})})}function UW({onClick:e,children:t,...n}){return X(Z_,{...n,onClick:e,children:[G(ZW,{...n,style:{position:"relative",...n.style,...VW}}),!0!==n.menu&&G(Mh,{style:{...$W,backgroundColor:n.value}}),t]})}function qW(e){const t=zW[e.lang][WW.ok],n=zW[e.lang][WW.moreColor];return G(Y_,{...e,more:n,ok:t})}const YW="text-color";var KW=Object.freeze({__proto__:null,i18n:zW,icon:ZW,inner:qW,label:function(e){return zW[e.lang][WW.textColor]},name:YW,outer:UW});const GW={fillColor:"fillColor",autoColor:"autoColor",moreColor:"moreColor",ok:"ok"},XW={cn:{[GW.fillColor]:"填充颜色",[GW.autoColor]:"自动",[GW.moreColor]:"更多颜色",[GW.ok]:"确定"},en:{[GW.fillColor]:"Fill Color",[GW.autoColor]:"Auto Color",[GW.moreColor]:"More Color",[GW.ok]:"OK"}};const JW={top:-1},QW={position:"absolute",bottom:3,height:3,width:14,boxSizing:"border-box"};function ez(e){return G(j_,{...e,children:G(sR,{width:14.5,style:{position:"relative",bottom:1}})})}function tz({onClick:e,children:t,...n}){return X(Z_,{...n,onClick:e,children:[G(ez,{...n,style:{position:"relative",...n.style,...JW}}),!0!==n.menu&&G(Mh,{style:{...QW,backgroundColor:n.value}}),t]})}function nz(e){const t=XW[e.lang][GW.ok],n=XW[e.lang][GW.moreColor];return G(Y_,{...e,more:n,ok:t})}const oz="fill-color";var iz=Object.freeze({__proto__:null,i18n:XW,inner:nz,label:function(e){return XW[e.lang][GW.fillColor]},name:oz,outer:tz});const rz={highlightColour:"highlightColour",autoColor:"autoColor",moreColor:"moreColor",ok:"ok"},lz={cn:{[rz.highlightColour]:"高亮显示",[rz.autoColor]:"自动",[rz.moreColor]:"更多颜色",[rz.ok]:"确定"},en:{[rz.highlightColour]:"Highlight Colour",[rz.autoColor]:"Auto Color",[rz.moreColor]:"More Color",[rz.ok]:"OK"}};const sz={top:-1},cz={position:"absolute",bottom:3,height:3,width:14,boxSizing:"border-box"};function az(e){return G(j_,{...e,children:G(cR,{})})}function uz({onClick:e,children:t,...n}){return X(Z_,{...n,onClick:e,children:[G(az,{...n,style:{position:"relative",...n.style,...sz}}),!0!==n.menu&&G(Mh,{style:{...cz,backgroundColor:n.value}}),t]})}function dz(e){const t=lz[e.lang][rz.ok],n=lz[e.lang][rz.moreColor];return G(Y_,{...e,more:n,ok:t})}const fz="highlight-colour";var hz=Object.freeze({__proto__:null,i18n:lz,icon:az,inner:dz,label:function(e){return lz[e.lang][rz.highlightColour]},name:fz,outer:uz});const pz={align:"align",alignPackage:"alignPackage",horizontalAlign:"horizontalAlign",alignLeft:"alignLeft",alignCenter:"alignCenter",alignRight:"alignRight"},vz={cn:{[pz.align]:"对齐",[pz.alignPackage]:[{name:"左对齐",value:"left"},{name:"居中对齐",value:"center"},{name:"右对齐",value:"right"},{name:"两端对齐",value:"justify"}]},en:{[pz.align]:"Align",[pz.alignPackage]:[{name:"Left",value:"left"},{name:"Center",value:"center"},{name:"Right",value:"right"},{name:"Justify",value:"justify"}]}};const gz={left:function(e){return G(j_,{...e,children:G(aR,{width:12.5})})},center:function(e){return G(j_,{...e,children:G(dR,{width:12.5})})},right:function(e){return G(j_,{...e,children:G(uR,{width:12.5})})},justify:function(e){return G(j_,{...e,children:G(fR,{width:12.5})})}};function mz({onClick:e,children:t,...n}){var o,i;const r=null===(o=vz[n.lang][pz.alignPackage].find((e=>e.value===n.value)))||void 0===o?void 0:o.value;return X(Z_,{...n,onClick:e,children:[r&&(null===(i=gz[r])||void 0===i?void 0:i.call(gz,n)),t]})}const{hotkeys:yz}=ek;const bz={left:function(e){return yz.alignLeft},center:function(e){return yz.alignCenter},right:function(e){return yz.alignRight},justify:function(e){return yz.alignJustify}};function Cz(e){const t=vz[e.lang][pz.alignPackage].map((t=>({lang:e.lang,active:t.value===e.value,name:t.value,label:()=>t.name,hotkey:bz[t.value],outer:({children:e,...n})=>X(ch,{style:{...T_,...n.style},children:[gz[t.value](n),e]})})));return G(V_,{...e,value:t})}var wz=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+⇧+G":"Ctrl+Shift+G"},i18n:vz,inner:Cz,label:function(e){return vz[e.lang][pz.align]},name:"align",outer:mz});const xz="code",Sz={cn:{[xz]:"代码块"},en:{[xz]:"Code Block"}};function Ez(e){return G(j_,{...e,children:G("svg",{width:"14",viewBox:"0 0 12 7",children:G("path",{fill:Lf,d:"M3.82041 0.146903C3.64948 -0.0240247 3.39309 -0.0240247 3.22216 0.146903L0.145461 3.13814C-0.0254667 3.30907 -0.0254667 3.56546 0.145461 3.73639L3.1367 6.72762C3.30763 6.89855 3.56402 6.89855 3.73495 6.72762C3.90587 6.5567 3.90587 6.3003 3.73495 6.12938L1.08556 3.48L3.82041 0.745151C3.90587 0.574223 3.90587 0.317831 3.82041 0.146903V0.146903ZM6.89711 0.146903C6.72619 0.146903 6.46979 0.232367 6.38433 0.488759L4.84598 6.3003C4.76051 6.5567 4.93144 6.72762 5.18783 6.81309C5.44423 6.89855 5.61515 6.72762 5.70062 6.47123L7.23897 0.659686C7.32443 0.488759 7.15351 0.232367 6.89711 0.146903V0.146903ZM11.9395 3.13814L8.94825 0.146903C8.77732 -0.0240247 8.52093 -0.0240247 8.35 0.146903C8.17907 0.317831 8.17907 0.574223 8.35 0.745151L10.9994 3.48L8.26454 6.21484C8.09361 6.38577 8.09361 6.64216 8.26454 6.81309C8.43546 6.98402 8.69186 6.98402 8.86278 6.81309L11.854 3.82185C12.0249 3.65092 12.025 3.30907 11.9395 3.13814V3.13814Z"})})})}function kz({children:e,...t}){return X(K,{children:[G(Ez,{...t}),e]})}const Dz="code";var Iz=Object.freeze({__proto__:null,hotkey:function(e){return Mf?"⌘+⌥+C":"Ctrl+Alt+C"},i18n:Sz,label:function(e){return Sz[e.lang][xz]},name:Dz,outer:kz});const Nz="emoji",Lz="emoji",Bz={cn:{[Lz]:"表情文字"},en:{[Lz]:"Emoji"}};function Tz(e){return G(j_,{...e,children:G(Az,{})})}function Az(e){var t;const n=null!==(t=e.fill)&&void 0!==t?t:Lf;return X("svg",{width:13.5,viewBox:"0 0 12 12",children:[G("path",{fill:n,d:"M6 0.9C8.814 0.9 11.1 3.186 11.1 6C11.1 8.814 8.814 11.1 6 11.1C3.186 11.1 0.9 8.814 0.9 6C0.9 3.186 3.186 0.9 6 0.9ZM6 0C2.688 0 0 2.688 0 6C0 9.312 2.688 12 6 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 6 0Z"}),G("path",{fill:n,d:"M3.75 3.60001C3.336 3.60001 3 3.93601 3 4.35001C3 4.76401 3.336 5.1 3.75 5.1C4.164 5.1 4.5 4.76401 4.5 4.35001C4.5 3.93601 4.164 3.60001 3.75 3.60001ZM8.25 3.60001C7.836 3.60001 7.5 3.93601 7.5 4.35001C7.5 4.76401 7.836 5.1 8.25 5.1C8.664 5.1 9 4.76401 9 4.35001C9 3.93601 8.664 3.60001 8.25 3.60001ZM6 9.3C7.494 9.3 8.7 8.094 8.7 6.6H3.3C3.3 8.094 4.506 9.3 6 9.3Z"})]})}function Mz(e){return G(Tz,{...e})}const Oz={search:"search",recent:"recent",face:"face",people:"people",biology:"biology",food:"food",activity:"activity",objects:"objects",symbols:"symbols",flags:"flags",norecent:"norecent",random:"random",noresult:"noresult"},Rz={cn:{[Oz.search]:"搜索",[Oz.recent]:"最近",[Oz.face]:"表情",[Oz.people]:"人物",[Oz.biology]:"生物",[Oz.food]:"食物",[Oz.activity]:"活动",[Oz.objects]:"物件",[Oz.symbols]:"符号",[Oz.flags]:"旗帜",[Oz.norecent]:"最近没有使用表情包",[Oz.random]:"随机选择",[Oz.noresult]:"没有搜到表情"},en:{[Oz.search]:"Search",[Oz.recent]:"RECENT",[Oz.face]:"FACE",[Oz.people]:"PEOPLE",[Oz.biology]:"BIOLOGY",[Oz.food]:"FOOD",[Oz.activity]:"ACTIVITY",[Oz.objects]:"OBJECTS",[Oz.symbols]:"SYMBOLS",[Oz.flags]:"FLAGS",[Oz.norecent]:"No emojis have been used recently",[Oz.random]:"Pick one at random",[Oz.noresult]:"No emoji searched"}},Pz={[Oz.recent]:"✨",[Oz.face]:"😀",[Oz.people]:"👶",[Oz.biology]:"🐵",[Oz.food]:"🌽",[Oz.activity]:"🎉",[Oz.objects]:"🛠️",[Oz.symbols]:"🚮",[Oz.flags]:"🏁"},Fz="LOCAL_RECENT_EMOJI_KEY";var Hz=Object.freeze({__proto__:null,INPUT_HEIGHT:44,ITEM_HEIGHT:34,LOCAL_RECENT_EMOJI_KEY:Fz,keyEmoji:Pz}),_z=J((()=>Promise.resolve().then((function(){return require("./Emoji-MPzVtkBf.js")}))));const jz=J((()=>Promise.resolve().then((function(){return require("./Fluent-TH8o_7wG.js")})).then((function(e){return e.Fluent$1}))));function Wz(e){const t=Dd(e);return W((()=>G(_z,{...t.current})),[e.lang,e.value])}var zz=Object.freeze({__proto__:null,block:Wz,hotkey:function(e){return Mf?"⌘+E":"Ctrl+E"},i18n:Bz,icon:Tz,label:function(e){return Bz[e.lang][Lz]},name:Nz,outer:Mz});const Vz={lineHeight:"lineHeight",lineHeightPackage:"lineHeightPackage"},$z={cn:{[Vz.lineHeight]:"行距",[Vz.lineHeightPackage]:[{name:"默认",value:1.7},{name:"1.0",value:1},{name:"1.15",value:1.15},{name:"1.5",value:1.5},{name:"2.0",value:2},{name:"2.5",value:2.5},{name:"3.0",value:3}]},en:{[Vz.lineHeight]:"Line & paragraph spacing",[Vz.lineHeightPackage]:[{name:"1.0",value:1.7},{name:"1.15",value:2},{name:"1.5",value:2.5},{name:"2.0",value:3.4},{name:"2.5",value:4.3},{name:"3.0",value:5.1}]}};function Zz(e){return G(j_,{...e,children:G(VO,{width:13})})}function Uz({onClick:e,children:t,...n}){return X(Z_,{...n,onClick:e,children:[G(Zz,{...n}),t]})}function qz(e){const t=$z[e.lang][Vz.lineHeightPackage].map((t=>({...t,selected:t.value===e.value})));return G(gg,{style:{width:56},options:t,onClick:t=>{var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,t.value)}})}const Yz="line-height";var Kz=Object.freeze({__proto__:null,i18n:$z,inner:qz,label:function(e){return $z[e.lang][Vz.lineHeight]},name:Yz,outer:Uz});const Gz="letterSpacing",Xz={cn:{[Gz]:"文字间距"},en:{[Gz]:"Letter Spacing"}};function Jz(e){return G(j_,{...e,children:G($O,{width:13})})}function Qz({onClick:e,children:t,...n}){return X(Z_,{...n,onClick:e,children:[G(Jz,{...n}),t]})}const eV={display:"flex",alignItems:"center",padding:"25px 10px 13px 10px",borderRadius:4,boxShadow:Nf},tV={width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:2},nV={width:12,height:2,backgroundColor:Lf},oV={position:"absolute",height:12,width:2,backgroundColor:Lf},iV={height:4,width:120,borderRadius:2,marginLeft:8,marginRight:8,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:Cf,position:"relative"},rV={width:12,height:12,borderRadius:"50%",backgroundColor:"#fff",boxShadow:Nf,position:"absolute",left:0,transform:"translate(-50%, 0)",display:"flex",justifyContent:"center",alignItems:"center"},lV={width:4,height:4,borderRadius:"50%",backgroundColor:"#fff"},sV={position:"absolute",top:"calc(-100% - 6px)"},cV=50,aV=-10;function uV(e){return e>0?Math.min(cV,e)/cV*50+50:e<0?50-Math.max(aV,e)/aV*50:50}function dV(e){return e>50?Math.min(cV,(e-50)/50*cV):e<50?Math.max(aV,(50-e)/50*aV):0}function fV(e){const t={track:Z(null),thumb:Z(null)},n=function(e,t){const n=Dd(e),{track:o,thumb:i}=t,r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("pointermove"),c=Nd("pointerdown"),a=Nd("pointerdown"),u=Nd("pointerdown"),d=Nd("pointerdown"),f=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]),F((()=>{const e=d.pipe(Iu((()=>{var e,t,o;let i=Math.max(aV,(null!==(e=n.current.value)&&void 0!==e?e:0)-.1);return null===(o=(t=n.current).onChange)||void 0===o||o.call(t,i),yu(0,Ha).pipe(Nu(l)).pipe(lu((()=>(i=Math.max(aV,i-.1),i))))}))).subscribe((e=>{var t,o;null===(o=(t=n.current).onChange)||void 0===o||o.call(t,e)}));return()=>e.unsubscribe()}),[n,d,l]),F((()=>{const e=f.pipe(Iu((()=>{var e,t,o;let i=Math.min(cV,(null!==(e=n.current.value)&&void 0!==e?e:0)+.1);return null===(o=(t=n.current).onChange)||void 0===o||o.call(t,i),yu(0,Ha).pipe(Nu(l)).pipe(lu((()=>(i=Math.min(cV,i+.1),i))))}))).subscribe((e=>{var t,o;null===(o=(t=n.current).onChange)||void 0===o||o.call(t,e)}));return()=>e.unsubscribe()}),[n,f,l]),F((()=>{const e=s.pipe(Iu((()=>c.pipe(Nu(a)).pipe(Nu(u))))).subscribe((e=>{var t,r;const l=o.current,s=i.current;if(null===l||null===s)return;const c=l.getBoundingClientRect(),a=l.clientWidth-s.clientWidth,u=e.clientX-c.left-s.clientWidth/2,d=100*Math.min(1,Math.max(0,u/a));null===(r=(t=n.current).onChange)||void 0===r||r.call(t,dV(d))}));return()=>e.unsubscribe()}),[n,r,l,i,a,o,c,s,u]),F((()=>{const e=c.pipe(Iu((({pageX:e})=>{let t=-1,s=0;return r.pipe(Nu(l)).pipe(lu((r=>{const l=o.current,c=i.current;return null===l||null===c?0:(-1===t&&(t=n.current.value),0===s&&(s=l.clientWidth-c.clientWidth),dV((r.pageX-e)/s*100+uV(t)))})))}))).subscribe((e=>{var t,o;null===(o=(t=n.current).onChange)||void 0===o||o.call(t,e)}));return()=>e.unsubscribe()}),[n,r,l,i,o,c]),{track:Ld([c,s]),thumb:Ld([a]),origin:Ld([u]),decrease:Ld([d]),increase:Ld([f])}}(e,t);return X(hh,{style:eV,onClick:e=>e.stopPropagation(),children:[G(dv,{type:"background",style:tV,...n.decrease,children:G("div",{style:nV})}),X(ch,{style:iV,ref:t.track,...n.track,children:[G(ch,{style:lV,onClick:()=>{var t;return null===(t=e.onChange)||void 0===t?void 0:t.call(e,0)},...n.origin}),G(ch,{style:{...rV,left:`${uV(e.value)}%`},ref:t.thumb,...n.thumb,children:G("span",{style:sV,children:e.value})})]}),X(dv,{type:"background",style:tV,...n.increase,children:[G("div",{style:nV}),G("div",{style:oV})]})]})}const hV="letter-spacing";var pV=Object.freeze({__proto__:null,i18n:Xz,inner:fV,label:function(e){return Xz[e.lang][Gz]},name:hV,outer:Qz});function vV(e){return G(j_,{...e,children:G(JO,{width:13})})}const gV="search",mV={cn:{[gV]:"搜索"},en:{[gV]:"Search"}};function yV({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:t=>{t.stopPropagation(),null==e||e(t)},children:[G(vV,{...n}),t]})}const bV={display:"flex",padding:"4px 0",borderRadius:4,boxShadow:Nf,width:300,flexDirection:"column"};function CV(e){return G(hh,{style:{...bV,...e.style},onClick:e=>e.stopPropagation(),children:e.children})}const wV="search";var xV=Object.freeze({__proto__:null,Search:vV,hotkey:function(e){return Mf?"⌘+F":"Ctrl+F"},i18n:mV,inner:CV,label:function(e){return mV[e.lang][gV]},name:wV,outer:yV});const SV={border:"border",borderAll:"borderAll",borderOutline:"borderOutline",borderInside:"borderInside",borderNone:"borderNone",borderLeft:"borderLeft",borderRight:"borderRight",borderTop:"borderTop",borderBottom:"borderBottom",borderColor:"borderColor",borderStyle:"borderStyle",borderShow:"borderShow",borderHide:"borderHide",moreColor:"moreColor",ok:"ok"},EV={cn:{[SV.border]:"边框",[SV.borderAll]:"全边框",[SV.borderOutline]:"外边框",[SV.borderInside]:"粗外边框",[SV.borderNone]:"无边框",[SV.borderLeft]:"左边框",[SV.borderRight]:"右边框",[SV.borderTop]:"上边框",[SV.borderBottom]:"下边框",[SV.borderColor]:"边框颜色",[SV.borderStyle]:"边框样式",[SV.moreColor]:"更多颜色",[SV.borderShow]:"显示边框",[SV.borderHide]:"隐藏边框",[SV.ok]:"确定"},en:{[SV.border]:"Borders",[SV.borderAll]:"Border All",[SV.borderOutline]:"Border Outline",[SV.borderInside]:"Border Bold Outline",[SV.borderNone]:"Border None",[SV.borderLeft]:"Border Left",[SV.borderRight]:"Border Right",[SV.borderTop]:"Border Top",[SV.borderBottom]:"Border Bottom",[SV.borderColor]:"Border Color",[SV.borderStyle]:"Border Style",[SV.moreColor]:"More Color",[SV.borderShow]:"Border Show",[SV.borderHide]:"Border Hide",[SV.ok]:"OK"}};function kV(e,t){var n,o,i,r,l,s,c,a;switch(e){case SV.borderAll:null===(n=t.all)||void 0===n||n.call(t);break;case SV.borderOutline:null===(o=t.outline)||void 0===o||o.call(t);break;case SV.borderInside:null===(i=t.inside)||void 0===i||i.call(t);break;case SV.borderNone:null===(r=t.none)||void 0===r||r.call(t);break;case SV.borderLeft:null===(l=t.left)||void 0===l||l.call(t);break;case SV.borderRight:null===(s=t.right)||void 0===s||s.call(t);break;case SV.borderTop:null===(c=t.top)||void 0===c||c.call(t);break;case SV.borderBottom:null===(a=t.bottom)||void 0===a||a.call(t)}}function DV(e){return G(j_,{...e,children:G(NR,{})})}function IV({onClick:e,children:t,...n}){return X(Z_,{...n,onClick:e,children:[G(DV,{...n}),t]})}const NV={position:"relative",boxShadow:Nf,borderRadius:4,padding:"7px 0"},LV={margin:"2px 7px 0 7px"},BV={display:"flex",paddingBottom:6},TV={width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:2,margin:"0 4px",borderStyle:""},AV={height:30,position:"relative",fontSize:12},MV={display:"flex",alignItems:"center",height:"100%",paddingLeft:16},OV=[[{key:SV.borderNone,icon:function(e){return G(j_,{...e,children:G(BR,{})})}},{key:SV.borderAll,icon:function(e){return G(j_,{...e,children:G(DR,{})})}},{key:SV.borderOutline,icon:DV},{key:SV.borderInside,icon:function(e){return G(j_,{...e,children:G(LR,{})})}}],[{key:SV.borderLeft,icon:function(e){return G(j_,{...e,children:G(AR,{})})}},{key:SV.borderRight,icon:function(e){return G(j_,{...e,children:G(MR,{})})}},{key:SV.borderTop,icon:function(e){return G(j_,{...e,children:G(OR,{})})}},{key:SV.borderBottom,icon:function(e){return G(j_,{...e,children:G(RR,{})})}}]];function RV(e){var t;const n=EV[e.lang];return X(hh,{style:NV,children:[G("div",{style:LV,children:OV.map(((t,o)=>G("div",{style:BV,children:t.map(((t,o)=>G(Bk,{tips:n[t.key],children:G(dv,{style:TV,onClick:()=>{var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,{...e.value,type:t.key})},children:G(t.icon,{...e})})},o)))},o)))}),G(dv,{style:AV,children:G(ch,{style:MV,onClick:()=>{var t,n;return null===(t=e.onChange)||void 0===t?void 0:t.call(e,{...e.value,visible:!(null===(n=e.value)||void 0===n?void 0:n.visible)})},children:(null===(t=e.value)||void 0===t?void 0:t.visible)?n[SV.borderHide]:n[SV.borderShow]})}),G(dv,{style:AV,children:G(Z_,{...e,onChange:t=>{var n;return null===(n=e.onChange)||void 0===n?void 0:n.call(e,{...e.value,color:t})},inner:PV,menu:!0,children:G("span",{children:n[SV.borderColor]})})})]})}function PV(e){const t=EV[e.lang][SV.ok],n=EV[e.lang][SV.moreColor];return G("div",{onPointerDown:e=>e.stopPropagation(),children:G(Y_,{...e,more:n,ok:t})})}var FV=Object.freeze({__proto__:null,i18n:EV,inner:RV,keys:SV,label:function(e){return EV[e.lang][SV.border]},name:"border",outer:IV,switchType:kV});const HV="merge",_V="headsUp",jV="mergeWithFreeze",WV={cn:{[HV]:"合并单元格",[_V]:"注意！",[jV]:"无法合并已冻结行或列。"},en:{[HV]:"Merge Cells",[_V]:"Heads Up!",[jV]:"You can't merge frozen rows or columns."}};function zV(e){return G(j_,{...e,children:G(PR,{width:12.5})})}function VV({onClick:e,children:t,...n}){return X(ch,{style:{...T_,...n.style},onClick:e,children:[G(zV,{...n}),t]})}const $V="merge";var ZV=Object.freeze({__proto__:null,i18n:WV,label:function(e){return WV[e.lang][HV]},name:$V,outer:VV});const UV={verticalAlign:"verticalAlign",verticalPackage:"verticalPackage",verticalTop:"verticalTop",verticalMiddle:"verticalMiddle",verticalBottom:"verticalBOttom"},qV={cn:{[UV.verticalAlign]:"垂直对齐",[UV.verticalPackage]:[{name:"顶对齐",value:"top"},{name:"垂直居中",value:"middle"},{name:"底对齐",value:"bottom"}]},en:{[UV.verticalAlign]:"Vertical Align",[UV.verticalPackage]:[{name:"Top",value:"top"},{name:"Middle",value:"middle"},{name:"Bottom",value:"bottom"}]}};const YV={top:function(e){return G(j_,{...e,children:G(hR,{})})},middle:function(e){return G(j_,{...e,children:G(pR,{width:13})})},bottom:function(e){return G(j_,{...e,children:G(vR,{})})}};function KV({onClick:e,children:t,...n}){var o,i,r;const l=null===(o=qV[n.lang][UV.verticalPackage].find((e=>e.value===n.value)))||void 0===o?void 0:o.value;return X(Z_,{...n,onClick:e,children:[null!==(r=l&&(null===(i=YV[l])||void 0===i?void 0:i.call(YV,n)))&&void 0!==r?r:YV.middle(n),t]})}const GV={top:function(e){return Mf?"⌘+⇧+T":"Ctrl+Shift+T"},middle:function(e){return Mf?"⌘+⇧+M":"Ctrl+Shift+M"},bottom:function(e){return Mf?"⌘+⇧+B":"Ctrl+Shift+B"}};function XV(e){const t=qV[e.lang][UV.verticalPackage].map((t=>({lang:e.lang,active:t.value===e.value,name:t.value,label:()=>t.name,hotkey:GV[t.value],outer:({children:e,...n})=>X(ch,{style:{...T_,...n.style},children:[YV[t.value](n),e]})})));return G(V_,{...e,value:t})}var JV=Object.freeze({__proto__:null,i18n:qV,inner:XV,keys:UV,label:function(e){return qV[e.lang][UV.verticalAlign]},name:"vertical",outer:KV});function QV(e){const[t,n]=Od((()=>({more:{fold:0,active:!1}}))),o=function(e,t){if(e.sliceTools)return e.sliceTools(e,t);let{fold:n}=t.more;if(n<=0)return e.tools;const o=[],i=[...e.tools];let r=i.length-1;for(;r>=0&&n>=0;){let e=i[r].length-1;for(;e>=0&&n>=0;)o.push(i[r][e]),i[r]=i[r].slice(0,-1),e--,n--;if(!(n>=0))break;0===i[r].length&&i.splice(r,1),r--}return i[r]=[...i[r],{...rj,active:t.more.active,inner:e=>J_({...e,value:o})}],i}(e,t),i=sj();return lj(e,t,n,i),G(ej,{value:n,children:G(Q_,{value:t,children:G(tj,{value:e.ref,children:G("div",{style:{...b_,...e.style,width:"unset",justifyContent:t.more.fold>0?"flex-start":"center"},ref:i.container,children:o.map(((t,n)=>{const r=n===o.length-1;return X("div",{style:{...C_,marginRight:r?0:y_},children:[t.map(((n,o)=>G("div",{ref:e=>{i.tools.set(n.name,e)},children:G(e$,{lang:e.lang,last:r&&o===t.length-1,tipsDirection:e.tipsDirection,...n})},n.name))),!r&&G(Mh,{type:"right",style:w_})]},n)}))})})})})}function e$(e){const t=e.active?{borderRadius:2,opacity:e.disable?.6:1}:{opacity:e.disable?.6:1};let n=e.label(e);return e.hotkey&&(n=`${n} (${e.hotkey(e)})`),"function"==typeof e.inner?G(Dg,{view:G(e.inner,{...e}),active:e.active,style:{...x_,marginRight:e.last?0:y_},children:G(Bk,{tips:n,hide:e.hideTips||e.active,direction:e.tipsDirection,children:G("div",{style:t,children:G(dv,{style:{...S_,...e.style},children:G(e.outer,{...e})})})})}):G(Bk,{tips:n,style:{...x_,marginRight:e.last?0:y_},hide:e.hideTips,direction:e.tipsDirection,children:G("div",{style:t,children:G(dv,{style:{...S_,...e.style},children:G(e.outer,{...e})})})})}function t$(e){let t="";return!0===e.underline&&(t+="underline "),!0===e.lineThrough&&(t+="line-through "),""===t&&(t="none"),{textDecorationLine:t.trim()}}function n$(e,t){var n,o;const i=null!==(o=null===(n=e.editor.selectionStyle)||void 0===n?void 0:n[t])&&void 0!==o?o:e.editor.style[t];if(void 0!==i)return i}function o$(e,t){var n,o;const i=t.editor.selectionStyle;if(e.name===tW){const e=null==i?void 0:i.fontWeight;if("bolder"===e||"bold"===e)return!0;if(!isNaN(Number(e)))return Number(e)>=700}else{if(e.name===IW)return"italic"===(null==i?void 0:i.fontStyle);if(e.name===_W)return(null!==(n=null==i?void 0:i.textDecorationLine)&&void 0!==n?n:"").indexOf("underline")>=0;if(e.name===MW)return(null!==(o=null==i?void 0:i.textDecorationLine)&&void 0!==o?o:"").indexOf("line-through")>=0}return!1}function i$(e,t){let{fold:n}=t.more;if(n<=0)return e.tools;const o=[],i=[...e.tools];let r=i.length-1;for(;r>=0&&n>=0;){let e=i[r].length-1;for(;e>=0&&n>=0;){i[r][e].name!==wV?(o.push(i[r][e]),i[r]=i[r].slice(0,-1),e--,n--):(e--,n--)}if(!(n>=0))break;0===i[r].length&&i.splice(r,1),r--}return i[r]=[...i[r],{...rj,active:t.more.active,inner:e=>J_({...e,value:o})}],i}const r$=44,l$="entry",s$="afoqwelkrmfaodi",c$="MOBILE_FILE_TREE",a$="MOBILE_FILE_STICKY",u$="MOBILE_FILE_CONTENT",d$="MOBILE_FILE_SCROLLBAR",f$={EDITOR:"editor",FILE:"file",NODE:"node",SHEET:"sheet",REFER:"refer",LINK:"link",PANEL:"panel",EMOJI:"emoji",TOGGLE:"toggle",OUTLINE:"outline",SELECTOR:"selector",OPTION:"option",SLASH:"slash",TOOL_BAR:"tool-bar",NONE:"none"},h$=">",p$=222,v$=30,g$=800,m$=1e4,y$={PASTE_NODE:"paste-node",PASTE_LINK:"paste-link",PASTE_BACK:"paste-back",PASTE_SHEET:"paste-sheet"},b$="SAFARI_MODAL_VISIBLE",C$="shuli",w$="editor",x$="assets",S$="catalog",E$="reference",k$="segment",D$=`/${C$}/bootstrap.json`,I$=`/${C$}/changelog.json`,N$=`/${C$}/${w$}`,L$=`/${C$}/${x$}`,B$=`/${C$}/${S$}`,T$=`/${C$}/${k$}`,A$=`/${C$}/${S$}/index.json`,M$=`/${C$}/${E$}`,O$=`/${C$}/${E$}/index.json`,R$={1:yf,2:"#f57c00",3:`linear-gradient(135deg, ${yf} , #f57c00)`},P$={paddingBottom:400},F$={display:"flex",flex:1,height:"100%"},H$={position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1e6},_$={flex:1,position:"relative"},j$={position:"absolute",left:Of?.5:0,right:0,paddingTop:8,paddingBottom:8,zIndex:10001},W$={marginLeft:5,marginRight:5,transform:"translateY(0)",transition:"transform 300ms"},z$={position:"absolute",top:8,left:0,right:0,transform:"translateY(0)",transition:"transform 300ms",display:"flex",justifyContent:"center",alignItems:"center"},V$={display:"flex",alignItems:"center",position:"relative",top:Pf?-.3:-.5},$$={display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"},Z$={display:"inline-block",paddingLeft:4,paddingRight:4,position:"relative",top:1.5},U$={position:"relative",top:1.5},q$={position:"relative",overflow:"hidden",height:300},Y$={position:"absolute",top:0},K$={position:"fixed",left:0,opacity:0,height:400,resize:"none",pointerEvents:"none"},G$={width:18,height:18,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:8,backgroundColor:"#fff",cursor:"pointer",opacity:.8},X$={lineHeight:1.5},J$={marginTop:10},Q$={position:"relative",paddingLeft:18,display:"flex",alignItems:"center"},eZ={position:"absolute",left:0,display:"flex",alignItems:"center"},tZ={fontSize:14,marginTop:15},nZ={width:"100%",boxSizing:"border-box",position:"relative",top:0,left:0,right:0,zIndex:1,fontSize:14,fontWeight:Bf},oZ={position:"absolute",top:0,left:0,right:0,zIndex:2,fontSize:14,backgroundColor:mf},iZ={flex:1,height:28,boxSizing:"border-box",backgroundColor:bf,borderRadius:15,display:"flex",alignItems:"center",paddingLeft:10,paddingRight:10,marginLeft:8,marginRight:8,marginTop:8,position:"absolute",left:0,right:0,zIndex:1},rZ={position:"relative",top:1.5},lZ={outline:"none",border:"none",height:"100%",padding:"0 6px",color:kf,backgroundColor:"transparent",position:"absolute",left:24,width:"calc(100% - 36px)",fontSize:14,fontWeight:Bf},sZ={position:"absolute",left:30,color:If,pointerEvents:"none",fontSize:14},cZ={display:"flex",flex:1,fontSize:14,alignItems:"center",height:"100%"},aZ={display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:2,pointerEvents:"visible"},uZ={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:mf,textAlign:"center",paddingTop:100,color:Df},dZ={height:28,display:"flex",alignItems:"center",color:Df,position:"relative",top:8},fZ={display:"flex",marginTop:8,marginLeft:8,marginRight:8,marginBottom:8,position:"absolute",left:0,right:0,top:36,zIndex:1},hZ={flex:1,height:28,boxSizing:"border-box",backgroundColor:bf,borderRadius:15,display:"flex",alignItems:"center",paddingLeft:10,paddingRight:10,position:"relative"},pZ={width:p$,height:"100%",flexShrink:0,zIndex:1e3,backgroundColor:mf,position:"relative"},vZ={position:"absolute",right:-2,top:0,bottom:0,width:4,cursor:"col-resize"},gZ={position:"absolute",bottom:0,opacity:0,pointerEvents:"none"},mZ={position:"absolute",width:200,height:"50vh",maxHeight:"80vh",zIndex:1e5,left:0,top:0,boxShadow:Nf,borderRadius:8,overflow:"hidden",transition:"transform 200ms, opacity 100ms",transformOrigin:"right center"},yZ={position:"absolute",top:0},bZ={height:30,flex:1,position:"absolute",top:0,left:0,right:0,cursor:"move",display:"flex",alignItems:"center",justifyContent:"flex-end",zIndex:1},CZ={width:20,height:20,borderRadius:4,marginRight:4,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},wZ={position:"absolute",top:0,bottom:0,left:0,width:5,zIndex:100,cursor:"col-resize"},xZ={position:"absolute",top:0,bottom:0,right:0,width:5,zIndex:100,cursor:"col-resize"},SZ={position:"absolute",left:0,right:0,top:0,height:5,zIndex:100,cursor:"row-resize"},EZ={position:"absolute",left:0,right:0,bottom:0,height:5,zIndex:100,cursor:"row-resize"},kZ={position:"absolute",right:0,top:0,bottom:0,width:22,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",marginRight:6,pointerEvents:"none",zIndex:100001},DZ={position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",pointerEvents:"visible",cursor:"pointer",paddingRight:6,transition:"transform 200ms, opacity 100ms",transformOrigin:"right center"},IZ={height:3,display:"flex",justifyContent:"flex-end",marginTop:6,marginBottom:6,borderRadius:3},NZ={width:3,height:3,borderRadius:"50%",marginLeft:1},LZ={width:750,height:Math.min(document.body.clientHeight,Math.min(640,document.body.clientHeight-250)),top:0,padding:"24px 0 24px 0"},BZ={display:"flex",flexDirection:"column",paddingTop:0,position:"absolute",boxSizing:"border-box",bottom:0,top:0,left:0,right:0,overflow:"auto"},TZ={display:"flex",alignItems:"center",paddingTop:24,paddingLeft:24,paddingRight:24,paddingBottom:8,marginBottom:16,fontSize:18,fontWeight:"bolder",position:"sticky",top:0,width:"100%",boxSizing:"border-box",zIndex:100},AZ={marginRight:10,display:"flex",alignItems:"center",marginBottom:3},MZ={flexShrink:0,borderRadius:10,marginBottom:25,marginLeft:24,marginRight:24,boxSizing:"border-box",boxShadow:"0 0 3px 1px rgba(0, 0, 0, 0.1)"},OZ={flexShrink:0,height:60,borderRadius:10,marginLeft:24,marginRight:24,marginBottom:25,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",boxShadow:"0 0 3px 1px rgba(0, 0, 0, 0.1)"},RZ={height:36,borderTopLeftRadius:10,borderTopRightRadius:10,backgroundColor:bf,marginBottom:25,display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:0},PZ={display:"flex",marginLeft:10,alignItems:"center"},FZ={display:"flex",marginRight:10},HZ={display:"flex",height:40,marginBottom:25,fontSize:14,color:Df,position:"relative"},_Z={position:"absolute",left:15,bottom:-18,color:"red",fontSize:11},jZ={display:"flex",alignItems:"center",justifyContent:"flex-end",width:100,marginRight:30},WZ={flex:1,marginRight:30,position:"relative",display:"flex",alignItems:"center"},zZ={width:26,height:26,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:4},VZ={marginLeft:5,fontSize:14,color:Df,display:"flex",alignItems:"center"},$Z={marginLeft:5},ZZ={border:"1px solid #fff",borderRadius:3,padding:"2px 4px",color:"#fff",fontSize:10,marginLeft:5,marginRight:3,cursor:"pointer"},UZ={outline:"none",border:"none",width:"100%",height:40,boxSizing:"border-box",backgroundColor:mf,borderRadius:20,position:"relative",color:kf,padding:"4px 15px 4px 15px",boxShadow:"inset 0 0 3px 1px rgba(0, 0, 0, 0.1)"},qZ={boxShadow:"none"},YZ={height:40,maxHeight:240,width:"100%",color:kf,backgroundColor:mf,borderRadius:20,boxSizing:"border-box",padding:"4px 15px 4px 15px",boxShadow:"inset 0 0 3px 1px rgba(0, 0, 0, 0.1)",cursor:"pointer",position:"absolute",display:"flex",alignItems:"flex-start",alignSelf:"flex-start",transition:"height 200ms",willChange:"height",overflow:"hidden",zIndex:2},KZ={height:40,width:"100%",color:kf,backgroundColor:mf,borderRadius:20,boxSizing:"border-box",padding:"4px 15px 4px 15px",boxShadow:"inset 0 0 3px 1px rgba(0, 0, 0, 0.1)",cursor:"pointer",position:"absolute",display:"flex",alignItems:"flex-start",alignSelf:"flex-start",transition:"height 200ms",willChange:"height",overflow:"hidden",zIndex:1},GZ={display:"flex",position:"relative",top:6,overflow:"hidden"},XZ={display:"flex",position:"relative",top:6,overflow:"hidden"},JZ={minHeight:40,position:"absolute",top:40,left:0,right:0,maxHeight:200,overflow:"auto"},QZ={minHeight:40,position:"absolute",top:40,left:0,right:0},eU={display:"flex",height:40,justifyContent:"flex-start",alignItems:"center",paddingLeft:15,paddingRight:15,boxSizing:"border-box",position:"relative"},tU={position:"absolute",right:13.5,alignSelf:"center",display:"flex"},nU={position:"absolute",right:12,top:13.5,display:"flex"},oU={position:"absolute",right:12,top:13.5,display:"flex"},iU={position:"relative",display:"inline-flex"},rU={position:"absolute",right:-3.5,top:-3,border:"1px solid #fff",width:6,height:6,borderRadius:"50%"},lU={display:"inline-flex",animationName:"rotate",animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"},sU={display:"inline-flex",transition:"transform 1s linear",transform:"rotate(0deg)"},cU={display:"inline-flex",animation:"rotate 1.2s linear infinite",cursor:"pointer"},aU={width:14,display:"flex",marginRight:1,alignItems:"center",justifyContent:"center"},uU={display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"transform 200ms"},dU={transform:"rotate(90deg)"},fU={transform:"rotate(-90deg)"},hU={position:"absolute",right:12,display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:15,height:15},pU={display:"flex",marginBottom:25,marginLeft:30,marginRight:30},vU={flex:1,height:40,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:20},gU={position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:20,paddingBottom:20},mU={width:200,height:200,borderRadius:8,overflow:"hidden"},yU={marginTop:Pf?20:10,fontSize:14},bU={fontSize:12,marginTop:10,color:"red"},CU={position:"absolute",left:"100%",width:180,top:0,paddingTop:6,paddingBottom:6,borderRadius:4,boxShadow:Nf,zIndex:1},wU={display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:16,paddingRight:16,height:30,fontSize:12},xU=U({}),SU=U({}),EU=U(null),kU=U(null),DU=U(null),IU=U(null),NU=U(null),LU=U(null),BU=U(null),TU=U(null),AU=U(null),MU=U(null),OU=U(null),RU=U(null),PU=U(null),FU=U(null),HU=U(null),_U=(e,t)=>n=>(n.changelog=e,t&&(n=aq({changelog:!0})(n)),n),jU=(e,t)=>n=>(n.changelog||(n.changelog={}),n.changelog[e]||(n.changelog[e]={}),n.changelog[e][t]||(n.changelog[e][t]={}),n),WU=(e,t,n=0)=>o=>{var i,r,l,s,c,a,u;o=jU("update",e)(o);const{uuid:d,sn:f}=mRe(t);if(n>=0){const t=o.changelog.update[e],r=Date.now();void 0===t[d]&&(t[d]={});const l=null!==(i=t[d][f])&&void 0!==i?i:[];l[n]=Math.floor(r/1e3),t[d][f]=l}const h=null===(l=null===(r=o.changelog.delete)||void 0===r?void 0:r[e])||void 0===l?void 0:l[d];if(h){const t=h.indexOf(f);-1!==t&&h.splice(t,1),Sc(null===(c=null===(s=o.changelog.delete)||void 0===s?void 0:s[e])||void 0===c?void 0:c[d])&&(null===(u=null===(a=o.changelog.delete)||void 0===a?void 0:a[e])||void 0===u||delete u[d])}return o=aq({changelog:!0})(o)},zU=(e,t)=>n=>{var o,i,r,l,s,c,a,u,d,f,h,p;n=jU("delete",e)(n);const{uuid:v,sn:g}=mRe(t);if(!(null===(l=null===(r=null===(i=null===(o=n.changelog.update)||void 0===o?void 0:o[e])||void 0===i?void 0:i[v])||void 0===r?void 0:r[g])||void 0===l?void 0:l[1]))return n;const m=n.changelog.delete[e],y=null!==(s=m[v])&&void 0!==s?s:[];return-1===y.indexOf(g)&&y.push(g),m[v]=y,null===(u=null===(a=null===(c=n.changelog.update)||void 0===c?void 0:c[e])||void 0===a?void 0:a[v])||void 0===u||delete u[g],Sc(null===(f=null===(d=n.changelog.update)||void 0===d?void 0:d[e])||void 0===f?void 0:f[v])&&(null===(p=null===(h=n.changelog.update)||void 0===h?void 0:h[e])||void 0===p||delete p[v]),n=aq({changelog:!0})(n)},VU=(e,t)=>n=>{var o,i,r,l,s,c,a,u,d,f,h,p,v;const{uuid:g,sn:m}=mRe(t),y=null===(i=null===(o=n.changelog.delete)||void 0===o?void 0:o[e])||void 0===i?void 0:i[g];if(y){const t=y.indexOf(m);-1!==t&&y.splice(t,1),Sc(null===(l=null===(r=n.changelog.delete)||void 0===r?void 0:r[e])||void 0===l?void 0:l[g])&&(null===(c=null===(s=n.changelog.delete)||void 0===s?void 0:s[e])||void 0===c||delete c[g])}return null===(d=null===(u=null===(a=n.changelog.update)||void 0===a?void 0:a[e])||void 0===u?void 0:u[g])||void 0===d||delete d[m],Sc(null===(h=null===(f=n.changelog.update)||void 0===f?void 0:f[e])||void 0===h?void 0:h[g])&&(null===(v=null===(p=n.changelog.update)||void 0===p?void 0:p[e])||void 0===v||delete v[g]),n=aq({changelog:!0})(n)},$U=(e,t,n)=>o=>{var i,r;const l=null===(r=null===(i=(o=jU("record",e)(o)).changelog)||void 0===i?void 0:i.record)||void 0===r?void 0:r[e];return l?(l[t]=n,o):o},ZU=(e,t)=>n=>{var o,i,r;return null===(r=null===(i=null===(o=n.changelog)||void 0===o?void 0:o.record)||void 0===i?void 0:i[e])||void 0===r||delete r[t],n},{isNodeEqual:UU,isEmptyNode:qU,transformEditNodeToNode:YU,injectSplitBlockNodeStyle:KU,DetectFlag:GU}=ek,{getBranchByPath:XU,recursiveTree:JU,recursiveTreeSource:QU}=xT,eq=e=>t=>(void 0===t.store&&(t.store={}),t.store.pending=e,t),tq=()=>e=>{const{editor:{uids:t},file:n,store:o}=e;if(!o||!n)return e;const{editor:i,reference:r,crud:l}=o;if(l)return e;const s=n.currentPageId;for(const e in i)e!==s&&delete i[e];const c=Object.values(null!=t?t:{});for(const e in r)c.includes(e)||delete r[e];e=Tq()(e);for(const t of n.tree){const n=nje(t);e=sq(n)(e)}return e=oq()(e)},nq=()=>e=>{const{file:t,undoredo:n}=e;if(!t||!n)return e;const o=t.currentPageId;for(const e in n)o!==e&&delete n[e];return e},oq=()=>e=>(e=Oq()(e),e=Fq()(e),e=jq()(e)),iq=e=>t=>{var n,o,i;if(!e)return t;t.store||(t.store={});const{editor:r,catalog:l,reference:s}=e,c={};if(r)for(const e in r)(null===(n=t.store.editor)||void 0===n?void 0:n[e])||(c.editor||(c.editor={}),c.editor[e]=r[e]);if(l)for(const e in l)(null===(o=t.store.catalog)||void 0===o?void 0:o[e])||(c.catalog||(c.catalog={}),c.catalog[e]=l[e]);if(s)for(const e in s)(null===(i=t.store.reference)||void 0===i?void 0:i[e])||(c.reference||(c.reference={}),c.reference[e]=s[e]);return t=rq(c)(t)},rq=(e,t)=>n=>{if(!e)return n;n.store||(n.store={}),n=t?mq(e)(n):gq(e)(n),n=Lq(e)(n),n=Dq(e)(n);const{record:o,crud:i}=e;return o&&(n=aq(o)(n)),i&&(n=fq(i)(n)),n},lq=e=>t=>{void 0===t.store&&(t.store={}),void 0===t.store.reference&&(t.store.reference={});const n=t.store.reference;for(const t in e)void 0===n[t]&&(n[t]=e[t]);return t},sq=e=>t=>{void 0===t.store&&(t.store={}),void 0===t.store.catalog&&(t.store.catalog={});const n=t.store.catalog;for(const t in e)void 0===n[t]&&(n[t]=e[t]);return t},cq=(e,t)=>n=>{void 0===n.store&&(n.store={}),void 0===n.store.editor&&(n.store.editor={});return n.store.editor[e]=Lje(t),n},aq=e=>t=>(void 0===t.store&&(t.store={}),void 0===t.store.record&&(t.store.record={}),Object.assign(t.store.record,e),t),uq=()=>e=>{var t;return null===(t=e.store)||void 0===t||delete t.record,e},dq=()=>e=>(void 0===e.store&&(e.store={}),void 0===e.store.crud&&(e.store.crud={}),e),fq=e=>t=>(e.create&&(t=Rq(e.create)(t)),e.update&&(t=Hq(e.update)(t)),e.delete&&(t=Aq(e.delete)(t)),t),hq=(e,t,n=!0)=>o=>{var i,r,l;void 0===o.store&&(o.store={}),void 0===o.store.editor&&(o.store.editor={});const s=o.store.editor,c=t.data.children[0];if(zve(c)){const t=null===(i=c.props)||void 0===i?void 0:i.id;if(t&&t!==e)return o=oq()(o),o=$q()(o)}o=s[e]?Hq({editor:[e]})(o):Rq({editor:[e]})(o),n&&(o=WU("editor",e)(o));const a=Lje(t);if(a.data.children.length>m$){const e=null!==(r=navigator.hardwareConcurrency)&&void 0!==r?r:4,t=null!==(l=a.segments)&&void 0!==l?l:[];for(let n=t.length;n<e;n++)t[n]=pRe();a.segments=t}return s[e]=a,o},pq=(e,t=!0)=>n=>{var o;return void 0===(e=null!=e?e:null===(o=n.file)||void 0===o?void 0:o.currentPageId)||n.editor.detect.flag!==GU.STATIC?n:n=hq(e,n.editor,t)(n)},vq=e=>t=>{var n,o,i;if(void 0===(e=null!=e?e:null===(n=t.file)||void 0===n?void 0:n.currentPageId))return t;if(!Fje(e,t.store))return t;const r=null===(i=null===(o=t.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[e];if(void 0===r)return t;let l=!1;const{data:s,uids:c={}}=r,a=Js(s.children);if(!qU(a,!0)){const e=CPe();KU(e),s.children.push(e),l=!0}return l&&(t=hq(e,r)(t)),t},gq=e=>t=>(void 0===t.store&&(t.store={}),void 0===t.store.editor&&(t.store.editor={}),Object.assign(t.store.editor,e.editor),t),mq=e=>t=>{var n;if(!(null===(n=t.store)||void 0===n?void 0:n.editor)||!e.editor)return t;for(const n in e.editor){const o=t.store.editor[n],i=e.editor[n];o?(o.data=i.data,o.uids=i.uids):t.store.editor[n]=i}return t},yq=(e,t=!0,n)=>o=>{var i,r,l,s,c;if(null==n?void 0:n(e))return o;const a=null===(r=null===(i=(o=E9(e)(o)).store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[e];if(void 0===a)return o;const{data:u,uids:d}=a;o=Hq({editor:[e]})(o),o=WU("editor",e)(o);for(const t in d){const n=d[t],i=null===(s=null===(l=o.store)||void 0===l?void 0:l.reference)||void 0===s?void 0:s[n];if(!i)continue;const r={...i.data};r.props={...r.props,uid:t},o=Sq(d[t],r,e)(o)}if(!t)return o;const f=null===(c=o.store)||void 0===c?void 0:c.reference,{children:h}=V_e(u,f);return JU(null!=h?h:[],(({type:e,id:i})=>{"page"===e&&(o=yq(i,t,n)(o))})),o},bq=(e,t=!0,n)=>o=>{var i,r,l,s,c;if(null==n?void 0:n(e))return o;const a=null===(r=null===(i=o.store)||void 0===i?void 0:i.auth)||void 0===r?void 0:r.delete;if(!(null==a?void 0:a.includes(e)))return o;const u=null===(s=null===(l=(o=E9(e)(o)).store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[e];if(void 0===u)return o;const{data:d,uids:f}=u;o=Aq({editor:[e],catalog:[e]})(o),o=zU("editor",e)(o);for(const t in f)o=kq(f[t],t,e)(o);if(!t)return o;for(const i of d.children)if(zve(i)){const r=null===(c=i.props)||void 0===c?void 0:c.id;if(!r||r===e)continue;o=bq(r,t,n)(o)}return o},Cq=e=>t=>{var n,o;const i=null===(o=null===(n=t.store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[e];return i?(delete i.highlights,delete i.ghighlights,t):t},wq=(e,t)=>n=>{var o,i,r;if(void 0===(null===(o=n.store)||void 0===o?void 0:o.reference))return n;for(const o in e){const{id:l}=null!==(i=e[o].props)&&void 0!==i?i:{};if(void 0===l)continue;const s=YU(e[o]);void 0===(null===(r=s.props)||void 0===r?void 0:r.uid)&&(s.props||(s.props={}),s.props.uid=o),n=xq(l,s,null!=t?t:null)(n)}return delete n.editor.ureference,n},xq=(e,t,n,o=!0)=>i=>{void 0===i.store&&(i.store={}),void 0===i.store.reference&&(i.store.reference={});const r={...t.props},l=r.uid;delete r.uid;const s={...t,props:r},c=HPe(t);let a=i.store.reference[e];if((null==a?void 0:a.count)>0){if(UU(s,a.data))return i;a.data=s,i=Hq({reference:[e]})(i),c&&(i=Hq({assets:[e]})(i))}else n&&l&&(a={data:s,count:1,detail:{[n]:[l]}},i.store.reference[e]=a,i=Rq({reference:[e]})(i),c&&(i=Rq({assets:[e]})(i)));if(n){let e=a.detail[n];We(e)&&(e=e.filter((e=>!!e)),l&&!e.includes(l)&&(e.push(l),a.count++),a.detail[n]=e)}return o&&(i=WU("reference",l)(i)),i=$U("reference",l,e)(i)},Sq=(e,t,n,o=!0)=>i=>{var r,l,s,c,a,u,d,f;const h=null===(s=null===(l=null===(r=i.store)||void 0===r?void 0:r.reference)||void 0===l?void 0:l[e])||void 0===s?void 0:s.count;t&&void 0!==n&&(i=xq(e,t,n,o)(i));const p=null===(c=null==t?void 0:t.props)||void 0===c?void 0:c.uid;if(void 0===p)return i;const v=null===(u=null===(a=i.store)||void 0===a?void 0:a.reference)||void 0===u?void 0:u[e];if(v&&void 0!==h&&h>0){const e=null!==(d=v.detail)&&void 0!==d?d:{};n&&p&&(void 0===e[n]?e[n]=[p]:e[n].includes(p)||e[n].push(p),v.detail=e);let t=0;for(const n in e)t+=e[n].length;v.count=t}return(null===(f=null==v?void 0:v.data.props)||void 0===f?void 0:f.type)===ive&&(i=Hq({assets:[e]})(i)),i=Hq({reference:[e]})(i),o&&(i=WU("reference",p)(i)),i=$U("reference",p,e)(i)},Eq=(e,t)=>t=>{var n,o,i;const r=null===(o=null===(n=t.store)||void 0===n?void 0:n.reference)||void 0===o?void 0:o[e];return void 0===r?t:((null===(i=null==r?void 0:r.data.props)||void 0===i?void 0:i.type)===ive&&(t=Aq({assets:[e]})(t)),t=Aq({reference:[e]})(t))},kq=(e,t,n,o=!0)=>i=>{var r,l,s,c;const a=null===(l=null===(r=i.store)||void 0===r?void 0:r.reference)||void 0===l?void 0:l[e];if(!a)return i;const u=null!==(s=a.detail)&&void 0!==s?s:{};if(!u[n])return i;const d=u[n].indexOf(t);u[n].splice(d,1),Sc(u[n])&&delete u[n];let f=0;for(const e in u)f+=u[e].length;return a.count=f,(null===(c=null==a?void 0:a.data.props)||void 0===c?void 0:c.type)===ive&&(i=Hq({assets:[e]})(i)),i=Hq({reference:[e]})(i),a.count<=0&&(i=Eq(e)(i)),o&&(i=zU("reference",t)(i)),i},Dq=e=>t=>(void 0===t.store&&(t.store={}),void 0===t.store.reference&&(t.store.reference={}),Object.assign(t.store.reference,e.reference),t),Iq=(e,t)=>n=>{var o;const i=null===(o=n.file)||void 0===o?void 0:o.tree;if(void 0===i)return n;const r=Y_e(i,e);if(null===r)return n;const l=K_e(i,e);return JU([r],((e,o)=>{(t||"outline"===e.type||e.id===r.id)&&(n=Nq(e,o)(n))}),null!=l?l:void 0),n},Nq=(e,t,n,o=!0)=>i=>{var r,l,s,c,a,u;const d=null===(r=i.file)||void 0===r?void 0:r.tree;if(!d)return i;let f=null;if(f=e.path?XU(d,e.path):Y_e(d,e.id),!f)return i;if("root"!==f.type&&"page"!==f.type)if(f.path){let e=f.path;for(;f&&"outline"===f.type;)e=ec(e),f=XU(d,e);if(e.length&&(t=null!==(l=XU(d,ec(e)))&&void 0!==l?l:void 0),!f)return i}else{let e=!1;const n=f.id;QU(d,((o,i)=>{if(e)return!0;const r=Js(o);if(!r)return!0;if(r.id===n){e=!0;for(let e=o.length-1;e>=0;e--){const n=o[e].type;if("root"===n||"page"===n)return f=o[e],t=o[e-1],!0}return!0}}))}else t||(t=f.path?null!==(s=XU(d,ec(f.path)))&&void 0!==s?s:void 0:null!==(c=K_e(d,f.id))&&void 0!==c?c:void 0);const{id:h,type:p}=f;if(void 0===p)return i;const v=null!==(u=null===(a=i.store)||void 0===a?void 0:a.catalog)&&void 0!==u?u:{},g=nje(f,t,!n);for(const e in g){const t=g[e].children;(null==t?void 0:t.length)&&t.some((e=>!e))&&delete g[e]}n?Object.assign(v,g):v[h]=g[h],void 0===i.store&&(i.store={}),i.store.catalog=v;for(const e in g)i=Hq({catalog:[e]})(i);return o&&t&&(i=Nq(t,void 0,!1,!1)(i)),i},Lq=e=>t=>(void 0===t.store&&(t.store={}),void 0===t.store.catalog&&(t.store.catalog={}),Object.assign(t.store.catalog,e.catalog),t),Bq=e=>t=>{var n,o,i,r;const l=null!==(o=null===(n=t.store)||void 0===n?void 0:n.catalog)&&void 0!==o?o:{};if(void 0===l[e])return t;const s=null===(i=l[e].parent)||void 0===i?void 0:i.id;if(s&&l[s]){const n=l[s].children;if(n){const o=n.findIndex((t=>t.id===e));-1!==o&&n.splice(o,1);const i=null===(r=l[e].children)||void 0===r?void 0:r.slice();if(null==i?void 0:i.length)for(const{id:e}of i)t=Bq(e)(t)}}return t=Aq({catalog:[e]})(t)},Tq=()=>e=>{var t;return null===(t=e.store)||void 0===t||delete t.catalog,e},Aq=e=>t=>{var n;void 0===t.store&&(t.store={}),void 0===t.store.crud&&(t.store.crud={}),void 0===t.store.crud.delete&&(t.store.crud.delete={});const o=t.store.crud.delete;for(const t in e){const i=t,r=o[i],l=null!==(n=e[i])&&void 0!==n?n:[];o[i]=r?Zc([...r,...l]):l,Sc(o[i])&&delete o[i]}return Sc(o)&&delete t.store.crud.delete,t=Pq(e)(t),t=_q(e)(t)},Mq=e=>t=>{var n,o,i,r;const l=null===(o=null===(n=t.store)||void 0===n?void 0:n.crud)||void 0===o?void 0:o.delete;if(!l)return t;for(const t in e){const n=t,o=l[n],i=e[n];if(o&&i){for(const e of i){const t=o.indexOf(e);-1!==t&&o.splice(t,1)}Sc(l[n])&&delete l[n]}}return Sc(l)&&(null===(r=null===(i=t.store)||void 0===i?void 0:i.crud)||void 0===r||delete r.delete),t},Oq=()=>e=>{var t,n,o,i;return null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n||delete n.delete,Sc(null===(o=e.store)||void 0===o?void 0:o.crud)&&(null===(i=e.store)||void 0===i||delete i.crud),e},Rq=e=>t=>{var n;void 0===t.store&&(t.store={}),void 0===t.store.crud&&(t.store.crud={}),void 0===t.store.crud.create&&(t.store.crud.create={});const o=t.store.crud.create,i=t.store.crud.update;for(const t in e){const r=t,l=o[r],s=null==i?void 0:i[r],c=(null!==(n=e[r])&&void 0!==n?n:[]).filter((e=>!(null==s?void 0:s.includes(e))));o[r]=l?Zc([...l,...c]):c,Sc(o[r])&&delete o[r]}return Sc(o)&&delete t.store.crud.create,t=Mq(e)(t)},Pq=e=>t=>{var n,o,i,r;const l=null===(o=null===(n=t.store)||void 0===n?void 0:n.crud)||void 0===o?void 0:o.create;if(!l)return t;for(const t in e){const n=t,o=l[n],i=e[n];if(o&&i){for(const e of i){const t=o.indexOf(e);-1!==t&&o.splice(t,1)}Sc(l[n])&&delete l[n]}}return Sc(l)&&(null===(r=null===(i=t.store)||void 0===i?void 0:i.crud)||void 0===r||delete r.create),t},Fq=()=>e=>{var t,n,o,i;return null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n||delete n.create,Sc(null===(o=e.store)||void 0===o?void 0:o.crud)&&(null===(i=e.store)||void 0===i||delete i.crud),e},Hq=e=>t=>{var n;void 0===t.store&&(t.store={}),void 0===t.store.crud&&(t.store.crud={}),void 0===t.store.crud.update&&(t.store.crud.update={});const o=t.store.crud.update,i=t.store.crud.create;for(const t in e){const r=t,l=o[r],s=null==i?void 0:i[r],c=(null!==(n=e[r])&&void 0!==n?n:[]).filter((e=>!(null==s?void 0:s.includes(e))));o[r]=l?Zc([...l,...c]):c,Sc(o[r])&&delete o[r]}return Sc(o)&&delete t.store.crud.update,t=Mq(e)(t)},_q=e=>t=>{var n,o,i,r;const l=null===(o=null===(n=t.store)||void 0===n?void 0:n.crud)||void 0===o?void 0:o.update;if(!l)return t;for(const t in e){const n=t,o=l[n],i=e[n];if(o&&i){for(const e of i){const t=o.indexOf(e);-1!==t&&o.splice(t,1)}Sc(l[n])&&delete l[n]}}return Sc(l)&&(null===(r=null===(i=t.store)||void 0===i?void 0:i.crud)||void 0===r||delete r.update),t},jq=()=>e=>{var t,n,o,i;return null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n||delete n.update,Sc(null===(o=e.store)||void 0===o?void 0:o.crud)&&(null===(i=e.store)||void 0===i||delete i.crud),e},Wq=(e,t)=>n=>{var o,i;const r=null===(i=null===(o=n.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[e];if(void 0===r)return n;if(!t||!EHe(t))return n;return r.data=function(e,t){return UHe(e,e,t,n,((e,t)=>{var n;return(uSe(e)||jve(e))&&(!1===(null===(n=e.props)||void 0===n?void 0:n.expand)&&t&&(t.editor.isEditPending=!0),t&&(t.editor.refresh=pRe(!0))),e}))}(r.data,t),n},zq=e=>t=>{t.store||(t.store={}),t.store.auth||(t.store.auth={}),t.store.auth.delete||(t.store.auth.delete=[]);const n=t.store.auth.delete,o=Rje(e,t.store);for(const e of o)n.includes(e)||n.push(e);return t},Vq=e=>t=>{for(const n of e)t=zq(n)(t);return t},$q=()=>e=>{var t,n;return null===(n=null===(t=e.store)||void 0===t?void 0:t.auth)||void 0===n||delete n.delete,e},Zq=e=>t=>{var n,o;return null===(o=null===(n=t.store)||void 0===n?void 0:n.editor)||void 0===o||delete o[e],t},{deleteBackward:Uq,deleteForward:qq,isCollapsed:Yq,isDeleteBackward:Kq,isDeleteForward:Gq,isEmptyNode:Xq,isMoveBackward:Jq,isMoveDown:Qq,isMoveForward:eY,isMoveUp:tY,isStartPath:nY,isSelectionFocusEditNodeEnd:oY,isSelectionFocusEditNodeStart:iY,isSelectionTouchBlockNodeEnd:rY,isSelectionTouchBlockNodeStart:lY,isSpace:sY,isSplitBlock:cY,isTab:aY,isShiftTab:uY,isCut:dY,resetEditNodeKey:fY,space:hY,splitBlock:pY,tab:vY,shiftTab:gY,isEditNode:mY,insertToBlockNode:yY,createInlineNode:bY,sliceReferencePath:CY,getEditNodeByPath:wY,decorateBlockNode:xY}=ek;function SY(e,t){const n=Dd(R(SU)),o=R(EU),i=R(kU),r=R(NU),l=R(bIe),s=Nd("pointermove"),c=Nd("pointerup"),a=Nd("cut"),u=Nd("copy"),d=Nd("paste"),f=Nd("pointerdown"),h=kY(e,t);return F((()=>{const{context:t}=r.provider(),l=n.current.gfocus,s=t.focus,c=e.current.focus,a=[m7({focus:null!=s?s:l}),f7(),e6(["rename","more","moving"]),a4(c,i)],u=f.subscribe((()=>{const e=n.current.gfocus;e&&aHe(e)||o(a4(c,i)),wHe(c)||(r.sheet.current=null),D((()=>o(...a)))}));return()=>u.unsubscribe()}),[e,o,i,n,f,r]),F((()=>{const e=f.pipe(Iu((e=>(i.current.agent&&e.stopPropagation(),s.pipe(Nu(c)))))).subscribe((e=>{var t,o,r;const{agent:l}=n.current,s=i.current.agent;void 0!==s&&(null===(t=null==l?void 0:l.propagation)||void 0===t?void 0:t.type)===s&&(null===(r=(o=l.propagation).action)||void 0===r||r.call(o,e))}));return()=>e.unsubscribe()}),[n,i,f,s,c]),F((()=>{const e=f.pipe(Iu((()=>c.pipe(Eu(1))))).subscribe((()=>{const{formatPaint:e}=n.current.editor;e&&o(b9(!1),a4())}));return()=>e.unsubscribe()}),[n,o,f,c]),F((()=>{const e=c.subscribe((()=>{i.current.agent&&(delete i.current.agent,o(p7()))}));return()=>e.unsubscribe()}),[e,o,i,f,c]),F((()=>{const i=d.subscribe((async i=>{i.preventDefault();const{editor:{selection:s,node:c},focus:a}=e.current,u=n.current.gfocus;Yq(s)&&Ec(u,a)&&Xq(c)?null==l||l():zie(r,o,t)}));return()=>{i.unsubscribe()}}),[r,e,l,n,t,o,a,u,d]),F((()=>(window.addEventListener("pointermove",s.listener),window.addEventListener("pointerup",c.listener),()=>{window.removeEventListener("pointermove",s.listener),window.removeEventListener("pointerup",c.listener)})),[s,c]),{...Ld([a,u,d,f]),...h}}function EY(e,t){const n=R(NU),o=Dd(R(SU)),i=R(EU),r=R(kU),l=Nd("click"),s=kY(e,t),c=_((()=>{const t=o.current.gfocus,l=e.current.focus;if(!Ec(t,l)){const e=[a4(l,r)];wHe(l)?e.push(EDe(l,[R9(!0)])):(e.push(R9(!0)),n.sheet.current=null),i(...e)}}),[e,n,o,i,r]);F((()=>{const e=l.subscribe((()=>{requestAnimationFrame(c)}));return()=>e.unsubscribe()}),[l,c]);return{...Ld([l]),...s,onSelectPhrase:()=>{var t,n;c(),null===(n=(t=e.current).onSelectPhrase)||void 0===n||n.call(t)}}}function kY(e,t){const n=Dd(R(SU)),o=R(EU),i=R(kU),r=Dd(R(MU)),l=R(NU),s=Nd("keydown");return F((()=>{const c=s.subscribe((s=>{var c,a,u;const{gfocus:d,modal:f,editor:{node:h}}=n.current,p=e.current,{editable:v,root:g,focus:m,editor:{selection:y,node:b,composing:C}}=p;if(!y||C||!1===v)return;if(null==f?void 0:f.visible)return void s.stopPropagation();const{decorateSafty:w,decorateSelection:x,triggerDecorateSelection:S,isPrevListNodeDecorate:E,isDecorateListNodeSelection:k}=Hye;if(Jq(s)||eY(s)||tY(s)||Qq(s)){if(Yq(y)&&Ec(d,m)){const e=null===(c=r.current)||void 0===c?void 0:c.focus,n=VHe(h,m),l=e&&(null===(a=NHe(m,e))||void 0===a?void 0:a.path);if(Jq(s))iY(b,y)?n&&l&&LDe(s,e,l,n,o):BDe(s,m,y.focus,b,o);else if(eY(s))if(oY(b,y))n&&l&&LDe(s,e,l,n,o);else{if(rY(b,y)&&(Whe(p)||Oae(p)||Rae(p))){const e=bY([""]);return void(null===(u=t.current)||void 0===u||u.commit([yY(e)]))}BDe(s,m,y.focus,b,o)}else tY(s)?i.current.slash?s.stopPropagation():iY(b,y)&&n&&l&&LDe(s,e,l,n,o):Qq(s)&&(i.current.slash?s.stopPropagation():oY(b,y)&&n&&l&&LDe(s,e,l,n,o))}}else!function(e){if(y&&g&&(cY(s)||Kq(s)||Gq(s)||sY(s)||dY(s))){let t=[];if(Yq(y)){if(Kq(s)&&lY(b,y)){const{path:e}=y.focus,n=CY(b,e,!0);if(n&&!nY(n)){const e=wY(b,n);mY(e)&&FPe(e)&&t.push(e)}}}else t=wFe(b,y);if(t.length){s.stopPropagation();const n=b$e(t,(async()=>{var i;o(lre({...n,visible:!1}));const r=[];for(const e of t){const t=null===(i=e.props)||void 0===i?void 0:i.id;t&&(r.includes(t)||r.push(t),await l.safty(t,!0))}o(Vq(r)),e()}));return void o(lre(n))}}e()}((async()=>{var e,n,r,c;if(cY(s)){if(i.current.slash)return void s.stopPropagation();if(lY(b,y)){const{path:t}=y.focus,n=CY(b,t,!0);if(n&&!nY(n)){const t=wY(b,n);if(mY(t)&&FPe(t)){s.stopPropagation();const n=null===(e=t.props)||void 0===e?void 0:e.id;if(n)return await l.safty(n),void o(X3(p,n),_3(n),j9())}}}const a=[];if(Whe(p)&&a.push(epe()),Oae(p)&&a.push(Mue()),Rae(p)&&a.push(Oue()),k(p,uae,!0)||k(p,dae,!0)){s.stopPropagation();const e=[],n=[];e.push(pY()),e.push(kme(n)),e.push(fY()),e.push(Bme(p)),Lme(p,t,e,o,n)}else if(k(p,Oxe,!0)){s.stopPropagation();const e=[];e.push(sEe(p)),e.push(x(p)),e.push(...a),w(p,t,e)}else if(Whe(p)){s.stopPropagation();const e=[];e.push(pY()),e.push(...a),null===(n=t.current)||void 0===n||n.commit(e)}else if(Oae(p)){s.stopPropagation();const e=[];e.push(pY()),e.push(...a),null===(r=t.current)||void 0===r||r.commit(e)}else if(Rae(p)){s.stopPropagation();const e=[];e.push(pY()),e.push(...a),null===(c=t.current)||void 0===c||c.commit(e)}else if(k(p)){s.stopPropagation();const e=[];S(p,{[vBe]:()=>{e.push(pY())},[YBe]:()=>{e.push(pY())},[oTe]:()=>{e.push(pY()),e.push(PTe())},[uae]:()=>{e.push(pY())},[dae]:()=>{e.push(pY())}}),e.length||e.push(pY()),e.push(x(p)),w(p,t,e)}}else if(Kq(s)){if(lY(b,y))if(k(p,uae)){s.stopPropagation();const e=[];e.push(Dme()),e.push(Bme(p)),Lme(p,t,e,o,[])}else if(k(p)){s.stopPropagation();const e=[];S(p,{[vBe]:()=>{e.push(Uq())},[YBe]:()=>{e.push(Uq())},[oTe]:()=>{e.push(Uq()),e.push(PTe())},[uae]:()=>{e.push(Dme())},[dae]:()=>{e.push(Ime())},[Oxe]:()=>{e.push(cEe(p))}}),e.length||(k(p,Oxe)?e.push(cEe(p)):e.push(Uq())),e.push(fY()),e.push(x(p)),w(p,t,e)}else if(fUe(p)){if(!p.root&&iY(b,y)){s.stopPropagation();const e=[];e.push(xY()),w(p,t,e)}}else if(E(p)){s.stopPropagation();const e=[];E(p,uae)?e.push(Dme()):e.push(Uq()),e.push(fY()),e.push(x(p)),w(p,t,e)}}else if(Gq(s)){if(rY(b,y))if(k(p,uae)){s.stopPropagation();const e=[];e.push(qq()),e.push(Bme(p)),Lme(p,t,e,o,[])}else if(k(p)){s.stopPropagation();const e=[];S(p,{[vBe]:()=>{e.push(qq())},[YBe]:()=>{e.push(qq())},[oTe]:()=>{e.push(qq()),e.push(PTe())},[uae]:()=>{e.push(qq())},[dae]:()=>{e.push(qq())},[Oxe]:()=>{e.push(qq())}}),e.length||e.push(qq()),e.push(x(p)),w(p,t,e)}}else if(aY(s)){if((lY(b,y)||!Yq(y))&&k(p)){s.stopPropagation();const e=p.editor.style,n=[];E(p,Oxe)?n.push(aEe(p)):n.push(vY(e)),S(p,{[oTe]:()=>{n.push(PTe())}}),n.push(x(p)),w(p,t,n)}}else if(uY(s)){if((lY(b,y)||!Yq(y))&&k(p)){s.stopPropagation();const e=p.editor.style,n=[];E(p,Oxe)?n.push(uEe(p)):n.push(gY(e)),S(p,{[oTe]:()=>{n.push(PTe())}}),n.push(x(p)),w(p,t,n)}}else if(sY(s)){const e=p.editor.style;if(lY(b,y)&&k(p)){s.stopPropagation();const e=[hY()];S(p,{[oTe]:()=>{e.push(PTe())}}),e.push(x(p)),w(p,t,e)}LUe(b,y)?(s.stopPropagation(),w(p,t,[Lre(p)])):BUe(b,y)?(s.stopPropagation(),w(p,t,[Bre()])):TUe(b,y)?(s.stopPropagation(),w(p,t,[Tre(p)])):AUe(b,y)?(s.stopPropagation(),w(p,t,[Are()])):RUe(b,y,e)?(s.stopPropagation(),w(p,t,[Pre()])):MUe(b,y,e)?(s.stopPropagation(),w(p,t,[Ore()])):OUe(b,y,e)?(s.stopPropagation(),w(p,t,[Rre()])):PUe(b,y,e)?(s.stopPropagation(),w(p,t,[Fre()])):FUe(b,y,e)&&(s.stopPropagation(),w(p,t,[Hre()]))}}))}));return()=>c.unsubscribe()}),[e,t,l,s,r,n,o,i]),{...Ld([s])}}function DY(e,t){const n=Nd("wheel");return F((()=>{const e=n.subscribe((e=>{e.preventDefault()}));return()=>e.unsubscribe()}),[n]),Ld([n])}function IY(e){return Dd(e),Z({commit(e){We(e)||(e=[e])},slice(){},dispatch(){},setStyle(){},setProps(){},input:{}})}async function NY(e){await TY(e),await LY(e),await BY(e),await AY(e)}async function LY(e){var t,n,o;const i=null===(o=null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n?void 0:n.delete)||void 0===o?void 0:o.catalog;i&&await async function(e){return"undefined"!=typeof electron?await electron.file.unlinkCatalogBatch(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.unlinkCatalogBatch(e,(e=>{t(e)}))})):await OP.remove(NP,e)}(i)}async function BY(e){var t,n,o;const i=null===(o=null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n?void 0:n.delete)||void 0===o?void 0:o.reference;i&&await async function(e){return"undefined"!=typeof electron?await electron.file.unlinkReferenceBatch(e):"undefined"!=typeof WebPro?new Promise((t=>{WebPro.unlinkReferenceBatch(e,(e=>{t(e)}))})):await OP.remove(IP,e)}(i)}async function TY(e){var t,n,o,i,r;const l=null===(o=null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n?void 0:n.delete)||void 0===o?void 0:o.editor;if(l)for(let t=0;t<l.length;t++){const n=l[t],o=null===(r=null===(i=e.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[n];if(o&&o.segments)for(const e of o.segments)await dF(e);await cF(n)}}async function AY(e){var t,n,o;const i=null===(o=null===(n=null===(t=e.store)||void 0===t?void 0:t.crud)||void 0===n?void 0:n.delete)||void 0===o?void 0:o.assets;if(i)for(let e=0;e<i.length;e++)await CF(i[e])}async function MY(e,t,n){var o,i;const r=await lF(e);if(1!==r.ok)return;let l=r.data;if(RP(l)){l=(await t.decompression({[e]:l}))[e]}if(l){if((null===(o=null==l?void 0:l.segments)||void 0===o?void 0:o.length)&&!n){let e=!1;const n={};for(const t of l.segments){const o=await uF(t);1===o.ok&&o.data&&(RP(o.data)&&(e=!0),n[t]=o.data)}const o=[];if(e){const e=new Qje(n,t);await e.decompression();const r=await e.output();for(const e of l.segments)o.push(...null!==(i=r[e])&&void 0!==i?i:[])}else for(const e in n)o.push(...n[e]);o.length&&(l.data.children=o)}return l.data=Xu(l.data),l}}async function OY(e){const t=await hF(e);if(1===t.ok)return t.data}async function RY(e){const t=await pF(e);if(1===t.ok)return t.data}async function PY(e){var t;const n={},o=await RY(e);if(!o)return n;const i=[];for(const n in o)if(null===(t=o[n].children)||void 0===t?void 0:t.length)for(const t of o[n].children)"outline"!==t.type&&(e.includes(t.id)||i.includes(t.id)||i.push(t.id));return i.length&&Object.assign(n,await PY(i)),Object.assign(n,o),n}async function FY(e){const t=await mF(e);if(1===t.ok)return t.data}async function HY(e){const t=await gF(e);if(1===t.ok)return t.data}async function _Y(e,t,n=!0){const o={editor:{},reference:{}},i=await MY(e,t);if(void 0===i)return n?(await XY(e,t),await _Y(e,t,!1)):void 0;o.editor&&(o.editor[e]=i);const{uids:r}=i;if(r){const e=Zc(Object.values(r)),t=await FY(e);o.reference&&(o.reference=t)}return o}const{traverseNode:jY,isReferenceNode:WY,isEditNode:zY,transformEditNodeToNode:VY}=ek;async function $Y(e,t){var n;const o=null===(n=e.store)||void 0===n?void 0:n.crud;Sc(o)||(Sc(o.delete)||await NY(e),await qY(e,t),await YY(e),await KY(e))}async function ZY(e){const t=zUe(e,!0);t&&(await async function(e){if("undefined"!=typeof electron){const t=await electron.file.writeBootstrap(e);if(1===t.ok)return t}if("undefined"!=typeof WebPro){const t=JSON.stringify(e);return new Promise((e=>{WebPro.writeBootstrap(t,(t=>{e(t)}))}))}const t={ok:0};try{await OP.setBootstrap(e),t.ok=1}catch(e){console.error("setBootstrap noteDB.setBootstrap: ",e)}return t}(t),OVe(t))}async function UY(e){const t=e.changelog;t&&await async function(e){if("undefined"!=typeof electron){const{version:t}=PP.browser;if(t&&SP(t,"0.1.0",">=")){const t=await electron.file.writeChangelog(e);if(1===t.ok)return t}}if("undefined"!=typeof WebPro){const t=JSON.stringify(e);return new Promise((e=>{WebPro.writeChangelog(t,(t=>{e(t)}))}))}const t={ok:0};try{await OP.setChangelog(e),t.ok=1}catch(e){console.error("setChangelog noteDB.setChangelog: ",e)}return t}(t)}async function qY(e,t){var n,o,i,r;const{store:l}=e;if(void 0===l)return;const{editor:s,crud:c}=l;if(void 0===s)return;const a=Zc([...null!==(o=null===(n=null==c?void 0:c.update)||void 0===n?void 0:n.editor)&&void 0!==o?o:[],...null!==(r=null===(i=null==c?void 0:c.create)||void 0===i?void 0:i.editor)&&void 0!==r?r:[]]);for(const e of a)s[e]&&await GY(e,s[e],t)}async function YY(e,t){var n,o,i,r;const{store:l}=e;if(void 0===l)return;const{catalog:s,crud:c}=l;if(void 0===s)return;const a=Zc([...null!==(o=null===(n=null==c?void 0:c.update)||void 0===n?void 0:n.catalog)&&void 0!==o?o:[],...null!==(r=null===(i=null==c?void 0:c.create)||void 0===i?void 0:i.catalog)&&void 0!==r?r:[]]),u={};for(const e of a)s[e]&&(u[e]=s[e]);Sc(u)||await fF(u)}async function KY(e,t){var n,o,i,r;const{store:l}=e;if(void 0===l)return;const{reference:s,crud:c}=l;if(void 0===s)return;const a=Zc([...null!==(o=null===(n=null==c?void 0:c.update)||void 0===n?void 0:n.reference)&&void 0!==o?o:[],...null!==(r=null===(i=null==c?void 0:c.create)||void 0===i?void 0:i.reference)&&void 0!==r?r:[]]),u={};for(const e of a)s[e]&&(u[e]=s[e]);Sc(u)||await vF(u)}async function GY(e,t,n){var o,i,r,l,s,c;let a=!0,u=!0;if("undefined"!=typeof electron){const{version:e}=PP.browser;e&&(SP(e,"0.0.9","<=")&&(a=!1),SP(e,"0.0.21","<=")&&(u=!1))}const d=t.data.children,f=d.length;if(f>m$&&u){const s=null!==(o=navigator.hardwareConcurrency)&&void 0!==o?o:4,c=Math.ceil(f/s),a=[],u=null!==(r=null===(i=t.segments)||void 0===i?void 0:i.slice())&&void 0!==r?r:[],h={};let p=0;for(;p<f;){const e=null!==(l=u.shift())&&void 0!==l?l:pRe();a.push(e),h[e]=d.slice(p,p+c),p+=c}if(Uf){for(const e in h){const t=h[e];await aF(e,t)}for(const e of u)await dF(e);const n={...t,segments:a,data:{...t.data,children:[]}};return void await rF(e,n)}const v=new Jje(h,n);await v.compression();const g=await v.output();for(const e in g){const t=g[e];await aF(e,t)}for(const e of u)await dF(e);const m={...t,segments:a,data:{...t.data,children:[]}},y=await n.compression({[e]:m});for(const e in y){const t=y[e];await rF(e,t)}return}const h=null!==(c=null===(s=t.segments)||void 0===s?void 0:s.slice())&&void 0!==c?c:[];for(const e of h)await dF(e);if(delete t.segments,Uf)return void await rF(e,t);const p={[e]:t},v=a?await n.compression(p):p;for(const e in v){const t=v[e];await rF(e,t)}}async function XY(e,t){var n;let o;const i=await HY(e);if(i)o=i.data;else{const t=await OY(e);if(t){const e=t.title;o=zY(e)?VY(e):t.title}}if(!o)return;const r=gFe(o,e),l=[];jY(r.data,(e=>{var t;if(!WY(e))return;const n=null===(t=e.props)||void 0===t?void 0:t.id;n&&l.push(n)}));const s=await FY(l);for(const t in s){const o=s[t],i=null!==(n=o.detail)&&void 0!==n?n:{};void 0===i[e]?i[e]=[e]:i[e].includes(e)||i[e].push(e);let r=0;for(const e in i)r+=i[e].length;o.count=r,o.detail=i}await GY(e,r,t),Sc(s)||await vF(s)}const{isEditBlockNode:JY,getBlockNodeStartPath:QY,isReferenceNode:eK,getPathFromKey:tK,resetReflowStart:nK,clearEditNodePosition:oK,ReflowStartFlag:iK}=ek;async function rK(e,t,n,o){const{file:i}=t;void 0!==i&&(n(N6(i,!0),oq()),await Promise.all([sK(e,i,o,n),dK(e,i,o,n)]))}async function lK(e,t,n,o){const i=await sF();if(0===i.ok||!i.data)return;const r=[];for(const e of i.data){const t=await lF(e);if(0===t.ok||!t.data)continue;if(RP(t.data)){const n=await o.decompression({[e]:t.data});t.data=n[e]}const n=t.data.uids;for(const e in n)r.push(WU("reference",e)),r.push($U("reference",e,n[e]));r.push(WU("editor",e))}n(...r)}async function sK(e,t,n,o,i){const{tree:r,branch:l,currentPageId:s}=t,c=NM(),a=[];for(let e=0;e<r.length;e++){const{children:t,type:o}=r[e];if(!(null==t?void 0:t.length)&&"root"===o)continue;const i=null!=l?l:r[e];let u=null;s&&(u=await uK(s));const d={callback:e=>{e.id!==i.id||c?delete e.active:e.active=!0},source:u},f=await cK(r[e],n,d);f.tag=!0,f.type="root",a.push(a6(f,[e])),a.push(L6()),a.push(Nq(f,void 0,!0))}if(l&&!c&&a.push(_3(l)),a.push(C6()),a.push(b6()),a.push(m6(!0)),o){const e=u$e();(null==e?void 0:e.file)&&e.file.currentPageId===s&&a.push(B6(e.file)),o(...a,oq())}return a}async function cK(e,t,n){var o,i,r,l,s;const c=null!==(i=null===(o=e.children)||void 0===o?void 0:o.slice())&&void 0!==i?i:[],a=[];for(const e of c)e?e.type||a.push(e.id):a.push(e);let u,d=!1;if(!c.length&&e.uids)for(const t in e.uids){const n=e.uids[t];t!==e.id&&(t===n&&(d=!0))}if(Sc(e.uids)&&(d=!0),a.length>0&&a.length===c.length||d){const n=await hF(e.id);if(1!==n.ok||!n.data)return e;if(u=n.data,"outline"!==e.type&&!(null===(r=u.children)||void 0===r?void 0:r.length)&&u.uids){let n=!1;const o=[];for(const t in u.uids){const i=u.uids[t];o.includes(i)||o.push(i),t!==e.id&&(t===i&&(n=!0))}if(n){const n=await MY(e.id,t);if(null==n?void 0:n.data){const e=await mF(o);u=V_e(n.data,e.data)}}}}return u&&(e=Zo(e,eje(u))),(null===(l=e.children)||void 0===l?void 0:l.length)&&(e=await aK(e,t,n)),null===(s=null==n?void 0:n.callback)||void 0===s||s.call(n,e),e}async function aK(e,t,n){var o,i,r,l;const s=null!==(i=null===(o=e.children)||void 0===o?void 0:o.slice())&&void 0!==i?i:[],c=s.filter((e=>e&&!e.type)).map((e=>e.id));let a;if(c.length){const t=await pF(c);if(1!==t.ok||!t.data)return e;a=t.data}for(let e=0;e<s.length;e++){let o=s[e];if(!o)continue;const i=null==a?void 0:a[o.id];i&&(o=eje(i)),"outline"===o.type?null===(r=null==n?void 0:n.callback)||void 0===r||r.call(n,o):((null===(l=null==n?void 0:n.source)||void 0===l?void 0:l.includes(o.id))||!1!==o.expand||(null==n?void 0:n.deep))&&(o=await cK(o,t,n)),s[e]=o}return{...e,children:s}}async function uK(e,t,n){let o={ok:0};(null==t?void 0:t[e])?(o.data=t[e],o.ok=1):o=await hF(e),t&&o.data&&(t[e]=o.data);const i=[e];if(1===o.ok&&o.data){const{parent:r}=o.data,l=null==r?void 0:r.id;if(!l||e===n)return i;const s=await uK(l,t,n);if(!s)return i;i.unshift(...s)}return i}async function dK(e,t,n,o){var i,r,l;const s=[],c=t.currentPageId;if(void 0===c)return s;let a=await MY(c,n);if(!a){const i=t.tree[0],r=i.id;return r!==c?(t.currentPageId=r,null==o||o(_3(i)),dK(e,t,n,o)):(null==o||o(B4(e)),s)}const{cwnd:u,data:d,reflowStart:f,bounds:h,scrollHeight:p}=a;if((null===(i=null==d?void 0:d.children)||void 0===i?void 0:i.length)<=1){const e=CPe();d.children.push(e)}const v=a.uids;if(v){const e=Zc(Object.values(v)),t=await mF(e);if(1===t.ok){const e=t.data;if(e){const t={},n={reference:e,callback(e){var n,o;if(eK(e)){const i=null===(n=e.props)||void 0===n?void 0:n.id,r=null===(o=e.props)||void 0===o?void 0:o.uid;if(!i||!r)return;t[r]=i}}};xFe(a,n),a.uids=t,s.push(lq(e))}}}const g=u$e();let m=!1;if((null===(r=null==g?void 0:g.file)||void 0===r?void 0:r.currentPageId)===c&&(null==g?void 0:g.editor)&&function(){var e;if(!(null==g?void 0:g.editor)||!a)return;const{editor:{scrollTop:t=0,node:n}}=g,o=null==n?void 0:n.children[0];if(!n||!JY(o))return;const i=null===(e=o.position)||void 0===e?void 0:e.top;if(void 0===i)return;const r=tK(o.key),l=i-t;o.position={top:l,left:0,right:0,bottom:0};const s=v_(d,n);a.node=n,a.bounds=s,a.boundsReset=!0,a=T$e(a),nK(r,iK.next)(a),a.node=oK(a.node),a.resizeWidth=!0,m=!0}(),!m)if(void 0===h||void 0!==u){const e=null!==(l=null==f?void 0:f.path)&&void 0!==l?l:QY(d),t=gPe(d,e,null!=u?u:3);if(!t)return s;const n=v_(d,t);a.cwnd=null!=u?u:3,a.node=t,a.bounds=n,a.boundsReset=!0,a.scrollTouchReset=!0,delete a.ureference,delete a.reflowStart}else{const e=h.start.path,t=h.end.path;a=T$e(a,e,t)}const{clientHeight:y,clientWidth:b}=wqe({file:t});return a.clientHeight=y,a.clientWidth=b,a.scrollHeight=Math.max(p,y),a.scrollOffset={top:Pf?0:r$},s.push(cq(c,a)),s.push(l9(a)),s.push(f9()),s.push(h9()),s.push(v4()),o&&o(...s,oq()),s}const{isReferenceNode:fK,traverseNode:hK,isNode:pK,isReferenceBlockNode:vK,createReferenceBlockNode:gK,transformEditNodeToNode:mK,createBlockNode:yK}=ek;async function bK(e){if("undefined"!=typeof electron)return;if("undefined"!=typeof WebPro)return;const{file:t}=e;if(void 0===t)return;const n=await CK(LP),o=await CK(NP),i=await CK(IP);!function e(t){for(let r=0;r<t.length;r++){const{id:l}=t[r],s=o[l];if(void 0!==s){if(delete o[l],"outline"!==s.type){const c=n[s.id];if(void 0===c)continue;const{data:a}=c,u={};function d(e){IPe(e,(e=>{var t,n,o,i;if(uSe(e)){if(!1===(null===(t=e.props)||void 0===t?void 0:t.expand)){const t=null===(n=e.props)||void 0===n?void 0:n.list;(null==t?void 0:t.length)&&(delete e.props.expand,delete e.props.list,e.children.push(...t),t.forEach((e=>{d(e)})))}}else if(jve(e)&&!1===(null===(o=e.props)||void 0===o?void 0:o.expand)){const t=null===(i=e.props)||void 0===i?void 0:i.list;if(null==t?void 0:t.length){delete e.props.expand,delete e.props.list;const n=c.data.children,o=n.indexOf(e);-1!==o&&(n.splice(o+1,0,...t),t.forEach((e=>{d(e)})))}}}))}d(a);const f={reference:i,callback(e){var t,n;if(!fK(e))return;const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;o&&i&&(u[i]=o)}};mPe(a,f),IPe(a,(e=>{var t,n;if(fK(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,r=null===(n=e.props)||void 0===n?void 0:n.uid;null==u||u[r];const l=i[o];if(void 0===l)return;l.count--,l.count,l.detail[s.id],0===l.count&&delete i[o],null==u||delete u[r]}})),Sc(u),delete n[s.id]}if(s.children){for(const h of s.children)h.type&&!o[h.id]&&(o[h.id]=h);e(s.children)}}}}(t.tree),Sc(n),Sc(o),Sc(i)}async function CK(e){let t={};if(e===NP){const e=await pF();1===e.ok&&e.data&&(t=e.data)}else if(e===IP){const e=await mF();1===e.ok&&e.data&&(t=e.data)}else if(e===LP){const e=await async function(e){if("undefined"!=typeof electron){const t={};if(!e){const t=await electron.file.readEditorIds();1===t.ok&&t.data&&(e=t.data)}for(const n of null!=e?e:[]){const{version:e}=PP.browser;let o="uint8Array";e&&SP(e,"0.0.9","<=")&&(o="string");const i=await electron.file.readEditor(n,o);if(1===i.ok&&i.data){if(sc(i.data))try{i.data=JSON.parse(i.data)}catch(e){}t[n]=i.data}}return{ok:1,data:t}}if("undefined"!=typeof WebPro)return new Promise((async t=>{const n={};if(!e){const t=await new Promise((e=>{WebPro.readEditorIds((t=>{if(0===t.ok||!t.data)return void e({ok:0});let n=t.data;"string"==typeof n&&(n=JSON.parse(n))}))}));1===t.ok&&t.data&&(e=t.data)}for(const t of null!=e?e:[])WebPro.readEditor(t,(e=>{if(0===e.ok||!e.data)return;let o=e.data;"string"==typeof o&&(o=JSON.parse(o)),n[t]=o}));return{ok:1,data:n}}));if(!e)return await OP.getAll(LP);const t={};for(const n of null!=e?e:[]){const e=await OP.get(LP,n);1===e.ok&&e.data&&(t[n]=e.data)}return{ok:1,data:t}}();1===e.ok&&e.data&&(t=e.data)}return t}async function wK(e,t,n){var o,i,r;if(!t.length)return;let l=!1;const s=[];for(let e=0;e<t.length;e++){const r=t[e],c=await MY(r,n);if(!c)continue;const a=null===(o=c.data)||void 0===o?void 0:o.children[0];if(zve(a)){const e=null===(i=a.props)||void 0===i?void 0:i.id;e&&e!==r&&(l=!0,await GY(e,c,n),await cF(r))}s.push(a)}if(!s.length)return!1;if(l)return;const c=e.id;let a=e.title;vK(a)&&(a=a.children[0]);const u=[$ve({subclass:aae.H,id:c},[gK({id:c,uid:c},[{...ts(a),style:{...a.style,...Fve(aae.H)}}])])],d=mK(yK(u,P$)),f={},h=jPe(d);h[c]&&(f[c]={data:h[c],count:1,detail:{[c]:[c]}});const p={[c]:c},v=vFe({data:d,uids:p});for(const e of s){const t=null===(r=e.props)||void 0===r?void 0:r.id;t&&t!==c&&(v.data.children.some((e=>{var n;if(pK(e)){const o=null===(n=e.props)||void 0===n?void 0:n.id;if(t===o)return!0}return!1}))||(hK(e,(e=>{var n,o;if(!fK(e))return;const i=null===(n=e.props)||void 0===n?void 0:n.id,r=null===(o=e.props)||void 0===o?void 0:o.uid;if(!i||!r)return;p[r]=i;const l={...e.props};delete l.uid;const s={...e,props:l};f[i]={data:s,count:2,detail:{[c]:[r],[t]:[r]}}})),v.data.children.push(e)))}v.uids={...v.uids,...p};const g=nje({...V_e(v.data,f),type:"root"});await GY(c,v,n),await fF(g),await vF(f)}class xK{constructor(){this.timer=-1,this.ids=[],this.resolves=[]}async batch(e){if(!e)return await pF();for(const t of e)this.ids.includes(t)||this.ids.push(t);return-1===this.timer&&(this.timer=requestAnimationFrame((async()=>{const e=await pF(this.ids);this.resolves.forEach((t=>t(e))),this.resolves.length=0,this.ids.length=0,this.timer=-1}))),this.pick(e)}async pick(e){return-1===this.timer?await pF(e):new Promise((t=>{this.resolves.push((n=>{if(0===n.ok||!n.data)return{ok:0};const o={};for(const t of e)o[t]=n.data[t];t({ok:1,data:o})}))}))}}const{getBranchByPath:SK,recursiveTree:EK,BRANCH_HEIGHT:kK}=xT;function DK(e,t){const n=Dd(e),o=R(NU),i=R(LU),r=Nd("pointermove"),l=Nd("pointerup"),s=Nd("pointerdown"),c=Nd("pointerdown"),a=Nd("change");return F((()=>(window.addEventListener("pointermove",r.listener),window.addEventListener("pointerup",l.listener),()=>{window.removeEventListener("pointermove",r.listener),window.removeEventListener("pointerup",l.listener)})),[r,l]),F((()=>{const e=s.pipe(Iu((e=>{var t;const o=null===(t=n.current.file)||void 0===t?void 0:t.clientWidth;return r.pipe(Nu(l)).pipe(lu((t=>(null!=o?o:0)+Math.floor(t.clientX-e.clientX))))}))).subscribe((e=>{const t=LFe(n.current);(0,o.dispatch)(l7(e),r7(t),cle("col-resize"),H3(!0))})),t=s.pipe(Iu((()=>l))).subscribe((()=>{(0,o.dispatch)(ale())}));return()=>{e.unsubscribe(),t.unsubscribe()}}),[n,o,s,r,l]),F((()=>{const e=o.dispatch;function r(t){const n={visible:!0,title:"导入",content:t,onOk(){e(lre({...n,visible:!1}))}};e(lre(n))}function l(t,n){const o={visible:t,showCancelIcon:!1,showFooter:!1,style:{width:230},content:X("div",{style:{height:100,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",color:Df,fontSize:13},children:[G("span",{style:{display:"flex",animation:"rotate 1.5s linear infinite",marginBottom:10},children:G(NO,{width:20,fill:If})}),X("span",{children:["正在导入文件",null!=n?n:""]})]})};e(lre(o))}let s={};function c(e){let t=[];const n=e.split(".");return n.length>1&&(e=n.slice(0,-1).join(".")),e.includes("/")?t=e.split("/"):e.includes("\\")&&(t=e.split("\\")),t}async function u(t,l){const a=n.current;await new Promise((n=>{const u=new FileReader;u.onerror=()=>{n(!1)},u.onabort=()=>{n(!1)},u.onload=async u=>{var d,f,h,p,v,g;const m=null===(d=u.target)||void 0===d?void 0:d.result;if(!m)return void n(!1);const{branch:y,pageId:b}=l;async function C(e){var t;if(void 0===(null===(t=e.bootstrap)||void 0===t?void 0:t.type))return r("暂不支持通用 JSON 格式，请导入书立专用 .sli 文件。"),void n(!1);await ore(o,e,y,b)}if(t.name.endsWith(".sli")){if(!mc(m))return void n(!1);try{const e=new Uint8Array(m),t=pRe(!0);let n=(await i.decompression({[t]:e},!1))[t];if(n.data){const e=n,t=null===(f=e.data.children[0].props)||void 0===f?void 0:f.id;if(!t)return;n={bootstrap:{file:{currentPageId:t},type:"page"},editor:{[t]:e}}}await C(n)}catch(u){return console.warn(u),r("SLI 格式解析出错，请检查文件内容。"),void n(!1)}}else if(t.name.endsWith(".json")){if(!sc(m))return void n(!1);try{const e=JSON.parse(m);await C(e)}catch(u){return console.warn(u),r("JSON 格式解析出错，请检查文件内容。"),void n(!1)}}else if(t.name.endsWith(".md")){if(!sc(m))return void n(!1);try{const n=t.name.slice(0,-3),i=a.editor.style,r={image:[]},l=Eze(n,m,r,i);b&&await o.safty(b),"outline"!==y.type&&await o.safty(y.id);const u=[];if("undefined"!=typeof electron&&t.path)for(const e of r.image){const n=electron.file.readFile;if(!n)break;const i=null===(h=e.props)||void 0===h?void 0:h.src;if(!i||i.match(/^https?:/i))continue;let r=i;if(!i.startsWith("/")){let e=[];const n=t.path;n.includes("/")?e=n.split("/"):n.includes("\\")&&(e=n.split("\\")),e.pop(),e.push(i),r=e.join("/")}const{ok:l,data:s}=await n(r,"arrayBuffer");if(0===l||!s)continue;const c=i.split(".").pop();if(!c)continue;const a=O$e(c),{image:d,hash:f}=await tfe(s,a),g=o.stater.get(),m=await wF(f);if(0!==m.ok&&m.data){if(!(null===(v=null===(p=g.store)||void 0===p?void 0:p.reference)||void 0===v?void 0:v[f])){const e=await HY(f);e&&u.push(lq({[f]:e}))}}else await yF(f,s);const y=g.editor.clientWidth,b=nfe(d,y,f,a).children[0];Object.assign(e,b)}u.push(Xie(l,y,b,!1)),e(...u);const d=l.children[0];if(zve(d)){const e=null===(g=d.props)||void 0===g?void 0:g.id;if(e){const n=c(t.webkitRelativePath).join("/");s[n]||(s[n]=e)}}}catch(u){return console.warn(u),r("MarkDown 格式解析出错，请检查文件内容。"),void n(!1)}}n(!0)},t.name.endsWith(".sli")?u.readAsArrayBuffer(t):t.name.endsWith(".json")||t.name.endsWith(".md")?u.readAsText(t):n(!1)}))}async function d(e){var n,i,r;const l=o.dispatch,a=o.stater.get(),u=null===(n=a.file)||void 0===n?void 0:n.tree,d=null===(i=a.file)||void 0===i?void 0:i.currentPageId;let f=t.input.current;if(!f&&d&&u){if(!d)return;const e=Y_e(u,d);if(!e)return;f={pageId:d,branch:e}}if(e&&u&&(null==f?void 0:f.branch)){const t=f.branch.path;if(!t)return;let n=SK(u,t);if(!n||"outline"===n.type)return;const i=c(e).slice(0,-1);for(let e=0;e<i.length;e++){const c=i.slice(0,e+1).join("/");if(!s[c]){const t=pRe();s[c]=t,l($6(n,t,i[e],!1)),await new Promise((e=>{setTimeout(e)}))}const a=null===(r=o.stater.get().file)||void 0===r?void 0:r.tree;if(a){const e=SK(a,t);if(e){const t=Y_e([e],s[c]);t&&"outline"!==t.type&&(n=t)}}}f={branch:n,pageId:n.id}}return f}async function f(e){if(null==e?void 0:e.length){s={},l(!0);for(const t of Array.from(e)){const e=t.webkitRelativePath,n=await d(e);n&&await u(t,n)}delete t.input.current,l(!1)}}const h=a.subscribe((async e=>{const t=e.target.files;await f(t)})),p=vu(window,"dragover").subscribe((e=>{e.preventDefault()})),v=vu(window,"drop").subscribe((async e=>{var t;e.preventDefault();const n=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;await f(n)}));return()=>{h.unsubscribe(),p.unsubscribe(),v.unsubscribe()}}),[n,o,i,t.input,a]),{resize:Ld([s]),file:Ld([c]),input:Ld([a])}}function IK(e,t){const n=R(NU);return async(o,i,r,l,s)=>{var c,a,u,d,f,h,p;const v=n.dispatch,g=n.stater.get();if(!g.file)return;const{drag:m,tree:y,scrollOffset:b,scrollTop:C}=g.file;if("dragstart"===o.type){o.dataTransfer.effectAllowed="move";let e=o.target;for(;e&&!e.draggable;)e=e.parentElement;if(!e)return;return null===(c=o.dataTransfer)||void 0===c||c.setDragImage(e,0,13),v(o6(i,"start","drag")),void(!1!==i.expand&&v(r6(i)))}if("dragend"===o.type){if(v(l6(),i6()),!(null==m?void 0:m.start)||!m.over)return;if(Ec(m.start,m.over))return;const t=SK(y,m.over);if(!t)return;if("root"!==i.type){const e=rje(y,t),o=await uK(e.id),i=await uK(r);if((null==o?void 0:o[0])!==(null==i?void 0:i[0])){const e={visible:!0,title:"⏳ 开发中",content:"移动的笔记跨越了笔记空间，此功能正在开发中，敬请期待！"};return void n.dispatch(lre(e))}}await n.safty(r),"page"===i.type&&await n.safty(i.id,!0);let o=rje(y,t);if("outline"!==t.type){await n.safty(t.id);const e=SK(y,ec(m.over));e?(o=e,await n.safty(e.id)):o={id:""}}else await n.safty(o.id);return v(T7({...e,branch:i,pageId:r},t,o.id),O6(!0)),void requestAnimationFrame((()=>{v(O6(!1))}))}if("dragenter"===o.type&&o.preventDefault(),"dragover"===o.type){o.preventDefault();const e=t.file.current;if(e&&C>0){const n=e.getBoundingClientRect(),i=kK;if(n.bottom<o.clientY+i)return void((null===(a=t.drag.current)||void 0===a?void 0:a.scrolling)||(v(i6("over")),t.drag.current||(t.drag.current={}),t.drag.current.scrolling=!0,null===(u=t.tree.current)||void 0===u||u.scrollIntoView(80,!0,(()=>{var e;null===(e=t.drag.current)||void 0===e||delete e.scrolling}))));if(n.top+(null!==(d=null==b?void 0:b.top)&&void 0!==d?d:0)+(null!=s?s:0)-C+kK>o.clientY-i)return void((null===(f=t.drag.current)||void 0===f?void 0:f.scrolling)||(v(i6("over")),t.drag.current||(t.drag.current={}),t.drag.current.scrolling=!0,null===(h=t.tree.current)||void 0===h||h.scrollIntoView(-80,!0,(()=>{var e;null===(e=t.drag.current)||void 0===e||delete e.scrolling}))))}if(Ec(i.path,null==m?void 0:m.start))return void v(i6("over"));let n=o.target;for(;n&&!n.draggable;)n=n.parentElement;if(!n||!(null==m?void 0:m.start))return;const r=SK(y,m.start);if(!r)return;const l=n.getBoundingClientRect();let{top:c,bottom:g}=l,w=Math.min(5,l.height/3),x=!0;if("outline"!==r.type&&"outline"===i.type){x=!1;const e=rje(y,i),t=i.path[e.path.length],n=e.children[t];let o=!1;EK([n],(e=>{if(e.id!==i.id)return o?g+=kK:c-=kK,!1!==e.expand&&void 0;o=!0})),w=(g-c)/2,i=n}else if("outline"===r.type&&"outline"===i.type){if(r.payload.subclass>=i.payload.subclass){x=!1;let e=rje(y,i);for(;e.payload.subclass>r.payload.subclass;){let t=i.path[e.path.length];e=e.children[t]}let t=!1;EK([e],(e=>{if(e.id!==i.id)return t?g+=kK:c-=kK,!1!==e.expand&&void 0;t=!0})),w=(g-c)/2,i=e}}else if("root"===r.type){x=!1;const e=y[i.path[0]];let t=!1;EK([e],(e=>{if(e.id!==i.id)return t?g+=kK:c-=kK,!1!==e.expand&&void 0;t=!0})),w=(g-c)/2,i=e}if(c<=o.clientY&&g>=o.clientY){let e="inside";if(o.clientY-c<=w)e="above";else if(g-o.clientY<=w)if(x&&!1!==i.expand)e="inside";else for(e="below";(null===(p=null==i?void 0:i.children)||void 0===p?void 0:p.length)&&!1!==i.expand;)i=Js(i.children);if(Ec(i.path,null==m?void 0:m.over)&&i.move===e)return;v(o6(i,"over",e))}}}}function NK(e){const t=Dd(e),n=R(NU),o=Nd("keydown");F((()=>(window.addEventListener("keydown",o.listener),()=>{window.removeEventListener("keydown",o.listener)})),[o]),F((()=>{const e=o.subscribe((async e=>{const o=t.current,i=o.file;if(void 0===i)return;let{branch:r,currentPageId:l,tree:s}=i;if(!r||!l)return;if(r.path){const e=xT.getBranchByPath(s,r.path);if(!e)return;r=e}const{type:c,id:a,title:u}=r;if(void 0===c)return;let d=!1;const f=[];let h=l;if("page"===c){const e=K_e(i.tree,a);(null==e?void 0:e.id)&&(h=e.id)}if(eh(XHe.new,e)||eh(XHe.snew,e))f.push(s4(UFe()),L7(o,r,h));else if(eh(XHe.duplicate,e)){if("root"===c)return;d=!0,f.push(s4(UFe()),B7(o,r,h))}else if(eh(XHe.move,e)){if("root"===c)return;d=!0,f.push(s4(qFe()),t6(o,r))}else if(eh(XHe.rename,e)){if("root"===c)return;f.push(s4(qFe()),n6(o,r))}else if(eh(XHe.delete,e)){if("root"===c)return;d=!0;const e=J_e(s,r);if(e){const{id:t,type:o}=e;"page"!==o&&"root"!==o||await n.safty(t)}const t=Q_e(s,r);if(t){const{id:e,type:o}=t;"page"!==o&&"root"!==o||await n.safty(e)}f.push(E6(r.id),M7(o,r,h))}if(0===f.length)return;"page"===c&&await n.safty(a,d),h&&await n.safty(h);const p=n.dispatch;!function(t){var o;if(!(null===(o=n.stater.get().modal)||void 0===o?void 0:o.visible))if(eh(XHe.delete,e)&&"page"===c&&u){const e=b$e([u],(()=>{p(lre({...e,visible:!1}),zq(a)),t()}));p(lre(e))}else t()}((()=>{p(...f)}))}));return()=>e.unsubscribe()}),[n,t,o])}function LK(e,t){return{main:Ld([Nd("pointerdown")])}}function BK(e,t,n){const o=Dd(e),i=Dd(t),r=R(NU),l=Nd("pointermove"),s=Nd("pointerup"),c=Nd("pointerdown"),a=Nd("pointerdown"),u=Nd("pointerdown"),d=Nd("pointerdown"),f=Nd("pointerdown"),h=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",l.listener),window.addEventListener("pointerup",s.listener),()=>{window.removeEventListener("pointermove",l.listener),window.removeEventListener("pointerup",s.listener)})),[l,s]),F((()=>{const e=u.pipe(Iu((e=>{var t,n,i,r;e.stopPropagation();const{clientWidth:c}=document.documentElement,a=o.current,{target:u}=a,d=null!==(n=null===(t=u.float)||void 0===t?void 0:t.width)&&void 0!==n?n:200,f=null!==(r=null===(i=u.float)||void 0===i?void 0:i.left)&&void 0!==r?r:0;return l.pipe(Nu(s)).pipe(Lu(16)).pipe(lu((t=>{const n=Math.max(-f,Math.floor(t.clientX-e.clientX));return{width:Math.min(c,Math.max(v$,d-n)),left:Math.min(f+d-v$,f+n)}})))}))).subscribe((e=>{const t=o.current,{target:i}=t;i&&(r.dispatch(cle("col-resize")),n(Aee(i,e),Iee(!0)))})),t=d.pipe(Iu((e=>{var t,n,i,r;e.stopPropagation();const{clientWidth:c}=document.documentElement,a=o.current,{target:u}=a,d=null!==(n=null===(t=u.float)||void 0===t?void 0:t.width)&&void 0!==n?n:200,f=null!==(r=null===(i=u.float)||void 0===i?void 0:i.left)&&void 0!==r?r:0;return l.pipe(Nu(s)).pipe(Lu(16)).pipe(lu((t=>{const n=Math.floor(t.clientX-e.clientX);return{width:Math.min(c-f,Math.max(v$,d+n))}})))}))).subscribe((e=>{const t=o.current,{target:i}=t;i&&(r.dispatch(cle("col-resize")),n(Aee(i,e),Iee(!0)))})),c=f.pipe(Iu((e=>{var t,n,i,r;e.stopPropagation();const{clientHeight:c}=document.documentElement,a=o.current,{target:u}=a,d=null!==(n=null===(t=u.float)||void 0===t?void 0:t.height)&&void 0!==n?n:400,f=null!==(r=null===(i=u.float)||void 0===i?void 0:i.top)&&void 0!==r?r:0;return l.pipe(Nu(s)).pipe(Lu(16)).pipe(lu((t=>{const n=Math.max(-f,Math.floor(t.clientY-e.clientY));return{height:Math.min(c,Math.max(v$,d-n)),top:Math.min(f+d-v$,f+n)}})))}))).subscribe((e=>{const t=o.current,{target:i}=t;i&&(r.dispatch(cle("row-resize")),n(Aee(i,e),Iee(!0)))})),a=h.pipe(Iu((e=>{var t,n,i,r;e.stopPropagation();const{clientHeight:c}=document.documentElement,a=o.current,{target:u}=a,d=null!==(n=null===(t=u.float)||void 0===t?void 0:t.height)&&void 0!==n?n:400,f=null!==(r=null===(i=u.float)||void 0===i?void 0:i.top)&&void 0!==r?r:0;return l.pipe(Nu(s)).pipe(Lu(16)).pipe(lu((t=>{const n=Math.floor(t.clientY-e.clientY);return{height:Math.min(c-f,Math.max(v$,d+n))}})))}))).subscribe((e=>{const t=o.current,{target:i}=t;i&&(r.dispatch(cle("row-resize")),n(Aee(i,e),Iee(!0)))})),p=bu(f,u,d,h).pipe(Iu((()=>s.pipe(Eu(1))))).subscribe((()=>{const e=o.current,t=i.current,{target:l}=e,{float:s}=t;l&&s&&(r.dispatch(p8(l,s),Nq(l),ale()),n(Iee(!1)))}));return()=>{e.unsubscribe(),t.unsubscribe(),c.unsubscribe(),a.unsubscribe(),p.unsubscribe()}}),[n,r,a,o,i,l,s,u,d,f,h]),F((()=>{const e=c.pipe(Iu((e=>{var t,n,i,r,c,a,u,d;const{clientHeight:f,clientWidth:h}=document.documentElement,p=o.current,{target:v}=p,g=null!==(n=null===(t=v.float)||void 0===t?void 0:t.top)&&void 0!==n?n:0,m=null!==(r=null===(i=v.float)||void 0===i?void 0:i.left)&&void 0!==r?r:0,y=null!==(a=null===(c=v.float)||void 0===c?void 0:c.width)&&void 0!==a?a:0,b=null!==(d=null===(u=v.float)||void 0===u?void 0:u.height)&&void 0!==d?d:0;return l.pipe(Nu(s)).pipe(lu((t=>{const n=Math.floor(t.clientX-e.clientX),o=Math.floor(t.clientY-e.clientY);return{left:Math.min(h-y,Math.max(0,m+n)),top:Math.min(f-b,Math.max(0,g+o))}})))}))).subscribe((e=>{var t,i;const l=o.current,{target:s}=l;if(s){if(null===(t=s.float)||void 0===t?void 0:t.sticky){const e=!(null===(i=s.float)||void 0===i?void 0:i.sticky);n(Tee({sticky:e})),r.dispatch(p8(s,{sticky:e}))}n(Tee(e),Iee(!0))}})),t=c.pipe(Iu((()=>s.pipe(Eu(1))))).subscribe((()=>{const e=o.current,t=i.current,{target:l}=e,{float:s}=t;l&&s&&(r.dispatch(p8(l,s),Nq(l),ale()),n(Iee(!1)))}));return()=>{e.unsubscribe(),t.unsubscribe()}}),[r,n,o,i,l,s,c]),{menu:Ld([c]),leftEdge:Ld([u]),rightEdge:Ld([d]),bottomEdge:Ld([h]),topEdge:Ld([f])}}function TK(){const e=Nd("pointerenter"),t=Nd("pointerleave");return F((()=>{}),[]),{profile:Ld([e,t])}}const AK={note:"note",help:"help",guide:"guide",new:"new",paging:"paging",offpage:"offpage",import:"import",export:"export",collapsedNote:"collapsedNote",expandNote:"expandNote",insertNote:"insertNote",syncNote:"syncNote",ijson:"ijson",ipdf:"ipdf",imarkdown:"imarkdown",idirectory:"idirectory",ihtml:"ihtml",ejson:"ejson",epdf:"epdf",emarkdown:"emarkdown",eapplication:"eapplication",ehtml:"ehtml",duplicate:"Duplicate",move:"move",rename:"rename",profile:"profile",delete:"delete",replace:"replace",replaceAll:"replaceAll",safariTitle:"safariTitle",safariOkText:"safariOkText",safariContent:"safariContent",hotkey:"hotkey",list:"list",search:"search",finder:"finder",float:"float",readonly:"readonly",editable:"editable",transfer:"transfer",directory:"directory",fileStructure:"fileStructure",importExport:"importExport",bulletedList:"bulletedList",numberedList:"numberedList",checkList:"checkList",toggleList:"toggleList",sheet:"sheet",backLink:"backLink",reference:"reference",emoji:"emoji",titleOutline:"titleOutline",richTree:"richTree",cardNote:"cardNote",outlineNote:"outlineNote",imageDirectory:"imageDirectory",emojiDirectory:"emojiDirectory",taskDirectory:"taskDirectory",colorfulDirectory:"colorfulDirectory",syncIncremental:"syncIncremental",syncFully:"syncFully",syncFullyMessage:"syncFullyMessage",syncAlready:"syncAlready",syncAlreadyMessage:"syncAlreadyMessage",webdav123Title:"webdav123Title",webdav123Message:"webdav123Message"},MK={cn:{[AK.note]:"笔记",[AK.help]:"帮助",[AK.guide]:"指南",[AK.new]:"新建",[AK.paging]:"分页",[AK.offpage]:"合页",[AK.import]:"导入",[AK.export]:"导出",[AK.eapplication]:"知识库",[AK.collapsedNote]:"一键折叠",[AK.expandNote]:"一键展开",[AK.insertNote]:"向下插入笔记本",[AK.syncNote]:"同步笔记本",[AK.duplicate]:"拷贝副本",[AK.profile]:"文件简介",[AK.rename]:"重命名",[AK.move]:"移动到",[AK.delete]:"删除",[AK.replace]:"替换",[AK.replaceAll]:"全部替换",[AK.safariTitle]:"关于 Safari 浏览器的使用说明",[AK.safariOkText]:"不再提醒",[AK.safariContent]:"因 Safari 浏览器【单指轻点】的兼容性问题，使用前请将电脑【系统设置 > 触控板 > 光标与点按 > 轻点来点按】复选框设置成未选中状态",[AK.hotkey]:"快捷键",[AK.list]:"列表",[AK.search]:"搜索",[AK.directory]:"目录树",[AK.fileStructure]:"文件结构",[AK.importExport]:"导入导出",[AK.bulletedList]:"无序列表",[AK.numberedList]:"有序列表",[AK.checkList]:"任务列表",[AK.toggleList]:"折叠列表",[AK.sheet]:"表格",[AK.backLink]:"反向链接",[AK.reference]:"双向链接",[AK.emoji]:"表情文字",[AK.titleOutline]:"标题与大纲",[AK.richTree]:"富目录树",[AK.outlineNote]:"标题与大纲",[AK.cardNote]:"卡片笔记法",[AK.imageDirectory]:"图文目录",[AK.emojiDirectory]:"表情目录",[AK.taskDirectory]:"任务目录",[AK.colorfulDirectory]:"彩色目录",[AK.transfer]:"移动笔记位置",[AK.finder]:Mf?"在 Finder 中显示":"在文件管理器中显示",[AK.float]:"浮动目录",[AK.readonly]:"阅读模式",[AK.editable]:"编辑模式",[AK.syncIncremental]:"增量同步",[AK.syncFully]:"全量同步笔记本",[AK.syncFullyMessage]:"全量同步云端数据，可能会消耗流量与时间，建议仅在同步笔记出现问题时使用。",[AK.syncAlready]:"笔记空间已绑定",[AK.syncAlreadyMessage]:"您选中的笔记空间已绑定 WebDav，请返回 WebDav 配置列表查看。",[AK.webdav123Title]:"123云盘注意事项",[AK.webdav123Message]:"检测到您在使用123云盘，为了让 webdav 能够正常使用，请在123云盘首页“全部文件”--“我的文件”内新建一个名为“shuli”的文件夹"},en:{[AK.note]:"Note",[AK.help]:"Help",[AK.guide]:"Guide",[AK.new]:"New",[AK.paging]:"Paging",[AK.offpage]:"Off Page",[AK.import]:"Import",[AK.export]:"Export",[AK.eapplication]:"Application",[AK.insertNote]:"Insert Note Below",[AK.collapsedNote]:"collapsed Note",[AK.expandNote]:"Expand All",[AK.syncNote]:"Sync All",[AK.duplicate]:"Duplicate",[AK.profile]:"File Profile",[AK.rename]:"Rename",[AK.move]:"Move To",[AK.delete]:"Delete",[AK.replace]:"Replace",[AK.replaceAll]:"Replace All",[AK.safariTitle]:"Notes On Using Safari",[AK.safariOkText]:"No further reminder",[AK.safariContent]:"Due to compatibility issues with the Safari browser's [One Finger Tap], the checkbox for [System Preferences > Trackpad > Cursor & Tap > Tap to Tap] needs to be set to unchecked before using",[AK.hotkey]:"HotKey",[AK.list]:"List",[AK.search]:"Search",[AK.directory]:"Directory Tree",[AK.fileStructure]:"File Structure",[AK.importExport]:"Import/Export",[AK.bulletedList]:"Bulleted List",[AK.numberedList]:"Numbered List",[AK.checkList]:"Check List",[AK.toggleList]:"Toggle List",[AK.sheet]:"Sheet",[AK.backLink]:"Back Link",[AK.reference]:"Reference",[AK.emoji]:"Emoji",[AK.titleOutline]:"Title And Outline",[AK.richTree]:"Rich Directory Tree",[AK.outlineNote]:"Outline Based Note",[AK.cardNote]:"Card Based Note",[AK.imageDirectory]:"Text And ImageDirectory",[AK.emojiDirectory]:"Emoji Directory",[AK.taskDirectory]:"Task Directory",[AK.colorfulDirectory]:"Colorful Directory",[AK.transfer]:"Relocate the notes",[AK.finder]:"Reveal In Finder",[AK.float]:"Floating Menu",[AK.readonly]:"Readonly",[AK.editable]:"Editable",[AK.syncIncremental]:"Sync Incremental",[AK.syncFully]:"Sync Fully",[AK.syncFullyMessage]:"This operation will synchronize all data, which may consume data traffic and time. It is recommended to use only when incremental synchronization is ineffective.",[AK.syncAlready]:"Notebook space is bound.",[AK.syncAlreadyMessage]:"This notebook space has been bound to WebDAV. Please return to the WebDAV configuration list to view the details.",[AK.webdav123Title]:"123云盘注意事项",[AK.webdav123Message]:"检测到您在使用123云盘，为了让 webdav 能够正常使用，请在123云盘首页“全部文件”--“我的文件”内新建一个名为“shuli”的文件夹"}};function OK(e,t,n,o){const i=Dd(e),r=Dd(t);F((()=>{const e=vu(window,"resize").pipe(Lu(0,Ha)).subscribe((()=>{var e,t;const o=r.current,i=LM(),l=LFe(o),s=BFe(o),c=null!==(t=null===(e=o.file)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:p$,a=TFe();n(l7(c,a)),n(r7(l,s)),n(s7(i.clientWidth,i.clientHeight))}));return()=>e.unsubscribe()}),[n,r]),F((()=>{const e=()=>{var e;const t=[f7(),e6(["rename","more","moving"])];if(!(null===(e=r.current.modal)||void 0===e?void 0:e.visible)){const e=ZFe();t.push(a4(e))}n(...t)};return window.addEventListener("pointerdown",e),()=>{window.removeEventListener("pointerdown",e)}}),[n,r]),F((()=>{if(!Mf||!_f||Pf)return;const e=()=>{const{lang:e}=i.current;if(window.localStorage.getItem(b$)!==b$){const t={visible:!0,showCancel:!1,title:MK[e][AK.safariTitle],okText:MK[e][AK.safariOkText],content:MK[e][AK.safariContent],onOk(){window.localStorage.setItem(b$,b$),n(lre({...t,visible:!1}))}};n(lre(t))}};o.current.safari=e;let t=null;return"/"===window.location.pathname&&(t=setTimeout(e,500)),()=>{null!==t&&clearTimeout(t)}}),[i,n,o])}function RK(e,t,n){const{client:o,showEditor:i,showFile:r}=e;H((()=>{let e=200;!1===i&&(e=o.width);const t=o.height;let l=o.width-80;r&&(l-=e);const s=o.height;n(l7(e,t),r7(l,s))}),[i,r,o.width,o.height,n])}function PK(){return{file:Z(null),tree:Z(null),input:Z(),drag:Z(null)}}function FK(e){const{bounds:t,boundsReset:n}=e.current,o=ts(t),i=Z(o);return n&&(i.current=o),i}function HK(e){const{editor:{ureference:t}}=e,n=Z(t);return n.current=t,n}function _K(e){return G(Pf?WK:jK,{...e})}function jK(e){const t=Dd(e),n=Z(null),o=SY(t,n);return G(zK,{...e,imperator:n,events:o})}function WK(e){const t=Dd(e),n=Z(null),o=EY(t,n);return G(zK,{...e,imperator:n,events:o})}function zK(e){var t,n,o,i;const r=Dd(e),l=R(NU),s=R(SU),c=Dd(s),a=R(DU),u=R(EU),d=R(kU),{imperator:f,events:h}=e,p=HK(e),v=null===(t=s.file)||void 0===t?void 0:t.currentPageId,{dispatch:g,editable:m,virtual:y,focus:b,contextmenu:C,placeholder:w,keyboardHeight:x,scrollPropagation:S,isRightClickFocused:E,showExpandSelectionLoupe:k}=e,{flush:D,gfocus:I,modal:N}=s,L=Ec(I,b),B=$2(e),T=null==N?void 0:N.visible,{style:A,refresh:M,cwnd:O,bounds:P,reload:F,boundsReset:z,isEditPending:V,isScrolling:$,isScrollPending:Z,isMoving:U,status:q,selection:Y,selectionReflow:K,resizeHeight:X,resizeWidth:J,clientHeight:Q,clientWidth:ee,threshold:te,formatPaint:ne}=B.current,oe=FK(B),ie=W((()=>{const e=c.current.editor.data.children.length;let t=Math.floor(e/m$*100);return t>1e3&&(t=1e3),Vs(((e,t,n)=>{e(g9(pRe(!0)),N9("updated"),q9(t),p9(),b4()),n&&requestAnimationFrame((()=>{var e;null===(e=f.current)||void 0===e||e.slice()}))}),t)}),[c,v]),re=W((()=>Vs((t=>{const n=c.current,o={...e,editor:B.current};u(r3({dispatch:t,rootdispatch:u,rootstate:n,imperator:f,context:o,sync:ie}))}),16)),[u,c]),le=W((()=>Vs((()=>{const e=l.stater.get();if(e.editor.isEditPending)return;c$e(YZe(e))}),100)),[l]),se=_((t=>{const{virtual:n,root:o,main:i,editor:l,dispatch:s}=r.current;if(t.reload)return s(X9());const c=[r9(t),$9()];if(o&&t.isScrolling&&c.push(a4(void 0,d)),n){if(t.slicer){const{data:e}=B.current;oe.current=v_(e,t.node),c.push(m9(!1))}c.push(c9({...oe.current})),!l.scrollTouchReset||l.location||t.cwnd||t.isScrolling||(c.push(C9(!1)),"native"!==e.scroller&&c.push(S9()));const n=e=>{const{bounds:t}=e.editor;return oe.current=ts(t),e=U3()(e),e=b6()(e)};let o=!1;t.isEditPending&&(o=!0),t.composing&&(o=!1),o?(c.push(N9("pending"),Z9(p.current,t.ureference)),ie(s,n,!0),p.current=t.ureference):t.isSelectPending&&c.push(C4()),l.isScrolling&&!t.isScrolling&&(c.push(C4()),i&&le()),t.isScrolling&&t.scrollHeight>t.clientHeight&&t.selection&&!ek.isCollapsed(t.selection)&&Ec(t.selection,hPe(l.data))&&(Ec(oe.current,l.bounds)||c.push(R9(!0)))}s(...c),L&&re(s)}),[r,B,u,oe,p,L,ie,re,le]),ce=_((e=>{_ze(B.current,"copy")}),[c]),ae=_((e=>{_ze(B.current,"cut")}),[c]),ue=_((e=>{zie(l,u,f)}),[l,u,f]),de=_((e=>{const{data:t,node:n}=B.current,{root:o}=r.current,{clearSelection:i,setSelection:l,setSelectionReflow:s}=ek,c=hPe(o?t:n),a=[i(),l(c),s(!0)];se(Md(...a)(e))}),[se]),fe=_((e=>{var t,n;const{root:o,file:i,onMultipleClick:l}=r.current;if(o&&2===e){const e=null!==(n=null===(t=null==i?void 0:i.branch)||void 0===t?void 0:t.id)&&void 0!==n?n:null==i?void 0:i.currentPageId;e&&u(E6(e))}return null==l?void 0:l(e)}),[r,u]),he=_((e=>{const{editor:t,virtual:n}=r.current;if(!n)return;const{scrollHeight:o}=t;return o<5e3?void 0:(u(hte(Math.min(1,e))),!0)}),[r,u]),pe=_(((e,t)=>{if(!1===r.current.virtual)return null;const{store:n}=c.current,{data:o}=B.current,{start:i,end:l}=oe.current;if("prev"===e){return vPe(o,i.path.length?i.path:l.path,n)}if("next"===e){return pPe(o,l.path.length?l.path:i.path,n)}if("cwnd"===e&&t){const e=fPe(o,l.path);return 0===e.length?null:gPe(o,e,t,n)}return null}),[r,c,B,oe]),ve=_(((e,t)=>{if(void 0===t)return;const{data:n}=B.current,{path:o,node:i,pop:r,push:l}=t;let s=p.current;if("push-prev"===e){const e=g_(n,i);if(oe.current.start={path:o,slice:e},l){const e=jPe(l);s=Zo(s,e)}}else if("push-next"===e){const e=m_(n,i);if(oe.current.end={path:o,slice:e},l){const e=jPe(l);s=Zo(s,e)}}else if("pop-prev"===e){const e=g_(n,i);if(oe.current.start={path:o,slice:e},r){const e=jPe(r);s=Pc(s,Object.keys(e))}}else if("pop-next"===e){const e=m_(n,i);if(oe.current.end={path:o,slice:e},r){const e=jPe(r);s=Pc(s,Object.keys(e))}}p.current=s}),[B,oe,p]),ge=_((async(e,t)=>{if(!aVe(e))return;const{root:n,file:o}=r.current;if(!n)return;const{node:i,selection:s,composing:c}=t;if(!s||c)return;const a=LPe(i,s);for(const e of a)e!==(null==o?void 0:o.currentPageId)&&await l.safty(e,!0)}),[r]);H((()=>{const{provider:t,root:n}=e,o=[];if(n&&void 0===t){const t={...e,editor:B.current},n={rootdispatch:u,rootstate:s,dispatch:g,imperator:f,context:t,sync:ie};o.push(r3(n))}o.length&&g(...o)})),H((()=>{var t;const{root:n,file:o}=e,i=[];if("updated"===q&&i.push(N9("normal")),z&&!F&&i.push(a9(!1)),n){const e=null==o?void 0:o.currentPageId;e&&(null===(t=null==D?void 0:D.ids)||void 0===t?void 0:t.includes(e))&&(i.push($4(e)),i.push(G9())),!(null==D?void 0:D.ids)&&(null==D?void 0:D.after)&&E$e(s)&&i.push(U4())}i.length&&g(...i)})),j(e.ref,(()=>({scrollTo(e){var t;null===(t=f.current)||void 0===t||t.scrollTo(e)},clearVisibleState(){var e;null===(e=f.current)||void 0===e||e.clearVisibleState()},ele(e){var t,n;return null!==(n=null===(t=f.current)||void 0===t?void 0:t.ele(e))&&void 0!==n?n:null},commit(...e){var t;null===(t=f.current)||void 0===t||t.commit(...e)}})));const me=Boolean(O||K||X||J||$||U||V||Z),ye={backgroundColor:null===(n=e.style)||void 0===n?void 0:n.backgroundColor,paddingTop:null!==(i=null===(o=B.current.scrollOffset)||void 0===o?void 0:o.top)&&void 0!==i?i:0};return W((()=>{var e,t,n;const{focus:o,scroller:i,selecter:l,onSelectExpand:s,onLoupeMounted:u}=r.current,{editor:{ghighlights:d,clientWidth:p}}=c.current,v=(null!==(t=null===(e=a.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:p)/2;let g;if(d){const e=BHe(o).child;e&&(g=null===(n=null==d?void 0:d.find((t=>Ec(t.search,e))))||void 0===n?void 0:n.highlights)}const b=pFe(B.current,{focusing:L,highlights:g});let D=A;ne&&(D={...A,cursor:`url(${uBe})  5 10, text`}),A.fontWeight=Tf;const I={...r.current,editor:B.current};return G(RU,{value:ie,children:G(TU,{value:f,children:G(MU,{value:I,children:G(OU,{value:{scroller:i,selecter:l,contextmenu:C},children:G(tk,{editable:m&&L&&!T,ref:f,style:ye,editStyle:D,virtual:y,performance:"pending"!==q,value:b,scroller:i,selecter:l,keyboardHeight:x,contextmenu:C,placeholder:w,scrollPropagation:S,isRightClickFocused:E,showExpandSelectionLoupe:k,...h,onCopy:ce,onCut:ae,onPaste:ue,onSelectAll:de,onSelectExpand:s,onLoupeMounted:u,onScrollBar:he,onChange:se,onMultipleClick:fe,renderElement:(e,t)=>Kze(e,t,m,L),requestEditNode:pe,responseEditNode:ve,extractReference:jPe,preprocessKeyDown:ge,portalWidth:p,portalOffset:v,portal:(e,t,n)=>$k(e,a,t,void 0,void 0,n)})})})})})}),[kd(me),M,L,T,q,C,Q,ee,te,ne,x,S,E,k,ie,JSON.stringify(ye),JSON.stringify(P),JSON.stringify(Y)])}const VK={position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:"#fff"},$K={overflow:"hidden"},ZK={position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"auto",color:kf},UK={paddingTop:16,paddingBottom:2,display:"flex",fontWeight:Bf,flexDirection:"column"},qK={display:"flex",position:"relative",width:"100%",paddingLeft:20,paddingRight:20,boxSizing:"border-box"},YK={display:"flex",marginRight:6,alignItems:"center"},KK={color:Df,paddingTop:8,paddingLeft:20,marginBottom:-2,fontSize:12},GK=44,XK="rgb(242, 243, 245)",JK="#ffffff",QK="rgba(255, 255, 255, 0.75)",eG=44,tG=5,nG=12,oG=12,iG=44,rG=bf,lG="rgba(211, 211, 211, 0.3)",sG="rgba(211, 211, 211, 0.5)",cG="rgba(211, 211, 211, 0.6)",aG={default:lG,hover:cG,active:sG},uG={default:xf,hover:cG,active:lG},dG={position:"relative",width:"100%",height:"100%"},fG={position:"absolute",top:0,left:0,right:0,zIndex:1e3},hG={display:"flex",justifyContent:"space-between",alignItems:"center",height:GK},pG={width:40,marginLeft:3,display:"flex",justifyContent:"center",alignItems:"center",height:GK},vG={marginRight:5,display:"flex"},gG={width:40,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",height:GK},mG={position:"absolute",top:0,left:0,bottom:0,right:0},yG={position:"relative",height:"100%",width:"100%",overflow:"scroll"},bG={position:"absolute",top:0,left:0,bottom:0,right:0,color:kf},CG={width:"100%",display:"flex"},wG={width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",paddingTop:36,paddingBottom:48},xG={width:72,height:72,borderRadius:"50%",backgroundColor:mf,display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",marginBottom:13,paddingLeft:6},SG={fontSize:18,color:"#fff"},EG={position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",zIndex:1,backgroundColor:yf},kG={position:"relative",display:"flex",flex:1},DG={position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:XK,color:kf},IG={width:"100%"},NG={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100%",paddingTop:44,paddingBottom:44},LG={paddingLeft:6,width:75,height:75,boxSizing:"border-box",borderRadius:15,display:"flex",justifyContent:"center",alignItems:"center"},BG={marginTop:8,fontSize:12,color:Df},TG={position:"absolute",display:"flex",justifyContent:"center",bottom:30,left:0,right:0,fontSize:12,color:Df},AG={position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:"#fff",display:"flex",flexDirection:"column",color:kf},MG={fontSize:14,textAlign:"center",marginTop:60},OG={marginTop:60,marginLeft:12,marginRight:12,height:44,borderRadius:22,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},RG={position:"absolute",top:0,left:0,bottom:0,right:0,paddingTop:4,color:kf},PG={position:"absolute",clip:"rect(0 0 0 0)"},FG={position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:"#fff"},HG={position:"absolute",top:0,right:0,bottom:0,left:0,color:kf,fontWeight:Bf,backgroundColor:XK},_G={position:"absolute",top:0,right:0,bottom:0,left:0},jG={position:"relative",height:"100%",width:"100%",display:"flex",flexDirection:"column"},WG={position:"relative",height:"100%",width:"100%",display:"flex",flexDirection:"column"},zG={position:"relative",height:"100%",width:"100%",overflow:"auto"},VG={backgroundColor:mf,borderRadius:8,paddingTop:24,paddingLeft:oG,paddingRight:oG,margin:oG,position:"relative"},$G={backgroundColor:mf,borderRadius:8,paddingTop:6,paddingBottom:6,paddingLeft:oG,paddingRight:oG,margin:oG,userSelect:"none"},ZG={position:"absolute",bottom:0,left:0,right:0,marginBottom:12},UG={marginLeft:12,marginRight:12,height:iG,borderRadius:22,display:"flex",alignItems:"center",justifyContent:"center",fontSize:15},qG={marginBottom:28,position:"relative"},YG={marginBottom:24,position:"relative"},KG={marginBottom:16,position:"relative",display:"flex"},GG={width:"54%",paddingRight:10,boxSizing:"border-box"},XG={width:"44%",paddingRight:10,boxSizing:"border-box"},JG={fontSize:13,marginBottom:6,fontWeight:400,color:Df},QG={fontSize:15,fontWeight:Bf,display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"},eX={position:"relative",top:3},tX={fontSize:13,marginBottom:6,marginLeft:15,fontWeight:400,color:If},nX={position:"relative",display:"flex",alignItems:"center"},oX={outline:"none",border:"none",width:"100%",height:40,fontSize:14,boxSizing:"border-box",borderRadius:20,position:"relative",padding:"0px 32px 0px 14px",backgroundColor:rG,display:"flex",alignItems:"center"},iX={position:"absolute",right:12,display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:15,height:15},rX={position:"absolute",right:0,display:"flex",alignItems:"center"},lX={position:"absolute",right:36,marginTop:1},sX={position:"absolute",right:12,display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:15,height:15,pointerEvents:"none",transform:"rotate(90deg)"},cX={position:"absolute",left:15,bottom:-18,color:"red",fontSize:11},aX={fontWeight:Bf},uX={fontSize:16,fontWeight:Bf,height:24,padding:"16px 20px 1px 20px",display:"flex",alignItems:"center"},dX={position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"auto",fontWeight:Bf},fX={fontSize:16,fontWeight:Bf,height:24,padding:"16px 0 1px 0",margin:"0 20px",display:"flex",alignItems:"center",position:"relative"},hX={position:"absolute",right:8,display:"flex",alignItems:"center",animation:"rotate 1.2s linear infinite"},pX={fontSize:16,fontWeight:Bf,height:24,padding:"16px 20px 1px 20px",display:"flex",alignItems:"center"},vX={display:"flex",justifyContent:"space-between",alignItems:"center",height:36,position:"relative"},gX={fontSize:10,minHeight:12,marginBottom:6,marginTop:-4},mX={fontSize:16.5,fontWeight:Bf,display:"flex"},yX={display:"inline-flex",transition:"transform 1s linear",transform:"rotate(0deg)"},bX={marginRight:8,marginLeft:1,marginTop:1},CX={height:30,width:30,display:"flex",alignItems:"center",justifyContent:"center",transform:"rotate(90deg)",position:"relative",right:-6},wX={},xX={paddingTop:10},SX={position:"relative",padding:12},EX={borderRadius:8,backgroundColor:QK,padding:"6px 12px"},kX={display:"flex",justifyContent:"space-between",alignItems:"center",height:44,fontSize:15,fontWeight:Bf},DX={display:"inline-flex",animation:"rotate 1.2s linear infinite"},IX={position:"absolute",top:0,right:0,bottom:0,left:0},NX={position:"absolute",top:0,right:0,bottom:0,left:0,margin:"0 12px 12px 12px",backgroundColor:JK,borderRadius:8,overflow:"hidden"},LX={position:"absolute",top:0},BX={position:"relative",display:"flex",flexDirection:"column"},TX={margin:12,overflow:"hidden",borderRadius:8,backgroundColor:mf,position:"relative"},AX={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"scroll"},MX={position:"relative",display:"flex",flexDirection:"column"},OX={height:eG,width:"100%",position:"relative",borderColor:"#d8d8d8",display:"flex",alignItems:"center"},RX={width:"calc(100% - 46px)",height:"100%",position:"relative",display:"flex",alignItems:"center",paddingLeft:12,paddingRight:2,overflow:"scroll",boxSizing:"border-box",transition:"background 100ms ease-out"},PX={width:30,height:30,boxSizing:"border-box",paddingTop:1,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:4,marginRight:10.9,flexShrink:0,transition:"background 100ms ease-out"},FX={...PX,marginRight:0,position:"absolute",right:12},HX={position:"absolute",left:0,right:0,bottom:eG+tG,display:"flex",justifyContent:"center",pointerEvents:"none",zIndex:1e4},_X={height:eG,maxWidth:"calc(100vw - 48px)",paddingLeft:12,paddingRight:12,borderRadius:6,position:"relative",display:"flex",alignItems:"center",overflow:"scroll",opacity:1,transform:`translateY(calc(100% + ${tG}px))`,transition:"transform 160ms ease-out, opacity 160ms ease-out",backgroundColor:mf,pointerEvents:"visible",boxShadow:"0 0 2px 1px rgba(0, 0, 0, 0.08)"},jX={...PX,position:"relative",transition:"background-color 100ms ease-out"},WX={position:"relative",top:1.5},zX={position:"absolute",bottom:2,right:-4,fontSize:9,fontWeight:"bold"},VX={position:"relative",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},$X={position:"absolute",bottom:3.5,height:3,width:14,boxSizing:"border-box"},ZX={display:"flex",flexWrap:"wrap",marginTop:8,marginLeft:12,marginRight:0},UX={width:"calc(50% - 12px)",marginRight:12,marginBottom:12,height:eG,borderRadius:6,flexShrink:0,display:"flex",alignItems:"center",position:"relative",boxSizing:"border-box",userSelect:"none",transition:"border 100ms ease-out, background 100ms ease-out"},qX={width:"calc(25% - 12px)",marginRight:12,marginBottom:12},YX={width:"100%",borderRadius:6,flexShrink:0,display:"flex",alignItems:"center",transition:"background 100ms ease-out"},KX={paddingTop:7,paddingBottom:8,paddingRight:9,marginLeft:-1,width:"100%"},GX={display:"flex",flexDirection:"column",flex:1},XX={paddingLeft:10,position:"relative"},JX={flex:1,height:5,borderRadius:3,background:mf,marginLeft:5},QX={display:"flex",alignItems:"center",height:15},eJ={position:"relative"},tJ={marginLeft:12,display:"flex",marginTop:1,fontSize:15,fontWeight:Bf,transition:"color 100ms ease-out"},nJ={position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:6,pointerEvents:"none"},oJ={marginLeft:14,display:"flex"},iJ={position:"absolute",right:14,paddingLeft:6,paddingRight:6,borderRadius:3},rJ={position:"absolute",right:14,color:If,fontSize:13,transition:"color 100ms ease-out"},lJ={position:"absolute",top:0,right:0,bottom:0,left:0},sJ={position:"absolute",top:0,right:0,bottom:0,left:0,margin:"0 12px 12px 12px",overflow:"hidden",backgroundColor:JK,borderRadius:8},cJ={position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",flexDirection:"column",paddingTop:14,fontSize:15,fontWeight:Bf},aJ={display:"flex",flexWrap:"wrap",marginLeft:12,marginRight:0},uJ={marginLeft:12,marginRight:12,marginBottom:12,height:eG,borderRadius:6,flexShrink:0,display:"flex",alignItems:"center",position:"relative",paddingLeft:12,color:"#333"},dJ={position:"absolute",right:12,marginTop:1},fJ={display:"flex",height:"100%",flex:1},hJ={display:"flex",flex:1,height:"100%",userSelect:"none",WebkitUserSelect:"none"};function pJ(e){var t;const n=FH();return X("div",{style:{...dG,...e.style},children:[G("div",{style:{...fG,paddingTop:n},children:X("div",{style:hG,children:[!1===e.back?null:G(ch,{style:pG,onClick:()=>{var t;!1!==(null===(t=e.onClickBack)||void 0===t?void 0:t.call(e))&&jH("pop")},children:$f?null:G(OO,{width:10})}),e.title,G("div",{style:vG,children:null===(t=e.menus)||void 0===t?void 0:t.map(((t,n)=>{let o=null;return"more"===t?$f||(o=G(RO,{width:15})):"readonly"===t&&(o=G(MO,{width:17,fill:kf,style:{position:"relative",top:-.5}})),G(ch,{style:gG,onClick:()=>{var o;null===(o=e.onClickMenu)||void 0===o||o.call(e,t,n)},children:o},n)}))})]})}),G("div",{style:{...mG,paddingTop:n+GK},children:G("div",{style:yG,children:e.children})})]})}const vJ={note:"note",setting:"setting",plan:"plan",pricing:"pricing",help:"help",cloud:"cloud",webdav:"webdav",download:"download",sponsor:"sponsor",home:"home",update:"update",changelog:"changelog",about:"about",feedback:"feedback",userAgreement:"userAgreement",privacyPolicy:"privacyPolicy"},gJ={cn:{[vJ.note]:"笔记",[vJ.setting]:"设置",[vJ.plan]:"产品计划",[vJ.pricing]:"定价",[vJ.help]:"帮助",[vJ.cloud]:"云服务",[vJ.webdav]:"WebDAV",[vJ.about]:"关于书立",[vJ.download]:"下载客户端",[vJ.sponsor]:"赞助",[vJ.home]:"官网",[vJ.update]:"检查更新",[vJ.changelog]:"更新日志",[vJ.feedback]:"意见反馈",[vJ.userAgreement]:"用户协议",[vJ.privacyPolicy]:"隐私政策"},en:{[vJ.note]:"Note",[vJ.setting]:"Setting",[vJ.plan]:"RoadMap",[vJ.pricing]:"Pricing",[vJ.help]:"Help",[vJ.cloud]:"Cloud Services",[vJ.webdav]:"WebDAV",[vJ.about]:"About",[vJ.download]:"Download",[vJ.sponsor]:"Sponsor",[vJ.home]:"Home",[vJ.update]:"Version Update",[vJ.changelog]:"Changelog",[vJ.feedback]:"Feedback",[vJ.userAgreement]:"UserAgreement",[vJ.privacyPolicy]:"PrivacyPolicy"}};const mJ={copyLink:"copyLink",openFromBrowser:"openFromBrowser",editNote:"editNote",copyNote:"copyNote",removeNote:"removeNote",generateQRCode:"generateQRCode"},yJ={cn:{[mJ.copyLink]:"复制链接",[mJ.openFromBrowser]:"在浏览器打开",[mJ.editNote]:"编辑 WebDAV 配置",[mJ.copyNote]:"拷贝 WebDAV 配置",[mJ.removeNote]:"移除 WebDAV 配置",[mJ.generateQRCode]:"生成二维码"},en:{[mJ.copyLink]:"Copy Link",[mJ.openFromBrowser]:"Open From Browser",[mJ.editNote]:"Edit WebDav Config",[mJ.copyNote]:"Copy WebDav Config",[mJ.removeNote]:"Remove WebDav Config",[mJ.generateQRCode]:"Generate QRCode"}};function bJ(e){const{keys:n,i18n:o}=t,i={fill:kf,width:13.5,style:{position:"relative",top:-.5}};return[[{name:o[e.lang][n.syncNote],value:n.syncNote,icon:G(fO,{...i})}],[{name:yJ[e.lang][mJ.editNote],value:mJ.editNote,icon:G(sO,{...i})},{name:yJ[e.lang][mJ.copyNote],value:mJ.copyNote,icon:G(lO,{...i,width:13})}],[{name:yJ[e.lang][mJ.generateQRCode],value:mJ.generateQRCode,icon:G(WR,{...i,width:13})}],[{name:yJ[e.lang][mJ.removeNote],value:mJ.removeNote,style:{color:"red"},icon:G(WM,{...i,width:14.5,fill:"red"})}]]}function CJ(){return document.documentElement.clientWidth-4*oG-50}function wJ(){return document.documentElement.clientWidth-4*oG-40}function xJ(e){const t=WH();if(!t)return;let n;for(let o=t.length-1;o>=0;o--){const i=t[o];if(i.route===e){n=i.uid;break}}return n}function SJ(){const{clientHeight:e,clientWidth:t}=document.documentElement;return{clientHeight:e-FH()-GK,clientWidth:t-36}}function EJ(){const e=zH();return xJ(FT.editor)!==e}var kJ;!function(e){e.TOOLS_HIDE_KEYBOARD="TOOLS_HIDE_KEYBOARD",e.TOOLS_SHOW_KEYBOARD="TOOLS_SHOW_KEYBOARD",e.TOOLS_CLEAR_SELECTION="TOOLS_CLEAR_SELECTION",e.TOOLS_BEFORE_DESTROY="TOOLS_BEFORE_DESTROY",e.TOOLS_POST_INNER="TOOLS_POST_INNER",e.TOOLS_POST_UPPER="TOOLS_POST_UPPER",e.TOOLS_HIDE_UPPER="TOOLS_HIDE_UPPER",e.TOOLS_EDITOR_ACTION="TOOLS_EDITOR_ACTION",e.EDITOR_SHOW_KEYBOARD="EDITOR_SHOW_KEYBOARD",e.EDITOR_FOCUS_SHEET="EDITOR_FOCUS_SHEET",e.EDITOR_FOCUS="EDITOR_FOCUS",e.EDITOR_EDITABLE="EDITOR_EDITABLE",e.EDITOR_REFRESH_WORKSPACE="EDITOR_REFRESH_WORKSPACE",e.EDITOR_REFRESH_EDITOR="EDITOR_REFRESH_EDITOR",e.EDITOR_REFRESH_WEBDAV="EDITOR_REFRESH_WEBDAV",e.EIDTOR_SELECTION_STATUS="EIDTOR_SELECTION_STATUS",e.EDITOR_BEFORE_DESTROY="EDITOR_BEFORE_DESTROY",e.EDITOR_DETECT_WEBDAV="EDITOR_DETECT_WEBDAV",e.WORKSPACE_REPRESH_EDITOR="WORKSPACE_REPRESH_EDITOR",e.WORKSPACE_REPRESH_STORE="WORKSPACE_REPRESH_STORE",e.WORKSPACE_REPRESH_WEBDAV="WORKSPACE_REPRESH_WEBDAV",e.WORKSPACE_SYNC_WEBDAV="WORKSPACE_SYNC_WEBDAV",e.WORKSPACE_DETECT_WEBDAV="WORKSPACE_DETECT_WEBDAV",e.WORKSPACE_DELETE_WEBDAV="WORKSPACE_DELETE_WEBDAV",e.WORKSPACE_DELETE_ITEM="WORKSPACE_DELETE_ITEM",e.SELECTOR_CLEAR_ACTIVITY="SELECTOR_CLEAR_ACTIVITY",e.FLOAT_ANCHOR_BRANCH="FLOAT_ANCHOR_BRANCH",e.MORE_READONLY_BRANCH="MORE_READONLY_BRANCH",e.MROE_TOGGLE_BRANCH="MROE_TOGGLE_BRANCH",e.MORE_RENAME_BRANCH="MORE_RENAME_BRANCH",e.MORE_DELETE_BRANCH="MORE_DELETE_BRANCH",e.MORE_DUPLICATE_BRANCH="MORE_DUPLICATE_BRANCH",e.MORE_MOVING_BRANCH="MORE_MOVING_BRANCH",e.MROE_INSERT_NOTE="MROE_INSERT_NOTE",e.MORE_IMPORT_MARKDOWN="MORE_IMPORT_MARKDOWN",e.MORE_IMPORT_SLI="MORE_IMPORT_SLI",e.MORE_EXPORT_SLI="MORE_EXPORT_SLI",e.MORE_EXPORT_MARKDOWN="MORE_EXPORT_MARKDOWN",e.MORE_EXPORT_HTML="MORE_EXPORT_HTML",e.MORE_EXPORT_APPLICATION="MORE_EXPORT_APPLICATION",e.MORE_BEFORE_DESTROY="MORE_BEFORE_DESTROY",e.MORE_SYNC_NOTE="MORE_SYNC_NOTE",e.MOVING_BEFORE_DESTROY="MOVING_BEFORE_DESTROY",e.SEARCH_ANCHOR_EDITOR="SEARCH_ANCHOR_EDITOR",e.SEARCH_REPLACE_EDITOR="SEARCH_REPLACE_EDITOR",e.SEARCH_FOCUS_EDITOR="SEARCH_FOCUS_EDITOR",e.SEARCH_CLEAR_HIGHLIGHT="SEARCH_CLEAR_HIGHLIGHT",e.WEBDAV_SELECT_NOTE="WEBDAV_SELECT_NOTE",e.WEBDAV_SELECT_MODE="WEBDAV_SELECT_MODE",e.WEBDAV_SUBMIT_FROM="WEBDAV_SUBMIT_FROM",e.WEBDAV_UPDATE_FORM="WEBDAV_UPDATE_FORM",e.WEBDAV_UPDATE_CLOUD="WEBDAV_UPDATE_CLOUD",e.WEBDAV_DELETE_ITEM="WEBDAV_DELETE_ITEM",e.WEBDAV_SYNC_NOTE="WEBDAV_SYNC_NOTE",e.WEBDAV_SYNC_FULLY="WEBDAV_SYNC_FULLY",e.WEBDAV_SYNC_CLOUD="WEBDAV_SYNC_CLOUD",e.WEBDAV_SYNC_ACTIONS="WEBDAV_SYNC_ACTIONS",e.WEBDAV_CHANGE_MODE="WEBDAV_CHANGE_MODE",e.WEBDAV_REFRESH_WORKSPACE="WEBDAV_REFRESH_WORKSPACE"}(kJ||(kJ={}));const DJ=e=>t=>(t.tool=e,t),IJ=e=>t=>(t.keyboardHeight=e>0?e+eG:0,t),NJ=e=>t=>(t.ready=e,t),LJ=e=>t=>(t.focus=e,t),BJ=()=>e=>(delete e.focus,e),TJ=()=>e=>(e.refresh=PT(),e),AJ=e=>t=>(t.inited=e,t),MJ=e=>t=>(t.type=e,t),OJ=e=>t=>(t.selectionStatus=e,t),RJ=(e,t)=>n=>{var o;return null===(o=n.tools)||void 0===o||o.forEach((n=>{e.name===n.name?n.active=t:n.inner&&(n.active=!1)})),n},PJ=(e,t)=>n=>{var o;return null===(o=n.tools)||void 0===o||o.forEach((n=>{e.name===n.name?n.active=t:n.upper&&(n.active=!1)})),n},FJ=()=>e=>{var t;return null===(t=e.tools)||void 0===t||t.forEach((e=>{e.inner&&(e.active=!1)})),e},HJ=()=>e=>{var t;return null===(t=e.tools)||void 0===t||t.forEach((e=>{e.upper&&(e.active=!1)})),e},_J=e=>t=>(t.inner?Object.assign(t.inner,e):t.inner=e,t),jJ=e=>t=>(t.tools=e,t),WJ=e=>t=>(t.name=e,t),{toggleBranchArrow:zJ,recursiveTree:VJ}=xT,$J=e=>t=>(t.value={...e,scrollOffset:{lower:e.clientHeight/2,upper:e.clientHeight/2}},t),ZJ=(e,t)=>t=>t.value?(VJ(t.value.tree,(t=>{t.id===(sc(e)?e:e.id)?t.active=!0:t.active=!1})),t.value.isEditPending=!0,t):t,UJ=(e,t)=>n=>(n.width=e,n.height=t,n.refresh=pRe(!0),n.autoFocus=!0,n),qJ=(e,t)=>n=>(n.client={width:e,height:t},n),YJ=e=>t=>(t.note=e,t),{createBlockNode:KJ,transformNodeToEditNode:GJ}=ek,XJ=e=>t=>(Object.assign(t,e),t),JJ=e=>n=>{if(e.username&&(n.username=e.username),e.uiv&&(n.usernameInvisible=e.uiv),e.password&&(n.password=e.password),e.piv&&(n.passwordInvisible=e.piv),e.service&&(n.service=e.service),e.id&&e.title&&(n.selected={id:e.id,title:GJ(KJ([e.title]),"")},n.roots.some((t=>t.id===e.id))||(n.incloud=!0)),void 0!==e.mode){const{createWebDavModes:o}=t,i=o().find((t=>t.value===e.mode));i&&(n.mode=i)}return n},QJ=e=>t=>(Object.assign(t,e),t),eQ=(e,n)=>o=>{var i,r,l,s,c,a;const{FontSizeReader:u}=t,d=null!==(r=null===(i=e.file)||void 0===i?void 0:i.tree)&&void 0!==r?r:[],{item:f,options:[h=[]]}=o,p=document.documentElement.clientWidth-48-48;for(const e of d){const t=h.findIndex((t=>t.value.id===e.id));if(-1===t){const t={name:G(u,{width:p,node:e.title}),value:e};t.rightIcons=null!==(l=t.rightIcons)&&void 0!==l?l:[],(null===(c=null===(s=o.cloud)||void 0===s?void 0:s[e.id])||void 0===c?void 0:c.length)?(t.disable=!0,t.rightIcons.push(G(VR,{width:12,style:{position:"relative",top:.5}}))):e.id===(null===(a=f.selected)||void 0===a?void 0:a.id)&&(t.rightIconType="check"),n&&(e.incloud=!0,t.rightIcons.push(G(dO,{width:14,style:{position:"relative",top:1}}))),h.push(t)}}return o.options=[h],o},{isCollapsed:tQ}=ek;let nQ=null;function oQ(){if(nQ)return nQ;const{slash:e,outline:n,increaseIndent:o,decreaseIndent:i,bulleted:r,numbered:l,check:s,toggle:c,sheet:a,link:u,refer:d,quote:f,separator:h}=t;return nQ={add:Fj,outline:n.name,font:"font-style",align:"align-style",list:"list-style",image:wW,slash:e.name,undo:bj,redo:hj,paintFormat:Vj,clearFormat:Kj,text:`${n.name}-text`,title:`${n.name}-title`,h1:`${n.name}-h1`,h2:`${n.name}-h2`,h3:`${n.name}-h3`,h4:`${n.name}-h4`,h5:`${n.name}-h5`,h6:`${n.name}-h6`,bold:tW,italic:IW,strikeUnderline:_W,strikeThrough:MW,textColor:YW,highlightColour:fz,fillColor:oz,fontSize:hW,fontFamily:sW,lineHeight:Yz,letterSpacing:hV,alignLeft:"align-left",alignRight:"align-right",alignCenter:"align-center",alignJustify:"align-justify",firstLineIndent:"first-line-indent",increaseIndent:o.name,decreaseIndent:i.name,bulletedList:r.name,numberedList:l.name,checkList:s.name,toggleList:c.name,sheet:a.name,link:u.name,refer:d.name,quote:f.name,separator:h.name,takePhoto:"take-photo",selectPicture:"select-picture",borderAll:SV.borderAll,borderOutline:SV.borderOutline,borderInside:SV.borderInside,borderBottom:SV.borderBottom,borderLeft:SV.borderLeft,borderNone:SV.borderNone,borderRight:SV.borderRight,borderTop:SV.borderTop,borderHide:SV.borderHide,borderShow:SV.borderShow,borderColor:SV.borderColor,borderMoreColor:"border-more-color",verticalTop:UV.verticalTop,verticalMiddle:UV.verticalMiddle,verticalBottom:UV.verticalBottom,merge:$V,sheetInsert:"sheet-insert",sheetInsertRight:"sheet-insert-right",sheetInsertLeft:"sheet-insert-left",sheetInsertTop:"sheet-insert-top",sheetInsertBottom:"sheet-insert-bottom",sheetSelectRow:"sheet-select-row",sheetSelectColumn:"sheet-select-column",sheetSelectAll:"sheet-select-all",sheetDeleteRow:"sheet-delete-row",sheetDeleteColumn:"sheet-delete-column",sheetDeleteAll:"sheet-delete-all",sheetMore:"sheet-more",sheetCopy:"sheet-copy",sheetCut:"sheet-cut",sheetPaste:"sheet-paste"}}function iQ(){const{bulleted:e,numbered:n,check:o,toggle:i,common:r}=t,l=oQ();return[{name:l.bulletedList,value:r.list.SubClass.TWO,payload:e.group[1]},{name:l.bulletedList,value:r.list.SubClass.ONE,payload:e.group[0]},{name:l.numberedList,value:r.list.SubClass.ONE,payload:n.group[0]},{name:l.numberedList,value:r.list.SubClass.TWO,payload:n.group[1]},{name:l.checkList,value:r.list.SubClass.ONE,payload:o.group[0]},{name:l.checkList,value:r.list.SubClass.TWO,payload:o.group[1]},{name:l.toggleList,value:r.list.SubClass.ONE,payload:i.group[0]},{name:l.toggleList,value:r.list.SubClass.TWO,payload:i.group[1]}]}function rQ(){return{1:"深色",2:"蓝灰",3:"棕色",4:"红色",5:"橙色",6:"黄色",7:"绿色",8:"蓝色",9:"靛蓝",10:"紫色"}}function lQ(){const{colors:e}=Zv,t=wi(e),n={1:"深色",2:"蓝灰",3:"棕色",4:"红色",5:"橙色",6:"黄色",7:"绿色",8:"蓝色",9:"靛蓝",10:"紫色"};return t.map(((e,t)=>{let o=Js(e);return 1===t||2===t?o=e[2]:3===t?o=e[3]:(6===t||8===t)&&(o=e[2]),{text:n[t+1],value:o,payload:e}}))}function sQ(){return[{value:9,text:"小五"},{value:10.5,text:"五号"},{value:12,text:"小四"},{value:14,text:"四号"},{value:16,text:"三号"},{value:18,text:"小二"},{value:24,text:"小一"},{value:36,text:"小初"},{value:42,text:"初号"},{value:54,text:"特号"}]}function cQ(){return[{text:"默认字体",value:"auto"},{text:"雅黑",value:"Microsoft YaHei, 微软雅黑, 雅黑"},{text:"仿宋",value:"FangSong"},{text:"宋体",value:"SimSun"},{text:"楷体",value:"Kai, Kaiti"},{text:"黑体",value:"Hei"}]}function aQ(){return[{text:"默认间距",value:"normal"},{text:"加宽1",value:1},{text:"加宽2",value:2},{text:"加宽4",value:4},{text:"加宽6",value:6},{text:"加宽8",value:8},{text:"加宽16",value:16},{text:"加宽32",value:32},{text:"紧缩1",value:-1},{text:"紧缩2",value:-2}]}function uQ(){return[{text:"默认行距",value:1.7},{text:"1",value:1},{text:"1.15",value:1.15},{text:"1.3",value:1.3},{text:"1.5",value:1.5},{text:"2",value:2},{text:"2.5",value:2.5},{text:"3",value:3}]}function dQ(){const e=oQ();return[{name:e.sheetInsertTop,text:"向上插入行",value:1,more:!0},{name:e.sheetInsertBottom,text:"向下插入行",value:1,more:!0},{name:e.sheetInsertLeft,text:"向左插入列",value:1,more:!0},{name:e.sheetInsertRight,text:"向右插入列",value:1,more:!0},{name:e.sheetDeleteRow,text:"删除所在行"},{name:e.sheetDeleteColumn,text:"删除所在列"},{name:e.sheetDeleteAll,text:"删除此表格"}]}function fQ(){const e=oQ();return[{name:e.sheetCopy,text:"复制"},{name:e.sheetPaste,text:"粘贴"},{name:e.sheetCut,text:"剪切"},{name:e.sheetSelectAll,text:"全选"},{name:e.sheetSelectRow,text:"选中当前行"},{name:e.sheetSelectColumn,text:"选中当前列"}]}function hQ(e){var t;const{colors:n}=Zv,o=wi(n),i={1:"深色",2:"蓝灰",3:"棕色",4:"红色",5:"橙色",6:"黄色",7:"绿色",8:"蓝色",9:"靛蓝",10:"紫色"};let r=-1;for(const t in i)if(i[t]===e.text){r=Number(t)-1;break}return-1===r?[]:null!==(t=o[r])&&void 0!==t?t:[]}function pQ(e){const t=oQ();return[1,2,4,6,8].map((n=>{let o=String(n);return e.name===t.sheetInsertTop?o=`向上插入 ${n} 行`:e.name===t.sheetInsertBottom?o=`向下插入 ${n} 行`:e.name===t.sheetInsertLeft?o=`向左插入 ${n} 列`:e.name===t.sheetInsertTop&&(o=`向右插入 ${n} 列`),{text:o,value:n}}))}function vQ(e,n,o){var i,r;const l=oQ();if(!n)return!1;const{outline:s}=t;if(e===l.bold){const e=n.fontWeight;if("bolder"===e||"bold"===e)return!0;if(!isNaN(Number(e)))return Number(e)>=700}else{if(e===l.italic)return"italic"===n.fontStyle;if(e===l.strikeUnderline)return(null!==(i=null==n?void 0:n.textDecorationLine)&&void 0!==i?i:"").indexOf("underline")>=0;if(e===l.strikeThrough)return(null!==(r=null==n?void 0:n.textDecorationLine)&&void 0!==r?r:"").indexOf("line-through")>=0;if(e===l.alignCenter)return"center"===n.textAlign;if(e===l.alignLeft)return"left"===n.textAlign;if(e===l.alignRight)return"right"===n.textAlign;if(e===l.alignJustify)return"justify"===n.textAlign;if(e===l.text){if(void 0===(null==o?void 0:o[s.name]))return!0}else if(e===l.title){if((null==o?void 0:o[s.name])===s.SubClass.H)return!0}else if(e===l.h1){if((null==o?void 0:o[s.name])===s.SubClass.H1)return!0}else if(e===l.h2){if((null==o?void 0:o[s.name])===s.SubClass.H2)return!0}else if(e===l.h3){if((null==o?void 0:o[s.name])===s.SubClass.H3)return!0}else if(e===l.h4){if((null==o?void 0:o[s.name])===s.SubClass.H4)return!0}else if(e===l.h5){if((null==o?void 0:o[s.name])===s.SubClass.H5)return!0}else if(e===l.h6&&(null==o?void 0:o[s.name])===s.SubClass.H6)return!0}return!1}function gQ(e,t){return{type:kJ.TOOLS_POST_UPPER,payload:{lang:e.lang,name:t.name,visible:!t.active,transition:{enter:{transform:"translateY(0)"},leave:{transform:`translateY(calc(100% + ${tG}px))`}}}}}function mQ(e,t,n,o){const i=xJ(FT.editor);i&&(UH({type:kJ.TOOLS_EDITOR_ACTION,payload:n},i),yQ(t)||(UH({type:kJ.TOOLS_SHOW_KEYBOARD},i),UH({type:kJ.TOOLS_HIDE_UPPER},i),o(FJ(),HJ(),_J({active:!1}))))}function yQ(e){if(e.selectionStatus){const{selection:t,sheet:n}=e.selectionStatus;if(null==n?void 0:n.indicatorRange){const{rowStartIndex:e,rowEndIndex:t,columnStartIndex:o,columnEndIndex:i}=n.indicatorRange;if(t>e+1&&i>o+1)return!0}if(!tQ(t))return!0}return!1}function bQ(e="haptic.clock.timer"){t_({type:"preset",effectId:e,count:1},{usage:"touch"},(t=>{t_({type:"preset",effectId:e,count:1},{usage:"notification"})}))}const CQ=Vs(bQ,20);function wQ(){KH({title:"开发中",message:"移动端正在开发  敬请期待\n桌面端已经上线  欢迎使用",width:320,confirm:{value:"确认",fontColor:yf}})}const{getBranchByPath:xQ}=xT;function SQ(e){var t;return(null===(t=e.children)||void 0===t?void 0:t[0])?{...e,children:[null]}:e}function EQ(e,n){var o;const{getPageableBranch:i}=t,{tree:r}=e;let{branch:l,pageId:s}=n;if(!l.path)return null;l=xQ(r,l.path);const{type:c,path:a}=l;if("page"===c){const e=xQ(r,ec(a));s=null!==(o=null==e?void 0:e.id)&&void 0!==o?o:null}else{s=i(r,l).id}return{...n,branch:l,pageId:s}}function kQ(e,t){const{origin:n,target:o,originPageId:i,targetPageId:r}=t,l=EQ(e,{branch:n,pageId:i}),s=EQ(e,{branch:o,pageId:r});return l&&s?{target:s.branch,origin:l.branch,targetPageId:s.pageId,originPageId:l.pageId}:null}function DQ(e,t){const n=new KeyboardEvent(e,{bubbles:!0,cancelable:!0,view:window,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:t});window.dispatchEvent(n)}function IQ(e){var n;const{getLocalRecentlyReview:o,setLocalRecentlyReview:i}=t,r=null!==(n=o())&&void 0!==n?n:[],l=r.indexOf(e);-1!==l&&r.splice(l,1),r.unshift(e),i(r.slice(0,10))}const NQ=e=>t=>(t.active=e,t),LQ=e=>t=>(t.visible=e,t),BQ=()=>e=>(delete e.visible,e),TQ={help:Mf?"⌘+⌥+?":"Ctrl+Alt+?",plan:Mf?"⌘+⌥+P":"Ctrl+Alt+P"};Hs(eh)(TQ.help),Hs(eh)(TQ.plan);const AQ=Pf?40:38;const MQ={position:"absolute",left:-20,right:-20,top:-15,bottom:-10,display:"flex",justifyContent:"center",alignItems:"center"};var OQ=Object.freeze({__proto__:null,NAV_SIZE:AQ,i18n:gJ,keys:vJ,removeNavActive:()=>e=>(delete e.active,e),removeNavVisible:BQ,setNavActive:NQ,setNavVisible:LQ});function RQ(e){const[t,n]=Od((()=>({size:AQ,active:"note"})));j(e.ref,(()=>({dispatch:n})));const o=NM(),i=[[PQ(e,t,vJ.note,(e=>G(QM,{...e,width:o?13.5:11.5})))],[PQ(e,t,vJ.setting,(e=>o?G("span",{style:MQ,children:G(nO,{...e,width:16.5})}):G(nO,{...e,width:14.5})))]],r=e=>{const t=NM();wi(e).forEach((e=>{if(e.active&&n(NQ(e.id)),e.active&&e.id===vJ.setting&&t){const e=document.documentElement.clientWidth;jH("push",{route:FT.setting,effect:{slide:"left",modal:!0,gesture:!0},alive:!0,aliveId:FT.setting,style:{width:Math.min(400,e-80),backgroundColor:yf,statusBarContentColor:"#FFFFFF"}})}else e.visible?n(BQ()):e.active&&n(LQ(e.id))}))},l=()=>{n(BQ())},s={width:t.size,zIndex:1e4};if(Uf){const e=_H();s.paddingTop=6,s.paddingBottom=6,e>15&&(s.paddingBottom=e-9)}return W((()=>G(Hk,{onClick:l,style:s,value:i,onChange:r})),[t.active,t.visible])}function PQ(e,t,n,o){const i=t.active===n,r=gJ[e.lang][n],l=i?"#fff":If,s={id:n,active:i,visible:t.visible===n,tips:r,icon:G(o,{fill:l})};return n===vJ.setting&&(s.options=function(e){const t=[{name:gJ[e.lang][vJ.help],value:vJ.help,icon:G(uO,{}),hotkey:TQ.help,action:e.onAction},{name:gJ[e.lang][vJ.cloud],value:vJ.cloud,icon:G(dO,{}),children:[{name:gJ[e.lang][vJ.webdav],value:vJ.webdav,icon:G(hO,{}),action:e.onAction}]},{name:gJ[e.lang][vJ.about],value:vJ.about,icon:G(pO,{}),children:[{name:gJ[e.lang][vJ.home],value:vJ.home,icon:G(kO,{}),action:e.onAction},{name:gJ[e.lang][vJ.pricing],value:vJ.pricing,icon:G(IO,{}),action:e.onAction},{name:gJ[e.lang][vJ.plan],value:vJ.plan,icon:G(yO,{}),action:e.onAction},{name:gJ[e.lang][vJ.feedback],value:vJ.feedback,icon:G(mO,{}),action:e.onAction},{name:gJ[e.lang][vJ.changelog],value:vJ.changelog,icon:G(gO,{}),action:e.onAction},{name:gJ[e.lang][vJ.update],value:vJ.update,icon:G(vO,{}),action:e.onAction}]}];Pf||"undefined"!=typeof electron||t.push({name:gJ[e.lang][vJ.download],value:vJ.download,icon:G(bO,{}),action:e.onAction});return t}(e)),s}function FQ(e){const{i18n:t,keys:n}=OQ,o={fill:kf,style:{position:"relative",top:-.5}};return[[{name:`${t[e.lang][n.webdav]}`,value:n.webdav,icon:G(hO,{...o,width:14.5}),rightIconType:"arrow"}],[{name:t[e.lang][n.help],value:n.help,icon:G(uO,{...o,width:16}),rightIconType:"arrow"},{name:t[e.lang][n.about],value:n.about,icon:G(pO,{...o,width:16}),rightIconType:"arrow"}]]}function HQ(e){const t=oQ();return[{name:t.add,active:!1,outer:e=>G(FO,{width:18,fill:kf}),inner:!0},{name:t.sheet,active:!1,upper:!0,outer:e=>G(bR,{width:17.5,fill:kf,style:{position:"relative",top:-.2}})},{name:t.outline,active:!1,upper:!0,outer:e=>G(WO,{width:17.5,fill:kf})},{name:t.font,active:!1,upper:!0,outer:e=>G(jO,{width:16.8,fill:kf})},{name:t.align,active:!1,upper:!0,outer:e=>G(aR,{width:16.5,fill:kf})},{name:t.list,active:!1,inner:!0,outer:e=>G(UO,{width:15,fill:kf})},{name:t.image,active:!1,inner:!0,outer:e=>G(DO,{width:18,fill:kf})},{name:t.undo,active:!1,outer:e=>G(qO,{width:19,fill:kf})},{name:t.redo,active:!1,outer:e=>G(YO,{width:19,fill:kf})},{name:t.clearFormat,active:!1,outer:e=>G(GO,{width:16,fill:kf,style:{position:"relative",top:-.5}})}]}function _Q(e){const t=oQ();function n(e){return X("div",{style:WX,children:[G(tR,{style:{position:"relative",right:2},width:10.5,fill:kf}),G("div",{style:zX,children:e.number})]})}return t.outline===e?[{name:t.text,active:!1,outer:e=>G(eR,{width:12.5,fill:kf})},{name:t.title,active:!1,outer:e=>G(tR,{width:10.5,fill:kf})},{name:t.h1,active:!1,outer:e=>G(n,{...e,number:1})},{name:t.h2,active:!1,outer:e=>G(n,{...e,number:2})},{name:t.h3,active:!1,outer:e=>G(n,{...e,number:3})},{name:t.h4,active:!1,outer:e=>G(n,{...e,number:4})},{name:t.h5,active:!1,outer:e=>G(n,{...e,number:5})},{name:t.h6,active:!1,outer:e=>G(n,{...e,number:6})}]:t.font===e?[{name:t.bold,active:!1,outer:e=>G(nR,{width:15,fill:kf})},{name:t.italic,active:!1,outer:e=>G(oR,{width:15,fill:kf})},{name:t.strikeUnderline,active:!1,outer:e=>G(rR,{width:16,fill:kf,style:{position:"relative",top:.5}})},{name:t.strikeThrough,active:!1,outer:e=>G(iR,{width:15,fill:kf})},{name:t.textColor,active:!1,inner:!0,outer:e=>X("div",{style:VX,children:[G(lR,{width:14,fill:kf,style:{position:"relative",bottom:1}}),G(Mh,{style:{...$X,marginLeft:-.3,backgroundColor:String(e.value)}})]})},{name:t.highlightColour,active:!1,inner:!0,outer:e=>X("div",{style:VX,children:[G(cR,{width:16,fill:kf,style:{position:"relative",bottom:.5}}),G(Mh,{style:{...$X,backgroundColor:String(e.value)}})]})},{name:t.fontSize,active:!1,inner:!0,outer:e=>G(zO,{width:14.5,fill:kf})},{name:t.letterSpacing,active:!1,inner:!0,outer:e=>G($O,{width:16.5,fill:kf})}]:t.align===e?[{name:t.firstLineIndent,active:!1,outer:e=>G(gR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.increaseIndent,active:!1,outer:e=>G(mR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.decreaseIndent,active:!1,outer:e=>G(yR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.alignLeft,value:"left",active:!1,outer:e=>G(aR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.alignCenter,value:"center",active:!1,outer:e=>G(dR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.alignRight,active:!1,value:"right",outer:e=>G(uR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.alignJustify,active:!1,value:"justify",outer:e=>G(fR,{width:16.5,fill:kf,style:{position:"relative",top:.5}})},{name:t.lineHeight,active:!1,inner:!0,outer:e=>G(VO,{width:16.5,fill:kf})}]:t.sheet===e?[{name:t.merge,active:!1,outer:()=>G(PR,{width:16.5,fill:kf})},{name:t.sheetInsert,active:!1,inner:!0,outer:()=>G(FR,{width:16.9,fill:kf})},{name:t.fillColor,active:!1,inner:!0,outer:e=>X("div",{style:VX,children:[G(sR,{width:16.5,fill:kf,style:{position:"relative",bottom:1}}),G(Mh,{style:{...$X,marginLeft:-.3,backgroundColor:String(e.value)}})]})},{name:t.borderOutline,active:!1,inner:!0,outer:()=>G(NR,{width:16.5,fill:kf})},{name:t.verticalTop,active:!1,outer:()=>G(hR,{width:16.5,fill:kf})},{name:t.verticalMiddle,active:!1,outer:()=>G(pR,{width:16.5,fill:kf})},{name:t.verticalBottom,active:!1,outer:()=>G(vR,{width:16.5,fill:kf})},{name:t.sheetMore,active:!1,inner:!0,outer:()=>G(CR,{width:17,fill:kf,style:{position:"relative",top:-.5}})}]:[]}function jQ(e){const t=FH(),n=LM();return{client:{width:n.clientWidth,height:n.clientHeight-(t+GK)}}}var WQ={exports:{}};WQ.exports=function(){var e=1e3,t=6e4,n=36e5,o="millisecond",i="second",r="minute",l="hour",s="day",c="week",a="month",u="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var o=String(e);return!o||o.length>=t?e:""+Array(t+1-o.length).join(n)+e},y={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),o=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(o,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var o=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(o,a),r=n-i<0,l=t.clone().add(o+(r?-1:1),a);return+(-(o+(n-i)/(r?i-l:l-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:a,y:d,w:c,d:s,D:f,h:l,m:r,s:i,ms:o,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",C={};C[b]=g;var w="$isDayjsObject",x=function(e){return e instanceof D||!(!e||!e[w])},S=function e(t,n,o){var i;if(!t)return b;if("string"==typeof t){var r=t.toLowerCase();C[r]&&(i=r),n&&(C[r]=n,i=r);var l=t.split("-");if(!i&&l.length>1)return e(l[0])}else{var s=t.name;C[s]=t,i=s}return!o&&i&&(b=i),i||!o&&b},E=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new D(n)},k=y;k.l=S,k.i=x,k.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var D=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var m=g.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var o=t.match(p);if(o){var i=o[2]-1||0,r=(o[7]||"0").substring(0,3);return n?new Date(Date.UTC(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,r)):new Date(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,r)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return k},m.isValid=function(){return!(this.$d.toString()===h)},m.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return E(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<E(e)},m.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,o=!!k.u(t)||t,u=k.p(e),h=function(e,t){var i=k.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return o?i:i.endOf(s)},p=function(e,t){return k.w(n.toDate()[e].apply(n.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return o?h(1,0):h(31,11);case a:return o?h(1,g):h(0,g+1);case c:var b=this.$locale().weekStart||0,C=(v<b?v+7:v)-b;return h(o?m-C:m+(6-C),g);case s:case f:return p(y+"Hours",0);case l:return p(y+"Minutes",1);case r:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,c=k.p(e),u="set"+(this.$u?"UTC":""),h=(n={},n[s]=u+"Date",n[f]=u+"Date",n[a]=u+"Month",n[d]=u+"FullYear",n[l]=u+"Hours",n[r]=u+"Minutes",n[i]=u+"Seconds",n[o]=u+"Milliseconds",n)[c],p=c===s?this.$D+(t-this.$W):t;if(c===a||c===d){var v=this.clone().set(f,1);v.$d[h](p),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[k.p(e)]()},m.add=function(o,u){var f,h=this;o=Number(o);var p=k.p(u),v=function(e){var t=E(h);return k.w(t.date(t.date()+Math.round(e*o)),h)};if(p===a)return this.set(a,this.$M+o);if(p===d)return this.set(d,this.$y+o);if(p===s)return v(1);if(p===c)return v(7);var g=(f={},f[r]=t,f[l]=n,f[i]=e,f)[p]||1,m=this.$d.getTime()+o*g;return k.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var o=e||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),r=this.$H,l=this.$m,s=this.$M,c=n.weekdays,a=n.months,u=n.meridiem,d=function(e,n,i,r){return e&&(e[n]||e(t,o))||i[n].slice(0,r)},f=function(e){return k.s(r%12||12,e,"0")},p=u||function(e,t,n){var o=e<12?"AM":"PM";return n?o.toLowerCase():o};return o.replace(v,(function(e,o){return o||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return k.s(t.$y,4,"0");case"M":return s+1;case"MM":return k.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,a,3);case"MMMM":return d(a,s);case"D":return t.$D;case"DD":return k.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,c,2);case"ddd":return d(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(r);case"HH":return k.s(r,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(r,l,!0);case"A":return p(r,l,!1);case"m":return String(l);case"mm":return k.s(l,2,"0");case"s":return String(t.$s);case"ss":return k.s(t.$s,2,"0");case"SSS":return k.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(o,f,h){var p,v=this,g=k.p(f),m=E(o),y=(m.utcOffset()-this.utcOffset())*t,b=this-m,C=function(){return k.m(v,m)};switch(g){case d:p=C()/12;break;case a:p=C();break;case u:p=C()/3;break;case c:p=(b-y)/6048e5;break;case s:p=(b-y)/864e5;break;case l:p=b/n;break;case r:p=b/t;break;case i:p=b/e;break;default:p=b}return h?p:k.a(p)},m.daysInMonth=function(){return this.endOf(a).$D},m.$locale=function(){return C[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),o=S(e,t,!0);return o&&(n.$L=o),n},m.clone=function(){return k.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),I=D.prototype;return E.prototype=I,[["$ms",o],["$s",i],["$m",r],["$H",l],["$W",s],["$M",a],["$y",d],["$D",f]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,D,E),e.$i=!0),E},E.locale=S,E.isDayjs=x,E.unix=function(e){return E(1e3*e)},E.en=C[b],E.Ls=C,E.p={},E}();var zQ=_T(WQ.exports);function VQ(e){const{initState:n,readEditor:o,useWorker:i}=t,[r,l]=Od((()=>n(e))),[s,c]=$(),a=i(e,r,l);F((()=>{(async()=>{const t=await o(e.pageId,a,!0);c(t)})()}),[e.pageId,o,a]);const u="function"==typeof zQ?zQ:zQ.default;let d=(null==s?void 0:s.createTime)&&u(s.createTime).format("YYYY/MM/DD");d||(d=(null==s?void 0:s.updateTime)&&u(s.updateTime).format("YYYY/MM/DD"));const f=(null==s?void 0:s.updateTime)&&u(s.updateTime).format("MM月DD日 HH:mm");return G("div",{style:SX,children:X("div",{style:EX,children:[X("div",{style:kX,children:[G("span",{children:"创建日期"}),G("span",d?{children:d}:{style:DX,children:G(NO,{})})]}),X("div",{style:kX,children:[G("span",{children:"最近编辑"}),G("span",f?{children:f}:{style:DX,children:G(NO,{})})]})]})})}function $Q(e){const t=Dd(e),n=Z(null),o=Z(0),i=Z(!1),r=Nd("touchstart"),l=Nd("touchmove"),s=Nd("touchend"),c=Nd("touchcancel");F((()=>{const e=e=>{var o,r;const l=zH();if(!l)return;const s=t.current.route;e&&!i.current?(i.current=!0,null===(o=n.current)||void 0===o||o.style.setProperty("overflow","hidden"),jH("update",{uid:l,route:s,effect:{slide:"bottom",modal:!0,gesture:!0}})):!e&&i.current&&(i.current=!1,null===(r=n.current)||void 0===r||r.style.setProperty("overflow","scroll"),jH("update",{uid:l,route:s,effect:{slide:"bottom",modal:!0}}))},a=r.subscribe((t=>{t.stopPropagation(),e(!1),o.current=t.touches[0].clientY})),u=l.subscribe((t=>{var r,l,s;if(t.stopPropagation(),i.current)return;const c=null===(r=n.current)||void 0===r?void 0:r.scrollTop,a=null===(l=n.current)||void 0===l?void 0:l.clientHeight,u=null===(s=n.current)||void 0===s?void 0:s.scrollHeight,d=t.touches[0].clientY;a===u?e(!0):Math.ceil(c+a)>=u?o.current>d&&e(!0):c<=0&&o.current<d&&e(!0),o.current=t.touches[0].clientY})),d=s.subscribe((t=>{t.stopPropagation(),e(!1)})),f=c.subscribe((t=>{t.stopPropagation(),e(!1)}));return()=>{a.unsubscribe(),u.unsubscribe(),d.unsubscribe(),f.unsubscribe()}}),[t,r,l,s,c]);const a={...AX,...e.style},u=Bd(Ld([r,l,s,c]),e);return G("div",{...e,ref:t=>{n.current=t,"function"==typeof e.ref?e.ref(t):e.ref&&(e.ref.current=t)},style:a,...u,children:e.children})}const{getBranchByPath:ZQ}=xT;function UQ(e,n,o,i,r,l,s,c,a,u,d){const f=Dd(e),h=Dd(n),p=Dd(i),v=Z(null),g=Nd("click");F((()=>{const{sheet:e,align:n,bold:i,italic:l,strikeThrough:m,strikeUnderline:y,textColor:b,highlightColour:C,fontSize:w,letterSpacing:x,decreaseIndent:S,increaseIndent:E,lineHeight:k,quote:D,separator:I,clearFormat:N,undo:L,redo:B,image:T,outline:A,bulleted:M,check:O,numbered:R,toggle:P,common:F,setGFocus:H,setEditorPastePending:_,createEditorFocus:j,isSheetFocusInclude:W,clearEditorCollapsedSelection:z,clearProviderCollapsedSelection:V}=t,{isCollapsed:$}=ek;let Z=-1;const U=()=>{var e,t;const{clientHeight:n}=document.documentElement,{scrollTop:o}=h.current.editor,{keyboardHeight:i=0}=p.current,r=n-i;if(Z+eG/2>r){const n=Z-r+eG+3*tG;null===(t=(e=c.current).scrollTo)||void 0===t||t.call(e,{top:o+n,behavior:"smooth"})}Z=-1},q=e=>{var t,n,o,i,l;const s=zH();if(s!==xJ(FT.editor))return;const c=null===(t=WH())||void 0===t?void 0:t.reverse();if(!c)return;let a=0;if((null===(n=c[0])||void 0===n?void 0:n.route)===FT.editor&&(a=1),(null===(o=c[0])||void 0===o?void 0:o.route)===FT.tools&&(null===(i=c[1])||void 0===i?void 0:i.route)===FT.editor&&(a=2),!(e<=0||0===a)){if(r(IJ(e)),1===a){const t=null===(l=f.current.page)||void 0===l?void 0:l.id,n=h.current.gfocus;jH("push",{route:FT.tools,effect:{slide:"bottom",modal:!0,musk:!1,gesture:!1,blur:10},style:{height:e+eG},payload:{pageId:t,gfocus:n,uid:s,height:e+eG}})}requestAnimationFrame(U)}},Y=()=>{var e,t,n,o,i;const{imperator:r,rootstate:l,context:c}=s.provider(),a=null===(e=r.current)||void 0===e?void 0:e.selection();if(!a)return;const u=document.documentElement.clientHeight,f=p.current.keyboardHeight;if(!f)return;if(!d.current)return;const h=a.getBoundingClientRect(),v=u-f-eG-2*tG;let g=h.bottom-v;if(g>0){const e=l.editor.scrollTop;return void(null===(n=null===(t=r.current)||void 0===t?void 0:t.scrollTo)||void 0===n||n.call(t,{top:e+g,behavior:"smooth"}))}if(h.height>v)return;const m=d.current.getBoundingClientRect();if(g=h.top-m.top,g<0){const e=l.editor.scrollTop,t=c.editor.selection;t&&!$(t)&&(g-=50),null===(i=null===(o=r.current)||void 0===o?void 0:o.scrollTo)||void 0===i||i.call(o,{top:Math.max(0,e+g),behavior:"smooth"})}},K=t=>{if(t.type===kJ.TOOLS_HIDE_KEYBOARD)QH();else if(t.type===kJ.TOOLS_SHOW_KEYBOARD)e_();else if(t.type===kJ.TOOLS_CLEAR_SELECTION)(()=>{const{gfocus:t,editor:n}=h.current;if(n.isPastePending)return void o(_(!1));const i=[V(),H(j())];t&&W(t)&&i.push(e.setEditorActions(t,[z()])),i.push(z()),o(...i)})();else if(t.type===kJ.TOOLS_POST_INNER);else if(t.type===kJ.TOOLS_POST_UPPER){const e=t.payload,{keyboardHeight:n=0}=p.current,o={...e,layout:{bottom:n+tG}};r(DJ(o))}else if(t.type===kJ.TOOLS_BEFORE_DESTROY){const e=t.payload,n={...p.current.tool,visible:!1,transition:e};r(DJ(n),IJ(0))}else if(t.type===kJ.TOOLS_HIDE_UPPER){const e={...p.current.tool,visible:!1};r(DJ(e))}else if(t.type===kJ.TOOLS_EDITOR_ACTION){const e=t.payload;ee(e)}},G=e=>{var t,n,o,i;if(EJ())return;const{imperator:r}=s.provider(),l=null===(t=r.current)||void 0===t?void 0:t.input;l&&(" "===e?DQ("keydown"," "):null===(n=l.onText)||void 0===n||n.call(l,e),setTimeout(Y),null===(i=null===(o=r.current)||void 0===o?void 0:o.clearVisibleState)||void 0===i||i.call(o))},X=e=>{var t,n;if(EJ())return;const{imperator:o}=s.provider();DQ("keydown","Backspace"),setTimeout(Y),null===(n=null===(t=o.current)||void 0===t?void 0:t.clearVisibleState)||void 0===n||n.call(t)},J=e=>{var t,n;if(EJ())return;const{imperator:o}=s.provider();DQ("keydown","Delete"),setTimeout(Y),null===(n=null===(t=o.current)||void 0===t?void 0:t.clearVisibleState)||void 0===n||n.call(t)},Q=e=>{var t;if(EJ())return;const{imperator:n}=s.provider();if(8===e.enterKeyType){DQ("keydown","enter"),setTimeout(Y);const e=null===(t=n.current)||void 0===t?void 0:t.clearVisibleState;if(!e)return;e()}},ee=t=>{var o;const r=oQ();if(t.name===r.bold)i.setStyle(s,t.active),setTimeout(Y);else if(t.name===r.italic)l.setStyle(s,t.active),setTimeout(Y);else if(t.name===r.strikeUnderline)y.setProps(s,t.active),setTimeout(Y);else if(t.name===r.strikeThrough)m.setProps(s,t.active),setTimeout(Y);else if(t.name===r.textColor)b.setStyle(s,t.value);else if(t.name===r.highlightColour)C.setStyle(s,t.value);else if(t.name===r.fontSize)w.setStyle(s,t.value);else if(t.name===r.letterSpacing)x.setStyle(s,t.value);else if(t.name===r.firstLineIndent)DQ("keydown","Tab");else if(t.name===r.decreaseIndent)S.indent(s);else if(t.name===r.increaseIndent)E.indent(s);else if(t.name===r.alignLeft)n.setStyle(s,t.value);else if(t.name===r.alignCenter)n.setStyle(s,t.value);else if(t.name===r.alignRight)n.setStyle(s,t.value);else if(t.name===r.alignJustify)n.setStyle(s,t.value);else if(t.name===r.lineHeight)k.setStyle(s,t.value);else if(t.name===r.quote)D.setQuote(s);else if(t.name===r.separator)I.separate(s);else if(t.name===r.clearFormat)N.clear(s),bQ();else if(t.name===r.undo)L.todo(s),bQ();else if(t.name===r.redo)B.todo(s),bQ();else if(t.name===r.bulletedList)F.list.decorateClass(s,t.name,t.value,((...e)=>F.list.decorateSubClass(s,...e)));else if(t.name===r.numberedList)F.list.decorateClass(s,t.name,t.value,((...e)=>F.list.decorateSubClass(s,...e)));else if(t.name===r.checkList){F.list.decorateClass(s,t.name,t.value,((...e)=>F.list.decorateSubClass(s,...e)));const e=s.provider(),{context:n,imperator:i}=e;null===(o=i.current)||void 0===o||o.commit(O.decorateSelection(n))}else t.name===r.toggleList?P.decorateSubClass(s,t.value,"inner"):t.name===r.takePhoto?function(e){"undefined"!=typeof WebPro&&WebPro.camera(e)}((async e=>{for(const t of e)await T.setImage(s,t)})):t.name===r.selectPicture?function(e){"undefined"!=typeof WebPro&&WebPro.photo(e)}((async e=>{for(const t of e)await T.setImage(s,t)})):t.name===r.sheet?e.setSheet(s,2,2):t.name===r.fillColor?e.fillColor.setStyle(s,t.value):t.name===r.verticalTop?e.vertical.setStyle(s,"top"):t.name===r.verticalMiddle?e.vertical.setStyle(s,"middle"):t.name===r.verticalBottom?e.vertical.setStyle(s,"bottom"):t.name===r.borderAll||t.name===r.borderNone||t.name===r.borderOutline||t.name===r.borderInside||t.name===r.borderLeft||t.name===r.borderRight||t.name===r.borderTop||t.name===r.borderBottom?e.border.setBorder(s,{type:t.value}):t.name===r.borderHide?e.border.setBorder(s,{visible:!1}):t.name===r.borderShow?e.border.setBorder(s,{visible:!0}):t.name===r.borderColor?e.border.setBorder(s,{color:t.value}):t.name===r.merge?e.merge.setMerge(s):t.name===r.sheetInsertTop?e.insertTop(s,t.value):t.name===r.sheetInsertBottom?e.insertBottom(s,t.value):t.name===r.sheetInsertLeft?e.insertLeft(s,t.value):t.name===r.sheetInsertRight?e.insertRight(s,t.value):t.name===r.sheetSelectRow?e.selectRow(s):t.name===r.sheetSelectColumn?e.selectColumn(s):t.name===r.sheetDeleteRow?e.deleteRow(s):t.name===r.sheetDeleteColumn?e.deleteColumn(s):t.name===r.sheetCopy?e.copy(s):t.name===r.sheetCut?e.cut(s):t.name===r.sheetPaste?e.paste(s):t.name===r.sheetSelectAll?e.selectAll(s):t.name===r.sheetDeleteAll?e.deleteSheet(s):t.name===r.text?A.setOutline(s,A.SubClass.H0,{timer:v}):t.name===r.title?A.setOutline(s,A.SubClass.H,{timer:v}):t.name===r.h1?A.setOutline(s,A.SubClass.H1,{timer:v}):t.name===r.h2?A.setOutline(s,A.SubClass.H2,{timer:v}):t.name===r.h3?A.setOutline(s,A.SubClass.H3,{timer:v}):t.name===r.h4?A.setOutline(s,A.SubClass.H4,{timer:v}):t.name===r.h5?A.setOutline(s,A.SubClass.H5,{timer:v}):t.name===r.h6&&A.setOutline(s,A.SubClass.H6,{timer:v})},te=e=>{if(!a.current)return;e_(),Z=e.clientY;const t=xJ(FT.tools),n=xJ(FT.editor);UH({type:kJ.EDITOR_SHOW_KEYBOARD},t),UH({type:kJ.EDITOR_SHOW_KEYBOARD},n)};u.current.keyboard={onShowKeyboard:te};const ne=g.subscribe(te);return $H("message",K),$H("insertText",G),$H("deleteLeft",X),$H("deleteRight",J),$H("sendFunctionKey",Q),$H("keyboardHeightChange",q),()=>{ne.unsubscribe(),delete u.current.keyboard,ZH("message",K),ZH("insertText",G),ZH("deleteLeft",X),ZH("deleteRight",J),ZH("sendFunctionKey",Q),ZH("keyboardHeightChange",q)}}),[f,h,s,o,p,r,c,d,u,a,g]);const m=W((()=>Vs((()=>{var e,n;const{sheet:o,getNodeByFocus:i,dropRightFocus:r,isSheetFocusInclude:l}=t,{context:c}=s.provider(),{editor:{node:a,isScrolling:u}}=s.stater.get(),{editor:{selection:d,selectionStyle:f,selectionDecorate:h},focus:p}=c;if(u)return;const v={selection:d,style:f,decorate:h};if(l(p)){const t={},l=i(a,r(p));if(o.isSheetNode(l)){t.border=null===(e=l.props)||void 0===e?void 0:e.border;const i=null===(n=l.props)||void 0===n?void 0:n.value,r=o.exportSheetStyle(i);r&&(t.style=r),t.indicatorRange=i.indicatorRange}v.sheet=t}const g=xJ(FT.tools);g&&UH({type:kJ.EIDTOR_SELECTION_STATUS,payload:v},g)}),16,{leading:!0})),[s]);F(m),F((()=>{if(!n.gfocus)return;const{isSheetFocusInclude:e}=t;e(n.gfocus)?UH({type:kJ.EDITOR_FOCUS_SHEET}):UH({type:kJ.EDITOR_FOCUS})}),[n.gfocus]);return{editor:Ld([g]),menu:{onClick:i=>{var r,s;const{fetchBranch:u,getBranchByID:d,setStoreCatalog:f,replaceFileBranch:h,readonlyFileBranch:p}=t;if("readonly"===i)return void KH({title:"模式切换",message:"切换后页面可以编辑",width:320,cancel:{value:"取消",fontColor:kf},confirm:{value:"确认",fontColor:yf,action:async()=>{var t,i,r;const s=null===(t=n.file)||void 0===t?void 0:t.tree;if(!(null==s?void 0:s.length))return;let c=null;const v=null===(i=e.page)||void 0===i?void 0:i.path,g=null===(r=e.page)||void 0===r?void 0:r.id;if((null==v?void 0:v.length)?c=ZQ(s,v):g&&(c=d(s,g)),!c)return;const m=await u(c,l,{deep:!0});a.current=!0;const y=[h(m,c.path),p(c,!1),f(c,void 0,!0)];o(...y)}}});const{genetateMobileOptions:v,calcOptionsSize:g,clearEditorSelection:m,clearProviderSelection:y}=t,b=WH();if(!(null==b?void 0:b.length))return;null===(s=(r=c.current).clearVisibleState)||void 0===s||s.call(r),o(m(),y());const C=zH();for(let e=b.length-1;e>0&&b[e].uid!==C;e--)jH("pop");const{page:w}=e;if(!w)return;let x=g(v(e,w,!0,!!a.current))+36-12+_H(),S=!0;const E=document.documentElement.clientHeight;x+GK>E&&(x=E-GK,S=!1),jH("push",{route:FT.more,effect:{slide:"bottom",modal:!0,gesture:S,blur:!0},style:{height:x,borderRadius:{topLeft:16,topRight:16}},payload:{pageId:w.id,branch:SQ(w),editor:!0,editable:a.current,uid:C,height:x,scroller:!S}})}}}}const{isDecorateBlockNode:qQ}=ek;function YQ(e,t,n){var o;const i=Dd(e),r=Dd(t),l=Z(0);F((()=>{var e;let o=null;return(null===(e=t.inner)||void 0===e?void 0:e.active)||(o=setTimeout((()=>{n(_J({name:void 0}))}),500)),()=>{o&&clearTimeout(o)}}),[n,null===(o=t.inner)||void 0===o?void 0:o.active]),F((()=>{let e=!1,t=!1;const o=e=>{1!==l.current&&QH();const t=r.current.inner;(null==t?void 0:t.active)&&jH("pop")},s=n=>{l.current=n;const o=r.current.inner;if(!(null==o?void 0:o.active)&&!e)if(t)t=!1;else if(1===n){jH("pop",{uid:zH(),route:FT.tools})}},c=()=>{e=!0},a=()=>{e=!1;const t=r.current.inner;(null==t?void 0:t.active)||2===l.current||(e_(),setTimeout((()=>{e_()}),200))},u=()=>{var e;QH();const t=null!==(e=i.current.uid)&&void 0!==e?e:xJ(FT.editor);UH({type:kJ.TOOLS_CLEAR_SELECTION},t);const n=document.documentElement.clientHeight;UH({type:kJ.TOOLS_BEFORE_DESTROY,payload:[{transform:"translateY(0)",transition:"transform 333ms cubic-bezier(0.2, 0.0, 0.2, 1.0)"},{transform:`translateY(${n+eG+tG}px)`,transition:"transform 333ms cubic-bezier(0.2, 0.0, 0.2, 1.0)"}]},t)},d=e=>{var o,l;const s=i.current,c=r.current;if(e.type===kJ.EDITOR_SHOW_KEYBOARD)n(FJ(),_J({active:!1}));else if(e.type===kJ.SELECTOR_CLEAR_ACTIVITY)n(FJ(),_J({active:!1}),HJ());else if(e.type===kJ.TOOLS_POST_INNER){const o=e.payload;if(!o)return;o.active?(e_(),n(_J({active:!1,name:o.name}),FJ())):(t=!0,QH(),n(_J({active:!0,name:o.name}),FJ()))}else if(e.type===kJ.EIDTOR_SELECTION_STATUS){const t=e.payload;if(!t)return;n(OJ(t))}else if(e.type===kJ.EDITOR_FOCUS_SHEET)n(MJ("sheet"));else if(e.type===kJ.EDITOR_FOCUS){n(MJ("edit"));const e=oQ();if("sheet"===c.type){const t=null===(o=c.tools)||void 0===o?void 0:o.find((t=>t.name===e.sheet&&t.active));if(t){n(PJ(t,!1));const o=null!==(l=s.uid)&&void 0!==l?l:xJ(FT.editor);UH(gQ(s,{name:e.sheet,active:!0}),o)}}}},f=e=>{const t=WH();if(!(null==t?void 0:t.length))return;const n=t[t.length-1],o=zH();if(n.uid!==o)return;jH("update",{route:FT.tools,effect:{slide:"bottom",modal:!0,musk:!1,gesture:0===e,blur:10}})};return $H("message",d),$H("background",c),$H("foreground",a),$H("backPress",o),$H("beforeDestroy",u),$H("sendKeyboardStatus",s),$H("keyboardHeightChange",f),()=>{ZH("message",d),ZH("background",c),ZH("foreground",a),ZH("backPress",o),ZH("beforeDestroy",u),ZH("sendKeyboardStatus",s),ZH("keyboardHeightChange",f)}}),[i,r,n]);let s=null;return{onClickHeadTool:o=>{var l;const c=oQ();if(o.inner)return(e=>{var t;if(!WH())return;const n=null!==(t=i.current.uid)&&void 0!==t?t:xJ(FT.editor);let o;o=e?{type:kJ.TOOLS_HIDE_KEYBOARD}:{type:kJ.TOOLS_SHOW_KEYBOARD},UH(o,n)})(!o.active),n(_J({active:!o.active,name:o.name})),s&&clearTimeout(s),void(o.active?n(RJ(o,!o.active)):s=setTimeout((()=>{n(RJ(o,!o.active))}),150));if(o.upper){const t=null!==(l=e.uid)&&void 0!==l?l:xJ(FT.editor);UH(gQ(e,o),t);const{inner:i,tools:s}=r.current,c=!(null==s?void 0:s.some((e=>e.inner&&e.name===(null==i?void 0:i.name))));return c&&n(_J({active:!1})),n(PJ(o,!o.active)),void(o.active?e_():(null==i?void 0:i.active)&&!c||e_())}o.name!==c.paintFormat?mQ(0,t,{name:o.name,value:o.value},n):wQ()},onClickKeyboard:()=>{var t;const o=r.current.inner;if(null==o?void 0:o.active){e_(),n(FJ(),_J({active:!1}));const o=null!==(t=e.uid)&&void 0!==t?t:xJ(FT.editor);UH({type:kJ.TOOLS_SHOW_KEYBOARD},o)}else QH()}}}const{getBranchByPath:KQ}=xT;var GQ={exports:{}};!function(e){var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};function n(e,n,o){if(4!==n.length)throw new t.exception.invalid("invalid aes block size");var i=e.b[o],r=n[0]^i[0],l=n[o?3:1]^i[1],s=n[2]^i[2];n=n[o?1:3]^i[3];var c,a,u,d,f=i.length/4-2,h=4,p=[0,0,0,0];e=(c=e.s[o])[0];var v=c[1],g=c[2],m=c[3],y=c[4];for(d=0;d<f;d++)c=e[r>>>24]^v[l>>16&255]^g[s>>8&255]^m[255&n]^i[h],a=e[l>>>24]^v[s>>16&255]^g[n>>8&255]^m[255&r]^i[h+1],u=e[s>>>24]^v[n>>16&255]^g[r>>8&255]^m[255&l]^i[h+2],n=e[n>>>24]^v[r>>16&255]^g[l>>8&255]^m[255&s]^i[h+3],h+=4,r=c,l=a,s=u;for(d=0;4>d;d++)p[o?3&-d:d]=y[r>>>24]<<24^y[l>>16&255]<<16^y[s>>8&255]<<8^y[255&n]^i[h++],c=r,r=l,l=s,s=n,n=c;return p}function o(e,t){var n,o,i,r=e.F,l=e.b,s=r[0],c=r[1],a=r[2],u=r[3],d=r[4],f=r[5],h=r[6],p=r[7];for(n=0;64>n;n++)16>n?o=t[n]:(o=t[n+1&15],i=t[n+14&15],o=t[15&n]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+t[15&n]+t[n+9&15]|0),o=o+p+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(h^d&(f^h))+l[n],p=h,h=f,f=d,d=u+o|0,u=a,a=c,s=o+((c=s)&a^u&(c^a))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;r[0]=r[0]+s|0,r[1]=r[1]+c|0,r[2]=r[2]+a|0,r[3]=r[3]+u|0,r[4]=r[4]+d|0,r[5]=r[5]+f|0,r[6]=r[6]+h|0,r[7]=r[7]+p|0}function i(e,n){var o,i=t.random.K[e],r=[];for(o in i)i.hasOwnProperty(o)&&r.push(i[o]);for(o=0;o<r.length;o++)r[o](n)}function r(e,t){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?e.addEntropy(window.performance.now(),t,"loadtime"):e.addEntropy((new Date).valueOf(),t,"loadtime")}function l(e){e.b=s(e).concat(s(e)),e.L=new t.cipher.aes(e.b)}function s(e){for(var t=0;4>t&&(e.h[t]=e.h[t]+1|0,!e.h[t]);t++);return e.L.encrypt(e.h)}function c(e,t){return function(){t.apply(e,arguments)}}t.cipher.aes=function(e){this.s[0][0][0]||this.O();var n,o,i,r,l=this.s[0][4],s=this.s[1],c=1;if(4!==(n=e.length)&&6!==n&&8!==n)throw new t.exception.invalid("invalid aes key size");for(this.b=[i=e.slice(0),r=[]],e=n;e<4*n+28;e++)o=i[e-1],(0==e%n||8===n&&4==e%n)&&(o=l[o>>>24]<<24^l[o>>16&255]<<16^l[o>>8&255]<<8^l[255&o],0==e%n&&(o=o<<8^o>>>24^c<<24,c=c<<1^283*(c>>7))),i[e]=i[e-n]^o;for(n=0;e;n++,e--)o=i[3&n?e:e-4],r[n]=4>=e||4>n?o:s[0][l[o>>>24]]^s[1][l[o>>16&255]]^s[2][l[o>>8&255]]^s[3][l[255&o]]},t.cipher.aes.prototype={encrypt:function(e){return n(this,e,0)},decrypt:function(e){return n(this,e,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var e,t,n,o,i,r,l,s=this.s[0],c=this.s[1],a=s[4],u=c[4],d=[],f=[];for(e=0;256>e;e++)f[(d[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!a[t];t^=o||1,n=f[n]||1)for(r=(r=n^n<<1^n<<2^n<<3^n<<4)>>8^255&r^99,a[t]=r,u[r]=t,l=16843009*(i=d[e=d[o=d[t]]])^65537*e^257*o^16843008*t,i=257*d[r]^16843008*r,e=0;4>e;e++)s[e][t]=i=i<<24^i>>>8,c[e][r]=l=l<<24^l>>>8;for(e=0;5>e;e++)s[e]=s[e].slice(0),c[e]=c[e].slice(0)}},t.bitArray={bitSlice:function(e,n,o){return e=t.bitArray.$(e.slice(n/32),32-(31&n)).slice(1),void 0===o?e:t.bitArray.clamp(e,o-n)},extract:function(e,t,n){var o=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-o^e[t/32+1|0]>>>o:e[t/32|0]>>>o)&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n);var o=e[e.length-1],i=t.bitArray.getPartial(o);return 32===i?e.concat(n):t.bitArray.$(n,i,0|o,e.slice(0,e.length-1))},bitLength:function(e){var n=e.length;return 0===n?0:32*(n-1)+t.bitArray.getPartial(e[n-1])},clamp:function(e,n){if(32*e.length<n)return e;var o=(e=e.slice(0,Math.ceil(n/32))).length;return n&=31,0<o&&n&&(e[o-1]=t.bitArray.partial(n,e[o-1]&2147483648>>n-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1;var o,i=0;for(o=0;o<e.length;o++)i|=e[o]^n[o];return 0===i},$:function(e,n,o,i){var r;for(r=0,void 0===i&&(i=[]);32<=n;n-=32)i.push(o),o=0;if(0===n)return i.concat(e);for(r=0;r<e.length;r++)i.push(o|e[r]>>>n),o=e[r]<<32-n;return r=e.length?e[e.length-1]:0,e=t.bitArray.getPartial(r),i.push(t.bitArray.partial(n+e&31,32<n+e?o:i.pop(),1)),i},i:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},t.codec.utf8String={fromBits:function(e){var n,o,i="",r=t.bitArray.bitLength(e);for(n=0;n<r/8;n++)0==(3&n)&&(o=e[n/4]),i+=String.fromCharCode(o>>>8>>>8>>>8),o<<=8;return decodeURIComponent(escape(i))},toBits:function(e){e=unescape(encodeURIComponent(e));var n,o=[],i=0;for(n=0;n<e.length;n++)i=i<<8|e.charCodeAt(n),3==(3&n)&&(o.push(i),i=0);return 3&n&&o.push(t.bitArray.partial(8*(3&n),i)),o}},t.codec.hex={fromBits:function(e){var n,o="";for(n=0;n<e.length;n++)o+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return o.substr(0,t.bitArray.bitLength(e)/4)},toBits:function(e){var n,o,i=[];for(o=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",n=0;n<e.length;n+=8)i.push(0^parseInt(e.substr(n,8),16));return t.bitArray.clamp(i,4*o)}},t.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(e,n,o){var i=t.codec.base32.BASE,r=t.codec.base32.REMAINING,l="",s=0,c=t.codec.base32.B,a=0,u=t.bitArray.bitLength(e);for(o&&(c=t.codec.base32.X),o=0;l.length*i<u;)l+=c.charAt((a^e[o]>>>s)>>>r),s<i?(a=e[o]<<i-s,s+=r,o++):(a<<=i,s-=i);for(;7&l.length&&!n;)l+="=";return l},toBits:function(e,n){e=e.replace(/\s|=/g,"").toUpperCase();var o,i,r=t.codec.base32.BITS,l=t.codec.base32.BASE,s=t.codec.base32.REMAINING,c=[],a=0,u=t.codec.base32.B,d=0,f="base32";for(n&&(u=t.codec.base32.X,f="base32hex"),o=0;o<e.length;o++){if(0>(i=u.indexOf(e.charAt(o)))){if(!n)try{return t.codec.base32hex.toBits(e)}catch(e){}throw new t.exception.invalid("this isn't "+f+"!")}a>s?(a-=s,c.push(d^i>>>a),d=i<<r-a):d^=i<<r-(a+=l)}return 56&a&&c.push(t.bitArray.partial(56&a,d,1)),c}},t.codec.base32hex={fromBits:function(e,n){return t.codec.base32.fromBits(e,n,1)},toBits:function(e){return t.codec.base32.toBits(e,1)}},t.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,o){var i="",r=0,l=t.codec.base64.B,s=0,c=t.bitArray.bitLength(e);for(o&&(l=l.substr(0,62)+"-_"),o=0;6*i.length<c;)i+=l.charAt((s^e[o]>>>r)>>>26),6>r?(s=e[o]<<6-r,r+=26,o++):(s<<=6,r-=6);for(;3&i.length&&!n;)i+="=";return i},toBits:function(e,n){e=e.replace(/\s|=/g,"");var o,i,r=[],l=0,s=t.codec.base64.B,c=0;for(n&&(s=s.substr(0,62)+"-_"),o=0;o<e.length;o++){if(0>(i=s.indexOf(e.charAt(o))))throw new t.exception.invalid("this isn't base64!");26<l?(l-=26,r.push(c^i>>>l),c=i<<32-l):c^=i<<32-(l+=6)}return 56&l&&r.push(t.bitArray.partial(56&l,c,1)),r}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t.hash.sha256=function(e){this.b[0]||this.O(),e?(this.F=e.F.slice(0),this.A=e.A.slice(0),this.l=e.l):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:function(e){"string"==typeof e&&(e=t.codec.utf8String.toBits(e));var n,i=this.A=t.bitArray.concat(this.A,e);if(n=this.l,9007199254740991<(e=this.l=n+t.bitArray.bitLength(e)))throw new t.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!=typeof Uint32Array){var r=new Uint32Array(i),l=0;for(n=512+n-(512+n&511);n<=e;n+=512)o(this,r.subarray(16*l,16*(l+1))),l+=1;i.splice(0,16*l)}else for(n=512+n-(512+n&511);n<=e;n+=512)o(this,i.splice(0,16));return this},finalize:function(){var e,n=this.A,i=this.F;for(e=(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)])).length+2;15&e;e++)n.push(0);for(n.push(Math.floor(this.l/4294967296)),n.push(0|this.l);n.length;)o(this,n.splice(0,16));return this.reset(),i},Y:[],b:[],O:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}for(var t,n,o=0,i=2;64>o;i++){for(n=!0,t=2;t*t<=i;t++)if(0==i%t){n=!1;break}n&&(8>o&&(this.Y[o]=e(Math.pow(i,.5))),this.b[o]=e(Math.pow(i,1/3)),o++)}}},t.mode.ccm={name:"ccm",G:[],listenProgress:function(e){t.mode.ccm.G.push(e)},unListenProgress:function(e){-1<(e=t.mode.ccm.G.indexOf(e))&&t.mode.ccm.G.splice(e,1)},fa:function(e){var n,o=t.mode.ccm.G.slice();for(n=0;n<o.length;n+=1)o[n](e)},encrypt:function(e,n,o,i,r){var l,s=n.slice(0),c=t.bitArray,a=c.bitLength(o)/8,u=c.bitLength(s)/8;if(r=r||64,i=i||[],7>a)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(l=2;4>l&&u>>>8*l;l++);return l<15-a&&(l=15-a),o=c.clamp(o,8*(15-l)),n=t.mode.ccm.V(e,n,o,i,r,l),s=t.mode.ccm.C(e,s,o,n,r,l),c.concat(s.data,s.tag)},decrypt:function(e,n,o,i,r){r=r||64,i=i||[];var l=t.bitArray,s=l.bitLength(o)/8,c=l.bitLength(n),a=l.clamp(n,c-r),u=l.bitSlice(n,c-r);c=(c-r)/8;if(7>s)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(n=2;4>n&&c>>>8*n;n++);if(n<15-s&&(n=15-s),o=l.clamp(o,8*(15-n)),a=t.mode.ccm.C(e,a,o,u,r,n),e=t.mode.ccm.V(e,a.data,o,i,r,n),!l.equal(a.tag,e))throw new t.exception.corrupt("ccm: tag doesn't match");return a.data},na:function(e,n,o,i,r,l){var s=[],c=t.bitArray,a=c.i;if(i=[c.partial(8,(n.length?64:0)|i-2<<2|l-1)],(i=c.concat(i,o))[3]|=r,i=e.encrypt(i),n.length)for(65279>=(o=c.bitLength(n)/8)?s=[c.partial(16,o)]:4294967295>=o&&(s=c.concat([c.partial(16,65534)],[o])),s=c.concat(s,n),n=0;n<s.length;n+=4)i=e.encrypt(a(i,s.slice(n,n+4).concat([0,0,0])));return i},V:function(e,n,o,i,r,l){var s=t.bitArray,c=s.i;if((r/=8)%2||4>r||16<r)throw new t.exception.invalid("ccm: invalid tag length");if(4294967295<i.length||4294967295<n.length)throw new t.exception.bug("ccm: can't deal with 4GiB or more data");for(o=t.mode.ccm.na(e,i,o,r,s.bitLength(n)/8,l),i=0;i<n.length;i+=4)o=e.encrypt(c(o,n.slice(i,i+4).concat([0,0,0])));return s.clamp(o,8*r)},C:function(e,n,o,i,r,l){var s,c=t.bitArray;s=c.i;var a=n.length,u=c.bitLength(n),d=a/50,f=d;if(o=c.concat([c.partial(8,l-1)],o).concat([0,0,0]).slice(0,4),i=c.bitSlice(s(i,e.encrypt(o)),0,r),!a)return{tag:i,data:[]};for(s=0;s<a;s+=4)s>d&&(t.mode.ccm.fa(s/a),d+=f),o[3]++,r=e.encrypt(o),n[s]^=r[0],n[s+1]^=r[1],n[s+2]^=r[2],n[s+3]^=r[3];return{tag:i,data:c.clamp(n,u)}}},t.mode.ocb2={name:"ocb2",encrypt:function(e,n,o,i,r,l){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");var s,c=t.mode.ocb2.S,a=t.bitArray,u=a.i,d=[0,0,0,0];o=c(e.encrypt(o));var f,h=[];for(i=i||[],r=r||64,s=0;s+4<n.length;s+=4)d=u(d,f=n.slice(s,s+4)),h=h.concat(u(o,e.encrypt(u(o,f)))),o=c(o);return f=n.slice(s),n=a.bitLength(f),s=e.encrypt(u(o,[0,0,0,n])),f=a.clamp(u(f.concat([0,0,0]),s),n),d=u(d,u(f.concat([0,0,0]),s)),d=e.encrypt(u(d,u(o,c(o)))),i.length&&(d=u(d,l?i:t.mode.ocb2.pmac(e,i))),h.concat(a.concat(f,a.clamp(d,r)))},decrypt:function(e,n,o,i,r,l){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");r=r||64;var s,c,a=t.mode.ocb2.S,u=t.bitArray,d=u.i,f=[0,0,0,0],h=a(e.encrypt(o)),p=t.bitArray.bitLength(n)-r,v=[];for(i=i||[],o=0;o+4<p/32;o+=4)s=d(h,e.decrypt(d(h,n.slice(o,o+4)))),f=d(f,s),v=v.concat(s),h=a(h);if(c=p-32*o,s=e.encrypt(d(h,[0,0,0,c])),s=d(s,u.clamp(n.slice(o),c).concat([0,0,0])),f=d(f,s),f=e.encrypt(d(f,d(h,a(h)))),i.length&&(f=d(f,l?i:t.mode.ocb2.pmac(e,i))),!u.equal(u.clamp(f,r),u.bitSlice(n,p)))throw new t.exception.corrupt("ocb: tag doesn't match");return v.concat(u.clamp(s,c))},pmac:function(e,n){var o,i=t.mode.ocb2.S,r=t.bitArray,l=r.i,s=[0,0,0,0],c=l(c=e.encrypt([0,0,0,0]),i(i(c)));for(o=0;o+4<n.length;o+=4)c=i(c),s=l(s,e.encrypt(l(c,n.slice(o,o+4))));return o=n.slice(o),128>r.bitLength(o)&&(c=l(c,i(c)),o=r.concat(o,[-2147483648,0,0,0])),s=l(s,o),e.encrypt(l(i(l(c,i(c))),s))},S:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},t.mode.gcm={name:"gcm",encrypt:function(e,n,o,i,r){var l=n.slice(0);return n=t.bitArray,i=i||[],e=t.mode.gcm.C(!0,e,l,i,o,r||128),n.concat(e.data,e.tag)},decrypt:function(e,n,o,i,r){var l=n.slice(0),s=t.bitArray,c=s.bitLength(l);if(i=i||[],(r=r||128)<=c?(n=s.bitSlice(l,c-r),l=s.bitSlice(l,0,c-r)):(n=l,l=[]),e=t.mode.gcm.C(!1,e,l,i,o,r),!s.equal(e.tag,n))throw new t.exception.corrupt("gcm: tag doesn't match");return e.data},ka:function(e,n){var o,i,r,l,s,c=t.bitArray.i;for(r=[0,0,0,0],l=n.slice(0),o=0;128>o;o++){for((i=0!=(e[Math.floor(o/32)]&1<<31-o%32))&&(r=c(r,l)),s=0!=(1&l[3]),i=3;0<i;i--)l[i]=l[i]>>>1|(1&l[i-1])<<31;l[0]>>>=1,s&&(l[0]^=-520093696)}return r},j:function(e,n,o){var i,r=o.length;for(n=n.slice(0),i=0;i<r;i+=4)n[0]^=4294967295&o[i],n[1]^=4294967295&o[i+1],n[2]^=4294967295&o[i+2],n[3]^=4294967295&o[i+3],n=t.mode.gcm.ka(n,e);return n},C:function(e,n,o,i,r,l){var s,c,a,u,d,f,h,p,v=t.bitArray;for(f=o.length,h=v.bitLength(o),p=v.bitLength(i),c=v.bitLength(r),s=n.encrypt([0,0,0,0]),96===c?(r=r.slice(0),r=v.concat(r,[1])):(r=t.mode.gcm.j(s,[0,0,0,0],r),r=t.mode.gcm.j(s,r,[0,0,Math.floor(c/4294967296),4294967295&c])),c=t.mode.gcm.j(s,[0,0,0,0],i),d=r.slice(0),i=c.slice(0),e||(i=t.mode.gcm.j(s,c,o)),u=0;u<f;u+=4)d[3]++,a=n.encrypt(d),o[u]^=a[0],o[u+1]^=a[1],o[u+2]^=a[2],o[u+3]^=a[3];return o=v.clamp(o,h),e&&(i=t.mode.gcm.j(s,c,o)),e=[Math.floor(p/4294967296),4294967295&p,Math.floor(h/4294967296),4294967295&h],i=t.mode.gcm.j(s,i,e),a=n.encrypt(r),i[0]^=a[0],i[1]^=a[1],i[2]^=a[2],i[3]^=a[3],{tag:v.bitSlice(i,0,l),data:o}}},t.misc.hmac=function(e,n){this.W=n=n||t.hash.sha256;var o,i=[[],[]],r=n.prototype.blockSize/32;for(this.w=[new n,new n],e.length>r&&(e=n.hash(e)),o=0;o<r;o++)i[0][o]=909522486^e[o],i[1][o]=1549556828^e[o];this.w[0].update(i[0]),this.w[1].update(i[1]),this.R=new n(this.w[0])},t.misc.hmac.prototype.encrypt=t.misc.hmac.prototype.mac=function(e){if(this.aa)throw new t.exception.invalid("encrypt on already updated hmac called!");return this.update(e),this.digest(e)},t.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1},t.misc.hmac.prototype.update=function(e){this.aa=!0,this.R.update(e)},t.misc.hmac.prototype.digest=function(){var e=this.R.finalize();e=new this.W(this.w[1]).update(e).finalize();return this.reset(),e},t.misc.pbkdf2=function(e,n,o,i,r){if(o=o||1e4,0>i||0>o)throw new t.exception.invalid("invalid params to pbkdf2");"string"==typeof e&&(e=t.codec.utf8String.toBits(e)),"string"==typeof n&&(n=t.codec.utf8String.toBits(n)),e=new(r=r||t.misc.hmac)(e);var l,s,c,a,u=[],d=t.bitArray;for(a=1;32*u.length<(i||1);a++){for(r=l=e.encrypt(d.concat(n,[a])),s=1;s<o;s++)for(l=e.encrypt(l),c=0;c<l.length;c++)r[c]^=l[c];u=u.concat(r)}return i&&(u=d.clamp(u,i)),u},t.prng=function(e){this.c=[new t.hash.sha256],this.m=[0],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=e,this.D=!1,this.K={progress:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80},t.prng.prototype={randomWords:function(e,n){var o,i,r=[];if((o=this.isReady(n))===this.u)throw new t.exception.notReady("generator isn't seeded");if(o&this.J){o=!(o&this.I),i=[];var c,a=0;for(this.Z=i[0]=(new Date).valueOf()+this.da,c=0;16>c;c++)i.push(4294967296*Math.random()|0);for(c=0;c<this.c.length&&(i=i.concat(this.c[c].finalize()),a+=this.m[c],this.m[c]=0,o||!(this.P&1<<c));c++);for(this.P>=1<<this.c.length&&(this.c.push(new t.hash.sha256),this.m.push(0)),this.f-=a,a>this.o&&(this.o=a),this.P++,this.b=t.hash.sha256.hash(this.b.concat(i)),this.L=new t.cipher.aes(this.b),o=0;4>o&&(this.h[o]=this.h[o]+1|0,!this.h[o]);o++);}for(o=0;o<e;o+=4)0==(o+1)%this.ca&&l(this),i=s(this),r.push(i[0],i[1],i[2],i[3]);return l(this),r.slice(0,e)},setDefaultParanoia:function(e,n){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==n)throw new t.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=e},addEntropy:function(e,n,o){o=o||"user";var r,l,s=(new Date).valueOf(),c=this.H[o],a=this.isReady(),u=0;switch(void 0===(r=this.U[o])&&(r=this.U[o]=this.ha++),void 0===c&&(c=this.H[o]=0),this.H[o]=(this.H[o]+1)%this.c.length,typeof e){case"number":void 0===n&&(n=1),this.c[c].update([r,this.N++,1,n,s,1,0|e]);break;case"object":if("[object Uint32Array]"===(o=Object.prototype.toString.call(e))){for(l=[],o=0;o<e.length;o++)l.push(e[o]);e=l}else for("[object Array]"!==o&&(u=1),o=0;o<e.length&&!u;o++)"number"!=typeof e[o]&&(u=1);if(!u){if(void 0===n)for(o=n=0;o<e.length;o++)for(l=e[o];0<l;)n++,l>>>=1;this.c[c].update([r,this.N++,2,n,s,e.length].concat(e))}break;case"string":void 0===n&&(n=e.length),this.c[c].update([r,this.N++,3,n,s,e.length]),this.c[c].update(e);break;default:u=1}if(u)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[c]+=n,this.f+=n,a===this.u&&(this.isReady()!==this.u&&i("seeded",Math.max(this.o,this.f)),i("progress",this.getProgress()))},isReady:function(e){return e=this.T[void 0!==e?e:this.M],this.o&&this.o>=e?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=e?this.J|this.u:this.u},getProgress:function(e){return e=this.T[e||this.M],this.o>=e||this.f>e?1:this.f/e},startCollectors:function(){if(!this.D){if(this.a={loadTimeCollector:c(this,this.ma),mouseCollector:c(this,this.oa),keyboardCollector:c(this,this.la),accelerometerCollector:c(this,this.ea),touchCollector:c(this,this.qa)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else{if(!document.attachEvent)throw new t.exception.bug("can't attach event");document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)}this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(e,t){this.K[e][this.ga++]=t},removeEventListener:function(e,t){var n,o,i=this.K[e],r=[];for(o in i)i.hasOwnProperty(o)&&i[o]===t&&r.push(o);for(n=0;n<r.length;n++)delete i[o=r[n]]},la:function(){r(this,1)},oa:function(e){var t,n;try{t=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0}catch(e){n=t=0}0!=t&&0!=n&&this.addEntropy([t,n],2,"mouse"),r(this,0)},qa:function(e){e=e.touches[0]||e.changedTouches[0],this.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),r(this,0)},ma:function(){r(this,2)},ea:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"==typeof t&&this.addEntropy(t,1,"accelerometer")}e&&this.addEntropy(e,2,"accelerometer"),r(this,0)}},t.random=new t.prng(6);e:try{var a,u,d,f;if(f=e.exports){var h;try{h=require("crypto")}catch(e){h=null}f=u=h}if(f&&u.randomBytes)a=u.randomBytes(128),a=new Uint32Array(new Uint8Array(a).buffer),t.random.addEntropy(a,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(d=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(d);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(d)}t.random.addEntropy(d,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}t.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(e,n,o,i){o=o||{},i=i||{};var r,l=t.json,s=l.g({iv:t.random.randomWords(4,0)},l.defaults);if(l.g(s,o),o=s.adata,"string"==typeof s.salt&&(s.salt=t.codec.base64.toBits(s.salt)),"string"==typeof s.iv&&(s.iv=t.codec.base64.toBits(s.iv)),!t.mode[s.mode]||!t.cipher[s.cipher]||"string"==typeof e&&100>=s.iter||64!==s.ts&&96!==s.ts&&128!==s.ts||128!==s.ks&&192!==s.ks&&256!==s.ks||2>s.iv.length||4<s.iv.length)throw new t.exception.invalid("json encrypt: invalid parameters");return"string"==typeof e?(e=(r=t.misc.cachedPbkdf2(e,s)).key.slice(0,s.ks/32),s.salt=r.salt):t.ecc&&e instanceof t.ecc.elGamal.publicKey&&(r=e.kem(),s.kemtag=r.tag,e=r.key.slice(0,s.ks/32)),"string"==typeof n&&(n=t.codec.utf8String.toBits(n)),"string"==typeof o&&(s.adata=o=t.codec.utf8String.toBits(o)),r=new t.cipher[s.cipher](e),l.g(i,s),i.key=e,s.ct="ccm"===s.mode&&t.arrayBuffer&&t.arrayBuffer.ccm&&n instanceof ArrayBuffer?t.arrayBuffer.ccm.encrypt(r,n,s.iv,o,s.ts):t.mode[s.mode].encrypt(r,n,s.iv,o,s.ts),s},encrypt:function(e,n,o,i){var r=t.json,l=r.ja.apply(r,arguments);return r.encode(l)},ia:function(e,n,o,i){o=o||{},i=i||{};var r,l,s=t.json;if(r=(n=s.g(s.g(s.g({},s.defaults),n),o,!0)).adata,"string"==typeof n.salt&&(n.salt=t.codec.base64.toBits(n.salt)),"string"==typeof n.iv&&(n.iv=t.codec.base64.toBits(n.iv)),!t.mode[n.mode]||!t.cipher[n.cipher]||"string"==typeof e&&100>=n.iter||64!==n.ts&&96!==n.ts&&128!==n.ts||128!==n.ks&&192!==n.ks&&256!==n.ks||!n.iv||2>n.iv.length||4<n.iv.length)throw new t.exception.invalid("json decrypt: invalid parameters");return"string"==typeof e?(e=(l=t.misc.cachedPbkdf2(e,n)).key.slice(0,n.ks/32),n.salt=l.salt):t.ecc&&e instanceof t.ecc.elGamal.secretKey&&(e=e.unkem(t.codec.base64.toBits(n.kemtag)).slice(0,n.ks/32)),"string"==typeof r&&(r=t.codec.utf8String.toBits(r)),l=new t.cipher[n.cipher](e),r="ccm"===n.mode&&t.arrayBuffer&&t.arrayBuffer.ccm&&n.ct instanceof ArrayBuffer?t.arrayBuffer.ccm.decrypt(l,n.ct,n.iv,n.tag,r,n.ts):t.mode[n.mode].decrypt(l,n.ct,n.iv,r,n.ts),s.g(i,n),i.key=e,1===o.raw?r:t.codec.utf8String.fromBits(r)},decrypt:function(e,n,o,i){var r=t.json;return r.ia(e,r.decode(n),o,i)},encode:function(e){var n,o="{",i="";for(n in e)if(e.hasOwnProperty(n)){if(!n.match(/^[a-z0-9]+$/i))throw new t.exception.invalid("json encode: invalid property name");switch(o+=i+'"'+n+'":',i=",",typeof e[n]){case"number":case"boolean":o+=e[n];break;case"string":o+='"'+escape(e[n])+'"';break;case"object":o+='"'+t.codec.base64.fromBits(e[n],0)+'"';break;default:throw new t.exception.bug("json encode: unsupported type")}}return o+"}"},decode:function(e){if(!(e=e.replace(/\s/g,"")).match(/^\{.*\}$/))throw new t.exception.invalid("json decode: this isn't json!");e=e.replace(/^\{|\}$/g,"").split(/,/);var n,o,i={};for(n=0;n<e.length;n++){if(!(o=e[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new t.exception.invalid("json decode: this isn't json!");null!=o[3]?i[o[2]]=parseInt(o[3],10):null!=o[4]?i[o[2]]=o[2].match(/^(ct|adata|salt|iv)$/)?t.codec.base64.toBits(o[4]):unescape(o[4]):null!=o[5]&&(i[o[2]]="true"===o[5])}return i},g:function(e,n,o){if(void 0===e&&(e={}),void 0===n)return e;for(var i in n)if(n.hasOwnProperty(i)){if(o&&void 0!==e[i]&&e[i]!==n[i])throw new t.exception.invalid("required parameter overridden");e[i]=n[i]}return e},sa:function(e,t){var n,o={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(o[n]=e[n]);return o},ra:function(e,t){var n,o={};for(n=0;n<t.length;n++)void 0!==e[t[n]]&&(o[t[n]]=e[t[n]]);return o}},t.encrypt=t.json.encrypt,t.decrypt=t.json.decrypt,t.misc.pa={},t.misc.cachedPbkdf2=function(e,n){var o,i=t.misc.pa;return o=(n=n||{}).iter||1e3,(o=(i=i[e]=i[e]||{})[o]=i[o]||{firstSalt:n.salt&&n.salt.length?n.salt.slice(0):t.random.randomWords(2,0)})[i=void 0===n.salt?o.firstSalt:n.salt]=o[i]||t.misc.pbkdf2(e,i,n.iter),{key:o[i].slice(0),salt:i.slice(0)}},e.exports&&(e.exports=t)}(GQ);var XQ=_T(GQ.exports);function JQ(e){const{useWebDavSync:n}=t,o=n(e);return _((async(e,t,n,i)=>{const r=xJ(FT.workspace),l=sc(e)?e:JSON.stringify(e),s=sc(e)?JSON.parse(e):e;UH({type:kJ.WEBDAV_SYNC_CLOUD,payload:{item:l,syncing:!0}},r),await o(s,t,n,i),UH({type:kJ.WEBDAV_SYNC_CLOUD,payload:{item:l,syncing:!1}},r)}),[o])}function QQ(e,n,o){const{calcOptionsSize:i,calcWebDavNoteSpaceHeight:r,QRCODE_SECRET_KEY:l}=t,s=Dd(n);return F((()=>{const{createWebDavModes:n}=t,i=async t=>{if(t.type===kJ.WEBDAV_SELECT_MODE){const i=t.payload,r=n().find((e=>e.value===i));if(r){o(XJ({mode:r}));const t={...s.current,mode:r};UH({type:kJ.WEBDAV_UPDATE_FORM,payload:JSON.stringify(t)},e.uid),UH({type:kJ.WEBDAV_CHANGE_MODE,payload:JSON.stringify(t)},e.uid)}}else if(t.type===kJ.WEBDAV_SELECT_NOTE){const e=t.payload;if(e){const t=e.incloud;o(XJ({selected:e,incloud:t}))}}};return $H("message",i),()=>{ZH("message",i)}}),[o,s,e.uid]),{onClickSync:async()=>{o(XJ({validated:!0}));const{service:t,username:i,password:r}=n;if((null==t?void 0:t.trim())&&(null==i?void 0:i.trim())&&(null==r?void 0:r.trim())&&BM(t))return e.return?(UH({type:kJ.WEBDAV_SUBMIT_FROM,payload:JSON.stringify({...n,syncing:!0})},e.uid),void jH("pop")):void jH("replace",{route:FT.webdav,effect:{slide:"right"},title:{text:"WebDAV"},style:{backgroundColor:XK},alive:!0,aliveId:FT.webdav,payload:{type:"list",item:JSON.stringify(n)}})},onClickModes:()=>{var e;const t=[n.modes.map((e=>({name:e.text,value:e.value})))],o=zH(),r=_H(),l=document.documentElement.clientHeight,s=i(t)+41-12+r,c=Math.max(l/3,s);jH("push",{route:FT.webdav,effect:{slide:"bottom",modal:!0,gesture:!0,blur:!0},style:{height:c,borderRadius:{topLeft:16,topRight:16}},payload:{title:"同步模式",type:"mode",uid:o,mode:null===(e=n.mode)||void 0===e?void 0:e.value}})},onClickSelects:async()=>{var e,t;o(XJ({validated:!0}));const i=_H(),l=zH(),s=null===(t=null===(e=(await oF()).data)||void 0===e?void 0:e.file)||void 0===t?void 0:t.tree,c=document.documentElement.clientHeight,a=r(s)+41-12+i;let u=Math.max(c/2,a),d=!0;u+GK>c&&(u=c-GK,d=!1),jH("push",{route:FT.webdav,effect:{slide:"bottom",modal:!0,gesture:d,blur:!0},style:{height:u,borderRadius:{topLeft:16,topRight:16}},payload:{title:"笔记空间",type:"space",uid:l,height:u,item:JSON.stringify(n)}})},onClickPasswordVisible:()=>{const t={...n,passwordInvisible:!n.passwordInvisible};o(XJ(t)),UH({type:kJ.WEBDAV_UPDATE_FORM,payload:JSON.stringify(t)},e.uid)},onClickUsernameVisible:()=>{const t={...n,usernameInvisible:!n.usernameInvisible};o(XJ(t)),UH({type:kJ.WEBDAV_UPDATE_FORM,payload:JSON.stringify(t)},e.uid)},onClickScan:()=>{!function(e){"undefined"!=typeof WebPro&&WebPro.scan(e)}((e=>{const t=XQ.decrypt(l,e.originalValue),n=JSON.parse(t);Date.now()-n.timestamp>3e5?KH({title:"二维码已过期",message:"请重新生成二维码",confirm:{value:"确定",fontColor:yf}}):o(JJ(n))}))},onInputPassword:e=>{const t=e.target.value;o(XJ({...n,password:t}))},onInputUsername:e=>{const t=e.target.value;o(XJ({...n,username:t}))},onInputService:e=>{const t=e.target.value;o(XJ({...n,service:t}))}}}function e0(e,n,o,i,r,l){const s=Dd(e);H((()=>{const{clearStoreCURD:e,injectHelper:n,preset:c,injectFile:a,setLocalBootStrap:u,transformBootStrap:d,resetChangelog:f,injectChangelog:h,syncFileState:p,saftyCatalog:v,setFileScrollActive:g,deactivateFileBranch:m,setLocalNoteInnerHtml:y}=t;!function(e){"undefined"!=typeof WebPro?WebPro.hydration((t=>{try{null==e||e(JSON.parse(t))}catch(t){null==e||e(null)}})):null==e||e(null)}((async function t(b){var C,w,x;const S=s.current;let E={ok:0},k={};if(b?(E.ok=1,E.data=b.bootstrap,k=b.catalogs):E=await oF(),1!==E.ok||!(null===(C=E.data)||void 0===C?void 0:C.file))return o(c(S)),await n(S,o,r),o(m()),kM({inited:!0}),void(l.inited&&(l.inited.current=!0));const D=E.data;(null===(x=null===(w=D.file)||void 0===w?void 0:w.tree[0])||void 0===x?void 0:x.id)?D.file&&(o(p(D.file,!0,k),g(!0),e()),Sc(k)&&await a(S,D.file,i,o)):o(c(S));const I=await iF();I.data?o(f(I.data)):await h(S,D,o,i),u(d(D)),setTimeout((async()=>{var e;const n=document.querySelector("#ruset-hydration");n&&(null===(e=document.querySelector("#root"))||void 0===e||e.removeChild(n)),y(D.file),!1!==b&&await v(r,t)}))}))}),[o,s,r,i,l.inited]);const c=W((()=>{const{clearStoreRecord:e,clearStoreCURD:n,setStorePending:r,clearAuthDelete:s,recordBootstrap:c,recordChangelog:a,recordStore:u,recycleMemory:d}=t;return Vs((async t=>{var f,h,p;if(void 0===t.store)return;const{store:{record:v,crud:g,auth:m,editor:y={}},file:b}=t;if((!Sc(v)||!Sc(g))&&(o(r(!0)),((null==v?void 0:v.bootstrap)||(null==v?void 0:v.changelog))&&o(e()),Sc(g)||o(n()),Sc(null==m?void 0:m.delete)||o(s()),(null==v?void 0:v.bootstrap)&&await c(t),(null==v?void 0:v.changelog)&&await a(t),Sc(g)||await u(t,i),Object.keys(y).length>10&&o(d()),o(r(!1)),null===(h=null===(f=l.storend)||void 0===f?void 0:f.current)||void 0===h||h.call(f,t),UH({type:kJ.WORKSPACE_REPRESH_EDITOR,payload:g}),(null===(p=l.inited)||void 0===p?void 0:p.current)&&(l.inited.current=!1,UH({type:kJ.WORKSPACE_REPRESH_STORE})),(null==b?void 0:b.cloud)&&!Sc(g))){const e=xJ(FT.webdav);UH({type:kJ.WORKSPACE_DETECT_WEBDAV,payload:g},e)}}),300)}),[o,i,l.inited,l.storend]);F((()=>{const{store:e,editor:t,bootstrap:o}=n,{status:i}=t;if(void 0===e||"pending"===i||(null==o?void 0:o.misplace))return;const{record:r,crud:l,pending:s}=e;s||(r||l)&&c(n)}))}function t0(e,n,o,i,r,l,s){const c=Dd(e);H((()=>{const{syncFileState:e,injectFile:n,setCurrentPageId:i,resetChangelog:a,injectChangelog:u,getLocalRecentlyReview:d,setLocalRecentlyReview:f,clearStoreCURD:h}=t;c.current.reader||async function(){var t,p,v,g;const m=c.current,y=await oF(),{data:b}=y;if(!(null==b?void 0:b.file))return;const C=null===(t=c.current.page)||void 0===t?void 0:t.id;C&&(b.file.currentPageId=C),o(e(b.file,!0),h()),await n(m,b.file,l,o),C&&o(i(C)),r(AJ(!0));const w=function(){var e;if("undefined"!=typeof WebPro)return null===(e=WebPro.getNavigateItem)||void 0===e?void 0:e.call(WebPro)}();if(null==w?void 0:w.alive){let e=null!==(p=d())&&void 0!==p?p:[];if(!e.length){null===(g=null===(v=s.stater.get().file)||void 0===v?void 0:v.tree[0].children)||void 0===g||g.forEach((t=>{var n;"page"===t.type&&(e.push(t.id),null===(n=t.children)||void 0===n||n.forEach((t=>{"page"===(null==t?void 0:t.type)&&e.push(t.id)})))})),e=e.slice(0,10),f(e)}for(const t of e)await s.safty(t)}const x=await iF();x.data?o(a(x.data)):await u(m,b,o,l)}()}),[o,r,c,s,l,i.refresh]),F((()=>{const e=e=>{e.type===kJ.WORKSPACE_REPRESH_STORE&&r(TJ())};return $H("message",e),()=>{ZH("message",e)}}),[r]);const a=W((()=>{const{clearStoreRecord:e,clearStoreCURD:n,setStorePending:i,clearAuthDelete:r,recordStore:s,recordChangelog:c,recycleMemory:a}=t;return Vs((async t=>{if(void 0===t.store)return;const{store:{record:u,crud:d,auth:f,editor:h={}},file:p}=t;if(Sc(u)&&Sc(d))return;o(i(!0)),((null==u?void 0:u.bootstrap)||(null==u?void 0:u.changelog))&&o(e()),Sc(d)||o(n()),Sc(null==f?void 0:f.delete)||o(r()),(null==u?void 0:u.changelog)&&await c(t),Sc(d)||await s(t,l),Object.keys(h).length>10&&o(a()),o(i(!1));const v=xJ(FT.workspace);if(UH({type:kJ.EDITOR_REFRESH_WORKSPACE,payload:d},v),UH({type:kJ.EDITOR_REFRESH_EDITOR,payload:d,uid:zH()}),(null==p?void 0:p.cloud)&&!Sc(d)){const e=xJ(FT.webdav);UH({type:kJ.EDITOR_DETECT_WEBDAV,payload:d},e)}}),300)}),[o,l]);F((()=>{const{reader:t}=e,{store:o,editor:r,bootstrap:l}=n,{ready:s}=i,{status:c}=r;if(void 0===o||"pending"===c||(null==l?void 0:l.misplace)||t||!s)return;const{record:u,crud:d,pending:f}=o;f||(u||d)&&a(n)}))}const{getBranchByPath:n0}=xT;const{isNode:o0}=ek;function i0(e){F((()=>{!function(e){"undefined"!=typeof WebPro&&(WebPro.onApplicationPrivacy=t=>{e(t)})}((async n=>{var o,i;const{fetchUserAgreement:r,fetchPrivacyPolicy:l}=t;let s="",c=null;if("PrivacyPolicy"===n){const t=vJ.privacyPolicy;s=gJ[e.lang][t],c=await l()}else if("UserAgreement"===n){const t=vJ.userAgreement;s=gJ[e.lang][t],c=await r()}const a=null===(i=null===(o=null==c?void 0:c.bootstrap)||void 0===o?void 0:o.file)||void 0===i?void 0:i.currentPageId;a&&jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(c),page:{id:a},branch:{type:"page",id:a},pageId:a},title:{text:s},style:{backgroundColor:JK}})}))}),[e.lang]),F((()=>{jH("prepare",{route:FT.editor,alive:!0,aliveId:FT.editor}),jH("prepare",{route:FT.setting,alive:!0,aliveId:FT.setting}),jH("prepare")}),[])}function r0(e){const{FontSizeReader:n,common:o}=t,{icon:i,title:r,width:l,name:s}=e,c=o.list.isDecorateListNode(r);return X("div",{style:UK,children:[X("div",{style:qK,children:[i&&G("div",{style:{...YK,marginTop:c?0:-1},children:i}),G(n,{listTop:.5,fontSize:16,node:r,width:l})]}),s&&G("div",{style:KK,children:s})]})}function l0(e){let t=0;if(Uf){t=FH()+5}return X("div",{style:{...EG,...e.style},children:[G("div",{style:{height:t}}),G("div",{style:kG,children:e.children})]})}const s0=U(null);function c0(e){var n,o,i,r,l;const{RootAdvisor:s,RootState:c,isSheetFocusInclude:a,getSheetByFocus:u,sheet:d}=t,f=R(s),h=R(c),[p,v]=Od((()=>function(e){return{tools:_Q(e.name)}}(e)));F((()=>{if(e.name!==p.name){const t=_Q(e.name);v(jJ(t),WJ(e.name))}}),[e.name,p.name,v]);const g=oQ(),m=function(e,t,n){const o=Dd(e),i=Dd(t),r=Z(0);F((()=>{const e=e=>{r.current=e},t=e=>{(e.type===kJ.EDITOR_SHOW_KEYBOARD||e.type===kJ.TOOLS_HIDE_KEYBOARD||e.type===kJ.TOOLS_SHOW_KEYBOARD||e.type===kJ.TOOLS_POST_UPPER)&&n(FJ())};return $H("message",t),$H("sendKeyboardStatus",e),()=>{ZH("message",t),ZH("sendKeyboardStatus",e)}}),[o,i,n]);let l=null;return{onClickUpperTool:e=>{const t=xJ(FT.editor),o=xJ(FT.tools);if(e.inner){const t=!e.active;UH({type:kJ.TOOLS_POST_INNER,payload:e},o),l&&clearTimeout(l),t?n(RJ(e,t)):l=setTimeout((()=>{n(RJ(e,t))}),150)}else UH({type:kJ.TOOLS_EDITOR_ACTION,payload:{name:e.name,value:e.value,active:e.active,disable:e.disable}},t)}}}(e,p,v),y=Math.max(0,41*(null!==(o=null===(n=p.tools)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-11),b=null!==(r=null===(i=e.layout)||void 0===i?void 0:i.bottom)&&void 0!==r?r:eG+tG,{context:{editor:{selectionStyle:C,selectionDecorate:w},focus:x}}=f.provider();let S;if(a(x)){const{editor:{node:e}}=h,t=u(e,x);t&&(S=d.exportSheetStyle(t))}return G(ch,{style:{...HX,bottom:b},onClick:e=>e.stopPropagation(),children:G(qE,{className:"no-scrollbar",style:{..._X,width:y},visible:e.visible,transition:e.transition,children:null===(l=p.tools)||void 0===l?void 0:l.map(((e,t)=>{var n;const o={...jX};let i=e.active;i&&(o.backgroundColor=lG),vQ(e.name,C,w)&&(i=!0,o.backgroundColor=sG),(null===(n=p.tools)||void 0===n?void 0:n.length)===t+1&&delete o.marginRight,e.name!==g.text&&e.name!==g.bold||(o.left=2);let r=e.value;e.name===g.textColor?r=null==C?void 0:C.color:e.name===g.highlightColour?r=null==C?void 0:C.backgroundColor:e.name===g.fillColor&&(r=null==S?void 0:S.backgroundColor);return G(dv,{colors:uG,touchDelay:0,style:o,onClick:t=>{t.stopPropagation(),m.onClickUpperTool({...e,active:i})},children:G(e.outer,{...e,value:r})},e.name)}))})})}function a0(e){const t=oQ();return t.add===e.name?G(u0,{...e}):t.image===e.name?G(d0,{...e}):t.list===e.name?G(f0,{...e}):t.textColor===e.name||t.highlightColour===e.name?G(h0,{...e}):t.fontSize===e.name?G(p0,{...e}):t.fontFamily===e.name?G(v0,{...e}):t.letterSpacing===e.name?G(g0,{...e}):t.lineHeight===e.name?G(m0,{...e}):t.sheetInsert===e.name?G(y0,{...e}):t.sheetMore===e.name?G(C0,{...e}):t.fillColor===e.name?G(h0,{...e}):t.borderOutline===e.name?G(b0,{...e}):null}function u0(e){const t=R(s0),n=function(){const e=oQ(),t={width:16,fill:kf};return[{name:e.sheet,text:"表格",active:!1,outer:e=>G(bR,{...t,style:{position:"relative",top:-.4}})},{name:e.quote,text:"引文",active:!1,outer:e=>G(wR,{...t,style:{position:"relative",top:.2}})},{name:e.separator,text:"分割线",active:!1,outer:e=>G(xR,{...t})}]}(),o=oQ();return G("div",{style:ZX,children:n.map(((n,i)=>X(dv,{colors:aG,style:UX,touchDelay:0,onClick:()=>(n=>{n.name!==o.refer&&n.name!==o.link?mQ(0,e,{name:n.name,value:n.value},t):wQ()})(n),children:[G("span",{style:oJ,children:G(n.outer,{...n})}),G("span",{style:tJ,children:n.text})]},i)))})}function d0(e){const t=function(){const e=oQ();return[{name:e.takePhoto,text:"拍照",active:!1,outer:e=>G(ER,{width:18,fill:kf,style:{position:"relative",top:.5}})},{name:e.selectPicture,text:"从相册选择",active:!1,outer:e=>G(kR,{width:17,fill:kf,style:{position:"relative",top:.8}})}]}();return G("div",{style:ZX,children:t.map(((e,t)=>X(dv,{colors:aG,style:UX,touchDelay:0,onClick:()=>(e=>{const t=xJ(FT.editor);t&&UH({type:kJ.TOOLS_EDITOR_ACTION,payload:{name:e.name,value:e.value}},t)})(e),children:[G("span",{style:oJ,children:G(e.outer,{...e})}),G("span",{style:tJ,children:e.text})]},t)))})}function f0(e){var t;const n=R(s0),o=oQ(),i=iQ(),r=null===(t=e.selectionStatus)||void 0===t?void 0:t.decorate;function l(e){const t={...JX};e.name===o.numberedList&&(t.marginLeft=3);const n={...eJ};e.name===o.bulletedList&&(n.top=.5),e.name===o.checkList&&(n.top=-.5),e.name===o.toggleList&&(n.top=.5);const i={};return e.active&&(i.color="#fff",i.style={color:"#fff"}),G("div",{style:GX,children:e.list.map(((o,r)=>X("div",{style:XX,children:[X("div",{style:QX,children:[G("div",{style:n,children:G(o.icon,{...i})}),G("div",{style:t})]}),o.children?G(l,{...e,list:o.children}):null]},r)))})}return G("div",{style:ZX,children:i.map(((t,o)=>{var i;const s=t.payload,c=(null==r?void 0:r[null!==(i=t.name)&&void 0!==i?i:""])===t.value,a={...YX};return c&&(a.backgroundColor=yf),G(ch,{style:qX,onClick:()=>(t=>{mQ(0,e,{name:t.name,value:t.value},n)})(t),children:G(dv,{touchDelay:0,colors:aG,style:a,children:G("div",{style:KX,children:G(l,{active:c,name:t.name,value:t.value,list:s.jsx,type:s.type})})})},o)}))})}function h0(e){const t=R(s0),n=oQ(),o=lQ(),{isWhite:i}=Zv;return G("div",{style:ZX,children:o.map(((o,r)=>{var l,s,c,a,u,d,f;let h=String(o.value),p=h,v=h,g="1px solid transparent",m={},y=o.text,b=aG;const C={...UX,background:lG};if(e.name===n.textColor){let t=null===(s=null===(l=e.selectionStatus)||void 0===l?void 0:l.style)||void 0===s?void 0:s.color;t&&(o.value===t?(C.background=`linear-gradient(30deg, #fff 0%, ${t} 100%)`,p="#fff"):o.payload.includes(t)&&(i(t)&&(t=lG,y="白色"),C.background=`linear-gradient(30deg, #fff 0%, ${t} 100%)`,v=t,h=t,p="#fff"))}else{p="#ffffff",v="#ffffff";const t=o.value?h:lG;let r;C.background=t,b={default:t,active:t,hover:t},e.name===n.highlightColour?r=null===(a=null===(c=e.selectionStatus)||void 0===c?void 0:c.style)||void 0===a?void 0:a.backgroundColor:e.name===n.fillColor&&(r=null===(f=null===(d=null===(u=e.selectionStatus)||void 0===u?void 0:u.sheet)||void 0===d?void 0:d.style)||void 0===f?void 0:f.backgroundColor),r&&(o.value===r?(g="1px solid #fff",m={top:1.5,left:1.5,right:1.5,bottom:1.5,borderRadius:4.5}):o.payload.includes(r)&&(i(r)&&(r=lG,y="白色"),g="1px solid #fff",m={top:1.5,left:1.5,right:1.5,bottom:1.5,borderRadius:4.5},h=r,C.background=r))}return X(dv,{touchDelay:0,colors:b,style:C,onClick:()=>(n=>{mQ(0,e,{name:e.name,value:n.value},t)})(o),children:[G("span",{style:{...tJ,color:v},children:y}),G(dv,{style:iJ,onClick:t=>{t.stopPropagation(),(t=>{var n;const o=(null!==(n=e.height)&&void 0!==n?n:window.screen.availHeight)-eG+6,i=yQ(e);jH("push",{route:FT.selector,effect:{slide:"bottom",modal:!0,musk:!0,gesture:!0,blur:10},style:{height:o,borderRadius:{topLeft:16,topRight:16}},payload:{...t,name:e.name,prevent:i,height:o}})})({...o,value:h})},children:G(RO,{fill:p})}),G("div",{style:{...nJ,border:g,...m}})]},r)}))})}function p0(e){const t=R(s0);return G("div",{style:ZX,children:[{value:9,text:"小五"},{value:10.5,text:"五号"},{value:12,text:"小四"},{value:14,text:"四号"},{value:16,text:"三号"},{value:18,text:"小二"},{value:24,text:"小一"},{value:36,text:"小初"},{value:42,text:"初号"},{value:54,text:"特号"}].map(((n,o)=>{var i,r;let l=If,s=kf;const c={...UX};return(null===(r=null===(i=e.selectionStatus)||void 0===i?void 0:i.style)||void 0===r?void 0:r.fontSize)===Kf(n.value)&&(l="#fff",s="#fff",c.backgroundColor=yf),X(dv,{touchDelay:0,colors:aG,style:c,onClick:()=>(n=>{mQ(0,e,{name:e.name,value:Kf(n.value)},t)})(n),children:[G("span",{style:{...tJ,color:s},children:n.value}),G("span",{style:{...rJ,color:l},children:n.text})]},o)}))})}function v0(e){return G("div",{style:ZX,children:[{text:"默认字体",value:"auto"},{text:"雅黑",value:"Microsoft YaHei, 微软雅黑, 雅黑"},{text:"仿宋",value:"FangSong"},{text:"宋体",value:"SimSun"},{text:"楷体",value:"Kai, Kaiti"},{text:"黑体",value:"Hei"}].map(((e,t)=>G(ch,{style:UX,onClick:()=>{},children:G("span",{style:{...tJ,fontFamily:String(e.value)},children:e.text})},t)))})}function g0(e){const t=R(s0);return G("div",{style:ZX,children:[{text:"默认间距",value:"normal"},{text:"加宽1",value:1},{text:"加宽2",value:2},{text:"加宽4",value:4},{text:"加宽6",value:6},{text:"加宽8",value:8},{text:"加宽16",value:16},{text:"加宽32",value:32},{text:"紧缩1",value:-1},{text:"紧缩2",value:-2}].map(((n,o)=>{var i,r,l;if(!n.value)return null;let s=n.text,c=0;"number"==typeof n.value&&n.value>10&&(s=(null===(i=n.text)||void 0===i?void 0:i.slice(0,-2))+" ",c=n.value);let a=kf;const u={...UX},d=null===(l=null===(r=e.selectionStatus)||void 0===r?void 0:r.style)||void 0===l?void 0:l.letterSpacing;return(d===n.value||"normal"===n.value&&0===d)&&(a="#fff",u.backgroundColor=yf),X(dv,{touchDelay:0,colors:aG,style:u,onClick:()=>(n=>{mQ(0,e,{name:e.name,value:n.value},t)})(n),children:[G("span",{style:{...tJ,color:a,letterSpacing:n.value},children:s}),c>0?G("span",{style:{color:a},children:c}):null]},o)}))})}function m0(e){const t=R(s0);return G("div",{style:ZX,children:[{text:"默认行距",value:1.7},{text:"1",value:1},{text:"1.15",value:1.15},{text:"1.3",value:1.3},{text:"1.5",value:1.5},{text:"2",value:2},{text:"2.5",value:2.5},{text:"3",value:3}].map(((n,o)=>{var i,r;let l=kf;const s={...UX};return(null===(r=null===(i=e.selectionStatus)||void 0===i?void 0:i.style)||void 0===r?void 0:r.lineHeight)===n.value&&(l="#fff",s.backgroundColor=yf),G(dv,{touchDelay:0,colors:aG,style:s,onClick:()=>(n=>{mQ(0,e,{name:e.name,value:n.value},t)})(n),children:G("span",{style:{...tJ,color:l},children:n.text})},o)}))})}function y0(e){const t=R(s0),n=dQ();return G("div",{style:ZX,children:n.map(((n,o)=>X(dv,{touchDelay:0,colors:aG,style:UX,onClick:()=>(n=>{mQ(0,e,{name:n.name,value:n.value},t)})(n),children:[G("span",{style:tJ,children:n.text}),n.more?G(dv,{style:iJ,onClick:t=>{t.stopPropagation(),(t=>{var n;const o=(null!==(n=e.height)&&void 0!==n?n:window.screen.availHeight)-eG+6,i=yQ(e);jH("push",{route:FT.selector,effect:{slide:"bottom",modal:!0,musk:!0,gesture:!0,blur:10},style:{height:o,borderRadius:{topLeft:16,topRight:16}},payload:{...t,prevent:i,height:o}})})(n)},children:G(RO,{})}):null]},o)))})}function b0(e){const t=R(s0),n=oQ(),o=function(e){var t,n;const o=oQ(),i={width:16,fill:kf},r=!1!==(null===(n=null===(t=e.selectionStatus)||void 0===t?void 0:t.sheet)||void 0===n?void 0:n.border);return[{name:o.borderNone,value:SV.borderNone,text:"无边框",active:!1,outer:e=>G(BR,{...i})},{name:o.borderAll,value:SV.borderAll,text:"全边框",active:!1,outer:e=>G(DR,{...i})},{name:o.borderOutline,value:SV.borderOutline,text:"外边框",active:!1,outer:e=>G(NR,{...i})},{name:o.borderInside,value:SV.borderInside,text:"内边框",active:!1,outer:e=>G(LR,{...i})},{name:o.borderLeft,value:SV.borderLeft,text:"左边框",active:!1,outer:e=>G(AR,{...i})},{name:o.borderRight,value:SV.borderRight,text:"右边框",active:!1,outer:e=>G(MR,{...i})},{name:o.borderTop,value:SV.borderTop,text:"上边框",active:!1,outer:e=>G(OR,{...i})},{name:o.borderBottom,value:SV.borderBottom,text:"下边框",active:!1,outer:e=>G(RR,{...i})},r?{name:o.borderHide,value:SV.borderHide,text:"隐藏边框",active:!1,outer:e=>G(TR,{...i,fill:"#d8d8d8"})}:{name:o.borderShow,value:SV.borderShow,text:"显示边框",active:!1,outer:e=>G(TR,{...i,fill:"#666"})},{name:o.borderColor,value:SV.borderColor,text:"边框颜色",active:!1,more:!0,outer:e=>G(DR,{...i,fill:yf})}]}(e),i=t=>{var n;const o=(null!==(n=e.height)&&void 0!==n?n:window.screen.availHeight)-eG+6,i=yQ(e);jH("push",{route:FT.selector,effect:{slide:"bottom",modal:!0,musk:!0,gesture:!0,blur:10},style:{height:o,borderRadius:{topLeft:16,topRight:16}},payload:{...t,prevent:i,height:o}})};return G("div",{style:ZX,children:o.map(((o,r)=>X(dv,{colors:aG,style:UX,touchDelay:0,onClick:()=>(o=>{o.name!==n.borderColor?mQ(0,e,{name:o.name,value:o.value},t):i(o)})(o),children:[G("span",{style:oJ,children:G(o.outer,{...o})}),G("span",{style:tJ,children:o.text}),o.more?G(dv,{style:iJ,onClick:e=>{e.stopPropagation(),i(o)},children:G(RO,{})}):null]},r)))})}function C0(e){const t=R(s0),n=fQ();return G("div",{style:ZX,children:n.map(((n,o)=>X(dv,{touchDelay:0,colors:aG,style:UX,onClick:()=>(n=>{mQ(0,e,{name:n.name,value:n.value},t)})(n),children:[G("span",{style:tJ,children:n.text}),n.more?G(dv,{style:iJ,onClick:t=>{t.stopPropagation(),(t=>{var n;const o=(null!==(n=e.height)&&void 0!==n?n:window.screen.availHeight)-eG+6,i=yQ(e);jH("push",{route:FT.selector,effect:{slide:"bottom",modal:!0,musk:!0,gesture:!0,blur:10},style:{height:o,borderRadius:{topLeft:16,topRight:16}},payload:{...t,prevent:i,height:o}})})(n)},children:G(RO,{})}):null]},o)))})}function w0(e){var n;const{FOCUS_FIELD:o,initState:i,setNoDraft:r,useThreshold:l,useWorker:s,useAdvisor:c,Editor:a,RootDispatch:u,RootState:d,RootProps:f,RootPortal:h,RootTraversal:p,RootThreshold:v,RootAdvisor:g,RootWorker:m}=t;let[y,b]=Od((()=>i(e)),r());const[C,w]=Od((()=>function(e){return{tool:{lang:e.lang,visible:!1}}}(e))),x=Z(null),S=Z(null),E=Z({}),k=Z({}),D=l(E,b),I=s(e,y,b),N=c(e,y,b,I),L=Z(null!==(n=e.editable)&&void 0!==n?n:null);!function(e,n,o,i,r,l,s,c,a,u){const d=Dd(e),f=Dd(n),h=e.refresh;let p=i.inited;!e.reader&&e.alive||(p=!0);const v=n.editor.cwnd,g=Z(null),m=Z({prev:!1,next:!1,start:!1}),y=W((()=>{const{sliceNoteLocation:e,setLocalNoteLocation:n}=t;return Vs((()=>{const t=s.stater.get();if(t.editor.isEditPending)return;const o=e(t);n(o)}),100)}),[s]),b=_((()=>{var e,t,n,o;g.current&&(clearTimeout(g.current),g.current=null),m.current.prev=!1,m.current.next=!1,m.current.start=!1,null===(t=(e=c.current).scrollTo)||void 0===t||t.call(e,{top:0}),null===(o=(n=c.current).clearVisibleState)||void 0===o||o.call(n),r(BJ(),NJ(!1)),u.current=null}),[u,c,r]),C=_((async()=>{var e,n,i,c,h,v;const{switchBranchEditor:C,anchorBranchEditor:w,setCurrentPageId:x,setEditorThreshold:S,setEditorScrollOffset:E,setEditorClient:k,saftyFileBranch:D,saftyInitUndoRedoStack:I,anchorEditorByBranch:N,setGFocus:L,newNote:B,fetchBranch:T,setStorePending:A,removeEditorLocation:M,createNoneFocus:O,createEditorFocus:R,clearEditorHighlight:P,anchorEditorBySelection:F,setGFocusSelectionReflow:H,fetchBranchSource:_,replaceFileBranch:j,saftyMergeStore:W,anchorEditorByPageId:z,setFileTreeNoDraft:V}=t,{file:$}=f.current,Z=d.current,{page:U,snote:q,branch:Y,search:K,focus:G,create:X,link:J}=Z;if(!U||!Y||!p)return;const{id:Q}=U,{type:ee,id:te}=Y,ne=null==$?void 0:$.currentPageId,oe=[],ie=Vs((async e=>{const{file:t}=f.current,n=await _(e),i=null==t?void 0:t.tree.findIndex((e=>e.id===(null==n?void 0:n[0])));if(void 0===i||-1===i)return;const r={callback:t=>{t.id===e&&t.readonly&&(u.current=!1)},source:n},s=await T(t.tree[i],l,r);o(V(j(s,[i])))}),100);b();let re=null;if("page"===ee||"root"===ee?(null===(e=Y.segments)||void 0===e?void 0:e.length)&&!await s.exist(te)&&(re=GH({title:"正在载入"})):"outline"===ee&&(null===(n=U.segments)||void 0===n?void 0:n.length)&&!await s.exist(Q)&&(re=GH({title:"正在载入"})),"page"===ee||"root"===ee){if(await s.safty(te),Y.id!==te)return void(null==re||re());if(q){const e=JSON.parse(q);oe.push(W(e)),e.assets&&(a.current.assets=null!==(i=a.current.assets)&&void 0!==i?i:{},a.current.assets.cache=null!==(c=a.current.assets.cache)&&void 0!==c?c:{},Object.assign(a.current.assets.cache,e.assets))}if(oe.push(x(te),C(Z,te),D(Y),S(0)),X){oe.push(L(O()),B(Z,Y,Q),H(!0));const e=R();r(LJ(e))}else J&&oe.push(z(Q,J),L(O()));X||ie(te)}else if("outline"===ee){if(await s.safty(Q),Y.id!==te)return void(null==re||re());if(q){const e=JSON.parse(q);oe.push(W(e)),e.assets&&(a.current.assets=null!==(h=a.current.assets)&&void 0!==h?h:{},a.current.assets.cache=null!==(v=a.current.assets.cache)&&void 0!==v?v:{},Object.assign(a.current.assets.cache,e.assets))}if(ne!==Q&&oe.push(x(Q),C(Z,Q)),G){oe.push(L(O()),P(),F(Q,Y.payload),H(!0));const e=R();r(LJ(e))}else if(X){oe.push(L(O()),B(Z,Y,Q),H(!0));const e=R();r(LJ(e))}else K?oe.push(N(Y,Q)):oe.push(w(Z,te),M());oe.push(S(0)),X||ie(Q)}oe.push(E({top:0}),k(SJ()),I(),A(!1)),o(...oe),m.current.start=!0,y(),r(NJ(!0)),g.current&&(clearTimeout(g.current),g.current=null),null==re||re()}),[u,p,f,d,o,l,s,a,r,b,y]);H((()=>{var e;const{createNoneFocus:n,clearEditorHighlight:i,anchorEditorByBranch:a,anchorEditorBySelection:h,addFlush:v,setGFocus:g,fetchBranch:b,getBranchByID:w,replaceFileBranch:x,refreshFileBranch:S,removeStoreEditor:E,setEditorThreshold:k,setGFocusSelectionReflow:D,generateSearchFocus:I,replaceBranch:N,anchorBranchEditor:L,setEditorScrollOffset:B,readonlyFileBranch:T,resetChangelog:A,mergeFileState:M,resetFileTreePath:O,setStoreCatalog:R,setFileTreeNoDraft:P}=t;if(!p)return;C(),u.current=null!==(e=d.current.editable)&&void 0!==e?e:null,(async()=>{const e=await iF();e.data&&o(A(e.data))})();const F=async e=>{var t,p,C,A,F,H,_,j,W,z,V,$,Z,U,q,Y,K,G,X,J,Q,ee,te,ne,oe,ie,re,le,se,ce,ae;const ue=d.current,de=f.current;if(e.type===kJ.FLOAT_ANCHOR_BRANCH){const{id:n}=e.payload;m.current.prev=!1,m.current.next=!1,m.current.start=!0,null===(p=(t=c.current).scrollTo)||void 0===p||p.call(t,{top:0}),null===(A=(C=c.current).clearVisibleState)||void 0===A||A.call(C);const i=[L(ue,n),k(0),B({top:0})];o(...i),y()}else if(e.type===kJ.SEARCH_ANCHOR_EDITOR){const{branch:t,pageId:n}=e.payload;m.current.prev=!1,m.current.next=!1,m.current.start=!0,null===(H=(F=c.current).scrollTo)||void 0===H||H.call(F,{top:0}),null===(j=(_=c.current).clearVisibleState)||void 0===j||j.call(_);const i=null===(W=t.payload)||void 0===W?void 0:W.search,r=I(i),l=[g(r),a(t,n),v(n),k(0)];o(...l),y()}else if(e.type===kJ.SEARCH_FOCUS_EDITOR){const{branch:t,pageId:l}=e.payload;m.current.prev=!1,m.current.next=!1,m.current.start=!0,null===(V=(z=c.current).scrollTo)||void 0===V||V.call(z,{top:0}),null===(Z=($=c.current).clearVisibleState)||void 0===Z||Z.call($);const s=[g(n()),i(),h(l,t.payload),v(l),k(0)];o(...s),y();const a=null===(U=t.payload)||void 0===U?void 0:U.search,u=I(a);r(LJ(u))}else if(e.type===kJ.SEARCH_REPLACE_EDITOR){const{branch:t,pageId:n}=JSON.parse(e.payload),r=[i(),N(t,n),D(!0),v(n)];o(...r)}else if(e.type===kJ.MORE_READONLY_BRANCH){const{readonly:t}=e.payload,n=null===(q=de.file)||void 0===q?void 0:q.tree;if(!(null==n?void 0:n.length))return;let i=null;const r=null===(Y=ue.page)||void 0===Y?void 0:Y.path,s=null===(K=ue.page)||void 0===K?void 0:K.id;if((null==r?void 0:r.length)?i=n0(n,r):s&&(i=w(n,s)),!i)return;const c=await b(i,l,{deep:!0});u.current=!t;const a=[x(c,i.path),T(i,t),R(i,void 0,!0)];o(...a)}else if(e.type===kJ.WORKSPACE_REPRESH_EDITOR||e.type===kJ.EDITOR_REFRESH_EDITOR){if(zH()===e.uid)return;let t=null!==(J=null===(X=null===(G=de.file)||void 0===G?void 0:G.tree)||void 0===X?void 0:X.slice())&&void 0!==J?J:[];if(e.type===kJ.WORKSPACE_REPRESH_EDITOR){const e=await oF();if(1===e.ok&&e.data){const n={};for(const e of t)n[e.id]=e;const i=null!==(ee=null===(Q=e.data.file)||void 0===Q?void 0:Q.tree)&&void 0!==ee?ee:[],r=i.map((e=>e.id)),l=t.map((e=>e.id));Ec(r,l)||(t=i.map((e=>{var t;return null!==(t=n[e.id])&&void 0!==t?t:e})),o(P(M({tree:t}),O())))}}const n=e.payload;if(!n)return;const{update:i,delete:l}=n,c=null===(te=de.store)||void 0===te?void 0:te.editor;if(!c)return;for(const e of null!==(ne=null==l?void 0:l.editor)&&void 0!==ne?ne:[])c[e]&&o(E(e));const a=[];for(const t of null!==(oe=null==i?void 0:i.editor)&&void 0!==oe?oe:[])c[t]&&(o(E(t)),e.type===kJ.EDITOR_REFRESH_EDITOR&&(a.includes(t)||a.push(t)));if(null===(ie=null==i?void 0:i.catalog)||void 0===ie?void 0:ie.length)for(const e of i.catalog)a.includes(e)||a.push(e);if(!a.length)return;const u=await pF(a);for(const e in u.data)if("root"===u.data[e].type&&!t.some((t=>t.id===e)))return void r(TJ());if(1===u.ok&&u.data){const e=[];for(const{id:n}of t)e.push(S(n,u.data));o(P(...e))}for(const e of a)(null===(le=null===(re=u.data)||void 0===re?void 0:re[e].segments)||void 0===le?void 0:le.length)||await s.refresh(e);if(null===(se=null==i?void 0:i.reference)||void 0===se?void 0:se.length){const e=null===(ce=de.file)||void 0===ce?void 0:ce.currentPageId,t=de.editor.uids;for(const n of i.reference)if((null==t?void 0:t[n])&&e){o(v(e));break}}}else if(e.type===kJ.WEBDAV_SYNC_ACTIONS){const t=e.payload,n=null===(ae=de.store)||void 0===ae?void 0:ae.editor,i=t.pull.editor;for(const e of i)(null==n?void 0:n[e])&&o(E(e))}};return $H("message",F),()=>{ZH("message",F)}}),[d,f,h,c,o,l,p,C,r,y,s,u]),F((()=>{const e=e=>{if(!1===e){const{deleteCurrentPageId:e,createEditorState:n,setEditorState:i,setGFocus:r,createEditorFocus:l}=t,{editor:{clientWidth:s,clientHeight:c}}=f.current,a=n({selection:void 0,clientWidth:s,clientHeight:c,scrollHeight:c}),u=[e(),i(a),r(l())];o(...u),b()}},n=()=>{UH({type:kJ.EDITOR_BEFORE_DESTROY})};return $H("visibilityChange",e),$H("beforeDestroy",n),()=>{ZH("visibilityChange",e),ZH("beforeDestroy",n)}}),[o,r,b,f,c,u]),F((()=>{var e;const{clearModal:i}=t;(null===(e=n.modal)||void 0===e?void 0:e.visible)&&o(i())})),F((()=>{const{editor:{resizeHeight:e,resizeWidth:l,isEditPending:s,isScrollPending:c}}=n;if(v||l||e||s||c)return;if(!p)return;if(!m.current.start)return;if(m.current.prev&&m.current.next)return;const{setGFocus:a,setEditorState:u,setGFocusSelectionReflow:h}=t,{getEditNodeOffsets:y,getEditBlockNodeStartPath:b,getEditBlockNodeEndPath:C}=ek,{clientHeight:w}=document.documentElement;g.current=setTimeout((()=>{var e,t;const n=f.current,l=d.current;if(m.current.prev){if(!m.current.next){m.current.next=!0,m.current.start=!1;const{node:e}=n.editor,s=C(e),c=y(e,s),d={path:s.slice(0,c.length),offsets:c,flag:ek.ReflowStartFlag.next};o(u({...n.editor,isScrollPending:!0,threshold:null!==(t=l.threshold)&&void 0!==t?t:w,reflowStart:d})),i.focus&&(e_(),r(BJ()),o(a(i.focus),h(!0)))}}else{m.current.prev=!0;const{node:t}=n.editor,i=b(t),r=y(t,i),s={path:i.slice(0,r.length),offsets:r,flag:ek.ReflowStartFlag.prev};o(u({...n.editor,isScrollPending:!0,threshold:null!==(e=l.threshold)&&void 0!==e?e:w,reflowStart:s}))}}))}))}(e,y,b,C,w,I,N,k,E,L),t0(e,y,b,C,w,I,N),function(e,n,o){const i=Dd(n);F((()=>{const{resizeEditor:e,resizeClient:n,initClientState:i}=t,r=vu(window,"resize").pipe(Lu(0,Ha)).subscribe((()=>{const{width:t,height:r}=i(),{clientHeight:l,clientWidth:s}=SJ();o(e(s,l)),o(n(t,r))}));return()=>r.unsubscribe()}),[o,i])}(0,y,b);const B=UQ(e,y,b,C,w,I,N,k,L,E,x),T={...y,...e,dispatch:b,main:!0,root:!0,virtual:!0,editable:!!L.current,showExpandSelectionLoupe:!0,scroller:"native",keyboardHeight:C.keyboardHeight,focus:{type:o.EDITOR},onSelectPhrase:CQ,onSelectExpand:bQ,onLoupeMounted:bQ},A=["more"];return!1!==L.current||e.reader||A.unshift("readonly"),G(u,{value:b,children:G(d,{value:y,children:G(f,{value:e,children:G(h,{value:S,children:G(p,{value:E,children:G(v,{value:D,children:G(g,{value:N,children:G(m,{value:I,children:X(pJ,{menus:A,style:VK,onClickMenu:B.menu.onClick,children:[X(ch,{...B.editor,ref:x,children:[G(a,{...T,ref:k}),G(c0,{...C.tool})]}),G(zk,{ref:S,style:$K})]})})})})})})})})})}var x0={},S0={},E0={};let k0;const D0=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];E0.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},E0.getSymbolTotalCodewords=function(e){return D0[e]},E0.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},E0.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');k0=e},E0.isKanjiModeEnabled=function(){return void 0!==k0},E0.toSJIS=function(e){return k0(e)};var I0={};function N0(){this.buffer=[],this.length=0}!function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(e){return n}}}(I0),N0.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var L0=N0;function B0(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}B0.prototype.set=function(e,t,n,o){const i=e*this.size+t;this.data[i]=n,o&&(this.reservedBit[i]=!0)},B0.prototype.get=function(e,t){return this.data[e*this.size+t]},B0.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},B0.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var T0=B0,A0={};!function(e){const t=E0.getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const n=Math.floor(e/7)+2,o=t(e),i=145===o?26:2*Math.ceil((o-13)/(2*n-2)),r=[o-7];for(let e=1;e<n-1;e++)r[e]=r[e-1]-i;return r.push(6),r.reverse()},e.getPositions=function(t){const n=[],o=e.getRowColCoords(t),i=o.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||n.push([o[e],o[t]]);return n}}(A0);var M0={};const O0=E0.getSymbolSize;M0.getPositions=function(e){const t=O0(e);return[[0,0],[t-7,0],[0,t-7]]};var R0={};!function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,n=3,o=40,i=10;function r(t,n,o){switch(t){case e.Patterns.PATTERN000:return(n+o)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return o%3==0;case e.Patterns.PATTERN011:return(n+o)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case e.Patterns.PATTERN101:return n*o%2+n*o%3==0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2==0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const n=e.size;let o=0,i=0,r=0,l=null,s=null;for(let c=0;c<n;c++){i=r=0,l=s=null;for(let a=0;a<n;a++){let n=e.get(c,a);n===l?i++:(i>=5&&(o+=t+(i-5)),l=n,i=1),n=e.get(a,c),n===s?r++:(r>=5&&(o+=t+(r-5)),s=n,r=1)}i>=5&&(o+=t+(i-5)),r>=5&&(o+=t+(r-5))}return o},e.getPenaltyN2=function(e){const t=e.size;let o=0;for(let n=0;n<t-1;n++)for(let i=0;i<t-1;i++){const t=e.get(n,i)+e.get(n,i+1)+e.get(n+1,i)+e.get(n+1,i+1);4!==t&&0!==t||o++}return o*n},e.getPenaltyN3=function(e){const t=e.size;let n=0,i=0,r=0;for(let o=0;o<t;o++){i=r=0;for(let l=0;l<t;l++)i=i<<1&2047|e.get(o,l),l>=10&&(1488===i||93===i)&&n++,r=r<<1&2047|e.get(l,o),l>=10&&(1488===r||93===r)&&n++}return n*o},e.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let o=0;o<n;o++)t+=e.data[o];return Math.abs(Math.ceil(100*t/n/5)-10)*i},e.applyMask=function(e,t){const n=t.size;for(let o=0;o<n;o++)for(let i=0;i<n;i++)t.isReserved(i,o)||t.xor(i,o,r(e,i,o))},e.getBestMask=function(t,n){const o=Object.keys(e.Patterns).length;let i=0,r=1/0;for(let l=0;l<o;l++){n(l),e.applyMask(l,t);const o=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(l,t),o<r&&(r=o,i=l)}return i}}(R0);var P0={};const F0=I0,H0=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_0=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];P0.getBlocksCount=function(e,t){switch(t){case F0.L:return H0[4*(e-1)+0];case F0.M:return H0[4*(e-1)+1];case F0.Q:return H0[4*(e-1)+2];case F0.H:return H0[4*(e-1)+3];default:return}},P0.getTotalCodewordsCount=function(e,t){switch(t){case F0.L:return _0[4*(e-1)+0];case F0.M:return _0[4*(e-1)+1];case F0.Q:return _0[4*(e-1)+2];case F0.H:return _0[4*(e-1)+3];default:return}};var j0={},W0={};const z0=new Uint8Array(512),V0=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)z0[t]=e,V0[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)z0[e]=z0[e-255]}(),W0.log=function(e){if(e<1)throw new Error("log("+e+")");return V0[e]},W0.exp=function(e){return z0[e]},W0.mul=function(e,t){return 0===e||0===t?0:z0[V0[e]+V0[t]]},function(e){const t=W0;e.mul=function(e,n){const o=new Uint8Array(e.length+n.length-1);for(let i=0;i<e.length;i++)for(let r=0;r<n.length;r++)o[i+r]^=t.mul(e[i],n[r]);return o},e.mod=function(e,n){let o=new Uint8Array(e);for(;o.length-n.length>=0;){const e=o[0];for(let i=0;i<n.length;i++)o[i]^=t.mul(n[i],e);let i=0;for(;i<o.length&&0===o[i];)i++;o=o.slice(i)}return o},e.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let i=0;i<n;i++)o=e.mul(o,new Uint8Array([1,t.exp(i)]));return o}}(j0);const $0=j0;function Z0(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Z0.prototype.initialize=function(e){this.degree=e,this.genPoly=$0.generateECPolynomial(this.degree)},Z0.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=$0.mod(t,this.genPoly),o=this.degree-n.length;if(o>0){const e=new Uint8Array(this.degree);return e.set(n,o),e}return n};var U0=Z0,q0={},Y0={},K0={isValid:function(e){return!isNaN(e)&&e>=1&&e<=40}},G0={};const X0="[0-9]+";let J0="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";J0=J0.replace(/u/g,"\\u");const Q0="(?:(?![A-Z0-9 $%*+\\-./:]|"+J0+")(?:.|[\r\n]))+";G0.KANJI=new RegExp(J0,"g"),G0.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),G0.BYTE=new RegExp(Q0,"g"),G0.NUMERIC=new RegExp(X0,"g"),G0.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const e1=new RegExp("^"+J0+"$"),t1=new RegExp("^"+X0+"$"),n1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");G0.testKanji=function(e){return e1.test(e)},G0.testNumeric=function(e){return t1.test(e)},G0.testAlphanumeric=function(e){return n1.test(e)},function(e){const t=K0,n=G0;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(e){return n}}}(Y0),function(e){const t=E0,n=P0,o=I0,i=Y0,r=K0,l=t.getBCHDigit(7973);function s(e,t){return i.getCharCountIndicator(e,t)+4}function c(e,t){let n=0;return e.forEach((function(e){const o=s(e.mode,t);n+=o+e.getBitsLength()})),n}e.from=function(e,t){return r.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,o,l){if(!r.isValid(e))throw new Error("Invalid QR Code version");void 0===l&&(l=i.BYTE);const c=8*(t.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,o));if(l===i.MIXED)return c;const a=c-s(l,e);switch(l){case i.NUMERIC:return Math.floor(a/10*3);case i.ALPHANUMERIC:return Math.floor(a/11*2);case i.KANJI:return Math.floor(a/13);case i.BYTE:default:return Math.floor(a/8)}},e.getBestVersionForData=function(t,n){let r;const l=o.from(n,o.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let o=1;o<=40;o++)if(c(t,o)<=e.getCapacity(o,n,i.MIXED))return o}(t,l);if(0===t.length)return 1;r=t[0]}else r=t;return function(t,n,o){for(let i=1;i<=40;i++)if(n<=e.getCapacity(i,o,t))return i}(r.mode,r.getLength(),l)},e.getEncodedBits=function(e){if(!r.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;t.getBCHDigit(n)-l>=0;)n^=7973<<t.getBCHDigit(n)-l;return e<<12|n}}(q0);var o1={};const i1=E0,r1=i1.getBCHDigit(1335);o1.getEncodedBits=function(e,t){const n=e.bit<<3|t;let o=n<<10;for(;i1.getBCHDigit(o)-r1>=0;)o^=1335<<i1.getBCHDigit(o)-r1;return 21522^(n<<10|o)};var l1={};const s1=Y0;function c1(e){this.mode=s1.NUMERIC,this.data=e.toString()}c1.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},c1.prototype.getLength=function(){return this.data.length},c1.prototype.getBitsLength=function(){return c1.getBitsLength(this.data.length)},c1.prototype.write=function(e){let t,n,o;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),o=parseInt(n,10),e.put(o,10);const i=this.data.length-t;i>0&&(n=this.data.substr(t),o=parseInt(n,10),e.put(o,3*i+1))};var a1=c1;const u1=Y0,d1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function f1(e){this.mode=u1.ALPHANUMERIC,this.data=e}f1.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},f1.prototype.getLength=function(){return this.data.length},f1.prototype.getBitsLength=function(){return f1.getBitsLength(this.data.length)},f1.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*d1.indexOf(this.data[t]);n+=d1.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(d1.indexOf(this.data[t]),6)};var h1=f1;const p1=Y0;function v1(e){this.mode=p1.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}v1.getBitsLength=function(e){return 8*e},v1.prototype.getLength=function(){return this.data.length},v1.prototype.getBitsLength=function(){return v1.getBitsLength(this.data.length)},v1.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var g1=v1;const m1=Y0,y1=E0;function b1(e){this.mode=m1.KANJI,this.data=e}b1.getBitsLength=function(e){return 13*e},b1.prototype.getLength=function(){return this.data.length},b1.prototype.getBitsLength=function(){return b1.getBitsLength(this.data.length)},b1.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=y1.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}};var C1=b1,w1={exports:{}};!function(e){var t={single_source_shortest_paths:function(e,n,o){var i={},r={};r[n]=0;var l,s,c,a,u,d,f,h=t.PriorityQueue.make();for(h.push(n,0);!h.empty();)for(c in s=(l=h.pop()).value,a=l.cost,u=e[s]||{})u.hasOwnProperty(c)&&(d=a+u[c],f=r[c],(void 0===r[c]||f>d)&&(r[c]=d,h.push(c,d),i[c]=s));if(void 0!==o&&void 0===r[o]){var p=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],o=t;o;)n.push(o),e[o],o=e[o];return n.reverse(),n},find_path:function(e,n,o){var i=t.single_source_shortest_paths(e,n,o);return t.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(e){var n,o=t.PriorityQueue,i={};for(n in e=e||{},o)o.hasOwnProperty(n)&&(i[n]=o[n]);return i.queue=[],i.sorter=e.sorter||o.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t}(w1);var x1=w1.exports;!function(e){const t=Y0,n=a1,o=h1,i=g1,r=C1,l=G0,s=E0,c=x1;function a(e){return unescape(encodeURIComponent(e)).length}function u(e,t,n){const o=[];let i;for(;null!==(i=e.exec(n));)o.push({data:i[0],index:i.index,mode:t,length:i[0].length});return o}function d(e){const n=u(l.NUMERIC,t.NUMERIC,e),o=u(l.ALPHANUMERIC,t.ALPHANUMERIC,e);let i,r;s.isKanjiModeEnabled()?(i=u(l.BYTE,t.BYTE,e),r=u(l.KANJI,t.KANJI,e)):(i=u(l.BYTE_KANJI,t.BYTE,e),r=[]);return n.concat(o,i,r).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function f(e,l){switch(l){case t.NUMERIC:return n.getBitsLength(e);case t.ALPHANUMERIC:return o.getBitsLength(e);case t.KANJI:return r.getBitsLength(e);case t.BYTE:return i.getBitsLength(e)}}function h(e,l){let c;const a=t.getBestModeForData(e);if(c=t.from(l,a),c!==t.BYTE&&c.bit<a.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(c)+".\n Suggested mode is: "+t.toString(a));switch(c!==t.KANJI||s.isKanjiModeEnabled()||(c=t.BYTE),c){case t.NUMERIC:return new n(e);case t.ALPHANUMERIC:return new o(e);case t.KANJI:return new r(e);case t.BYTE:return new i(e)}}e.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(h(t,null)):t.data&&e.push(h(t.data,t.mode)),e}),[])},e.fromString=function(n,o){const i=function(e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];switch(i.mode){case t.NUMERIC:n.push([i,{data:i.data,mode:t.ALPHANUMERIC,length:i.length},{data:i.data,mode:t.BYTE,length:i.length}]);break;case t.ALPHANUMERIC:n.push([i,{data:i.data,mode:t.BYTE,length:i.length}]);break;case t.KANJI:n.push([i,{data:i.data,mode:t.BYTE,length:a(i.data)}]);break;case t.BYTE:n.push([{data:i.data,mode:t.BYTE,length:a(i.data)}])}}return n}(d(n,s.isKanjiModeEnabled())),r=function(e,n){const o={},i={start:{}};let r=["start"];for(let l=0;l<e.length;l++){const s=e[l],c=[];for(let e=0;e<s.length;e++){const a=s[e],u=""+l+e;c.push(u),o[u]={node:a,lastCount:0},i[u]={};for(let e=0;e<r.length;e++){const l=r[e];o[l]&&o[l].node.mode===a.mode?(i[l][u]=f(o[l].lastCount+a.length,a.mode)-f(o[l].lastCount,a.mode),o[l].lastCount+=a.length):(o[l]&&(o[l].lastCount=a.length),i[l][u]=f(a.length,a.mode)+4+t.getCharCountIndicator(a.mode,n))}}r=c}for(let e=0;e<r.length;e++)i[r[e]].end=0;return{map:i,table:o}}(i,o),l=c.find_path(r.map,"start","end"),u=[];for(let e=1;e<l.length-1;e++)u.push(r.table[l[e]].node);return e.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(u))},e.rawSplit=function(t){return e.fromArray(d(t,s.isKanjiModeEnabled()))}}(l1);const S1=E0,E1=I0,k1=L0,D1=T0,I1=A0,N1=M0,L1=R0,B1=P0,T1=U0,A1=q0,M1=o1,O1=Y0,R1=l1;function P1(e,t,n){const o=e.size,i=M1.getEncodedBits(t,n);let r,l;for(r=0;r<15;r++)l=1==(i>>r&1),r<6?e.set(r,8,l,!0):r<8?e.set(r+1,8,l,!0):e.set(o-15+r,8,l,!0),r<8?e.set(8,o-r-1,l,!0):r<9?e.set(8,15-r-1+1,l,!0):e.set(8,15-r-1,l,!0);e.set(o-8,8,1,!0)}function F1(e,t,n){const o=new k1;n.forEach((function(t){o.put(t.mode.bit,4),o.put(t.getLength(),O1.getCharCountIndicator(t.mode,e)),t.write(o)}));const i=8*(S1.getSymbolTotalCodewords(e)-B1.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=i&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);const r=(i-o.getLengthInBits())/8;for(let e=0;e<r;e++)o.put(e%2?17:236,8);return function(e,t,n){const o=S1.getSymbolTotalCodewords(t),i=B1.getTotalCodewordsCount(t,n),r=o-i,l=B1.getBlocksCount(t,n),s=o%l,c=l-s,a=Math.floor(o/l),u=Math.floor(r/l),d=u+1,f=a-u,h=new T1(f);let p=0;const v=new Array(l),g=new Array(l);let m=0;const y=new Uint8Array(e.buffer);for(let e=0;e<l;e++){const t=e<c?u:d;v[e]=y.slice(p,p+t),g[e]=h.encode(v[e]),p+=t,m=Math.max(m,t)}const b=new Uint8Array(o);let C,w,x=0;for(C=0;C<m;C++)for(w=0;w<l;w++)C<v[w].length&&(b[x++]=v[w][C]);for(C=0;C<f;C++)for(w=0;w<l;w++)b[x++]=g[w][C];return b}(o,e,t)}function H1(e,t,n,o){let i;if(Array.isArray(e))i=R1.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let o=t;if(!o){const t=R1.rawSplit(e);o=A1.getBestVersionForData(t,n)}i=R1.fromString(e,o||40)}}const r=A1.getBestVersionForData(i,n);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<r)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+r+".\n")}else t=r;const l=F1(t,n,i),s=S1.getSymbolSize(t),c=new D1(s);return function(e,t){const n=e.size,o=N1.getPositions(t);for(let t=0;t<o.length;t++){const i=o[t][0],r=o[t][1];for(let t=-1;t<=7;t++)if(!(i+t<=-1||n<=i+t))for(let o=-1;o<=7;o++)r+o<=-1||n<=r+o||(t>=0&&t<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===t||6===t)||t>=2&&t<=4&&o>=2&&o<=4?e.set(i+t,r+o,!0,!0):e.set(i+t,r+o,!1,!0))}}(c,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(c),function(e,t){const n=I1.getPositions(t);for(let t=0;t<n.length;t++){const o=n[t][0],i=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(o+t,i+n,!0,!0):e.set(o+t,i+n,!1,!0)}}(c,t),P1(c,n,0),t>=7&&function(e,t){const n=e.size,o=A1.getEncodedBits(t);let i,r,l;for(let t=0;t<18;t++)i=Math.floor(t/3),r=t%3+n-8-3,l=1==(o>>t&1),e.set(i,r,l,!0),e.set(r,i,l,!0)}(c,t),function(e,t){const n=e.size;let o=-1,i=n-1,r=7,l=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(i,s-n)){let o=!1;l<t.length&&(o=1==(t[l]>>>r&1)),e.set(i,s-n,o),r--,-1===r&&(l++,r=7)}if(i+=o,i<0||n<=i){i-=o,o=-o;break}}}(c,l),isNaN(o)&&(o=L1.getBestMask(c,P1.bind(null,c,n))),L1.applyMask(o,c),P1(c,n,o),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:o,segments:i}}S0.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,o,i=E1.M;return void 0!==t&&(i=E1.from(t.errorCorrectionLevel,E1.M),n=A1.from(t.version),o=L1.from(t.maskPattern),t.toSJISFunc&&S1.setToSJISFunction(t.toSJISFunc)),H1(e,n,i,o)};var _1={},j1={};!function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const n=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:o,scale:o?4:i,margin:n,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,n){const o=e.getScale(t,n);return Math.floor((t+2*n.margin)*o)},e.qrToImageData=function(t,n,o){const i=n.modules.size,r=n.modules.data,l=e.getScale(i,o),s=Math.floor((i+2*o.margin)*l),c=o.margin*l,a=[o.color.light,o.color.dark];for(let e=0;e<s;e++)for(let n=0;n<s;n++){let u=4*(e*s+n),d=o.color.light;if(e>=c&&n>=c&&e<s-c&&n<s-c){d=a[r[Math.floor((e-c)/l)*i+Math.floor((n-c)/l)]?1:0]}t[u++]=d.r,t[u++]=d.g,t[u++]=d.b,t[u]=d.a}}}(j1),function(e){const t=j1;e.render=function(e,n,o){let i=o,r=n;void 0!==i||n&&n.getContext||(i=n,n=void 0),n||(r=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=t.getOptions(i);const l=t.getImageWidth(e.modules.size,i),s=r.getContext("2d"),c=s.createImageData(l,l);return t.qrToImageData(c.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,r,l),s.putImageData(c,0,0),r},e.renderToDataURL=function(t,n,o){let i=o;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});const r=e.render(t,n,i),l=i.type||"image/png",s=i.rendererOpts||{};return r.toDataURL(l,s.quality)}}(_1);var W1={};const z1=j1;function V1(e,t){const n=e.a/255,o=t+'="'+e.hex+'"';return n<1?o+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function $1(e,t,n){let o=e+t;return void 0!==n&&(o+=" "+n),o}W1.render=function(e,t,n){const o=z1.getOptions(t),i=e.modules.size,r=e.modules.data,l=i+2*o.margin,s=o.color.light.a?"<path "+V1(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",c="<path "+V1(o.color.dark,"stroke")+' d="'+function(e,t,n){let o="",i=0,r=!1,l=0;for(let s=0;s<e.length;s++){const c=Math.floor(s%t),a=Math.floor(s/t);c||r||(r=!0),e[s]?(l++,s>0&&c>0&&e[s-1]||(o+=r?$1("M",c+n,.5+a+n):$1("m",i,0),i=0,r=!1),c+1<t&&e[s+1]||(o+=$1("h",l),l=0)):i++}return o}(r,i,o.margin)+'"/>',a='viewBox="0 0 '+l+" "+l+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+a+' shape-rendering="crispEdges">'+s+c+"</svg>\n";return"function"==typeof n&&n(null,u),u};const Z1=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},U1=S0,q1=_1,Y1=W1;function K1(e,t,n,o,i){const r=[].slice.call(arguments,1),l=r.length,s="function"==typeof r[l-1];if(!s&&!Z1())throw new Error("Callback required as last argument");if(!s){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=o=void 0):2!==l||t.getContext||(o=n,n=t,t=void 0),new Promise((function(i,r){try{const r=U1.create(n,o);i(e(r,t,o))}catch(e){r(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(i=n,n=t,t=o=void 0):3===l&&(t.getContext&&void 0===i?(i=o,o=void 0):(i=o,o=n,n=t,t=void 0));try{const r=U1.create(n,o);i(null,e(r,t,o))}catch(e){i(e)}}function G1(e){var n,o,i,r,l,s;const{FontSizeReader:c}=t,[a,u]=Od((()=>function(e){var n;const{genID:o,createWebDavModes:i}=t,r=i(),l={id:null!==(n=e.id)&&void 0!==n?n:o(!0),roots:[],modes:r,mode:r[0]};return e.item&&Object.assign(l,JSON.parse(e.item)),l}(e))),d={};if(Uf){const e=_H();e>0&&(d.marginBottom=e)}!function(e,t,n){const o=Dd(t);F((()=>{(async()=>{var e,t,i,r;const l=await oF(),s=null===(t=null===(e=l.data)||void 0===e?void 0:e.file)||void 0===t?void 0:t.tree,c=null===(r=null===(i=l.data)||void 0===i?void 0:i.file)||void 0===r?void 0:r.cloud,a=o.current.selected,u=null==s?void 0:s.find((e=>!(null==c?void 0:c[e.id])));if(s&&n(XJ({roots:s})),u&&!a&&n(XJ({selected:u})),a){const e=!!(null==s?void 0:s.find((e=>e.id!==a.id)));n(XJ({incloud:e}))}else n(XJ({incloud:!1}))})()}),[o,n])}(0,a,u);const f=QQ(e,a,u);return X("div",{style:jG,children:[X("div",{style:VG,children:[X("div",{style:qG,children:[G("div",{style:tX,children:"服务器地址"}),X("div",{style:nX,children:[G("input",{style:oX,value:a.service,onInput:f.onInputService}),!a.bind&&G(ch,{style:iX,onClick:f.onClickScan,children:G(zR,{fill:If,width:14})})]}),a.validated&&!(null===(n=a.service)||void 0===n?void 0:n.trim())?G("div",{style:cX,children:"请输入服务器地址"}):a.validated&&!BM(null===(o=a.service)||void 0===o?void 0:o.trim())?G("div",{style:cX,children:"请确认服务器地址格式"}):null]}),X("div",{style:qG,children:[G("div",{style:tX,children:"用户名"}),X("div",{style:nX,children:[G("input",{style:oX,type:a.usernameInvisible?"password":"text",value:a.username,onInput:f.onInputUsername}),G(ch,{style:iX,onClick:f.onClickUsernameVisible,children:a.usernameInvisible?G(BO,{fill:If,width:14}):G(LO,{fill:If,width:15})})]}),a.validated&&!(null===(i=a.username)||void 0===i?void 0:i.trim())?G("div",{style:cX,children:"请输入用户名"}):null]}),X("div",{style:qG,children:[G("div",{style:tX,children:"密码"}),X("div",{style:nX,children:[G("input",{style:oX,type:a.passwordInvisible?"password":"text",value:a.password,onInput:f.onInputPassword}),G(ch,{style:iX,onClick:f.onClickPasswordVisible,children:a.passwordInvisible?G(BO,{fill:If,width:14}):G(LO,{fill:If,width:15})})]}),a.validated&&!(null===(r=a.password)||void 0===r?void 0:r.trim())?G("div",{style:cX,children:"请输入密码"}):null]}),X("div",{style:qG,children:[G("div",{style:tX,children:"笔记空间"}),X("div",{style:nX,children:[G(ch,{style:{...oX,marginTop:1},onClick:f.onClickSelects,children:G(c,{width:wJ(),node:null===(l=a.selected)||void 0===l?void 0:l.title})}),!a.bind&&X("div",{style:rX,children:[a.incloud&&a.selected&&G("span",{style:lX,children:G(dO,{width:14,fill:If})}),G("span",{style:sX,children:G($M,{width:6.3,fill:If})})]})]})]}),X("div",{style:qG,children:[G("div",{style:tX,children:"同步模式"}),X("div",{style:nX,children:[G(ch,{style:{...oX,marginTop:1},onClick:f.onClickModes,children:null===(s=a.mode)||void 0===s?void 0:s.text}),G("div",{style:sX,children:G($M,{width:6.3,fill:If})})]})]})]}),G("div",{style:{...ZG,...d},children:G(pv,{style:UG,onClick:f.onClickSync,children:"同步"})})]})}function X1(e){var n;const{FontSizeReader:o,useWorker:i,useAdvisor:r}=t,[l,s]=Od((()=>function(e){const{initState:n,initWebDavState:o}=t,i=n(e);if(i.webdav=o(i.file,!0),e.item){const t=JSON.parse(e.item);i.webdav.list.some((e=>{var n,o;return(null===(n=e.selected)||void 0===n?void 0:n.id)===(null===(o=t.selected)||void 0===o?void 0:o.id)}))||i.webdav.list.unshift(t)}return i}(e)));let c=0;Uf&&(c=_H());const a=i(e,l,s),u=r(e,l,s,a);!function(e,n,o,i,r){const l=Dd(e),s=JQ(e);H((()=>{const{syncFileState:e,injectFile:n,clearStoreCURD:c,resetChangelog:a,injectChangelog:u,resetWebDav:d}=t;!async function(){const t=l.current,f=await oF(),{data:h}=f;if(!(null==h?void 0:h.file))return;const p=[e(h.file,!0),c()];t.item||p.push(d(!0)),o(...p),await n(t,h.file,i,o);const v=await iF();v.data?o(a(v.data)):await u(t,h,o,i),t.item&&await s(t.item,o,i,r)}()}),[o,l,r,i,s]),F((()=>{const e=e=>{e.type,kJ.WORKSPACE_REPRESH_WEBDAV};return $H("message",e),()=>{ZH("message",e)}}),[]);const c=W((()=>{const{clearStoreRecord:e,clearStoreCURD:n,setStorePending:r,clearAuthDelete:l,recordStore:s,recordChangelog:c,recycleMemory:a}=t;return Vs((async t=>{if(void 0===t.store)return;const{store:{record:u,crud:d,auth:f,editor:h={}}}=t;if(Sc(u)&&Sc(d))return;o(r(!0)),((null==u?void 0:u.bootstrap)||(null==u?void 0:u.changelog))&&o(e()),Sc(d)||o(n()),Sc(null==f?void 0:f.delete)||o(l()),(null==u?void 0:u.changelog)&&await c(t),Sc(d)||await s(t,i),Object.keys(h).length>10&&o(a()),o(r(!1));const p=xJ(FT.workspace);UH({type:kJ.WEBDAV_REFRESH_WORKSPACE,payload:d},p)}),300)}),[o,i]);F((()=>{const{store:e,editor:t,bootstrap:o}=n,{status:i}=t;if(void 0===e||"pending"===i||(null==o?void 0:o.misplace))return;const{record:r,crud:l,pending:s}=e;s||(r||l)&&c(n)}))}(e,l,s,a,u),function(e,n,o,i,r){const{useWebDavUpdates:l}=t;l(e,n,o,i,r,JQ(e))}(e,l,s,a,u);const d=function(e,n,o,i,r){const l=Dd(e),s=Dd(n),{useWebDavTimer:c,useWebDavDelete:a,calcOptionsSize:u,increaseWebDavSyncTransitionCount:d}=t,f=JQ(e),h=c(e),p=a(),v=(t,n,o)=>{t.stopPropagation();const i=bJ(e),r=_H(),l=u(i);jH("push",{route:FT.webdav,effect:{slide:"bottom",modal:!0,gesture:!0,blur:!0},style:{height:l+41-12+r,borderRadius:{topLeft:16,topRight:16}},payload:{item:JSON.stringify(n),type:"operation"}})};return F((()=>{const{increaseWebDavItem:e,assignFileCloud:n,syncWebDavStatus:c,decreaseWebDavItem:a,removeFileCloud:u,removeFileBranchProps:d,WebDavStatusIcon:v}=t,g=async t=>{var l,g,m,y,b,C,w,x,S;const E=s.current;if(t.type===kJ.WEBDAV_SUBMIT_FROM){const n=JSON.parse(t.payload);o(e(n)),setTimeout((async()=>{await f(t.payload,o,i,r)}))}else if(t.type===kJ.WEBDAV_SYNC_NOTE)await f(t.payload,o,i,r);else if(t.type===kJ.WEBDAV_UPDATE_FORM){const i=xJ(FT.workspace),r=JSON.parse(t.payload),s=null===(l=E.webdav)||void 0===l?void 0:l.list.find((e=>{var t,n;return(null===(t=e.selected)||void 0===t?void 0:t.id)===(null===(n=null==r?void 0:r.selected)||void 0===n?void 0:n.id)}));if(!(null==s?void 0:s.bind))return;const c={};void 0!==r.mode&&(c.mode=r.mode),void 0!==r.service&&(c.service=r.service),void 0!==r.username&&(c.username=r.username),void 0!==r.password&&(c.password=r.password),void 0!==r.usernameInvisible&&(c.usernameInvisible=r.usernameInvisible),void 0!==r.passwordInvisible&&(c.passwordInvisible=r.passwordInvisible);const a=null===(g=s.selected)||void 0===g?void 0:g.id,u=[e(r)];a&&u.push(n(a,r.id,c)),o(...u),UH({type:kJ.WEBDAV_SYNC_CLOUD,payload:{item:t.payload,syncing:!1}},i)}else if(t.type===kJ.WEBDAV_CHANGE_MODE){const e=JSON.parse(t.payload),{selected:n,id:l,bind:s}=e,c=null==n?void 0:n.id;if(c){const e=null===(b=null===(y=null===(m=r.stater.get().file)||void 0===m?void 0:m.cloud)||void 0===y?void 0:y[c])||void 0===b?void 0:b.find((e=>e.id===l));(null==e?void 0:e.timer)&&clearTimeout(e.timer),s&&requestAnimationFrame((()=>{h(c,o,i,r)}))}}else if(t.type===kJ.MORE_SYNC_NOTE){const{pageId:e}=t.payload,n=null===(C=E.webdav)||void 0===C?void 0:C.list.find((t=>{var n;return(null===(n=t.selected)||void 0===n?void 0:n.id)===e}));n&&await f(n,o,i,r)}else if(t.type===kJ.WORKSPACE_DETECT_WEBDAV||t.type===kJ.EDITOR_DETECT_WEBDAV)c(E,o,i,r,f);else if(t.type===kJ.WEBDAV_DELETE_ITEM||t.type===kJ.WORKSPACE_DELETE_ITEM||t.type===kJ.WORKSPACE_DELETE_WEBDAV){const e=JSON.parse(t.payload),{selected:n,id:l}=e,s=null==n?void 0:n.id;if(!s)return;const c=null===(S=null===(x=null===(w=r.stater.get().file)||void 0===w?void 0:w.cloud)||void 0===x?void 0:x[s])||void 0===S?void 0:S.find((e=>e.id===l));(null==c?void 0:c.timer)&&clearTimeout(c.timer),o(a(e,!0),u(n.id,l),d(n,{icon:v,syncing:!1,update:0})),t.type===kJ.WORKSPACE_DELETE_WEBDAV&&await p(e,o,i,r)}else t.type,kJ.WEBDAV_SYNC_FULLY},m=t=>{if(t){const t=l.current.item;if("string"==typeof t){const n=JSON.parse(t);o(e(n)),f(n,o,i,r)}}};return $H("message",g),$H("visibilityChange",m),()=>{ZH("message",g),ZH("visibilityChange",m)}}),[l,s,f,p,h,o,i,r]),{onClickItem:(e,t,n)=>{const o=zH();jH("push",{route:FT.webdav,effect:{slide:"right"},title:{text:"WebDAV",menus:["help"]},style:{backgroundColor:XK},payload:{type:"form",return:!0,uid:o,item:JSON.stringify(t)}})},onClickSync:(e,t,n)=>{e.stopPropagation()},onContextMenu:(e,t,n)=>{e.preventDefault(),bQ(),v(e,t)},onClickOperation:v,onClickNew:()=>{jH("push",{route:FT.webdav,effect:{slide:"right"},title:{text:"WebDAV",menus:["help"]},style:{backgroundColor:XK},payload:{type:"form",return:!0}})},onTransitionEnd:(e,t)=>{t.syncing&&o(d(t))}}}(e,l,s,a,u);return X("div",{style:WG,children:[G("div",{style:{...zG,paddingBottom:iG+c},className:"no-scrollbar",children:null===(n=l.webdav)||void 0===n?void 0:n.list.map(((e,t)=>{var n,i,r,l;let s=kf;return 1===e.status||-1===e.status&&(s="red"),X(ch,{style:$G,onContextMenu:n=>d.onContextMenu(n,e,t),onClick:n=>d.onClickItem(n,e,t),children:[X("div",{style:vX,children:[X("div",{style:mX,children:[G(ch,{style:bX,onClick:n=>d.onClickSync(n,e,t),children:G("span",{onTransitionEnd:t=>d.onTransitionEnd(t,e),style:{...yX,transform:`rotate(${360*(null!==(n=e.syncTransitionCount)&&void 0!==n?n:0)}deg)`},children:G(fO,{width:14,fill:kf})})}),G("div",{style:{position:"relative",bottom:1},children:G(o,{width:CJ(),node:null===(i=e.selected)||void 0===i?void 0:i.title})})]}),G(ch,{style:CX,onClick:n=>d.onClickOperation(n,e,t),children:G($M,{width:6.6,fill:Df})})]}),G("div",{style:{...gX,color:s},children:e.statusMessage}),X("div",{style:YG,children:[G("div",{style:JG,children:"服务器地址"}),G("div",{style:QG,children:e.service})]}),X("div",{style:KG,children:[X("div",{style:GG,children:[G("div",{style:JG,children:"用户名"}),G("div",{style:QG,children:e.usernameInvisible?G("div",{style:eX,children:"********"}):e.username})]}),X("div",{style:XG,children:[G("div",{style:JG,children:"同步模式"}),G("div",{style:QG,children:null===(r=e.mode)||void 0===r?void 0:r.text})]})]})]},null!==(l=e.id)&&void 0!==l?l:t)}))}),G("div",{style:{...ZG,marginBottom:c},children:G(pv,{style:UG,onClick:d.onClickNew,children:"新建 WebDAV"})})]})}function J1(e){var n;const{FontSizeReader:o}=t,i=bJ(e),r=function(e){const{keys:n,i18n:o,genID:i,transformNodeToText:r}=t;return{onClickMenu:t=>{var l;if(t.value===mJ.removeNote){const t=null===(l=JSON.parse(e.item).selected)||void 0===l?void 0:l.title;KH({title:"是否移除 WebDAV 配置？",subtitle:"移除配置不会移除云端文件",message:t?r(t):"笔记",width:320,cancel:{value:"取消",fontColor:yf},confirm:{value:"确认",fontColor:"red",action:()=>{jH("pop"),UH({type:kJ.WEBDAV_DELETE_ITEM,payload:e.item})}}})}else if(t.value===mJ.copyNote){jH("pop");const t=JSON.parse(e.item);t.bind=!1,t.selected=void 0,t.id=i(),jH("push",{route:FT.webdav,effect:{slide:"right"},title:{text:"WebDAV",menus:["help"]},style:{backgroundColor:XK},payload:{type:"form",return:!0,item:JSON.stringify(t)}})}else if(t.value===mJ.editNote)jH("pop"),jH("push",{route:FT.webdav,effect:{slide:"right"},title:{text:"笔记",menus:["help"]},style:{backgroundColor:XK},payload:{type:"form",return:!0,item:e.item}});else if(t.value===mJ.generateQRCode)jH("pop"),jH("push",{route:FT.webdav,effect:{slide:"bottom",modal:!0,gesture:!0,blur:!0},style:{height:350,borderRadius:{topLeft:16,topRight:16}},payload:{item:e.item,type:"qrcode"}});else if(t.value===n.syncNote)jH("pop"),UH({type:kJ.WEBDAV_SYNC_NOTE,payload:e.item});else if(t.value===n.syncFully){const t=o[e.lang][n.syncFully];KH({title:t,message:o[e.lang][n.syncFullyMessage],width:320,cancel:{value:"取消",fontColor:kf},confirm:{value:t,fontColor:yf,action:()=>{jH("pop"),UH({type:kJ.WEBDAV_SYNC_FULLY,payload:e.item})}}})}}}}(e),l={backgroundColor:QK},s=document.documentElement.clientWidth-24,c=JSON.parse(e.item);return X("div",{style:wX,children:[G("div",{style:pX,children:G(o,{fontSize:16,width:s,node:null===(n=null==c?void 0:c.selected)||void 0===n?void 0:n.title})}),G(mg,{style:l,contentStyle:{position:"relative",top:.3},options:i,onClick:r.onClickMenu})]})}function Q1(e){const{WebDavQRCode:n}=t,[o,i]=$("");return F((()=>{const{exportWebDavQRCode:n,QRCODE_SECRET_KEY:o}=t,r=n(JSON.parse(e.item)),l=XQ.encrypt(o,JSON.stringify(r));x0.toString(l,{type:"svg",width:200}).then(i)}),[e.item]),G("div",{style:xX,children:G(n,{qrcode:o})})}function e2(e){const{createWebDavModes:n}=t,o=function(e){return{onClickMenu:t=>{UH({type:kJ.WEBDAV_SELECT_MODE,payload:t.value},e.uid),jH("pop")}}}(e),i=[n().map((t=>{const n={name:t.text,value:t.value};return e.mode===t.value&&(n.rightIconType="check"),n}))];if(!(null==i?void 0:i.length))return null;const r={backgroundColor:QK};return X("div",{style:aX,children:[e.title&&G("div",{style:uX,children:e.title}),G(mg,{style:r,options:i,onClick:o.onClickMenu})]})}function t2(e){const[n,o]=Od((()=>function(e){return{loading:!1,item:JSON.parse(e.item),options:[]}}(e))),i=function(e,n){const{keys:o,i18n:i}=t;return{onClickMenu:t=>{var r,l;if(t.disable){const s=t.value;(null===(l=null===(r=n.cloud)||void 0===r?void 0:r[s.id])||void 0===l?void 0:l.length)&&KH({title:i[e.lang][o.syncAlready],message:i[e.lang][o.syncAlreadyMessage],confirm:{value:"确定",fontColor:yf}})}else UH({type:kJ.WEBDAV_SELECT_NOTE,payload:t.value},e.uid),jH("pop")}}}(e,n);!function(e,n,o){const i=Dd(e);F((()=>{const{getWebDavBootstrap:e}=t,n=JSON.parse(i.current.item);(async()=>{var t;const i=await oF();if(!i.data)return;const r=null===(t=i.data.file)||void 0===t?void 0:t.cloud;o(QJ({cloud:r})),o(eQ(i.data));const{service:l,username:s,password:c}=n;if(!(null==l?void 0:l.trim())||!(null==s?void 0:s.trim())||!(null==c?void 0:c.trim()))return;o(QJ({loading:!0}));const a=new xM(l,{username:s,password:c}),u=await e(a);o(QJ({loading:!1})),u&&!sc(u)&&o(eQ(u,!0))})()}),[i,o])}(e,0,o);const r={...dX};e.height&&(r.height=e.height);const l={backgroundColor:QK};return X($Q,{route:FT.webdav,className:"no-scrollbar",style:r,children:[e.title&&X("div",{style:fX,children:[e.title,n.loading&&G("div",{style:hX,children:G(NO,{width:15,fill:If})})]}),G(mg,{style:l,adaptive:!1,options:n.options,onClick:i.onClickMenu})]})}x0.create=U1.create,x0.toCanvas=K1.bind(null,q1.render),x0.toDataURL=K1.bind(null,q1.renderToDataURL),x0.toString=K1.bind(null,(function(e,t,n){return Y1.render(e,n)}));var n2=Object.freeze({__proto__:null,About:function(e){const{fetchPricing:n,fetchPlan:o,fetchFeedback:i,fetchChangelog:r,fetchUserAgreement:l,fetchPrivacyPolicy:s}=t,c={fill:kf,width:13.5,style:{position:"relative",top:-.5}},a={fill:kf,width:13.5,style:{position:"relative",top:-.5,left:1}},u=[[{name:gJ[e.lang][vJ.home],value:vJ.home,icon:G(kO,{...c}),rightIconType:"arrow"},{name:gJ[e.lang][vJ.pricing],value:vJ.pricing,icon:G(IO,{...c}),rightIconType:"arrow"}],[{name:gJ[e.lang][vJ.plan],value:vJ.plan,icon:G(yO,{...c,width:14.5}),rightIconType:"arrow"},{name:gJ[e.lang][vJ.feedback],value:vJ.feedback,icon:G(mO,{...c,width:13.5}),rightIconType:"arrow"},{name:gJ[e.lang][vJ.changelog],value:vJ.changelog,icon:G(gO,{...c,width:12.5}),rightIconType:"arrow"}],[{name:gJ[e.lang][vJ.userAgreement],value:vJ.userAgreement,icon:G(HR,{...a}),rightIconType:"arrow"},{name:gJ[e.lang][vJ.privacyPolicy],value:vJ.privacyPolicy,icon:G(_R,{...a,width:14}),rightIconType:"arrow"}]],d=window.localStorage.getItem("version");return X(pJ,{style:DG,children:[X("div",{style:IG,children:[X("div",{style:NG,children:[G("div",{style:LG,children:G(AM,{width:44})}),X("div",{style:BG,children:["V",d," 版本"]})]}),G(mg,{options:u,onClick:async e=>{var t,c,a,u,d,f,h,p,v,g,m,y;if(e.value===vJ.home)jH("push",{route:FT.official,effect:{slide:"right"},title:{text:e.name,menus:["more"]},style:{backgroundColor:JK}});else if(e.value===vJ.pricing){const o=await n(),i=null===(c=null===(t=null==o?void 0:o.bootstrap)||void 0===t?void 0:t.file)||void 0===c?void 0:c.currentPageId;if(!i)return;jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(o),page:{id:i},branch:{type:"page",id:i},pageId:i},title:{text:e.name},style:{backgroundColor:JK}})}else if(e.value===vJ.plan){const t=await o(),n=null===(u=null===(a=null==t?void 0:t.bootstrap)||void 0===a?void 0:a.file)||void 0===u?void 0:u.currentPageId;if(!n)return;jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(t),page:{id:n},branch:{type:"page",id:n},pageId:n},title:{text:e.name},style:{backgroundColor:JK}})}else if(e.value===vJ.feedback){const t=await i(),n=null===(f=null===(d=null==t?void 0:t.bootstrap)||void 0===d?void 0:d.file)||void 0===f?void 0:f.currentPageId;if(!n)return;jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(t),page:{id:n},branch:{type:"page",id:n},pageId:n},title:{text:e.name},style:{backgroundColor:JK}})}else if(e.value===vJ.changelog){const t=await r(),n=null===(p=null===(h=null==t?void 0:t.bootstrap)||void 0===h?void 0:h.file)||void 0===p?void 0:p.currentPageId;if(!n)return;const o=document.documentElement.clientHeight;jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(t),page:{id:n},branch:{type:"page",id:n},pageId:n,threshold:2*o},title:{text:e.name},style:{backgroundColor:JK}})}else if(e.value===vJ.update)qH("store://appgallery.huawei.com/app/detail?id=com.codeartel.slinote");else if(e.value===vJ.userAgreement){const t=await l(),n=null===(g=null===(v=null==t?void 0:t.bootstrap)||void 0===v?void 0:v.file)||void 0===g?void 0:g.currentPageId;if(!n)return;jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(t),page:{id:n},branch:{type:"page",id:n},pageId:n},title:{text:e.name},style:{backgroundColor:JK}})}else if(e.value===vJ.privacyPolicy){const t=await s(),n=null===(y=null===(m=null==t?void 0:t.bootstrap)||void 0===m?void 0:m.file)||void 0===y?void 0:y.currentPageId;if(!n)return;jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(t),page:{id:n},branch:{type:"page",id:n},pageId:n},title:{text:e.name},style:{backgroundColor:JK}})}}})]}),G("div",{style:TG,children:G(ch,{onClick:()=>{qH("https://beian.miit.gov.cn")},children:"京ICP备2024056012号-2A"})})]})},AddTools:u0,Cloud:function(e){return G(pJ,{children:X("div",{style:AG,children:[X("div",{style:MG,children:[G("div",{style:{marginBottom:10},children:"官方云存储暂未上线"}),G("div",{children:"欢迎使用 WebDAV 存储服务"})]}),G(pv,{style:OG,onClick:()=>{jH("replace",{route:FT.webdav,effect:{slide:"right"},title:{text:"WebDAV",menus:["help"]},style:{backgroundColor:XK},payload:{type:"form"}})},children:"使用 WebDAV 存储"})]})})},ColorTools:h0,Editor:w0,Float:function(e){const[n,o]=Od((()=>({}))),i=Z(null);!function(e,n,o){H((()=>{const{mapFloatBranchToFloatState:i}=t;(async()=>{const t=await hF(e.pageId);if(1===t.ok&&t.data){const r=o.current.getBoundingClientRect(),l={...t.data,float:{width:r.width,height:r.height}},s=i(l,e.pageId,0,!0);n($J(s),ZJ(e.pageId))}})()}),[e.pageId,n,o])}(e,o,i);const r=function(e){return _(((n,o)=>{var i;const{FontSizeReader:r}=t,{title:l}=n;if(!o0(l))return l;const s=null!==(i=n.level)&&void 0!==i?i:0;let c=e.current.clientWidth-14*s-30;return"root"===n.type&&(c-=20),G(r,{node:l,width:c})}),[e])}(i),l={};if(Uf){const e=_H();e>0&&(l.marginBottom=e)}return G(pJ,{back:!1,style:IX,children:G("div",{style:{...NX,...l},ref:i,children:n.value&&G(ST,{showDot:!0,showMore:!1,showScrollBar:!1,style:LX,activeStyle:{backgroundColor:yf,color:"#fff"},value:n.value,render:r,onChange:e=>{o($J(e))},onClickArrow:e=>{o(((e,t)=>n=>n.value?(n.value=zJ(e,t)(n.value),n.value.isEditPending=!0,n):n)(e))},onClickBranch:e=>{o(ZJ(e));const t=xJ(FT.editor);t&&UH({type:kJ.FLOAT_ANCHOR_BRANCH,payload:SQ(e)},t)}})})})},FontFamilyTools:v0,FontSizeTools:p0,Header:r0,Help:function(e){const{Reader:n}=t,[o,i]=Od((()=>jQ())),r={imperator:{file:Z(null)}};!function(e,n,o){const i=Dd(e);H((()=>{const{fetchHelper:e}=t;e(!0).then((e=>{e&&o(YJ(e))}))}),[o]),F((()=>{const e=vu(window,"resize").pipe(Lu(0,Ha)).subscribe((()=>{const{client:e}=jQ(i.current);o(qJ(e.width,e.height))}));return()=>e.unsubscribe()}),[o,i])}(e,0,i);const{onClickBranch:l,onClickSearchBranch:s}=function(e,n,o,i){const{quote:r,transformNodeToText:l,getPageableBranch:s,collectStoreNote:c,getBranchByID:a}=t;return F((()=>{const e=e=>{var t,n,o,r,l;if(e.route===FT.help){const e=null===(t=i.imperator.file.current)||void 0===t?void 0:t.search;if(null===(o=null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.getSearchText)||void 0===o?void 0:o.call(n))return bQ("haptic.effect.soft"),void(null===(l=null===(r=null==e?void 0:e.current)||void 0===r?void 0:r.clear)||void 0===l||l.call(r))}jH("pop")};return $H("backPress",e),()=>{ZH("backPress",e)}}),[i.imperator.file]),{onClickBranch:async(e,t,n)=>{var o,i,a,u;const d=null===(o=null==n?void 0:n.file)||void 0===o?void 0:o.tree;if(!(null==d?void 0:d.length))return;const f=s(d,e),h=l(null!==(i=null==f?void 0:f.title)&&void 0!==i?i:null),p=await c(f.id,null==n?void 0:n.store);if("指南"===h){const e=null===(a=p.editor)||void 0===a?void 0:a[f.id];if(e){const t=e.data.children[1];qQ(t)&&(null===(u=t.props)||void 0===u?void 0:u.type)===r.name&&e.data.children.splice(1,1)}}jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(p),page:SQ(f),branch:SQ(e),pageId:t},title:{text:h,menus:[]}})},onClickSearchBranch:async(e,t,n)=>{var o,i;const r=null===(o=null==n?void 0:n.file)||void 0===o?void 0:o.tree;if(!(null==r?void 0:r.length))return;const s=a(r,t);if(!s)return;const u=l(null!==(i=null==s?void 0:s.title)&&void 0!==i?i:null),d=await c(t,null==n?void 0:n.store);jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:JSON.stringify(d),page:SQ(s),branch:SQ(e),pageId:t,search:!0},title:{text:u,menus:[]}})}}}(0,0,0,r);return G(pJ,{style:FG,children:o.note&&G(n,{showFile:!0,showEditor:!1,client:o.client,note:o.note,lang:e.lang,fileRef:r.imperator.file,leafStyle:{paddingLeft:36},onClickBranch:l,onClickSearchBranch:s})})},INPUT_BACKGROUND_COLOR:rG,ImageTools:d0,InnerTools:a0,LetterSpacingTools:g0,LineHeightTools:m0,ListTools:f0,MODAL_MARGIN:nG,get MessageType(){return kJ},More:function(e){const n=Z({}),o=Z(null),i={prevent:Z(!1)},[r,l]=Od((()=>function(e){var n,o,i;const{genetateMobileOptions:r,createEditorState:l,FOCUS_FIELD:s}=t,{transformNodeToEditNode:c}=ek;let a=r(e,e.branch,e.editor,e.editable,e.expandable,e.collapseable);if(e.value){const t=wi(a);for(;t.length;){const i=t.shift();if(!i)break;if(i.value===e.value){a=[null!==(n=i.children)&&void 0!==n?n:[]];break}(null===(o=i.children)||void 0===o?void 0:o.length)&&t.push(...i.children)}}const u=e.branch.title,d=l({selection:void 0,selectionDecorate:void 0,node:u&&c(u,"")}),f={...e,editor:d,virtual:!1,editable:!1,focus:{type:s.EDITOR}},h=document.documentElement.clientWidth,p=document.documentElement.clientHeight;return{client:{width:h,height:null!==(i=e.height)&&void 0!==i?i:p},title:u,options:a,editorContext:f}}(e)));!function(e,t){F((()=>{const n=()=>{var n;(null===(n=t.prevent)||void 0===n?void 0:n.current)||UH({type:kJ.MORE_BEFORE_DESTROY},e.uid)};return $H("beforeDestroy",n),()=>{ZH("beforeDestroy",n)}}),[e.uid,t.prevent])}(e,i);const{EditorContext:s,keys:c,RootPortal:a,RootProps:u,RootTraversal:d,calcOptionsSize:f,transformNodeToText:h}=t;let p=G(QM,{width:13});"outline"===e.branch.type&&(p=null);const v=document.documentElement.clientWidth-24,{profile:g,name:m}=e,{editorContext:y,title:b,options:C}=r,w={...ZK,...r.client},x={backgroundColor:QK},S=e.scroller?$Q:"div";return G(u,{value:e,children:G(a,{value:o,children:G(d,{value:n,children:G(s,{value:y,children:X(S,{route:FT.more,className:"no-scrollbar",style:w,children:[G(r0,{icon:p,title:b,width:v,name:m}),g?G(VQ,{...e}):G(mg,{style:x,options:C,onClick:async t=>{var n,o,r,l;if(null===(n=t.children)||void 0===n?void 0:n.length){const n=[t.children];let o=f(n)+30-12+40+_H(),r=!0;const l=document.documentElement.clientHeight;return o+GK>l&&(o=l-GK,r=!1),i.prevent.current=!0,jH("pop"),void jH("push",{route:FT.more,effect:{slide:"bottom",modal:!0,gesture:r,blur:!0},style:{height:o,borderRadius:{topLeft:16,topRight:16}},payload:{...e,height:o,scroller:!r,value:t.value,name:t.name}})}if(t.value===c.profile){const n=210;return i.prevent.current=!0,jH("pop"),void jH("push",{route:FT.more,effect:{slide:"bottom",modal:!0,gesture:!0,blur:!0},style:{height:n,borderRadius:{topLeft:16,topRight:16}},payload:{...e,height:n,scroller:!1,profile:!0,name:t.name}})}if(t.value===c.move){let n=window.screen.height;const o=function(){if("undefined"!=typeof WebPro)return WebPro.getWindowProperties()}();if(o&&(n=o.windowRect.height/window.devicePixelRatio),n>2*window.screen.height/3){n-=_H()+15+48+38}else n-=GK;return i.prevent.current=!0,jH("pop"),void jH("push",{route:FT.moving,effect:{slide:"bottom",modal:!0,blur:!0},payload:{pageId:e.pageId,branch:e.branch,name:t.name,uid:e.uid},style:{height:n,borderRadius:{topLeft:16,topRight:16}}})}if(t.value===c.syncNote)return UH({type:kJ.MORE_SYNC_NOTE,payload:{pageId:e.pageId}}),void jH("pop");if(t.value===c.rename){const t=xJ(FT.workspace);if(!t)return;return UH({type:kJ.MORE_RENAME_BRANCH,payload:{branch:e.branch,pageId:e.pageId}},t),void jH("pop")}if(t.value===c.float){const t=e.branch.title,n=t?h(t):"",o=document.documentElement.clientWidth;return jH("pop"),void jH("push",{route:FT.float,effect:{slide:"right",modal:!0,gesture:!0,blur:!0},title:{text:n,back:!1},style:{width:Math.min(400,3*o/4)},payload:{pageId:e.branch.id}})}if(t.value===c.search){const t=e.branch.title,n=t?h(t):"",o=document.documentElement.clientWidth;return jH("pop"),void jH("push",{route:FT.search,effect:{slide:"right",modal:!0,gesture:!0,blur:!0},title:{text:n,back:!1},style:{width:Math.min(400,3*o/4)},payload:{pageId:e.branch.id}})}if(t.value===c.readonly)return UH({type:kJ.MORE_READONLY_BRANCH,payload:{branch:e.branch,pageId:e.pageId,readonly:!0}},e.uid),void jH("pop");if(t.value===c.editable)return UH({type:kJ.MORE_READONLY_BRANCH,payload:{branch:e.branch,pageId:e.pageId,readonly:!1}},e.uid),void jH("pop");if(t.value===c.expandNote){const t=xJ(FT.workspace);if(!t)return;return UH({type:kJ.MROE_TOGGLE_BRANCH,payload:{branch:e.branch,pageId:e.pageId,toggle:!0}},t),void jH("pop")}if(t.value===c.collapsedNote){const t=xJ(FT.workspace);if(!t)return;return UH({type:kJ.MROE_TOGGLE_BRANCH,payload:{branch:e.branch,pageId:e.pageId,toggle:!1}},t),void jH("pop")}if(t.value===c.duplicate){const t=xJ(FT.workspace);if(!t)return;return UH({type:kJ.MORE_DUPLICATE_BRANCH,payload:{branch:e.branch,pageId:e.pageId}},t),void jH("pop")}if(t.value===c.insertNote){const t=xJ(FT.workspace);if(!t)return;return UH({type:kJ.MROE_INSERT_NOTE,payload:{branch:e.branch,pageId:e.pageId}},t),void jH("pop")}if(t.value!==c.delete){if(t.value===c.imarkdown){const t=await XH({fileSuffixFilters:[".md"]});if(!(null==t?void 0:t[0]))return;return UH({type:kJ.MORE_IMPORT_MARKDOWN,payload:{branch:e.branch,pageId:e.pageId,filepaths:t}},e.uid),void jH("pop")}if(t.value===c.ijson){const t=await XH({fileSuffixFilters:[".sli"]});if(!(null==t?void 0:t[0]))return;return t[0].endsWith(".sli")?(UH({type:kJ.MORE_IMPORT_SLI,payload:{branch:e.branch,pageId:e.pageId,filepaths:t}},e.uid),void jH("pop")):void YH({message:"文件格式不正确"})}if(t.value===c.ejson){const t=e.branch.title;if(!t)return;const n=h(t),o=await JH({newFileNames:[n],fileSuffixChoices:[".sli"]});if(!(null==o?void 0:o[0]))return;const i=xJ(FT.workspace);return UH({type:kJ.MORE_EXPORT_SLI,payload:{branch:e.branch,pageId:e.pageId,filepaths:o}},i),void jH("pop")}if(t.value===c.emarkdown){const t=xJ(FT.workspace);return UH({type:kJ.MORE_EXPORT_MARKDOWN,payload:{branch:e.branch,pageId:e.pageId}},t),void jH("pop")}if(t.value===c.ehtml){const t=xJ(FT.workspace);return UH({type:kJ.MORE_EXPORT_HTML,payload:{branch:e.branch,pageId:e.pageId}},t),void jH("pop")}if(t.value===c.eapplication){const t=xJ(FT.workspace);return UH({type:kJ.MORE_EXPORT_APPLICATION,payload:{branch:e.branch,pageId:e.pageId}},t),void jH("pop")}t.value===c.ihtml&&KH({title:"开发中",message:"正在开发，敬请期待",width:320,confirm:{value:"确认",fontColor:yf}}),jH("pop")}else{const{title:t,type:n,id:i}=e.branch,s=xJ(FT.workspace);if(!s)return;const c=t=>{UH({type:kJ.MORE_DELETE_BRANCH,payload:{branch:e.branch,pageId:e.pageId,deleteCloud:t}},s)};if(t&&"outline"!==n){let s=!1;const a={title:"是否删除此"+("page"===n?"文件":"笔记空间"),message:null!==(o=h(t))&&void 0!==o?o:"无标题",width:320,cancel:{value:"取消",fontColor:yf},confirm:{value:"确认",fontColor:"red",action:()=>{jH("pop"),c(s)}}};"root"===n&&(null===(l=null===(r=e.file)||void 0===r?void 0:r.cloud)||void 0===l?void 0:l[i])&&(a.checkTips="同时删除云端空间",a.onCheckedChange=e=>{s=e}),KH(a)}else c();jH("pop")}}})]})})})})})},Moving:function(e){var n;const{FOCUS_FIELD:o,setNoDraft:i,initState:r,useWorker:l,useAdvisor:s,EditorContext:c,RootPortal:a,RootProps:u,RootTraversal:d}=t;let f=G(QM,{width:13});"outline"===e.branch.type&&(f=null);const[h,p]=Od((()=>r(e)),i()),v=Z({}),g=Z(null),m=function(e){const t=Z(!1),n=Nd("touchstart"),o=Nd("touchmove"),i=Nd("touchend"),r=Nd("touchcancel");return F((()=>{const e=e=>{const n=zH();n&&(e&&!t.current?(t.current=!0,jH("update",{uid:n,route:FT.moving,effect:{slide:"bottom",modal:!0,gesture:!0}})):!e&&t.current&&(t.current=!1,jH("update",{uid:n,route:FT.moving,effect:{slide:"bottom",modal:!0}})))},l=n.subscribe((t=>{t.stopPropagation(),e(!1)})),s=o.subscribe((t=>{t.stopPropagation(),e(!0)})),c=i.subscribe((t=>{t.stopPropagation(),e(!1)})),a=r.subscribe((t=>{t.stopPropagation(),e(!1)}));return()=>{l.unsubscribe(),s.unsubscribe(),c.unsubscribe(),a.unsubscribe()}}),[n,o,i,r]),F((()=>{const t=()=>{UH({type:kJ.MOVING_BEFORE_DESTROY},e.uid)};return $H("beforeDestroy",t),()=>{ZH("beforeDestroy",t)}}),[e.uid]),{moving:Ld([n,o,i,r])}}(e),y=l(e,h,p),b=s(e,h,p,y);!function(e,n,o,i,r){const l=Dd(e);H((()=>{const{syncFileState:e,injectFile:n,clearStoreCURD:r}=t;!async function(){const t=l.current,s=await oF(),{data:c}=s;(null==c?void 0:c.file)&&(o(e(c.file,!0),r()),await n(t,c.file,i,o))}()}),[o,l,r,i])}(e,0,p,y,b);const C=null===(n=h.file)||void 0===n?void 0:n.tree;if(!h.store||!(null==C?void 0:C.length))return null;const{clientWidth:w,clientHeight:x}=document.documentElement,S=w-24,E={...BX,width:w,height:x},k={};if(Uf){const e=_H();e>0&&(k.marginBottom=e)}const D={style:{width:w-24,height:x-84},...e,...h,virtual:!0,focus:{type:o.EDITOR},editable:!1,ScrollView:e=>G($Q,{...e,route:FT.moving}),onClickBranch(t,n){const o=xJ(FT.workspace);if(o)return n||"root"!==t.type||(n=t.id),UH({type:kJ.MORE_MOVING_BRANCH,payload:{origin:SQ(e.branch),originPageId:e.pageId,target:SQ(t),targetPageId:n}},o),jH("pop"),!0}},I=e.branch.title;return G(u,{value:e,children:G(a,{value:g,children:G(d,{value:v,children:G(c,{value:D,children:X("div",{style:E,...m.moving,children:[G(r0,{icon:f,title:I,width:S,name:e.name}),G("div",{style:{...TX,...k},children:G(h2,{...D})})]})})})})})},NAVIGATE_BACKGROUND_LIGHT:XK,NAVIGATE_BACKGROUND_WHITE:JK,NAVIGATE_MODAL_COLOR:QK,NAVIGATE_SIZE:GK,NavigateView:pJ,Profile:VQ,Reader:function(e){const{transformNodeToText:n,transformNodeToBranch:o}=t;return G(w0,{editable:!1,reader:!0,...e,onOpen:t=>{var i,r;if(!e.snote)return;const l=JSON.parse(e.snote),s=null===(r=null===(i=l.editor)||void 0===i?void 0:i[t])||void 0===r?void 0:r.data;if(!s)return void YH({message:"文档不存在"});const c=o(s,l.reference),a=c.title?n(c.title):"";jH("push",{route:FT.reader,effect:{slide:"right"},payload:{snote:e.snote,page:SQ(c),branch:SQ(c),pageId:t},title:{text:a,menus:[]}})}})},ScrollView:$Q,Search:function(e){const{initState:n,setNoDraft:o,useWorker:i,useAdvisor:r,Search:l,RootDispatch:s,RootState:c,RootProps:a,RootAdvisor:u,RootWorker:d}=t,[f,h]=Od((()=>n(e)),o()),[p,v]=Od((()=>({refresh:pRe(!0),autoFocus:!1,width:document.documentElement.clientWidth/2,height:document.documentElement.clientHeight}))),g=Z(null),m=i(e,f,h),y=r(e,f,h,m),b={onClickBranch:(e,t)=>{const n=xJ(FT.editor);UH({type:kJ.SEARCH_ANCHOR_EDITOR,payload:{branch:e,pageId:t}},n)},onDoubleClickBranch:(e,t)=>{const n=xJ(FT.editor);UH({type:kJ.SEARCH_FOCUS_EDITOR,payload:{branch:e,pageId:t}},n),jH("pop")},onClickReplace:(e,t)=>{const n=xJ(FT.editor);UH({type:kJ.SEARCH_REPLACE_EDITOR,payload:JSON.stringify({branch:e,pageId:t})},n)}};!function(e,t,n,o,i,r,l,s){H((()=>{setTimeout((()=>{const e=s.current.getBoundingClientRect();i(UJ(e.width,e.height)),e_({enterKeyType:6})}))}),[s,i]),H((()=>{l.safty(e.pageId)}),[e.pageId,l])}(e,0,0,0,v,0,y,g);const C={};if(Uf){const e=_H();e>0&&(C.marginBottom=e)}const{refresh:w,width:x,height:S,autoFocus:E,value:k}=p;return G(s,{value:h,children:G(c,{value:f,children:G(a,{value:e,children:G(u,{value:y,children:G(d,{value:m,children:G(pJ,{back:!1,style:lJ,children:G("div",{style:{...sJ,...C},ref:g,children:G(l,{width:x,height:S,value:k,autoFocus:E,pageId:e.pageId,placeholder:"查找",replaceholder:"替换",onClickBranch:b.onClickBranch,onDoubleClickBranch:b.onDoubleClickBranch,onClickReplace:b.onClickReplace},w)})})})})})})})},Selector:function(e){const t=oQ(),{isWhite:n}=Zv,o=t=>{const n=xJ(FT.editor),o=xJ(FT.tools);jH("pop"),UH({type:kJ.TOOLS_EDITOR_ACTION,payload:{name:e.name,value:t}},n),e.prevent||(UH({type:kJ.TOOLS_SHOW_KEYBOARD},n),UH({type:kJ.TOOLS_HIDE_UPPER},n),UH({type:kJ.SELECTOR_CLEAR_ACTIVITY},o))};if(e.name===t.fillColor||e.name===t.highlightColour||e.name===t.textColor||e.name===t.borderColor&&"more"===e.value){const i=hQ(e);return G("div",{style:cJ,children:i.slice().reverse().map(((i,r)=>{let l=e.text;const s={...uJ};return e.name===t.textColor?(s.color=i,s.background=`linear-gradient(45deg, #ffffff 0%, ${i} 100%)`):(s.color="#ffffff",s.backgroundColor=i),n(i)&&(l="白色",s.fontWeight=600,s.background=lG),X(ch,{style:s,onClick:()=>o(i),children:[l,i===e.value&&G("span",{style:dJ,children:G(TO,{width:16,fill:"#fff"})})]},r)}))})}if(e.name===t.sheetInsertTop||e.name===t.sheetInsertBottom||e.name===t.sheetInsertLeft||e.name===t.sheetInsertRight){const t=pQ(e);return G("div",{style:cJ,children:t.slice().map((({text:e,value:t},n)=>{const i={...uJ};return G(dv,{colors:aG,style:i,onClick:()=>o(t),children:e},n)}))})}if(e.name===t.borderColor){const n=lQ(),i=n=>{var o;const i=null!==(o=e.height)&&void 0!==o?o:window.screen.availHeight;jH("pop"),jH("push",{route:FT.selector,effect:{slide:"bottom",modal:!0,musk:!0,gesture:!0,blur:10},style:{height:i,borderRadius:{topLeft:16,topRight:16}},payload:{...n,name:t.borderColor,value:"more",prevent:e.prevent}})};return G("div",{style:cJ,children:G("div",{style:aJ,children:n.map(((e,t)=>{let n=String(e.value),r=e.text;const l={...UX,background:lG},s=e.value?n:lG;return l.background=s,X(ch,{style:l,onClick:()=>o(n),children:[G("span",{style:{...tJ,color:"#ffffff"},children:r}),G(dv,{style:iJ,onClick:t=>{t.stopPropagation(),i({...e,value:n})},children:G(RO,{fill:"#ffffff"})}),G("div",{style:{...nJ,border:"1px solid transparent"}})]},t)}))})})}return null},Setting:function(e){const n=FQ(e),o=function(e){const{keys:t}=OQ;return{onClickMenu:async e=>{var n;if(e.value===t.help)jH("push",{route:FT.help,effect:{slide:"right"},title:{text:e.name},style:{backgroundColor:JK}});else if(e.value===t.about)jH("push",{route:FT.about,effect:{slide:"right"},title:{text:e.name},style:{backgroundColor:XK}});else if(e.value===t.webdav){const t=await oF();if(0===t.ok||!t.data)return;const o={route:FT.webdav,effect:{slide:"right"},style:{backgroundColor:XK}},i=WH(!0);!Sc(null===(n=t.data.file)||void 0===n?void 0:n.cloud)||(null==i?void 0:i.some((e=>e.aliveId===FT.webdav)))?(o.alive=!0,o.aliveId=FT.webdav,o.payload={type:"list"},o.title={text:e.name}):(o.payload={type:"form"},o.title={text:e.name,menus:["help"]}),jH("push",o)}else"cloud"===e.value&&jH("push",{route:FT.cloud,effect:{slide:"right"},title:{text:e.name},style:{backgroundColor:JK}})}}}();return function(e){F((()=>{const{initWebDavState:e}=t;!async function(){var t;const n=await oF();if(1!==n.ok||!(null===(t=n.data)||void 0===t?void 0:t.file))return;const{list:o}=e(n.data.file,!0);o.length&&jH("prepare",{route:FT.webdav,alive:!0,aliveId:FT.webdav,payload:{type:"list"}})}()}),[e.lang])}(e),X("div",{style:bG,children:[G("div",{style:CG,children:X("div",{style:wG,children:[G("div",{style:xG,children:G(AM,{})}),G("div",{style:SG,children:"书立"})]})}),G(mg,{options:n,onClick:o.onClickMenu})]})},Share:function(e){const t=Z(null),n={fill:kf,style:{position:"relative",top:-.5}},o=[[{name:yJ[e.lang][mJ.copyLink],value:mJ.copyLink,icon:G(lO,{...n,width:14}),rightIconType:"arrow"},{name:yJ[e.lang][mJ.openFromBrowser],value:mJ.openFromBrowser,icon:G(PO,{...n,width:15}),rightIconType:"arrow"}]];return X("div",{style:RG,children:[G(mg,{style:{backgroundColor:QK},options:o,onClick:n=>{var o,i;n.value===mJ.copyLink?(null===(o=t.current)||void 0===o||o.select(),document.execCommand("copy",!0),null===(i=t.current)||void 0===i||i.blur(),YH({message:"链接已复制到剪贴板"})):n.value===mJ.openFromBrowser&&qH(e.url),jH("pop")}}),G("input",{style:PG,value:e.url,ref:t})]})},SheetBorderTools:b0,SheetInsertTools:y0,SheetMoreTools:C0,StatusView:l0,TOOLS_HEIGHT:eG,TOOLS_UPPER_DIFF:tG,TOOL_ACTIVE_COLOR:sG,TOOL_BACKGROUND_COLOR:lG,TOOL_HOVER_COLOR:cG,TOUCH_BACKGROUND_COLORS:uG,TOUCH_LIGHT_COLORS:aG,Tools:function(e){var t,n,o;const[i,r]=Od((()=>function(e){let t="edit";const{gfocus:n}=e;return n&&wHe(n)&&(t="sheet"),{tools:HQ(),type:t}}(e))),l=YQ(e,i,r),s=oQ(),c=null===(t=i.tools)||void 0===t?void 0:t.filter((e=>e.name!==s.sheet||"sheet"===i.type));return G(s0,{value:r,children:X("div",{style:MX,children:[X(Mh,{style:OX,type:"top",children:[G("div",{className:"no-scrollbar",style:RX,children:null==c?void 0:c.map(((e,t)=>{const n={...PX};return e.active&&(n.backgroundColor=lG),G(dv,{touchDelay:0,colors:uG,style:n,onClick:()=>l.onClickHeadTool(e),children:G(e.outer,{...e})},e.name)}))}),G(dv,{colors:uG,touchDelay:0,style:FX,onClick:l.onClickKeyboard,children:(null===(n=i.inner)||void 0===n?void 0:n.active)?G(_O,{fill:kf,width:18.5}):G(HO,{fill:kf,width:18.5})})]}),G(a0,{...e,...i,name:null===(o=i.inner)||void 0===o?void 0:o.name})]})})},UpperTools:c0,WEBDAV_LIST_MARGIN:oG,WEBDAV_SUBMIT_HEIGHT:iG,WebDav:function(e){const n="form"===e.type?["help"]:[],o=function(){const{fetchWebDAVTourist:e}=t;return{onClickMenu:async t=>{var n,o;if("help"===t){const t=await e(),i=null===(o=null===(n=null==t?void 0:t.bootstrap)||void 0===n?void 0:n.file)||void 0===o?void 0:o.currentPageId;if(!i)return;jH("push",{route:FT.reader,effect:{slide:"right"},title:{text:"WebDAV 使用教程"},style:{backgroundColor:JK},payload:{snote:JSON.stringify(t),page:{id:i},branch:{type:"page",id:i},pageId:i}})}}}}();return"mode"===e.type?G(e2,{...e}):"operation"===e.type?G(J1,{...e}):"space"===e.type?G(t2,{...e}):"qrcode"===e.type?G(Q1,{...e}):G(pJ,{style:HG,menus:n,onClickMenu:o.onClickMenu,children:X("div",{style:_G,children:["form"===e.type&&G(G1,{...e}),"list"===e.type&&G(X1,{...e})]})})},WorkSpace:function(e){const{RootDispatch:n,RootState:o,RootProps:i,RootAdvisor:r,RootWorker:l,File:s,initState:c,setNoDraft:a,useWorker:u,useAdvisor:d,FOCUS_FIELD:f}=t,[h,p]=Od((()=>c(e)),a()),v=u(e,h,p),g=d(e,h,p,v),m={imperator:{nav:Z(null),note:Z(null),file:Z(null)},inited:Z(!1),storend:Z(null)};i0(e),function(e,n,o){const i=Dd(n);F((()=>{const{getFileClientHeight:e,resizeFile:n,resizeClient:r,initClientState:l}=t,s=vu(window,"resize").pipe(Lu(0,Ha)).subscribe((()=>{const t=i.current,s=l(),c=s.width-AQ,a=e(t);o(n(c,a)),o(r(s.width,s.height))}));return()=>s.unsubscribe()}),[o,i])}(0,h,p),e0(e,h,p,v,g,m);const y=function(e,n,o,i,r,l){const s=Dd(e),c=Dd(n),{keys:a,setNavActive:u}=OQ,{genID:d,outline:f,getBranchByID:h,transformNodeToText:p,getPageableBranch:v,calcOptionsSize:g,setFileBranch:m,setFileTreeNoDraft:y,genetateMobileOptions:b}=t;return F((()=>{const{setStoreCatalog:e,replaceFileBranch:n,readonlyFileBranch:a,expandFileBranch:u,collapsedFileBranch:d,fetchBranch:f,getNextBranch:h,getPrevBranch:p,deleteNote:v,moveNote:g,addAuthDelete:m,duplicateNote:y,insertNoteSpace:b,scrollToBranchById:C,scrollToLastBranch:w,refreshFileBranch:x,setFileTreeNoDraft:S,fetchBranchSource:E,deactivateFileBranch:k,resetChangelog:D,setFileScrollActive:I,transformMarkdown:N,setFileBranchRename:L,importMarkdown:B,exportJSON:T,exportMarkdown:A,exportHTML:M,exportApplication:O,loadNote:R,saftyRootBranch:P,clearFileCloudBind:F,setFileCloud:H,assignWebDavItem:_,clearFileTreeStatus:j,assignFileCloud:W,assignFileBranchProps:z,adjustKeyboardScrollTop:V,WebDavStatusIcon:$,filterBindCloud:Z,decreaseWebDavItem:U,removeFileCloud:q,removeFileBranchProps:Y,initWebDavState:K,filterWebDavItem:G}=t,X=async t=>{var j,V,X,J,Q,ee,te,ne,oe,ie,re;const le=s.current,se=c.current,ce=se.file;if(ce)if(t.type===kJ.EDITOR_REFRESH_WORKSPACE||t.type===kJ.WEBDAV_REFRESH_WORKSPACE){const e=t.payload;if(!e)return;const{update:n,create:i}=e,l=Zc([...null!==(j=null==n?void 0:n.catalog)&&void 0!==j?j:[],...null!==(V=null==n?void 0:n.editor)&&void 0!==V?V:[],...null!==(X=null==i?void 0:i.catalog)&&void 0!==X?X:[],...null!==(J=null==i?void 0:i.editor)&&void 0!==J?J:[]]);if(!l.length)return;const s=await pF(l);if(1===s.ok&&s.data)for(const{id:e}of ce.tree)o(S(x(e,s.data)));for(const e of l)await r.refresh(e)}else if(t.type===kJ.EDITOR_BEFORE_DESTROY||t.type===kJ.MORE_BEFORE_DESTROY||t.type===kJ.MOVING_BEFORE_DESTROY)setTimeout((()=>{o(S(k()))}),80);else if(t.type===kJ.MORE_READONLY_BRANCH){const r=EQ(ce,t.payload);if(!r)return;const{branch:l,readonly:s}=r,c=await f(l,i,{deep:!0}),u=[n(c,l.path),a(l,s),e(l,void 0,!0)];o(...u)}else if(t.type===kJ.MROE_TOGGLE_BRANCH){const r=EQ(ce,t.payload);if(!r)return;const{branch:l,toggle:s}=r;if(!0===s){const t=ce.branch,r={callback:e=>{e.id===(null==t?void 0:t.id)?e.active=!0:delete e.active},deep:!0},s=await f(l,i,r);delete s.more,o(n(s,l.path),u(l),e(l,void 0,!0))}else!1===s&&o(d(l),e(l,void 0,!0))}else if(t.type===kJ.MORE_RENAME_BRANCH){const e=EQ(ce,t.payload);if(!e)return;const{branch:n,pageId:i}=e,{type:l,id:s}=n;"page"!==l&&"root"!==l||await r.safty(s),i&&await r.safty(i),o(L(le,n,i)),e_({enterKeyType:6}),jH("update",{uid:xJ(FT.workspace),route:FT.workspace,prevent:!0})}else if(t.type===kJ.MORE_DELETE_BRANCH){const e=EQ(ce,t.payload);if(!e)return;let n=null;(null===(Q=null==e?void 0:e.branch.segments)||void 0===Q?void 0:Q.length)&&(n=GH({title:"正在删除"}));const{branch:i,pageId:l,deleteCloud:s}=e;let c=se.webdav;(null==c?void 0:c.list.length)||(c=K(ce));const a=G(c.list,i.id);if(a){let e=kJ.WORKSPACE_DELETE_ITEM;s&&(e=kJ.WORKSPACE_DELETE_WEBDAV),UH({type:e,payload:JSON.stringify(a)})}const u=h(ce.tree,i);if(u){const{id:e,type:t}=u;"page"!==t&&"root"!==t||await r.safty(e)}const d=p(ce.tree,i);if(d){const{id:e,type:t}=d;"page"!==t&&"root"!==t||await r.safty(e)}const f=[],{type:g,id:y}=i;if("page"!==g&&"root"!==g||(await r.safty(y,!0),f.push(m(y))),l&&await r.safty(l),f.push(v(le,i,null!=l?l:""),k()),"root"===g){if(!s){const e=await iF();e.data&&f.push(D(e.data,!0))}f.push(q(i.id),Y(i,{icon:$,syncing:!1,update:0}))}o(...f),null==n||n(),YH({message:"删除成功"}),bQ("haptic.effect.soft")}else if(t.type===kJ.MORE_DUPLICATE_BRANCH){const e=EQ(ce,t.payload);if(!e)return;let n=null;(null===(ee=null==e?void 0:e.branch.segments)||void 0===ee?void 0:ee.length)&&(n=GH({title:"正在拷贝"}));const{branch:i,pageId:l}=e,{type:s,id:c}=i;"page"!==s&&"root"!==s||await r.safty(c,!0),l&&await r.safty(l),o(y(le,i,null!=l?l:"")),null==n||n(),YH({message:"拷贝成功"}),bQ("haptic.effect.soft")}else if(t.type===kJ.MORE_MOVING_BRANCH){const e=kQ(ce,t.payload);if(!e)return;const{origin:n,target:i,originPageId:l,targetPageId:s}=e;if("root"!==n.type&&l&&s){const e=await E(l),t=await E(s);if((null==e?void 0:e[0])!==(null==t?void 0:t[0]))return void KH({title:"⏳ 开发中",message:"移动的笔记跨越了笔记空间，此功能正在开发中，敬请期待！",confirm:{value:"确定",fontColor:yf}})}const c=GH({title:"正在移动"});s&&await r.safty(s),l&&await r.safty(l),"page"!==i.type&&"root"!==i.type||await r.safty(i.id),"page"===n.type&&await r.safty(n.id,!0);const a=null!=s?s:"",u={...le,...se,branch:n,pageId:a};o(g(u,i,a),C(n.id),I(!0)),c(),YH({message:"移动完成"}),bQ("haptic.effect.soft")}else if(t.type===kJ.MROE_INSERT_NOTE){const e=EQ(ce,t.payload);if(!e)return;const{branch:n}=e;o(b(le,n),w(),I(!0)),YH({message:"新建笔记本"}),bQ("haptic.effect.soft")}else if(t.type===kJ.MORE_IMPORT_MARKDOWN){const e=GH({title:"正在导入"}),n=EQ(ce,t.payload);if(!n)return void e();const{branch:i,pageId:s,filepaths:c}=n,a=c[0];if(!a)return void e();const u=await r_(a);if(!u)return void e();const d=Js(a.split("/"));if(!d)return void e();const f=se.editor.style,h=decodeURIComponent(d).slice(0,-3),p=N(h,u,{image:[]},f);s&&await r.safty(s),"outline"!==i.type&&await r.safty(i.id);const v=[];v.push(B(p,i,s,!1)),o(...v),l.storend.current=t=>{var n,o,r;const c=null===(r=null===(o=null===(n=t.store)||void 0===n?void 0:n.crud)||void 0===o?void 0:o.update)||void 0===r?void 0:r.editor;((null==c?void 0:c.includes(s))||(null==c?void 0:c.includes(i.id)))&&(l.storend.current=null,e(),YH({message:"导入完成"}))}}else if(t.type===kJ.MORE_IMPORT_SLI){const e=GH({title:"正在导入"}),n=EQ(ce,t.payload);if(!n)return void e();const{branch:o,pageId:i,filepaths:s}=n,c=s[0];if(!c)return void e();const a=await r_(c);if(!a)return void e();try{const t=JSON.parse(a);if(void 0===(null===(te=t.bootstrap)||void 0===te?void 0:te.type))return e(),void YH({message:"格式不合要求"});await R(r,t,o,i),l.storend.current=t=>{var n,r,s;const c=null===(s=null===(r=null===(n=t.store)||void 0===n?void 0:n.crud)||void 0===r?void 0:r.update)||void 0===s?void 0:s.editor;((null==c?void 0:c.includes(i))||(null==c?void 0:c.includes(o.id)))&&(l.storend.current=null,e(),YH({message:"导入完成"}))}}catch(t){e(),YH({message:"导入失败"})}}else if(t.type===kJ.MORE_EXPORT_SLI){const e=EQ(ce,t.payload);if(!e)return;const{branch:n,pageId:l,filepaths:s}=e,c=s[0];if(!c)return;const{type:a,id:u}=n;"page"!==a&&"root"!==a||await r.safty(u,!0),l&&await r.safty(l);const d=[];d.push(T(le,n,l,i,c)),o(...d)}else if(t.type===kJ.MORE_EXPORT_MARKDOWN){const e=EQ(ce,t.payload);if(!e)return;const{branch:n,pageId:l}=e,{type:s,id:c}=n;"page"!==s&&"root"!==s||await r.safty(c,!0),l&&await r.safty(l);const a=[];a.push(A(le,n,l,i)),o(...a)}else if(t.type===kJ.MORE_EXPORT_HTML){const e=EQ(ce,t.payload);if(!e)return;const{branch:n,pageId:l}=e,{type:s,id:c}=n;"page"!==s&&"root"!==s||await r.safty(c,!0),l&&await r.safty(l);const a=[];a.push(M(le,n,l,i)),o(...a)}else if(t.type===kJ.MORE_EXPORT_APPLICATION){const e=GH({title:"正在导出"}),n=EQ(ce,t.payload);if(!n)return;const{branch:l,pageId:s}=n,{type:c,id:a}=l;"page"!==c&&"root"!==c||await r.safty(a,!0),s&&await r.safty(s);const u=[];u.push(O(le,l,s,i,e)),o(...u)}else if(t.type===kJ.WEBDAV_SYNC_CLOUD){const e=t.payload,r=JSON.parse(e.item),{id:l,mode:s,service:c,username:a,password:u,usernameInvisible:d,passwordInvisible:h,selected:p}=r;if(!(null==c?void 0:c.trim())||!(null==a?void 0:a.trim())||!(null==u?void 0:u.trim()))return;if(!BM(c))return;if(!(null==p?void 0:p.id))return;const v=e.syncing,g={type:"webdav",bind:!0,id:l,mode:s,service:c,username:a,password:u,usernameInvisible:d,passwordInvisible:h};(null===(ne=p.children)||void 0===ne?void 0:ne.length)||(p.children=[null]);const m=[P(p,!0),F(p.id),H(p.id,{...g,syncing:v,update:0}),z(p,{icon:$,syncing:v,update:0})];if(!1===v){const e={...p,icon:$,syncing:!1,update:0},t=await f(e,i,{deep:!0});m.push(n(Object.assign(p,t)))}o(...m)}else if(t.type===kJ.WEBDAV_UPDATE_CLOUD){if(!(null===(oe=se.file)||void 0===oe?void 0:oe.cloud))return;const e=t.payload,n=Z(null===(ie=se.file)||void 0===ie?void 0:ie.cloud);for(const t in e){const i=n[t],r=e[t];if(!i||!r)continue;const l=null===(re=se.file)||void 0===re?void 0:re.tree.find((e=>e.id===t));l&&(l.update!==r&&o(_(i,{update:r}),z(l,{update:r})),i.update!==r&&o(W(t,i.id,{update:r})))}}else if(t.type===kJ.WEBDAV_DELETE_ITEM){const e=JSON.parse(t.payload),{selected:n,id:i}=e;if(!(null==n?void 0:n.id))return;o(U(e,!0),q(n.id,i),Y(n,{icon:$,syncing:!1,update:0}))}},J=e=>{var t,n,o,i,r,s;let a=!1;if(e.route===FT.workspace){const e=null===(t=l.imperator.file.current)||void 0===t?void 0:t.search;(null===(o=null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.getSearchText)||void 0===o?void 0:o.call(n))&&bQ("haptic.effect.soft"),null===(r=null===(i=null==e?void 0:e.current)||void 0===i?void 0:i.clear)||void 0===r||r.call(i),a=!0}if(e.route===FT.workspace){const e=c.current.file;(null===(s=null==e?void 0:e.rename)||void 0===s?void 0:s.length)&&QH(),a=!0}a||jH("pop")},Q=e=>{var t,n;const i=c.current.file;if(null===(t=null==i?void 0:i.rename)||void 0===t?void 0:t.length){const t=KQ(i.tree,i.rename);t&&o(V(t,e))}e>0||!(null===(n=null==i?void 0:i.rename)||void 0===n?void 0:n.length)||(o(j(["rename"])),jH("update",{uid:xJ(FT.workspace),route:FT.workspace,prevent:!1}))};return $H("message",X),$H("backPress",J),$H("keyboardHeightChange",Q),()=>{ZH("message",X),ZH("backPress",J),ZH("keyboardHeightChange",Q)}}),[r,s,c,o,l.imperator.file,l.storend,i]),{content:{onTouchStart:()=>{var e;null===(e=l.imperator.nav.current)||void 0===e||e.dispatch(u(a.note))}},file:{onClickBranch:(e,t)=>{var i,r,l;const s=null===(i=n.file)||void 0===i?void 0:i.tree;if(!(null==s?void 0:s.length))return;(null===(l=null===(r=n.file)||void 0===r?void 0:r.rename)||void 0===l?void 0:l.length)&&QH();const c=zH(),a=v(s,e),u=a.title?p(a.title):"";jH("push",{route:FT.editor,effect:{slide:"right"},payload:{editable:!a.readonly,page:SQ(a),branch:SQ(e),refresh:d(!0),uid:c,pageId:t,alive:!0},title:{text:u,menus:["more"]},alive:!0,aliveId:FT.editor}),setTimeout((()=>{var n;o(y(m(e))),(null===(n=a.segments)||void 0===n?void 0:n.length)||("page"===e.type?IQ(e.id):"outline"===e.type&&IQ(t))}),100)},onChangeSearch:e=>{jH("update",{uid:xJ(FT.workspace),route:FT.workspace,prevent:!!e})},onClickBranchAdd:async(e,t)=>{var o,i,r,l;const s=null===(o=n.file)||void 0===o?void 0:o.tree;if(!(null==s?void 0:s.length))return;(null===(r=null===(i=n.file)||void 0===i?void 0:i.rename)||void 0===r?void 0:r.length)&&QH();const c=null===(l=e.payload)||void 0===l?void 0:l.subclass;if("outline"===e.type&&c<=f.SubClass.H6)return void KH({title:"提示",message:"当前目录为最小分支，无法再新建子目录",confirm:{value:"确定",fontColor:yf}});let a="";const u=v(s,e);"outline"===e.type&&(a=u.title?p(u.title):"");const h=zH();jH("push",{route:FT.editor,effect:{slide:"right"},payload:{create:!u.readonly,editable:!u.readonly,page:SQ(u),branch:SQ(e),refresh:d(!0),uid:h,alive:!0},title:{text:a,menus:["more"]},alive:!0,aliveId:FT.editor})},onClickBranchMore:(t,i)=>{var r,l,s;(null===(l=null===(r=n.file)||void 0===r?void 0:r.rename)||void 0===l?void 0:l.length)&&QH(),i||"root"!==t.type||(i=t.id);const c=!t.readonly,a=b({...e,file:n.file},t,!1,c),u=g(a),d=_H(),f=zH();let h=u+36-12+d,p=!0;const v=document.documentElement.clientHeight;h+GK>v&&(h=v-GK,p=!1);let C=!1,w=!1;wi(a).forEach((e=>{e.value===AK.expandNote?C=!0:e.value===AK.collapsedNote&&(w=!0)})),jH("push",{route:FT.more,effect:{slide:"bottom",modal:!0,gesture:p,blur:!0},style:{height:h,borderRadius:{topLeft:16,topRight:16}},payload:{pageId:i,branch:SQ(t),file:{cloud:null===(s=n.file)||void 0===s?void 0:s.cloud},uid:f,height:h,editable:c,expandable:C,collapseable:w,scroller:!p}}),setTimeout((()=>{o(y(m(t)))}),100)},onClickSearchBranch:(e,t)=>{var n,o;const{file:i}=r.stater.get();if("outline"!==e.type||!(null==i?void 0:i.tree.length))return;const l=zH(),s=h(i.tree,t);if(!s)return;const c=p(null!==(n=null==s?void 0:s.title)&&void 0!==n?n:null);jH("push",{route:FT.editor,effect:{slide:"right"},payload:{editable:!s.readonly,page:{id:t},branch:SQ(e),refresh:d(!0),search:!0,uid:l,alive:!0},title:{text:c,menus:["more"]},alive:!0,aliveId:FT.editor}),(null===(o=s.segments)||void 0===o?void 0:o.length)||IQ(t)},onClickSearchReplace:(e,t)=>{},onDoubleClickSearchBranch:(e,t)=>{}}}}(e,h,p,v,g,m),b={...h,...e,dispatch:p,main:!0,root:!0,virtual:!0,editable:!0,focus:{type:f.FILE}};return G(l0,{children:X("div",{style:fJ,children:[G(RQ,{...e,ref:m.imperator.nav}),G(ch,{style:hJ,...y.content,children:G(n,{value:p,children:G(o,{value:h,children:G(i,{value:e,children:G(r,{value:g,children:G(l,{value:v,children:G(s,{...b,ref:m.imperator.file,...y.file})})})})})})})]})})},calcOutlineNumber:function(e){const t=aae;return e===t.H1?1:e===t.H2?2:e===t.H3?3:e===t.H4?4:e===t.H5?5:e===t.H6?6:void 0},developing:wQ,dispatchEditorActionComfortable:mQ,dispatchKeyboardEvent:DQ,exportColorItems:lQ,exportColorNames:rQ,exportFontFamilyItems:cQ,exportFontSizeItems:sQ,exportFormTitleWidth:wJ,exportLetterSpacingItems:aQ,exportLineHeightItems:uQ,exportListItems:iQ,exportListTitleWidth:CJ,exportSheetInsertItems:dQ,exportSheetMoreItems:fQ,exportToolName:oQ,generateSettingOptions:FQ,generateUpperPostMessage:gQ,genetateOperationOptions:bJ,getActiveInnerTool:function(e){let t=null;for(const n of e)if(n.inner&&n.active){t=n.name;break}return t},getColorList:hQ,getNavigateUid:xJ,getSheetInsertList:pQ,initEditorClient:SJ,isEditorLostFocus:EJ,isToolActive:vQ,isToolInnerActive:function(e){return null==e?void 0:e.some((e=>e.inner&&e.active))},isToolKeyboardUp:function(e){return null==e?void 0:e.some((e=>e.inner&&e.active))},refreshMovingPayload:kQ,refreshPayload:EQ,shouldPreventShowKeyBoard:yQ,spliceBranch:SQ,startVibration:bQ,startVibrationDebounce:CQ,updateLocalRecentReview:IQ});const{clearHighlights:o2,traverseNode:i2}=ek,{recursiveTree:r2}=xT,{startVibration:l2}=n2;function s2(e){var t,n;const o=R(NU),i=Z(null),[r,l]=Od((()=>kqe(e))),s=WWe(r.result.tree),c=()=>{var t,n;l(Z7(""),q7(""),U7(""),Y7(!1),J7());const{imperator:i,context:r}=o.provider();r.editor.highlights&&(null===(t=null==i?void 0:i.current)||void 0===t||t.commit(o2())),null===(n=e.onChange)||void 0===n||n.call(e,"")},a=t=>{var n,i;const r=t.target.value;r.trim()?l(Y7(!0),U7("")):l(Y7(!1),q7(""),U7(""),J7()),l(Z7(r));const{imperator:s,context:c}=o.provider();c.editor.highlights&&(null===(n=s.current)||void 0===n||n.commit(o2())),null===(i=e.onChange)||void 0===i||i.call(e,r)},u=_((e=>{l(nee(e))}),[]),d=async(t,n)=>{var i,s;const{type:c,id:a,payload:u}=t;if(null===(i=e.onClickBranch)||void 0===i||i.call(e,t,n),(null===(s=r.result.branch)||void 0===s?void 0:s.id)===a)return;"page"!==c&&"root"!==c||await o.safty(a),await o.safty(n);const d=qHe(null==u?void 0:u.search),f=!!e.pageId;"page"===c?l(oee(t)):"outline"===c&&(l(lee(t),X7(f)),e.pageId&&(n=e.pageId),o.dispatch(pq(),_3(n),T6(n),s4(d),fte(t,n),V4(n)))},f=async(t,n)=>{var i,r;null===(i=e.onDoubleClickBranch)||void 0===i||i.call(e,t,n),l(Y7(!1),Z7(""),q7(""),J7()),null===(r=e.onChange)||void 0===r||r.call(e,"");const{type:s,id:c,payload:a}=t;"page"!==s&&"root"!==s||await o.safty(c),await o.safty(n);const u=qHe(null==a?void 0:a.search);o.dispatch(T6(n),s4(u),f7(),V9(),dte(n,a),V4(n),E6(n))},h=V2(r.result,c2,""!==r.searchText);U2(e,r,l),q2(e,r,l),H((()=>{e.width&&r.result.clientWidth!==e.width&&l(iee(e.width))}),[e.width]),F((()=>{var t;const n=i.current;n&&e.autoFocus&&(null===(t=n.focus)||void 0===t||t.call(n))}),[e.autoFocus]),j(e.ref,(()=>({clear(){var e;c(),null===(e=i.current)||void 0===e||e.blur()},getSearchText:()=>r.searchText})));const p=Boolean(r.result.isEditPending||r.result.isScrolling),v=W((()=>G(kU,{value:{current:{}},children:G(ek.EditElement,{value:null,children:G(ST,{showMore:!1,render:h,value:r.result,onClickBranch:d,onDoubleClickBranch:f,onChange:u})})})),[e.width,e.height,h,kd(p)]),g=W((()=>G("div",{style:uZ,children:"没有搜到结果"})),[]),m=W((()=>G("div",{style:uZ,children:"正在搜索内容"})),[]),y=r.result.count,b=!1!==e.replaceable&&(e.replace||!s),C=!1!==e.replaceable&&r.research&&y,w=NM(),x=w?4:0,S=Pf?"div":hh;return G(PU,{value:l,children:G(FU,{value:{...e,...r},children:X("div",{style:{...nZ,minHeight:44+x,...e.style},children:[X(S,{style:{...oZ,height:b?80+2*x:44+x,minHeight:44+x},children:[X(ch,{style:{...iZ,height:28+x,borderRadius:(28+x)/2},onPointerDown:()=>{o.dispatch(s4(qFe()))},children:[G("span",{style:rZ,children:G(JO,{width:w?13.5:13,fill:If})}),G("input",{ref:i,style:lZ,value:null!==(t=r.searchText)&&void 0!==t?t:"",onInput:e=>{r.searchComposition||a(e)},onCompositionStart:e=>{l(K7(!0))},onCompositionUpdate:e=>{l(K7(!0))},onCompositionEnd:e=>{l(K7(!1)),a(e)}}),e.placeholder&&!r.searchText&&!r.searchComposition&&G("span",{style:sZ,children:e.placeholder}),r.searchText&&G(a2,{onClick:c})]}),b&&!r.research&&G(ch,{style:fZ,onPointerDown:()=>{o.dispatch(s4(qFe()))},children:X("div",{style:{...hZ,height:28+x,borderRadius:(28+x)/2},children:[G("span",{style:rZ,children:G(QO,{width:w?15.5:15,fill:If})}),G("input",{style:lZ,value:null!==(n=r.replaceText)&&void 0!==n?n:"",onInput:e=>{const t=e.target.value;l(q7(t))}}),e.replaceholder&&!r.replaceText&&G("span",{style:sZ,children:e.replaceholder})]})}),C&&G(ch,{style:fZ,children:G("div",{style:dZ,children:`正在搜索内容 ${r.percent?r.percent:"..."}`})})]}),r.searchText&&G("div",{style:{height:e.height},children:r.research&&!y?m:s?r.research?"":g:v})]})})})}function c2(e){const{lang:t}=R(xU),n=R(NU),o=R(PU),i=R(FU),{branch:r,node:l,replace:s,active:c,renderElement:a}=e,u=null==r?void 0:r.type,d="outline"===u?MK[t][AK.replace]:MK[t][AK.replaceAll],f="outline"===u?"bottom":"left";let h=G(dv,{onClick:async t=>{if(t.stopPropagation(),void 0===r)return;const l=async()=>{var t,l,s;const c=[],a=null!==(t=i.pageId)&&void 0!==t?t:e.pageId;a&&c.push(a),r2([r],(e=>{const{type:t,id:n}=e;"page"!==t||c.includes(a)||c.push(n)}));for(const e of c)await n.safty(e);const u=n.stater.get(),d=!!i.pageId,f=null===(l=u.file)||void 0===l?void 0:l.currentPageId;o(see(r),Q7(r),X7(d));const h=[ete(r,a),Z3(a)];for(const e of c)h.push(Z3(e));f&&h.push(V4(f)),n.dispatch(...h),null===(s=i.onClickReplace)||void 0===s||s.call(i,r,a)};if(!Uf)return void await l();let s=0;r2([r],(e=>{"outline"===e.type&&i2(e.title,(e=>{if(jWe(e))return s++,!0}))})),s>1?KH({title:"批量替换",message:`正在批量替换${s}个目标`,width:320,cancel:{value:"取消",fontColor:kf},confirm:{value:"确定",fontColor:"red",action:l}}):(await l(),l2("haptic.effect.soft"))},onPointerDown:e=>e.stopPropagation(),style:aZ,children:X("svg",{width:12,viewBox:"0 0 12 12",children:[G("path",{fill:Lf,d:"M7.57784 11.6899C7.23672 11.6851 6.91091 11.5475 6.66967 11.3063C6.42844 11.065 6.29082 10.7392 6.28607 10.3981V7.29175C6.29098 6.95068 6.42865 6.62496 6.66985 6.38376C6.91105 6.14256 7.23677 6.00489 7.57784 5.99998H10.6842C11.0254 6.00441 11.3514 6.14193 11.5927 6.38323C11.834 6.62453 11.9715 6.95053 11.9759 7.29175V10.3981C11.9717 10.7394 11.8342 11.0654 11.5929 11.3068C11.3515 11.5481 11.0254 11.6856 10.6842 11.6899H7.57784ZM7.23797 7.29175V10.3981C7.24307 10.4867 7.28048 10.5703 7.34311 10.6332C7.40575 10.6961 7.48926 10.7338 7.57784 10.7392H10.6842C10.7731 10.7339 10.8571 10.6963 10.9204 10.6335C10.9836 10.5707 11.0218 10.487 11.0278 10.3981V7.29175C11.0217 7.203 10.9834 7.11953 10.9201 7.05698C10.8569 6.99442 10.773 6.95705 10.6842 6.95188H7.57784C7.48913 6.95683 7.40533 6.99417 7.34233 7.05682C7.27932 7.11947 7.24152 7.20307 7.23607 7.29175H7.23797ZM9.81265 3.75061H10.3367C10.3239 3.04242 10.054 2.36304 9.57721 1.83922C8.98199 1.26779 8.18712 0.951427 7.36202 0.957576C7.24212 0.948814 7.12997 0.894999 7.04811 0.806943C6.96626 0.718888 6.92076 0.603118 6.92076 0.482893C6.92076 0.362668 6.96626 0.246897 7.04811 0.158842C7.12997 0.0707869 7.24212 0.0169717 7.36202 0.00820929C8.44401 0.0040404 9.48409 0.4263 10.257 1.18353C10.9052 1.88369 11.2723 2.79845 11.288 3.75251H11.7753L10.8494 5.38796L9.81265 3.75061Z"}),G("path",{fill:Lf,d:"M0.404842 5.3135C0.646007 5.55467 0.97164 5.69239 1.31266 5.69746H4.41899C4.58915 5.69932 4.75796 5.66718 4.91553 5.60293C5.07309 5.53867 5.21624 5.44359 5.33657 5.32326C5.45689 5.20294 5.55197 5.05979 5.61623 4.90222C5.68049 4.74466 5.71263 4.57584 5.71076 4.40569V1.30442C5.70668 0.962737 5.56939 0.636143 5.32812 0.394165C5.08685 0.152187 4.76066 0.0139381 4.41899 0.0088501H1.31266C0.971042 0.0140978 0.644945 0.152398 0.40371 0.394341C0.162476 0.636285 0.0251341 0.962787 0.0208893 1.30442V4.40569C0.0259544 4.74671 0.163677 5.07234 0.404842 5.3135Z"})]})});return Pf||(h=G(Bk,{delay:1500,tips:d,direction:f,children:h})),X("div",{style:{...cZ,marginLeft:"outline"===u?-18:0,pointerEvents:s?"visible":"unset"},children:[G(AE,{node:l,renderElement:a}),s&&(c||Pf)&&h]})}function a2(e){return G(ch,{style:G$,onClick:e.onClick,children:G(MM,{width:12,fill:If})})}function u2(e){return G(Pf?f2:d2,{...e})}function d2(e){const t=R(NU),n=Z(null),[o,i]=$((()=>qje(e))),[r,l]=$(""),s=Z(null),c=Z(!1);return F((()=>{var e,t;null===(t=null===(e=n.current)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})}),[]),X(ch,{style:V$,onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:[G(tk,{style:$$,editable:!0,virtual:!1,value:o,ref:s,onChange:n=>{i(n),o.isEditPending&&requestAnimationFrame((async()=>{await t.safty(e.pageId),"outline"!==e.branch.type&&await t.safty(e.branch.id),t.dispatch(A7(e,n.node))}))},renderElement:Jze}),G("input",{style:gZ,value:r,ref:n,onInput:e=>{var n,o,i;if(null===(n=t.stater.get().modal)||void 0===n?void 0:n.visible)return;const r=null===(o=null==s?void 0:s.current)||void 0===o?void 0:o.input,a=e.target.value.trim();c.current?l(a):(l(""),null===(i=null==r?void 0:r.onInput)||void 0===i||i.call(r,e))},onBlur:e=>{var t,o;const i=null===(t=null==s?void 0:s.current)||void 0===t?void 0:t.input;requestAnimationFrame((()=>{var e,t;null===(t=null===(e=n.current)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})})),l(""),c.current=!1,null===(o=null==i?void 0:i.onBlur)||void 0===o||o.call(i,e)},onCompositionStart:e=>{var n,o,i;if(null===(n=t.stater.get().modal)||void 0===n?void 0:n.visible)return;const r=null===(o=null==s?void 0:s.current)||void 0===o?void 0:o.input;c.current=!0,null===(i=null==r?void 0:r.onCompositionStart)||void 0===i||i.call(r,e)},onCompositionUpdate:e=>{var n,o,i;if(null===(n=t.stater.get().modal)||void 0===n?void 0:n.visible)return;const r=null===(o=null==s?void 0:s.current)||void 0===o?void 0:o.input;null===(i=null==r?void 0:r.onCompositionUpdate)||void 0===i||i.call(r,e)},onCompositionEnd:e=>{var n,o;if(null===(n=t.stater.get().modal)||void 0===n?void 0:n.visible)return;const i=null===(o=null==s?void 0:s.current)||void 0===o?void 0:o.input,r=()=>{var t;c.current=!1,l(""),null===(t=null==i?void 0:i.onCompositionEnd)||void 0===t||t.call(i,e)};Mf&&_f?setTimeout(r,100):r()}})]})}function f2(e){const t=R(NU),[n,o]=$((()=>qje(e))),i=Z(null);F((()=>{const{dispatchKeyboardEvent:e}=n2,t=t=>{var n,o;const r=zH(),l=WH();if(1!==(null==l?void 0:l.length))return;if(l[0].uid!==r)return;const s=null===(n=i.current)||void 0===n?void 0:n.input;s&&(" "===t?e("keydown"," "):null===(o=s.onText)||void 0===o||o.call(s,t))},n=t=>{const n=zH(),o=WH();1===(null==o?void 0:o.length)&&o[0].uid===n&&e("keydown","Backspace")};return $H("insertText",t),$H("deleteLeft",n),()=>{ZH("insertText",t),ZH("deleteLeft",n)}}),[]);return G(ch,{style:V$,onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:G(tk,{style:$$,editable:!0,virtual:!1,value:n,ref:i,onChange:i=>{o(i),n.isEditPending&&requestAnimationFrame((async()=>{await t.safty(e.pageId),"outline"!==e.branch.type&&await t.safty(e.branch.id),t.dispatch(A7(e,i.node))}))},renderElement:Jze})})}function h2(e){var t;const n=Dd(e),o=R(NU),i=R(LU),[r,l]=Od((()=>Dqe(e))),s=W2(e,u2),c=_((e=>{l(mee(e))}),[l]),a=W((()=>Vs(((e,t)=>{e(yee(n.current),wee(t))}),300)),[n]),u=NM(),d=u?4:0,f=Pf?"div":hh;return X(f,{style:{...q$,...e.style},children:[G(f,{style:{...oZ,minHeight:44+d,zIndex:101},children:X(ch,{style:{...iZ,height:28+d,borderRadius:(28+d)/2},children:[G("span",{style:rZ,children:G(JO,{width:u?13.5:13,fill:If})}),G("input",{autoFocus:!Pf,style:lZ,value:null!==(t=r.searchText)&&void 0!==t?t:"",onInput:t=>{const n=t.target.value;l(gee(n)),n.trim()?a(l,n):(a.cancel(),l(yee(e)))}}),!r.searchText&&!Pf&&G("span",{style:sZ,children:"移动"})]})}),G(ST,{style:Y$,showDot:!0,showMore:!1,value:r.result,onChange:c,render:s,onClickArrow:async(t,n,o,r)=>{var s,c;const a=[];if(!t.expand){const n=null!==(c=null===(s=e.file)||void 0===s?void 0:s.branch)&&void 0!==c?c:t,o={callback:e=>{e.id===n.id&&(e.active=!0)}},r=await cK(t,i,o);r.expand=t.expand,a.push(Cee(r,t.path))}return a.push(bee(t,r)),l(...a),!0},onClickBranch:async(t,n)=>{var i;const{type:r,id:l}=t;if(void 0===r)return;if(!(null===(i=e.onClickBranch)||void 0===i?void 0:i.call(e,t,n))){if(n||"root"!==t.type||(n=t.id),"root"!==e.branch.type){const t=await uK(e.pageId),i=await uK(n);if((null==t?void 0:t[0])!==(null==i?void 0:i[0])){const e={visible:!0,title:"⏳ 开发中",content:"移动的笔记跨越了笔记空间，此功能正在开发中，敬请期待！"};return void o.dispatch(lre(e))}}await o.safty(n),"outline"!==r&&await o.safty(l),await o.safty(e.pageId),"page"===e.branch.type&&await o.safty(e.branch.id,!0),o.dispatch(e6(["more","moving"]),T7(e,t,n),E6(e.branch.id))}},ScrollView:e.ScrollView})]})}const{startVibration:p2}=n2,{isBranchInclude:v2}=xT;function g2(e){return G(Pf?y2:m2,{...e})}function m2(e){const t=R(NU),n=R(LU),o=Dd(e),i=PK(),r=z5(),l=DK(e,i),s=P5(e),c=F5(),[a,u]=$(""),[d,f]=$("");NK(e);const{clientHeight:h,clientWidth:p,currentPageId:v,isEditPending:g,isScrolling:m,drag:y,transition:b,editable:C=!0}=e.file,w=(t,n)=>{if(null==t?void 0:t.moving){const o={width:p};return G("div",{style:{boxShadow:Nf,borderRadius:4,overflow:"hidden"},children:G(h2,{...e,branch:t,pageId:n,style:o})})}return Sje(e,t)},x=W2(e,u2),S=IK(e,i),E=W((()=>Vs((()=>{const e=t.stater.get();if(e.editor.isEditPending)return;c$e(YZe(e))}),100)),[t]),k=n=>{var o;(0,t.dispatch)(N6(n)),e.main&&(null===(o=e.file)||void 0===o?void 0:o.isScrolling)&&!n.isScrolling&&E()},D=(e,n)=>{const o=t.dispatch;return!0===e.more?o(s4(UFe())):o(s4(qFe())),o(d6(e),e6(["rename","moving"],e)),!0},I=async(o,i,r,l)=>{var s,c;const a=t.dispatch,u=[];if(!o.expand){const t=null!==(c=null===(s=e.file)||void 0===s?void 0:s.branch)&&void 0!==c?c:o,i={callback:e=>{e.id===t.id&&(e.active=!0)}},r=await cK(o,n,i);r.expand=o.expand,u.push(a6(r,o.path))}return u.push($3(o),u6(o,l),Nq(o)),a(...u),!0},N=async(o,i,r,l)=>{var s,c,a,u,d;const{type:f,id:h}=o;if(void 0===f)return;const p=t.dispatch,g=[e6(["rename","more","moving"],o),s4(qFe())];if("root"===f&&!1!==e.preventDefault)if(null===(s=o.children)||void 0===s?void 0:s[0])g.push(u6(o,l),Nq(o));else{const e=await cK({...o,children:[null]},n,{deep:!0});e.expand=!0,g.push(a6(e,o.path),Nq(o))}if((null===(a=null===(c=e.file)||void 0===c?void 0:c.branch)||void 0===a?void 0:a.id)!==h){if("page"===f||"root"===f){g.push(_3(o)),await t.safty(h),g.push($3(o)),g.push(X3(e,h));const n=null===(u=e.file)||void 0===u?void 0:u.branch;"outline"===(null==n?void 0:n.type)&&v2(o,n)&&g.push(J3(e,h))}"outline"===f&&(g.push(_3(o)),await t.safty(i),v!==i&&g.push(X3(e,i)),g.push(J3(e,h))),p(...g),E(),null===(d=e.onClickBranch)||void 0===d||d.call(e,o,i)}else p(...g)},L=async(o,l,a)=>{var d,f,h,p,v,g,m,y,b,C,w;const{type:x,id:S,title:E}=l;if(void 0===x)return;let k=!1;const D=[s4(UFe())];if(o.value===AK.new){const t=null!==(f=null===(d=l.payload)||void 0===d?void 0:d.subclass)&&void 0!==f?f:0;if("outline"===x&&t<=aae.H6){const e={visible:!0,title:"提示",content:"当前目录为最小分支，无法再新建子目录"};D.push(lre(e))}else D.push(L7(e,l,a))}else if(o.value===AK.ejson)k=!0,D.push(E7(e,l,a,n));else if(o.value===AK.emarkdown)k=!0,D.push(k7(e,l,a));else if(o.value===AK.eapplication)k=!0,D.push(D7(e,l,a,n));else if(o.value===AK.epdf)k=!0,D.push(N7());else if(o.value===AK.ehtml)k=!0,D.push(I7(e,l,a));else if(o.value===AK.ijson)u(""),null===(h=r.json.current)||void 0===h||h.click(),i.input.current={branch:l,pageId:a};else if(o.value===AK.imarkdown)u(""),null===(p=r.md.current)||void 0===p||p.click(),i.input.current={branch:l,pageId:a};else if(o.value===AK.idirectory)u(""),null===(v=r.dir.current)||void 0===v||v.click(),i.input.current={branch:l,pageId:a};else if(o.value===AK.ipdf)D.push(x7());else if(o.value===AK.ihtml)D.push(S7());else if(o.value===AK.duplicate)k=!0,D.push(B7(e,l,a),V4(a));else if(o.value===AK.move)k=!0,D.push(s4(qFe()),t6(e,l));else if(o.value===AK.rename)D.push(s4(qFe()),n6(e,l));else if(o.value===AK.delete){k=!0;const n=null===(g=e.file)||void 0===g?void 0:g.tree;if(n){const e=J_e(n,l);if(e){const{id:n,type:o}=e;"page"!==o&&"root"!==o||await t.safty(n)}const o=Q_e(n,l);if(o){const{id:e,type:n}=o;"page"!==n&&"root"!==n||await t.safty(e)}}D.push(E6(l.id),M7(e,l,a))}else if(o.value===AK.finder)"undefined"!=typeof electron&&electron.shell.showItemInFolder();else if(o.value===AK.transfer)"undefined"!=typeof electron&&electron.file.moveNote();else if(o.value===AK.syncNote){const o=null===(y=null===(m=e.file)||void 0===m?void 0:m.cloud)||void 0===y?void 0:y[l.id];if(null==o?void 0:o.length){const e=o.find((e=>e.bind));if(!e||(null==e?void 0:e.syncing))return;const{dispatch:i,stater:r}=t;let{webdav:c,file:a}=r.get();(null==c?void 0:c.list.length)||(c=Lqe(a));const u=qUe(c.list,l.id);u&&s(u,i,n,t)}}else if(o.value===AK.collapsedNote)D.push(f6(l),Nq(l,void 0,!0));else if(o.value===AK.expandNote){const t=null===(b=e.file)||void 0===b?void 0:b.branch,o={callback:e=>{e.id===(null==t?void 0:t.id)?e.active=!0:delete e.active},deep:!0},i=await cK(l,n,o);delete i.more,D.push(a6(i,l.path),h6(l),Nq(l,void 0,!0))}else if(o.value===AK.insertNote)D.push(nre(e,l),k6());else if(o.value===AK.float){if(null===(C=l.float)||void 0===C?void 0:C.visible)D.push(v8(l));else{const e=Bqe(l);D.push(h8(l,e))}D.push(Nq(l))}else if(o.value===AK.readonly||o.value===AK.editable){const t=null===(w=e.file)||void 0===w?void 0:w.branch;let o=!1;const i={callback:e=>{e.id===(null==t?void 0:t.id)?(e.active=!0,o=!0):delete e.active},deep:!0},r=await cK(l,n,i);delete r.more;const s=!l.readonly;D.push(a6(r,l.path),p6(l,s),Nq(l,void 0,!0)),t&&o&&D.push(_3(t))}"page"!==x&&"root"!==x||await t.safty(S,k),a&&await t.safty(a),function(i){var r,s,a;if(null===(r=t.stater.get().modal)||void 0===r?void 0:r.visible)return;const u=t.dispatch;if(o.value===AK.delete){if("page"===x&&E){const e=b$e([E],(()=>{u(lre({...e,visible:!1}),zq(S)),i()}));return void u(lre(e))}if("root"===x&&E){const o=null===(a=null===(s=e.file)||void 0===s?void 0:s.cloud)||void 0===a?void 0:a[S],r=null==o?void 0:o.find((e=>e.bind)),d=C$e(E,(async(e,o)=>{u(lre({...d,visible:!1})),(null==r?void 0:r.timer)&&clearTimeout(r.timer),u(c8(S,null==r?void 0:r.id));const s=[];if(o&&r){const{stater:e}=t;let{webdav:o,file:i}=e.get();(null==o?void 0:o.list.length)||(o=Lqe(i));const r=qUe(o.list,l.id);r&&await c(r,u,n,t)}else{const e=await iF();e.data&&s.push(_U(e.data,!0))}u(zq(S)),i(),s.length&&u(...s)}),r);return void u(lre(d))}}if([AK.ihtml].includes(o.value)){const e={visible:!0,title:"⏳ 开发中",content:"正在开发，敬请期待。"};return D.push(lre(e)),void i()}i()}((()=>{(0,t.dispatch)(...D)}))},B=Boolean(g||m);return W((()=>{const t={...pZ,width:p};if(Pf&&(t.overflow="hidden",t.borderTopLeftRadius=16),void 0===e.file)return G(Mh,{style:t,type:"right",children:G(hh,{style:oZ,onPointerDown:e=>e.stopPropagation(),children:G(s2,{height:h,width:p,replaceholder:MK[e.lang][AK.replace]})})});const n=bje(e.file);let s;Pf&&(s=!0),!1===C&&(s=!1);const c=o.current.leafStyle;return G(MU,{value:o.current,children:X(Mh,{style:t,borderStyle:{zIndex:1002},type:"right",ref:i.file,...l.file,children:[G(ST,{showDot:!0,ref:i.tree,value:n,showAdd:Pf,leafStyle:c,showMore:s,draggable:C,transition:b,dragging:!Sc(y),options:w,render:x,onChange:k,onDrag:S,onClickArrow:I,onClickMore:D,onClickBranch:N,onClickMenu:L}),G(ch,{style:{...oZ,zIndex:d?1001:1},onPointerDown:e=>e.stopPropagation(),children:G(s2,{progress:!0,height:h,width:p,onChange:f,replaceable:C,replaceholder:MK[e.lang][AK.replace]})}),C&&!Pf&&G(ch,{onClick:e=>e.stopPropagation(),...l.resize,style:vZ}),G("input",{ref:r.json,...l.input,multiple:!0,value:a,type:"file",accept:".sli,.json",style:{display:"none"}}),G("input",{ref:r.md,...l.input,multiple:!0,value:a,type:"file",accept:".md",style:{display:"none"}}),G("input",{ref:r.dir,...l.input,multiple:!0,directory:!0,webkitdirectory:!0,value:a,type:"file",style:{display:"none"}})]})})}),[o,p,h,a,d,kd(B)])}function y2(e){const t=R(NU),n=R(LU),o=Dd(e),i=Z(null),[r,l]=$("");j(e.ref,(()=>({search:i})));const{clientHeight:s,clientWidth:c,currentPageId:a,isEditPending:u,isScrolling:d,scrollActive:f,editable:h=!0}=e.file,p=(t,n)=>{if(null==t?void 0:t.moving){const o={width:c};return G("div",{style:{boxShadow:Nf,borderRadius:4,overflow:"hidden"},children:G(h2,{...e,branch:t,pageId:n,style:o})})}return Sje(e,t)},v=W2(e,u2),g=W((()=>Vs((()=>{const e=t.stater.get();if(e.editor.isEditPending)return;c$e(YZe(e)),d$e(e.file);(0,t.dispatch)(aq({bootstrap:!0}))}),30)),[t]),m=n=>{var o,i;(0,t.dispatch)(N6(n)),e.main&&!r&&((null===(o=e.file)||void 0===o?void 0:o.isScrolling)&&!n.isScrolling||(null===(i=e.file)||void 0===i?void 0:i.isEditPending))&&g()},y=t=>{var n;l(t),null===(n=e.onChangeSearch)||void 0===n||n.call(e,t)},b=(t,n)=>{var o;return null===(o=e.onClickBranchMore)||void 0===o||o.call(e,t,n),!0},C=(t,n)=>{var o;return null===(o=e.onClickBranchAdd)||void 0===o||o.call(e,t,n),!0},w=async(o,i,r,l)=>{var s,c;const a=t.dispatch,u=[];if(!o.expand){const t=null!==(c=null===(s=e.file)||void 0===s?void 0:s.branch)&&void 0!==c?c:o,i={callback:e=>{Zf||e.id===t.id&&(e.active=!0)}},r=await cK(o,n,i);r.expand=o.expand,u.push(a6(r,o.path))}return u.push($3(o),u6(o,l),Nq(o)),a(...u),!0},x=async(o,i,r,l)=>{var s,c,u,d;const{type:f,id:h}=o;if(void 0===f)return;const p=t.dispatch,v=[e6(["rename","more","moving"],o),s4(qFe())];if("root"===f&&!1!==e.preventDefault){if((null===(s=o.children)||void 0===s?void 0:s[0])&&o.expand)v.push(u6(o,l),Nq(o));else{let e=o;(null===(c=o.children)||void 0===c?void 0:c[0])||(e={...o,children:[null]});const t=await cK(e,n,{deep:!0});t.expand=!0,v.push(a6(t,o.path),Nq(o))}return p(...v),void p2()}if(!1===e.preventDefault){if("page"===f){v.push(_3(o)),await t.safty(h),v.push(X3(e,h)),v.push($3(o));const n=null===(u=e.file)||void 0===u?void 0:u.branch;"outline"===(null==n?void 0:n.type)&&v2(o,n)&&v.push(J3(e,h))}"outline"===f&&(v.push(_3(o)),await t.safty(i),a!==i&&v.push(X3(e,i)),v.push(J3(e,h))),p(...v),g()}null===(d=e.onClickBranch)||void 0===d||d.call(e,o,i)},S=Boolean(u||d||f);return W((()=>{const t={...pZ,width:"100%",overflow:"hidden",borderTopLeftRadius:16};if(void 0===e.file)return G(Mh,{style:t,type:"right",children:G(hh,{style:oZ,onPointerDown:e=>e.stopPropagation(),children:G(s2,{height:s,width:c,replaceholder:MK[e.lang][AK.replace]})})});const n=bje(e.file);let l;Pf&&(l=!0),!1===h&&(l=!1);const a=o.current.leafStyle;return G(MU,{value:o.current,children:X(ch,{style:t,className:c$,children:[G(ST,{showDot:!0,value:n,showMore:l,showAdd:Pf,leafStyle:a,contentClassName:u$,stickyClassName:a$,scrollBarClassName:d$,onChange:m,options:p,render:v,onClickArrow:w,onClickMore:b,onClickAdd:C,onClickBranch:x}),G(ch,{style:{...oZ,zIndex:r?1001:1},onPointerDown:e=>e.stopPropagation(),children:G(s2,{progress:!0,height:s,width:c,ref:i,onChange:y,onClickBranch:e.onClickSearchBranch,onClickReplace:e.onClickSearchReplace,onDoubleClickBranch:e.onDoubleClickSearchBranch,replaceable:h,replaceholder:MK[e.lang][AK.replace]})})]})})}),[o,c,s,r,kd(S)])}function b2(e){return X("div",{style:F$,children:[e.children,e.cursor&&G("div",{style:{...H$,cursor:e.cursor}})]})}function C2(e){var t,n;const o=R(NU),i=R(HU),{lang:r,toolbar:l,client:s,file:c,editable:a}=e,u=null==l?void 0:l.tools,d=null==l?void 0:l.resize,f=null==l?void 0:l.refresh,h=o.provider(),{context:p}=h,v=p.editor,g=(null!==(t=null==s?void 0:s.width)&&void 0!==t?t:0)-(null!==(n=null==c?void 0:c.clientWidth)&&void 0!==n?n:0);return W((()=>{if(void 0===u)return null;const t=o.dispatch,n={...W$,width:g};a||(n.transform="translateY(-44px)");const l={...z$};return a&&(l.transform="translateY(-44px)"),X(hh,{style:j$,onPointerDown:e=>{e.stopPropagation(),t(b9(!1),a4())},onClick:e=>{t(f7())},children:[G(QV,{style:n,lang:r,tools:u,resize:d,ref:i,sliceTools:i$}),G(w2,{lang:e.lang,style:l,readonly:!a})]})}),[r,u,d,f,g,a,JSON.stringify(null==v?void 0:v.selectionStyle),JSON.stringify(null==v?void 0:v.selectionDecorate)])}function w2(e){return G("div",{style:e.style,children:G("div",{style:{marginLeft:5},children:G(e$,{lang:e.lang,...dAe,active:!1,hideTips:!e.readonly})})})}function x2(e){var t;const n=R(NU),o=n.stater.get();return G(mk,{...o.modal,onCancel:e=>{var t,o;const i=n.stater.get();if(null===(t=i.modal)||void 0===t?void 0:t.onCancel)return null===(o=i.modal)||void 0===o?void 0:o.onCancel(e);(0,n.dispatch)(lre({...i.modal,visible:!1}))},onOk:e=>{var t,o;const i=n.stater.get();if(null===(t=i.modal)||void 0===t?void 0:t.onOk)return null===(o=i.modal)||void 0===o?void 0:o.onOk(e);(0,n.dispatch)(lre({...i.modal,visible:!1}))},children:G("div",{style:X$,children:null===(t=o.modal)||void 0===t?void 0:t.content})})}function S2(e){const t=Z({});return G(HU,{value:t,children:G(ch,{style:_$,onPointerDown:e=>e.stopPropagation(),children:e.children})})}var E2={exports:{}};E2.exports=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],o=e[1],i=e[2],r=e[3];o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[0]-680876936|0)<<7|n>>>25)+o|0)&o|~n&i)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&o)+t[2]+606105819|0)<<17|i>>>15)+r|0)&r|~i&n)+t[3]-1044525330|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[4]-176418897|0)<<7|n>>>25)+o|0)&o|~n&i)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&o)+t[6]-1473231341|0)<<17|i>>>15)+r|0)&r|~i&n)+t[7]-45705983|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[8]+1770035416|0)<<7|n>>>25)+o|0)&o|~n&i)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&o)+t[10]-42063|0)<<17|i>>>15)+r|0)&r|~i&n)+t[11]-1990404162|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[12]+1804603682|0)<<7|n>>>25)+o|0)&o|~n&i)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&o)+t[14]-1502002290|0)<<17|i>>>15)+r|0)&r|~i&n)+t[15]+1236535329|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[1]-165796510|0)<<5|n>>>27)+o|0)&i|o&~i)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&o|n&~o)+t[11]+643717713|0)<<14|i>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[5]-701558691|0)<<5|n>>>27)+o|0)&i|o&~i)+t[10]+38016083|0)<<9|r>>>23)+n|0)&o|n&~o)+t[15]-660478335|0)<<14|i>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[9]+568446438|0)<<5|n>>>27)+o|0)&i|o&~i)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&o|n&~o)+t[3]-187363961|0)<<14|i>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[13]-1444681467|0)<<5|n>>>27)+o|0)&i|o&~i)+t[2]-51403784|0)<<9|r>>>23)+n|0)&o|n&~o)+t[7]+1735328473|0)<<14|i>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[5]-378558|0)<<4|n>>>28)+o|0)^o^i)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^o)+t[11]+1839030562|0)<<16|i>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[1]-1530992060|0)<<4|n>>>28)+o|0)^o^i)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^o)+t[7]-155497632|0)<<16|i>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[13]+681279174|0)<<4|n>>>28)+o|0)^o^i)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^o)+t[3]-722521979|0)<<16|i>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[9]-640364487|0)<<4|n>>>28)+o|0)^o^i)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^o)+t[15]+530742520|0)<<16|i>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|o>>>9)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[0]-198630844|0)<<6|n>>>26)+o|0)|~i))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[14]-1416354905|0)<<15|i>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[12]+1700485571|0)<<6|n>>>26)+o|0)|~i))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[10]-1051523|0)<<15|i>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[8]+1873313359|0)<<6|n>>>26)+o|0)|~i))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[6]-1560198380|0)<<15|i>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[4]-145523070|0)<<6|n>>>26)+o|0)|~i))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[2]+718787259|0)<<15|i>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=r+e[3]|0}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function r(e){var t,i,r,l,s,c,a=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)n(u,o(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(n(u,r),t=0;t<16;t+=1)r[t]=0;return l=(l=8*a).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(l[2],16),c=parseInt(l[1],16)||0,r[14]=s,r[15]=c,n(u,r),u}function l(e){var t,o,r,l,s,c,a=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=a;t+=64)n(u,i(e.subarray(t-64,t)));for(o=(e=t-64<a?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(n(u,r),t=0;t<16;t+=1)r[t]=0;return l=(l=8*a).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(l[2],16),c=parseInt(l[1],16)||0,r[14]=s,r[15]=c,n(u,r),u}function s(e){var n,o="";for(n=0;n<4;n+=1)o+=t[e>>8*n+4&15]+t[e>>8*n&15];return o}function c(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function a(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,o=e.length,i=new ArrayBuffer(o),r=new Uint8Array(i);for(n=0;n<o;n+=1)r[n]=e.charCodeAt(n);return t?r:i}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var o=new Uint8Array(e.byteLength+t.byteLength);return o.set(new Uint8Array(e)),o.set(new Uint8Array(t),e.byteLength),n?o:o.buffer}function h(e){var t,n=[],o=e.length;for(t=0;t<o-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}return c(r("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,o){var i,r,l,s,c=this.byteLength,a=t(n,c),u=c;return o!==e&&(u=t(o,c)),a>u?new ArrayBuffer(0):(i=u-a,r=new ArrayBuffer(i),l=new Uint8Array(r),s=new Uint8Array(this,a,i),l.set(s),r)}}(),p.prototype.append=function(e){return this.appendBinary(a(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,o(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},p.prototype.end=function(e){var t,n,o=this._buff,i=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(r,i),n=c(this._hash),e&&(n=h(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,t){var o,i,r,l=t;if(e[l>>2]|=128<<(l%4<<3),l>55)for(n(this._hash,e),l=0;l<16;l+=1)e[l]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),r=parseInt(o[1],16)||0,e[14]=i,e[15]=r,n(this._hash,e)},p.hash=function(e,t){return p.hashBinary(a(e),t)},p.hashBinary=function(e,t){var n=c(r(e));return t?h(n):n},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var t,o=f(this._buff.buffer,e,!0),r=o.length;for(this._length+=e.byteLength,t=64;t<=r;t+=64)n(this._hash,i(o.subarray(t-64,t)));return this._buff=t-64<r?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,n,o=this._buff,i=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)r[t>>2]|=o[t]<<(t%4<<3);return this._finish(r,i),n=c(this._hash),e&&(n=h(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=d(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var n=c(l(new Uint8Array(e)));return t?h(n):n},p}();var k2=_T(E2.exports);const{isSelectionOutView:D2,isCollapsed:I2,deleteBackward:N2,sortSelection:L2,insertNode:B2}=ek;function T2(e){var t,n,o;const i=R(NU),{gfocus:r,modal:l}=e;if((null==l?void 0:l.visible)||!e.editable)return null;if(!r||!aHe(r))return null;const s=i.provider(),{context:c,imperator:a}=s,u=c.editor;let d=!1,f=!1;if(u.selection&&(d=!0),!Pf&&(f=D2(u),!d&&!f&&(null===(t=c.focus)||void 0===t?void 0:t.child))){const e=null===(n=null==a?void 0:a.current)||void 0===n?void 0:n.input,t=null===(o=null==e?void 0:e.getBoundingClientRect)||void 0===o?void 0:o.call(e);(!t||t.top<0)&&(f=!0)}return!d||f?null:G(A2,{...e})}function A2(e){const t=Z(null),n=R(NU),o=Z(!1),i=Z(!1),r=Z(!1),[l,s]=$(""),[c,a]=$({}),{gfocus:u}=e,d=()=>{var e,t;const o=n.provider(),{imperator:i}=o,r=null===(e=null==i?void 0:i.current)||void 0===e?void 0:e.input,l=null===(t=null==r?void 0:r.getBoundingClientRect)||void 0===t?void 0:t.call(r);if(!l)return;const s={top:l.top,left:l.left,fontSize:l.height};Ec(s,c)||a(s)};async function f(t,o){var i;const r=n.dispatch;if(u&&kHe(u)&&!(null===(i=n.stater.get().modal)||void 0===i?void 0:i.visible)){const{editor:{node:i,selection:l}}=e;if(l&&!I2(l)){const e=wFe(i,l);if(e.length){const i=b$e(e,(async()=>{var l;r(lre({...i,visible:!1}));const s=[];for(const t of e){const e=null===(l=t.props)||void 0===l?void 0:l.id;e&&(s.includes(e)||s.push(e),await n.safty(e,!0))}r(Vq(s)),o?o():t()}));return void r(lre(i))}}}t()}H((()=>{var e,n;d(),null===(n=null===(e=t.current)||void 0===e?void 0:e.focus)||void 0===n||n.call(e,{preventScroll:!0})}));return G("textarea",{style:{...K$,...c},ref:t,value:l,onFocus:()=>{i.current=!0,d()},onInput:e=>{var t,i,l;if(null===(t=n.stater.get().modal)||void 0===t?void 0:t.visible)return;const c=null===(i=n.provider())||void 0===i?void 0:i.imperator,a=null===(l=null==c?void 0:c.current)||void 0===l?void 0:l.input;if(r.current)return void(r.current=!1);const u=Zze(e);f((()=>{var e;const t=u.target.value.trim();if(""!==t){if("/"===t||"、"===t)return o.current?void s(t):(null===(e=c.current)||void 0===e||e.commit(mMe()),void requestAnimationFrame(n));n()}function n(){var e;o.current?s(t):(s(""),null===(e=null==a?void 0:a.onInput)||void 0===e||e.call(a,u))}}))},onBlur:e=>{var r,l,c,a,u;const d=null===(r=n.provider())||void 0===r?void 0:r.imperator,f=null===(l=null==d?void 0:d.current)||void 0===l?void 0:l.input;Pf?null===(a=null===(c=t.current)||void 0===c?void 0:c.focus)||void 0===a||a.call(c,{preventScroll:!0}):requestAnimationFrame((()=>{var e,n;null===(n=null===(e=t.current)||void 0===e?void 0:e.focus)||void 0===n||n.call(e,{preventScroll:!0})})),s(""),o.current=!1,i.current=!0,null===(u=null==f?void 0:f.onBlur)||void 0===u||u.call(f,e)},onPaste:e=>{var t,o,i,l,s;if(null===(t=n.stater.get().modal)||void 0===t?void 0:t.visible)return;const c=n.provider(),{imperator:a,rootstate:u,rootdispatch:d}=c,f=null===(o=null==a?void 0:a.current)||void 0===o?void 0:o.input;r.current=!0;const h=null===(i=null==e?void 0:e.clipboardData)||void 0===i?void 0:i.files;if(null==h?void 0:h.length)for(let e=0;e<h.length;e++)-1!==h[e].type.indexOf("image")&&M2(h[e],u,d,null!==(l=null==a?void 0:a.current)&&void 0!==l?l:null);else null===(s=null==f?void 0:f.onPaste)||void 0===s||s.call(f,e)},onCompositionStart:e=>{var t,i,r;if(null===(t=n.stater.get().modal)||void 0===t?void 0:t.visible)return;const l=null===(i=n.provider())||void 0===i?void 0:i.imperator,s=null===(r=null==l?void 0:l.current)||void 0===r?void 0:r.input;f((()=>{var t;o.current=!0,null===(t=null==s?void 0:s.onCompositionStart)||void 0===t||t.call(s,e)}),(()=>{var e;null===(e=null==l?void 0:l.current)||void 0===e||e.commit(N2())}))},onCompositionUpdate:e=>{var t,i,r,l;if(null===(t=n.stater.get().modal)||void 0===t?void 0:t.visible)return;const s=e.data.trim();if(!s)return void(o.current=!1);if("、"===s)return;const c=null===(i=n.provider())||void 0===i?void 0:i.imperator,a=null===(r=null==c?void 0:c.current)||void 0===r?void 0:r.input;null===(l=null==a?void 0:a.onCompositionUpdate)||void 0===l||l.call(a,e)},onCompositionEnd:e=>{var t,i,r,l;if(null===(t=n.stater.get().modal)||void 0===t?void 0:t.visible)return;const c=null===(i=n.provider())||void 0===i?void 0:i.imperator,a=null===(r=null==c?void 0:c.current)||void 0===r?void 0:r.input;if("、"===e.data.trim())return null===(l=c.current)||void 0===l||l.commit(mMe()),void requestAnimationFrame(u);function u(){const t=()=>{var t;o.current=!1,s(""),null===(t=null==a?void 0:a.onCompositionEnd)||void 0===t||t.call(a,e)};Mf&&_f?setTimeout(t,30):t()}u()}})}function M2(e,t,n,o){const{type:i}=e,r=new FileReader;r.onload=e=>{var r;const l=null===(r=e.target)||void 0===r?void 0:r.result;if(!mc(l))return;const s=new k2.ArrayBuffer;s.append(l);const c=`${s.end()}.${i}`,a=new Blob([l],{type:i}),u=new FileReader;u.onload=e=>{var r;const s=null===(r=e.target)||void 0===r?void 0:r.result;if(!sc(s))return;const a=new Image;a.onload=async()=>{var e,r;const s=await wF(c);if(0!==s.ok&&s.data){if(!(null===(r=null===(e=t.store)||void 0===e?void 0:e.reference)||void 0===r?void 0:r[c])){const e=await HY(c);e&&n(lq({[c]:e}))}}else await yF(c,l);const u=t.editor.style;null==o||o.commit((e=>{if(void 0===e.selection)return e;const{before:{path:t}}=L2(e.selection),n=AFe(e,t,u),o=nfe(a,n,c,i);return e=B2(o)(e)}))},a.src=s},u.readAsDataURL(a)},r.readAsArrayBuffer(e)}function O2(e){var t;const n=R(NU),o=R(LU),{target:i}=e,r=null===(t=e.file)||void 0===t?void 0:t.isEditPending,l=e.editor.isScrolling,s=Boolean(r||l),[c,a]=Od((()=>{var t;const n=null!==(t=cje(e))&&void 0!==t?t:i.id;return{value:Cje(i,n,0,!0),pageId:i.id,id:n,float:i.float}}),Oee()),u=z2(i,c.id),d=W((()=>Vs((()=>{const e=n.stater.get();if(e.editor.isEditPending)return;c$e(YZe(e))}),100)),[n]),f=BK(e,c,a),h=()=>{n.dispatch(v8(i),Nq(i))},p=()=>{var e;const t=!(null===(e=i.float)||void 0===e?void 0:e.sticky);a(Tee({sticky:t})),t&&a(Lee(i,!0)),setTimeout((()=>{if(t){const e=Bqe(i);n.dispatch(p8(i,e))}else n.dispatch(p8(i,{sticky:t}));n.dispatch(Nq(i))}))},v=e=>{a(kee(e))},g=(e,t,n,o)=>{a(Mee(e,o))},m=t=>{var o;if((null===(o=e.file)||void 0===o?void 0:o.currentPageId)!==i.id)return;a(Nee(t.id));const r=[J3(e,t.id),E6(t.id)];"outline"===t.type&&r.push(_3(t.id)),n.dispatch(...r),d()},y=()=>{a(Lee(i,!0))},b=()=>{var e;(null===(e=c.float)||void 0===e?void 0:e.sticky)&&setTimeout((()=>{a(Lee(i,!1)),setTimeout((()=>{const e=Bqe(i);n.dispatch(p8(i,e),Nq(i))}),30)}),100)};return H((()=>{const t=cje(e);t!==c.id&&a(Nee(t))}),[kd(s)]),F((()=>{a(Bee(i,c.id))}),[c.id,r]),F((()=>{(async()=>{var e;if((null===(e=i.children)||void 0===e?void 0:e.length)&&!i.children[0]){const e=await cK(i,o);n.dispatch(a6(e,i.path))}a(Lee(i,!1))})()}),[i.id]),W((()=>{var t,n,o,r,l,s;const a={width:null===(t=c.float)||void 0===t?void 0:t.width,height:null===(n=c.float)||void 0===n?void 0:n.height},d={},C=null===(o=c.float)||void 0===o?void 0:o.sticky;let w=[];const x=U_e(c.value.tree[0]).slice(1),S=x.findIndex((e=>e.id===c.id));let E=Math.max(0,S-15);E+31>x.length&&(E=Math.max(0,x.length-31)),w=x.length>31?x.slice(E,E+31):x;const k=15*Math.min(w.length,15),D=null===(r=c.float)||void 0===r?void 0:r.width,I=null===(l=c.float)||void 0===l?void 0:l.height,N=D?(23/D).toFixed(3):0,L=I?(k/I).toFixed(3):0;if(C&&!c.fully){const e=Bqe(i),t=`translate3d(${e.left}px, ${e.top}px, 0)`,n=`scale3d(${N}, ${L}, 1)`;a.transform=`${t} ${n}`,a.opacity=0,a.pointerEvents="none";const o="scale3d(1, 1, 1)";d.transform=o,d.opacity=1}if(!C||c.fully){const e=null!==(s=c.float)&&void 0!==s?s:Bqe(i),t=`translate3d(${e.left}px, ${e.top}px, 0)`,n="scale3d(1, 1, 1)";a.transform=`${t} ${n}`,a.opacity=1;const o=`scale3d(${N}, ${L}, 1)`;d.transform=o,d.opacity=0,d.pointerEvents="none"}return c.moving&&(a.transition="none"),X(MU,{value:e,children:[X("div",{style:{...mZ,...a},onPointerLeave:b,onPointerDown:e=>e.stopPropagation(),children:[X(ch,{style:bZ,...f.menu,children:[G(dv,{type:"background",style:{...CZ,marginRight:2},onClick:p,children:G("div",{style:{transform:`rotate(${C?-45:0}deg)`},children:G(EO,{})})}),G(dv,{type:"background",style:CZ,onClick:h,children:G(MM,{width:13.5})})]}),G(ST,{showDot:!0,showMore:!1,style:yZ,value:c.value,render:u,onChange:v,onClickArrow:g,onClickBranch:m}),G("div",{style:wZ,...f.leftEdge}),G("div",{style:xZ,...f.rightEdge}),G("div",{style:SZ,...f.topEdge}),G("div",{style:EZ,...f.bottomEdge})]}),G("div",{style:kZ,children:G("div",{style:{...DZ,...d},onPointerEnter:y,onPointerDown:e=>e.stopPropagation(),children:w.map((e=>{const t=aje(e),n={...NZ};return e.active?n.backgroundColor=kf:n.backgroundColor=If,G("div",t>=7?{style:{...IZ,width:23,height:2.5,backgroundColor:e.active?kf:If}}:{style:IZ,children:Array(t).fill(0).map(((e,t)=>G("span",{style:n},t)))},e.id)}))})})]})}),[c.refresh,c.fully,c.moving])}function R2(e){const t=Dd(R(SU)),n=R(LU),[o,i]=$();F((()=>{var o;(null===(o=t.current.file)||void 0===o?void 0:o.currentPageId)!==e.pageId?(async()=>{const t=await MY(e.pageId,n,!0);i(t)})():i(t.current.editor)}),[e.pageId,n,t]);const r="function"==typeof zQ?zQ:zQ.default,l=(null==o?void 0:o.createTime)&&r(o.createTime).format("YYYY/MM/DD"),s=(null==o?void 0:o.updateTime)&&r(o.updateTime).format("MM月DD日 HH:mm");return X(hh,{style:CU,children:[X("div",{style:wU,children:[G("span",{children:"创建日期"}),G("span",{children:l})]}),X("div",{style:wU,children:[G("span",{children:"最近编辑"}),G("span",{children:s})]})]})}const{EditElement:P2,createInlineNode:F2,isNode:H2,removeBoxSizeStyle:_2,transformNodeToEditNode:j2}=ek;function W2(e,t){var n;const o=null===(n=null==e?void 0:e.file)||void 0===n?void 0:n.clientWidth;return _(((e,n)=>{var i;const{title:r,rename:l}=e;if(!H2(r))return r;const s=null!==(i=e.level)&&void 0!==i?i:0;let c=(null!=o?o:0)-14*s-50;return Pf&&(c-=36),l&&t?G(kU,{value:{current:{}},children:G(P2,{value:null,children:G(t,{lang:"cn",branch:e,pageId:n,clientWidth:c})})}):G(Q5,{node:r,width:c})}),[o,t])}function z2(e,t){var n;const o=null===(n=null==e?void 0:e.float)||void 0===n?void 0:n.width;return _(((e,n)=>{var i;const{title:r}=e;if(!H2(r))return r;const l=null!==(i=e.level)&&void 0!==i?i:0;let s=(null!=o?o:p$)-14*l-30;"root"===e.type&&(s-=20);const c={};return e.id===t&&(c.fontWeight="bolder"),G(Q5,{style:c,node:r,width:s})}),[o,t])}function V2(e,t,n){const{clientWidth:o}=e;return _(((e,i,r)=>{var l;const{title:s}=e;if(!H2(s))return null!=s?s:null;const c=null!==(l=e.level)&&void 0!==l?l:0;let a=null!=o?o:0;a-=(c+1)*(n&&((null==r?void 0:r.active)||Pf)?20:12),a-="outline"===e.type?2:20;const u=Pf?15:14,d=_2({...s.style,...$$,width:a,fontSize:u,pointerEvents:"none"}),f=lae(s),h=[EPe(j2(F2(s.children,{...d,width:a}),s.key),u)],p={...s.props};f&&delete p.style;const v={...s,style:{...d,display:"inline-flex",alignItems:"center",pointerEvents:"none"},props:p,children:h};return G(t,{...r,pageId:i,branch:e,node:v,replace:n,renderElement:Gze})}),[o,t,n])}function $2(e){var t;const{flush:n}=R(SU),o=Dd(e.editor);return e.root&&(null===(t=null==n?void 0:n.ids)||void 0===t?void 0:t.length)&&(o.current=mFe(e,n)),o}function Z2(e,t){return _((()=>{const n=e.current.options;if(n){const e=yFe(n);t(B9(e),pq())}}),[e,t])}function U2(e,t,n){const o=R(NU),i=R(LU),r=Dd(e),l=Dd(t),s=Z(""),{searchText:c,branchRemoved:a}=t,u=W((()=>Vs(((e,t)=>{e(t)}),100)),[]);F((()=>{let e=null,t=!1;return(async()=>{const a=r.current,d=l.current,f=o.stater.get();if(""===(null==c?void 0:c.trim())){const e=d.result.count;return void(e&&e>0&&n(J7()))}const{store:h,regional:p}=f;if(!h)return void n(Y7(!1));let v=a.pageId;const g=void 0!==v;let m=[];if(!g)if(p){const e={...h.catalog};for(const t in e){const{type:n,id:o}=e[t];"page"===n&&o!==v&&m.push(o)}}else{const e=await sF();1===e.ok&&e.data&&(m=e.data)}const y=m.length;void 0===v&&(v=m.shift());const b={...h.editor};u((async function o(r){const{research:c,searchText:a}=l.current;if(t||!c||!v||!a)return void(c&&n(Y7(!1)));let u,d=b[v];if(void 0===d){const e=await MY(v,i);if(void 0===e)return void(m.length?(v=m[0],m.shift()):n(Y7(!1)));const{uids:t}=e;if(t){const e=Zc(Object.values(t));u=await FY(e)}d=e,b[v]=e}else u=null==h?void 0:h.reference;xFe(d,{reference:u});const{data:f}=d,p=await HWe(a,f,[],{},i,s,(async e=>{if(!l.current.searchText)return;if(!e)return void(r&&n(J7()));if(!v)return;e.id=v;const t=[];t.push(tee(e)),t.push(X7(g,!0)),n(...t)}));if(y){const e=y-m.length;n(U7(`${e}/${y}`))}else n(U7(""));if(!0===r&&!0===p&&(r=!1),m.length)e=setTimeout((()=>o(r)));else{const e=l.current.replaceText;(null==e?void 0:e.trim())&&n(uee(e)),r&&n(J7()),n(Y7(!1))}delete b[v],v=m[0],m.shift()}),!0)})(),()=>{u.cancel(),"function"==typeof s.current&&s.current(),s.current=pRe(!0),null!==e&&clearTimeout(e),t=!0}}),[r,l,c,o,i,n,u]),F((()=>{var e,t;const{store:i}=o.stater.get(),{result:{tree:s},searchText:c}=l.current;if(!a||!c||!(null===(e=s[0].children)||void 0===e?void 0:e.length))return;let u=r.current.pageId;const d=!!u;if(void 0===u){const e=K_e(s,a.id);if(null===e)return;u=e.id}const f=null===(t=null==i?void 0:i.editor)||void 0===t?void 0:t[u];if(!f)return;xFe(f,{reference:null==i?void 0:i.reference});const h=f.data,{payload:p}=a,v=_We(c,p,h);null!==v&&n(eee(),fee(v,p,u,d))}),[n,r,l,o,a])}function q2(e,t,n){const o=Dd(e),i=Dd(t),{searchText:r,replaceText:l}=t;F((()=>{if(!(null==r?void 0:r.trim()))return;if(!(null==l?void 0:l.trim()))return void n(dee());const{result:e}=i.current;e.count&&n(uee(l))}),[o,i,r,l,n])}async function Y2(e){void 0===e&&(e=document.body.clientWidth<=1280);const t=Uf?"helper.hybrid":e?"helper.slim":"helper";if(!await IM(t)){const t=e?WVe():_Ve();if(t)return t}try{const n=`./api/${t}.sli`,o=await GT(n,{type:"arrayBuffer"}),i=new kH((e=>{})),r=new Uint8Array(o),l=pRe(!0);i.start({[l]:r});const s=i.record[l];return e?jVe(s):HVe(s),s}catch(e){console.error(e)}return null}async function K2(){if(!await IM("changelog")){const e=qVe();if(e)return e}try{const e="./api/changelog.sli",t=await GT(e,{type:"arrayBuffer"}),n=new kH((e=>{})),o=new Uint8Array(t),i=pRe(!0);n.start({[i]:o});const r=n.record[i];return UVe(r),r}catch(e){console.error(e)}return null}async function G2(){if(!await IM("feedback")){const e=KVe();if(e)return e}try{const e="./api/feedback.sli",t=await GT(e,{type:"arrayBuffer"}),n=new kH((e=>{})),o=new Uint8Array(t),i=pRe(!0);n.start({[i]:o});const r=n.record[i];return YVe(r),r}catch(e){console.error(e)}return null}async function X2(){const e="plan";if(!await IM(e)){const e=t$e();if(e)return e}try{const t=`./api/${e}.sli`,n=await GT(t,{type:"arrayBuffer"}),o=new kH((e=>{})),i=new Uint8Array(n),r=pRe(!0);o.start({[r]:i});const l=o.record[r];return e$e(l),l}catch(e){console.error(e)}return null}async function J2(){const e=Uf?"pricing.hybrid":"pricing";if(!await IM(e)){const e=XVe();if(e)return e}try{const t=`./api/${e}.sli`,n=await GT(t,{type:"arrayBuffer"}),o=new kH((e=>{})),i=new Uint8Array(n),r=pRe(!0);o.start({[r]:i});const l=o.record[r];return GVe(l),l}catch(e){console.error(e)}return null}async function Q2(e){var t,n;try{const o=await e.getFileContents(D$,"text");if(!o.data)return null!==(t=o.msg)&&void 0!==t?t:null;try{return JSON.parse(o.data)}catch(e){const t=TM(o.data);return 404===t.code?null:200===t.code?"服务器出了问题":null!==(n=t.msg)&&void 0!==n?n:"服务器出了问题"}}catch(e){return null}}async function e5(e){var t,n;try{const o=await e.getFileContents(I$,"text");if(!o.data)return null!==(t=o.msg)&&void 0!==t?t:null;try{return JSON.parse(o.data)}catch(e){const t=TM(o.data);return 404===t.code?null:200===t.code?"服务器出了问题":null!==(n=t.msg)&&void 0!==n?n:"服务器出了问题"}}catch(e){return null}}async function t5(e,t,n){var o,i;try{const r=await e.getFileContents(t,"text");if(!r.data)return null!==(o=r.msg)&&void 0!==o?o:n();try{return JSON.parse(r.data)}catch(e){const t=TM(r.data);return 404===t.code?n():200===t.code?"服务器出了问题":null!==(i=t.msg)&&void 0!==i?i:"服务器出了问题"}}catch(e){return null}}async function n5(e,t,n){var o;try{const i=await e.getFileContents(t,"arrayBuffer");if(!i.data)return{};try{const e={[t]:new Uint8Array(i.data)},o=await n.decompression(e);return o[t]?o[t]:(console.warn("getWebDavSDBData decompression failed"),{})}catch(e){const t=new TextDecoder("utf-8"),n=TM(t.decode(i.data));return 404===n.code?{}:200===n.code?"服务器出了问题":null!==(o=n.msg)&&void 0!==o?o:"服务器出了问题"}}catch(e){return{}}}async function o5(e,t,n,o){var i,r;let l=zUe(n);if(null==l?void 0:l.file){let n=l.file.tree.filter((e=>e.id===t));if(n.length){const t=await Q2(e);if(sc(t))return t;if(null===t){delete l.file.branch,l.file.tree=n;const t=await e.putFileContents(D$,JSON.stringify(l));if(200!==t.code)return null!==(i=t.msg)&&void 0!==i?i:"引导文件上传失败"}else if(t.file){const i=t.file.tree;let l=!1;for(let e=0;e<i.length;e++){const t=n.findIndex((t=>t.id===i[e].id));if(-1!==t){const r=Jl(n[t]),s=Jl(i[e]),c=["uids","path","expand"];for(const e of c)delete r[e],delete s[e];Ec(r,s)||o.push.reference.includes(n[t].id)&&(l=!0,i[e]=n[t]),n.splice(t,1)}}if(n.length>0&&(l=!0,i.push(...n)),l){for(let e=0;e<i.length;e++)i[e].path=[e];const n=await e.putFileContents(D$,JSON.stringify(t));if(200!==n.code)return null!==(r=n.msg)&&void 0!==r?r:"引导文件上传失败"}}}}return!0}async function i5(e,t){var n;const o=await e.putFileContents(I$,JSON.stringify(t));return 200===o.code||(null!==(n=o.msg)&&void 0!==n?n:"日志文件上传失败")}const{recursiveTree:r5}=xT;async function l5(e,t,n,o,i,r){const l=Object.keys(n),s=Br(l,5),c=[],a=[...l],u=e=>{if(e){const t=a.indexOf(e);-1!==t&&a.splice(t,1)}const n=`${l.length-a.length}/${l.length}`;o(ile(t,`上传笔记 ${n}`))};u();for(let t=0;t<s.length;t++){await Promise.all(s[t].map((async t=>{var o,l,s;const a=n[t];let d=!0;if(null===(o=a.data)||void 0===o?void 0:o.segments){const n={};for(const e of null!==(s=null===(l=a.data)||void 0===l?void 0:l.segments)&&void 0!==s?s:[]){const t=await uF(e);1===t.ok&&t.data&&(n[e]=t.data)}for(const o in n){const i=`${T$}/${o}.sli`;200!==(await e.putFileContents(i,n[o])).code&&(d=!1,c.push(t))}}if(a.buffer){const n=`${N$}/${t}.sli`;200!==(await e.putFileContents(n,a.buffer)).code&&(d=!1,c.push(t))}d&&(u(t),v5(t,"editor",i,r))})));const l=await i5(e,r);if(!0!==l)return l;o(_U(i,!0))}return!(c.length>0)||(c.length===l.length?"文档同步失败":"部分文档同步失败，请稍后同步")}async function s5(e,t,n,o,i,r,l){var s,c,a,u,d;const f=new GUe(S$,100,ts(n)),h={};for(const e of l.push.catalog){const{uuid:n,sn:o}=mRe(e),i=null===(c=null===(s=t.catalog)||void 0===s?void 0:s[n])||void 0===c?void 0:c[o];(null==i?void 0:i.data)&&(h[e]=i.data)}const p=[];for(const e in h){const t=f.setPath(e);p.includes(t)||p.push(t)}const v=await Promise.all(p.map((t=>{const n=VT.join(C$,t);return n5(e,n,o)})));let g=!1;for(const e in h){const t=f.getPath(e);if(!t)continue;const n=p.indexOf(t);if(-1===n)continue;const o=v[n];if(sc(o))return o;(null===(a=h[e].segments)||void 0===a?void 0:a.length)?g=!0:Ec(o[e],h[e])||(g=!0),g&&(null===(u=o[e])||void 0===u?void 0:u.children)&&r5(o[e].children,(e=>{var t,n,o;if("outline"!==e.type){const r=e.id,{uuid:s,sn:c}=mRe(r);(null===(o=null===(n=null===(t=i.delete)||void 0===t?void 0:t.editor)||void 0===n?void 0:n[s])||void 0===o?void 0:o.includes(c))&&(l.delete.remote.editor.includes(r)||l.delete.remote.editor.push(r),l.delete.remote.catalog.includes(r)||l.delete.remote.catalog.push(r),l.delete.remote.reference.includes(r)||l.delete.remote.reference.push(r))}})),o[e]=h[e]}if(g){const t=await Promise.all(p.map((async(t,n)=>{const i=VT.join(C$,t),r=v[n],l=await o.compression({[i]:r});return await e.putFileContents(i,l[i])})));if(t.some((e=>200!==e.code)))return"目录树保存失败";const i=f.getData();if(!Ec(i,n)){const t=await e.putFileContents(A$,JSON.stringify(i));if(200!==t.code)return null!==(d=t.msg)&&void 0!==d?d:"目录文件上传失败"}}return!0}async function c5(e,t,n,o,i,r,l){var s,c,a,u;const d=new GUe(E$,1e3,ts(n)),f=[];for(const e in t){const{data:n}=t[e].data,o=null===(s=n.props)||void 0===s?void 0:s.id;if(!o)continue;const i=d.setPath(o);f.includes(i)||f.push(i)}let h=!1;const p=await Promise.all(f.map((t=>{const n=VT.join(C$,t);return n5(e,n,o)})));for(const e in t){const{data:{data:n},pageId:o}=t[e],i=null===(c=n.props)||void 0===c?void 0:c.id;if(!i)continue;const r=d.getPath(i);if(!r)continue;const l=f.indexOf(r);if(-1===l)continue;const s=p[l];if(sc(s))return s;if(s[i]){const t=null!==(a=s[i].detail)&&void 0!==a?a:{};o&&e&&(void 0===t[o]?t[o]=[e]:t[o].includes(e)||t[o].push(e),Ec(s[i].detail,t)||(s[i].detail=t,h=!0));let r=0;for(const e in t)r+=t[e].length;s[i].count!==r&&(s[i].count=r,h=!0),Ec(s[i].data,n)||(s[i].data=n,h=!0)}else s[i]=t[e].data,h=!0}if(h){const t=await Promise.all(f.map((async(t,n)=>{const i=VT.join(C$,t),r=p[n],l=await o.compression({[i]:r});return await e.putFileContents(i,l[i])})));if(t.some((e=>200!==e.code)))return"引用文件提交失败";const i=d.getData();if(!Ec(i,n)){const t=await e.putFileContents(O$,JSON.stringify(i));if(200!==t.code)return null!==(u=t.msg)&&void 0!==u?u:"引用索引上传失败";Object.assign(n,i)}}let v=!1;for(const e in t){const{data:{data:n}}=t[e];HPe(n)||(v=!0,v5(e,"reference",r,l))}if(v){const t=await i5(e,l);if(!0!==t)return t;i(_U(r,!0))}return!0}async function a5(e,t,n,o,i){const r=Zc(Object.values(t)),l=Br(r,5),s=[];for(let r=0;r<l.length;r++){await Promise.all(l[r].map((async n=>{const r=await bF(n,"arrayBuffer");if(0===r.ok||!r.data)return;const l=n.split(".");l[1]=R$e(l[1]);const c=l.join("."),a=`${L$}/${c}`;if(200===(await e.putFileContents(a,r.data)).code)for(const e in t)t[e]===n&&v5(e,"reference",o,i);else s.push(n)})));const c=await i5(e,i);if(!0!==c)return c;n(_U(o,!0))}return!(s.length>0)||(s.length===r.length?"资源同步失败":"部分资源同步失败，请稍后同步")}async function u5(e,t,n,o,i,r){var l,s;r(tle(n,{status:2}),ile(n,"删除笔记"));const c=null===(l=i.stater.get().file)||void 0===l?void 0:l.tree;if(!(null==c?void 0:c.length))return"删除失败";let a=Jl(c.find((e=>e.id===t)));if(!a)return"删除失败";a=await cK({...a,children:[]},o,{deep:!0});const u=(await iF()).data;if(!u)return"同步日志丢失";const d=null!==(s=await e5(e))&&void 0!==s?s:{};if(sc(d))return d;const f=await t5(e,A$,(function(){return new GUe(S$,100).getData()}));if("string"==typeof f)return f;if(null===f)return"目录索引错误";const h=await t5(e,O$,(function(){return new GUe(E$,1e3).getData()}));if("string"==typeof h)return h;if(null===h)return"引用索引错误";const p=await D5(e,t,f,o);if("string"==typeof p)return p;const v={},g={};for(const e in p){const t=p[e];Object.assign(g,t.uids),t.segments&&(v[e]=t.segments)}const m=Object.keys(p);if(m.length){const t=await f5(e,m,f,o);if("string"==typeof t)return t}const y=Object.keys(p);if(y.length){const t=await h5(e,y,v,r,u,d);if("string"==typeof t)return t}const b=Object.keys(g);if(b.length){const t=await d5(e,b,h,o,r,u,d,p);if("string"==typeof t)return t}return r(_U(u,!0)),!0}async function d5(e,t,n,o,i,r,l,s){var c,a;const u=null===(c=r.record)||void 0===c?void 0:c.reference;if(!u)return"笔记资源同步失败";const d={};for(const e of t){const t=u[e];t?d[e]=t:m5(e,"reference",r,l)}const f=new GUe(E$,1e3,ts(n)),h=[],p=Zc(Object.values(d));for(const e of p){const t=f.getPath(e);t&&(h.includes(t)||h.push(t))}const v=await Promise.all(h.map((t=>{const n=VT.join(C$,t);return n5(e,n,o)})));let g=!1;for(const t in d){const n=d[t],o=f.getPath(n);if(!o)continue;const i=h.indexOf(o);if(-1===i)continue;const l=v[i];if(sc(l))return l;if(l[n]){const o=l[n].detail;let i=0;for(const e in o){const n=o[e],r=n.indexOf(t);-1!==r&&s[e]&&(n.splice(r,1),g=!0),i+=n.length,0===n.length&&(delete o[e],g=!0)}if(0===i){const{data:o}=l[n];if(HPe(o)){const t=n.split(".");t[1]=R$e(t[1]);const o=t.join("."),i=`${L$}/${o}`;await e.deleteFile(i)}delete l[n],f.delete(n),w5(t,"reference",r),g=!0}}}if(g){const t=await Promise.all(h.map((async(t,n)=>{const i=VT.join(C$,t),r=v[n],l=await o.compression({[i]:r});return await e.putFileContents(i,l[i])})));if(t.some((e=>200!==e.code)))return"引用文件提交失败";const i=f.getData();if(!Ec(i,n)){const t=await e.putFileContents(O$,JSON.stringify(i));if(200!==t.code)return null!==(a=t.msg)&&void 0!==a?a:"引用索引上传失败";Object.assign(n,i)}}for(const e in d)m5(e,"reference",r,l);const m=await i5(e,l);return!0!==m?m:(i(_U(r,!0)),!0)}async function f5(e,t,n,o){var i;const r=new GUe(S$,100,ts(n)),l=[];for(const e of t){const t=r.getPath(e);t&&(l.includes(t)||l.push(t))}const s=await Promise.all(l.map((t=>{const n=VT.join(C$,t);return n5(e,n,o)})));for(const e of t){const t=r.getPath(e);if(!t)continue;const n=l.indexOf(t);if(-1===n)continue;const o=s[n];if(sc(o))return o;delete o[e],r.delete(e)}const c=await Promise.all(l.map((async(t,n)=>{const i=VT.join(C$,t),r=s[n],l=await o.compression({[i]:r});return await e.putFileContents(i,l[i])})));if(c.some((e=>200!==e.code)))return"目录树保存失败";const a=r.getData();if(!Ec(a,n)){const t=await e.putFileContents(A$,JSON.stringify(a));if(200!==t.code)return null!==(i=t.msg)&&void 0!==i?i:"目录文件上传失败"}}async function h5(e,t,n,o,i,r){const l=Br(t,5),s=[];for(let t=0;t<l.length;t++)await Promise.all(l[t].map((async t=>{const o=await lF(t);if(1===o.ok&&o.data)return void s.push(t);const i=`${N$}/${t}.sli`,r=await e.deleteFile(i);if(200===r.code||404===r.code){if(n[t])for(const o of n[t]){const n=`${T$}/${o}.sli`,i=await e.deleteFile(n);if(200!==i.code&&404!==i.code)return void s.push(t)}}else s.push(t)})));for(const e of t)s.includes(e)||m5(e,"editor",i,r);const c=await i5(e,r);return!0!==c?c:(o(_U(i,!0)),!0)}async function p5(e,t,n,o,i,r){var l,s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x,S,E,k,D,I,N,L,B,T,A,M,O,R,P,F,H,_,j,W;r(tle(n,{status:2})),r(ile(n,"同步启动项"));const z=i.stater.get(),V=(await iF()).data;if(!V)return"同步日志丢失";const $=null!==(l=await e5(e))&&void 0!==l?l:{};if(sc($))return $;const Z=await oqe(t,z,o);if(null===Z)return"同步逻辑错误";const U=await lF(t);let q=!1;0!==U.ok&&U.data||(q=!0);const Y=await JUe(t,Z,V,$,o,q),K=await o5(e,t,z,Y);if(!0!==K)return K;let G=null,X=null,J=null;function Q(){return new GUe(S$,100).getData()}function ee(){return new GUe(E$,1e3).getData()}if(Y.conflict.catalog.length){for(const e of Y.conflict.catalog){const{uuid:t,sn:n}=mRe(e),o=null===(a=null===(c=null===(s=V.update)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[t])||void 0===a?void 0:a[n],i=null===(f=null===(d=null===(u=$.update)||void 0===u?void 0:u.editor)||void 0===d?void 0:d[t])||void 0===f?void 0:f[n];o&&i&&(o[0]>=i?Y.push.catalog.includes(e)||Y.push.catalog.push(e):o[0]<i&&(Y.pull.catalog.includes(e)||Y.pull.catalog.push(e)))}Y.conflict.catalog.length=0}if(Y.push.catalog.length){if(r(ile(n,"更新目录树")),null===G){if(G=await t5(e,A$,Q),"string"==typeof G)return G;if(null===G)return"目录树同步失败"}if(null===J&&(J=await D5(e,t,G,o,!1)),"string"==typeof J)return J;const i=await s5(e,Z,G,o,V,0,Y);if(!0!==i)return i}if(Y.pull.catalog.length){if(r(ile(n,"更新目录树")),null===G&&(G=await t5(e,A$,Q),"string"==typeof G))return G;if(null===G)return"目录树同步失败";const i=await D5(e,t,G,o,!0);if("string"==typeof i)return i;null===J?J=i:Object.assign(J,i);const{uuid:l,sn:s}=mRe(t);if(!(null===(g=null===(v=(null===(p=null===(h=Z.catalog)||void 0===h?void 0:h[l])||void 0===p?void 0:p[s]).data)||void 0===v?void 0:v.children)||void 0===g?void 0:g[0])||q)for(const e in J)Y.pull.editor.includes(e)||Y.pull.editor.push(e);else QUe(Z,V,$,Y,J);const c=null===(m=z.file)||void 0===m?void 0:m.tree.find((e=>e.id===t));c&&r(V3(t,J))}if(Y.delete.local.catalog.length){r(ile(n,"更新目录树"));const e=Y.delete.local.catalog;r(Aq({catalog:e}))}if(Y.delete.remote.catalog.length){if(r(ile(n,"更新目录树")),null===G){if(G=await t5(e,A$,Q),"string"==typeof G)return G;if(null===G)return"目录更新失败"}if(null===J&&(J=await D5(e,t,G,o,!1)),"string"==typeof J)return J;const i=Y.delete.remote.catalog,l=await f5(e,i,G,o);if("string"==typeof l)return l}if(Y.conflict.editor.length){for(const e of Y.conflict.editor){const{uuid:t,sn:n}=mRe(e),o=null===(C=null===(b=null===(y=V.update)||void 0===y?void 0:y.editor)||void 0===b?void 0:b[t])||void 0===C?void 0:C[n],i=null===(S=null===(x=null===(w=$.update)||void 0===w?void 0:w.editor)||void 0===x?void 0:x[t])||void 0===S?void 0:S[n];o&&i&&(o[0]>i?Y.push.editor.includes(e)||Y.push.editor.push(e):o[0]<i?Y.pull.editor.includes(e)||Y.pull.editor.push(e):v5(e,"editor",V,$))}Y.conflict.editor.length=0}if(Y.push.editor.length){r(ile(n,"上传笔记"));const t={};for(const e of Y.push.editor){const{uuid:n,sn:o}=mRe(e),i=null===(k=null===(E=Z.editor)||void 0===E?void 0:E[n])||void 0===k?void 0:k[o];i&&(t[e]=i)}let o=!0;Sc(t)||(o=await l5(e,n,t,r,V,$)),!0!==o&&(r(ile(n,o)),await new Promise((e=>{setTimeout((()=>e(null)),1e3)})))}if(Y.pull.editor.length){r(ile(n,"下载笔记"));const t=Y.pull.editor,i=await k5(e,n,t,o,r,V,$);if("string"==typeof i)return i;for(const e in i)r(WU("editor",e,-1)),S5(Z,e,i[e],V,$,Y,q)}if(Y.delete.local.editor.length){const e=Y.delete.local.editor;r(Aq({editor:e}));for(const t of e)m5(t,"editor",V,$)}if(Y.delete.remote.editor.length){if(r(ile(n,"同步笔记")),null===G&&(G=await t5(e,A$,Q),"string"==typeof G))return G;if(null===G)return"目录树同步失败";if(null===J&&(J=await D5(e,t,G,o,!1)),"string"==typeof J)return J;const i=Y.delete.remote.editor,l={};for(const e of i){const t=J[e];t&&(t.segments&&(l[e]=t.segments))}const s=await h5(e,i,l,r,V,$);if("string"==typeof s)return s}if(Y.conflict.reference.length){for(const e of Y.conflict.reference){const{uuid:t,sn:n}=mRe(e),o=null===(N=null===(I=null===(D=V.update)||void 0===D?void 0:D.reference)||void 0===I?void 0:I[t])||void 0===N?void 0:N[n],i=null===(T=null===(B=null===(L=$.update)||void 0===L?void 0:L.reference)||void 0===B?void 0:B[t])||void 0===T?void 0:T[n];o&&i?o[0]>i?Y.push.reference.includes(e)||Y.push.reference.push(e):o[0]<i?Y.pull.reference.includes(e)||Y.pull.reference.push(e):v5(e,"reference",V,$):(w5(e,"reference",V),m5(e,"reference",V,$))}Y.conflict.reference.length=0}if(Y.push.reference.length){if(r(ile(n,"同步笔记资源")),null===X&&(X=await t5(e,O$,ee),"string"==typeof X))return X;if(null===X)return"笔记资源同步失败";Sc(Z.reference)&&await E5(Z,V,Y);const t={},i={};for(const e of Y.push.reference){const{uuid:n,sn:o}=mRe(e),r=null===(M=null===(A=Z.reference)||void 0===A?void 0:A[n])||void 0===M?void 0:M[o];if(null==r?void 0:r.data){if(null==r?void 0:r.data){t[e]={...r,data:r.data};const{data:n}=r.data;if(HPe(n)){const t=null===(O=n.props)||void 0===O?void 0:O.id;t&&(i[e]=t)}}}else w5(e,"reference",V),m5(e,"reference",V,$)}const l=await c5(e,t,X,o,r,V,$);if(!0!==l&&(r(ile(n,l)),await new Promise((e=>{setTimeout((()=>e(null)),1e3)}))),!Sc(i)){const t=await a5(e,i,r,V,$);!0!==t&&(r(ile(n,t)),await new Promise((e=>{setTimeout((()=>e(null)),1e3)})))}}if(Y.pull.reference.length){if(r(ile(n,"同步笔记资源")),null===X&&(X=await t5(e,O$,ee),"string"==typeof X))return X;if(null===X)return"笔记资源同步失败";const t={},i=Y.pull.reference;for(const e in Z.editor){const n=Z.editor[e];for(const o in n){const l=yRe(e,o),s=n[o].data;if(!s)continue;const c=s.uids;for(const e in c){const n=c[e];i.includes(e)&&(t[e]={pageId:l,id:n},r(WU("reference",e,-1)))}}}const l=await I5(e,t,X,o,r,V,$);if("string"==typeof l)return l;const s={};for(const e in l){const t=l[e].data;if(HPe(t)){const n=null===(R=t.props)||void 0===R?void 0:R.id;n&&(s[e]=n)}}if(!Sc(s)){const t=await N5(e,s,r,V,$);if("string"==typeof t)return t}}if(Y.delete.local.reference.length){r(ile(n,"同步笔记资源")),Sc(Z.reference)&&await E5(Z,V,Y);for(const e of Y.delete.local.reference){const{uuid:t,sn:n}=mRe(e),o=null===(F=null===(P=Z.reference)||void 0===P?void 0:P[t])||void 0===F?void 0:F[n];if(!(null==o?void 0:o.data)){w5(e,"reference",V),m5(e,"reference",V,$);continue}const{data:{data:i},pageId:l}=o,s=null===(H=i.props)||void 0===H?void 0:H.id;if(!s)continue;const{uuid:c,sn:a}=mRe(l);(null===(j=null===(_=Z.catalog)||void 0===_?void 0:_[c])||void 0===j?void 0:j[a])&&(r(kq(s,e,l,!1)),w5(e,"reference",V),m5(e,"reference",V,$))}}if(Y.delete.remote.reference.length){if(r(ile(n,"同步笔记资源")),null===X&&(X=await t5(e,O$,ee),"string"==typeof X))return X;if(null===X)return"笔记资源同步失败";if(null===G){if(G=await t5(e,A$,Q),"string"==typeof G)return G;if(null===G)return"笔记资源同步失败"}if(null===J&&(J=await D5(e,t,G,o,!1)),"string"==typeof J)return J;const i=Y.delete.remote.reference,l=await d5(e,i,X,o,r,V,$,J);if("string"==typeof l)return l}r(_U(V,!0));for(const e of Y.pull.editor){if((null===(W=z.file)||void 0===W?void 0:W.currentPageId)===e){const t=await _Y(e,o,!0);r(rq(t),V4(e))}}return UH({type:kJ.WEBDAV_SYNC_ACTIONS,payload:Y}),!0}function v5(e,t,n,o){var i,r,l,s;const{uuid:c,sn:a}=mRe(e),u=Math.floor(Date.now()/1e3),d=null!==(s=null===(l=null===(r=null===(i=n.update)||void 0===i?void 0:i[t])||void 0===r?void 0:r[c])||void 0===l?void 0:l[a])&&void 0!==s?s:[u];d[1]=d[0],y5(e,t,o,d[1])}function g5(e,t,n,o){var i,r,l;const{uuid:s,sn:c}=mRe(e);let a=null===(l=null===(r=null===(i=o.update)||void 0===i?void 0:i[t])||void 0===r?void 0:r[s])||void 0===l?void 0:l[c];a||(a=Math.floor(Date.now()/1e3)),b5(e,t,n,a)}function m5(e,t,n,o){var i,r,l,s,c,a;const{uuid:u,sn:d}=mRe(e);(null===(l=null===(r=null===(i=n.update)||void 0===i?void 0:i[t])||void 0===r?void 0:r[u])||void 0===l?void 0:l[d])&&(delete n.update[t][u][d],Sc(n.update[t][u])&&delete n.update[t][u]),(null===(a=null===(c=null===(s=o.update)||void 0===s?void 0:s[t])||void 0===c?void 0:c[u])||void 0===a?void 0:a[d])&&(delete o.update[t][u][d],Sc(o.update[t][u])&&delete o.update[t][u]),x5(e,t,n),x5(e,t,o)}function y5(e,t,n,o){var i,r,l,s;const{uuid:c,sn:a}=mRe(e);n.update||(n.update={}),n.update[t]||(n.update[t]={}),n.update[t][c]||(n.update[t][c]={}),n.update[t][c][a]=o;const u=null===(r=null===(i=n.delete)||void 0===i?void 0:i[t])||void 0===r?void 0:r[c];if(null==u?void 0:u.includes(a)){const e=u.indexOf(a);u.splice(e,1)}(null==u?void 0:u.length)||null===(s=null===(l=n.delete)||void 0===l?void 0:l[t])||void 0===s||delete s[c]}function b5(e,t,n,o){var i,r,l,s;const{uuid:c,sn:a}=mRe(e);n.update||(n.update={}),n.update[t]||(n.update[t]={}),n.update[t][c]||(n.update[t][c]={}),n.update[t][c][a]=[o,o];const u=null===(r=null===(i=n.delete)||void 0===i?void 0:i[t])||void 0===r?void 0:r[c];if(null==u?void 0:u.includes(a)){const e=u.indexOf(a);u.splice(e,1)}(null==u?void 0:u.length)||null===(s=null===(l=n.delete)||void 0===l?void 0:l[t])||void 0===s||delete s[c]}function C5(e,t,n,o){n.record||(n.record={}),n.record[t]||(n.record[t]={}),n.record[t][e]=o}function w5(e,t,n){var o,i;null===(i=null===(o=null==n?void 0:n.record)||void 0===o?void 0:o[t])||void 0===i||delete i[e]}function x5(e,t,n){const{uuid:o,sn:i}=mRe(e);n.delete||(n.delete={}),n.delete[t]||(n.delete[t]={}),n.delete[t][o]||(n.delete[t][o]=[]),n.delete[t][o].includes(i)||n.delete[t][o].push(i)}function S5(e,t,n,o,i,r,l){var s,c,a;const{uuid:u,sn:d}=mRe(t);e.editor[u]||(e.editor[u]={}),e.editor[u][d]={data:n};for(const e in n.uids){const{uuid:t,sn:n}=mRe(e);if(!(null===(a=null===(c=null===(s=o.update)||void 0===s?void 0:s.reference)||void 0===c?void 0:c[t])||void 0===a?void 0:a[n])||l){const t=r.pull.reference;t.includes(e)||t.push(e)}}return e}async function E5(e,t,n){var o;const i=null===(o=t.record)||void 0===o?void 0:o.reference;if(!i)return;const r={};for(const e of n.push.reference)i[e]&&(r[e]=i[e]);for(const e of n.delete.local.reference)i[e]&&(r[e]=i[e]);const l=Zc(Object.values(r)),s=await mF(l);if(0!==s.ok&&s.data)for(const t in r){const n=r[t],o=s.data[n];if(o)for(const i in o.detail)for(const r of o.detail[i])if(r===t){const{uuid:o,sn:r}=mRe(t);e.reference[o]||(e.reference[o]={}),e.reference[o][r]={pageId:i,data:s.data[n]}}}}async function k5(e,t,n,o,i,r,l){const s=Br(n,5),c=[],a={},u=[...n],d=e=>{if(e){const t=u.indexOf(e);-1!==t&&u.splice(t,1)}const o=`${n.length-u.length}/${n.length}`;i(ile(t,`下载笔记 ${o}`))};d();for(let t=0;t<s.length;t++)await Promise.all(s[t].map((async t=>{var n;const i=`${N$}/${t}.sli`;try{const s=await e.getFileContents(i,"arrayBuffer");if(!s.data)return d(t),void c.push(t);const u=new Uint8Array(s.data),f={[i]:u},h=await o.decompression(f);if(!h[i])return d(t),void c.push(t);const p=h[i];a[t]=p,Uf?await rF(t,p):await rF(t,u);let v=!0;for(const t of null!==(n=p.segments)&&void 0!==n?n:[]){const n=`${T$}/${t}.sli`,i=await e.getFileContents(n,"arrayBuffer");if(i.data){const e=new Uint8Array(i.data);if(Uf){const i={[n]:e},r=await o.decompression(i);if(!r[n])continue;await aF(t,r[n])}else await aF(t,e)}else v=!1}v&&(d(t),g5(t,"editor",r,l))}catch(e){d(t),c.push(t)}}))),i(_U(r,!0));return a}async function D5(e,t,n,o,i=!0){var r;const l=new GUe(S$,100,ts(n)),s={},c={},a=[t];for(;a.length;){const t=a.pop();if(!c[t]){const n=l.getPath(t);if(!n)continue;const i=await n5(e,VT.join(C$,n),o);if(sc(i))return i;Object.assign(c,i)}if(c[t]){if(s[t]=c[t],null===(r=c[t].children)||void 0===r?void 0:r.length)for(const e of c[t].children)e&&"outline"!==e.type&&a.push(e.id)}else;}return i&&await fF(s),s}async function I5(e,t,n,o,i,r,l){var s;const c=new GUe(E$,1e3,ts(n)),a={},u={},d=[];for(const e in t){const n=t[e].id,o=c.getPath(n);o&&(d.includes(o)||d.push(o))}const f=await Promise.all(d.map((t=>{const n=VT.join(C$,t);return n5(e,n,o)})));for(const e of f){if(sc(e))return e;for(const n in t){const o=t[n].id;e[o]&&(a[n]=e[o],u[o]=e[o])}}for(const e in t){const n=Jl(null===(s=a[e])||void 0===s?void 0:s.data);if(!n)continue;const{id:o,pageId:c}=t[e];n.props={...n.props,uid:e},i(Sq(o,n,c,!1)),C5(e,"reference",r,o),HPe(n)||g5(e,"reference",r,l)}return await vF(u),i(_U(r,!0)),a}async function N5(e,t,n,o,i){const r=Zc(Object.values(t)),l=Br(r,5),s=[];for(let r=0;r<l.length;r++)await Promise.all(l[r].map((async n=>{const r=n.split(".");r[1]=R$e(r[1]);const l=r.join("."),c=`${L$}/${l}`,a=await e.getFileContents(c,"arrayBuffer");if(200!==a.code)s.push(n);else if(a.data){await yF(n,a.data);for(const e in t)t[e]===n&&g5(e,"reference",o,i)}}))),n(_U(o,!0));return!(s.length>0)||(s.length===r.length?"资源同步失败":"部分资源同步失败，请稍后同步")}async function L5(e){const t=await e.getDirectoryContents(C$),n=[N$,T$,M$,B$,L$];if(404===t.code){if(e.url.includes(".123pan.cn"))return{code:123,msg:"请手动新建 shuli 文件夹"};const t=await e.createDirectory(`${C$}`);if(200!==t.code)return t}else if(200!==t.code)return t;if(t.data)for(const{filename:e}of t.data){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}return(await Promise.all(n.map((t=>e.createDirectory(t))))).some((e=>200!==e.code))?{code:403}:{code:200,data:!0}}async function B5(e,t,n,o){var i,r,l,s,c,a,u,d,f;const{service:h,username:p,password:v}=e,g=new xM(h,{username:p,password:v}),m=(await iF()).data;if(!m)return 0;const y=await e5(g);if(!y||sc(y))return 0;const b={},C=Zc([...Object.keys(null!==(r=null===(i=y.update)||void 0===i?void 0:i.editor)&&void 0!==r?r:{}),...Object.keys(null!==(s=null===(l=m.update)||void 0===l?void 0:l.editor)&&void 0!==s?s:{})]);for(const e of C){const t=null===(a=null===(c=y.update)||void 0===c?void 0:c.editor)||void 0===a?void 0:a[e],n=null===(d=null===(u=m.update)||void 0===u?void 0:u.editor)||void 0===d?void 0:d[e];if(!t&&n){for(const t in n){b[yRe(e,t)]=1}continue}if(t&&!n){for(const n in t){b[yRe(e,n)]=2}continue}if(!n||!t)continue;const o=Zc([...Object.keys(n),...Object.keys(t)]);for(const i of o)if(!n[i]||t[i])if(n[i]||!t[i]){if(n[i][0]!==t[i]){const o=yRe(e,i);n[i][0]>t[i]?n[i][1]&&n[i][1]!==t[i]?b[o]=3:b[o]=1:n[i][0]<t[i]?n[i][0]===n[i][1]?b[o]=2:b[o]=3:b[o]=0}}else{b[yRe(e,i)]=2}else{b[yRe(e,i)]=1}}let w=0;const x={};for(const e in b){const n=await uK(e,x);if((null==n?void 0:n[0])===t){if(0===w){w=b[e];continue}if(1===w){if(2===b[e]){w=3;break}continue}if(2===w){if(1===b[e]){w=3;break}continue}if(3===w)break}}const S=null===(f=n.file)||void 0===f?void 0:f.tree.find((e=>e.id===t));return S?(S.update!==w&&o(tle(e,{update:w}),s6(S,{update:w})),e.update!==w&&o(a8(t,e.id,{update:w})),w):0}async function T5(e){void 0===e&&(e=document.body.clientWidth<=1280);const t="useragreement";if(!await IM(t)){const e=VVe();if(e)return e}try{const e=`./api/${t}.sli`,n=await GT(e,{type:"arrayBuffer"}),o=new kH((e=>{})),i=new Uint8Array(n),r=pRe(!0);o.start({[r]:i});const l=o.record[r];return zVe(l),l}catch(e){console.error(e)}return null}async function A5(e){void 0===e&&(e=document.body.clientWidth<=1280);const t="privacypolicy";if(!await IM(t)){const e=ZVe();if(e)return e}try{const e=`./api/${t}.sli`,n=await GT(e,{type:"arrayBuffer"}),o=new kH((e=>{})),i=new Uint8Array(n),r=pRe(!0);o.start({[r]:i});const l=o.record[r];return $Ve(l),l}catch(e){console.error(e)}return null}async function M5(){const e="webdav";if(!await IM(e)){const e=o$e();if(e)return e}try{const t=`./api/${e}.sli`,n=await GT(t,{type:"arrayBuffer"}),o=new kH((e=>{})),i=new Uint8Array(n),r=pRe(!0);o.start({[r]:i});const l=o.record[r];return n$e(l),l}catch(e){console.error(e)}return null}const{getNavigateUid:O5}=n2;function R5(e){const t=R(EU),n=R(LU),o=R(NU),i=P5(e),r=_5(e),l=async(e,n,o)=>{t(tle(n,{validated:!0}));const{service:i,username:r,password:l,pulling:s}=n;if(!(null==i?void 0:i.trim())||!(null==r?void 0:r.trim())||!(null==l?void 0:l.trim()))return;if(!BM(i))return;if(s)return;e.stopPropagation(),t(tle(n,{pulling:!0}));const c=new xM(i,{username:r,password:l}),a=await Q2(c);t(tle(n,{pulling:!1})),a&&!sc(a)&&t(nle(n,a))};return{onCloseModal:()=>{t(Vre(!1))},onClickContainer:e=>{t(Yre(),Kre())},onClickSync:async(e,l,s)=>{var c,a,u;const{selected:d,id:f}=l,h=null==d?void 0:d.id;if(h){const e=null===(u=null===(a=null===(c=o.stater.get().file)||void 0===c?void 0:c.cloud)||void 0===a?void 0:a[h])||void 0===u?void 0:u.find((e=>e.id===f));(null==e?void 0:e.timer)&&clearTimeout(e.timer)}await i(l,t,n,o),h&&requestAnimationFrame((()=>{r(h,t,n,o)}))},onClickSyncFully:async(n,o,i)=>{const r=MK[e.lang][AK.syncFully],l={title:r,children:MK[e.lang][AK.syncFullyMessage],visible:!0,okText:r,onCancel(e){t(ole({...l,visible:!1}))},onOk(e){t(ole({...l,visible:!1}))}};t(ole(l))},onClickAdd:e=>{t(Gre())},onClickNew:(n,i,r)=>{n.stopPropagation(),t(nre(e)),requestAnimationFrame((()=>{var e,n;const r=null!==(n=null===(e=o.stater.get().file)||void 0===e?void 0:e.tree.map((e=>({...e,children:void 0,expand:!1}))))&&void 0!==n?n:[];t(tle(i,{roots:r}))}))},onClickCopy:(e,n,o)=>{e.stopPropagation(),t(Jre(n))},onClickQRCode:async(e,n,o)=>{const i=YUe(n),r=XQ.encrypt(s$,JSON.stringify(i)),l={title:"",children:G(n3,{qrcode:await x0.toString(r,{type:"svg",width:200})}),visible:!0,showFooter:!1,onCancel(){t(ole({...l,visible:!1}))}};t(ole(l))},onClickPull:l,onClickBind:(e,i,l)=>{var s,c,a;t(tle(i,{validated:!0}));const{id:u,mode:d,service:f,username:h,password:p,usernameInvisible:v,passwordInvisible:g,selected:m,bind:y}=i;if(!(null==f?void 0:f.trim())||!(null==h?void 0:h.trim())||!(null==p?void 0:p.trim()))return;if(!BM(f))return;if(!m||y)return;const b=null==m?void 0:m.id;if(b){const e=null===(a=null===(c=null===(s=o.stater.get().file)||void 0===s?void 0:s.cloud)||void 0===c?void 0:c[b])||void 0===a?void 0:a.find((e=>e.id===u));(null==e?void 0:e.timer)&&clearTimeout(e.timer)}const C={type:"webdav",bind:!0,id:u,mode:d,service:f,username:h,password:p,usernameInvisible:v,passwordInvisible:g};t(z3(m,!0),ele(i,!0),f8(m.id),s8(m.id,C),s6(m,{icon:t3})),b&&requestAnimationFrame((()=>{r(b,t,n,o)}))},onClickUnBind:(e,n,i)=>{var r,l,s;const{selected:c,bind:a,id:u}=n;if(!c||!a)return;const d=null==c?void 0:c.id;if(d){const e=null===(s=null===(l=null===(r=o.stater.get().file)||void 0===r?void 0:r.cloud)||void 0===l?void 0:l[d])||void 0===s?void 0:s.find((e=>e.id===u));(null==e?void 0:e.timer)&&clearTimeout(e.timer)}n.working||t(tle(n,{syncing:!1,update:0}),ele(n,!1),a8(c.id,u,{update:0,bind:!1,timer:null}),c6(c,{icon:t3,syncing:!1,update:0}))},onClickFold:(e,n,o)=>{const{selected:i,fold:r,id:l}=n;i&&!r&&t(tle(n,{fold:!0}),a8(i.id,l,{fold:!0}))},onClickUnFold:(e,n,o)=>{const{selected:i,fold:r,id:l}=n;i&&r&&t(tle(n,{fold:!1}),a8(i.id,l,{fold:!1}))},onClickRemove:(e,n,i)=>{var r,l,s;const{selected:c,bind:a,id:u}=n;if(!c)return void t(Xre(n));const d=null==c?void 0:c.id;if(d){const e=null===(s=null===(l=null===(r=o.stater.get().file)||void 0===r?void 0:r.cloud)||void 0===l?void 0:l[d])||void 0===s?void 0:s.find((e=>e.id===u));(null==e?void 0:e.timer)&&clearTimeout(e.timer)}return n.working?void 0:(t(Xre(n),c8(c.id,u)),void(a&&t(c6(c,{icon:t3,syncing:!1,update:0}))))},onClickSelects:(e,n,o)=>{e.stopPropagation(),n.bind||(t(Yre(n)),n.selectorVisible||l(e,n))},onClickSelect:(n,o,i)=>{var r,l;const s=null===(r=e.file)||void 0===r?void 0:r.cloud;if(null===(l=null==s?void 0:s[i.id])||void 0===l?void 0:l.length){const n={title:MK[e.lang][AK.syncAlready],children:MK[e.lang][AK.syncAlreadyMessage],visible:!0,showCancel:!1,onOk(e){t(ole({...n,visible:!1}))}};t(ole(n))}else t(tle(o,{selected:i}))},onClickUsernameVisible:(e,n,o)=>{t(Ure(n))},onClickPasswordVisible:(e,n,o)=>{t(qre(n))},onClickModes:(e,n,o)=>{e.stopPropagation(),n.fold||t(Kre(n))},onClickMode:(e,i,l)=>{var s,c,a;const{selected:u,id:d,bind:f}=i,h=null==u?void 0:u.id;if(h){const e=null===(a=null===(c=null===(s=o.stater.get().file)||void 0===s?void 0:s.cloud)||void 0===c?void 0:c[h])||void 0===a?void 0:a.find((e=>e.id===d));(null==e?void 0:e.timer)&&clearTimeout(e.timer),f&&requestAnimationFrame((()=>{r(h,t,n,o)}))}t(tle(i,{mode:l})),h&&t(a8(h,d,{mode:l}))},onInputService:(e,n,o)=>{const i=e.target.value;t(tle(n,{service:i}))},onInputUsername:(e,n,o)=>{const i=e.target.value;t(tle(n,{username:i}))},onInputPassword:(e,n,o)=>{const i=e.target.value;t(tle(n,{password:i}))},onTransitionEnd:(e,n)=>{n.syncing&&t(rle(n))}}}function P5(e){const t=Z(null);return F((()=>()=>{null!==t.current&&clearTimeout(t.current)}),[]),_((async(n,o,i,r)=>{var l;o(tle(n,{validated:!0}));const{id:s,mode:c,service:a,username:u,password:d,usernameInvisible:f,passwordInvisible:h,selected:p}=n;if(!(null==a?void 0:a.trim())||!(null==u?void 0:u.trim())||!(null==d?void 0:d.trim()))return;if(!BM(a))return;if(!(null==p?void 0:p.id))return;null!==t.current&&(clearTimeout(t.current),t.current=null);const v={type:"webdav",bind:!0,id:s,mode:c,service:a,username:u,password:d,usernameInvisible:f,passwordInvisible:h};o(ele(n,!0),tle(n,{syncing:!0,update:0,status:0}),ile(n,""),rle(n),z3(p,!0),f8(p.id),s8(p.id,{...v,syncing:!0,update:0}),s6(p,{icon:t3,syncing:!0,update:0}));const g=new xM(a,{username:u,password:d}),m=await L5(g);if(123===m.code){const t=MK[e.lang][AK.webdav123Title],n=MK[e.lang][AK.webdav123Message];if(Uf)KH({title:t,message:n,confirm:{value:"确定",fontColor:yf}});else{const e={title:t,children:n,visible:!0,onCancel(t){o(ole({...e,visible:!1}))},onOk(t){o(ole({...e,visible:!1}))}};o(ole(e))}}if(200!==m.code){const e=null!==(l=m.msg)&&void 0!==l?l:"根目录创建失败";return void o(ele(n,!1),tle(n,{syncing:!1,status:-1}),ile(n,e),s8(p.id,{...v,syncing:!1,update:0}),s6(p,{icon:t3,syncing:!1,update:0}))}const y=await p5(g,p.id,n,i,r,o);!0===y?(o(ele(n,!0),tle(n,{syncing:!1,status:1}),ile(n,"同步完成"),lle(n.selected),s8(p.id,{...v,syncing:!1,update:0}),s6(p,{icon:t3,syncing:!1,update:0})),t.current=setTimeout((()=>{o(tle(n,{status:0}),ile(n,""))}),2e3)):o(ele(n,!1),tle(n,{syncing:!1,status:-1}),ile(n,y),s8(p.id,{...v,syncing:!1,update:0}),s6(p,{icon:t3,syncing:!1,update:0}))}),[])}function F5(){return _((async(e,t,n,o)=>{const{id:i,mode:r,service:l,username:s,password:c,usernameInvisible:a,passwordInvisible:u,selected:d}=e;if(!(null==l?void 0:l.trim())||!(null==s?void 0:s.trim())||!(null==c?void 0:c.trim()))return;if(!BM(l))return;if(!(null==d?void 0:d.id))return;const f={type:"webdav",bind:!0,id:i,mode:r,service:l,username:s,password:c,usernameInvisible:a,passwordInvisible:u};t(tle(e,{syncing:!0,update:0,status:0}),ile(e,""),rle(e),s8(d.id,{...f,syncing:!0,update:0}),s6(d,{icon:t3,syncing:!0,update:0}));const h=new xM(l,{username:s,password:c}),p=await u5(h,d.id,e,n,o,t);!0===p?t(tle(e,{syncing:!1,status:1}),ile(e,""),d8(d.id),Qre(e)):t(tle(e,{syncing:!1,status:-1}),ile(e,p),s8(d.id,{...f,syncing:!1,update:0}),s6(d,{icon:t3,syncing:!1,update:0}))}),[])}function H5(e,t,n,o,i,r){const l=Z(!1),s=_5(e);F((()=>{var e;if(!(null===(e=t.file)||void 0===e?void 0:e.cloud)||!t.changelog)return;if(l.current)return;l.current=!0;const c=UUe(t.file.cloud);return(async()=>{const e=Object.keys(c),l={};if(await Promise.all(e.map((async e=>{l[e]=await B5(c[e],e,t,n),await s(e,n,o,i,r)}))),Object.values(l).some((e=>e>0))){const e=O5(FT.workspace);UH({type:kJ.WEBDAV_UPDATE_CLOUD,payload:l},e)}})(),()=>{for(const e in c){const t=c[e].timer;t&&clearTimeout(t)}}}))}function _5(e){const t=P5(e);return _((async(e,n,o,i,r=t)=>{var l,s;const c=i.stater.get();if(!(null===(l=c.file)||void 0===l?void 0:l.cloud))return;const a=UUe(c.file.cloud)[e];if(!a)return;const u=null===(s=a.mode)||void 0===s?void 0:s.value;if(void 0===u)return;if(-1===u)return;const d={},f=async()=>{let{webdav:t,file:l}=i.stater.get();if(null==l?void 0:l.isScrolling)return;(null==t?void 0:t.list.length)||(t=Lqe(l));const s=qUe(t.list,e);if(!s||s.syncing)return;await(async()=>{var t;const o=i.stater.get();if(!(null===(t=o.file)||void 0===t?void 0:t.cloud))return;const r=UUe(o.file.cloud);if(r[e].syncing)return void delete d[e];const l=await B5(r[e],e,o,n);d[e]=l})(),d[e]&&await r(s,n,o,i);const c=Math.max(1e3*u,5e3),h=setTimeout(f,c);n(u8(e,a.id,h))};if(0===u)f();else{const t=setTimeout(f,1e3*u);n(u8(e,a.id,t))}}),[t])}function j5(e,t,n,o,i){const r=Dd(e),l=P5(e);H((()=>{!async function(){var e,t,l;const s=r.current,c=await oF();if(1!==c.ok||!(null===(e=c.data)||void 0===e?void 0:e.file)){if("undefined"!=typeof electron){const e=DM();if(null==e?void 0:e.inited)return n(uq(),oq(),fre({misplace:!0})),void x$e(s,n)}return n(B4(s)),await ire(s,n,i),void kM({inited:!0})}const a=c.data;(null===(l=null===(t=a.file)||void 0===t?void 0:t.tree[0])||void 0===l?void 0:l.id)?await rK(s,a,n,o):n(B4(s));const u=await iF();u.data?n(_U(u.data)):await lK(0,0,n,o),o.safty(DH.CRUD,{delete:{editor:[]}}),OVe(zUe(a))}()}),[n,r,i,o]);const s=W((()=>Vs((async e=>{if(void 0===e.store)return;const{store:{record:t,crud:r,auth:s,editor:c={}},file:a}=e;Sc(t)&&Sc(r)||(n(eq(!0)),((null==t?void 0:t.bootstrap)||(null==t?void 0:t.changelog))&&n(uq()),Sc(r)||n(oq()),Sc(null==s?void 0:s.delete)||n($q()),(null==t?void 0:t.bootstrap)&&await ZY(e),(null==t?void 0:t.changelog)&&await UY(e),Sc(r)||await $Y(e,o),Object.keys(c).length>10&&n(_re()),(null==a?void 0:a.cloud)&&!Sc(r)&&await sle(e,n,o,i,l),n(eq(!1)))}),300)),[n,o,l,i]);F((()=>{const{store:e,editor:n,bootstrap:o}=t,{status:i}=n;if(void 0===e||"pending"===i||(null==o?void 0:o.misplace))return;const{record:r,crud:l,pending:c}=e;c||(r||l)&&s(t)}))}function W5(e,t,n){const o=Dd(e),i=Dd(t),r=Z(null),l=_(((e,t)=>{var n;"undefined"==typeof WebPro&&("undefined"==typeof electron?null===(n=r.current)||void 0===n||n.postMessage({type:e,payload:t}):electron.worker.postMessage({type:e,payload:t}))}),[r]),s=_((e=>new Promise(((t,n)=>{const o=new Worker("./sw/compression-worker.BqySdreb.js");o.postMessage({type:xH.START,payload:e}),o.addEventListener("message",(e=>{const n=e.data;n.type===xH.END&&(o.terminate(),t(n.payload))}))}))),[]),c=_(((e,t=!0)=>new Promise(((n,o)=>{const i=new Worker("./sw/decompression-worker.U-pul8OI.js");i.postMessage({type:EH.START,payload:e,cache:t}),i.addEventListener("message",(e=>{const t=e.data;t.type===EH.END&&(i.terminate(),n(t.payload))}))}))),[]),a=_(((e,t)=>new Promise(((n,o)=>{const i=new Worker("./sw/jsonbridge-worker.ISBPoTnc.js");i.postMessage({type:e,payload:t}),i.addEventListener("message",(t=>{const o=t.data;o.type===e&&(i.terminate(),n(o.payload))}))}))),[]),u=_(((e,t=!0)=>{const n=new Worker("./sw/notesearch-worker.Xo3Yzo6r.js"),o=new Promise(((o,i)=>{n.postMessage({type:IH.START,payload:e,cache:t}),n.addEventListener("message",(e=>{const t=e.data;t.type===IH.END&&(n.terminate(),o(t.payload))}))}));return{promise:o,cancel:()=>n.terminate()}}),[]),d=_((async e=>{var t,r;if(e.type===DH.LOST){const d=e.payload;if(Array.isArray(d)&&d.length){const e=UZe(o.current,AK.note,[]),f=[(null!==(r=null===(t=i.current.file)||void 0===t?void 0:t.tree.length)&&void 0!==r?r:1)-1];n(K3(e,f));const h={safty:l,search:u,compression:s,decompression:c,jsonbridge:a};if(!1===await wK(e,d,h))return;const p={visible:!0,title:"文件消息",okText:"去看看",onOk(e){n(lre({...p,visible:!1}),E6(d[0]))},cancelText:"稍后看",content:`有 ${d.length} 份文件迷路了，已被安置在笔记根目录末尾，请注意查收。`},v=await _Y(e.id,h);n(rq(v),Z3(e.id),lre(p))}}}),[n,i,o,l,u,s,c,a]);return F((()=>{if("undefined"==typeof electron&&"undefined"==typeof WebPro)return r.current=new Worker("./sw/notesafty-worker.OqqeSIb0.js"),r.current.addEventListener("message",(e=>{var t;null===(t=r.current)||void 0===t||t.terminate(),r.current=null,d(e.data)})),()=>{var e;null===(e=r.current)||void 0===e||e.terminate()}}),[d]),F((()=>{if("undefined"!=typeof electron&&"undefined"!=typeof WebPro)return electron.worker.start().then((()=>{electron.worker.onMessage((e=>{electron.worker.terminate(),d(e)}))})),()=>{electron.worker.terminate()}}),[d]),W((()=>({safty:l,search:u,compression:s,decompression:c,jsonbridge:a})),[l,u,s,c,a])}function z5(){return{json:Z(null),md:Z(null),dir:Z(null)}}function V5(e,t,n,o){const i=Dd(e),r=Dd(t),l=W((()=>async function e(t,i,l){var s,c,a,u,d;if(!o||!t)return;const f=r.current.store,h=[];let p=null===(s=null==f?void 0:f.editor)||void 0===s?void 0:s[t];if(!p){const e=await _Y(t,o,!0);if(!e)return;p=null===(c=null==e?void 0:e.editor)||void 0===c?void 0:c[t],h.push(rq(e))}if(i&&p){const n=null!==(u=null===(a=null==p?void 0:p.data)||void 0===a?void 0:a.children)&&void 0!==u?u:[];for(const o of n)if(zve(o)){const n=null===(d=o.props)||void 0===d?void 0:d.id;if(!n||n===t)continue;const r=await e(n,i,!0);Array.isArray(r)&&h.push(...r)}}if(l)return h;n(...h)}),[n,r,o]),s=W((()=>async function(e){if(!o)return;const t=[],i=await _Y(e,o);t.push(rq(i)),n(...t)}),[n,o]),c=_((e=>{var t;const n=r.current.store;return!!(null===(t=null==n?void 0:n.editor)||void 0===t?void 0:t[e])}),[r]),a=_((()=>{var e;const t={...r.current,...i.current,root:!0,virtual:!0,focus:{type:f$.EDITOR},editable:!0};return null!==(e=r.current.provider)&&void 0!==e?e:{rootstate:r.current,context:jUe(t),rootdispatch:n,dispatch:n}}),[r,i,n]),u=W((()=>({isFileDelete:e=>hVe(r.current,e),getFileDelete:e=>fVe(r.current,e),refresh:async e=>{var t,n;const o=r.current,i=null===(t=o.file)||void 0===t?void 0:t.currentPageId;if(!i)return;const l=null===(n=o.undoredo)||void 0===n?void 0:n[i];if(!l)return;const{stack:s,offset:c}=l,a=c+e;if(!s[a])return;let{store:u}=s[a];if(!u)return;u=Bje(u,s[c].store);const d={...u.reference},f=Object.keys(d),h=await mF(f);if(1===h.ok&&h.data)for(const e in h.data)d[e]={...h.data[e],count:0,detail:{}};return{...u,reference:d}}})),[r]),d=W((()=>({static:()=>E$e(r.current),get:()=>r.current,refresh:()=>{n(g9(pRe(!0)))}})),[r,n]),f=W((()=>{const e=Vs((async e=>{const t=r.current;if(!t.file)return;if(!(e=null!=e?e:t.file.currentPageId))return;const o=await uK(e);if(!(null==o?void 0:o[0]))return;const i=o[0],l=UUe(t.file.cloud);l[i]&&!l[i].syncing&&await B5(l[i],i,t,n)}),1e3);return{detect:e}}),[r,n]),h=Z(null);return W((()=>({safty:l,refresh:s,exist:c,undoredo:u,stater:d,provider:a,dispatch:n,worker:o,webdav:f,sheet:h})),[l,s,c,u,d,a,n,o,f,h])}const{getPathFromKey:$5}=ek;function Z5(e,t){var n;const o=R(kU),i=R(MU),r=MHe(IHe(null!==(n=null==i?void 0:i.focus)&&void 0!==n?n:UFe(),GFe($5(e)),t));void 0===o.current.options&&(o.current.options={});const l={...o.current.options[r]};o.current.options[r]=l;const s=_((e=>{var t;const n=null===(t=o.current)||void 0===t?void 0:t.options;(null==n?void 0:n[r])&&(n[r]=e)}),[o,r]),c=_((e=>{var t;const n=null===(t=o.current)||void 0===t?void 0:t.options;for(const t in n)e&&t===r||delete n[t]}),[o,r]);return[l,s,c]}const{EditElement:U5,removeBoxSizeStyle:q5,removeBorderSizeStyle:Y5,transformNodeToEditNode:K5,createInlineNode:G5}=ek;function X5(e){const[t,n]=Od((()=>yqe(e))),o=Z(null),{showFile:i=!1,showEditor:r=!0}=e,l=Z({assets:{cache:e.note.assets}}),s=Z2(l,n),c=W5(e,t,n),a=V5(e,t,n,c);RK(e,0,n);const u={...t,...e,dispatch:n,root:!0,virtual:!e.fullRender,editable:!1,focus:{type:f$.NONE},editor:{...t.editor,scrollOffset:void 0}},d=jUe(u),f={...d,reader:!0,file:t.file,ref:e.fileRef,leafStyle:e.leafStyle,onClickBranch:(t,n)=>{var o;return null===(o=e.onClickBranch)||void 0===o?void 0:o.call(e,t,n,u)},onClickSearchBranch(t,n){var o;return null===(o=e.onClickSearchBranch)||void 0===o?void 0:o.call(e,t,n,u)}},h={...d,file:t.file};return G(EU,{value:n,children:G(SU,{value:t,children:G(xU,{value:e,children:G(DU,{value:o,children:G(kU,{value:l,children:G(IU,{value:s,children:G(NU,{value:a,children:G(LU,{value:c,children:r?X(b2,{...h,children:[i&&G(g2,{...f}),G(S2,{...d,children:G(_K,{...u})}),G(zk,{ref:o})]}):i&&G(g2,{...f})})})})})})})})})}function J5(e){const[t,n]=$(e.note);return H((()=>{var t;null===(t=e.fetcher)||void 0===t||t.then((e=>e&&n(e)))}),[e.fetcher]),t?G(X5,{...e,note:t}):null}function Q5(e){const{fontSize:t=(Pf?15:14),fontWeight:n,width:o=200,node:i,listTop:r}=e;if(!i)return null;const l=lae(i),s=q5(Y5({...$$,...i.style,width:o,fontSize:t,position:"relative",top:l&&Pf?-1:0}));null==s||delete s.fontWeight;const c=[EPe(K5(G5(i.children,{...s,width:l?o-1.5*t:o,marginLeft:l?2:0,position:"relative",top:l?Pf?null!=r?r:1.2:.2:Pf?.3:0}),i.key),t,(e=>{var t,n,o;return(null===(t=e.style)||void 0===t?void 0:t.fontWeight)&&delete e.style.fontWeight,(null===(n=e.style)||void 0===n?void 0:n.height)&&delete e.style.height,(null===(o=e.style)||void 0===o?void 0:o.lineHeight)&&delete e.style.lineHeight,e}))],a={...i.props};l&&delete a.style;const u={...i,style:{...s,...e.style,display:"inline-flex",alignItems:"center",pointerEvents:"none",fontWeight:n},props:a,children:c};return G(kU,{value:{current:{}},children:G(U5,{value:null,children:G(AE,{node:u,renderElement:Xze})})})}function e3(e){var t,n,o,i;const{onCloseModal:r,onClickContainer:l,onClickSync:s,onClickSyncFully:c,onClickAdd:a,onClickCopy:u,onClickQRCode:d,onClickFold:f,onClickUnFold:h,onClickRemove:p,onClickSelects:v,onClickSelect:g,onClickUsernameVisible:m,onClickPasswordVisible:y,onClickModes:b,onClickMode:C,onInputService:w,onInputUsername:x,onInputPassword:S,onTransitionEnd:E}=R5(e),k=null===(t=e.file)||void 0===t?void 0:t.cloud;return G(mk,{showFooter:!1,visible:null===(n=e.webdav)||void 0===n?void 0:n.visible,style:LZ,onCancel:r,onClose:r,children:X(ch,{style:BZ,onClick:l,children:[X(hh,{style:TZ,children:[G("span",{style:AZ,children:G(hO,{width:24})}),G("span",{children:"WebDav"})]}),null===(o=e.webdav)||void 0===o?void 0:o.list.map(((e,t)=>{var n,o,i,r,l,c,a,D,I;let N=e.bind||e.update?"#fff":Df;1===e.status||-1===e.status&&(N="red");let L=e.bind||e.update?"#fff":kf;1===e.status||-1===e.status&&(L="red");let B=bf;return e.update?B=R$[e.update]:e.bind&&(B=yf),X("div",{style:MZ,children:[X("div",{style:{...RZ,background:B},children:[X("div",{style:PZ,children:[G(Bk,{tips:"同步",children:G(dv,{style:zZ,onClick:n=>s(n,e,t),children:G("span",{onTransitionEnd:t=>E(t,e),style:{...sU,transform:`rotate(${360*(null!==(n=e.syncTransitionCount)&&void 0!==n?n:0)}deg)`},children:G(fO,{width:14,fill:N})})})}),e.update?G(ch,{style:ZZ,onClick:n=>s(n,e,t),children:1===e.update?"上传":2===e.update?"下载":"更新"}):null,e.statusMessage?G("div",{style:{...VZ,color:L},children:e.statusMessage}):G("div",{style:$Z,children:G("div",{style:{color:L},children:G(Q5,{width:400,node:null===(o=e.selected)||void 0===o?void 0:o.title})})})]}),X("div",{style:FZ,children:[G(Bk,{tips:"二维码",style:{marginLeft:5},children:G(dv,{style:zZ,onClick:n=>d(n,e,t),children:G(WR,{width:13,fill:e.bind?"#fff":"#696969"})})}),G(Bk,{tips:"拷贝配置",style:{marginLeft:5},children:G(dv,{style:zZ,onClick:n=>u(n,e,t),children:G(lO,{width:12.5,fill:e.bind?"#fff":"#696969"})})}),e.fold&&G(Bk,{tips:"展开",style:{marginLeft:5},children:G(dv,{style:zZ,onClick:n=>h(n,e,t),children:G(rO,{width:15,fill:e.bind?"#fff":Lf})})}),!e.fold&&G(Bk,{tips:"折叠",style:{marginLeft:5},children:G(dv,{style:zZ,onClick:n=>f(n,e,t),children:G(iO,{width:15,fill:e.bind?"#fff":Lf})})}),G(Bk,{tips:"关闭",style:{marginLeft:5},children:G(dv,{style:zZ,onClick:n=>p(n,e,t),children:G(OM,{width:15,fill:e.bind?"#fff":Lf})})})]})]}),X("div",{style:HZ,children:[G("div",{style:jZ,children:"服务器地址"}),X("div",{style:WZ,children:[G("input",{disabled:e.fold,style:{...UZ,...e.fold&&qZ},value:e.service,onInput:n=>w(n,e,t)}),e.validated&&!(null===(i=e.service)||void 0===i?void 0:i.trim())?G("div",{style:_Z,children:"请输入服务器地址"}):e.validated&&!BM(null===(r=e.service)||void 0===r?void 0:r.trim())?G("div",{style:_Z,children:"服务器地址格式出错"}):null]})]}),!e.fold&&X("div",{style:HZ,children:[G("div",{style:jZ,children:"用户名"}),X("div",{style:WZ,children:[G("input",{style:UZ,type:e.usernameInvisible?"password":"text",value:e.username,onInput:n=>x(n,e,t)}),G(ch,{style:hU,onClick:n=>m(n,e,t),children:e.usernameInvisible?G(BO,{width:14}):G(LO,{width:15})}),e.validated&&!(null===(l=e.username)||void 0===l?void 0:l.trim())?G("div",{style:_Z,children:"请输入用户名"}):null]})]}),!e.fold&&X("div",{style:HZ,children:[G("div",{style:jZ,children:"密码"}),X("div",{style:WZ,children:[G("input",{style:UZ,type:e.passwordInvisible?"password":"text",value:e.password,onInput:n=>S(n,e,t)}),G(ch,{style:hU,onClick:n=>y(n,e,t),children:e.passwordInvisible?G(BO,{width:14}):G(LO,{width:15})}),e.validated&&!(null===(c=e.password)||void 0===c?void 0:c.trim())?G("div",{style:_Z,children:"请输入密码"}):null]})]}),!e.fold&&X("div",{style:HZ,children:[G("div",{style:jZ,children:"笔记空间"}),G("div",{style:WZ,children:X(ch,{style:{...YZ,cursor:e.bind?"default":"pointer",height:e.selectorVisible?KUe(e.roots):40},onClick:n=>v(n,e,t),children:[G("div",{style:GZ,children:G(Q5,{width:480,node:null===(a=e.selected)||void 0===a?void 0:a.title})}),G("div",{style:JZ,children:e.roots.map((t=>{var n,o,i;const r={},l=t.id===(null===(n=e.selected)||void 0===n?void 0:n.id);l&&(r.backgroundColor=bf);const s=(null!==(i=null===(o=null==k?void 0:k[t.id])||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0;return s&&(r.color=If),G("div",{style:r,children:X(dv,{style:eU,onClick:n=>g(n,e,t),children:[G(Q5,{width:480,node:t.title}),(l||t.incloud||(null==k?void 0:k[t.id]))&&X("span",{style:tU,children:[s&&G("span",{style:{marginTop:1.5,marginLeft:15},children:G(VR,{width:13,fill:If})}),t.incloud&&G("span",{style:{marginTop:1.5,marginLeft:15},children:G(dO,{width:14})}),l&&G("span",{style:{marginLeft:15},children:G(TO,{width:13})})]})]})},t.id)}))}),!e.bind&&X("div",{style:nU,children:[(null===(D=e.selected)||void 0===D?void 0:D.incloud)&&G("span",{style:{display:"flex",marginTop:.5},children:G(dO,{width:14})}),G("span",{style:{marginLeft:15},children:e.pulling?G("span",{style:{display:"flex",marginBottom:2},children:G("span",{style:cU,children:G(NO,{width:14})})}):G("span",{style:aU,children:G("span",{style:{...uU,...e.selectorVisible?fU:dU},children:G($M,{width:7,fill:Lf})})})})]})]})})]}),X("div",{style:{...HZ,marginTop:e.fold?-15:0},children:[G("div",{style:jZ,children:"同步模式"}),G("div",{style:WZ,children:X(ch,{style:{...KZ,...e.fold&&qZ,cursor:e.fold?"default":"pointer",height:e.modeVisible?40*(e.modes.length+1):40},onClick:n=>b(n,e,t),children:[G("div",{style:XZ,children:null===(I=e.mode)||void 0===I?void 0:I.text}),G("div",{style:QZ,children:e.modes.map(((t,n)=>{var o;const i={},r=t.value===(null===(o=e.mode)||void 0===o?void 0:o.value);return r&&(i.backgroundColor=bf),G("div",{style:i,children:X(dv,{style:eU,onClick:n=>C(n,e,t),children:[G("span",{children:t.text}),r&&G("span",{style:tU,children:r&&G("span",{style:{marginLeft:15},children:G(TO,{width:13})})})]})},n)}))}),!e.fold&&G("div",{style:oU,children:G("span",{style:aU,children:G("span",{style:{...uU,...e.modeVisible?fU:dU},children:G($M,{width:7,fill:Lf})})})})]})})]}),!e.fold&&G("div",{style:pU,children:G(pv,{style:vU,type:"primary",onClick:n=>s(n,e,t),children:"同步"})})]},e.id)})),G(dv,{style:OZ,type:"background",onClick:e=>a(e),children:G(CO,{width:24,fill:wf})}),G(mk,{...null===(i=e.webdav)||void 0===i?void 0:i.modal})]})})}function t3(e){if(e.syncing)return G("span",{style:lU,children:G(fO,{width:12.5,fill:kf})});const t={...rU};return 1===e.update?t.background=R$[1]:2===e.update?t.background=R$[2]:3===e.update&&(t.background=R$[3]),X("span",{style:iU,children:[G(hO,{width:14}),e.update?G("span",{style:t}):null]})}function n3(e){const t=Z(null);return H((()=>{t.current&&(t.current.innerHTML=e.qrcode)}),[e.qrcode]),X("div",{style:gU,children:[G("span",{style:mU,ref:t}),G("span",{style:yU,children:"使用书立移动端扫码，一键配置 WebDav"}),G("span",{style:bU,children:"五分钟内有效，二维码请勿外传"})]})}const{clearSelection:o3,isCollapsed:i3}=ek,r3=e=>t=>{if(!e)return t;e={...e};const{context:n,rootstate:{...o}}=e;return e.context=jUe(n),delete o.provider,e.rootstate=o,t.provider=Xu(e),t},l3=()=>e=>(delete e.provider,e),s3=()=>e=>{const t=e.provider;if(!t)return e;const n=t.context.editor;return t.context.editor=o3()(n),e},c3=()=>e=>{const t=e.provider;if(!t)return e;const n=t.context.editor;return i3(n.selection)?(t.context.editor=o3()(n),e):e},{isNode:a3,isNodeEqual:u3,isReferenceNode:d3,initNodeKey:f3,isBlockNode:h3,createBlockNode:p3,getBlockNodeEndPath:v3,getEditNodeOffsets:g3,getPathFromKey:m3,createInlineNode:y3,getEditBlockNodeEndPath:b3,getEditBlockNodeStartPath:C3,injectSplitBlockNodeStyle:w3,createReferenceBlockNode:x3,transformEditNodeToNode:S3}=ek,{recursivePath:E3,recursiveTree:k3,toggleBranchArrow:D3,toggleBranchMore:I3,syncScrollHeight:N3,adjustScrollTop:L3,scrollToBranch:B3,scrollDelta:T3,getBranchByPath:A3,resetTreePath:M3,setScrollActive:O3,setScrollSmooth:R3,setScrollHeight:P3,BRANCH_HEIGHT:F3}=xT,H3=e=>t=>(t.file&&(t.file.isEditPending=e),t=aq({bootstrap:!0})(t)),_3=e=>t=>{var n,o,i,r,l;const s=null===(n=t.file)||void 0===n?void 0:n.tree;if(!s)return t;let c=null;if(c=f(e)?Y_e(s,e):e,!c)return t;void 0===c.type&&(c=s[0]);const{id:a,path:u}=c,d=null===(i=null===(o=t.file)||void 0===o?void 0:o.branch)||void 0===i?void 0:i.id,h=null===(l=null===(r=t.file)||void 0===r?void 0:r.branch)||void 0===l?void 0:l.path;if(u&&h){const e=A3(s,u),n=A3(s,h);e&&(e.active=!0,t.file.branch={...e,children:void 0}),n&&(null==n?void 0:n.id)!==(null==e?void 0:e.id)&&(n.active=!1)}else{let e=0;k3(s,((n,o)=>{if(e>=2)return!0;if(!n)return!1;if(!n.type)return!0;const i=n.id;i===a?(e++,n.active=!0,t.file.branch=n):i===d&&(e++,n.active=!1)}))}return t=H3(!0)(t)},j3=()=>e=>{var t,n;const o=null===(t=e.file)||void 0===t?void 0:t.tree;return o?(null===(n=e.file)||void 0===n||delete n.branch,k3(o,(e=>{if(e.active)return e.active=!1,!0})),e=H3(!0)(e)):e},W3=e=>t=>{var n;const o=null===(n=t.file)||void 0===n?void 0:n.tree;if(!o)return t;const i=e.path;if(!i)return t;const r=A3(o,ec(i));if(!(null==r?void 0:r.children))return t;const l=r.children.findIndex((t=>t.id===e.id));return-1===l?t:(r.children.splice(l,1),t=y6(ec(i))(t),t=H3(!0)(t),t=Nq(r)(t))},z3=(e,t)=>n=>{var o,i,r;const l=null===(o=n.file)||void 0===o?void 0:o.tree;if(!l)return n;const s=l.find((t=>t.id===e.id));if(s)return t&&(e.path=null===(i=s.path)||void 0===i?void 0:i.slice()),n;const c={type:"root",tag:!0,...eje(e),path:[l.length],expand:!1};return t&&(e.path=null===(r=c.path)||void 0===r?void 0:r.slice()),l.push(c),n=H3(!0)(n)},V3=(e,t)=>n=>{var o;const i=null===(o=n.file)||void 0===o?void 0:o.tree;if(!i)return n;let r=null;if(f(e))r=Y_e(i,e);else if(Lc(e)){r=Y_e(i,n.file.currentPageId)}else r=e;if(!r)return n;const l=rje(i,r);return k3([l],(e=>{var n,o,i;if("outline"!==e.type){const r=t[e.id];if(!r)return;const l=eje(r),s=null===(n=e.children)||void 0===n?void 0:n.filter((e=>e&&"outline"!==e.type));if(Object.assign(e,l,{expand:e.expand}),!(null===(o=l.children)||void 0===o?void 0:o.length))return void delete e.children;if(!(null===(i=e.children)||void 0===i?void 0:i.length))return;for(let t=0;t<e.children.length;t++){const n=e.children[t];if(!n)continue;if("outline"===n.type)continue;const o=null==s?void 0:s.find((e=>e.id===n.id));o&&(e.children[t]=o)}}})),n=y6(l.path)(n),n=H3(!0)(n)},$3=e=>t=>{var n,o,i,r,l,s,c;const a=null===(n=t.file)||void 0===n?void 0:n.tree;if(!a)return t;let u=null;if(f(e))u=Y_e(a,e);else if(Lc(e)){u=Y_e(a,t.file.currentPageId)}else u=e;if(!u)return t;if(u=rje(a,u),!u)return t;if(null===(i=null===(o=u.children)||void 0===o?void 0:o.filter((e=>!!e)))||void 0===i?void 0:i.length)return t;const d=null===(l=null===(r=t.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[u.id];if(!d)return t;let h=!1;const p=d.data.children;let v=p[0];if((null===(s=v.props)||void 0===s?void 0:s.id)!==u.id){zve(v)&&(v=v.children[0]),d3(v)&&(v=v.children[0]),h3(v)||(v=p3([v]),w3(v)),p[0]=v;const e=u.id,t=aae.H;let n=null;u.title&&(n=S3(u.title),zve(n)&&(n=n.children[0]),d3(n)&&(n=n.children[0]),h3(n)||(n=p3([n])),n.style={...n.style,...Fve(t)}),n||(n=p3([y3([""])],Fve(t)));const o=$ve({subclass:t,id:e},[x3({id:e,uid:e},[n])]);p.unshift(o),h=!0}for(let e=1;e<p.length;e++){const t=p[e];jve(t)&&((null===(c=t.props)||void 0===c?void 0:c.id)===u.id&&(p.splice(e,1),e--),h=!0)}return h&&(t=Z3(u)(t),t=hq(u.id,d)(t)),t},Z3=(e,t)=>n=>{var o,i,r,l,s,c,a,u;const d=null===(o=n.file)||void 0===o?void 0:o.tree;if(!d)return n;let h=null;if(f(e))h=Y_e(d,e);else if(Lc(e)){h=Y_e(d,n.file.currentPageId)}else h=e;if(!h)return n;const p=rje(d,h),{id:v,path:g}=p;let m=null===(r=null===(i=n.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[v];if(void 0===m)return n;t&&Pu(m)&&(m=null!==(l=Wu(m))&&void 0!==l?l:m);const{data:y,segments:b,uids:C}=m,w=V_e(y,null===(s=n.store)||void 0===s?void 0:s.reference);p.type!==w.type&&(w.type=p.type);let x=!1;const S=null===(a=null===(c=n.file)||void 0===c?void 0:c.branch)||void 0===a?void 0:a.id;if(void 0!==S){null!==Y_e([p],S)&&(x=!0)}const E=Z_e(p),k=[p];if(!(null===(u=p.children)||void 0===u?void 0:u.some((e=>null===e)))){const e=[w];for(;e.length;){const t=e.shift();if(!t)continue;const{id:o,title:i,payload:r,dot:l}=t;let s=t.type;const c=E[o];if((null==c?void 0:c.id)&&!c.type)continue;if(void 0!==c){delete E[o],c.type===s||k.some((e=>e.id===o))||k.push(t);let e=t.children;"page"!==s&&"root"!==s||(v!==o&&(e=c.children),u3(c.title,i)||k.some((e=>e.id===o))||k.push(t)),"root"===c.type&&(s=c.type),Object.assign(t,c,{children:e,title:i,payload:r,dot:l,type:s}),n.file&&S===o&&(n.file.branch=t)}else"page"!==s&&"root"!==s||k.some((e=>e.id===o))||k.push(t);const a=t.children;if(void 0!==a){if(void 0===t.expand&&(t.expand=!0),("page"===s||"root"===s)&&v!==o)continue;e.unshift(...a)}}}if(Object.assign(p,w),p.children&&E3(p.children,((e,t)=>{e&&(e.path=t)}),g),Sc(b)?delete p.segments:p.segments=b,Sc(C)?delete p.uids:p.uids=C,!0===x&&void 0!==S){const e=Y_e([p],S);null===e&&n.file&&(n.file.branch=p),null!==e&&(e.active=!0)}n=H3(!0)(n);for(const e of k)n=Nq(e)(n);return n},U3=()=>e=>{var t,n,o,i;const r=e.file;if(!r)return e;const{currentPageId:l,branch:s,tree:c}=r;if(!l||!s)return Z3()(e);const a=rje(c,s);if((null==a?void 0:a.id)!==l)return Z3()(e);const{id:u,path:d}=a;let f=!1;const h=null===(n=null===(t=e.file)||void 0===t?void 0:t.branch)||void 0===n?void 0:n.id;if(void 0!==h){null!==Y_e([a],h)&&(f=!0)}const{node:p,data:v,segments:g,uids:m}=e.editor,y=tc(p.children),b=Js(p.children);if(!y||!b)return e;const C=m3(y.key)[0],w=m3(b.key)[0],x=[...p.children];let S=!0;for(let e=C-1;e>=0;e--){const t=v.children[e];if(jve(t)){x.unshift(t);break}}for(let e=w+1;e<v.children.length;e++){const t=v.children[e];if(jve(t)){x.push(t),S=!1;break}}const E=U_e(a);let k=[];const D=p.children[0],I=v.children[0];if(zve(D)&&(null===(o=D.props)||void 0===o?void 0:o.id)===(null===(i=I.props)||void 0===i?void 0:i.id)){k=U_e(V_e(p))}else{const e={...v.children[0]};e.props={...e.props,id:pRe(!0)};k=U_e(V_e({...p,children:[e,...x]})).slice(1)}const N=tc(k),L=Js(k);let B=-1,T=-1;for(let e=0;e<E.length&&(E[e].id===(null==N?void 0:N.id)&&(B=e),E[e].id===(null==L?void 0:L.id)&&(T=e),-1===B||-1===T);e++);if(-1===B||-1===T)return Z3()(e);if(S){const e=E.length-1-T;e&&E.splice(T,e)}const A=[a],M=B,O=T-B+1,R=E.slice(M,M+O),P={};for(const e of R)P[e.id]=e;E.splice(M,O,...k.map((t=>{const{id:n,title:o,payload:i,dot:r}=t;let l=t.type;const s=P[n];if((null==s?void 0:s.id)&&!s.type)return t;if(void 0!==s){delete P[n],s.type===l||A.some((e=>e.id===n))||A.push(t);let c=t.children;"page"!==l&&"root"!==l||(u!==n&&(c=s.children),u3(s.title,o)||A.some((e=>e.id===n))||A.push(t)),"root"===s.type&&(l=s.type),Object.assign(t,s,{children:c,title:o,payload:i,dot:r,type:l}),e.file&&h===n&&(e.file.branch=t)}else"page"!==l&&"root"!==l||A.some((e=>e.id===n))||A.push(t);return t})));const F=q_e(E);if(a.type!==F.type&&(F.type=a.type),Object.assign(a,F),a.children&&E3(a.children,((e,t)=>{e&&(e.path=t)}),d),Sc(g)?delete a.segments:a.segments=g,Sc(m)?delete a.uids:a.uids=m,!0===f&&void 0!==h){const t=Y_e([a],h);null===t&&e.file&&(e.file.branch=a),null!==t&&(t.active=!0)}e=H3(!0)(e);for(const t of A)e=Nq(t)(e);return e},q3=()=>e=>{var t,n,o,i;const{node:r,scrollTop:l,scrollOffset:s,scrollHeight:c,clientHeight:a}=e.editor;if(c<=a)return e;for(let c=r.children.length-1;c>=0;c--){const a=r.children[c];if(jve(a)){if(!a.position)continue;if(m3(a.key)[0]>0&&(null===(t=a.props)||void 0===t?void 0:t.subclass)===aae.H)continue;const c=m3(a.key);if(jc(g3(r,c))-l-(null!==(n=null==s?void 0:s.top)&&void 0!==n?n:0)<100){const t=null===(o=a.props)||void 0===o?void 0:o.id,n=null===(i=e.file)||void 0===i?void 0:i.branch;return n&&void 0!==t&&n.id!==t&&(e=_3(n)(e)),e}}}return e},Y3=(e,t)=>n=>{var o;const i=null===(o=n.file)||void 0===o?void 0:o.tree;if(!i||!t)return n;const r=A3(i,t);return r?(r.children||(r.children=[]),r.children.push(e),e.path||(e.path=[...t,r.children.length],n=y6(e.path)(n)),n=Nq(e,r)(n),n=Nq(r)(n),n=H3(!0)(n)):n},K3=(e,t)=>n=>{var o,i,r;const l=null===(o=n.file)||void 0===o?void 0:o.tree;if(!l||!t)return n;const s=A3(l,ec(t));if(null===s){if("root"!==e.type)return n;const o=null!==(i=Js(t))&&void 0!==i?i:0;l.splice(o+1,0,e)}else{s.children||(s.children=[]);const n=null!==(r=Js(t))&&void 0!==r?r:0;s.children.splice(n+1,0,e)}return n=y6(ec(t))(n),n=Nq(e,null!=s?s:void 0)(n),s&&(n=Nq(s)(n)),n=H3(!0)(n)},G3=e=>t=>{var n;const o=null===(n=t.file)||void 0===n?void 0:n.tree;if(!o)return t;if(!e.path)return t;const i=A3(o,ec(e.path));if(!(null==i?void 0:i.children))return t;const r=i.children.findIndex((t=>(null==t?void 0:t.id)===e.id));return void 0===r||-1===r?t:(i.children[r]=e,t=Nq(e,i)(t),t=Nq(i)(t),t=H3(!0)(t))},X3=(e,t,n)=>e=>{var o,i;const{store:r,file:l}=e;if(void 0===r||void 0===(null==l?void 0:l.tree))return e;e=T6(t)(e),e=vq(t)(e);let s=null===(o=r.editor)||void 0===o?void 0:o[t];if(n||Fje(t,r)||Pu(s)&&(s=Wu(s)),void 0===s)return e;const{cwnd:c=3,data:a,scrollHeight:u}=s,d=null!==(i=gPe(a,[],c))&&void 0!==i?i:f3(a),f=B$e(s,C3(d),b3(d)),{clientHeight:h,clientWidth:p}=e.editor;return delete f.resizeWidth,delete f.location,f.cwnd=c,f.clientHeight=h,f.clientWidth=p,f.scrollHeight=Math.max(u,h),e=l9(f)(e),e=h9()(e),e=l3()(e)},J3=(e,t,n)=>e=>{var o,i,r,l;const{store:s,file:c}=e,a=null==c?void 0:c.currentPageId;if(void 0===a)return e;e=E9(a)(e);let u=null===(i=null===(o=(e=vq(a)(e)).store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[a];if(n||Fje(a,s)||Pje(a,s)||Pu(u)&&(u=Wu(u)),void 0===u)return e;const{data:d,scrollHeight:f}=u,h=_ve(d,t);if(!jve(h))return e;const p=d.children.indexOf(h);if(-1===p)return e;if(0===h.children.length){u=null===(l=null===(r=e.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[a];u.data.children[p].children.push(y3([]))}const{clientHeight:v,clientWidth:g}=e.editor,m=[p,...v3(h)],y=T$e(u,m,m);return y.clientHeight=v,y.clientWidth=g,y.scrollHeight=Math.max(f,v),y.scrollOffset={top:r$},e=l9(y)(e),e=h9()(e)},Q3=e=>t=>{var n,o,i,r,l,s;const c=null===(n=t.file)||void 0===n?void 0:n.currentPageId;if(void 0===c)return t;const a=null===(i=null===(o=t.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[c];if(void 0===a)return t;const{data:u}=a;let d=[],f=u.children;Pu(f)&&(f=null!==(r=Wu(f))&&void 0!==r?r:f);const h=f.map(((e,t)=>({node:e,path:[t]})));for(;h.length;){const t=h.shift();if(!t)break;if(jve(t.node)){if((null===(l=t.node.props)||void 0===l?void 0:l.id)===e){d=t.path;break}const n=null===(s=t.node.props)||void 0===s?void 0:s.list;We(n)&&h.unshift(...n.map(((e,n)=>({node:e,path:[...t.path,n]}))))}}let p=0;for(let e=0;e<d.length;e++){p+=d[e]+1;const t=f[d[e]];if(jve(t)&&t.props){const{list:e,expand:n}=t.props;!n&&We(e)&&(u.children.splice(p,0,...e),t.props.expand=!0,delete t.props.list,f=e)}}return t},e6=(e,t)=>n=>{var o;const i=null===(o=n.file)||void 0===o?void 0:o.tree;if(!i)return n;const{more:r,moving:l,rename:s}=n.file,c=[];if(e.includes("more")){if(r){const e=A3(i,r);e&&(delete e.more,delete n.file.more,c.includes(e)||c.push(e))}if((null==t?void 0:t.more)&&t.path){const e=A3(i,t.path);e&&(delete e.more,c.includes(e)||c.push(e))}null==t||delete t.more}if(e.includes("moving")){if(l){const e=A3(i,l);e&&(delete e.moving,delete n.file.moving,c.includes(e)||c.push(e))}if((null==t?void 0:t.moving)&&t.path){const e=A3(i,t.path);e&&(delete e.moving,c.includes(e)||c.push(e))}null==t||delete t.moving}if(e.includes("rename")){if(s){const e=A3(i,s);e&&(delete e.rename,delete n.file.rename,c.includes(e)||c.push(e))}if((null==t?void 0:t.rename)&&t.path){const e=A3(i,t.path);e&&(delete e.rename,c.includes(e)||c.push(e))}null==t||delete t.rename}for(const e of c)n=Nq(e)(n);return c.length&&(n=H3(!0)(n)),n},t6=(e,t,n)=>e=>{var n;const o=null===(n=e.file)||void 0===n?void 0:n.tree;if(!o)return e;const{path:i}=t;if(!i)return e;const r=A3(o,i);return r?(r.more=!0,r.moving=!0,e.file.more=i,e.file.moving=i,e=Nq(r)(e),e=H3(!0)(e)):e},n6=(e,t,n)=>e=>{var n;const o=null===(n=e.file)||void 0===n?void 0:n.tree;if(!o)return e;const{path:i}=t;if(!i)return e;const r=A3(o,i);return r?(r.rename=!0,e.file.rename=i,e=Nq(r)(e),e=H3(!0)(e)):e},o6=(e,t,n)=>o=>{if(!o.file)return o;const{tree:i,drag:r}=o.file,{path:l}=e;if(!l)return o;const s=A3(i,l);if(!s)return o;if(n&&(s.move=n),(null==r?void 0:r[t])&&!Ec(r[t],l)){const e=A3(i,r[t]);e&&delete e.move}return o.file.drag||(o.file.drag={}),o.file.drag[t]=l,o.file.isEditPending=!0,o},i6=e=>t=>{var n;if(!t.file)return t;const{tree:o,drag:i}=t.file;if(!i)return t;const{start:r,over:l}=i;if(r&&(!e||"start"===e)){const e=A3(o,r);e&&delete e.move}if(l&&(!e||"over"===e)){const e=A3(o,l);e&&delete e.move}return e?null===(n=t.file.drag)||void 0===n||delete n[e]:delete t.file.drag,Sc(t.file.drag)&&delete t.file.drag,t.file.isEditPending=!0,t},r6=e=>t=>{if(!t.file)return t;const{tree:n}=t.file,{path:o}=e;if(!o)return t;const i=A3(n,o);return!1===(null==i?void 0:i.expand)||(i.expand=!1,t.file.drag||(t.file.drag={}),t.file.drag.recover=o,t.file.isEditPending=!0),t},l6=()=>e=>{var t;if(!e.file)return e;const{tree:n,drag:o}=e.file;if(!(null==o?void 0:o.recover))return e;const i=A3(n,o.recover);return i&&(i.expand=!0),null===(t=e.file.drag)||void 0===t||delete t.recover,Sc(e.file.drag)&&delete e.file.drag,e.file.isEditPending=!0,e},s6=(e,t)=>n=>{var o,i,r;const l=null===(o=n.file)||void 0===o?void 0:o.tree;if(!l)return n;const{path:s}=e;if(!s)return n;const c=A3(l,s);return c?(Object.assign(c,t),(null===(r=null===(i=n.file)||void 0===i?void 0:i.branch)||void 0===r?void 0:r.id)===e.id&&Object.assign(n.file.branch,t),n=H3(!0)(n)):n},c6=(e,t)=>n=>{var o,i,r;const l=null===(o=n.file)||void 0===o?void 0:o.tree;if(!l)return n;const{path:s}=e;if(!s)return n;const c=A3(l,s);if(!c)return n;for(const o in t)delete c[o],(null===(r=null===(i=n.file)||void 0===i?void 0:i.branch)||void 0===r?void 0:r.id)===e.id&&delete n.file.branch[o];return n=Nq(c)(n),n=H3(!0)(n)},a6=(e,t)=>n=>{var o,i,r;const l=null===(o=n.file)||void 0===o?void 0:o.tree;if(!l)return n;if(!(t=null!=t?t:e.path))return n;const s=A3(l,ec(t));return(null!==(i=null==s?void 0:s.children)&&void 0!==i?i:l)[null!==(r=Js(t))&&void 0!==r?r:0]=e,n=y6(t)(n),n=H3(!0)(n)},u6=(e,t)=>n=>void 0===n.file?n:(n.file=D3(e,t)(n.file),n=H3(!0)(n)),d6=e=>t=>void 0===t.file?t:(t.file=I3(e)(t.file),t=H3(!0)(t)),f6=e=>t=>{var n;if(void 0===t.file||!e.path)return t;const o=t.file.tree,i=A3(o,e.path);return(null===(n=null==i?void 0:i.children)||void 0===n?void 0:n.length)?(k3(i.children,(e=>{e.expand=!1})),t=v6()(t),t=b6()(t),t=H3(!0)(t)):t},h6=e=>t=>{if(void 0===t.file||!e.path)return t;const n=t.file.tree,o=A3(n,e.path);return o?(k3([o],(e=>{e.expand=!0})),t=v6()(t),t=b6()(t),t=H3(!0)(t)):t},p6=(e,t)=>n=>{if(void 0===n.file||!e.path)return n;const o=n.file.tree,i=A3(o,e.path);return i?(k3([i],(e=>{"page"!==e.type&&"root"!==e.type||(e.readonly=t)})),n=H3(!0)(n)):n},v6=()=>e=>void 0===e.file?e:(e.file=L3()(e.file),e=H3(!0)(e)),g6=(e,t)=>n=>{var o;if(void 0===n.file)return n;if(!t)return n=b6()(n);const{scrollTop:i,scrollOffset:r,clientHeight:l,scrollHeight:s}=n.file;let c=Pf&&null!==(o=null==r?void 0:r.top)&&void 0!==o?o:0,a=!1;k3(n.file.tree,(t=>!!a||(c+=F3,t.id===e.id&&(a=!0),!1!==t.expand&&void 0)));const u=c-(i+l-t);return u>0&&(n.file=P3(Math.max(c+t,s))(n.file),n.file=T3(u)(n.file),n=m6(!0,!0)(n)),n},m6=(e,t)=>n=>void 0===n.file?n:(n.file=O3(e)(n.file),n.file=R3(!!t)(n.file),n=H3(!0)(n)),y6=(e,t)=>n=>void 0===n.file?n:(n.file=M3(e,t)(n.file),n=H3(!0)(n)),b6=()=>e=>void 0===e.file?e:(e.file=N3()(e.file),e=H3(!0)(e)),C6=()=>e=>void 0===e.file?e:(e.file.clientHeight=TFe(),e=H3(!0)(e)),w6=e=>t=>{if(!t.file)return t;let n=t.file.scrollHeight;return k3([e],(e=>{if(n+=F3,!1===e.expand)return!1})),t.file.scrollHeight=n,t=v6()(t),t=H3(!0)(t)},x6=e=>t=>{if(!t.file)return t;let n=t.file.scrollHeight;return k3([e],(e=>{if(n-=F3,!1===e.expand)return!1})),t.file.scrollHeight=n,t=v6()(t),t=H3(!0)(t)},S6=(e,t)=>n=>{var o,i,r;if(!e.title)return n;if(bTe(e.title)){const l=null===(r=null===(i=null===(o=n.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[t])||void 0===r?void 0:r.data;if(l){let o=l.children.findIndex((t=>{var n;return a3(t)&&(null===(n=t.props)||void 0===n?void 0:n.id)===e.id}));-1===o&&(o=l.children.findLastIndex((e=>a3(e)&&bTe(e)))),-1!==o&&(n=_Te(t,o,!0,!1)(n))}}return n},E6=e=>t=>t.file?(t.file=B3(e)(t.file),t=v6()(t),t=m6(!0)(t),t=H3(!0)(t)):t,k6=()=>e=>{var t;if(!e.file)return e;let n=Js(e.file.tree);for(;null===(t=null==n?void 0:n.children)||void 0===t?void 0:t.length;)n=Js(n.children);return n?E6(n.id)(e):e},{saftyTreeState:D6,resetTreePath:I6}=xT,N6=(e,t,n)=>o=>{if(void 0===o.file)return o;if(e.tree.length&&(!e.tree[0].path||t))try{e=I6()(e)}catch(i){}if(Object.assign(o.file,e),n){function r(e,t,n){var o;for(let i=0;i<e.length;i++){const l=e[i];if("outline"!==l.type)if(t[l.id]){e[i]=eje(t[l.id]);const n=e[i].children;(null==n?void 0:n.length)&&(delete t[l.id],r(n,t,!1===e[i].expand))}else!1!==l.expand&&(null===(o=l.children)||void 0===o?void 0:o.length)&&!n&&(e[i].expand=!1)}}n={...n},r(o.file.tree,n),o=b6()(o)}if(!o.file)return o;if(delete o.file.catalogs,Uf&&(o.file.clientWidth=document.documentElement.clientWidth-AQ),t){o.file.tree.forEach((e=>{var t,n;delete e.syncing,e.tag=!0,e.type="root";const i=null===(n=null===(t=o.file)||void 0===t?void 0:t.cloud)||void 0===n?void 0:n[e.id];(null==i?void 0:i.length)&&i.some((e=>e.bind&&"webdav"===e.type))&&(e.icon=t3)}));for(const l in o.file.cloud)o.file.tree.some((e=>e.id===l))?o.file.cloud[l].forEach((e=>{delete e.syncing,delete e.update})):delete o.file.cloud[l]}return o},L6=()=>e=>(void 0===e.file||(e.file=D6()(e.file)),e),B6=e=>t=>(void 0===t.file||Object.assign(t.file,e),t),T6=e=>t=>(void 0===t.file||(t.file.currentPageId=e),t),A6=()=>e=>{var t;return null===(t=e.file)||void 0===t||delete t.currentPageId,e},M6=e=>t=>(void 0===t.file||(t.file.visible=e),t),O6=e=>t=>(void 0===t.file||(t.file.transition=e),t),R6=()=>e=>e,{createBlockNode:P6,createInlineNode:F6,createReferenceBlockNode:H6,getNodeByPath:_6,isNode:j6,isEmptyNode:W6}=ek,z6=(e,t,n)=>o=>{var i,r,l,s,c,a;const{file:u}=o;if(!u)return o;const d=dje(u.tree,t);if(!d)return o;const f=Rve(null!==(r=null===(i=(t=d).payload)||void 0===i?void 0:i.subclass)&&void 0!==r?r:aae.H);if(null===f)return o;(null==u?void 0:u.currentPageId)!==n&&(o=X3(e,n)(o));const h=o.editor,p=pRe(),v=$ve({subclass:f,id:p},[P6([F6([""])],Fve(f))]),g=h.data;let m=[];for(let e=0;e<g.children.length;e++){const n=g.children[e];if(jve(n)&&(null===(l=n.props)||void 0===l?void 0:l.id)===t.id){m=[e];break}}const y=_6(g,m),b=_6(g,ec(m));if(j6(b)&&jve(y)){let i=b.children.indexOf(y)+1;for(;i<b.children.length;){if(jve(b.children[i]))break;i++}b.children.splice(i,0,v);const r=[...ec(m),i,0,0,0],l={anchor:{path:[...r],offset:0},focus:{path:[...r],offset:0}},u=V_e(P6([v]));u.type="outline",u.path=[...null!==(s=t.path)&&void 0!==s?s:[],null!==(a=null===(c=t.children)||void 0===c?void 0:c.length)&&void 0!==a?a:0],o=hq(n,h)(o),o=J3(e,p,!0)(o),o=Y3(u,t.path)(o),o=_3(u)(o),o=O9(l)(o)}return o},V6=(e,t,n)=>n=>{var o,i,r,l;const{store:s,file:c}=n;if(!c)return n;const a=dje(c.tree,t);if(!a)return n;const u=(t=a).id,d=null===(o=null==s?void 0:s.editor)||void 0===o?void 0:o[u];if(void 0===d)return n;const f=aae.H,h=pRe(),p=P6([F6([""])],Fve(f)),v=H6({id:h,uid:h},[p]),g=$ve({subclass:f,id:h},[v]),m=d.data,y=Js(m.children),b=m.children.length;W6(y,!0)&&b>1&&m.children.pop(),m.children.push(g),W6(y,!0)&&b>1&&m.children.push(y),_9(h,h)({editor:d});const C=V_e(P6([g]));C.path=[...null!==(i=t.path)&&void 0!==i?i:[],null!==(l=null===(r=t.children)||void 0===r?void 0:r.length)&&void 0!==l?l:0];const w=vFe({data:P6([g],P$),uids:{[h]:h}});return n=hq(h,w)(n),n=Sq(h,v,h)(n),n=Y3(C,t.path)(n),n=X3(e,C.id,!0)(n),n=_3(C)(n),n=hq(u,d)(n),n=E6(C.id)(n),n=Sq(h,v,u)(n),n=W9()(n)},$6=(e,t,n,o)=>i=>{var r,l,s,c;const{store:a}=i,u=e.id,d=null===(r=null==a?void 0:a.editor)||void 0===r?void 0:r[u];if(void 0===d)return i;const f=aae.H,h=P6([F6([n])],Fve(f)),p=H6({id:t,uid:t},[h]),v=$ve({subclass:f,id:t},[p]),g=d.data,m=Js(g.children),y=g.children.length;W6(m,!0)&&y>1&&g.children.pop(),g.children.push(v),W6(m,!0)&&y>1&&g.children.push(m),_9(t,t)({editor:d});const b=V_e(P6([v]));b.path=[...null!==(l=e.path)&&void 0!==l?l:[],null!==(c=null===(s=e.children)||void 0===s?void 0:s.length)&&void 0!==c?c:0],b.expand=o;const C=vFe({data:P6([v],P$),uids:{[t]:t}});return i=hq(t,C)(i),i=Sq(t,p,t)(i),i=Y3(b,e.path)(i),i=hq(u,d)(i),i=Sq(t,p,u)(i)},{isNode:Z6,isBlockNode:U6,isReferenceBlockNode:q6,isReferenceNode:Y6,traverseNode:K6,isNodeEqual:G6,createBlockNode:X6,createReferenceBlockNode:J6}=ek,{getBranchByPath:Q6}=xT,e4=(e,t,n,o,i=!0)=>r=>{var l,s,c,a,u;if(!jve(e,aae.H))return r;const d=null===(l=e.props)||void 0===l?void 0:l.id;if(!d)return r;let f=null===(c=null===(s=r.store)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[n];if(f)f=i?ts({...f,uids:void 0,node:void 0,ureference:void 0}):{...f,uids:void 0,node:void 0,ureference:void 0};else{const t=e.children[0];if(!q6(t))return r;f=gFe(t,d)}const h=[],p=[],v=e=>{h.push(e)},g=e=>{p.push(e)};f.data.children.slice(1).forEach((e=>{var n,l,s,c;if(Z6(e)){if(zve(e)){const t=null===(n=e.props)||void 0===n?void 0:n.id;if(t){const n=e.children[0],o=null===(s=null===(l=r.store)||void 0===l?void 0:l.reference)||void 0===s?void 0:s[t];if(o){const e=o.data,t=null===(c=n.props)||void 0===c?void 0:c.uid,i={...e.props,uid:t},r={...e,props:i};G6(n,r)||Object.assign(n,r)}}}t4(e,t,d,v,g,o,i)}})),f.data.children[0]=e;const m=jPe(e);for(const e in m){const t=m[e],n=null===(a=t.props)||void 0===a?void 0:a.id;n&&(_9(e,n)({editor:f}),r=Sq(n,t,d)(r))}h.forEach((e=>{e({editor:f})}));const y=null===(u=(r=hq(d,f)(r)).file)||void 0===u?void 0:u.tree;if(y&&t.length){const e=Q6(y,t);if(e){e.path||(r=y6(t)(r));const n=Y_e([e],d);n&&(r=Z3(n)(r))}else r=Z3(d)(r)}else r=Z3(d)(r);return p.forEach((e=>{r=e(r)})),r};function t4(e,t,n,o,i,r,l=!0){K6(e,(e=>{var s,c,a,u,d,f,h,p,v,g,m,y;if(Qse(e)){const d=null!==(a=null===(c=null===(s=e.props)||void 0===s?void 0:s.value)||void 0===c?void 0:c.cells)&&void 0!==a?a:{};for(const e in d){const s=null===(u=d[e].state)||void 0===u?void 0:u.editor;if(!s)return;l4(s),t4(s.node,t,n,o,i,r,l)}}else if(Gde(e)){if(e.props){const t=pRe();e.props.uid=t;const r=e.children[0];if(Y6(r)){const e=null===(d=r.props)||void 0===d?void 0:d.id;e&&r.props&&(r.props.uid=t,o(_9(t,e)),i(Sq(e,r,n)))}return!1}}else if(Y6(e)){const t=null===(f=e.props)||void 0===f?void 0:f.id;if(t&&e.props){const r=pRe();e.props.uid=r,o(_9(r,t)),i(Sq(t,e,n))}}else if(_he(e)||Nae(e))(null===(h=e.props)||void 0===h?void 0:h.uid)&&(e.props.uid=pRe());else if(Lae(e)){if(e.props){const{id:t,uid:o}=e.props;t&&o&&n&&(e.props.id=pRe(),e.props.uid=pRe(),i(uue(e,t,n)))}}else if(jve(e)){if(zve(e)){if(r)return e.props={type:dae,id:null===(m=e.props)||void 0===m?void 0:m.id,subclass:null===(y=e.props)||void 0===y?void 0:y.subclass},void delete e.style;{const s=pRe(),c=null===(p=e.props)||void 0===p?void 0:p.id;(null===(v=e.props)||void 0===v?void 0:v.id)&&(e.props.id=s),(null===(g=e.props)||void 0===g?void 0:g.uid)&&(e.props.uid=s);const a=e.children[0];return q6(a)&&(a.props&&(a.props.id=s,a.props.uid=s),o(_9(s,s)),i(Sq(s,a,null!=n?n:s)),a.children.forEach((e=>{Z6(e)&&t4(e,t,n,o,i,r,l)})),i(e4(e,t,c,r,l))),!1}}if(!e.props)return;e.props.id=pRe();const s=e.props.list;We(s)&&s.forEach((e=>{Z6(e)&&t4(e,t,n,o,i,r,l)}))}else if(uSe(e)){if(!e.props)return;const s=e.props.list;We(s)&&s.forEach((e=>{Z6(e)&&t4(e,t,n,o,i,r,l)}))}}))}const n4=(e,t,n,o,i)=>r=>{var l,s,c,a;if(!jve(e,aae.H))return r;const u=null===(l=e.props)||void 0===l?void 0:l.id;if(!u)return r;const d=null===(s=o.editor)||void 0===s?void 0:s[n];if(!d)return r;const f=[],h=[],p=[],v=e=>{f.push(e)},g=e=>{h.push(e)};i||(i=e=>{p.push(e)});d.data.children.slice(1).forEach((e=>{Z6(e)&&o4(e,t,u,o,v,g,i)})),d.data.children[0]=e,delete d.uids;const m=jPe(e);for(const e in m){const t=m[e],n=null===(c=t.props)||void 0===c?void 0:c.id;n&&(_9(e,n)({editor:d}),r=Sq(n,t,u)(r))}f.forEach((e=>{e({editor:d})}));const y=null===(a=(r=hq(u,d)(r)).file)||void 0===a?void 0:a.tree;if(y&&t.length){const e=Q6(y,t);if(e){e.path||(r=y6(t)(r));const n=Y_e([e],u);n&&(r=Z3(n)(r))}else r=Z3(u)(r)}else r=Z3(u)(r);return h.forEach((e=>{r=e(r)})),p.forEach((e=>{r=e(r)})),r};function o4(e,t,n,o,i,r,l){K6(e,(e=>{var s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x,S,E,k,D;if(Qse(e)){const d=null!==(a=null===(c=null===(s=e.props)||void 0===s?void 0:s.value)||void 0===c?void 0:c.cells)&&void 0!==a?a:{};for(const e in d){const s=null===(u=d[e].state)||void 0===u?void 0:u.editor;if(!s)return;l4(s),o4(s.node,t,n,o,i,r,l)}}else if(Gde(e)){if(e.props){const t=pRe();e.props.uid=t;const l=e.children[0];if(Y6(l)){let e=null===(d=l.props)||void 0===d?void 0:d.id;if(e){const t=null===(h=null===(f=o.reference)||void 0===f?void 0:f[e])||void 0===h?void 0:h.data;if(t){Object.assign(l,{...t,props:{...t.props}});const n=null===(p=t.props)||void 0===p?void 0:p.id;n&&n!==e&&(e=n)}}e&&l.props&&(l.props.uid=t,i(_9(t,e)),r(Sq(e,l,n)))}return!1}}else if(Y6(e)){let t=null===(v=e.props)||void 0===v?void 0:v.id;if(t){const n=null===(m=null===(g=o.reference)||void 0===g?void 0:g[t])||void 0===m?void 0:m.data;if(n&&n.props){Object.assign(e,{...n,props:{...n.props}});const o=null===(y=n.props)||void 0===y?void 0:y.id;o&&o!==t&&(t=o)}}if(t&&e.props){let o=t;FPe(e)||(o=pRe()),e.props.uid=o,i(_9(o,t)),r(Sq(t,e,n))}}else if(_he(e)||Nae(e))(null===(b=e.props)||void 0===b?void 0:b.uid)&&(e.props.uid=pRe());else if(Lae(e)){if(e.props){const{id:t,uid:i,value:r}=e.props;if(t&&i&&(e.props.id=pRe(),e.props.uid=pRe(),l(uue(e,t,n))),r){const e=r.pageId,t=null===(w=null===(C=o.reference)||void 0===C?void 0:C[e])||void 0===w?void 0:w.data;if(t&&t.props){const n=t.props.id;if(n&&n!==e)r.pageId=n;else{const e=pRe();r.pageId=e,t.props.id=e}}}}}else if(jve(e)){if(zve(e)){let s=pRe();const c=null===(x=e.props)||void 0===x?void 0:x.id;let a=e.children[0];if(q6(a)||(U6(a)||(a=X6([a])),a.style={...a.style,...Fve(aae.H)},e.children[0]=J6({uid:s,id:s},[a]),a=e.children[0]),c){const e=null===(S=o.reference)||void 0===S?void 0:S[c].data;if(e&&e.props){Object.assign(a,{...e,props:{...e.props}});const t=null===(E=e.props)||void 0===E?void 0:E.id;t&&t!==c?s=t:e.props.id=s}}return e.props&&(e.props.id=s),a.props&&(a.props.id=s,a.props.uid=s),i(_9(s,s)),r(Sq(s,a,n)),a.children.forEach((e=>{Z6(e)&&o4(e,t,n,o,i,r,l)})),r(n4(e,t,c,o,l)),!1}if(!e.props)return;e.props.id=pRe();const s=e.props.list;We(s)&&s.forEach((e=>{Z6(e)&&o4(e,t,n,o,i,r,l)}))}else if(Vve(e)){if(e.props){const t=e.props.id,n=null===(D=null===(k=o.reference)||void 0===k?void 0:k[t])||void 0===D?void 0:D.data;if(n&&n.props){const o=n.props.id;if(o&&o!==t)e.props.id=o;else{const t=pRe();e.props.id=t,n.props.id=t}}}}else if(uSe(e)){if(!e.props)return;const s=e.props.list;We(s)&&s.forEach((e=>{Z6(e)&&o4(e,t,n,o,i,r,l)}))}}))}function i4(e,t,n,o){K6(e,(e=>{var i,r,l,s,c,a,u,d;if(Qse(e)){const c=null!==(l=null===(r=null===(i=e.props)||void 0===i?void 0:i.value)||void 0===r?void 0:r.cells)&&void 0!==l?l:{};for(const e in c){const i=null===(s=c[e].state)||void 0===s?void 0:s.editor;if(!i)return;i4(i.node,t,n,o)}}else if(Y6(e)){const i=null===(c=e.props)||void 0===c?void 0:c.id,r=null===(a=e.props)||void 0===a?void 0:a.uid;i&&r&&(n(z9(r)),o(kq(i,r,t)))}else if(jve(e)){const i=null===(u=e.props)||void 0===u?void 0:u.list;We(i)&&i.forEach((e=>{Z6(e)&&i4(e,t,n,o)}))}else if(uSe(e)){const i=null===(d=e.props)||void 0===d?void 0:d.list;We(i)&&i.forEach((e=>{Z6(e)&&i4(e,t,n,o)}))}}))}function r4(e,t,n,o,i,r){K6(e,(e=>{var l,s,c,a,u,d,f,h;if(Qse(e)){const u=null!==(c=null===(s=null===(l=e.props)||void 0===l?void 0:l.value)||void 0===s?void 0:s.cells)&&void 0!==c?c:{};for(const e in u){const l=null===(a=u[e].state)||void 0===a?void 0:a.editor;if(!l)return;r4(l.node,t,n,o,i,r)}}else if(Y6(e)){const l=null===(u=e.props)||void 0===u?void 0:u.id,s=null===(d=e.props)||void 0===d?void 0:d.uid;l&&s&&(o(z9(s)),i(_9(s,l)),r(kq(l,s,t)),r(Sq(l,e,n)))}else if(jve(e)){const l=null===(f=e.props)||void 0===f?void 0:f.list;We(l)&&l.forEach((e=>{Z6(e)&&r4(e,t,n,o,i,r)}))}else if(uSe(e)){const l=null===(h=e.props)||void 0===h?void 0:h.list;We(l)&&l.forEach((e=>{Z6(e)&&r4(e,t,n,o,i,r)}))}}))}function l4(e){delete e.ureference,delete e.isEditPending,delete e.isScrollPending,delete e.isScrolling,delete e.isDetectPending,delete e.reflowStart,delete e.selection,delete e.selectionStyle,delete e.selectionDecorate,delete e.resizeWidth,delete e.resizeHeight,delete e.location}const s4=e=>t=>(Ec(t.gfocus,e)||(t.gfocus=e),t),c4=()=>e=>(delete e.gfocus,e),a4=(e,t)=>n=>{var o;const i=null===(o=null==t?void 0:t.current)||void 0===o?void 0:o.options;if(i){const t=e?MHe(e):null;for(const e in i){const o=i[e];if(!(null==o?void 0:o.rstate))continue;const r=e.replace(/>search$/,"");if(null===t||t.startsWith(r)||r.startsWith(t)){const t=OHe(e),i=FHe(t);DDe(t,[])(o.rstate),n=DDe(i,[])(n)}}}if(n.gfocus){const{gfocus:e}=n;n=DDe(e,[])(n)}return e&&!Ec(n.gfocus,e)&&(n=DDe(e,[])(n)),e&&(n=s4(e)(n)),n},u4=e=>t=>{const n=t.gfocus;return n?t=wHe(n)?EDe(n,[R9(e)])(t):R9(e)(t):t},{traverseNode:d4,isReferenceNode:f4,getEditBlockNodeStartPath:h4,getEditBlockNodeEndPath:p4}=ek,v4=()=>e=>{const{file:t,store:n,editor:o,gfocus:i}=e;return t&&i&&n?(e.undoredo=Nqe(t,o,i,n),e):e},g4=()=>e=>{var t;const{file:n,store:o,editor:i,gfocus:r}=e;if(!n||!r||!o)return e;const l=n.currentPageId;return!l||(null===(t=e.undoredo)||void 0===t?void 0:t[l])||(e.undoredo=Nqe(n,i,r,o)),e},m4=e=>t=>e?(t.undoredo={...t.undoredo,...e},t):t,y4=e=>t=>{if(!e)return t;if(!t.undoredo)return t.undoredo=e,t;for(const n in e)t.undoredo[n]||(t.undoredo[n]=e[n]);return t},b4=()=>e=>{var t;if(!e.undoredo)return e;const n=null===(t=e.file)||void 0===t?void 0:t.currentPageId;if(!n)return e;let{editor:o,gfocus:i,store:r,changelog:l}=e;if(r=dVe(n,r),o.cwnd){o=Jl(o);const{data:e,node:t}=o;o.bounds=v_(e,t),o.boundsReset=!0,o.status="normal"}!function(e){let t=0,n=null,o=null;for(const i in e){const r=e[i];if(t+=r.stack.length,null===n){n=r,o=i;continue}n.stack[0].timestamp>r.stack[0].timestamp&&(n=r,o=i)}t>100&&n&&o&&(n.stack.shift(),n.offset=Math.min(n.offset,n.stack.length-1),0===n.stack.length&&delete e[o])}(e.undoredo);const s=Date.now(),c=e.undoredo[n];if(void 0===c)return e.undoredo[n]={offset:0,timestamp:s,stack:[{editor:o,gfocus:i,timestamp:s,store:r,changelog:l}]},e;if(c.stack.length=c.offset+1,c.timestamp+1e3>s&&c.stack.length>1){const t=c.stack[c.offset],n={editor:o,gfocus:i,store:r,timestamp:s,changelog:l};return c.stack[c.offset]=iq(t.store)(n),e}return c.timestamp=s,c.stack.push({editor:o,gfocus:i,store:r,timestamp:s,changelog:l}),c.offset=c.stack.length-1,e},C4=()=>e=>{var t;if(!e.undoredo)return e;const n=null===(t=e.file)||void 0===t?void 0:t.currentPageId;if(!n)return e;let{editor:o,gfocus:i,store:r,changelog:l}=e;r=dVe(n,r);const s={...null==r?void 0:r.editor};delete s[n],r={...r,editor:s};const c=Date.now(),a=e.undoredo[n];if(void 0===a)return e.undoredo[n]={offset:0,timestamp:c,stack:[{editor:o,gfocus:i,timestamp:c,store:r,changelog:l}]},e;const u=a.stack[a.offset];if(null==u?void 0:u.store)try{rq(r)(u),r=u.store}catch(e){console.error(e)}return a.stack[a.offset]={editor:o,gfocus:i,timestamp:c,store:r,changelog:l},e},w4=e=>t=>{var n;if(!t.undoredo)return t;const o=null===(n=t.file)||void 0===n?void 0:n.currentPageId;if(!o)return t;const i=t.undoredo[o];if(void 0===i)return t;let{offset:r}=i;return r<=0||(r--,t=S4(r,e)(t),i.offset=r),t},x4=e=>t=>{var n;if(!t.undoredo)return t;const o=null===(n=t.file)||void 0===n?void 0:n.currentPageId;if(!o)return t;const i=t.undoredo[o];if(void 0===i)return t;let{stack:r,offset:l}=i;return l>=r.length-1||(l++,t=S4(l,e)(t),i.offset=l),t},S4=(e,t)=>n=>{var o,i,r,l,s,c,a,u,d,f,h,p,v,g;if(!n.undoredo)return n;const m=null===(o=n.file)||void 0===o?void 0:o.currentPageId;if(!m)return n;const y=Wu(n.undoredo[m]);if(void 0===y)return n;const{stack:b}=y;let{editor:{...C},gfocus:w,store:x,changelog:S}=b[e];if(void 0===C||void 0===w)return n;n=iq(t=null!=t?t:x)(n);const{duids:E,cuids:k,uuids:D}=bFe(n.editor,C),I={},N=[];for(const e in E){const t=E[e];if(n=kq(t,e,m)(n),e===t){const e=null===(l=null===(r=null===(i=n.store)||void 0===i?void 0:i.catalog)||void 0===r?void 0:r[t])||void 0===l?void 0:l.type;if("page"===e||"root"===e){const e=null===(s=n.store)||void 0===s?void 0:s.editor;n=bq(t,!0,(t=>{if(!(null==e?void 0:e[t]))return I[t]=!0,!0}))(n)}}}for(const e in k){const o=k[e],i=null===(c=null==t?void 0:t.reference)||void 0===c?void 0:c[o];if(!i)continue;const r={...i.data};if(r.props={...r.props,uid:e},n=Sq(o,r,m)(n),e===o){const e=null===(u=null===(a=null==t?void 0:t.catalog)||void 0===a?void 0:a[o])||void 0===u?void 0:u.type;"page"!==e&&"root"!==e||(n=yq(o,!0,(e=>{if(I[e])return delete I[e],!0;N.includes(e)||N.push(e)}))(n))}}for(const e in D){const o=D[e],i=null===(d=null==t?void 0:t.reference)||void 0===d?void 0:d[o];if(!i)continue;const r={...i.data};if(r.props={...r.props,uid:e},e===o){const l=null===(h=null===(f=null==t?void 0:t.catalog)||void 0===f?void 0:f[o])||void 0===h?void 0:h.type;if("page"===l||"root"===l){const l=Object.keys(i.detail).filter((e=>e!==m)),s={},c={},a=null===(v=null===(p=n.store)||void 0===p?void 0:p.reference)||void 0===v?void 0:v[o];if(!a)continue;const u={...a.data};u.props={...u.props,uid:e},d4(u,(e=>{var t,n;if(f4(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;s[i]=o}})),d4(r,(e=>{var t,n;if(f4(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;if(!s[i])return void(c[i]=o);delete s[i]}}));for(const e in s){const t=s[e];for(const o of l)n=kq(t,e,o)(n)}for(const e in c){const o=c[e],i=null===(g=null==t?void 0:t.reference)||void 0===g?void 0:g[o];if(!i)continue;const r={...i.data};r.props={...r.props,uid:e};for(const e of l)n=Sq(o,r,e)(n)}}}n=xq(o,r,m)(n)}const{clientWidth:L,clientHeight:B}=n.editor;if(C.clientWidth!==L||C.clientHeight!==B){C=B$e(C,h4(C.node),p4(C.node)),C.clientHeight=B,C.clientWidth=L,C.scrollHeight=2*B}else C.bounds=v_(C.data,C.node),C.boundsReset=!0,delete C.status,delete C.ureference;C.ureference=jPe(C.node),n.editor=C,n=hq(m,C)(n),n=Z3(m,!0)(n);for(const e of N)n=Z3(e,!0)(n);return n=s4(w)(n),n=EDe(w,[e=>(e.editor.selectionReflow=!0,e)])(n),S&&(n=_U(S,!0)(n)),n};const{initNodeKey:E4,createBlockNode:k4,createReferenceBlockNode:D4,transformEditNodeToNode:I4,clearSelection:N4,isReferenceBlockNode:L4}=ek,B4=e=>t=>(t=T4(e)(t),t=M4()(t),t=A4()(t),t=v4()(t),t=aq({bootstrap:!0})(t)),T4=e=>t=>{const n=qZe(),o=[UZe(e,AK.note,[n])];return t.file?(t.file.tree=o,t.file.isEditPending=!0,t.file.currentPageId=n.id,t):t},A4=e=>e=>{var t,n,o,i;const r=null===(t=e.file)||void 0===t?void 0:t.currentPageId;if(!r)return e;const l=null===(o=null===(n=(e=vq(r)(e)).store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[r];if(void 0===l)return e;const{cwnd:s=3,data:c,scrollHeight:a}=l,u=null!==(i=gPe(c,[],s))&&void 0!==i?i:E4(c),d=v_(c,u),{clientHeight:f,clientWidth:h}=wqe();return delete l.isEditPending,delete l.isScrollPending,delete l.isScrolling,delete l.reflowStart,delete l.selection,delete l.selectionStyle,delete l.selectionDecorate,delete l.resizeWidth,delete l.resizeHeight,delete l.location,l.refresh=pRe(!0),l.data=c,l.node=u,l.bounds=d,l.boundsReset=!0,l.scrollTop=0,l.clientHeight=f,l.clientWidth=h,l.scrollHeight=Math.max(a,f),l.scrollOffset={top:r$},e=l9(l)(e)},M4=e=>e=>{var t;const n=null===(t=e.file)||void 0===t?void 0:t.tree;return void 0===n||(e=O4(n[0])(e),n.forEach((t=>{e=Nq(t,void 0,!0)(e)}))),e},O4=e=>t=>{var n,o;let i={};const r=e.id,l={[r]:r};let s=e.title;L4(s)&&(s=s.children[0]);const c=[$ve({subclass:aae.H,id:r},[D4({id:r,uid:r},[{...ts(s),style:{...s.style,...Fve(aae.H)}}])])];null===(n=e.children)||void 0===n||n.forEach((e=>{if(!e)return;const{type:n,title:o,id:i,payload:r}=e;"page"===n?(c.push($ve({subclass:r.subclass,id:i},[D4({id:i,uid:i},[{...ts(o),style:{...o.style,...Fve(r.subclass)}}])])),t=O4(e)(t)):"outline"===n&&c.push(...$_e(e))}));const a=I4(k4(c,P$)),u=jPe(a);for(const e in u){const n=u[e],i=null===(o=n.props)||void 0===o?void 0:o.id;i&&(l[e]=i,t=Sq(i,n,r)(t))}return i.uids=l,i.data=a,i=vFe(i),i=N4()(i),t=hq(r,i)(t)},{isNode:R4}=ek,{getBranchByPath:P4}=xT,F4=(e,t)=>n=>{var o;const{path:i=[0]}=t,r=null===(o=(n=H4(e,t)(n)).file)||void 0===o?void 0:o.tree;if(!(null==r?void 0:r.length))return n=B4(e)(n),n=Q9()(n);let l=P4(r,i);if(l||(l=i.length>1?P4(r,ec(i)):r[i[0]-1]),null!==l){const{id:t,type:o}=l;"outline"===o?n=J3(e,t,!0)(n):(n=A6()(n),n=X3(e,t,!0)(n)),n=_3(l)(n)}return n},H4=(e,t)=>e=>{var n,o,i,r,l,s;const{file:c}=e;if(void 0===c)return e;const{id:a,path:u}=t;if(!u)return e;const{tree:d}=c;let f=t;if(f="outline"===f.type?rje(d,t):P4(d,ec(u)),f){const{id:l}=f,s=null===(o=null===(n=(e=W3(t)(e)).store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[l];if(void 0===s)return e;const{uids:c,data:u}=s;let d=!0;for(const e in c)c[e]!==e&&(d=!1);if(d){let t=-1,n=-1,o=null;for(let e=0;e<u.children.length;e++){const l=u.children[e];if(jve(l)){const s=null===(i=l.props)||void 0===i?void 0:i.id,c=null===(r=l.props)||void 0===r?void 0:r.subclass;if(!c||!s)continue;if(-1===t){if(s===a&&(t=e,o=c,c===aae.H)){n=e+1;break}continue}if(o&&o<=c){n=e;break}}}if(-1===t)return e;-1===n&&(n=u.children.length),u.children.splice(t,n-t),e=hq(l,s)(e)}else{const t=[],n=[];!function(e,t,n,o,i){var r,l,s,c;const a=e.children.map((t=>({parent:e.children,cnode:t})));let u=null;for(;a.length;){const e=a.shift();if(void 0===e)continue;const{parent:d,cnode:f}=e;if(jve(f)){if(null!==u){if(u>(null===(r=f.props)||void 0===r?void 0:r.subclass)){const e=d.indexOf(f);d.splice(e,1),i4(f,n,o,i);continue}break}const e=null===(l=f.props)||void 0===l?void 0:l.list;if(We(e)&&a.unshift(...e.map((t=>({parent:e,cnode:t})))),(null===(s=f.props)||void 0===s?void 0:s.id)===t){const e=d.indexOf(f);if(d.splice(e,1),i4(f,n,o,i),u=null===(c=f.props)||void 0===c?void 0:c.subclass,u===aae.H)break;continue}}else if(null!==u){const e=d.indexOf(f);d.splice(e,1),R4(f)&&i4(f,n,o,i)}}}(u,a,l,(e=>{t.push(e)}),(e=>{n.push(e)})),t.forEach((e=>{e({editor:s})})),n.forEach((t=>{e=t(e)})),e=hq(l,s)(e),e=Z3(f)(e)}}else{const n=d.findIndex((e=>e.id===t.id));-1!==n&&(d.splice(n,1),e=y6([],n)(e))}return(null===(s=null===(l=e.store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[a])&&(e=bq(a)(e)),e};const{isNode:_4}=ek,{getBranchByPath:j4}=xT,W4=(e,t)=>n=>{var o;const{file:i}=n;if(void 0===i)return n;const r=null===(o=(n=z4(e,t)(n)).file)||void 0===o?void 0:o.tree;if(void 0===r)return n;const l=J_e(r,t);if(null!==l){const{id:t,type:o}=l;n="outline"===o?J3(e,t,!0)(n):X3(e,t,!0)(n),n=_3(l)(n)}return n},z4=(e,t)=>e=>{var n,o,i,r;const{file:l}=e;if(void 0===l)return e;const s=[],c=[],a=e=>{s.push(e)},u=e=>{c.push(e)},{id:d,type:f,path:h=[0]}=t;if("root"===f){const t=null===(o=null===(n=e.store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[d];if(void 0===t)return e;const i=t.data.children.slice(0,1),r=ts({...t.data,children:i});t4(r,[h[0]+1],null,a,u);const l=V_e(r);return l.type="root",l.tag=!0,e=K3(l,h)(e),c.forEach((t=>{e=t(e)})),e=w6(l)(e)}const{tree:p}=l;let v=t;v="outline"===v.type?rje(p,t):j4(p,ec(t.path));const{id:g}=v,m=null===(r=null===(i=e.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[g];return void 0===m?e:(e=E9(g)(e),function(e,t,n,o,i){var r,l,s,c;let a=null,u=-1,d=[];const f=[],{id:h,path:p=[]}=t,v=e.children.map((t=>({parent:e.children,cnode:t})));for(;v.length;){const e=v.shift();if(void 0===e)continue;const{parent:t,cnode:g}=e;if(jve(g)){if(null!==a){if(!(a>(null===(r=g.props)||void 0===r?void 0:r.subclass)))break;{const e=ts(g);t4(e,p,h,o,i),f.push(e)}}const e=null===(l=g.props)||void 0===l?void 0:l.list;if(We(e)&&v.unshift(...e.map((t=>({parent:e,cnode:t})))),(null===(s=g.props)||void 0===s?void 0:s.id)===n){a=null===(c=g.props)||void 0===c?void 0:c.subclass,u=t.indexOf(g),d=t;const e=ts(g);if(t4(e,p,h,o,i),f.push(e),a===aae.H)break;continue}}else if(null!==a)if(_4(g)){const e=ts(g);t4(e,p,h,o,i),f.push(e)}else f.push(g)}d.splice(u+f.length,0,...f)}(m.data,v,d,a,u),s.forEach((e=>{e({editor:m})})),e=Z3(v)(e),c.forEach((t=>{e=t(e)})),e=hq(g,m)(e),e=b6()(e))};const V4=(e,t)=>n=>(void 0===n.flush&&(n.flush={}),void 0===n.flush.ids&&(n.flush.ids=[]),n.flush.ids.includes(e)||n.flush.ids.push(e),t?(void 0===n.flush.after&&(n.flush.after=[]),n.flush.after.includes(t)||n.flush.after.push(t),n):n),$4=e=>t=>{var n;if(void 0===(null===(n=t.flush)||void 0===n?void 0:n.ids))return t;const o=t.flush.ids.indexOf(e);return-1!==o&&t.flush.ids.splice(o,1),t},Z4=()=>e=>(void 0===e.flush||e.flush.ids&&delete e.flush.ids,e),U4=()=>e=>{var t;return(null===(t=e.flush)||void 0===t?void 0:t.after)?(e.flush.after.forEach((t=>{e=t(e)})),delete e.flush.after,e):e},{createBlockNode:q4,isNode:Y4,isEmptyNode:K4}=ek,{getBranchByPath:G4}=xT,X4=(e,t)=>n=>{var o,i,r,l,s,c,a,u;const{file:d}=n;if(void 0===d)return n;const{tree:f}=d,{path:h,move:p,type:v}=t;if(!h)return n;const{id:g,type:m,path:y}=e.branch;if(!y)return n;if("root"===m){if("root"!==t.type&&t.path&&(t=f[t.path[0]]),"root"===t.type){let e=null!==(o=tc(t.path))&&void 0!==o?o:0,r=null!==(i=tc(y))&&void 0!==i?i:0,l=f[e],s=f[r];f.splice(r,1),e=f.indexOf(l);let c=e+1;"above"===p&&(c=e),f.splice(c,0,s),n=y6()(n),n=H3(!0)(n)}return n}let b=e.branch;if("outline"===b.type)b=rje(f,e.branch);else{const t=ec(e.branch.path);b=G4(f,t)}const{id:C}=b,w=null===(l=null===(r=n.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[C];if(void 0===w)return n;let x=t;if("above"===p||"below"===p)if("outline"===x.type)x=rje(f,t);else{const e=ec(t.path);x=G4(f,e)}else x=rje(f,t);const{id:S}=x,E=null===(c=null===(s=n.store)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[S];if(void 0===E)return n;const k=G4(f,h);let D=null;if(void 0===p||"below"===p?D=J_e(f,t):"above"===p?D=k:"inside"===p&&(D=J_e(f,t)),g===(null==D?void 0:D.id))return n;const I=w.data,N=E.data;let L=[];if(void 0===p){if(k&&"outline"!==k.type){L=J4(I,g);const t=Js(N.children),o=N.children.length;K4(t,!0)&&o>1&&N.children.pop(),N.children.push(...L),K4(t,!0)&&o>1&&N.children.push(t),n=X3(e,k.id,!0)(n)}else if((null==D?void 0:D.id)===S){L=J4(I,g);const e=Js(N.children),t=N.children.length;K4(e,!0)&&t>1&&N.children.pop(),N.children.push(...L),K4(e,!0)&&t>1&&N.children.push(e)}else if(D){const e=_ve(N,D.id);if(Y4(e)){L=J4(I,g);let t=N.children.indexOf(e);t<=0&&(t=N.children.length-1),N.children.splice(t,0,...L)}}}else if(k&&"outline"!==(null==k?void 0:k.type)&&"inside"===p){L=J4(I,g);const t=Js(N.children),o=N.children.length;K4(t,!0)&&o>1&&N.children.pop(),N.children.push(...L),K4(t,!0)&&o>1&&N.children.push(t),n=X3(e,k.id,!0)(n)}else if(D){const e=_ve(N,D.id);if(Y4(e)){L=J4(I,g);let t=N.children.indexOf(e);t<=0&&(t=N.children.length-1),N.children.splice(t,0,...L)}}const B=[],T=[],A=[];r4(mPe(q4(L),{reference:null===(a=n.store)||void 0===a?void 0:a.reference}),C,S,(e=>{B.push(e)}),(e=>{T.push(e)}),(e=>{A.push(e)})),B.length&&B.forEach((e=>{e({editor:w})})),T.length&&T.forEach((e=>{e({editor:E})})),A.forEach((e=>{n=e(n)})),n=hq(C,w)(n),C!==S&&(n=hq(S,E)(n)),n=Z3(b)(n),C!==S&&(n=Z3(x)(n));const M=Y_e(f,g);if(M&&"page"===m){const{children:t,expand:o}=e.branch,i={...M,children:t,expand:o};n=a6(i)(n),n=Z3(i)(n)}const O=null===(u=n.file)||void 0===u?void 0:u.currentPageId;return O&&(n=V4(O)(n)),n=_3(t)(n)};function J4(e,t){var n,o,i;let r=null,l=-1;const s=[],c=[...e.children];for(;c.length;){const a=c.shift();if(void 0!==a)if(jve(a)){if(null!==r){if(!(r>(null===(n=a.props)||void 0===n?void 0:n.subclass)))break;s.push(a)}if((null===(o=a.props)||void 0===o?void 0:o.id)===t&&(r=null===(i=a.props)||void 0===i?void 0:i.subclass,l=e.children.indexOf(a),s.push(a),r===aae.H))break}else null!==r&&s.push(a)}return e.children.splice(l,s.length),s}const{getPathFromKey:Q4,initNodeKey:e8,isBlockNodeX:t8,isEditNode:n8,isNode:o8,isReferenceNode:i8,transformEditNodeToNode:r8}=ek,l8=(e,t)=>n=>{var o,i,r,l;if(void 0===(null===(o=n.file)||void 0===o?void 0:o.tree))return n;const{branch:{id:s,type:c},pageId:a}=e;let u=a;"outline"!==c&&(u=s);const d=null===(r=null===(i=n.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[u];if(void 0===d)return n;let f=null,h=_ve(d.data,s);if(o8(h)){for(;t8(h);)i8(h)&&(f=h),h=h.children[0];h.children=r8(t).children}f&&(n=xq(s,f,null)(n));const p=null===(l=n.file)||void 0===l?void 0:l.currentPageId;if(p===a||p===s){const e=n.editor;let o=!1,i=_ve(e.data,s);if(o8(i)){for(;t8(i);)i=i.children[0];i.children=r8(t).children}let r=_ve(e.node,s);if(o8(r)){for(;t8(r);)r=r.children[0];if(n8(r)){const e=Q4(r.key);r.children=e8(t,e).children,o=!0}}o&&(n.editor.isEditPending=o)}return n=hq(u,d)(n),n=Z3(u)(n)},s8=(e,t)=>n=>{var o,i,r;if(void 0===n.file)return n;n.file.cloud=null!==(o=n.file.cloud)&&void 0!==o?o:{};for(const o in n.file.cloud){if(o===e)continue;const r=null!==(i=n.file.cloud[o])&&void 0!==i?i:[],l=r.findIndex((e=>e.id===t.id));-1!==l&&r.splice(l,1)}const l=null!==(r=n.file.cloud[e])&&void 0!==r?r:[],s=l.findIndex((e=>e.id===t.id));return-1===s?l.push(t):l[s]=t,n.file.cloud[e]=l,n=H3(!0)(n)},c8=(e,t)=>n=>{var o,i,r,l;if(void 0===n.file)return n;const s=null===(o=n.file.cloud)||void 0===o?void 0:o[e];if(!s)return n;if(!Array.isArray(s))return null===(i=n.file.cloud)||void 0===i||delete i[e],n;if(!t)return null===(r=n.file.cloud)||void 0===r||delete r[e],n;const c=s.findIndex((e=>e.id===t));return-1!==c&&s.splice(c,1),Sc(s)&&(null===(l=n.file.cloud)||void 0===l||delete l[e]),Sc(n.file.cloud)&&delete n.file.cloud,n=H3(!0)(n)},a8=(e,t,n)=>o=>{var i;if(void 0===o.file)return o;const r=null===(i=o.file.cloud)||void 0===i?void 0:i[e];if(!r)return o;for(const e of r)e.id===t&&Object.assign(e,n);return o=H3(!0)(o)},u8=(e,t,n)=>o=>{var i;if(void 0===o.file)return o;const r=null===(i=o.file.cloud)||void 0===i?void 0:i[e];if(!r)return o;for(const e of r)e.id===t&&(e.timer=n);return o},d8=e=>t=>{var n,o,i,r;return(null===(o=null===(n=t.file)||void 0===n?void 0:n.cloud)||void 0===o?void 0:o[e])?(null===(r=null===(i=t.file)||void 0===i?void 0:i.cloud)||void 0===r||delete r[e],t):t},f8=e=>t=>{var n;if(void 0===t.file)return t;const o=null===(n=t.file.cloud)||void 0===n?void 0:n[e];return o?(o.forEach((e=>delete e.bind)),t=H3(!0)(t)):t},h8=(e,t)=>n=>{var o;const i=null===(o=n.file)||void 0===o?void 0:o.tree;if(!i)return n;const r=rje(i,e);return r?(r.float=t,n):n},p8=(e,t)=>n=>{var o;const i=null===(o=n.file)||void 0===o?void 0:o.tree;if(!i)return n;const r=rje(i,e);return(null==r?void 0:r.float)?(Object.assign(r.float,t),n=H3(!0)(n)):n},v8=e=>t=>{var n;const o=null===(n=t.file)||void 0===n?void 0:n.tree;if(!o)return t;const i=rje(o,e);return(null==i?void 0:i.float)?(delete i.float,t=H3(!0)(t)):t},g8=(e,t)=>t=>{if(!t.file)return t;return rje(t.file.tree,e),t},{transformEditNodeToNode:m8,removePositionStyle:y8,isPathBefore:b8,isPathAfter:C8,isCollapsed:w8,isNode:x8,isEditNode:S8,isNodeEqual:E8,isReferenceNode:k8,isEmptyNode:D8,isEditBlockNode:I8,injectSplitBlockNodeStyle:N8,deleteFragment:L8,getEditBlockNodeStartPath:B8,getEditBlockNodeEndPath:T8,sliceNode:A8,getNodeLength:M8,getPathFromKey:O8,isBlockNode:R8,isBlockNodeX:P8,getEditNodeByPath:F8,getNodeByPath:H8,traverseNode:_8,resetEditNodeKey:j8,getNodeStartPath:W8,getNodeEndPath:z8,isBlockNodeCritical:V8,transformNodeToEditNode:$8,getEditNodeEndPath:Z8,getKeyFromPath:U8,clearSelection:q8,removeLocation:Y8,reflowEditNodeByPath:K8,calcTouchHeight:G8,sortSelection:X8,getEditNodeStartPath:J8,sliceBlockPath:Q8,isStartPath:e9,createBlockNode:t9,removeBoxSizeStyle:n9,getRelativePath:o9,SPLIT_BLOCK_MARGIN:i9}=ek,r9=e=>t=>(Object.assign(t.editor,e),t),l9=e=>t=>{var n,o;const{node:i,uids:r={},ureference:l={}}=e,s={},c={reference:null===(n=t.store)||void 0===n?void 0:n.reference,callback(e){var t,n;if(!k8(e))return;_8(e,(e=>{Pu(e.children)&&(e.children=Cd(e.children)),Pu(e.style)&&(e.style=Cd(e.style)),Pu(e.props)&&(e.props=Cd(e.props));for(const t in e.props){const n=e.props[t];Pu(n)&&(e.props[t]=Cd(n))}}));const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;o&&i&&(s[i]=e)}},a=mPe(i,c);for(const e in l)delete r[e];for(const e in s){const t=null===(o=s[e].props)||void 0===o?void 0:o.id;t&&(r[e]=t)}return e.uids=r,e.node=a,e.ureference=s,t.editor=e,t},s9=(e,t,n)=>o=>{var i,r,l,s,c;const{editor:{data:a,node:u,uids:d,scrollTop:f},store:h}=o,p=Pu(a)&&null!==(i=Wu(a))&&void 0!==i?i:a,{before:v,after:g}=X8(t);let m=v.path,y=tc(u.children);if(!I8(y))return o;let b=J8(y);b8(b,m)&&(m=b),m=Q8(p,m);let C=g.path,w=Js(u.children);if(!I8(w))return o;const x=Z8(w);C8(x,C)&&(C=x),C=Q8(p,C);let S=null!==(l=null===(r=y.position)||void 0===r?void 0:r.top)&&void 0!==l?l:0;if(!e9(b)){let e=Qs(b),t=y.children[0];for(;null==t?void 0:t.position;){S+=t.position.top,e9(e)||((null===(s=t.style)||void 0===s?void 0:s.paddingTop)&&(S-=Number(t.style.paddingTop)),(null===(c=t.style)||void 0===c?void 0:c.marginTop)&&(S-=Number(t.style.marginTop)));const n=t.children[0];if(!I8(n))break;t=n,e=Qs(e)}}const E=S-f;let k;if(Sc(d)||1===Object.keys(d).length)k=A8(p,m,C);else{k=DPe(p,{focus:{path:m,offset:0},anchor:{path:C,offset:0}},null==h?void 0:h.reference)}const D={start:{path:m,slice:!1},end:{path:C,slice:!1}};o.editor.bounds=D,o.editor.node=k;const I=Jl(o.editor.ureference);for(const t of e)o.editor=t(o.editor);const N=jPe(o.editor.node);o.editor.ureference=N,o=Z9(I,N)(o);for(const e of n)o=e(o);const L=T$e((o=q9()(o)).editor,m,m);L.selection=o.editor.selection,o.editor=L;const B={top:0,left:0,right:0,bottom:0};o.editor.node.position={...B};return o.editor.node.children[0].position={...B,top:E},K8(m)(o.editor),o=pq()(o),o=p9()(o),o=b4()(o)},c9=e=>t=>(t.editor.bounds=e,t),a9=e=>t=>(t.editor.boundsReset=e,t),u9=e=>t=>(t.editor.isPastePending=e,t),d9=()=>e=>{const{node:t,bounds:n}=e.editor,o=T8(t);return C8(n.end.path,o)?(n.end.path=o,n.end.slice=!1,e):e},f9=()=>e=>{var t,n,o;if(e.editor.createTime)return e;const i=null===(t=e.file)||void 0===t?void 0:t.currentPageId;if(!i)return e;const r=Date.now();e.editor.createTime=r;const l=null===(o=null===(n=e.store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[i];return l&&(l.readTime=r),e},h9=()=>e=>{var t,n,o;const i=null===(t=e.file)||void 0===t?void 0:t.currentPageId;if(!i)return e;const r=Date.now();e.editor.readTime=r;const l=null===(o=null===(n=e.store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[i];return l&&(l.readTime=r),e},p9=()=>e=>{var t,n,o;const i=null===(t=e.file)||void 0===t?void 0:t.currentPageId;if(!i)return e;const r=Date.now();e.editor.updateTime=r;const l=null===(o=null===(n=e.store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[i];return l&&(l.updateTime=r),e},v9=e=>t=>(t.editor.isEditPending=e,t),g9=e=>t=>(t.editor.refresh=e,t),m9=e=>t=>(t.editor.slicer=e,t),y9=e=>t=>(t.editor.reload=e,t),b9=e=>t=>{if(t.editor.formatPaint=e,e){const e={...t.editor.selectionStyle};delete e.cursor,t.editor.formatPaintStyle=e}else delete t.editor.formatPaintStyle;return t},C9=e=>t=>(t.editor.scrollTouchReset=e,t),w9=e=>t=>(t.editor.scrollProgress=e,t),x9=()=>e=>(delete e.editor.scrollProgress,e),S9=()=>e=>{var t,n,o,i;const{data:r,node:l}=e.editor;let s=l.children[0];(zve(s)||Vve(s))&&(null===(t=l.children[1])||void 0===t?void 0:t.position)&&(s=l.children[1]);const c=Js(l.children);if(!I8(s)||!I8(c))return e;const a=null===(n=s.position)||void 0===n?void 0:n.top,u=null===(o=l.position)||void 0===o?void 0:o.bottom;if(void 0===a||void 0===u)return e;const d=Math.max(1,r.children.length-1),f=Math.max(1,l.children.length-1),h=Math.ceil((u-a)/f),p=a-O8(s.key)[0]*h*.8,v=[p,u+(d-O8(c.key)[0]-1)*h],g=G8(v);e.editor.scrollTouch=v,e.editor.scrollHeight=g,e.editor.contentHeight=g;const m=e.editor.scrollProgress;if(m){const{scrollTop:t,clientHeight:n}=e.editor,o=t-(null!==(i=null==v?void 0:v[0])&&void 0!==i?i:0);if(m!==o/(g-n)){const t=o/m+n,i=[p,t+p];e.editor.scrollTouch=i,e.editor.scrollHeight=t,e.editor.contentHeight=t}e=x9()(e)}return e},E9=e=>t=>{var n;const{store:o}=t;if(!o)return t;if(e&&!Pje(e,o))return t;let i=t.editor;if(e&&(i=null===(n=o.editor)||void 0===n?void 0:n[e]),!i)return t;if(Sc(i.uids))return t;const r={},l={reference:o.reference,callback(e){var t,n;if(!k8(e))return;const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;o&&i&&(r[i]=o)}};return xFe(i,l),Sc(r)||(i.uids=r),t},k9=e=>t=>{var n;if(Sc(e={...null===(n=t.store)||void 0===n?void 0:n.reference,...e}))return t;let o=!1;const{node:i,ureference:r={}}=t.editor;return function e(t,n){_8(t,((t,o)=>{var i,r,l;k8(t)?n(t,o):(uSe(t)||jve(t))&&!1===(null===(i=t.props)||void 0===i?void 0:i.expand)&&(null===(l=null===(r=t.props)||void 0===r?void 0:r.list)||void 0===l||l.forEach((t=>{e(t,n)})))}))}(i,((t,n)=>{var i,l,s;const c=null===(i=t.props)||void 0===i?void 0:i.id,a=null===(l=t.props)||void 0===l?void 0:l.uid,u=null===(s=null==e?void 0:e[c])||void 0===s?void 0:s.data;if(!u||!a||!c)return;const d={...u.props,uid:a},f=$8({...u,props:d},t.key);r[a]=f,Object.assign(t,f),o=!0})),o&&(t.editor.isEditPending=!0,t.editor.refresh=pRe(!0),t.editor.ureference=r),t},D9=e=>t=>(void 0===e||(t.editor.ureference={...t.editor.ureference,...e}),t),I9=(e,t)=>n=>{var o;if(void 0===t&&void 0===e)return n;const i={...n.editor.ureference},r={};for(const t in e)delete i[t];for(const n in t){const l=t[n];if(i[n]=l,!E8(l,null==e?void 0:e[n])){const e=null===(o=l.props)||void 0===o?void 0:o.id;e&&(r[e]=l)}}if(n.editor.ureference=i,Sc(r))return n;const{node:l}=n.editor;let s=!1;const c=[];if(function e(t,n){_8(t,((t,o)=>{var i,r,l;k8(t)?n(t,o):(uSe(t)||jve(t))&&!1===(null===(i=t.props)||void 0===i?void 0:i.expand)&&(null===(l=null===(r=t.props)||void 0===r?void 0:r.list)||void 0===l||l.forEach((t=>{e(t,n)})))}))}(l,((e,t)=>{var n,o;const i=null===(n=e.props)||void 0===n?void 0:n.id,l=null===(o=e.props)||void 0===o?void 0:o.uid,a=null==r?void 0:r[i];if(!a||!l||!i)return;const u={...a.props,uid:l},d=$8({...a,props:u},e.key);Object.assign(e,d),s=!0,c.push(t)})),s){n.editor.isEditPending=!0;for(const e of c)n.editor=K8(e,!0)(n.editor)}return n},N9=e=>t=>(t.editor.status=e,t),L9=e=>t=>(t.editor.data=e,t),B9=e=>t=>(t.editor.threshold=e,t),T9=e=>t=>(t.editor.scrollOffset=e,t),A9=e=>t=>(t.editor.clientHeight=e.clientHeight,t.editor.clientWidth=e.clientWidth,t),M9=(e,t)=>n=>{if(!cHe(e))return n;const{ghighlights:o=[]}=n.editor,i=o.find((t=>Ec(t.search,e)));return i?i.highlights=t:o.push({search:e,highlights:t}),n.editor.ghighlights=o,n},O9=(e,t)=>n=>(n.editor.selection=e,t&&(n.editor.selectionReflow=!0),n),R9=e=>t=>(t.editor.selectionReflow=e,t),P9=()=>e=>(e.editor=q8()(e.editor),e),F9=()=>e=>(e.editor=Y8()(e.editor),e),H9=()=>e=>{const t=e.editor.selection;return w8(t)?(e.editor=q8()(e.editor),e):e},_9=(e,t)=>n=>{var o;const i=null!==(o=n.editor.uids)&&void 0!==o?o:{};return i[e]=t,n.editor.uids=i,n},j9=()=>e=>{const{data:t}=e.editor,n=W8(t),o={focus:{path:[...n],offset:0},anchor:{path:[...n],offset:0}};return e.editor.selection=o,e},W9=()=>e=>{const{data:t}=e.editor,n=z8(t),o=H8(t,n);if(null===o)return e;const i=M8(o),r={focus:{path:[...n],offset:i},anchor:{path:[...n],offset:i}};return e.editor.selection=r,e},z9=(e,t)=>n=>{const o=n.editor.uids;return o?(t?Object.keys(o).forEach((e=>{o[e]===e&&delete o[e]})):delete o[e],Sc(o)?(delete n.editor.uids,n):n):n},V9=()=>e=>{const{ghighlights:t,data:n,node:o}=e.editor;return null==t||t.forEach((e=>{const t=e.search;t&&($He(n,t,(e=>{e.editor.refresh=pRe(!0),delete e.editor.highlights})),$He(o,t,(e=>{e.editor.refresh=pRe(!0),delete e.editor.highlights})))})),e.editor.refresh=pRe(!0),delete e.editor.highlights,delete e.editor.ghighlights,e},$9=()=>e=>{const t=e.editor.selectionDecorate;return(null==t?void 0:t[Phe])===Phe?e.editor.cursorStyle={backgroundImage:Fhe}:(null==t?void 0:t[wae])===wae?e.editor.cursorStyle={backgroundImage:xae}:(null==t?void 0:t[Cae])===Cae?e.editor.cursorStyle={backgroundImage:Sae}:e.editor.cursorStyle=void 0,e},Z9=(e,t)=>n=>{var o,i,r,l;const{uids:{...s}}=n.editor;if(void 0===s)return n;const c=null===(o=n.file)||void 0===o?void 0:o.currentPageId;if(void 0===c)return n;const a={},u={},d={},f={};for(const t in e){const{props:n}=e[t];if(!n)continue;const{uid:o,id:i}=n;delete s[o],a[o]=i}for(const e in t){const{props:n}=t[e];if(!n)continue;const{uid:o,id:i}=n;s[o]=i,f[o]||(f[o]=m8(t[e])),a[o]?(delete a[o],d[o]=i):u[o]=i}const h={};for(const t in a){const o=a[t],r=null==e?void 0:e[t];if(r&&(n=kq(o,t,c)(n),FPe(r))){const e=null===(i=n.store)||void 0===i?void 0:i.editor;n=bq(o,!0,(t=>{if(!(null==e?void 0:e[t]))return h[t]=!0,!0}))(n)}}for(const e in u){const t=u[e],o=f[e];o&&(n=Sq(t,o,c)(n),FPe(o)&&(n=yq(t,!0,(e=>{if(h[e])return delete h[e],!0}))(n)))}for(const o in d){const i=d[o],s=f[o];if(s&&(null==e?void 0:e[o])&&(null==t?void 0:t[o])){if(FPe(s)){const a=null===(l=null===(r=n.store)||void 0===r?void 0:r.reference)||void 0===l?void 0:l[i];if(!(null==a?void 0:a.detail[c])){n=Sq(i,s,c)(n);continue}const u=Object.keys(a.detail).filter((e=>e!==c)),d={},h={};_8(e[o],(e=>{var t,n;if(k8(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;d[i]=o}})),_8(t[o],(e=>{var t,n;if(k8(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;if(!d[i])return void(h[i]=o);delete d[i]}}));for(const e in d){const t=d[e];for(const o of u)n=kq(t,e,o)(n)}for(const e in h){const t=h[e],o=f[e];if(o)for(const e of u)n=Sq(t,o,e)(n)}}HPe(s)||(n=xq(i,s,c)(n))}}return n.editor.uids=s,n},U9=()=>e=>{var t;const n=null===(t=e.store)||void 0===t?void 0:t.reference;if(void 0===n)return e;const o=e.editor.ureference;if(void 0===o)return e;for(const e in o){const{props:t,key:i}=o[e];if(void 0===t)continue;const{id:r}=t;if(void 0===n[r])continue;const{data:l}=n[r];o[e]={...$8(l,i),props:t}}return e},q9=(e,t)=>n=>{var o,i,r,l;const{data:s,node:c,bounds:a}=n.editor,u=Jl(Pu(s)&&null!==(o=Wu(s))&&void 0!==o?o:s),d=Jl(Pu(c)?t?Cd(c):null!==(i=Wu(c))&&void 0!==i?i:c:c);Y9(u,m8(d),a);const f=Js(u.children),h=u.children.length;if(!D8(f,!0)){const e=CPe();N8(e);if(Ec(z8(u),Z8(d))){const t=U8([h]),n=$8(e,t),o=null!==(l=null===(r=Js(c.children).position)||void 0===r?void 0:r.bottom)&&void 0!==l?l:0,i=2*i9,s=26;n.position={top:o,left:0,right:0,bottom:o+i+s},n.style={...n.style,position:"absolute",top:o,left:0,right:0,height:s},c.children.push(n)}u.children.push(e)}const p=u.children[0];p.style&&(p.style=n9(p.style));const v=v_(u,d);n=c9(v)(n),Xu(u),n.editor.data=u,n=pq()(n);const g=null==e?void 0:e(n);return g||n};function Y9(e,t,n,o=0){const i=n.start.path,r=n.end.path;Ec(e.type,t.type)||(e.type=t.type),delete e.position;let l=t.style;if(R8(t)&&(l=y8(l)),Ec(e.style,l)||(e.style=l),Ec(e.props,t.props)||(e.props=t.props),Sc(i)||Sc(r)){const o=t.children;return Sc(i)&&n.start.slice?e.children=[...e.children,...o]:Sc(r)&&n.end.slice?e.children=[...o,...e.children]:e.children=o,e}let s=!1;function c(){s||(s=!0,e.children=e.children.slice())}const a=V8(e),u=V8(t);if(a||u)return e.children=t.children,e;if(1===o)c(),e.children.splice(i[0]+1,e.children.length-i[0]-1,...t.children.splice(1,t.children.length-1)),r[0]=i[0];else if(-1===o){const n=t.children.length-1;c(),e.children.splice(0,r[0],...t.children.splice(0,t.children.length-1)),i[0]=r[0]=n}let d=r[0]-i[0];if(Sc(t.children))return c(),e.children.splice(i[0],d),e;if(0===d){const l=M8(t);if(1===l){const l=e.children[i[0]],s=t.children[0];if(x8(l)&&x8(s)){const t=Qs(i);if(0===t.length){M8(s)>0&&t.push(0)}const a=Qs(r);if(0===a.length){const e=M8(s);e>0&&a.push(e-1)}const u=Jl(l);c(),e.children[i[0]]=u,Y9(u,s,{start:{...n.start,path:t},end:{...n.end,path:a}},o)}else(!x8(l)&&x8(s)||x8(l)&&!x8(s))&&(c(),e.children[i[0]]=s);return e}const s=e.children[i[0]];for(;r[0]-i[0]<l-1;){r[0]++;let t=s;r[0]-i[0]==l-1&&(t=ts(s)),c(),e.children.splice(r[0],0,t)}d=r[0]-i[0]}const f=e.children[i[0]],h=e.children[r[0]],p=tc(t.children),v=Js(t.children);if(void 0===p||void 0===v)return e;if(x8(f)&&x8(p)){const t=Qs(i),o=Jl(f);c(),e.children[i[0]]=o,Y9(o,p,{start:{...n.start,path:t},end:{slice:!1,path:[f.children.length-1]}},1)}else c(),e.children[i[0]]=p;if(p===v)d>=1&&(c(),e.children.splice(i[0]+1,d));else if(x8(h)&&x8(v)){const t=Qs(r),o=Jl(h);c(),e.children[r[0]]=o,Y9(o,v,{start:{slice:!1,path:[0]},end:{...n.end,path:t}},-1)}else c(),e.children[r[0]]=v;const g=t.children.slice(1,-1);return c(),e.children.splice(i[0]+1,Math.max(0,d-1),...g),e}const K9=e=>t=>{const n=t.editor;if(!e)return t;if(wHe(e)){const t=zHe(n.node,e);t&&v9(!0)(t),$He(n.node,e,(e=>{e.editor.refresh=pRe(!0)}));const o=zHe(n.data,e);o&&v9(!0)(o),$He(n.data,e,(e=>{e.editor.refresh=pRe(!0)}))}else t=v9(!0)(t);return t=g9(pRe(!0))(t)},G9=()=>e=>{var t;const{file:n,store:o,editor:{node:i}}=e,r=null==n?void 0:n.currentPageId;if(!r)return e;const l=null===(t=null==o?void 0:o.editor)||void 0===t?void 0:t[r];if(!l)return e;const{data:s,uids:c}=l,a=v_(s,i);e.editor.bounds=a,e.editor.boundsReset=!0,e.editor.data=s,e.editor.uids=c;const u=jPe(i);return e.editor.ureference=u,e},X9=()=>e=>{const{data:t,clientHeight:n,clientWidth:o,scrollHeight:i}=e.editor;return e.editor=vFe({data:t,clientHeight:n,clientWidth:o,scrollHeight:i}),e=G9()(e),e=y9(!1)(e)},J9=e=>t=>{const{editor:n,file:o,gfocus:i}=t;if(!i||!aHe(i))return t;const r=null==o?void 0:o.currentPageId;if(!r)return t;const{selection:l}=n,s=l&&X8(l).before;for(let t=0;t<e.length;t++)R8(e[t])||(e[t]=t9([e[t]]),N8(e[t]));function c(t){var n;const{editor:o}=t;if(!o.selection)return t;w8(o.selection)||L8()(o);const{selection:{focus:i},node:l}=o;if(e9(i.path)){const i=tc(l.children);if(zve(i)&&D8(i,!0)){i.style={...i.style,...e[0].style};const l=i.children[0],s=l.children[0];if(R8(s)){const i=[e];let c=e[0];for(;P8(c);)i.push(c.children),c=c.children[0];if(R8(c)){for(let e=i.length-1;e>=1&&i[e].length<=1;e--)i[e-1].shift();s.children=c.children.map((e=>(x8(e)&&(e.style=n9(e.style)),e)));const e=O8(s.key);K8(e)(o)}const a=null===(n=l.props)||void 0===n?void 0:n.id;a&&r&&(t=xq(a,l,r)(t))}}l.children.splice(1,0,...e)}else{const{path:t,offset:n}=i,r={path:o9(o.node,t),offset:n},s=BPe(l,r),c=TPe(l,r),a=[];s&&!D8(s,!0)&&a.push(...s.children),a.push(...e),c&&!D8(c,!0)&&a.push(...c.children),l.children=a}j8()(o);const s=Js(e);if(S8(s)){const e=Z8(s),n=F8(l,e);if(null!==n){const o=M8(n),i={focus:{path:[...e],offset:o},anchor:{path:[...e],offset:o}};t=P9()(t),t=O9(i,!0)(t)}}return t}const a=jPe(n.node),u=wHe(i);if(u){const e=zHe(n.node,i);e&&(c(e),$He(n.node,i,(e=>{e.editor.refresh=pRe(!0),e.editor.isEditPending=!0}))),n.isEditPending=!0}else c(t);const d=jPe(n.node);t=Z9(a,d)(t);if(t=q9((e=>(e=U3()(e),e=b6()(e))),!0)(t),u||!s)return t;let{path:f,offset:h}=s;const p={path:o9(n.node,f),offset:h};let v=BPe(n.node,p);for(;!v&&f.length;){const e=Q8(n.node,f),t=A8(n.node,e,e);x8(t)&&(v=t),f=ec(f)}v||(v=n.node);const g=T8(v);return n.bounds.end={path:g,slice:!1},n.boundsReset=!0,n.isEditPending=!0,n.node=v,n.ureference=jPe(v),t},Q9=()=>e=>{const{data:t}=e.editor,n=z8(t),o=H8(t,n);if(null===o)return e;const i=M8(o),r={focus:{path:[...n],offset:i},anchor:{path:[...n],offset:i}};return e=O9(r,!0)(e)},{clearEditNodePosition:e7,isEditBlockNode:t7,getPathFromKey:n7,resetReflowStart:o7,ReflowStartFlag:i7}=ek,r7=(e,t)=>n=>{var o;const i=n.editor;if(i.clientWidth!==e){i.clientWidth=e;const{scrollTop:t,node:r}=i,l=r.children[0];if(!t7(l))return n;const s=null===(o=l.position)||void 0===o?void 0:o.top;if(void 0===s)return n;const c=n7(l.key),a=s-t;l.position={top:a,left:0,right:0,bottom:0},n.editor=T$e(i),o7(c,i7.next)(n.editor),n.editor.node=e7(i.node)}return t&&(n.editor.clientHeight=t),n},l7=(e,t)=>n=>n.file?(n.file.clientWidth=e,void 0!==t&&(n.file.clientHeight=t,n=v6()(n)),n=H3(!0)(n)):n,s7=(e,t)=>n=>(n.client?(n.client.width=e,n.client.height=t):n.client={width:e,height:t},n),c7=e=>t=>(t.toolbar&&(t.toolbar.refresh=e),t),a7=e=>t=>(t.toolbar&&(t.toolbar.resize=e),t),u7=(e,t)=>n=>{var o;return nc(null===(o=n.toolbar)||void 0===o?void 0:o.tools).forEach((n=>{n.name===e?n.active=!n.active:t&&(n.active=!1)})),n=c7(pRe(!0))(n)},d7=(e,t)=>n=>{var o;return nc(null===(o=n.toolbar)||void 0===o?void 0:o.tools).forEach((n=>{n.name===e&&(n.active=t)})),n=c7(pRe(!0))(n)},f7=()=>e=>{var t;return nc(null===(t=e.toolbar)||void 0===t?void 0:t.tools).forEach((e=>{e.active=!1})),e=c7(pRe(!0))(e)},h7=e=>t=>(void 0===t.agent&&(t.agent={}),t.agent.propagation=e,t),p7=()=>e=>{var t;return null===(t=e.agent)||void 0===t||delete t.propagation,e},v7=e=>t=>(void 0===t.agent&&(t.agent={}),void 0===t.agent.orders&&(t.agent.orders=[]),t.agent.orders.push(e),t),g7=e=>t=>{var n;return void 0===(null===(n=t.agent)||void 0===n?void 0:n.orders)||-1===t.agent.orders.indexOf(e)||(t.agent.orders=t.agent.orders.filter((t=>t!==e))),t},m7=e=>t=>{var n,o;return(null===(o=null===(n=t.agent)||void 0===n?void 0:n.orders)||void 0===o?void 0:o.length)&&t.agent.orders.forEach((t=>t(e))),t=y7()(t)},y7=()=>e=>{var t,n;return(null===(n=null===(t=e.agent)||void 0===t?void 0:t.orders)||void 0===n?void 0:n.length)&&(e.agent.orders.length=0),e},{recursiveTree:b7,isBranchInclude:C7,getBranchByPath:w7}=xT,x7=(e,t,n)=>e=>e,S7=(e,t,n)=>e=>e,E7=(e,t,n,o,i)=>e=>{var r,l,s,c;const{type:a,id:u}=t;if("page"===a||"root"===a){return(null===(l=null===(r=e.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[u])?(Tje(u,Cd(e.store)).then((e=>{QZe(e,o,i)})),e):e}return(null===(c=null===(s=e.store)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[n])?(ije(n,u,Cd(e.store)).then((e=>{QZe(e,o,i)})),e):e},k7=(e,t,n,o,i)=>e=>{var o,r,l,s;const{type:c,id:a}=t;if("page"===c||"root"===c){return(null===(r=null===(o=e.store)||void 0===o?void 0:o.editor)||void 0===r?void 0:r[a])?(Tje(a,Cd(e.store)).then((e=>{tUe(e).finally(i)})),e):e}return(null===(s=null===(l=e.store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[n])?(ije(n,a,Cd(e.store)).then((e=>{tUe(e).finally(i)})),e):e},D7=(e,t,n,o,i)=>r=>{var l,s,c,a;const{type:u,id:d}=t;if("page"===u||"root"===u){return(null===(s=null===(l=r.store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[d])?(Tje(d,Cd(r.store)).then((t=>{oUe(e,t,o).finally(i)})),r):r}return(null===(a=null===(c=r.store)||void 0===c?void 0:c.editor)||void 0===a?void 0:a[n])?(ije(n,d,Cd(r.store)).then((t=>{oUe(e,t,o).finally(i)})),r):r},I7=(e,t,n,o,i)=>o=>{var r,l,s,c;const{type:a,id:u}=t;if("page"===a||"root"===a){return(null===(l=null===(r=o.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[u])?(Tje(u,Cd(o.store)).then((t=>{nUe(e,t).finally(i)})),o):o}return(null===(c=null===(s=o.store)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[n])?(ije(n,u,Cd(o.store)).then((t=>{nUe(e,t).finally(i)})),o):o},N7=(e,t,n)=>e=>e,L7=(e,t,n)=>o=>("root"===t.type||"page"===t.type?o=V6(e,t)(o):"outline"===t.type&&(o=z6(e,t,n)(o)),o),B7=(e,t,n)=>o=>{const{file:i}=o;if(void 0===i)return o;const{currentPageId:r,tree:l}=i,s=rje(l,t),{id:c,type:a}=t;return"root"===(null==s?void 0:s.type)?o=r===c?W4(e,t)(o):z4(e,t)(o):"page"===a?r===c?(o=X3(e,n)(o),o=W4(e,t)(o)):o=r===n?W4(e,t)(o):z4(e,t)(o):"outline"===a&&(o=r===n?W4(e,t)(o):z4(e,t)(o)),o=S6(t,n)(o)},T7=(e,t,n)=>o=>{var i;const{id:r,type:l}=t;if(e.branch.id===t.id)return o;const s=null===(i=o.file)||void 0===i?void 0:i.tree;if(!s)return o;const c=e.branch.path;if(!c)return o;let a=w7(s,c);if(a){let e=!1,n=!1;if(b7([a],(o=>!!n||(o.id===t.id?(e=!0,n=!0,!0):void 0))),e)return o}o=X4(e,t)(o);const u=new Set([e.pageId,n]);"outline"!==l&&u.add(t.id);for(const t of u)o=S6(e.branch,t)(o);return o},A7=(e,t)=>n=>n=l8(e,t)(n),M7=(e,t,n)=>o=>{const{file:i}=o;if(void 0===i)return o;const r=rje(i.tree,t),{currentPageId:l}=i,{id:s,type:c}=t;return"root"===r.type?o=l===s||C7(r,t)?F4(e,t)(o):H4(e,t)(o):"page"===c?l===s?(o=X3(e,n)(o),o=F4(e,t)(o)):o=C7(r,t)?F4(e,t)(o):H4(e,t)(o):"outline"===c&&(o=l===n?F4(e,t)(o):H4(e,t)(o)),o=x6(t)(o),o=S6(t,n)(o)},{calcCommonSelectionPath:O7,createBlockNode:R7,createDecorateInlineNode:P7,createInlineNode:F7,isDecorateInlineNode:H7,isNode:_7,transformNodeToEditNode:j7,traverseNode:W7}=ek,{BRANCH_HEIGHT:z7,recursiveTree:V7,syncScrollHeight:$7}=xT,Z7=e=>t=>(t.searchText=e,t),U7=e=>t=>(t.percent=e,t),q7=e=>t=>(t.replaceText=e,t),Y7=e=>t=>(t.research=e,t),K7=e=>t=>(t.searchComposition=e,t),G7=e=>t=>(t.searchComposition=e,t),X7=(e,t)=>n=>{var o;const i=n.result.branch,r=n.result.count;let l="";if(e){let e=0;if(i&&!t){const t=n.result.tree[0].children,o=null==t?void 0:t.indexOf(i);o&&-1!==o&&(e=o+1)}l=`共 ${r} 项`,e>0&&(l=`第 ${e} 项，${l}`)}else{const e=n.result.tree[0].children;l=`${null!==(o=null==e?void 0:e.length)&&void 0!==o?o:0} 份文件中有 ${r} 个结果`}return n.result.tree[0].title=j7(R7([l]),""),n},J7=()=>e=>(e.result.tree[0].children=[],delete e.result.renderStart,delete e.result.count,delete e.result.branch,e.result.scrollHeight=hje(e.result.tree),e),Q7=e=>t=>(t.branchRemoved=e,t),eee=()=>e=>(delete e.branchRemoved,e),tee=e=>t=>{var n,o,i,r,l,s;if(!(null===(n=e.children)||void 0===n?void 0:n.length))return t;const c=t.result.tree;let a=!1;for(let t=0;t<c.length;t++){const n=c[t];if(n.id===e.id){n.children=[...null!==(o=n.children)&&void 0!==o?o:[],...Xu(e.children)],a=!0;break}if(null===(i=n.children)||void 0===i?void 0:i.length){if("outline"===n.children[0].type)continue;for(let t=0;t<n.children.length;t++){const o=n.children[t];if(o.id===e.id){o.children=[...null!==(r=o.children)&&void 0!==r?r:[],...Xu(e.children)],a=!0;break}}if(a)break}}let u=t.result.scrollHeight;u+=e.children.length*z7,!1===a&&(e.children=Xu(e.children),null===(l=t.result.tree[0].children)||void 0===l||l.push(e),u+=z7),t.result.scrollHeight=u;const d=null!==(s=t.result.count)&&void 0!==s?s:0;return t.result.count=d+e.children.length,t.result.isEditPending=!0,t},nee=e=>t=>(Object.assign(t.result,e),t),oee=e=>t=>{const n=t.result.tree;let o=!1;return V7(n,(t=>!!o||!!t&&(t.id===e.id?(t.expand=!t.expand,o=!0,!0):void 0))),t.result.isEditPending=!0,t},iee=e=>t=>(t.result.clientWidth!==e&&(t.result.clientWidth=e,t.result.isEditPending=!0),t),ree=e=>t=>(t.result.clientHeight!==e&&(t.result.clientHeight=e,t.result.isEditPending=!0),t),lee=e=>t=>{var n;const o=t.result.tree;let i=0;const r=null===(n=t.result.branch)||void 0===n?void 0:n.id;return V7(o,(n=>i>=2||!!n&&void(n.id===e.id?(n.active=!0,i++,t.result.branch=n):r===n.id&&(i++,n.active=!1)))),t.result.isEditPending=!0,t},see=e=>t=>{var n;const o=t.result.tree;let i=!1;return V7(o,((n,o)=>{var r,l;if(i)return!0;if(!n)return!1;if(n.id===e.id&&(null==o?void 0:o.children)){const e=o.children.indexOf(n);return void 0!==e&&(o.children.splice(e,1),t.result.count&&("outline"===n.type?t.result.count--:"page"===n.type&&(t.result.count-=null!==(l=null===(r=n.children)||void 0===r?void 0:r.length)&&void 0!==l?l:0)),"root"===o.type||o.children.length||(t=see(o)(t))),i=!0,!0}return n.id===e.id&&"root"===n.type?(t.result.tree[0].children=[],t.result.count=0,i=!0,!0):void 0})),(null===(n=t.result.branch)||void 0===n?void 0:n.id)===e.id&&delete t.result.branch,t.result.isEditPending=!0,t},cee=()=>e=>{let t=0;const n=e.result.tree;return V7(n,(e=>{"outline"===e.type&&t++})),e.result.count=t,e},aee=()=>e=>(e.result=$7()(e.result),e.result.isEditPending=!0,e),uee=e=>t=>(V7(t.result.tree,(t=>{if("outline"===t.type){const n=t.title;if(_7(n)){let t=null;if(W7(n,(e=>{var n;if(_7(e)&&Xje(e)){if(null===(n=e.style)||void 0===n?void 0:n.content)return t=e,!1}})),null===t)return;const o=Js(t.children);if(jWe(o)){const t=o.children[0];_7(t)&&(t.children[0]=e)}else t.children.push(P7({type:"replace"},[F7([e],{backgroundColor:"red",color:"#fff"})]))}}})),t.result.isEditPending=!0,t),dee=()=>e=>(V7(e.result.tree,(e=>{if("outline"===e.type){const t=e.title;_7(t)&&W7(t,(e=>{var t,n;if(_7(e)&&Xje(e)){if(null===(t=e.style)||void 0===t?void 0:t.content){const t=Js(e.children);return _7(t)&&H7(t)&&"replace"===(null===(n=t.props)||void 0===n?void 0:n.type)&&e.children.pop(),!1}}}))}})),e.result.isEditPending=!0,e),fee=(e,t,n,o)=>i=>{var r,l,s,c,a;let u=i.result.tree[0];if(!o){const e=Y_e(i.result.tree,n);if(null===e)return i;u=e}if(!u.children)return i;const d=Kje(t),f=O7(d);if(f.length<=0)return i;const h=f[0];let p=0;t.search&&(p=null!==(r=u.children.findIndex((e=>!!Ec(e.payload.search,t.search))))&&void 0!==r?r:0,-1===p&&(p=0));let v=0;const g=u.children.slice(p);for(let t=0;t<g.length;t++){const n=g[t],o=Kje(n.payload),r=O7(o);if(h===r[0]){const t=null===(s=null===(l=e.children)||void 0===l?void 0:l[v++])||void 0===s?void 0:s.payload;t&&(null===(c=n.payload)||void 0===c||delete c.node,Object.assign(n.payload,ts(t)),(null===(a=i.result.branch)||void 0===a?void 0:a.id)===n.id&&(i.result.branch=n))}else if(h<r[0])break}return i.result.isEditPending=!0,i},{toggleBranchArrow:hee,getBranchByPath:pee,resetTreePath:vee}=xT,gee=e=>t=>(t.searchText=e,t),mee=e=>t=>(Object.assign(t.result,e),t),yee=e=>t=>(t.result=Iqe(e),t.result.isEditPending=!0,t),bee=(e,t)=>n=>(n.result=hee(e,t)(n.result),n.result.isEditPending=!0,n),Cee=(e,t)=>n=>{var o,i;const r=n.result.tree;if(!(t=null!=t?t:e.path))return n;const l=pee(r,ec(t));return(null!==(o=null==l?void 0:l.children)&&void 0!==o?o:r)[null!==(i=Js(t))&&void 0!==i?i:0]=e,n.result=vee(t)(n.result),n.result.isEditPending=!0,n},wee=e=>t=>{const n=xee(t.result.tree,(t=>{const n=OWe(t.title);return n.includes(e)||e.includes(n)?t:null}));return t.result.tree=n,t.result.isEditPending=!0,t};function xee(e,t,n){const o=[...e];for(let i=e.length-1;i>=0;i--){const r=e[i].children;(null==r?void 0:r.length)&&(o[i].children=xee(r,t,e[i]));if(null===t(e[i],n)){const e=o[i].children;e&&0!==e.length||o.splice(i,1)}if(o[i]){const e=o[i].children;e&&0!==e.length||(o[i]={...o[i],expand:!1})}}return o}const{toggleBranchArrow:See,BRANCH_HEIGHT:Eee}=xT,kee=e=>t=>{const n=hje(e.tree)-Eee;return t.value={...e,scrollHeight:n},t=Dee(pRe(!0))(t)},Dee=e=>t=>(t.refresh=e,t),Iee=e=>t=>(t.moving=e,t),Nee=e=>t=>(t.id=e,t),Lee=(e,t)=>n=>(n.fully=t,t&&(n.float=Bqe(e)),n),Bee=(e,t)=>n=>{let o,i=n.value.scrollTop;return e.id!==n.pageId&&(i=0,o=!0),n.pageId=e.id,n.id=t,n.float=e.float,n.value=Cje(e,t,i,o),n=Dee(pRe(!0))(n)},Tee=e=>t=>t.float?(Object.assign(t.float,e),t=Dee(pRe(!0))(t)):t,Aee=(e,t)=>n=>{if(!n.float)return n;const{id:o,value:{scrollTop:i}}=n,r={...e,float:{...n.float,...t}};return n.value=Cje(r,o,i),n=Tee(t)(n),n=Dee(pRe(!0))(n)},Mee=(e,t)=>n=>(n.value=See(e,t)(n.value),n=Dee(pRe(!0))(n)),Oee=()=>e=>(e.value=Xu(e.value),e),{calcCommonSelectionPath:Ree,comparePath:Pee,excludeCommonSelection:Fee,getNodeByPath:Hee,getNodeEndPath:_ee,getNodeLength:jee,getNodeStartPath:Wee,isBlockNode:zee,isEditNode:Vee,isEmptyNode:$ee,isNode:Zee,isReferenceNode:Uee,isSameStyleNode:qee,resetEditNodeKeyRecursion:Yee,sliceSelectionStartBlockPath:Kee,sortSelection:Gee,traverseNode:Xee}=ek,{recursiveTreeReverse:Jee}=xT,Qee=(e,t)=>n=>{var o,i,r,l;const{store:s,file:c}=n,{title:a,payload:u}=e,d=zWe(a);n=E9(t)(n);const f=null===(o=null==s?void 0:s.editor)||void 0===o?void 0:o[t];if(void 0===f)return n;const h=f.uids,p={},v={};let g=u.search;function m(e){var t,n;let{data:o,node:i}=e.editor;g&&wHe(g)&&(o=i);const{before:r,after:l}=Gee(u),s=Kee(o,u);let c=Hee(o,s);if(zee(c)){let i={anchor:{path:Qs(r.path,s.length),offset:r.offset},focus:{path:Qs(l.path,s.length),offset:l.offset}};if(0!==Pee(s,r.path)){const e=Wee(c);i.anchor.path=e,i.anchor.offset=0}if(0!==Pee(s,l.path)){const e=_ee(c),t=Hee(c,e);null!==t&&(i.focus.path=e,i.focus.offset=jee(t))}let a=Ree(i),u=Hee(c,a);if(null===u)return e;let f=a[0];sc(u)&&(f=null!==(t=Js(a))&&void 0!==t?t:0,a=ec(a),u=Hee(c,a)),i=Fee(i),0===i.anchor.path.length&&i.anchor.path.push(f),0===i.focus.path.length&&i.focus.path.push(f),h&&Xee(u,(e=>{var t,n;if(Uee(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;p[i]=o}})),VWe(u,i),h&&Xee(u,(e=>{var t,n;if(Uee(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;delete p[i]}}));for(let e=u.children.length-1;e>=0;e--){const t=u.children[e];t&&!$ee(t,!0)||(u.children.splice(e,1),f>=e&&f--)}const g=Math.max(0,f+1);u.children.splice(g,0,d),GHe(u);let m=u.children.length-1;for(;m>0;){const e=u.children[m],t=u.children[m-1];qee(t,e)&&(sc(t)&&sc(e)?u.children[m-1]=t+e:Zee(t)&&Zee(e)?(t.children.push(...e.children),t.children=[t.children.join("")]):sc(t)&&Zee(e)&&(u.children[m-1]=t+e.children[0]),u.children.splice(m,1)),m--}for(let e=0;e<=s.length;e++){const t=Hee(o,s.slice(0,e));if(Uee(t)){const e=null===(n=t.props)||void 0===n?void 0:n.uid;e&&(v[e]=t)}}Xee(c,(e=>{var t;if(Uee(e)){const n=null===(t=e.props)||void 0===t?void 0:t.uid;n&&(v[n]=e)}}))}return u.search&&Vee(o)&&Yee(o),delete e.editor.highlights,e}g?(CHe(g)&&(g=BHe(g)),EHe(g)&&(g=HHe(g)),wHe(g)?EDe(g,[m])({editor:f}):m({editor:f})):m({editor:f});for(const e in p)z9(e)({editor:f});const y=[t];for(const e in v){const o=v[e],s=null===(i=o.props)||void 0===i?void 0:i.id;if(s&&_9(e,s)({editor:f}),n=xq(s,o,t)(n),!Uee(o))continue;const c=null===(l=null===(r=n.store)||void 0===r?void 0:r.reference)||void 0===l?void 0:l[s];if(c){const e=Object.keys(c.detail);y.push(...e.filter((e=>e!==t)))}}for(const e of y)for(const t in p){const o=p[t];n=kq(o,t,e)(n)}return(null==c?void 0:c.currentPageId)===t&&(n.editor.data=f.data,n.editor.uids=f.uids,delete n.editor.ureference,n=V4(t)(n)),n=hq(t,f)(n)},ete=(e,t)=>n=>(Jee([e],((e,o)=>{"outline"===e.type&&((null==o?void 0:o.id)&&(t=o.id),n=Qee(e,t)(n))})),n),{isNode:tte,getNodeByPath:nte,getBlockNodeStartPath:ote,getBlockNodeEndPath:ite,sliceSelectionStartBlockPath:rte,getKeyFromPath:lte,sliceBlockPath:ste,sortSelection:cte,sliceMetaNodePath:ate}=ek,ute=(e,t)=>n=>{var o,i,r;const l=null===(i=null===(o=n.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[e];if(void 0===l)return n;const{data:s}=l,c=null===(r=n.store)||void 0===r?void 0:r.reference,a=QWe(s,e,{},[t],c);if(null==a?void 0:a.children){const{payload:t}=a.children[0];let o=UFe(),i=null==t?void 0:t.search;if(i&&wHe(i)){EHe(i)&&(i=HHe(i));cHe(PHe(i))&&(i=LHe(i)),o=IHe(o,i)}n=s4(o)(n),n=dte(e,t)(n)}return n=_3(e)(n)},dte=(e,t)=>n=>{var o,i;if(!t)return n;let r=t.search;r&&EHe(r)&&(n=Wq(e,r)(n)),n=pte(e,t)(n),n=E9(e)(n);const l=null===(i=null===(o=(n=vq(e)(n)).store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[e];if(void 0===l)return n;if(!l.selection)return n;const s=rte(l.data,l.selection);if(0===s.length)return n;const c=T$e(l,s,s);if(c.selection=l.selection,c.selectionReflow=l.selectionReflow,t){let e=[];if(r&&wHe(r))r&&EHe(r)&&(r=HHe(r)),r.path&&(e=ate(c.data,r.path));else{const n=Kje(t),{before:o}=cte(n);e=o.path,tte(nte(c.data,e))||(e=ec(e))}c.location=lte(e)}const{clientHeight:a,clientWidth:u}=n.editor;return c.clientHeight=a,c.clientWidth=u,c.scrollHeight=2*a,n=l9(c)(n),n=h9()(n),n=_3(e)(n)},fte=(e,t)=>n=>{var o,i,r,l,s;const{clientHeight:c,clientWidth:a}=n.editor;let u=null===(o=e.payload)||void 0===o?void 0:o.search;n=E9(t)(n),u&&EHe(u)&&(n=Wq(t,u)(n));const d=null===(r=null===(i=(n=vq(t)(n)).store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[t];if(void 0===d)return n;const f=ote(d.data);u&&EHe(u)&&(u=HHe(u));let h=[...f];if(u&&wHe(u))u.path&&(h=ste(d.data,u.path));else{const t=Kje(e.payload);h=rte(d.data,t)}if(0===h.length)return n;const p=T$e(d,h,h);if(e.payload){let t=[];if(u&&wHe(u))u.path&&(t=ate(p.data,u.path));else{const n=Kje(e.payload),{before:o}=cte(n);t=o.path,tte(nte(p.data,t))||(t=ec(t))}p.location=lte(t)}return p.clientHeight=c,p.clientWidth=a,p.scrollHeight=2*c,(null===(l=n.file)||void 0===l?void 0:l.currentPageId)===t&&(null===(s=n.editor.ghighlights)||void 0===s?void 0:s.length)&&n.editor.ghighlights.forEach((({search:e})=>{e&&EDe(e,[e=>(delete e.editor.highlights,e)])({editor:p})})),u&&wHe(u)?EDe(u,[t=>(t.editor.highlights=Gje(e),t)])({editor:p}):p.highlights=Gje(e),n=l9(p)(n),n=h9()(n),n=_3(t)(n)},hte=e=>t=>{const n=t.editor.data,o=n.children.length-1,i=Math.floor(o*e),r=n.children[i];if(!r)return t;const l=[i,...ite(r)],s=T$e(t.editor,l,l);if(1===e){const{scrollHeight:e,clientHeight:t}=s,n=t-e;s.scrollTouch=[n,t]}return t=l9(s)(t),t=w9(e)(t),t=h9()(t)},pte=(e,t)=>n=>{var o,i;if(!t)return n;let r=t.search;r&&EHe(r)&&(n=Wq(e,r)(n));const l=null===(i=null===(o=n.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[e];if(void 0===l)return n;const s=Kje(t),{after:c}=cte(s);if(r)if(CHe(r)&&(r=BHe(r)),EHe(r)&&(r=HHe(r)),wHe(r)){EDe(r,[a])({editor:l}),IDe(r,[(e,t)=>{if(sHe(t)&&t.key){const{rowIndex:n,columnIndex:o}=ML.getIndexByKey(t.key);e.indicatorRange={rowStartIndex:n,rowEndIndex:n+1,columnStartIndex:o,columnEndIndex:o+1},e.selectedCoordinates={rowIndex:n,columnIndex:o}}return e}])({editor:l});const e=r.path;(null==e?void 0:e.length)&&(l.selection={anchor:{path:[...e],offset:0},focus:{path:[...e],offset:0}})}else a({editor:l});else a({editor:l});function a(e){return e.editor.selectionReflow=!0,e.editor.selection={anchor:ts(c),focus:ts(c)},delete e.editor.highlights,e}return n};var vte,gte=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map((e=>e.charCodeAt(0)))),mte=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map((e=>e.charCodeAt(0))));const yte=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),bte=null!==(vte=String.fromCodePoint)&&void 0!==vte?vte:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};var Cte;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(Cte||(Cte={}));var wte,xte,Ste,Ete,kte,Dte;function Ite(e){return e>=Cte.ZERO&&e<=Cte.NINE}function Nte(e){return e>=Cte.UPPER_A&&e<=Cte.UPPER_F||e>=Cte.LOWER_A&&e<=Cte.LOWER_F}function Lte(e){return e===Cte.EQUALS||function(e){return e>=Cte.UPPER_A&&e<=Cte.UPPER_Z||e>=Cte.LOWER_A&&e<=Cte.LOWER_Z||Ite(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(wte||(wte={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(xte||(xte={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(Ste||(Ste={}));class Bte{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=xte.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ste.Strict}startEntity(e){this.decodeMode=e,this.state=xte.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case xte.EntityStart:return e.charCodeAt(t)===Cte.NUM?(this.state=xte.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=xte.NamedEntity,this.stateNamedEntity(e,t));case xte.NumericStart:return this.stateNumericStart(e,t);case xte.NumericDecimal:return this.stateNumericDecimal(e,t);case xte.NumericHex:return this.stateNumericHex(e,t);case xte.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===Cte.LOWER_X?(this.state=xte.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=xte.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,o){if(t!==n){const i=n-t;this.result=this.result*Math.pow(o,i)+parseInt(e.substr(t,i),o),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const o=e.charCodeAt(t);if(!Ite(o)&&!Nte(o))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(o,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const o=e.charCodeAt(t);if(!Ite(o))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(o,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Cte.SEMI)this.consumed+=1;else if(this.decodeMode===Ste.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=yte.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==Cte.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let o=n[this.treeIndex],i=(o&wte.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const r=e.charCodeAt(t);if(this.treeIndex=Ate(n,o,this.treeIndex+Math.max(1,i),r),this.treeIndex<0)return 0===this.result||this.decodeMode===Ste.Attribute&&(0===i||Lte(r))?0:this.emitNotTerminatedNamedEntity();if(o=n[this.treeIndex],i=(o&wte.VALUE_LENGTH)>>14,0!==i){if(r===Cte.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Ste.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,o=(n[t]&wte.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,o,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:o}=this;return this.emitCodePoint(1===t?o[e]&~wte.VALUE_LENGTH:o[e+1],n),3===t&&this.emitCodePoint(o[e+2],n),n}end(){var e;switch(this.state){case xte.NamedEntity:return 0===this.result||this.decodeMode===Ste.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case xte.NumericDecimal:return this.emitNumericEntity(0,2);case xte.NumericHex:return this.emitNumericEntity(0,3);case xte.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xte.EntityStart:return 0}}}function Tte(e){let t="";const n=new Bte(e,(e=>t+=bte(e)));return function(e,o){let i=0,r=0;for(;(r=e.indexOf("&",r))>=0;){t+=e.slice(i,r),n.startEntity(o);const l=n.write(e,r+1);if(l<0){i=r+n.end();break}i=r+l,r=0===l?i+1:i}const l=t+e.slice(i);return t="",l}}function Ate(e,t,n,o){const i=(t&wte.BRANCH_LENGTH)>>7,r=t&wte.JUMP_TABLE;if(0===i)return 0!==r&&o===r?n:-1;if(r){const t=o-r;return t<0||t>=i?-1:e[n+t]-1}let l=n,s=l+i-1;for(;l<=s;){const t=l+s>>>1,n=e[t];if(n<o)l=t+1;else{if(!(n>o))return e[t+i];s=t-1}}return-1}function Mte(e){return e===Ete.Space||e===Ete.NewLine||e===Ete.Tab||e===Ete.FormFeed||e===Ete.CarriageReturn}function Ote(e){return e===Ete.Slash||e===Ete.Gt||Mte(e)}Tte(gte),Tte(mte),function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(Ete||(Ete={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"}(kte||(kte={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(Dte||(Dte={}));const Rte={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Pte{constructor({xmlMode:e=!1,decodeEntities:t=!0},n){this.cbs=n,this.state=kte.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=kte.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=e,this.decodeEntities=t,this.entityDecoder=new Bte(e?mte:gte,((e,t)=>this.emitCodePoint(e,t)))}reset(){this.state=kte.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=kte.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(e){e===Ete.Lt||!this.decodeEntities&&this.fastForwardTo(Ete.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=kte.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===Ete.Amp&&this.startEntity()}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(t?Ote(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=kte.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===Ete.Gt||Mte(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const e=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=e}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===Rte.TitleEnd?this.decodeEntities&&e===Ete.Amp&&this.startEntity():this.fastForwardTo(Ete.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===Ete.Lt)}stateCDATASequence(e){e===Rte.Cdata[this.sequenceIndex]?++this.sequenceIndex===Rte.Cdata.length&&(this.state=kte.InCommentLike,this.currentSequence=Rte.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=kte.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Rte.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=kte.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!Ote(e):function(e){return e>=Ete.LowerA&&e<=Ete.LowerZ||e>=Ete.UpperA&&e<=Ete.UpperZ}(e)}startSpecial(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=kte.SpecialStartSequence}stateBeforeTagName(e){if(e===Ete.ExclamationMark)this.state=kte.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===Ete.Questionmark)this.state=kte.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const t=32|e;this.sectionStart=this.index,this.xmlMode?this.state=kte.InTagName:t===Rte.ScriptEnd[2]?this.state=kte.BeforeSpecialS:t===Rte.TitleEnd[2]?this.state=kte.BeforeSpecialT:this.state=kte.InTagName}else e===Ete.Slash?this.state=kte.BeforeClosingTagName:(this.state=kte.Text,this.stateText(e))}stateInTagName(e){Ote(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=kte.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){Mte(e)||(e===Ete.Gt?this.state=kte.Text:(this.state=this.isTagStartChar(e)?kte.InClosingTagName:kte.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===Ete.Gt||Mte(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=kte.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===Ete.Gt||this.fastForwardTo(Ete.Gt))&&(this.state=kte.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===Ete.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=kte.InSpecialTag,this.sequenceIndex=0):this.state=kte.Text,this.sectionStart=this.index+1):e===Ete.Slash?this.state=kte.InSelfClosingTag:Mte(e)||(this.state=kte.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===Ete.Gt?(this.cbs.onselfclosingtag(this.index),this.state=kte.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Mte(e)||(this.state=kte.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===Ete.Eq||Ote(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=kte.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===Ete.Eq?this.state=kte.BeforeAttributeValue:e===Ete.Slash||e===Ete.Gt?(this.cbs.onattribend(Dte.NoValue,this.sectionStart),this.sectionStart=-1,this.state=kte.BeforeAttributeName,this.stateBeforeAttributeName(e)):Mte(e)||(this.cbs.onattribend(Dte.NoValue,this.sectionStart),this.state=kte.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===Ete.DoubleQuote?(this.state=kte.InAttributeValueDq,this.sectionStart=this.index+1):e===Ete.SingleQuote?(this.state=kte.InAttributeValueSq,this.sectionStart=this.index+1):Mte(e)||(this.sectionStart=this.index,this.state=kte.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===Ete.DoubleQuote?Dte.Double:Dte.Single,this.index+1),this.state=kte.BeforeAttributeName):this.decodeEntities&&e===Ete.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,Ete.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,Ete.SingleQuote)}stateInAttributeValueNoQuotes(e){Mte(e)||e===Ete.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Dte.Unquoted,this.index),this.state=kte.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===Ete.Amp&&this.startEntity()}stateBeforeDeclaration(e){e===Ete.OpeningSquareBracket?(this.state=kte.CDATASequence,this.sequenceIndex=0):this.state=e===Ete.Dash?kte.BeforeComment:kte.InDeclaration}stateInDeclaration(e){(e===Ete.Gt||this.fastForwardTo(Ete.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=kte.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===Ete.Gt||this.fastForwardTo(Ete.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=kte.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===Ete.Dash?(this.state=kte.InCommentLike,this.currentSequence=Rte.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=kte.InDeclaration}stateInSpecialComment(e){(e===Ete.Gt||this.fastForwardTo(Ete.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=kte.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const t=32|e;t===Rte.ScriptEnd[3]?this.startSpecial(Rte.ScriptEnd,4):t===Rte.StyleEnd[3]?this.startSpecial(Rte.StyleEnd,4):(this.state=kte.InTagName,this.stateInTagName(e))}stateBeforeSpecialT(e){const t=32|e;t===Rte.TitleEnd[3]?this.startSpecial(Rte.TitleEnd,4):t===Rte.TextareaEnd[3]?this.startSpecial(Rte.TextareaEnd,4):(this.state=kte.InTagName,this.stateInTagName(e))}startEntity(){this.baseState=this.state,this.state=kte.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?Ste.Strict:this.baseState===kte.Text||this.baseState===kte.InSpecialTag?Ste.Legacy:Ste.Attribute)}stateInEntity(){const e=this.entityDecoder.write(this.buffer,this.index-this.offset);e>=0?(this.state=this.baseState,0===e&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===kte.Text||this.state===kte.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==kte.InAttributeValueDq&&this.state!==kte.InAttributeValueSq&&this.state!==kte.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case kte.Text:this.stateText(e);break;case kte.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case kte.InSpecialTag:this.stateInSpecialTag(e);break;case kte.CDATASequence:this.stateCDATASequence(e);break;case kte.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case kte.InAttributeName:this.stateInAttributeName(e);break;case kte.InCommentLike:this.stateInCommentLike(e);break;case kte.InSpecialComment:this.stateInSpecialComment(e);break;case kte.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case kte.InTagName:this.stateInTagName(e);break;case kte.InClosingTagName:this.stateInClosingTagName(e);break;case kte.BeforeTagName:this.stateBeforeTagName(e);break;case kte.AfterAttributeName:this.stateAfterAttributeName(e);break;case kte.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case kte.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case kte.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case kte.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case kte.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case kte.BeforeSpecialT:this.stateBeforeSpecialT(e);break;case kte.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case kte.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case kte.InDeclaration:this.stateInDeclaration(e);break;case kte.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case kte.BeforeComment:this.stateBeforeComment(e);break;case kte.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case kte.InEntity:this.stateInEntity()}this.index++}this.cleanup()}finish(){this.state===kte.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.sectionStart>=e||(this.state===kte.InCommentLike?this.currentSequence===Rte.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===kte.InTagName||this.state===kte.BeforeAttributeName||this.state===kte.BeforeAttributeValue||this.state===kte.AfterAttributeName||this.state===kte.InAttributeName||this.state===kte.InAttributeValueSq||this.state===kte.InAttributeValueDq||this.state===kte.InAttributeValueNq||this.state===kte.InClosingTagName||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){this.baseState!==kte.Text&&this.baseState!==kte.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.onattribentity(e)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.ontextentity(e,this.sectionStart))}}const Fte=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Hte=new Set(["p"]),_te=new Set(["thead","tbody"]),jte=new Set(["dd","dt"]),Wte=new Set(["rt","rp"]),zte=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Hte],["h1",Hte],["h2",Hte],["h3",Hte],["h4",Hte],["h5",Hte],["h6",Hte],["select",Fte],["input",Fte],["output",Fte],["button",Fte],["datalist",Fte],["textarea",Fte],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",jte],["dt",jte],["address",Hte],["article",Hte],["aside",Hte],["blockquote",Hte],["details",Hte],["div",Hte],["dl",Hte],["fieldset",Hte],["figcaption",Hte],["figure",Hte],["footer",Hte],["form",Hte],["header",Hte],["hr",Hte],["main",Hte],["nav",Hte],["ol",Hte],["pre",Hte],["section",Hte],["table",Hte],["ul",Hte],["rt",Wte],["rp",Wte],["tbody",_te],["tfoot",_te]]),Vte=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),$te=new Set(["math","svg"]),Zte=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),Ute=/\s|\//;class qte{constructor(e,t={}){var n,o,i,r,l,s;this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:this.htmlMode,this.lowerCaseAttributeNames=null!==(o=t.lowerCaseAttributeNames)&&void 0!==o?o:this.htmlMode,this.recognizeSelfClosing=null!==(i=t.recognizeSelfClosing)&&void 0!==i?i:!this.htmlMode,this.tokenizer=new(null!==(r=t.Tokenizer)&&void 0!==r?r:Pte)(this.options,this),this.foreignContext=[!this.htmlMode],null===(s=(l=this.cbs).onparserinit)||void 0===s||s.call(l,this)}ontext(e,t){var n,o;const i=this.getSlice(e,t);this.endIndex=t-1,null===(o=(n=this.cbs).ontext)||void 0===o||o.call(n,i),this.startIndex=t}ontextentity(e,t){var n,o;this.endIndex=t-1,null===(o=(n=this.cbs).ontext)||void 0===o||o.call(n,bte(e)),this.startIndex=t}isVoidElement(e){return this.htmlMode&&Vte.has(e)}onopentagname(e,t){this.endIndex=t;let n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var t,n,o,i;this.openTagStart=this.startIndex,this.tagname=e;const r=this.htmlMode&&zte.get(e);if(r)for(;this.stack.length>0&&r.has(this.stack[0]);){const e=this.stack.shift();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,e,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&($te.has(e)?this.foreignContext.unshift(!0):Zte.has(e)&&this.foreignContext.unshift(!1))),null===(i=(o=this.cbs).onopentagname)||void 0===i||i.call(o,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,t){var n,o,i,r,l,s,c,a;this.endIndex=t;let u=this.getSlice(e,t);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),this.htmlMode&&($te.has(u)||Zte.has(u))&&this.foreignContext.shift(),this.isVoidElement(u))this.htmlMode&&"br"===u&&(null===(r=(i=this.cbs).onopentagname)||void 0===r||r.call(i,"br"),null===(s=(l=this.cbs).onopentag)||void 0===s||s.call(l,"br",{},!0),null===(a=(c=this.cbs).onclosetag)||void 0===a||a.call(c,"br",!1));else{const e=this.stack.indexOf(u);if(-1!==e)for(let t=0;t<=e;t++){const i=this.stack.shift();null===(o=(n=this.cbs).onclosetag)||void 0===o||o.call(n,i,t!==e)}else this.htmlMode&&"p"===u&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1}onselfclosingtag(e){this.endIndex=e,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var t,n;const o=this.tagname;this.endOpenTag(e),this.stack[0]===o&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,o,!e),this.stack.shift())}onattribname(e,t){this.startIndex=e;const n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,t){this.attribvalue+=this.getSlice(e,t)}onattribentity(e){this.attribvalue+=bte(e)}onattribend(e,t){var n,o;this.endIndex=t,null===(o=(n=this.cbs).onattribute)||void 0===o||o.call(n,this.attribname,this.attribvalue,e===Dte.Double?'"':e===Dte.Single?"'":e===Dte.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const t=e.search(Ute);let n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${e}`,`!${n}`)}this.startIndex=t+1}onprocessinginstruction(e,t){this.endIndex=t;const n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){const e=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${e}`,`?${n}`)}this.startIndex=t+1}oncomment(e,t,n){var o,i,r,l;this.endIndex=t,null===(i=(o=this.cbs).oncomment)||void 0===i||i.call(o,this.getSlice(e,t-n)),null===(l=(r=this.cbs).oncommentend)||void 0===l||l.call(r),this.startIndex=t+1}oncdata(e,t,n){var o,i,r,l,s,c,a,u,d,f;this.endIndex=t;const h=this.getSlice(e,t-n);!this.htmlMode||this.options.recognizeCDATA?(null===(i=(o=this.cbs).oncdatastart)||void 0===i||i.call(o),null===(l=(r=this.cbs).ontext)||void 0===l||l.call(r,h),null===(c=(s=this.cbs).oncdataend)||void 0===c||c.call(s)):(null===(u=(a=this.cbs).oncomment)||void 0===u||u.call(a,`[CDATA[${h}]]`),null===(f=(d=this.cbs).oncommentend)||void 0===f||f.call(d)),this.startIndex=t+1}onend(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let e=0;e<this.stack.length;e++)this.cbs.onclosetag(this.stack[e],!0)}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)}reset(){var e,t,n,o;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(o=(n=this.cbs).onparserinit)||void 0===o||o.call(n,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);for(;t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))}end(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}var Yte;!function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(Yte||(Yte={})),Yte.Root,Yte.Text,Yte.Directive,Yte.Comment,Yte.Script,Yte.Style,Yte.Tag,Yte.CDATA,Yte.Doctype;let Kte=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return sne(this,e)}};class Gte extends Kte{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class Xte extends Gte{constructor(){super(...arguments),this.type=Yte.Text}get nodeType(){return 3}}class Jte extends Gte{constructor(){super(...arguments),this.type=Yte.Comment}get nodeType(){return 8}}class Qte extends Gte{constructor(e,t){super(t),this.name=e,this.type=Yte.Directive}get nodeType(){return 1}}class ene extends Kte{constructor(e){super(),this.children=e}get firstChild(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class tne extends ene{constructor(){super(...arguments),this.type=Yte.CDATA}get nodeType(){return 4}}class nne extends ene{constructor(){super(...arguments),this.type=Yte.Root}get nodeType(){return 9}}class one extends ene{constructor(e,t,n=[],o=("script"===e?Yte.Script:"style"===e?Yte.Style:Yte.Tag)){super(n),this.name=e,this.attribs=t,this.type=o}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map((e=>{var t,n;return{name:e,value:this.attribs[e],namespace:null===(t=this["x-attribsNamespace"])||void 0===t?void 0:t[e],prefix:null===(n=this["x-attribsPrefix"])||void 0===n?void 0:n[e]}}))}}function ine(e){return(t=e).type===Yte.Tag||t.type===Yte.Script||t.type===Yte.Style;var t}function rne(e){return e.type===Yte.Text}function lne(e){return e.type===Yte.Root}function sne(e,t=!1){let n;if(rne(e))n=new Xte(e.data);else if(function(e){return e.type===Yte.Comment}(e))n=new Jte(e.data);else if(ine(e)){const o=t?cne(e.children):[],i=new one(e.name,{...e.attribs},o);o.forEach((e=>e.parent=i)),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=i}else if(function(e){return e.type===Yte.CDATA}(e)){const o=t?cne(e.children):[],i=new tne(o);o.forEach((e=>e.parent=i)),n=i}else if(lne(e)){const o=t?cne(e.children):[],i=new nne(o);o.forEach((e=>e.parent=i)),e["x-mode"]&&(i["x-mode"]=e["x-mode"]),n=i}else{if(!function(e){return e.type===Yte.Directive}(e))throw new Error(`Not implemented yet: ${e.type}`);{const t=new Qte(e.name,e.data);null!=e["x-name"]&&(t["x-name"]=e["x-name"],t["x-publicId"]=e["x-publicId"],t["x-systemId"]=e["x-systemId"]),n=t}}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function cne(e){const t=e.map((e=>sne(e,!0)));for(let e=1;e<t.length;e++)t[e].prev=t[e-1],t[e-1].next=t[e];return t}const ane={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class une{constructor(e,t,n){this.dom=[],this.root=new nne(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=ane),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:ane,this.elementCB=null!=n?n:null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new nne(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,t){const n=this.options.xmlMode?Yte.Tag:void 0,o=new one(e,t,void 0,n);this.addNode(o),this.tagStack.push(o)}ontext(e){const{lastNode:t}=this;if(t&&t.type===Yte.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{const t=new Xte(e);this.addNode(t),this.lastNode=t}}oncomment(e){if(this.lastNode&&this.lastNode.type===Yte.Comment)return void(this.lastNode.data+=e);const t=new Jte(e);this.addNode(t),this.lastNode=t}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Xte(""),t=new tne([e]);this.addNode(t),e.parent=t,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,t){const n=new Qte(e,t);this.addNode(n)}handleCallback(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e}addNode(e){const t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null}}var dne=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function fne(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let hne={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function pne(e){hne=e}const vne=/[&<>"']/,gne=new RegExp(vne.source,"g"),mne=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,yne=new RegExp(mne.source,"g"),bne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cne=e=>bne[e];function wne(e,t){if(t){if(vne.test(e))return e.replace(gne,Cne)}else if(mne.test(e))return e.replace(yne,Cne);return e}const xne=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;const Sne=/(^|[^\[])\^/g;function Ene(e,t){let n="string"==typeof e?e:e.source;t=t||"";const o={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(Sne,"$1"),n=n.replace(e,i),o},getRegex:()=>new RegExp(n,t)};return o}function kne(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}const Dne={exec:()=>null};function Ine(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let o=!1,i=t;for(;--i>=0&&"\\"===n[i];)o=!o;return o?"|":" |"})),o=n.split(/ \|/);let i=0;if(o[0].trim()||o.shift(),o.length>0&&!o[o.length-1].trim()&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;i<o.length;i++)o[i]=o[i].trim().replace(/\\\|/g,"|");return o}function Nne(e,t,n){const o=e.length;if(0===o)return"";let i=0;for(;i<o;){const r=e.charAt(o-i-1);if(r!==t||n){if(r===t||!n)break;i++}else i++}return e.slice(0,o-i)}function Lne(e,t,n,o){const i=t.href,r=t.title?wne(t.title):null,l=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){o.state.inLink=!0;const e={type:"link",raw:n,href:i,title:r,text:l,tokens:o.inlineTokens(l)};return o.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:r,text:wne(l)}}class Bne{options;rules;lexer;constructor(e){this.options=e||hne}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Nne(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const o=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=o.length?e.slice(o.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Nne(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Nne(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=Nne(t[0],"\n").split("\n"),n="",o="";const i=[];for(;e.length>0;){let t=!1;const r=[];let l;for(l=0;l<e.length;l++)if(/^ {0,3}>/.test(e[l]))r.push(e[l]),t=!0;else{if(t)break;r.push(e[l])}e=e.slice(l);const s=r.join("\n"),c=s.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}\n${s}`:s,o=o?`${o}\n${c}`:c;const a=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=a,0===e.length)break;const u=i[i.length-1];if("code"===u?.type)break;if("blockquote"===u?.type){const t=u,r=t.raw+"\n"+e.join("\n"),l=this.blockquote(r);i[i.length-1]=l,n=n.substring(0,n.length-t.raw.length)+l.raw,o=o.substring(0,o.length-t.text.length)+l.text;break}if("list"!==u?.type);else{const t=u,r=t.raw+"\n"+e.join("\n"),l=this.list(r);i[i.length-1]=l,n=n.substring(0,n.length-u.raw.length)+l.raw,o=o.substring(0,o.length-t.raw.length)+l.raw,e=r.substring(i[i.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:i,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const o=n.length>1,i={type:"list",raw:"",ordered:o,start:o?+n.slice(0,-1):"",loose:!1,items:[]};n=o?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=o?n:"[*+-]");const r=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let l=!1;for(;e;){let n=!1,o="",s="";if(!(t=r.exec(e)))break;if(this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let c=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),a=e.split("\n",1)[0],u=!c.trim(),d=0;if(this.options.pedantic?(d=2,s=c.trimStart()):u?d=t[1].length+1:(d=t[2].search(/[^ ]/),d=d>4?1:d,s=c.slice(d),d+=t[1].length),u&&/^ *$/.test(a)&&(o+=a+"\n",e=e.substring(a.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),r=new RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;e;){const l=e.split("\n",1)[0];if(a=l,this.options.pedantic&&(a=a.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),i.test(a))break;if(r.test(a))break;if(t.test(a))break;if(n.test(e))break;if(a.search(/[^ ]/)>=d||!a.trim())s+="\n"+a.slice(d);else{if(u)break;if(c.search(/[^ ]/)>=4)break;if(i.test(c))break;if(r.test(c))break;if(n.test(c))break;s+="\n"+a}u||a.trim()||(u=!0),o+=l+"\n",e=e.substring(l.length+1),c=a.slice(d)}}i.loose||(l?i.loose=!0:/\n *\n *$/.test(o)&&(l=!0));let f,h=null;this.options.gfm&&(h=/^\[[ xX]\] /.exec(s),h&&(f="[ ] "!==h[0],s=s.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:o,task:!!h,checked:f,loose:!1,text:s,tokens:[]}),i.raw+=o}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){const t=i.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=Ine(t[1]),o=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===o.length){for(const e of o)/^ *-+: *$/.test(e)?r.align.push("right"):/^ *:-+: *$/.test(e)?r.align.push("center"):/^ *:-+ *$/.test(e)?r.align.push("left"):r.align.push(null);for(let e=0;e<n.length;e++)r.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:r.align[e]});for(const e of i)r.rows.push(Ine(e,r.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:r.align[t]}))));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:wne(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Nne(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let o=0;o<e.length;o++)if("\\"===e[o])o++;else if(e[o]===t[0])n++;else if(e[o]===t[1]&&(n--,n<0))return o;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],o="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],o=e[3])}else o=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Lne(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:o?o.replace(this.rules.inline.anyPunctuation,"$1"):o},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Lne(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!o)return;if(o[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...o[0]].length-1;let i,r,l=n,s=0;const c="*"===o[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+n);null!=(o=c.exec(t));){if(i=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!i)continue;if(r=[...i].length,o[3]||o[4]){l+=r;continue}if((o[5]||o[6])&&n%3&&!((n+r)%3)){s+=r;continue}if(l-=r,l>0)continue;r=Math.min(r,r+l+s);const t=[...o[0]][0].length,c=e.slice(0,n+o.index+t+r);if(Math.min(n,r)%2){const e=c.slice(1,-1);return{type:"em",raw:c,text:e,tokens:this.lexer.inlineTokens(e)}}const a=c.slice(2,-2);return{type:"strong",raw:c,text:a,tokens:this.lexer.inlineTokens(a)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),o=/^ /.test(e)&&/ $/.test(e);return n&&o&&(e=e.substring(1,e.length-1)),e=wne(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=wne(t[1]),n="mailto:"+e):(e=wne(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=wne(t[0]),n="mailto:"+e;else{let o;do{o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(o!==t[0]);e=wne(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:wne(t[0]),{type:"text",raw:t[0],text:e}}}}const Tne=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ane=/(?:[*+-]|\d{1,9}[.)])/,Mne=Ene(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ane).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),One=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Rne=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Pne=Ene(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Rne).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Fne=Ene(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ane).getRegex(),Hne="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_ne=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,jne=Ene("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",_ne).replace("tag",Hne).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Wne=Ene(One).replace("hr",Tne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hne).getRegex(),zne={blockquote:Ene(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Wne).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Pne,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Tne,html:jne,lheading:Mne,list:Fne,newline:/^(?: *(?:\n|$))+/,paragraph:Wne,table:Dne,text:/^[^\n]+/},Vne=Ene("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Tne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hne).getRegex(),$ne={...zne,table:Vne,paragraph:Ene(One).replace("hr",Tne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Vne).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Hne).getRegex()},Zne={...zne,html:Ene("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",_ne).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dne,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ene(One).replace("hr",Tne).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Mne).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Une=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,qne=/^( {2,}|\\)\n(?!\s*$)/,Yne="\\p{P}\\p{S}",Kne=Ene(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Yne).getRegex(),Gne=Ene(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Yne).getRegex(),Xne=Ene("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Yne).getRegex(),Jne=Ene("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Yne).getRegex(),Qne=Ene(/\\([punct])/,"gu").replace(/punct/g,Yne).getRegex(),eoe=Ene(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),toe=Ene(_ne).replace("(?:--\x3e|$)","--\x3e").getRegex(),noe=Ene("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",toe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ooe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ioe=Ene(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ooe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),roe=Ene(/^!?\[(label)\]\[(ref)\]/).replace("label",ooe).replace("ref",Rne).getRegex(),loe=Ene(/^!?\[(ref)\](?:\[\])?/).replace("ref",Rne).getRegex(),soe={_backpedal:Dne,anyPunctuation:Qne,autolink:eoe,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:qne,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Dne,emStrongLDelim:Gne,emStrongRDelimAst:Xne,emStrongRDelimUnd:Jne,escape:Une,link:ioe,nolink:loe,punctuation:Kne,reflink:roe,reflinkSearch:Ene("reflink|nolink(?!\\()","g").replace("reflink",roe).replace("nolink",loe).getRegex(),tag:noe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Dne},coe={...soe,link:Ene(/^!?\[(label)\]\((.*?)\)/).replace("label",ooe).getRegex(),reflink:Ene(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ooe).getRegex()},aoe={...soe,escape:Ene(Une).replace("])","~|])").getRegex(),url:Ene(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},uoe={...aoe,br:Ene(qne).replace("{2,}","*").getRegex(),text:Ene(aoe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},doe={normal:zne,gfm:$ne,pedantic:Zne},foe={normal:soe,gfm:aoe,breaks:uoe,pedantic:coe};class hoe{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||hne,this.options.tokenizer=this.options.tokenizer||new Bne,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:doe.normal,inline:foe.normal};this.options.pedantic?(t.block=doe.pedantic,t.inline=foe.pedantic):this.options.gfm&&(t.block=doe.gfm,this.options.breaks?t.inline=foe.breaks:t.inline=foe.gfm),this.tokenizer.rules=t}static get rules(){return{block:doe,inline:foe}}static lex(e,t){return new hoe(t).lex(e)}static lexInline(e,t){return new hoe(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){let o,i,r;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(o=n.call({lexer:this},e,t))&&(e=e.substring(o.raw.length),t.push(o),!0)))))if(o=this.tokenizer.space(e))e=e.substring(o.raw.length),1===o.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(o);else if(o=this.tokenizer.code(e))e=e.substring(o.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(o):(i.raw+="\n"+o.raw,i.text+="\n"+o.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(o=this.tokenizer.fences(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.heading(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.hr(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.blockquote(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.list(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.html(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.def(e))e=e.substring(o.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title}):(i.raw+="\n"+o.raw,i.text+="\n"+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(o=this.tokenizer.table(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.lheading(e))e=e.substring(o.raw.length),t.push(o);else{if(r=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let o;this.options.extensions.startBlock.forEach((e=>{o=e.call({lexer:this},n),"number"==typeof o&&o>=0&&(t=Math.min(t,o))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r)))i=t[t.length-1],n&&"paragraph"===i?.type?(i.raw+="\n"+o.raw,i.text+="\n"+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(o),n=r.length!==e.length,e=e.substring(o.raw.length);else if(o=this.tokenizer.text(e))e=e.substring(o.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+o.raw,i.text+="\n"+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(o);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,o,i,r,l,s,c=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(c));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(c));)c=c.slice(0,r.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(s=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((o=>!!(n=o.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),o=t[t.length-1],o&&"text"===n.type&&"text"===o.type?(o.raw+=n.raw,o.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),o=t[t.length-1],o&&"text"===n.type&&"text"===o.type?(o.raw+=n.raw,o.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,c,s))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let o;this.options.extensions.startInline.forEach((e=>{o=e.call({lexer:this},n),"number"==typeof o&&o>=0&&(t=Math.min(t,o))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),l=!0,o=t[t.length-1],o&&"text"===o.type?(o.raw+=n.raw,o.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class poe{options;parser;constructor(e){this.options=e||hne}space(e){return""}code({text:e,lang:t,escaped:n}){const o=(t||"").match(/^\S*/)?.[0],i=e.replace(/\n$/,"")+"\n";return o?'<pre><code class="language-'+wne(o)+'">'+(n?i:wne(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:wne(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let o="";for(let t=0;t<e.items.length;t++){const n=e.items[t];o+=this.listitem(n)}const i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+o+"</"+i+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let o="";for(let t=0;t<e.rows.length;t++){const i=e.rows[t];n="";for(let e=0;e<i.length;e++)n+=this.tablecell(i[e]);o+=this.tablerow({text:n})}return o&&(o=`<tbody>${o}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+o+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const o=this.parser.parseInline(n),i=kne(e);if(null===i)return o;let r='<a href="'+(e=i)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+o+"</a>",r}image({href:e,title:t,text:n}){const o=kne(e);if(null===o)return n;let i=`<img src="${e=o}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class voe{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class goe{options;renderer;textRenderer;constructor(e){this.options=e||hne,this.options.renderer=this.options.renderer||new poe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new voe}static parse(e,t){return new goe(t).parse(e)}static parseInline(e,t){return new goe(t).parseInline(e)}parse(e,t=!0){let n="";for(let o=0;o<e.length;o++){const i=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const r=i;switch(r.type){case"space":n+=this.renderer.space(r);continue;case"hr":n+=this.renderer.hr(r);continue;case"heading":n+=this.renderer.heading(r);continue;case"code":n+=this.renderer.code(r);continue;case"table":n+=this.renderer.table(r);continue;case"blockquote":n+=this.renderer.blockquote(r);continue;case"list":n+=this.renderer.list(r);continue;case"html":n+=this.renderer.html(r);continue;case"paragraph":n+=this.renderer.paragraph(r);continue;case"text":{let i=r,l=this.renderer.text(i);for(;o+1<e.length&&"text"===e[o+1].type;)i=e[++o],l+="\n"+this.renderer.text(i);n+=t?this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):l;continue}default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let o=0;o<e.length;o++){const i=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}const r=i;switch(r.type){case"escape":case"text":n+=t.text(r);break;case"html":n+=t.html(r);break;case"link":n+=t.link(r);break;case"image":n+=t.image(r);break;case"strong":n+=t.strong(r);break;case"em":n+=t.em(r);break;case"codespan":n+=t.codespan(r);break;case"br":n+=t.br(r);break;case"del":n+=t.del(r);break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class moe{options;constructor(e){this.options=e||hne}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}const yoe=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(hoe.lex,goe.parse);parseInline=this.#e(hoe.lexInline,goe.parseInline);Parser=goe;Renderer=poe;TextRenderer=voe;Lexer=hoe;Tokenizer=Bne;Hooks=moe;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const o of e)switch(n=n.concat(t.call(this,o)),o.type){case"table":{const e=o;for(const o of e.header)n=n.concat(this.walkTokens(o.tokens,t));for(const o of e.rows)for(const e of o)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=o;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=o;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((o=>{const i=e[o].flat(1/0);n=n.concat(this.walkTokens(i,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let o=e.renderer.apply(this,t);return!1===o&&(o=n.apply(this,t)),o}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new poe(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n;let i=e.renderer[o];const r=t[o];t[o]=(...n)=>{e.useNewRenderer||(i=this.#t(i,o,t));let l=i.apply(t,n);return!1===l&&(l=r.apply(t,n)),l||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new Bne(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,i=e.tokenizer[o],r=t[o];t[o]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=r.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new moe;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if("options"===n)continue;const o=n,i=e.hooks[o],r=t[o];moe.passThroughHooks.has(n)?t[o]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>r.call(t,e)));const n=i.call(t,e);return r.call(t,n)}:t[o]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=r.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,o=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(o.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}#t(e,t,n){switch(t){case"heading":return function(o){return o.type&&o.type===t?e.call(this,n.parser.parseInline(o.tokens),o.depth,function(e){return e.replace(xne,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}(n.parser.parseInline(o.tokens,n.parser.textRenderer))):e.apply(this,arguments)};case"code":return function(n){return n.type&&n.type===t?e.call(this,n.text,n.lang,!!n.escaped):e.apply(this,arguments)};case"table":return function(n){if(!n.type||n.type!==t)return e.apply(this,arguments);let o="",i="";for(let e=0;e<n.header.length;e++)i+=this.tablecell({text:n.header[e].text,tokens:n.header[e].tokens,header:!0,align:n.align[e]});o+=this.tablerow({text:i});let r="";for(let e=0;e<n.rows.length;e++){const t=n.rows[e];i="";for(let e=0;e<t.length;e++)i+=this.tablecell({text:t[e].text,tokens:t[e].tokens,header:!1,align:n.align[e]});r+=this.tablerow({text:i})}return e.call(this,o,r)};case"blockquote":return function(n){if(!n.type||n.type!==t)return e.apply(this,arguments);const o=this.parser.parse(n.tokens);return e.call(this,o)};case"list":return function(n){if(!n.type||n.type!==t)return e.apply(this,arguments);const o=n.ordered,i=n.start,r=n.loose;let l="";for(let e=0;e<n.items.length;e++){const t=n.items[e],o=t.checked,i=t.task;let s="";if(t.task){const e=this.checkbox({checked:!!o});r?t.tokens.length>0&&"paragraph"===t.tokens[0].type?(t.tokens[0].text=e+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=e+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",text:e+" "}):s+=e+" "}s+=this.parser.parse(t.tokens,r),l+=this.listitem({type:"list_item",raw:s,text:s,task:i,checked:!!o,loose:r,tokens:t.tokens})}return e.call(this,l,o,i)};case"html":return function(n){return n.type&&n.type===t?e.call(this,n.text,n.block):e.apply(this,arguments)};case"paragraph":case"strong":case"em":case"del":return function(n){return n.type&&n.type===t?e.call(this,this.parser.parseInline(n.tokens)):e.apply(this,arguments)};case"escape":case"codespan":case"text":return function(n){return n.type&&n.type===t?e.call(this,n.text):e.apply(this,arguments)};case"link":return function(n){return n.type&&n.type===t?e.call(this,n.href,n.title,this.parser.parseInline(n.tokens)):e.apply(this,arguments)};case"image":return function(n){return n.type&&n.type===t?e.call(this,n.href,n.title,n.text):e.apply(this,arguments)}}return e}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return hoe.lex(e,t??this.defaults)}parser(e,t){return goe.parse(e,t??this.defaults)}#e(e,t){return(n,o)=>{const i={...o},r={...this.defaults,...i};!0===this.defaults.async&&!1===i.async&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const l=this.#n(!!r.silent,!!r.async);if(null==n)return l(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then((t=>e(t,r))).then((e=>r.hooks?r.hooks.processAllTokens(e):e)).then((e=>r.walkTokens?Promise.all(this.walkTokens(e,r.walkTokens)).then((()=>e)):e)).then((e=>t(e,r))).then((e=>r.hooks?r.hooks.postprocess(e):e)).catch(l);try{r.hooks&&(n=r.hooks.preprocess(n));let o=e(n,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let i=t(o,r);return r.hooks&&(i=r.hooks.postprocess(i)),i}catch(e){return l(e)}}}#n(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+wne(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function boe(e,t){return yoe.parse(e,t)}boe.options=boe.setOptions=function(e){return yoe.setOptions(e),boe.defaults=yoe.defaults,pne(boe.defaults),boe},boe.getDefaults=fne,boe.defaults=hne,boe.use=function(...e){return yoe.use(...e),boe.defaults=yoe.defaults,pne(boe.defaults),boe},boe.walkTokens=function(e,t){return yoe.walkTokens(e,t)},boe.parseInline=yoe.parseInline,boe.Parser=goe,boe.parser=goe.parse,boe.Renderer=poe,boe.TextRenderer=voe,boe.Lexer=hoe,boe.lexer=hoe.lex,boe.Tokenizer=Bne,boe.Hooks=moe,boe.parse=boe,boe.options,boe.setOptions,boe.use,boe.walkTokens,boe.parseInline,goe.parse,hoe.lex;const Coe=function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}();function woe(e,{ambiguousAsWide:t=!1}={}){return function(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}(e),function(e){return 12288===e||e>=65281&&e<=65376||e>=65504&&e<=65510}(e)||function(e){return e>=4352&&e<=4447||8986===e||8987===e||9001===e||9002===e||e>=9193&&e<=9196||9200===e||9203===e||9725===e||9726===e||9748===e||9749===e||e>=9776&&e<=9783||e>=9800&&e<=9811||9855===e||e>=9866&&e<=9871||9875===e||9889===e||9898===e||9899===e||9917===e||9918===e||9924===e||9925===e||9934===e||9940===e||9962===e||9970===e||9971===e||9973===e||9978===e||9981===e||9989===e||9994===e||9995===e||10024===e||10060===e||10062===e||e>=10067&&e<=10069||10071===e||e>=10133&&e<=10135||10160===e||10175===e||11035===e||11036===e||11088===e||11093===e||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||94192===e||94193===e||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101631&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||110589===e||110590===e||e>=110592&&e<=110882||110898===e||e>=110928&&e<=110930||110933===e||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||126980===e||127183===e||127374===e||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||127568===e||127569===e||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||127988===e||e>=127992&&e<=128062||128064===e||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||128378===e||128405===e||128406===e||128420===e||e>=128507&&e<=128591||e>=128640&&e<=128709||128716===e||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||128747===e||128748===e||e>=128756&&e<=128764||e>=128992&&e<=129003||129008===e||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129673||e>=129679&&e<=129734||e>=129742&&e<=129756||e>=129759&&e<=129769||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}(e)||t&&function(e){return 161===e||164===e||167===e||168===e||170===e||173===e||174===e||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||198===e||208===e||215===e||216===e||e>=222&&e<=225||230===e||e>=232&&e<=234||236===e||237===e||240===e||242===e||243===e||e>=247&&e<=250||252===e||254===e||257===e||273===e||275===e||283===e||294===e||295===e||299===e||e>=305&&e<=307||312===e||e>=319&&e<=322||324===e||e>=328&&e<=331||333===e||338===e||339===e||358===e||359===e||363===e||462===e||464===e||466===e||468===e||470===e||472===e||474===e||476===e||593===e||609===e||708===e||711===e||e>=713&&e<=715||717===e||720===e||e>=728&&e<=731||733===e||735===e||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||1025===e||e>=1040&&e<=1103||1105===e||8208===e||e>=8211&&e<=8214||8216===e||8217===e||8220===e||8221===e||e>=8224&&e<=8226||e>=8228&&e<=8231||8240===e||8242===e||8243===e||8245===e||8251===e||8254===e||8308===e||8319===e||e>=8321&&e<=8324||8364===e||8451===e||8453===e||8457===e||8467===e||8470===e||8481===e||8482===e||8486===e||8491===e||8531===e||8532===e||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||8585===e||e>=8592&&e<=8601||8632===e||8633===e||8658===e||8660===e||8679===e||8704===e||8706===e||8707===e||8711===e||8712===e||8715===e||8719===e||8721===e||8725===e||8730===e||e>=8733&&e<=8736||8739===e||8741===e||e>=8743&&e<=8748||8750===e||e>=8756&&e<=8759||8764===e||8765===e||8776===e||8780===e||8786===e||8800===e||8801===e||e>=8804&&e<=8807||8810===e||8811===e||8814===e||8815===e||8834===e||8835===e||8838===e||8839===e||8853===e||8857===e||8869===e||8895===e||8978===e||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||9632===e||9633===e||e>=9635&&e<=9641||9650===e||9651===e||9654===e||9655===e||9660===e||9661===e||9664===e||9665===e||e>=9670&&e<=9672||9675===e||e>=9678&&e<=9681||e>=9698&&e<=9701||9711===e||9733===e||9734===e||9737===e||9742===e||9743===e||9756===e||9758===e||9792===e||9794===e||9824===e||9825===e||e>=9827&&e<=9829||e>=9831&&e<=9834||9836===e||9837===e||9839===e||9886===e||9887===e||9919===e||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||9955===e||9960===e||9961===e||e>=9963&&e<=9969||9972===e||e>=9974&&e<=9977||9979===e||9980===e||9982===e||9983===e||10045===e||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||65533===e||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||127375===e||127376===e||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}(e)?2:1}const xoe=new Intl.Segmenter,Soe=/^\p{Default_Ignorable_Code_Point}$/u;function Eoe(e,t={}){if("string"!=typeof e||0===e.length)return 0;const{ambiguousIsNarrow:n=!0,countAnsiEscapeCodes:o=!1}=t;if(o||(e=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Coe,"")}(e)),0===e.length)return 0;let i=0;const r={ambiguousAsWide:!n};for(const{segment:t}of xoe.segment(e)){const e=t.codePointAt(0);e<=31||e>=127&&e<=159||(e>=8203&&e<=8207||65279===e||e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071||e>=55296&&e<=57343||e>=65024&&e<=65039||Soe.test(t)||(dne().test(t)?i+=2:i+=woe(e,r)))}return i}function koe(e){const{type:t,style:n,props:o,children:i}=e;let r="<";if(r+=t,n){const e=Object.keys(n);e.length>0&&(r+=' style="',r+=e.map((e=>`${String(e)}:${String(n[e])}`)).join(";"),r+=';"')}if(o){const e=Object.keys(o);e.length>0&&(r+=e.map((e=>`${e}="${String(o[e])}"`)).join(" "))}return"img"===t||"input"===t?r+=" />":i.length>0&&(r+=">",r+=i.map((e=>"string"==typeof e?e:koe(e))).join(""),r+=`</${t}>`),r}function Doe(e,t="  "){const n=e=>/<[^>!]+>/.test(e),o=e=>/<\/+[^>]+>/.test(e),i=e=>/^<(span|a|img)/.test(e.trimStart()),r=e=>/<\/(span|a|img)>$/.test(e.trimEnd());let l=0;t=t||"    ";let s=!1,c=[];const a=(u=e,u.split(/(<\/?[^>]+>)/g).filter((e=>""!==e.trim()))).map((e=>{if(e.trim().startsWith("<![CDATA[")&&(s=!0),e.trim().endsWith("]]>")){s=!1,c.push(e);let t=c.join("");return c=[],t}if(s)return c.push(e),null;e=e.replace(/^\s+|\s+$/g,""),o(e)&&l--;const i=t.repeat(l>=0?l:0)+e;return(e=>n(e)&&!o(e)&&!(e=>/<[^>]+\/>/.test(e))(e)&&!(e=>/<\?[^?>]+\?>/.test(e))(e))(e)&&l++,i})).filter((e=>e));var u;function d(e,t){return!n(e)||!!t&&(!n(t)||(!(!i(e)||!r(t))||(!(!r(e)||!r(t))||(!(!i(e)||!i(t))||(!(!r(e)||!i(t))||void 0)))))}let f="";for(let e=0;e<a.length;e++){const t=a[e];if(!t)continue;d(t,a[e-1])?(f=f.trimEnd(),f+=t.trimStart(),f+="\n"):(f+=t,f+="\n")}return f}const Ioe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Noe(e){return e.replace(Ioe,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"amp"===t?"&":"lt"===t?"<":"gt"===t?">":"quot"===t?'"':"#39"===t?"'":""))}const Loe={a:{},address:{fontStyle:"italic"},area:{display:"none"},b:{fontWeight:"bolder"},bdo:{unicodeBidi:"bidi-override"},blockquote:{paddingTop:16,paddingBottom:16,paddingLeft:40,paddingRight:40},body:{paddingTop:8,paddingRight:8,paddingBottom:8,paddingLeft:8},caption:{display:"table-caption",textAlign:"center"},cite:{fontStyle:"italic"},code:{fontFamily:"monospace"},col:{display:"table-column"},colgroup:{display:"table-column-group"},datalist:{display:"none"},dd:{paddingLeft:40},del:{textDecoration:"line-through"},dfn:{fontStyle:"italic"},dl:{},em:{fontStyle:"italic"},fieldset:{paddingLeft:12,paddingRight:12,paddingTop:5,paddingBottom:10,borderWidth:2,borderStyle:"groove"},figure:{paddingTop:16,paddingBottom:16,paddingLeft:40,paddingRight:40},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},hr:{borderStyle:"inset",borderWidth:1},i:{fontStyle:"italic"},iframe:{outline:"none"},ins:{textDecoration:"underline"},kbd:{fontFamily:"monospace"},label:{cursor:"default"},legend:{paddingLeft:2,paddingRight:2},li:{display:"list-item"},link:{display:"none"},mark:{backgroundColor:"yellow",color:"black"},menu:{},ol:{},p:{},param:{display:"none"},pre:{fontFamily:"monospace",whiteSpace:"pre"},s:{textDecoration:"line-through"},samp:{fontFamily:"monospace"},script:{display:"none"},small:{fontSize:"smaller"},strike:{textDecoration:"line-through"},strong:{fontWeight:"bolder"},style:{display:"none"},sub:{verticalAlign:"super",fontSize:"smaller"},table:{display:"table",borderCollapse:"separate",borderSpacing:2,borderColor:"gray"},tbody:{display:"table-row-group",verticalAlign:"middle",borderColor:"inherit"},td:{display:"table-cell",verticalAlign:"inherit"},tfoot:{display:"table-footer-group",verticalAlign:"middle",borderColor:"inherit"},th:{display:"table-cell",verticalAlign:"inherit",fontWeight:"bolder",textAlign:"center"},thead:{display:"table-header-group",verticalAlign:"middle",borderColor:"inherit"},title:{display:"none"},tr:{display:"table-row",verticalAlign:"inherit",borderColor:"inherit"},u:{textDecoration:"underline"},ul:{},var:{fontStyle:"italic"}};const Boe=dne(),{createBlockNode:Toe,createInlineNode:Aoe,createMetaBrNode:Moe,createMetaSpaceNode:Ooe,createMetaNode:Roe}=ek,Poe={block:Toe,inline:Aoe,outline:Toe,separate:Toe,image:Toe,bulleted:Toe,numbered:Toe,checked:Toe,emoji:Toe,sheet:Toe,quote:Toe,link:Toe,code:Toe,br:Moe,space:()=>Ooe(),meta:Roe},Foe="    ";function Hoe(e,t){const{rowStartIndex:n,rowEndIndex:o,columnStartIndex:i,columnEndIndex:r}=e,{rowIndex:l,columnIndex:s}=t;return void 0===l&&void 0!==s?i<s&&r>s:void 0!==l&&void 0===s?n<l&&o>l:void 0!==l&&void 0!==s&&(n<l&&o>l&&i<s&&r>s)}function _oe(e,t){const{rowStartIndex:n,rowEndIndex:o,columnStartIndex:i,columnEndIndex:r}=e,{rowIndex:l=n,columnIndex:s=i}=t;return n<=l&&o>=l&&i<=s&&r>=s}function joe(e,t){return e.some((e=>Hoe(e,t)))}const Woe=["address","article","aside","blockquote","body","caption","colgroup","details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","thead","tbody","td","tfoot","th","tr","ul"],zoe=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","label","map","mark","menu","meter","noscript","object","output","param","path","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strike","strong","sub","sup","svg","template","textarea","time","track","u","tt","var","video","wbr"];function Voe(e){return"span"===e||"div"!==e&&!!zoe.includes(e)}function $oe(e){return["ul","ol"].includes(e)}function Zoe(e){return["h1","h2","h3","h4","h5","h6"].includes(e)}const Uoe={top:"─","top-mid":"┬","top-left":"┌","top-right":"┐",bottom:"─","bottom-mid":"┴","bottom-left":"└","bottom-right":"┘",left:"│","left-mid":"├",mid:"─","mid-mid":"┼",right:"│","right-mid":"┤",middle:"│","half-width-space":" ","full-width-space":"　"},qoe=["（","《","【","「"],Yoe=["，","、","。","；","：","）","》","】","」"],Koe=6,{getColumnSize:Goe,getIndexByKey:Xoe,getKeyByIndex:Joe,isRangeInclude:Qoe,calcIndicatorRangeByMerge:eie}=ML,{isEmptyNode:tie}=ek;async function nie(e,t){var n,o,i,r,l,s,c,a;let u="";const{columnTotalNumber:d,rowTotalNumber:f,cells:h}=e;if(!d||!f||!t.measurer)return u;const p={},v={},g=[],m=[];null===(o=null===(n=t.sheet)||void 0===n?void 0:n.nest)||void 0===o||o.call(n);for(const n in h){const{rowIndex:o,columnIndex:i}=Xoe(n),{state:r,merge:l}=h[n];if(l){const e=eie(l);if(m.some((t=>Ec(t,e)))||m.push(e),e.rowStartIndex!==o&&e.columnStartIndex!==i)continue}const s=null==r?void 0:r.editor,c=null==s?void 0:s.node;if(!c)continue;let a="",u=!1;if(c&&!tie(c,!0)){const e={...t.sheet,nest(){u=!0}};a=await hie(c,{...t,sheet:e},0),a=a.trimEnd()}g[o]||(g[o]=[]),g[o][i]=a;const d=a.split("\n");if(u){let e=0;const t=new RegExp(`^${Uoe["top-left"]}.*${Uoe["top-right"]}$`);for(const n of d){if(!t.test(n))continue;const o=Eoe(n);o>e&&(e=o)}if(e){l?(!v[l]||v[l]<e)&&(v[l]=e):(!p[i]||p[i]<e)&&(p[i]=e);continue}}let f=Goe(e,i)-16;if(l){const{columnStartIndex:t,columnEndIndex:n}=eie(l);f=Goe(e,t,n)-16}let y="",b=0;for(const e of d){let t=0,n=0;for(const o of e){Eoe(o)>1?(n++,3===n&&(n=0,t+=5)):t+=1}n>0&&(t+=5),t>b&&(b=t,y=e)}let C=0,w=0,x=0;for(const e of y){const n=t.measurer(e);if(w+n>f)break;w+=n,Eoe(e)>1?x++:C+=1}C+=5*Math.ceil(x/3),l?(!v[l]||v[l]<C)&&(v[l]=C):(!p[i]||p[i]<C)&&(p[i]=C)}const y=t.measurer(Uoe.top);for(let t=0;t<d;t++){if(p[t])continue;const n=Goe(e,t)-16;let o=0,i=0;for(;o<n&&i<Koe;)o+=y,i++;p[t]=Math.min(i,Koe)}for(const e in v){const t=v[e],{columnStartIndex:n,columnEndIndex:o}=eie(e);let r=0;for(let e=n;e<o;e++)r+=null!==(i=p[e])&&void 0!==i?i:0;const l=t-r;if(l<=0)continue;const s=Math.ceil(l/(o-n));for(let e=n;e<o;e++)p[e]+=s}const b=function(e,t,n){var o;let i=Uoe["top-left"];for(let r=0;r<e;r++){r>0&&(joe(n,{columnIndex:r})?i+=Uoe.top:i+=Uoe["top-mid"]);const e=null!==(o=t[r])&&void 0!==o?o:Koe;i+=Uoe.top.repeat(e+2)}return i+=Uoe["top-right"],i}(d,p,m.filter((e=>0===e.rowStartIndex)));u+=`${b}\n`;let C=0;for(;C<f;){let t=!1,n=Uoe.left,o=0;for(;o<d;){let i=null!==(r=p[o])&&void 0!==r?r:Koe;const u=Joe(C,o),d=null===(s=null===(l=e.cells)||void 0===l?void 0:l[u])||void 0===s?void 0:s.merge;if(d){const{columnStartIndex:e,columnEndIndex:t}=eie(d);if(o!==e){o++;continue}i=0;for(let n=e;n<t;n++)i+=null!==(c=p[n])&&void 0!==c?c:Koe,n>e&&(i+=3)}if(o>0){const e=m.find((e=>Qoe(e,{rowIndex:C,columnIndex:o})));e&&Hoe(e,{columnIndex:o})?n+=Uoe["half-width-space"]:n+=Uoe.middle}let f=null===(a=g[C])||void 0===a?void 0:a[o];if(n+=Uoe["half-width-space"],!f){n+=Uoe["half-width-space"].repeat(i),n+=Uoe["half-width-space"],o++;continue}let h=0,v=0,y=0,b=0,w=0;for(const e of f){if("\n"===e){h++;break}let t=Eoe(e);qoe.includes(e)?(qoe.includes(f[h-1])||Yoe.includes(f[h-1]))&&(t=1):Yoe.includes(e)&&Yoe.includes(f[h-1])&&(t=1),t>1?(0===y&&(b=h),y++,3===y&&(v+=5,y=0,b=0,w=0)):(v+=1,y>0&&(w+=1));if(v+(y>0?5:0)>i){y>0&&b>0&&(h=b,v-=w,y=0,b=0,w=0);break}if(n+=e,h++,v===i){"\n"===f[h]&&h++;break}}let x=!1;if(Yoe.includes(n[n.length-1])&&(n+=Uoe["half-width-space"],x=!0),y>0){const e=3-y;n+=Uoe["full-width-space"].repeat(e),v+=5}for(;v<i;)n+=Uoe["half-width-space"],v+=1;f=f.slice(h),f.length&&(t=!0),g[C][o]=f,x||(n+=Uoe["half-width-space"]),o++}if(n+=Uoe.right,u+=`${n}\n`,C!==f-1&&!t){u+=`${oie(d,C+1,p,m)}\n`}t||C++}const w=function(e,t,n){var o;let i=Uoe["bottom-left"];for(let r=0;r<e;r++){r>0&&(joe(n,{columnIndex:r})?i+=Uoe.bottom:i+=Uoe["bottom-mid"]);const e=null!==(o=t[r])&&void 0!==o?o:Koe;i+=Uoe.bottom.repeat(e+2)}return i+=Uoe["bottom-right"],i}(d,p,m.filter((e=>e.rowEndIndex===f)));return u+=w,u}function oie(e,t,n,o){var i;let r=Uoe["left-mid"];const l=o.find((e=>Qoe(e,{columnIndex:0,rowIndex:t})));l&&Hoe(l,{rowIndex:t})&&(r=Uoe.left);for(let l=0;l<e;l++){l>0&&(r+=iie(t,l,o));const e=null!==(i=n[l])&&void 0!==i?i:Koe,s=o.find((e=>Qoe(e,{columnIndex:l,rowIndex:t})));r+=s&&Hoe(s,{rowIndex:t})?Uoe["half-width-space"].repeat(e+2):Uoe.mid.repeat(e+2)}const s=o.find((n=>_oe(n,{columnIndex:e,rowIndex:t})));return s&&Hoe(s,{rowIndex:t})?r+=Uoe.right:r+=Uoe["right-mid"],r}function iie(e,t,n){if(joe(n,{rowIndex:e,columnIndex:t}))return Uoe["half-width-space"];const o=n.filter((n=>_oe(n,{rowIndex:e,columnIndex:t})));if(1===o.length){if(o[0].rowEndIndex===e&&Hoe(o[0],{columnIndex:t}))return Uoe["top-mid"];if(o[0].rowStartIndex===e&&Hoe(o[0],{columnIndex:t}))return Uoe["bottom-mid"];if(o[0].columnEndIndex===t&&Hoe(o[0],{rowIndex:e}))return Uoe["left-mid"];if(o[0].columnStartIndex===t&&Hoe(o[0],{rowIndex:e}))return Uoe["right-mid"]}if(o.length>=2){let n=!1,i=!1,r=!1,l=!1;for(const s of o){const{rowStartIndex:o,rowEndIndex:c,columnStartIndex:a,columnEndIndex:u}=s;e>o&&e<c&&(t<=a&&(n=!0),t>=u&&(i=!0)),t>a&&t<u&&(e<=o&&(l=!0),e>=c&&(r=!0))}if(n&&i)return Uoe.middle;if(n&&!i)return Uoe["right-mid"];if(!n&&i)return Uoe["left-mid"];if(r&&l)return Uoe.mid;if(r&&!l)return Uoe["top-mid"];if(!r&&l)return Uoe["bottom-mid"]}return Uoe["mid-mid"]}const{isNode:rie,isEmptyNode:lie,traverseNode:sie,isReferenceNode:cie}=ek,{getKeyByIndex:aie}=ML;async function uie(e,t){var n,o,i;let r="",l=null,s=!1,c=0;for(;c<e.length;){const a=e[c];if("string"!=typeof a)if((t.filter.numbered(a)||t.filter.bulleted(a)||t.filter.checked(a)||t.filter.toggle(a)||t.filter.outline(a))&&(s=!0),t.filter.numbered(a)){null===l&&(l=[]);let e=null===(o=null===(n=a.props)||void 0===n?void 0:n.level)||void 0===o?void 0:o.length;e||(e=0),void 0===l[e]&&(l[e]=-1),l[e]=l[e]+1,r+=await die(a,t,l[e])}else{if(t.filter.toggle(a)){const t=[...a.children];We(null===(i=a.props)||void 0===i?void 0:i.list)&&t.push(...a.props.list),e.splice(c,1,...t);continue}s&&!r.endsWith("\n\n")&&(r+="\n",s=!1),r+=await die(a,t,c)}else r+=Noe(a);r=r.replace(/(\n\x20*){2,}$/,"\n\n"),c++}return r}async function die(e,t,n){var o,i,r,l,s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x,S,E,k,D,I,N;const{style:L,props:B,children:T}=e;if(t.filter.outline(e)){const c=null!==(r=null===(i=null===(o=t.outline)||void 0===o?void 0:o.depth)||void 0===i?void 0:i.call(o,e))&&void 0!==r?r:0;if(1===c&&n>0){const n=await(null===(s=null===(l=t.outline)||void 0===l?void 0:l.source)||void 0===s?void 0:s.call(l,e));if(!n)return"";const{src:o,alt:i}=n;let r=`[${i}](${o} "${i}")`;return r=r.replace(/\n?$/,"\n\n"),r}const a="#".repeat(c);let u=T[0];for(;rie(u)&&(t.filter.numbered(u)||t.filter.bulleted(u)||t.filter.checked(u)||t.filter.toggle(u)||cie(u));)u=u.children[0];let d=await uie([u],t);return d=d.replace(/\n*$/,"\n\n"),d=`${a} ${d}`,d}if(t.filter.shortcut(e)){const n=await(null===(a=null===(c=t.shortcut)||void 0===c?void 0:c.source)||void 0===a?void 0:a.call(c,e));if(!n)return"";const{src:o,alt:i}=n;let r=`[${i}](${o} "${i}")`;return r=r.replace(/\n?$/,"\n\n"),r}if(t.filter.separate(e)){let e=await uie(T,t);return e=e.replace(/\n?$/,"\n"),e}if(t.filter.image(e)){let n=await uie(T,t);const o=await(null===(d=null===(u=t.image)||void 0===u?void 0:u.source)||void 0===d?void 0:d.call(u,e)),i=null!==(h=null!==(f=null==o?void 0:o.src)&&void 0!==f?f:null==B?void 0:B.src)&&void 0!==h?h:"";return n=`![${null!==(v=null!==(p=null==o?void 0:o.alt)&&void 0!==p?p:null==B?void 0:B.alt)&&void 0!==v?v:""}](${i}${n?` "${n}"`:""})`,n}if(t.filter.bulleted(e)){const n=(null!==(m=null===(g=null==B?void 0:B.level)||void 0===g?void 0:g.length)&&void 0!==m?m:1)-1,o=`${Foe.repeat(n)}-`;let i=await pie(e,t,o);return i=i.replace(/\n?$/,"\n"),i}if(t.filter.numbered(e)){const o=(null!==(b=null===(y=null==B?void 0:B.level)||void 0===y?void 0:y.length)&&void 0!==b?b:1)-1,i=`${Foe.repeat(o)}${n+1}.`;let r=await pie(e,t,i);return r=r.replace(/\n?$/,"\n"),r}if(t.filter.checked(e)){const n=(null!==(w=null===(C=null==B?void 0:B.level)||void 0===C?void 0:C.length)&&void 0!==w?w:1)-1,o=(null!==(x=null==B?void 0:B.numerator)&&void 0!==x?x:0)/(null!==(S=null==B?void 0:B.denominator)&&void 0!==S?S:1)>=1?"x":" ",i=`${Foe.repeat(n)}- [${o}]`;let r=await pie(e,t,i);return r=r.replace(/\n?$/,"\n"),r}if(t.filter.emoji(e)){const t=e.children[0];if(rie(t)){const e=null===(E=t.props)||void 0===E?void 0:E.value;if(null==e?void 0:e.emoji)return e.emoji}return""}if(t.filter.sheet(e)){let n=await async function(e,t){var n,o,i,r,l,s;let c="";const a=e.children[0],u=null===(n=a.props)||void 0===n?void 0:n.value;if(!u)return c;const{columnTotalNumber:d,rowTotalNumber:f,cells:h}=u;if(!d||!f)return c;let p=!1;for(const e in h){if(null===(o=h[e])||void 0===o?void 0:o.merge){p=!0;break}const n=null===(r=null===(i=h[e])||void 0===i?void 0:i.state)||void 0===r?void 0:r.editor,l=null==n?void 0:n.node;if(rie(l)&&sie(l,(e=>{var n,o;if(null===(o=(n=t.filter).sheet)||void 0===o?void 0:o.call(n,e))return p=!0,!1})),p)break}if(p)return c+="```\n",c+=await nie(u,t),c+="\n```",c;const v=Symbol("token"),g=[],m=[],y="   ",b={};for(let e=0;e<f;e++){g[e]||(g[e]=["| "]);for(let n=0;n<d;n++){const o=aie(e,n),i=null==h?void 0:h[o],r=null===(l=null==i?void 0:i.state)||void 0===l?void 0:l.editor,s=null==r?void 0:r.node;let c=y;s&&!lie(s,!0)&&(c=await die(s,t,0),c=c.replace(/\n*$/,""),c=c.replace(/\n/g,"<br>"));const a=Eoe(c);(!b[n]||b[n]<a)&&(b[n]=a),m.push(c),g[e].push(v),n===d-1?g[e].push(" |\n"):g[e].push(" | ")}}const C=["| "],w=[];for(let e=0;e<d;e++){const t="-".repeat(y.length);w.push(t),C.push(v),e===d-1?C.push(" |\n"):C.push(" | ")}m.splice(d,0,...w),g.splice(1,0,C);for(let e=0;e<g.length;e++){let t=0;for(const n of g[e])if(sc(n))c+=n;else if(_e(n)){const e=m.shift();if(void 0===e){t++;continue}const n=(null!==(s=b[t])&&void 0!==s?s:0)-Eoe(e);n>=0&&(c+=e+" ".repeat(n)),t++}}return c}(e,t);return n=n.replace(/\n?$/,"\n\n"),n}if(t.filter.quote(e)){let n=await async function(e,t,n=""){let o="";for(let n=0;n<e.children.length;n++){const i=e.children[n];o+="string"==typeof i?Noe(i):await die(i,t,n),o=o.replace(/^\x20*/,"").replace(/\n*$/,"\n").replace(/(\n\x20*)/g,"\n> ")}return o=`> ${o.replace(/(>\x20*)$/,"")}`,o}(e,t);return n=n.replace(/\n?$/,"\n\n"),n}if(t.filter.link(e)){let n=await uie(T,t);const o=await(null===(D=null===(k=t.link)||void 0===k?void 0:k.source)||void 0===D?void 0:D.call(k,e));if(o){const{src:e,alt:t}=o;return n=`[${n}](${e} "${t}")`,n}return n=`[${n}](${null!==(N=null===(I=null==B?void 0:B.value)||void 0===I?void 0:I.text)&&void 0!==N?N:""})`,n}if(t.filter.code(e)){let e=await uie(T,t);return e=e.replace(/\n?$/,"\n"),e=`\`\`\`\n${e}\`\`\``,e}if(t.filter.br(e))return"\n";if(t.filter.space(e))return" ";if(t.filter.meta(e),t.filter.block(e)){let e=await uie(T,t);return e=e.replace(/\n?$/,"\n\n"),e}if(t.filter.inline(e)){let e=await uie(T,t);const n=null==L?void 0:L.fontWeight;return("bold"===n||"bolder"===n||!isNaN(Number(n))&&Number(n)>=700)&&(e=`**${e}**`),"italic"===(null==L?void 0:L.fontStyle)&&(e=`*${e}*`),"line-through"===(null==L?void 0:L.textDecoration)&&(e=`~~${e}~~`),e}return""}async function fie(e,t){var n,o,i;let r="",l=null,s=0;for(;s<e.length;){const c=e[s];if("string"!=typeof c)if(t.filter.numbered(c)){null===l&&(l=[]);let e=null===(o=null===(n=c.props)||void 0===n?void 0:n.level)||void 0===o?void 0:o.length;e||(e=0),void 0===l[e]&&(l[e]=-1),l[e]=l[e]+1,r+=await hie(c,t,l[e])}else{if(t.filter.toggle(c)){const t=[...c.children];We(null===(i=c.props)||void 0===i?void 0:i.list)&&t.push(...c.props.list),e.splice(s,1,...t);continue}r+=await hie(c,t,s)}else r+=Noe(c);r=r.replace(/(\n\x20*){2,}$/,"\n\n"),s++}return r}async function hie(e,t,n){var o,i,r,l;const{props:s,children:c}=e;if(t.filter.emoji(e)){const t=e.children[0];if(rie(t)){const e=null===(o=t.props)||void 0===o?void 0:o.value;if(null==e?void 0:e.emoji)return e.emoji}return""}if(t.filter.bulleted(e)||t.filter.numbered(e)||t.filter.checked(e)){const o=(null!==(r=null===(i=null==s?void 0:s.level)||void 0===i?void 0:i.length)&&void 0!==r?r:1)-1,l=`${Foe.repeat(o)}${n+1}.`;let c="";for(let n=0;n<e.children.length;n++){const o=e.children[n];c+="string"==typeof o?Noe(o):await hie(o,t,n),c=c.replace(/^\x20*/,"").replace(/\n*$/,"\n").replace(/(\n\x20*)/g,"\n    ")}return c=`${l} ${c.replace(/\x20*$/g,"")}`,c=c.replace(/\n?$/,"\n"),c}if(t.filter.sheet(e)){const n=null===(l=e.children[0].props)||void 0===l?void 0:l.value;if(!n)return"";return await nie(n,t)}if(t.filter.br(e))return"\n";if(t.filter.space(e))return" ";if(t.filter.block(e)){let e=await fie(c,t);return e=e.replace(/\n?$/,"\n"),e}if(t.filter.inline(e)){return await fie(c,t)}return""}async function pie(e,t,n){let o="";for(let n=0;n<e.children.length;n++){const i=e.children[n];o+="string"==typeof i?Noe(i):await die(i,t,n),o=o.replace(/^\x20*/,"").replace(/\n*$/,"\n").replace(/(\n\x20*)/g,"\n    ")}return o=`${n} ${o.replace(/\x20*$/g,"")}`,o}const{isInlineNode:vie,isMetaNode:gie}=ek;function mie(e,t){return function(e,t){var n,o;const i=[];i.links=e.links;for(const t of e)if("list"===t.type){const e=[];for(const r of t.items)"heading"===(null===(o=null===(n=r.tokens)||void 0===n?void 0:n[0])||void 0===o?void 0:o.type)?(e.length&&i.push({...t,items:e}),i.push(r.tokens[0]),e.length=0):e.push(r);e.length&&i.push({...t,items:e})}else i.push(t);return r(i);function r(e,n){if(n&&function(e){for(let t=0,n=e.length;t<n;t++)if("html"===e[t].type)return!0;return!1}(e)){let o="";return"block"===n?o=goe.parse(e):"inline"===n&&(o=goe.parseInline(e)),Sie(o,t)}const o=[];let i=!1;const a=[],u=e=>{if("string"!=typeof e){if(vie(e)||gie(e))return a.push(e),void(o.length&&(i=!0));a.length>0&&(o.push(t.block([...a])),i=!0,a.length=0),e&&o.push(e)}else a.push(...c(e))};for(const n of e){const e=n.type;let i=null;if("blockquote"===e){const e=r(n.tokens,"block");i=t.quote(e)}else if("br"===e)i=t.br([]);else if("code"===e)i=t.code([Noe(n.text)]);else if("codespan"===e)i=t.code([Noe(n.text)],void 0,{inline:!0});else if("def"===e)i=t.block([t.link([n.title],void 0,{src:n.href})]);else if("del"===e){const o=r(n.tokens,"inline");i=t.inline(o,Loe[e])}else if("em"===e){const o=r(n.tokens,"inline");i=t.inline(o,Loe[e])}else if("escape"===e)i=t.inline(c(n.text));else{if("heading"===e){u();const e=n.tokens;i=t.outline(r(e,"inline"),void 0,{depth:n.depth}),o.push(i);const l=n.raw.match(/\n+$/);if(null==l?void 0:l.length){const e=l[0];if(e.length>2){const n=Math.ceil((e.length-1)/2);for(let e=0;e<n;e++)o.push(t.block([]))}}continue}if("hr"===e)i=t.separate([n.raw]);else{if("html"===e){for(const e of Sie(n.text,t))u(e);continue}if("image"===e)i=t.image([],void 0,{src:n.href,alt:n.text});else if("link"===e){const e=r(n.tokens,"inline");i=t.link(e,void 0,{src:n.href})}else{if("list"===e){u();const{ordered:e,items:t,start:i=1}=n,r=l(t,[i],e);for(let e=0;e<r.length;e++)o.push(r[e]);continue}if("paragraph"===e){const e=n.tokens;i=t.block(r(e,"inline"))}else if("space"===e){const e=Math.floor((n.raw.length-1)/2);if(!(e<=0&&a.length)){u();for(let n=0;n<e;n++)o.push(t.block([t.inline([""])]));continue}i=t.br([])}else if("strong"===e){const o=r(n.tokens,"inline");i=t.inline(o,Loe[e])}else if("table"===e){const e={sheet:s(n)};i=t.block([t.sheet([],void 0,e)])}else if("text"===e){const e=n.tokens;i=We(e)?t.inline(r(e,"inline")):t.inline(c(n.text))}}}}null!==i&&u(i)}return i&&a.length>0?o.push(t.block(a)):o.push(...a),o}function l(e,n,o){var i;const s=[];for(const c of e){if("list_item"!==c.type){s.push(...r([c]));continue}let a=null;const u=[];function d(){if(!a)return;if(!u.length)return;const e=a(r(u,"block"));e&&s.push(e),u.length=0,a=null}a=c.task?e=>t.checked(e,void 0,{checked:c.checked,numerator:c.checked?1:0,denominator:1,level:n}):o?e=>t.numbered(e,void 0,{level:n}):e=>t.bulleted(e,void 0,{level:n});for(const h of c.tokens)if("list"!==h.type)u.push(h);else{const{items:p,ordered:v}=h;d(),s.push(...l(p,[...n,1],v))}d();const f=null!==(i=Js(n))&&void 0!==i?i:0;(n=ec(n)).push(f+1)}return s}function s(e){const n=[e.header,...e.rows],o={};for(let t=0;t<e.align.length;t++){const n=e.align[t];null!==n&&(o[t]={style:{textAlign:n}})}const i={};for(let e=0;e<n.length;e++)for(let o=0;o<n[e].length;o++){const l=n[e][o].tokens;i[`${e}.${o}`]=t.block(r(l))}return{columns:o,rows:{0:{style:{fontWeight:"bolder"}}},cells:i,rowTotalNumber:n.length,columnTotalNumber:e.header.length}}function c(e){const n=[],o=e.split("\n");for(const e of o)n.push(t.br([])),i(e);function i(e){const o=e.match(Boe);if(null===o){if(""===e.trim()&&e.length>0)for(let o=0;o<e.length;o++)n.push(t.space([]));else n.push(Noe(e));return n}let i=0;for(const r of o){const o=e.indexOf(r,i);o>i&&n.push(Noe(e.substring(i,o))),n.push(t.emoji([r])),i=o+r.length}i<e.length&&n.push(Noe(e.substring(i)))}return n.shift(),n}}(hoe.lex(e),{...Poe,...t})}async function yie(e,t){return await die(e,t,0)}const{isInlineNode:bie,isBlockNode:Cie,removeBoxSizeStyle:wie}=ek;function xie(e,t){const n=e.children.map((e=>{if(e instanceof one&&1===e.children.length){const n=e.children[0];if(rne(n))return t.block(mie(n.data,t))}const n=o(e);return sc(n)&&""===n.trim()?null:n})).filter((e=>null!==e));return i(n),n;function o(e,n,c){var a,u,d,f;if(rne(e))return e.data;if(lne(e)){const n=e.children.map((e=>{const t=o(e,Voe(e.type));return sc(t)&&""===t.trim()?null:t})).filter((e=>null!==e));return t.block(n)}if(!ine(e))return null;if("meta"===e.name||"svg"===e.name)return null;if(function(e){const t=e.attribs.style;if(!t)return;if(!t.includes("display: flex;"))return;t.includes("flex-direction: column;")&&t.includes("flex-direction: column-reverse;")||e.children.forEach((e=>{ine(e)&&!Voe(e.name)&&(e.name="span",e.attribs.style+="display: inline-block;")}))}(e),"table"===e.name){const n={sheet:l(e)};return t.sheet([],void 0,n)}const h=function(e){return"img"===e||"input"===e||"br"===e||"a"===e||Zoe(e)||$oe(e)?e:Woe.includes(e)?"div":(zoe.includes(e),"span")}(e.name),p=[];let v=!1;const g=[],m=e=>{if("string"!=typeof e){if(bie(e))return g.push(e),void(p.length&&(v=!0));g.length>0&&(p.push(t.block([...g])),v=!0,g.length=0),e&&p.push(e)}else g.push(...function(e){const n=[],o=e.split("\n");for(const e of o)n.push(t.br([])),i(e);function i(e){const o=e.match(Boe);if(null===o){if(""===e.trim()&&e.length>0)for(let o=0;o<e.length;o++)n.push(t.space([]));else n.push(Noe(e));return n}let i=0;for(const r of o){const o=e.indexOf(r,i);o>i&&n.push(Noe(e.substring(i,o))),n.push(t.emoji([r])),i=o+r.length}i<e.length&&n.push(Noe(e.substring(i)))}return n.shift(),n}(e))},y=t=>{var n;if(Loe[e.name]){const n=t.style;t.style={...Loe[e.name],...n}}const o=e.attribs.style;if(o){const e=s(o);t.style={...t.style,...e}}if(!t.style)return;(function(e){const{overflow:t,float:n,position:o,display:i}=e;return!((!t||["visible","clip"].includes(t))&&(!n||["none"].includes(n))&&(!o||!["absolute","fixed"].includes(o))&&(!i||!["inlnie-block","table","table-cell","table-caption","table-row","table-row-group","table-header-group","table-footer-group","inline-table","flow-root","flex","inline-flex","grid","inline-grid"].includes(i)))})(t.style)||i(t.children);const r=t.style.display;if(void 0!==r){if("none"===r)return null;"inline-block"!==r&&delete t.style.display}if(null===(n=t.props)||void 0===n?void 0:n.empty){const{paddingTop:e,paddingBottom:n}=t.style;(e||n)&&delete t.style.boxSizing}else delete t.style.boxSizing;"start"===t.style.textAlign?t.style.textAlign="left":"end"===t.style.textAlign&&(t.style.textAlign="right"),delete t.style.float,delete t.style.position};if($oe(h)){const t=r(e,[...null!=c?c:[],1],"ol"===h);return y(t),t}for(const t of e.children){const e=o(t,null!=n?n:Voe(h),c);null!==e&&m(e)}if(v&&g.length>0?p.push(t.block(g)):p.push(...g),"span"===h){const e=t.inline(p);return y(e),e}if("br"===h){const e=t.br([]);return y(e),e}if("a"===h){const n=t.link(p,void 0,{src:e.attribs.href});return y(n),n}if("img"===h){const{src:n,alt:o,width:i,height:r,style:l}=e.attribs,c=s(l);if(void 0!==i){const e=parseInt(String(i));Ic(e)?c.width=i:c.width=e}if(void 0!==r){const e=parseInt(String(r));Ic(e)?c.height=r:c.height=e}const h={src:n,alt:o};Dc(c.width)&&(h.value=null!==(a=h.value)&&void 0!==a?a:{},h.value.width=c.width),Dc(c.height)&&(h.value=null!==(u=h.value)&&void 0!==u?u:{},h.value.height=c.height);const v=t.image(p,void 0,h),g=v.children[0];return y(g),null===(d=g.style)||void 0===d||delete d.width,null===(f=g.style)||void 0===f||delete f.height,v}if(n){const e=t.inline(p);return y(e),e}if("div"===h){const e=t.block(p);return p.length||(e.props={empty:!0}),y(e),e}if(Zoe(h)){const e=function(e){return"h1"===e?1:"h2"===e?2:"h3"===e?3:"h4"===e?4:"h5"===e?5:6}(h),n=t.outline(p,void 0,{depth:e});return y(n),n}if("li"===h){const e=t.block(p);return y(e),e}return null}function i(e){for(let t=1;t<e.length;t++){const n=e[t-1],o=e[t];if(sc(n)||sc(o))continue;if(!n.style||!o.style)continue;const i=n.style.marginBottom,r=o.style.marginTop;if(!i||!r)continue;const l=Math.max(i,r)/2;n.style.marginBottom=l,o.style.marginTop=l}}function r(e,n,i){var l;const s=[];for(const c of e.children){const e=c.name;if("ul"===e){const e=r(c,[...n,1],!1);s.push(e)}else if("ol"===e){const e=r(c,[...n,1],!0);s.push(e)}else{if("li"!==e){const e=o(c);null!==e&&s.push(e);continue}if(i){const e=o(c,!1,n);if(null===e)continue;for(let o of e.children){if("string"==typeof o){s.push(t.numbered([o],e.style,{level:n}));continue}let i=o.children[0];for(;i&&"string"!=typeof i&&Cie(i);)o=i,i=o.children[0];"div"!==o.type?s.push(o):s.push(t.numbered(o.children,e.style,{level:n}))}}else{const e=o(c,!1,n);if(null===e)continue;for(let o of e.children){if("string"==typeof o){s.push(t.bulleted([o],e.style,{level:n}));continue}let i=o.children[0];for(;i&&"string"!=typeof i&&Cie(i);)o=i,i=o.children[0];"div"!==o.type?s.push(o):s.push(t.bulleted(o.children,e.style,{level:n}))}}}const a=null!==(l=Js(n))&&void 0!==l?l:0;(n=ec(n)).push(a+1)}return t.block(s)}function l(e){if(ine(e)){const t=e.children.reduce(((e,t)=>{if(ine(t))if("colgroup"===t.name)for(let n=0;n<t.children.length;n++){const o=t.children[n];ine(o)&&e.push(o)}else if("col"===t.name)e.push(t);else if("tbody"===t.name){const n=t.children[0];if(n)for(let t=0;t<n.children.length;t++){const o=n.children[t];ine(o)&&e.push(o)}}return e}),[]),n=e.children.reduce(((e,t)=>{if(ine(t))if("tbody"===t.name)for(let n=0;n<t.children.length;n++){const o=t.children[n];ine(o)&&e.push(o)}else"tr"===t.name&&e.push(t);return e}),[]),i={};for(let e=0;e<t.length;e++){const n=t[e].attribs,o={};if(n.style&&(Object.assign(o,s(n.style)),o.borderWidth=0,o.width)){const e=parseInt(String(o.width));Ic(e)||(o.width=e)}const r=parseInt(n.width);Ic(r)||(o.width=r),i[e]={style:wie(o)}}const r={};for(let e=0;e<n.length;e++){const t=n[e].attribs,o={};if(t.style&&(Object.assign(o,s(t.style)),o.borderWidth=0,o.height)){const e=parseInt(String(o.height));Ic(e)||(o.height=e)}const i=parseInt(t.height);Ic(i)||(o.height=i),r[e]={style:wie(o)}}const l={};for(let e=0;e<n.length;e++)for(let t=0;t<n[e].children.length;t++){const i=o(n[e].children[t]);i.style&&(i.style.borderWidth=0,delete i.style.width,i.style=wie(i.style)),l[`${e}.${t}`]=i}return{columns:i,rows:r,cells:l,rowTotalNumber:n.length,columnTotalNumber:t.length}}return null}function s(e){const t={};return null==e||e.split(";").forEach((e=>{const n=e.split(":");if(2!==n.length)return;const o=n[0].trim().replace(/-\D/g,(e=>e.charAt(1).toUpperCase())),i=n[1].trim();if(!i.startsWith("var("))if("margin"===o){const e=function(e){var t,n,o,i;const r=e.split(" ").map(c),l={marginTop:r[0],marginRight:null!==(t=r[1])&&void 0!==t?t:r[0],marginBottom:null!==(n=r[2])&&void 0!==n?n:r[0],marginLeft:null!==(i=null!==(o=r[3])&&void 0!==o?o:r[1])&&void 0!==i?i:r[0]};for(const e in l){void 0===l[e]&&delete l[e]}return l}(i);Object.assign(t,e)}else if("padding"===o){const e=function(e){var t,n,o,i;const r=e.split(" ").map(c),l={paddingTop:r[0],paddingRight:null!==(t=r[1])&&void 0!==t?t:r[0],paddingBottom:null!==(n=r[2])&&void 0!==n?n:r[0],paddingLeft:null!==(i=null!==(o=r[3])&&void 0!==o?o:r[1])&&void 0!==i?i:r[0]};for(const e in l){void 0===l[e]&&delete l[e]}return l}(i);Object.assign(t,e)}else t[o]=c(i)})),t}function c(e){return e.endsWith(" !important")&&(e=e.replace(" !important","")),e.endsWith("em")||e.endsWith("rem")?16*parseFloat(e):e.endsWith("px")?parseFloat(e):e}}function Sie(e,t){const n=function(e,t){const n=new une(void 0,t);return new qte(n,t).end(e),n.root}(e);return xie(n,{...Poe,...t})}function Eie(e){return koe(e)}const{DIV_NODE:kie,createMetaNode:Die,createBlockNode:Iie,isNode:Nie,isBlockNode:Lie,insertNode:Bie,isNodeEqual:Tie,isEditNode:Aie,isBlockNodeX:Mie,isReferenceNode:Oie,isDecorateNode:Rie,traverseNode:Pie,sliceBlockPath:Fie,getNodeLength:Hie,removeBoxSizeStyle:_ie,createInlineNode:jie,transformEditNodeToNode:Wie}=ek;async function zie(e,t,n){var o;if(void 0===(null===(o=e.stater.get().file)||void 0===o?void 0:o.currentPageId))return;const{imperator:i,context:r}=e.provider();async function l(o){const i=zze(o,{image:[]});if(null===i)return void s(o);const{node:r,sheet:l}=i.data;i.command===y$.PASTE_LINK?await Vie(e,r,t,n):i.command===y$.PASTE_BACK?await $ie(e,r,t,n):i.command===y$.PASTE_SHEET?await async function(e,t,n,o){var i;const r=e.stater.get(),{file:l}=r,s=null==l?void 0:l.currentPageId;if(void 0===s)return;const{imperator:c,dispatch:a,context:{editor:u}}=e.provider();void 0===o&&(o=c);const d=[],f=e=>{},h=e=>{d.push(e)},p=nke(t,u,(e=>{const{file:t}=r,n=null==t?void 0:t.currentPageId;void 0!==n&&t4(e.node,[],n,f,h,!0,!1)})),v={display:"inline-block",lineHeight:1.2},g=Die([vce({value:p,row:p.rowEndIndex,col:p.columnEndIndex})],v);null===(i=null==o?void 0:o.current)||void 0===i||i.commit(Bie(g)),d.length&&n(...d)}(e,l,t,n):i.command===y$.PASTE_NODE&&await Vie(e,r,t,n)}async function s(e){var o;const i=mie(e,Dze({image:[]},r.editor.style));if(1!==i.length||Mie(i[0]))t(J9(i),p9(),b4());else{const e=jie(i[0].children);null===(o=null==n?void 0:n.current)||void 0===o||o.commit(Bie(e))}}if(void 0===n&&(n=i),Uf)return t(u9(!0)),void o_(((e,n)=>{t(u9(!1)),n["text/html"]?l(n["text/html"]):n["text/plain"]&&s(n["text/plain"])}));try{const e=await navigator.clipboard.read(),t="text/html",n="text/plain";for(const o of e)if(o.types.includes(t)){const e=await o.getType(t);l(await e.text())}else if(o.types.includes(n)){const e=await o.getType(n);s(await e.text())}}catch(e){console.error(e)}}async function Vie(e,t,n,o){var i,r,l,s,c,a;const u=e.stater.get(),{file:d}=u,f=null==d?void 0:d.currentPageId;if(void 0===f)return;const{imperator:h}=e.provider();void 0===o&&(o=h);const p=[];let v=t;for(Rie(v)&&(v=Iie([v]));Mie(v)&&1===Hie(v);){const e=v.children[0];if(Rie(e))break;if(!Nie(e))break;v={...e,style:{...v.style,...e.style}}}if(Aie(v)&&(v=Wie(v)),!Sc(v.style)){v={...v,style:_ie(v.style)};for(const e of v.children)Nie(e)&&(e.style={...v.style,...e.style})}const g={};let m=!1;IPe(v,(e=>{var t,n,o,i;Gde(e)&&(m=!0),(null===(t=e.style)||void 0===t?void 0:t.lineHeight)&&delete e.style.lineHeight,Lie(e)&&(null===(n=e.style)||void 0===n?void 0:n.overflow)&&delete e.style.overflow;const r=null===(o=e.props)||void 0===o?void 0:o.id,l=null===(i=e.props)||void 0===i?void 0:i.uid;(r||l)&&(_he(e)||Lae(e)||Nae(e)?g[l]=e:(zve(e)||Vve(e))&&(g[r]=e))}),!0);for(const t in g){const a=g[t];if(!a.props)continue;if(Lae(a)){const t=null===(r=null===(i=a.props)||void 0===i?void 0:i.value)||void 0===r?void 0:r.pageId;t&&await e.safty(t)}else Nae(a)&&await $ie(e,a,n,o,!1);a.props.uid&&(a.props.uid=pRe());const d=zve(a)||Vve(a),f=a.children[0];if(Oie(f)){if(!f.props)continue;const e=f.props.id;if(!e)continue;let t=null===(s=null===(l=u.store)||void 0===l?void 0:l.reference)||void 0===s?void 0:s[e];if(void 0===t&&(t=await HY(e),t&&p.push(lq({[e]:t}))),void 0===t)continue;if(d){let e=!1;if(Pie(f,(t=>{var n,o;if(Oie(t)){if((null===(n=t.props)||void 0===n?void 0:n.uid)===(null===(o=f.props)||void 0===o?void 0:o.uid))return;e=!0}})),e){const e=pRe();f.props.id=e}}null===(c=f.props)||void 0===c||delete c.uid;const n={...t.data};if(!Tie(f,n)){const e=pRe();d||(a.props.id=e),f.props.id=e}f.props.uid=pRe()}}if(t4(v,[],f,(e=>{}),(e=>{p.push(e)}),!0,!1),Mie(v))p.push(J9(v.children),p9(),b4()),m&&p.push(P9()),p.length&&n(...p);else{const e=v.children.length;if(!e)return;let t;if(1===e){const e=v.children[0];t=sc(e)?jie([e]):e}else t=jie(v.children);null===(a=o.current)||void 0===a||a.commit(Bie(t))}}async function $ie(e,t,n,o,i){var r,l,s,c,a,u,d;const f=e.stater.get(),{file:h}=f,p=null==h?void 0:h.currentPageId;if(void 0===p)return;const{imperator:v}=e.provider();void 0===o&&(o=v);const g=[];let m=Wie(t);if(!Nae(m))return;const y=m.children[0];if(!Oie(y))return;const b=null===(r=y.props)||void 0===r?void 0:r.back;if(!b)return;const C=null===(l=y.props)||void 0===l?void 0:l.id;if(!C)return;let w=null===(c=null===(s=f.store)||void 0===s?void 0:s.reference)||void 0===c?void 0:c[C];if(void 0===w&&(w=await HY(C),w&&g.push(lq({[C]:w}))),w){const e={...w.data},t=null===(a=y.props)||void 0===a?void 0:a.uid;if(e.props={...e.props,uid:t},!Tie(y,e))return m.type=kie,delete m.props,m.children=y.children,void(!1!==i&&(null===(u=null==o?void 0:o.current)||void 0===u||u.commit(Bie(m))))}const x={text:OWe(y),pageId:p,id:C};for(const t in b){const n=b[t];await e.safty(n),g.push(vue(n,t,x))}!1!==i&&(null===(d=null==o?void 0:o.current)||void 0===d||d.commit(Bie(m))),g.length&&n(...g)}const{isEmptyNode:Zie,isNode:Uie}=ek,{getBranchByPath:qie}=xT,Yie=(e,t,n)=>n=>{var o,i;const r=null===(o=e.bootstrap)||void 0===o?void 0:o.type;if(!r)return n;const l=null===(i=n.file)||void 0===i?void 0:i.tree;if(void 0===l)return n;const s="page"===t.type||"root"===t.type;if("page"===r)if(s)n=Kie(e,t)(n);else{const o=J_e(l,t),i=rje(l,t);i&&(n=Kie(e,i,null==o?void 0:o.id)(n))}else if("outline"===r)if(s)n=Gie(e,t)(n);else{const o=J_e(l,t),i=rje(l,t);i&&(n=Gie(e,i,null==o?void 0:o.id)(n))}return n},Kie=(e,t,n)=>o=>{var i,r,l,s,c,a,u,d;if("outline"===t.type)return o;const{id:f}=t,h=null===(r=null===(i=o.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[f];if(void 0===h)return o;const p=null===(s=null===(l=e.bootstrap)||void 0===l?void 0:l.file)||void 0===s?void 0:s.currentPageId;if(!p)return o;const v=null===(a=null===(c=e.editor)||void 0===c?void 0:c[p])||void 0===a?void 0:a.data.children[0];if(!Uie(v))return o;const g=[],m=[],y=[],{path:b,children:C}=t,w=[...null!=b?b:[]];if((null==C?void 0:C.length)&&w.push(C.length),o4(v,w,f,e,(e=>{g.push(e)}),(e=>{m.push(e)}),(e=>{y.push(e)})),n){const e=_ve(h.data,n);if(Uie(e)){const t=h.data.children.indexOf(e);h.data.children.splice(t,0,v)}}else{const e=Js(h.data.children),t=h.data.children.length;Zie(e,!0)&&t>1&&h.data.children.pop(),h.data.children.push(v)}g.forEach((e=>{e({editor:h})})),o=hq(f,h)(o),o=Z3(t)(o),m.forEach((e=>{o=e(o)})),y.forEach((e=>{o=e(o)})),(null===(u=o.file)||void 0===u?void 0:u.currentPageId)===f&&(o=P9()(o),delete(o=V4(f)(o)).editor.ureference),o=b6()(o);const x=null===(d=v.props)||void 0===d?void 0:d.id;return x&&(o=E6(x)(o)),o},Gie=(e,t,n)=>o=>{var i,r,l,s;if("outline"===t.type)return o;const{id:c}=t,a=null===(r=null===(i=o.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[c];if(void 0===a)return o;const u=null===(l=e.bootstrap)||void 0===l?void 0:l.nodes;if(!(null==u?void 0:u.length))return o;const d=[],f=[],h=[],p=e=>{d.push(e)},v=e=>{f.push(e)},g=e=>{h.push(e)},{path:m,children:y}=t,b=[...null!=m?m:[]];if((null==y?void 0:y.length)&&b.push(y.length),u.forEach((t=>{o4(t,b,c,e,p,v,g)})),n){const e=_ve(a.data,n);if(Uie(e)){const t=a.data.children.indexOf(e);a.data.children.splice(t,0,...u)}}else{const e=Js(a.data.children),t=a.data.children.length;Zie(e,!0)&&t>1&&a.data.children.pop(),a.data.children.push(...u)}return d.forEach((e=>{e({editor:a})})),o=hq(c,a)(o),o=Z3(t)(o),f.forEach((e=>{o=e(o)})),h.forEach((e=>{o=e(o)})),(null===(s=o.file)||void 0===s?void 0:s.currentPageId)===c&&(o=P9()(o),o=V4(c)(o)),o=b6()(o)},Xie=(e,t,n,o)=>i=>{var r,l,s,c,a,u,d,f,h,p,v,g;const m="page"===t.type||"root"===t.type;m&&(n=t.id);const y=null===(l=null===(r=i.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[n];if(void 0===y)return i;const b=null===(s=i.file)||void 0===s?void 0:s.tree;if(void 0===b)return i;const C=e.children[0];if(!Uie(C))return i;const w=null===(c=C.props)||void 0===c?void 0:c.id;if(!w)return i;const{clientWidth:x,clientHeight:S}=i.editor,E=vFe({data:{...e,children:[C]},clientWidth:x,clientHeight:S});i=cq(w,E)(i);const{path:k}=t;let D=null;if(!m&&(D=J_e(b,t),D)){const e=_ve(y.data,D.id);if(Uie(e)){const t=y.data.children.indexOf(e);y.data.children.splice(t,0,C)}}if(m||!D){const e=y.data.children.length;let t=!1;try{for(let n=0;n<e;n++){if(IPe(y.data.children[n],(e=>{var n,o,i,r;if(Lae(e)){const l=null===(o=null===(n=e.props)||void 0===n?void 0:n.value)||void 0===o?void 0:o.text;if(!l)return;const s=decodeURIComponent(l).split(/\+|\s+/);let c=s.length-1,a="";for(;c>0&&(a=null===(i=s[c])||void 0===i?void 0:i.split(".")[0],!a||!TT(a));)c--;const u=OWe(C),d=u.split(/\+|\s+/);let f=d.length-1,h="";for(;f>0&&(h=null===(r=d[f])||void 0===r?void 0:r.split(".")[0],!h||!TT(h));)f--;if(a&&h&&TT(a)&&a===h)return t=!0,IPe(C,(e=>{Uie(e)&&e.children[0]===u&&(e.children[0]=d.slice(0,f).join(""))})),!0}})),t){y.data.children[n]=C;break}}}catch(e){}if(!t){const t=Js(y.data.children);Zie(t,!0)&&e>1&&y.data.children.pop(),y.data.children.push(C)}}const I=[],N=[];t4(C,null!=k?k:[],n,(e=>{I.push(e)}),(e=>{N.push(e)}),!1,!1),I.forEach((e=>{e({editor:y})})),i=hq(n,y)(i),i=Z3(t)(i),N.forEach((e=>{i=e(i)}));const L=null===(a=C.props)||void 0===a?void 0:a.id;if(L){w!==L&&(null===(d=null===(u=i.store)||void 0===u?void 0:u.editor)||void 0===d||delete d[w]);const t=null===(h=null===(f=i.store)||void 0===f?void 0:f.editor)||void 0===h?void 0:h[L];t&&(t.data=Xu(e),i=hq(L,t)(i))}if(k){const e=qie(b,k),t=null===(p=null==e?void 0:e.children)||void 0===p?void 0:p.findIndex((e=>e.id===L));if(void 0!==t&&-1!==t){const n=null===(v=null==e?void 0:e.children)||void 0===v?void 0:v[t];n&&(i=Z3(n)(i),n.expand!==o&&(i=u6(n)(i)))}}return(null===(g=i.file)||void 0===g?void 0:g.currentPageId)===n&&(i=P9()(i),i=V4(n)(i)),i=b6()(i),i=E6(L)(i)},{isEmptyNode:Jie}=ek,Qie=(e,t,n)=>o=>{var i,r,l,s,c,a;const u=null===(i=o.file)||void 0===i?void 0:i.tree;if(!u)return o;if(1===(null===(r=u[0].children)||void 0===r?void 0:r.length)){const t=u[0].children[0],n=t.id,i=null===(s=null===(l=o.store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[n];i&&Jie(i.data,!0)&&(o=zq(n)(o),o=H4(e,t)(o))}if(null===(c=u[0].children)||void 0===c?void 0:c.length){const e=u[0].children[0].id;o=Kie(t,u[0],e)(o)}else o=Kie(t,u[0])(o);const d=null===(a=u[0].children)||void 0===a?void 0:a[0];return(null==d?void 0:d.id)&&(o=A6()(o),o=X3(e,d.id)(o),o=_3(d)(o),o=E6(d.id)(o),!1===n&&d&&(o=u6(d)(o),o=Nq(d)(o))),o},ere=(e,t,n)=>n=>{var o,i;const r=null===(i=null===(o=t.bootstrap)||void 0===o?void 0:o.file)||void 0===i?void 0:i.currentPageId;return r?(n=iq(t)(n),n=X3(e,r)(n)):n},tre=(e,t,n)=>n=>{var o,i;const r=null===(i=null===(o=t.bootstrap)||void 0===o?void 0:o.file)||void 0===i?void 0:i.currentPageId;if(!r||!n.file)return n;return n.file.tree=[{id:r,path:[0],type:"root"}],n=iq(t)(n),function e(t){var o,i;const r=null===(i=null===(o=n.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[t];if(r){n=Z3(t)(n);for(const n in r.uids)n===r.uids[n]&&n!==t&&e(n)}}(r),n=b6()(n),n=X3(e,r)(n)},nre=(e,t)=>n=>{var o;if(!n.file)return n;const i=null!==(o=n.file.tree)&&void 0!==o?o:[],r=qZe(),l=UZe(e,AK.note,[r]);let s=0;if(t)for(;s<i.length&&i[s].id!==t.id;)s++;else s=i.length-1;return i.splice(s+1,0,l),n.file.tree=i,n.file.currentPageId=r.id,n=y6([],s+1)(n),n=b6()(n),n=O4(l)(n),t&&(n=_3(r)(n),n=A4()(n),n=Q9()(n)),n=Nq(l,void 0,!0)(n)};async function ore(e,t,n,o){var i,r;const{dispatch:l}=e;for(const e in t.assets){if(await HY(e))continue;const n=t.assets[e].replace(/^data:([^,]+),/,"");let o=n;"undefined"==typeof WebPro&&(o=KT(n)),await yF(e,o)}if(t.reference){const n=e.stater.get(),o=Xs(Object.keys(t.reference),Object.keys(null!==(r=null===(i=n.store)||void 0===i?void 0:i.reference)&&void 0!==r?r:{})),s=await FY(o);Sc(s)||l(lq(s))}o&&await e.safty(o),"outline"!==n.type&&await e.safty(n.id),l(Yie(t,n))}async function ire(e,t,n,o){var i,r,l,s;const c=await Y2();if(c){for(const e in c.assets){if(await HY(e))continue;const t=c.assets[e].replace(/^data:([^,]+),/,"");let n=t;"undefined"==typeof WebPro&&(n=KT(t)),await yF(e,n)}const a=n.stater.get(),u=null===(r=null===(i=a.file)||void 0===i?void 0:i.tree[0])||void 0===r?void 0:r.id;if(!u)return;if(await n.safty(u),c.reference){const e=Xs(Object.keys(c.reference),Object.keys(null!==(s=null===(l=a.store)||void 0===l?void 0:l.reference)&&void 0!==s?s:{})),n=await FY(e);Sc(n)||t(lq(n))}const d=[Qie(e,c,o)];!1!==o&&d.push(rre(e)),t(...d)}}const rre=e=>t=>{var n,o,i,r;const l=null===(n=t.file)||void 0===n?void 0:n.tree;if(!l)return t;const s=null===(r=null===(i=null===(o=l[0].children)||void 0===o?void 0:o[0])||void 0===i?void 0:i.children)||void 0===r?void 0:r[0];return(null==s?void 0:s.id)&&(t=A6()(t),t=X3(e,s.id)(t),t=_3(s)(t)),t},lre=e=>t=>(t.modal=e,t),sre=()=>e=>(delete e.modal,e);async function cre(e,t,n,o,i){var r,l,s,c;if(!e)return;for(const t in e.assets){if(await HY(t))continue;const n=e.assets[t].replace(/^data:([^,]+),/,"");let o=n;"undefined"==typeof WebPro&&(o=KT(n)),await yF(t,o)}const a=o.stater.get(),u=null===(l=null===(r=a.file)||void 0===r?void 0:r.tree[0])||void 0===l?void 0:l.id;if(u){if(await o.safty(u),e.reference){const t=Xs(Object.keys(e.reference),Object.keys(null!==(c=null===(s=a.store)||void 0===s?void 0:s.reference)&&void 0!==c?c:{})),o=await FY(t);Sc(o)||n(lq(o))}n(Qie(t,e,i))}}async function are(e,t,n,o){return cre(await G2(),e,t,n,o)}async function ure(e,t,n,o){return cre(await J2(),e,t,n,o)}async function dre(e,t,n,o){return cre(await X2(),e,t,n,o)}const fre=e=>t=>(t.bootstrap=e,t),hre=e=>t=>(t.guide=e,t),pre=()=>e=>{var t;return e.guide=null!==(t=s$e())&&void 0!==t?t:0,l$e(e.guide),e},{sortSelection:vre,getEditNodeByPath:gre,isEditNode:mre,isCollapsed:yre,isPathEquals:bre,sliceBlockPath:Cre,setSelectionReflow:wre,createDecorateBlockNode:xre,decorateBlockNode:Sre,iterateBlockNode:Ere,insertNode:kre,createMetaNode:Dre,createInlineNode:Ire,moveForward:Nre}=ek,Lre=e=>t=>{var n;const{node:o,selection:i}=t;if(!i)return t;const{before:r,after:l}=vre(i,!1),s=NUe(o,i);if(null===s)return t;const{path:c,offset:a}=s,u=gre(o,c);if(!sc(u))return t;const d=u.slice(0,a);if(!/^#+$/.test(d))return t;const f=d.length;if(f>6)return t;const h=gre(o,ec(c));if(!mre(h))return t;const p=null!==(n=Js(c))&&void 0!==n?n:0;h.children[p]=u.slice(a),yre(i)?t.selection={anchor:{path:[...c],offset:0},focus:{path:[...c],offset:0}}:(bre(r.path,l.path)&&(l.path=[...c],l.offset-=r.offset),r.path=c,r.offset=0);const v={1:aae.H1,2:aae.H2,3:aae.H3,4:aae.H4,5:aae.H5,6:aae.H6};return t=wme(e,v[f])(t)},Bre=e=>e=>{var t;const{node:n,selection:o}=e;if(!o)return e;const{before:i,after:r}=vre(o,!1),l=NUe(n,o);if(null===l)return e;const{path:s,offset:c}=l,a=gre(n,s);if(!sc(a))return e;const u=a.slice(0,c);if(">"!==u&&"》"!==u)return e;const d=gre(n,ec(s));if(!mre(d))return e;const f=null!==(t=Js(s))&&void 0!==t?t:0;d.children[f]=a.slice(c),yre(o)?e.selection={anchor:{path:[...s],offset:0},focus:{path:[...s],offset:0}}:(bre(i.path,r.path)&&(r.path=[...s],r.offset-=i.offset),i.path=s,i.offset=0);const h=xre({type:cfe,subclass:cfe},[],{paddingTop:sfe,paddingBottom:sfe});return e=Sre(h)(e)},Tre=e=>t=>{var n,o,i;const{node:r,selection:l}=t;if(!l)return t;const{before:s,after:c}=vre(l,!1),a=NUe(r,l);if(null===a)return t;const{path:u,offset:d}=a,f=gre(r,u);if(!sc(f))return t;const h=f.slice(0,d),p=gre(r,ec(u));if(!mre(p))return t;const v=null!==(n=Js(u))&&void 0!==n?n:0;p.children[v]=f.slice(d),yre(l)?t.selection={anchor:{path:[...u],offset:0},focus:{path:[...u],offset:0}}:(bre(s.path,c.path)&&(c.path=[...u],c.offset-=s.offset),s.path=u,s.offset=0);const{calcIterateSelections:g,decorateState:m,isDecorateListNodeSelection:y,isDecorateListNode:b,SubClass:C}=Hye,w=e.editor.style;if(h.match(/^(\d+)\./)){const e=xre({type:YBe,subclass:C.ONE,id:pRe(),offset:Number(null!==(i=null===(o=h.match(/^(\d+)\./))||void 0===o?void 0:o[1])&&void 0!==i?i:1)});t=Sre(e,!0)(t)}else if("*"===h||"-"===h){const e=xre({type:vBe,subclass:C.ONE});t=Sre(e,!0)(t)}else{if("+"===h)return t=rEe(e,C.ONE,"outer")(t);if("[]"===h||"【】"===h){const e=Cre(t.node,u),n=gre(t.node,e);if(!b(n,vBe)&&!b(n,YBe))return t;const o=xre({type:oTe,subclass:C.ONE});t=Sre(o,!0)(t)}}return g(t=wre(!0)(t)).forEach((n=>{t=Ere((n=>{m(t,n,w),y(e,uae)&&Eme(t,t.node,w)}),n)(t)})),"[]"!==h&&"【】"!==h||(t=PTe()(t)),t},Are=e=>e=>{var t;const{node:n,selection:o}=e;if(!o)return e;const{before:i,after:r}=vre(o,!1),l=NUe(n,o);if(null===l)return e;const{path:s,offset:c}=l,a=gre(n,s);if(!sc(a))return e;const u=a.slice(0,c);if("---"!==u&&"***"!==u)return e;const d=gre(n,ec(s));if(!mre(d))return e;const f=null!==(t=Js(s))&&void 0!==t?t:0;d.children[f]=a.slice(c),yre(o)?e.selection={anchor:{path:[...s],offset:0},focus:{path:[...s],offset:0}}:(bre(i.path,r.path)&&(r.path=[...s],r.offset-=i.offset),i.path=s,i.offset=0);const h=AFe(e,s),p=Dre([Lfe({value:{width:h}})],{display:"inline-block",verticalAlign:"bottom"});return e=kre(p)(e)},Mre=(e,t,n)=>o=>{var i,r,l,s;const{node:c,selection:a}=o;if(!a)return o;const{before:u,after:d}=vre(a,!1),f=NUe(c,a,!0);if(null===f)return o;const{path:h,offset:p}=f,v=gre(c,h);if(!sc(v))return o;const g=v.slice(0,p).match(e);if(!g)return o;const m=gre(c,ec(h));if(!mre(m))return o;const y=null!==(i=Js(h))&&void 0!==i?i:0,b=`${v.slice(0,g.index)}${v.slice(p)}`;m.children[y]=b,""===b&&m.children.push(""),yre(a)?o.selection={anchor:{path:[...h],offset:null!==(r=g.index)&&void 0!==r?r:0},focus:{path:[...h],offset:null!==(l=g.index)&&void 0!==l?l:0}}:(bre(u.path,d.path)&&(d.path=[...h],d.offset-=u.offset),u.path=h,u.offset=null!==(s=g.index)&&void 0!==s?s:0);const C=Ire([g[1]],t,n);o=kre(C)(o);const w=Ire([""]),x=ts((o=kre(w)(o)).selection);if((o=Nre()(o)).selection&&yre(o.selection)){const{focus:e,anchor:t}=o.selection;e.offset>0&&!Ec(null==x?void 0:x.focus.path,e.path)&&e.offset--,t.offset>0&&!Ec(null==x?void 0:x.anchor.path,t.path)&&t.offset--}return o},Ore=e=>e=>e=Mre(/\*\*(.*?)\*\*$/,{fontWeight:"bold"})(e),Rre=e=>e=>e=Mre(/\*(.*?)\*$/,{fontStyle:"italic"})(e),Pre=e=>e=>e=Mre(/\*\*\*(.*?)\*\*\*$/,{fontStyle:"italic",fontWeight:"bold"})(e),Fre=e=>e=>e=Mre(/~~(.*?)~~$/,{textDecorationLine:"line-through"},{underline:null,lineThrough:!0})(e),Hre=e=>e=>e=Mre(/~(.*?)~$/,{textDecorationLine:"underline"},{underline:!0,lineThrough:null})(e),_re=()=>e=>{const{store:t,undoredo:n,file:o}=e;if(!t||!n||!o)return e;const{editor:i,reference:r,catalog:l}=t;if(!i)return e;const s=Object.keys(i).sort(((e,t)=>{var n,o;const r=null!==(n=i[e].readTime)&&void 0!==n?n:0;return(null!==(o=i[t].readTime)&&void 0!==o?o:0)-r})),c=s.slice(0,10),a=[];for(const e of c){const{uids:t}=i[e];t&&a.push(...Zc(Object.values(t)))}const u=s.slice(10),d=[];for(const e of u){const{uids:t}=i[e];t&&d.push(...Zc(Object.values(t))),delete i[e],delete n[e],null==l||delete l[e]}const f=_c(d,a);for(const e of f)null==r||delete r[e];return e},jre=()=>e=>{if(e.editor.data=Xu(e.editor.data),e.editor.node=Xu(e.editor.node),e.file){const{tree:t,branch:n}=e.file;t&&(e.file.tree=Xu(t)),n&&(e.file.branch=Xu(n)),e.file=Xu(e.file)}if(e.store){const{reference:t,catalog:n,editor:o}=e.store;if(t&&(e.store.reference=Xu(t)),n){for(const t in n)e.store.catalog[t]=Xu(n[t]);e.store.catalog=Xu(n)}if(o){for(const t in o)e.store.editor[t]=Xu(o[t]);e.store.editor=Xu(o)}e.store=Xu(e.store)}if(e.undoredo){for(const t in e.undoredo){const n=e.undoredo[t];for(let o=0;o<n.stack.length;o++)e.undoredo[t].stack[o]=Xu(n.stack[o]);e.undoredo[t].stack=Xu(n.stack),e.undoredo[t]=Xu(n)}e.undoredo=Xu(e.undoredo)}return e},Wre=(...e)=>t=>{var n,o;const i=null===(n=t.file)||void 0===n?void 0:n.tree;if(!(null==i?void 0:i.length)){for(const n of e)t=n(t);return t}t.file.tree=Jl(Pu(i)&&null!==(o=Wu(i))&&void 0!==o?o:i);for(const n of e)t=n(t);return t.file.tree=Xu(t.file.tree),t},{getNavigateUid:zre}=n2,Vre=e=>t=>(e?(t=Zre()(t)).webdav.visible=e:t.webdav&&(t.webdav.visible=!1),t),$re=e=>t=>t.webdav?(e?t.webdav.prevent=!0:delete t.webdav.prevent,t):t,Zre=e=>t=>(t.webdav=Lqe(t.file,e),t),Ure=e=>t=>t.webdav?(t.webdav.list.forEach(((n,o)=>{var i;if(n.id===e.id){n.usernameInvisible=!n.usernameInvisible;const o=null===(i=e.selected)||void 0===i?void 0:i.id;o&&(t=a8(o,e.id,{usernameInvisible:n.usernameInvisible})(t))}})),t):t,qre=e=>t=>t.webdav?(t.webdav.list.forEach(((n,o)=>{var i;if(n.id===e.id){n.passwordInvisible=!n.passwordInvisible;const o=null===(i=e.selected)||void 0===i?void 0:i.id;o&&(t=a8(o,e.id,{passwordInvisible:n.passwordInvisible})(t))}})),t):t,Yre=e=>t=>t.webdav?(t.webdav.list.forEach(((t,n)=>{t.id===(null==e?void 0:e.id)?t.selectorVisible=!t.selectorVisible:t.selectorVisible=!1})),t):t,Kre=e=>t=>t.webdav?(t.webdav.list.forEach(((t,n)=>{t.id===(null==e?void 0:e.id)?t.modeVisible=!t.modeVisible:t.modeVisible=!1})),t):t,Gre=e=>t=>{if(!t.webdav)return t;e||(e=VUe(t.file));const n=t.webdav.list.findIndex((t=>{var n,o;return(null===(n=t.selected)||void 0===n?void 0:n.id)===(null===(o=null==e?void 0:e.selected)||void 0===o?void 0:o.id)}));return-1===n?t.webdav.list.push(e):t.webdav.list[n]=e,t},Xre=(e,t)=>n=>n.webdav?(n.webdav.list=n.webdav.list.filter(((t,n)=>t.id!==e.id)),0!==n.webdav.list.length||t||(n=Gre()(n)),n):n,Jre=e=>t=>{if(!t.webdav)return t;const n=t.webdav.list.findIndex((t=>t.id===e.id)),o=$Ue(e);return t.webdav.list.splice(n+1,0,o),t},Qre=e=>t=>t.webdav?(t.webdav.list=t.webdav.list.filter(((t,n)=>{var o,i;return t.id!==e.id||(null===(o=t.selected)||void 0===o?void 0:o.id)!==(null===(i=e.selected)||void 0===i?void 0:i.id)})),t):t,ele=(e,t)=>n=>n.webdav?(n.webdav.list.forEach(((n,o)=>{var i,r;(null===(i=n.selected)||void 0===i?void 0:i.id)===(null===(r=e.selected)||void 0===r?void 0:r.id)&&(n.id===e.id?n.bind=t:n.bind=!1)})),n):n,tle=(e,t)=>n=>n.webdav?(n.webdav.list.forEach(((n,o)=>{n.id===e.id&&Object.assign(n,t)})),n):n,nle=(e,t)=>n=>{var o,i;const r=null===(i=null===(o=t.file)||void 0===o?void 0:o.tree)||void 0===i?void 0:i.slice();return(null==r?void 0:r.length)&&n.webdav?(n.webdav.list.forEach((t=>{if(t.id===e.id){for(const t of e.roots){const e=r.findIndex((e=>e.id===t.id));-1!==e&&r.splice(e,1)}t.roots.unshift(...r.map((e=>({...e,incloud:!0}))))}})),n):n},ole=e=>t=>t.webdav?(t.webdav.modal=e,t):t,ile=(e,t)=>n=>n.webdav?(n.webdav.list.forEach(((n,o)=>{n.id===e.id&&(n.statusMessage=t)})),n):n,rle=e=>t=>t.webdav?(t.webdav.list.forEach(((t,n)=>{var o;t.id===e.id&&(t.syncTransitionCount=(null!==(o=t.syncTransitionCount)&&void 0!==o?o:0)+1)})),t):t,lle=e=>t=>t.webdav?(t.webdav.list.forEach(((t,n)=>{var o,i;t.roots.forEach((t=>{t.id===(null==e?void 0:e.id)&&delete t.incloud})),(null===(o=t.selected)||void 0===o?void 0:o.id)===(null==e?void 0:e.id)&&(null===(i=t.selected)||void 0===i||delete i.incloud)})),t):t;async function sle(e,t,n,o,i){const{file:r}=e;if(!r)return;const l={},s=UUe(r.cloud),c=Object.keys(s);if(await Promise.all(c.map((async n=>{if(s[n].syncing)return;if(s[n].update)return;const o=await B5(s[n],n,e,t);l[n]=o}))),Object.values(l).some((e=>e>0))){const e=zre(FT.workspace);UH({type:kJ.WEBDAV_UPDATE_CLOUD,payload:l},e)}const a=c.filter((e=>!s[e].syncing&&l[e]));await Promise.all(a.map((async l=>{var c;const a=s[l];if(0===(null===(c=a.mode)||void 0===c?void 0:c.value)&&!a.syncing){let{webdav:s}=e;(null==s?void 0:s.list.length)||(s=Lqe(r));const c=qUe(s.list,l);c&&await i(c,t,n,o)}})))}const cle=e=>t=>(t.cursor=e,t),ale=()=>e=>(delete e.cursor,e),{transformNodeToEditNode:ule}=ek;async function dle(e){const{modal:t,webdav:n,file:o}=e.stater.get();if((null==t?void 0:t.visible)||(null==n?void 0:n.visible))return;if(wje(o))return;const i=e.provider(),{rootdispatch:r}=i,l=e.undoredo.getFileDelete().map((e=>ule(e,""))),s=await e.undoredo.refresh(-1);if(l.length){const t=b$e(l,(async()=>{var n;const o=[];for(const t of l){const i=null===(n=t.props)||void 0===n?void 0:n.id;i&&(o.includes(i)||(await e.safty(i),o.push(i)))}r(lre({...t,visible:!1}),Vq(o),w4(s))}));r(lre(t))}else r(w4(s)),e.webdav.detect()}const{useHotkey:fle}=cj;var hle={...Cj,outer:function(e){var t;const n=R(NU),o=_((async()=>{dle(n)}),[n]);return fle(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),o),G(yj,{...e,onClick:o})}},ple=Object.freeze({__proto__:null,default:hle,todo:dle});async function vle(e){const{modal:t,webdav:n,file:o}=e.stater.get();if((null==t?void 0:t.visible)||(null==n?void 0:n.visible))return;if(wje(o))return;const i=e.provider(),{rootdispatch:r}=i,l=await e.undoredo.refresh(1);r(x4(l)),e.webdav.detect()}const{useHotkey:gle}=cj;var mle={...pj,outer:function(e){var t;const n=R(NU),o=_((async()=>{vle(n)}),[n]);return gle(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),o),gle(Mf?"⌘+⇧+Z":"Ctrl+Shift+Z",o),G(fj,{...e,onClick:o})}},yle=Object.freeze({__proto__:null,default:mle,todo:vle});const ble={padding:10,borderRadius:4,overflow:"hidden",boxShadow:Nf},Cle={display:"flex",flexDirection:"column"},wle={display:"flex"},xle={position:"absolute",zIndex:10,display:"flex",justifyContent:"center",cursor:"default",left:"50%",top:-4},Sle={...{boxShadow:Nf,borderRadius:4,position:"absolute",transform:"translateY(-100%)",display:"flex",alignItems:"center"},padding:"2px 5px"},Ele={width:18,height:18,margin:3,borderRadius:1},kle={textAlign:"center",fontSize:12,color:kf,marginTop:7},Dle={position:"relative"},Ile={position:"absolute",top:0,bottom:0,width:7},Nle={...Ile,left:-2,zIndex:10,borderLeft:"2px solid #fff",background:"linear-gradient(to left, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"},Lle={...Ile,right:-2,zIndex:10,borderRight:"2px solid #fff",background:"linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"},Ble={width:"100%",height:"100%",position:"static",zIndex:1},Tle=(e,t)=>n=>(nc(n.tools).forEach((n=>{n.name===e?n.active=!n.active:t&&(n.active=!1)})),n),Ale=()=>e=>(nc(e.tools).forEach((e=>{e.active=!1})),e),Mle=(e,t)=>n=>(nc(n.tools).forEach((n=>{n.name===e&&(n.active=t)})),n),{clearSelection:Ole,getEditNodeByPath:Rle,getEditNodeEndPath:Ple,getEditNodeStartPath:Fle,getNodeLength:Hle,sliceBlockPath:_le}=ek,{existCellState:jle,getKeyByIndex:Wle,getIndexByKey:zle,existCellStyle:Vle,resetRowSize:$le,calcSelectedCoordinatesWithMerge:Zle,calcIndicatorRangeWithMerge:Ule,reflowRow:qle,getRowSize:Yle,existRowStyle:Kle,resizeRow:Gle,deleteCellStyle:Xle,interateIndicatorRange:Jle,getCellSize:Qle,calcIndicatorRangeByMerge:ese,interateCellByRowIndex:tse,interateCellByColumnIndex:nse,interateCell:ose,scrollGrid:ise,reflowColumn:rse}=ML,lse=e=>t=>(t=bse()(t),t=yse()(t),t=qle()(t),t=Cse(e)(t)),sse=e=>t=>{var n,o,i;if(e.rows&&(t.rows=null!==(n=t.rows)&&void 0!==n?n:{},Object.assign(t.rows,e.rows),delete e.rows),e.columns&&(t.columns=null!==(o=t.columns)&&void 0!==o?o:{},Object.assign(t.columns,e.columns),delete e.columns),e.cells){t.cells=null!==(i=t.cells)&&void 0!==i?i:{},Object.assign(t.cells,e.cells);for(const n in e.cells){const{rowIndex:e}=zle(n);t=fse(e)(t)}delete e.cells}return delete e.indicatorRange,delete e.selectedCoordinates,Object.assign(t,e),t.indicatorRange&&(t.indicatorRange=Ule(t,t.indicatorRange)),t},cse=(e,t,n)=>o=>{var i;o=jle(e,t)(o);const r=Wle(e,t),l=null===(i=o.cells)||void 0===i?void 0:i[r];return void 0===l||(l.state=n),o},ase=(e,t,n)=>o=>{var i;o=Vle(e,t)(o);const r=Wle(e,t),l=null===(i=o.cells)||void 0===i?void 0:i[r];return void 0===l||(l.style=n),o},use=e=>(t,n)=>{var o,i,r;const l=null==n?void 0:n.key;if(!l)return t;const{rowIndex:s,columnIndex:c}=zle(l),a=null===(o=(t=Vle(s,c)(t)).cells)||void 0===o?void 0:o[l];if(null==a?void 0:a.merge){const{rowStartIndex:e,rowEndIndex:n}=ese(a.merge);if(n-e!=1)return t}if(null==a?void 0:a.style){const n=Number(null!==(r=null===(i=a.style)||void 0===i?void 0:i.height)&&void 0!==r?r:t.rowDefaultSize),o=n+e;a.style.height=o,o<=t.rowDefaultSize&&(t=Xle(s,c,"height")(t))}return t},dse=(e,t,n)=>o=>{var i;const r=Wle(e,t),l=null===(i=(o=Vle(e,t)(o)).cells)||void 0===i?void 0:i[r];if(null==l?void 0:l.merge){const{rowStartIndex:e,rowEndIndex:t}=ese(l.merge);if(t-e!=1)return o}return(null==l?void 0:l.style)&&(l.style.height=n,n<=o.rowDefaultSize&&(o=Xle(e,t,"height")(o))),o},fse=e=>(t,n)=>{const o=null==n?void 0:n.key;if(!o)return t;const i=null!=e?e:o?zle(o).rowIndex:void 0;return void 0===i?t:(t=$le(i)(t),t=bse()(t))},hse=e=>(t,n)=>{var o;const i=null==n?void 0:n.key;if(!i)return t;const{rowIndex:r}=zle(i),l=null===(o=(t=Kle(r)(t)).rows)||void 0===o?void 0:o[r];if(null==l?void 0:l.style){const n=Yle(t,r);t=Gle(n+e,r)(t),t=bse()(t)}return t},pse=e=>t=>{var n,o;const{selectedCoordinates:i,indicatorRange:r,cells:l}=t;if(void 0===i||void 0===r)return t;const{rowIndex:s,columnIndex:c}=i,a=Wle(s,c);if(l){const i=null===(o=null===(n=l[a])||void 0===n?void 0:n.state)||void 0===o?void 0:o.editor;if(!i)return t;if("start"===e){const e=Fle(i.node);i.selection={focus:{path:[...e],offset:0},anchor:{path:[...e],offset:0}}}else if("end"===e){const e=Ple(i.node),n=Rle(i.node,e);if(null===n)return t;const o=Hle(n);i.selection={focus:{path:[...e],offset:o},anchor:{path:[...e],offset:o}}}}return t},vse=e=>t=>{var n;const{selectedCoordinates:o,cells:i}=t;if(!o||!i)return t;const{rowIndex:r,columnIndex:l}=o,s=null===(n=i[Wle(r,l)])||void 0===n?void 0:n.state;return s?(null==e||e(s),Ole()(s.editor),s.editor.refresh=pRe(!0),t):t},gse=()=>e=>{const{selectedCoordinates:t,cells:n}=e;if(!t||!n)return e;const{rowIndex:o,columnIndex:i}=t,r=Wle(o,i);return e=Ese(r,!0)(e)},mse=()=>e=>{const{selectedCoordinates:t,cells:n}=e;if(!t||!n)return e;const{rowIndex:o,columnIndex:i}=t,r=Wle(o,i);return e=Ese(r,!1)(e)},yse=()=>e=>{const t=e.cells;if(Sc(t))return e;for(const n in t){const{state:o,merge:i}=t[n];if(!o)continue;const{rowIndex:r,columnIndex:l}=zle(n),{clientHeight:s,clientWidth:c}=o.editor,{width:a}=Qle(e,r,l);if(c!==a){const e=o.editor;e.clientWidth=a,e.resizeWidth=!0,e.selectionReflow=!1,e.refresh=pRe(!0)}}return e},bse=()=>e=>(e.clientHeight=e.scrollHeight,e),Cse=e=>t=>{var n,o;const{scrollWidth:i,scrollLeft:r}=t;let l=e.clientWidth;const s=null!==(o=null===(n=e.selection)||void 0===n?void 0:n.focus.path)&&void 0!==o?o:[0];if(s){const t=_le(e.data,s),n=AFe(e,t);l>n&&(l=n)}t.clientWidth=Math.min(i,l);const c=i-t.clientWidth-r;return c<0&&(t=ise(c,0)(t)),t=rse()(t)},wse=()=>e=>{const{indicatorRange:t,cells:n}=e;return void 0===t||void 0===n||Jle(t,{cell:(t,n)=>{const o=Wle(t,n);e=Sse(o)(e)},row(t){tse(n,t,(n=>{const o=Wle(t,n);e=Sse(o)(e)}))},column(t){nse(n,t,(n=>{const o=Wle(n,t);e=Sse(o)(e)}))},infinite(){ose(n,((t,n)=>{const o=Wle(t,n);e=Sse(o)(e)}))}}),e},xse=(e,t)=>n=>{var o,i;const r=null===(i=null===(o=n.cells)||void 0===o?void 0:o[e])||void 0===i?void 0:i.state;return void 0===r||(r.editor.isEditPending=t),n},Sse=e=>t=>{var n,o;const i=null===(o=null===(n=t.cells)||void 0===n?void 0:n[e])||void 0===o?void 0:o.state;return void 0===i||(i.editor.refresh=pRe(!0)),t},Ese=(e,t)=>n=>{var o,i;const r=null===(i=null===(o=n.cells)||void 0===o?void 0:o[e])||void 0===i?void 0:i.state;return void 0===r||(t?r.editor.selectionFrozen=t:delete r.editor.selectionFrozen,r.editor.refresh=pRe(!0)),n},kse=(e,t)=>n=>{var o,i;const r=null===(i=null===(o=n.cells)||void 0===o?void 0:o[e])||void 0===i?void 0:i.state;return void 0===r||r.editor.selection&&(r.editor.selectionReflow=t),n},Dse=e=>t=>{var n,o;const i=null===(o=null===(n=t.cells)||void 0===n?void 0:n[e])||void 0===o?void 0:o.state;return void 0===i||delete i.editor.ureference,t},Ise=e=>t=>{const{indicatorRange:n,cells:o}=t;if(void 0===n||void 0===o)return t;const i=(n,o)=>{var i,r;const l=Wle(n,o),s=null===(r=null===(i=t.cells)||void 0===i?void 0:i[l])||void 0===r?void 0:r.state;if(void 0===s)return t;s.editor.style={...s.editor.style,...e},s.editor.selectionStyle={...s.editor.selectionStyle,...e}};return Jle(n,{cell(e,t){i(e,t)},row(e){tse(o,e,(t=>{i(e,t)}))},column(e){nse(o,e,(t=>{i(t,e)}))},infinite(){ose(o,((e,t)=>{i(e,t)}))}}),t},{isStartPath:Nse,createInlineNode:Lse,setSelectionReflow:Bse,getEditNodeByPath:Tse,getNodeByPath:Ase,getPathFromKey:Mse,isEditNode:Ose,isNode:Rse,reflowEditNodeByPath:Pse,setEditPending:Fse,transformNodeToEditNode:Hse,getEditNodeStartPath:_se,resetEditNodeKeyRecursion:jse}=ek,Wse=(e,t,n)=>o=>{const{node:i,data:r}=o.editor,l=Mse(e),s=Tse(i,l);if(!Ose(s)||void 0===s.props)return o;if(s.props.value=t,n){const e=Ase(r,l);if(!Rse(e)||void 0===e.props)return o;e.props.value=t}return o},zse=(e,t,n)=>o=>{var i,r;const{node:l,data:s}=o.editor,c=Mse(e),a=Tse(l,c);if(!Ose(a)||void 0===a.props)return o;if(void 0===a.props.value)return o;if(a.props.value.scrollLeft=null!==(i=t.scrollLeft)&&void 0!==i?i:0,n){const e=Ase(s,c);if(!Rse(e)||void 0===e.props)return o;if(void 0===e.props.value)return o;e.props.value.scrollLeft=null!==(r=t.scrollLeft)&&void 0!==r?r:0}return o},Vse=e=>t=>{const n=t.editor,o=ec(Mse(e)),{node:i}=n,r=Tse(i,o),l=Tse(i,ec(o));return Ose(l)&&Ose(r)&&(l.children=l.children.map((e=>e===r?Hse(Lse([""]),r.key):e))),n.selection={focus:{path:[...o,0],offset:0},anchor:{path:[...o,0],offset:0}},Bse(!0)(n),t},$se=e=>t=>{let n=t.editor;return n=Pse(e)(n),n=Fse(!0)(n),t.editor=n,t},Zse=e=>t=>{const n=t.editor;return n.scrollHeight+=e,n.contentHeight+=e,t.client||(n.clientHeight+=e),t},Use=()=>e=>{const t=e.editor,{contentHeight:n,clientHeight:o}=t,i=n-o;return t.clientHeight+=i,t.scrollHeight+=i,e},qse=()=>e=>{const{editor:{node:t}}=e,n=_se(t);return Nse(n)||jse(t),e},Yse="sheet",Kse=38,Gse=200,{isNode:Xse,isMetaNode:Jse}=ek;function Qse(e){return Xse(e)&&e.type===Yse}function ece(e){return Xse(e)&&Jse(e)&&Qse(e.children[0])}const{calcIndicatorRangeByMerge:tce,getIndexByKey:nce,getKeyByIndex:oce}=ML;function ice(e,t,n){var o,i,r,l;const{cells:s,rowDefaultSize:c}=e,a=oce(t,n),u=null==s?void 0:s[a];if(!u)return c;if(u.merge){let{rowStartIndex:e,rowEndIndex:t}=tce(u.merge),r=0;for(;e<t;){const t=oce(e,n);r+=Number(null!==(i=null===(o=s[t].style)||void 0===o?void 0:o.height)&&void 0!==i?i:c),e++}return r}return Number(null!==(l=null===(r=u.style)||void 0===r?void 0:r.height)&&void 0!==l?l:c)}function rce(e,t,n){var o,i,r,l,s;const{cells:c,rowDefaultSize:a,rows:u}=e,d=null===(i=null===(o=null==u?void 0:u[t])||void 0===o?void 0:o.style)||void 0===i?void 0:i.minHeight;let f=null!=d?d:a;if(!c)return f;for(const e in c){const{columnIndex:o,rowIndex:i}=nce(e);if(i!==t)continue;const u=c[e];if(u.merge){let{rowStartIndex:e,rowEndIndex:t,columnStartIndex:i,columnEndIndex:s}=tce(u.merge);if(void 0!==n&&n>=i&&n<s)continue;let d=0;for(;e<t;){const t=oce(e,o);d+=Number(null!==(l=null===(r=c[t].style)||void 0===r?void 0:r.height)&&void 0!==l?l:a),e++}d>f&&(f=d)}else if(o!==n){const e=Number(null===(s=u.style)||void 0===s?void 0:s.height);e>f&&(f=e)}}return f}function lce(e,t){var n,o,i;const r=null===(i=null===(o=null===(n=e.rows)||void 0===n?void 0:n[t])||void 0===o?void 0:o.style)||void 0===i?void 0:i.minHeight;return void 0!==r?parseFloat(String(r)):0}function sce(){return{style:{borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,backgroundColor:"transparent"}}}function cce(e,t){return t?{...e,style:{...e.style,...MPe(t)}}:e}const{createBlockNode:ace,createInlineNode:uce,DetectFlag:dce,getEditNodeStartPath:fce,initNodeKey:hce,SPLIT_BLOCK_MARGIN:pce}=ek;function vce(e){return{type:Yse,children:[],props:e}}function gce(){return{paddingLeft:8,paddingRight:8,paddingTop:5.8-pce,paddingBottom:5-pce}}function mce(){const e=yce();e.node.style=gce();const t=fce(e.node);return e.selection={focus:{path:[...t],offset:0},anchor:{path:[...t],offset:0}},e.selectionReflow=!0,{editor:e}}function yce(e){const t=APe({alignItems:"center",backgroundColor:"transparent"}),n=ace([ace([uce([])],{paddingTop:pce,paddingBottom:pce})]),o=hce(n),i=v_(n,o),r={flag:dce.STATIC};let l=Number(t.fontSize);return l<Kse&&(l=Kse),{node:o,data:n,bounds:i,style:t,clientHeight:Kse,clientWidth:Gse,scrollHeight:Kse,contentHeight:l,scrollTop:0,detect:r,...e}}function bce(e,t,n){var o,i,r;const l=null!==(o=n.rowDefaultSize)&&void 0!==o?o:Kse,s=null!==(i=n.columnDefaultSize)&&void 0!==i?i:n.clientWidth/t,c=null!==(r=n.scrollWidth)&&void 0!==r?r:n.clientWidth;return{defaultCell:{style:{borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,backgroundColor:"transparent"}},rowDefaultSize:l,columnDefaultSize:s,clientWidth:n.clientWidth,clientHeight:e*l,scrollWidth:c,scrollHeight:e*l,scrollLeft:0,scrollTop:0,rowStartIndex:0,rowEndIndex:e,rowTotalNumber:e,rowStartDiff:l,rowEndDiff:0,columnStartIndex:0,columnEndIndex:t,columnTotalNumber:n.scrollWidth?Math.ceil(c/s):t,columnStartDiff:s,columnEndDiff:0,selectedCoordinates:{rowIndex:0,columnIndex:0},indicatorRange:{rowStartIndex:0,rowEndIndex:1,columnStartIndex:0,columnEndIndex:1}}}const Cce="toggleList",wce="toggleListPackage",xce={cn:{[Cce]:"折叠列表",[wce]:[{name:"1.0",value:1.7},{name:"1.15",value:2},{name:"1.5",value:2.5},{name:"2.0",value:3.4},{name:"2.5",value:4.3},{name:"3.0",value:5.1}]},en:{[Cce]:"Toggle List",[wce]:[{name:"1.0",value:1.7},{name:"1.15",value:2},{name:"1.5",value:2.5},{name:"2.0",value:3.4},{name:"2.5",value:4.3},{name:"3.0",value:5.1}]}};const Sce={paddingLeft:10,position:"relative"},Ece={display:"flex"},kce={flex:1,position:"relative"},Dce={position:"absolute",display:"flex",right:0,justifyContent:"flex-start",alignItems:"center"},Ice={display:"inline-flex",alignItems:"center",position:"absolute",top:0,bottom:0},Nce={display:"flex",alignItems:"center",height:15},Lce={flex:1,height:3,backgroundColor:If,opacity:.5,marginLeft:5},Bce={display:"flex",paddingTop:10,paddingBottom:10,paddingLeft:4,paddingRight:4,borderRadius:4,boxShadow:Nf},Tce={marginRight:6,marginLeft:6,borderRadius:3,overflow:"hidden"},Ace={width:70,paddingTop:8,paddingRight:10,paddingBottom:8,display:"flex",flexDirection:"column",alignItems:"normal"},Mce={position:"absolute",left:5,top:6,width:6,height:2,backgroundColor:If,transform:"scaleY(0.5)",opacity:.5},Oce=1.3,{genNextLevelPath:Rce,genPrevLevelPath:Pce,getEditNodeByPath:Fce,getNodeLength:Hce,getRelativePath:_ce,isCollapsed:jce,isDecorateBlockNode:Wce,isDeleteBackward:zce,isDeleteForward:Vce,isDeleteLineBackward:$ce,isDeleteLineForward:Zce,isDeleteWordBackward:Uce,isDeleteWordForward:qce,isEditNode:Yce,isSplitBlock:Kce,isTab:Gce,sliceBlockPath:Xce,sortSelection:Jce,getEditNodesByPath:Qce,traversalEditBlockNodeBySelection:eae}=ek;function tae(e,t,n){var o,i,r;const l={},s=_ce(e.node,t);let c=0,a=e.node;do{if(a.style||(null===(o=a.props)||void 0===o?void 0:o.style)){const e={...a.style};c<s.length&&Object.assign(e,null===(i=a.props)||void 0===i?void 0:i.style);for(const t in e){const o=t;n[o]&&(l[o]=e[o])}}const e=a.children[null!==(r=s[c++])&&void 0!==r?r:0];if(!Yce(e))break;a=e}while(a);return l}function nae(e,t,n){var o,i;const r=tae(e,t,n),l=null!==(i=null!==(o=null==r?void 0:r.fontSize)&&void 0!==o?o:n.fontSize)&&void 0!==i?i:Kf(12);return 2*parseInt(String(l))}function oae(e){if(void 0===e.selection)return[];if(jce(e.selection)){const t=e.selection.focus,n=ec(Xce(e.node,t.path));return[{focus:{path:[...n],offset:0},anchor:{path:[...n],offset:0}}]}const t=[];return eae(e.node,e.selection,((e,n)=>{const o={focus:{path:ec(n),offset:0},anchor:{path:ec(n),offset:0}};0===t.filter((e=>Ec(e,o))).length&&t.push(o)})),t}function iae(e,t,n){let o=!1;const i=e.editor;let r=i.selection;if(void 0===r)return o;if(jce(r)){const e=r.focus.path;let l=e.length;for(;l>0;){const r=Fce(i.node,e.slice(0,l));if(lae(r)&&(lae(r,t)&&(o=!0),!n))break;l--}return o}return eae(i.node,r,((e,n)=>{const r=Qce(i.node,n);for(const e of r)if(lae(e,t))return o=!0,!1})),o}function rae(e){return zce(e)||Vce(e)||Uce(e)||qce(e)||$ce(e)||Zce(e)}function lae(e,t){var n;if(!Wce(e))return!1;const o=null===(n=e.props)||void 0===n?void 0:n.type;return-1!==(null==o?void 0:o.indexOf("list"))&&(!t||o===t)}function sae(e){if(!e)return 1;const t=parseInt(String(e));return Oce/Kf(12)*t}function cae(e,t){let{fontSize:n=Kf(12),lineHeight:o=1.7}=e;return n=parseInt(String(n)),o=sc(o)&&o.endsWith("px")?parseFloat(String(o))/n:parseFloat(String(o)),void 0===t&&(t=1),(n*o-t)/2}var aae;!function(e){e[e.H=24]="H",e[e.H0=11]="H0",e[e.H1=20]="H1",e[e.H2=18]="H2",e[e.H3=16]="H3",e[e.H4=14]="H4",e[e.H5=13]="H5",e[e.H6=12]="H6"}(aae||(aae={}));const uae="outline-list",dae="shortcut-list",fae=7,hae={1:aae.H1,2:aae.H2,3:aae.H3,4:aae.H4,5:aae.H5,6:aae.H6};function pae(e){return G(j_,{...e,children:G(aO,{})})}const vae=e=>t=>(t.mode===e?t=gae()(t):t.mode=e,t),gae=()=>e=>(delete e.mode,e),mae=e=>t=>(void 0===t.link&&(t.link={}),t.link.style=e,t),yae=e=>t=>(t.visible=e,t),bae=()=>e=>(e=gae()(e),e=yae(!1)(e)),Cae="back-link",wae="link",xae="linear-gradient(90deg, rgb(26, 13, 171) 0%, rgb(0, 188, 212) 100%)",Sae="linear-gradient(90deg, rgb(213, 166, 56) 0%, rgb(177, 106, 77) 100%)",{ZERO_WIDTH_NO_BREAK_SPACE:Eae,getNodeByPath:kae,sliceDecoratePath:Dae,isDecorateInlineNode:Iae}=ek;function Nae(e){var t;return Iae(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===Cae}function Lae(e){var t;return Iae(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===wae}async function Bae(e,t,n){var o,i,r;const l=await gF(t);if(0===l.ok||!l.data)return;const s=WH();if(!(null==s?void 0:s.length))return;const{imperator:c,rootdispatch:a}=e.provider();null===(i=null===(o=c.current)||void 0===o?void 0:o.clearVisibleState)||void 0===i||i.call(o),a(P9(),s3());const u=zH();for(let e=s.length-1;e>0&&s[e].uid!==u;e--)jH("pop");const d=null===(r=(await hF(t)).data)||void 0===r?void 0:r.readonly,f=OWe(l.data.data);jH("push",{route:FT.editor,effect:{slide:"right"},payload:{editable:!d,page:{id:t},branch:{id:t,type:"page"},refresh:pRe(!0),link:n,uid:u},title:{text:f,menus:["more"]}})}async function Tae(e,t){if(void 0===t)return;const{text:n,id:o}=t;if(n)if(void 0!==o){if(void 0!==o)try{const t={command:y$.PASTE_LINK,data:{node:e}},o=encodeURIComponent(JSON.stringify(t)),i=new Blob([n],{type:"text/plain"}),r=new Blob([`<slinote payload="${o}"></slinote><div>todo</div>`],{type:"text/html"}),l=new ClipboardItem({[i.type]:i,[r.type]:r});await navigator.clipboard.write([l])}catch(e){}}else try{await navigator.clipboard.writeText(n)}catch(e){}}async function Aae(e){if(Nae(e))try{const t={command:y$.PASTE_BACK,data:{node:e}},n=OWe(e),o=encodeURIComponent(JSON.stringify(t)),i=new Blob([n],{type:"text/plain"}),r=new Blob([`<slinote payload="${o}"></slinote><div>todo</div>`],{type:"text/html"}),l=new ClipboardItem({[i.type]:i,[r.type]:r});await navigator.clipboard.write([l])}catch(e){}}const{getEditNodeByPath:Mae}=ek;function Oae(e,t){const n=e.editor;let o=n.selection;if(void 0===o)return!1;const i=o.focus.path;let r=i.length;for(;r>0;){if(Lae(Mae(n.node,i.slice(0,r))))return!0;r--}const l=o.focus.path;let s=l.length;for(;s>0;){if(Lae(Mae(n.node,l.slice(0,s))))return!0;s--}return!1}function Rae(e,t){const n=e.editor;let o=n.selection;if(void 0===o)return!1;const i=o.focus.path;let r=i.length;for(;r>0;){if(Nae(Mae(n.node,i.slice(0,r))))return!0;r--}const l=o.focus.path;let s=l.length;for(;s>0;){if(Nae(Mae(n.node,l.slice(0,s))))return!0;s--}return!1}const{calcCommonSelectionPath:Pae,comparePath:Fae,createDecorateInlineNode:Hae,createInlineNode:_ae,createReferenceInlineNode:jae,excludeCommonSelection:Wae,getNodeByPath:zae,getNodesByPath:Vae,getNodeEndPath:$ae,getNodeLength:Zae,getNodeStartPath:Uae,getPathFromKey:qae,isBlockNode:Yae,isEditNode:Kae,isEmptyNode:Gae,isNode:Xae,isInlineNode:Jae,isUniFormChildren:Qae,isReferenceNode:eue,isSameStyleNode:tue,resetEditNodeKeyRecursion:nue,sliceDecoratePath:oue,sliceSelectionStartBlockPath:iue,sortSelection:rue,traverseNode:lue,SPAN_NODE:sue}=ek,cue=(e,t,n,o,i,r)=>l=>{var s,c,a,u,d,f,h,p,v;const{store:g,file:m}=l;let y=o.search;y&&EHe(y)&&(l=Wq(e,y)(l));let b=!1,C=ts(null===(c=null===(s=null==g?void 0:g.reference)||void 0===s?void 0:s[r])||void 0===c?void 0:c.data);if(void 0===C?C=jae({id:r,uid:pRe(),back:{[t]:n}}):(null===(a=C.props)||void 0===a?void 0:a.back)&&(b=!0,C.props.back[t]=n),b)return l=xq(r,C,e)(l);const w=Hae({id:r,uid:pRe(),type:i,subclass:i},[C]);l=E9(e)(l);const x=null===(u=null==g?void 0:g.editor)||void 0===u?void 0:u[e];if(void 0===x)return l;const S={},E=Kje(o);function k(e){var t,n;let{data:o,node:i}=e.editor;y&&wHe(y)&&(o=i,delete e.editor.ureference);const{before:r,after:l}=rue(E),s=iue(o,E);let c=zae(o,s);if(Yae(c)){let i={anchor:{path:Qs(r.path,s.length),offset:r.offset},focus:{path:Qs(l.path,s.length),offset:l.offset}};if(0!==Fae(s,r.path)){const e=Uae(c);i.anchor.path=e,i.anchor.offset=0}if(0!==Fae(s,l.path)){const e=$ae(c),t=zae(c,e);null!==t&&(i.focus.path=e,i.focus.offset=Zae(t))}let a=Pae(i),u=zae(c,a);if(null===u)return e;let d=i.anchor.path[a.length];sc(u)&&(d=null!==(t=Js(a))&&void 0!==t?t:0,a=ec(a),u=zae(c,a)),i=Wae(i),0===i.anchor.path.length&&i.anchor.path.push(d),0===i.focus.path.length&&i.focus.path.push(d);const f=VWe(u,i);for(let e=u.children.length-1;e>=0;e--){const t=u.children[e];t&&!Gae(t,!0)||(u.children.splice(e,1),d>=e&&d--)}let h=w.children;for(;h.length>0&&Xae(h[0]);)h=h[0].children;h.push(_ae(f.children));const p=Math.max(0,d+1);u.children.splice(p,0,w);const v=Vae(c,a);for(let e=v.length-1;e>=1;e--){const t=v[e-1],n=v[e];Jae(n)&&Jae(t)&&Qae(t,n)&&(t.children=n.children,n.style&&(t.style||(t.style={}),Object.assign(t.style,n.style)))}Kae(c)&&nue(c);for(let e=0;e<=s.length;e++){const t=s.slice(0,e),i=zae(o,t);if(eue(i)){const e=null===(n=i.props)||void 0===n?void 0:n.uid;e&&(S[e]=i)}}lue(c,((e,t)=>{var n;if(eue(e)){const t=null===(n=e.props)||void 0===n?void 0:n.uid;t&&(S[t]=e)}}))}return y&&Kae(o)&&nue(o),e}y?(CHe(y)&&(y=BHe(y)),EHe(y)&&(y=HHe(y)),wHe(y)?EDe(y,[k])({editor:x}):k({editor:x})):k({editor:x});const D=null===(d=C.props)||void 0===d?void 0:d.uid;if(!D)return l;const I=[];for(const t in S){const n=S[t],o=null===(f=n.props)||void 0===f?void 0:f.id;if(o&&_9(t,o)({editor:x}),l=xq(o,n,e)(l),D!==t){const t=null===(p=null===(h=l.store)||void 0===h?void 0:h.reference)||void 0===p?void 0:p[o];t&&lue(n,(n=>{var o,i;if(eue(n)){const r=null===(o=n.props)||void 0===o?void 0:o.id,l=null===(i=n.props)||void 0===i?void 0:i.uid;if(!r||!l)return;if(l===D){const n=Object.keys(t.detail);I.push(...n.filter((t=>t!==e)))}}}))}}for(const e of I)l=Sq(r,S[D],e)(l);if((null==m?void 0:m.currentPageId)===e){if(l.editor.data=x.data,l.editor.uids=x.uids,D){const e=null!==(v=l.editor.ureference)&&void 0!==v?v:{};e[D]=ek.transformNodeToEditNode(C,""),l.editor.ureference=e}l=U9()(l)}return l=hq(e,x)(l)},aue=(e,t,n,o,i)=>r=>{var l,s,c,a;const u=null===(c=null===(s=null===(l=r.store)||void 0===l?void 0:l.reference)||void 0===s?void 0:s[i])||void 0===c?void 0:c.data,d=null===(a=null==u?void 0:u.props)||void 0===a?void 0:a.back;return d&&(delete d[t],!Sc(d))?r:r=zbe(e,n,o)(r)},uue=(e,t,n)=>o=>{var i,r,l,s;const c=null===(i=e.props)||void 0===i?void 0:i.value;if(void 0===c)return o;const{id:a}=c;if(void 0===a)return o;let u=null===(s=null===(l=null===(r=o.store)||void 0===r?void 0:r.reference)||void 0===l?void 0:l[a])||void 0===s?void 0:s.data;if(void 0===u)return o;if(u.props&&e.props){const o=e.props.id;delete u.props.back[t],u.props.back[o]=n}return u={...u},u.props={...u.props,uid:pRe()},o=xq(a,u,null)(o)},due=(e,t,n,o,i)=>r=>{var l,s;const{store:c,file:a}=r;let u=i.search;u&&EHe(u)&&(r=Wq(e,u)(r));const d=null===(l=null==c?void 0:c.editor)||void 0===l?void 0:l[e];if(void 0===d)return r;const f={},h=Kje(i);function p(e){var t,n;let{data:o,node:i}=e.editor;u&&wHe(u)&&(o=i,delete e.editor.ureference);let r=Pae(h),l=zae(o,r);if(null===l)return e;for(;!Lae(l)&&r.length;)r=ec(r),l=zae(o,r);const s=oue(o,r,wae);if(!s)return e;const c=zae(o,s);if(!Xae(c))return e;const a=null===(t=c.props)||void 0===t?void 0:t.id;if(void 0===a)return e;v(o,a);const d=ec(s),p=zae(o,d);if(!Xae(p))return e;let g=p.children.indexOf(c);p.children.splice(g,1,...l.children);let m=p.children.length-1;for(;m>0;){const e=p.children[m],t=p.children[m-1];tue(t,e)&&(sc(t)&&sc(e)?p.children[m-1]=t+e:Xae(t)&&Xae(e)?(t.children.push(...e.children),t.children=[t.children.join("")]):sc(t)&&Xae(e)&&(p.children[m-1]=t+e.children[0]),p.children.splice(m,1)),m--}u&&Kae(o)&&nue(o);for(let e=0;e<=r.length;e++){const t=zae(o,r.slice(0,e));if(eue(t)){const e=null===(n=t.props)||void 0===n?void 0:n.uid;e&&(f[e]=t)}}return e}function v(e,i){var l;if(null===(l=null==c?void 0:c.reference)||void 0===l?void 0:l[t]){const{detail:l}=c.reference[t],s=Object.keys(l).filter((e=>e!==t));if(1!==s.length)return;const a=qae(n),u={focus:{path:a.slice(),offset:0},anchor:{path:a.slice(),offset:0}};DHe(e,o)&&(aHe(o)&&(o=o.child),u.search=o),r=aue(s[0],i,u,Cae,t)(r)}}u?(CHe(u)&&(u=BHe(u)),EHe(u)&&(u=HHe(u)),wHe(u)?EDe(u,[p])({editor:d}):p({editor:d})):p({editor:d});for(const t in f){const n=f[t],o=null===(s=n.props)||void 0===s?void 0:s.id;o&&_9(t,o)({editor:d}),r=xq(o,n,e)(r)}return(null==a?void 0:a.currentPageId)===e&&(r.editor.data=d.data,r.editor.uids=d.uids),r=hq(e,d)(r)},fue=(e,t,n,o,i)=>r=>{var l;const{store:s,file:c}=r,a=null===(l=null==s?void 0:s.editor)||void 0===l?void 0:l[e];if(void 0===a)return r;let u=t;function d(e){let{data:t,node:r}=e.editor;u&&wHe(u)&&(t=r,delete e.editor.ureference);const l=qae(n),s=zae(t,l);return Lae(s)&&(void 0===s.props&&(s.props={}),s.props.value=i?{...s.props.value,...o}:o),e}return u&&aHe(u)&&(u=u.child),u?(CHe(u)&&(u=BHe(u)),EHe(u)&&(u=HHe(u)),wHe(u)?EDe(u,[d])({editor:a}):d({editor:a})):d({editor:a}),(null==c?void 0:c.currentPageId)===e&&(r.editor.data=a.data,r.editor.uids=a.uids),r=hq(e,a)(r)},hue=(e,t,n)=>o=>{var i,r;const{store:l,file:s}=o,c=null===(i=null==l?void 0:l.editor)||void 0===i?void 0:i[e];if(void 0===c)return o;const a={};let u=t;function d(e){var t;let{data:o,node:i}=e.editor;u&&wHe(u)&&(o=i,delete e.editor.ureference);const r=qae(n),l=zae(o,r);Lae(l)&&(l.type=sue,delete l.props);const s=Vae(o,r);for(const e of s)if(eue(e)){const n=null===(t=e.props)||void 0===t?void 0:t.uid;n&&(a[n]=e)}return e}u&&aHe(u)&&(u=u.child),u?(CHe(u)&&(u=BHe(u)),EHe(u)&&(u=HHe(u)),wHe(u)?EDe(u,[d])({editor:c}):d({editor:c})):d({editor:c});for(const t in a){const n=a[t],i=null===(r=n.props)||void 0===r?void 0:r.id;i&&_9(t,i)({editor:c}),o=xq(i,n,e)(o)}return(null==s?void 0:s.currentPageId)===e&&(o.editor.data=c.data,o.editor.uids=c.uids),o=hq(e,c)(o)},pue=(e,t,n)=>o=>{const i=qae(n),r={focus:{path:[...i],offset:0},anchor:{path:[...i],offset:0},search:t};return o=zbe(e,r,Cae)(o)},vue=(e,t,n)=>o=>{var i;const{store:r}=o,l=null===(i=null==r?void 0:r.editor)||void 0===i?void 0:i[e];return void 0===l?o:(IPe(l.data,(e=>{if(Lae(e)&&e.props&&e.props.id===t)return e.props.value=n,!0}),!0),o=hq(e,l)(o))},gue=(e,t,n,o,i,r)=>l=>{var s,c,a;const u=cue(e,t,n,o,i,r)(l.rstate);if((null===(s=u.file)||void 0===s?void 0:s.currentPageId)!==e)return l;const d=null===(a=null===(c=u.store)||void 0===c?void 0:c.editor)||void 0===a?void 0:a[e];return d?(u.editor.data=d.data,u.editor.uids=d.uids,delete u.editor.ureference,V4(e)(u),l.rstate=u,l):l},mue=(e,t,n,o,i,r)=>n=>{var l,s,c;const a=aue(e,t,o,i,r)(n.rstate);if((null===(l=a.file)||void 0===l?void 0:l.currentPageId)!==e)return n;const u=null===(c=null===(s=a.store)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[e];return u?(a.editor.data=u.data,a.editor.uids=u.uids,delete a.editor.ureference,V4(e)(a),n.rstate=a,n):n},yue=(e,t,n,o,i)=>r=>{var l,s,c;const a=due(e,t,n,o,i)(r.rstate);if((null===(l=a.file)||void 0===l?void 0:l.currentPageId)!==e)return r;const u=null===(c=null===(s=a.store)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[e];return u?(a.editor.data=u.data,a.editor.uids=u.uids,delete a.editor.ureference,r.rstate=a,r):r},bue={link:"link",edit:"edit",copy:"copy",cut:"cut",review:"review",removeLink:"removeLink",removeBack:"removeBack",placeholder:"placeholder",forward:"forward",backward:"backward"},Cue={cn:{[bue.link]:"链接",[bue.edit]:"编辑链接",[bue.copy]:"复制链接",[bue.cut]:"剪切反链",[bue.review]:"预览反链",[bue.removeLink]:"取消链接",[bue.removeBack]:"取消反链",[bue.placeholder]:"输入网址或搜索笔记",[bue.forward]:"正链",[bue.backward]:"反链"},en:{[bue.link]:"Link",[bue.edit]:"Edit Link",[bue.copy]:"Copy Link",[bue.cut]:"Cut Back Link",[bue.review]:"Review Back Link",[bue.removeLink]:"Cancel Link",[bue.removeBack]:"Cancel Back Link",[bue.placeholder]:"Enter link or search notes",[bue.forward]:"Forward Refer",[bue.backward]:"Backward Refer"}},{SPAN_NODE:wue,getEditNodeByPath:xue,getNodeLength:Sue,isCollapsed:Eue,isReferenceNode:kue,isReferenceInlineNode:Due,sliceDecoratePath:Iue,traversalEditNodeBySelection:Nue,createDecorateInlineNode:Lue,convergeBlockSelection:Bue,decorateNode:Tue,clearSelection:Aue}=ek,Mue=()=>e=>{if(!e.selection||!Eue(e.selection))return e;let t=e.selection.focus.path;for(;null==t?void 0:t.length;){if(t=Iue(e.node,t,wae),void 0===t)return e;const n=xue(e.node,t);if(!Lae(n))return e;const o=pRe();n.props&&(n.props.id=o,n.props.uid=pRe());const i=n.children[0];kue(i)&&i.props&&(i.props.id=o,i.props.uid=pRe()),t=ec(t)}return e},Oue=()=>e=>{if(!e.selection||!Eue(e.selection))return e;let t=e.selection.focus.path;for(;null==t?void 0:t.length;){if(t=Iue(e.node,t,Cae),void 0===t)return e;const n=xue(e.node,t);if(!Nae(n))return e;if(delete n.props,n.type=wue,1===Sue(n)){const e=n.children[0];Due(e)&&n.children.splice(0,1,...e.children)}t=ec(t)}return e},Rue=(e,t,n,o)=>i=>{const{node:r,selection:l,selectionDecorate:s}=i;if(!l)return i;const c=Cue[o][bue.link];if(uCe(e,t,r,l,c))return i;if(void 0===(null==s?void 0:s[wae])){const e=pRe(),t=pRe(),r=Lue({id:e,uid:t,type:wae,subclass:wae});if(Eue(l)){const e=Cue[o][bue.link];r.children=[e]}i=Bue()(i),i=Tue(r)(i),i=Aue()(i),n.current.panel||(n.current.panel={}),n.current.panel[t]=!0}return i},{useHotkey:Pue}=cj;const Fue={position:"relative",flexDirection:"column",alignItems:"center"},Hue={cursor:"pointer",textDecoration:"none",color:"rgb(0, 105, 194)"},_ue={color:"rgb(49, 121, 206)",textShadow:"none",backgroundImage:xae,WebkitTextFillColor:"transparent",WebkitBackgroundClip:"text",WebkitBoxDecorationBreak:"clone"},jue={...{color:"rgb(49, 121, 206)",textShadow:"none",backgroundImage:Sae,WebkitTextFillColor:"transparent",WebkitBackgroundClip:"text",WebkitBoxDecorationBreak:"clone"},cursor:"pointer"},Wue={position:"absolute",left:0,right:0,bottom:0},zue={position:"absolute",zIndex:1,display:"flex",justifyContent:"center",cursor:"default",left:"50%"},Vue={boxShadow:Nf,borderRadius:4,position:"absolute",display:"flex"},$ue={...Vue,alignItems:"center",transform:"translateY(-100%)",padding:"4px 3px",top:-5},Zue={...Vue,overflow:"hidden",display:"flex",top:5},Uue={borderRadius:2,margin:"0 2px"},que={width:24,height:24,borderRadius:2,display:"flex",justifyContent:"center",alignItems:"center"},Yue={outline:"none",border:"none",width:300,padding:"8px",backgroundColor:"transparent",fontSize:13},{getPathFromKey:Kue}=ek;function Gue(e,t,n){var o,i,r,l;const{uid:s=pRe(!0),kid:c}=e,a=null!==(i=null===(o=n.panel)||void 0===o?void 0:o[s])&&void 0!==i&&i,u={visible:a,mode:a?wxe.search:void 0};if(null===(r=n.panel)||void 0===r||delete r[s],!(null==t?void 0:t.focus))return u;const{focus:d}=t,f=MHe(IHe(d,GFe(Kue(c)),QFe(s)));for(const e in n.options)if(e.startsWith(f)){const t=null===(l=n.options)||void 0===l?void 0:l[e];if(!(null==t?void 0:t.mode))continue;[f,t.mode].join(h$)===e&&t.visible&&(u.mode=t.mode,u.visible=t.visible)}return u}const Xue=U({current:""}),Jue=U(null),Que=U(null),ede=U(null),{calcCommonSelectionPath:tde,compareSelection:nde,getNodeByPath:ode,getPathFromKey:ide,isEmptyNode:rde}=ek;function lde(t,n,o,i,r){const l=Dd(t),s=Dd(n),c=R(EU),a=R(IU),u=R(kU),d=R(NU),f=Dd(R(MU)),{SheetProxy:h}=e,p=R(h),v=Nd("pointerdown"),g=Nd("pointerenter"),m=Nd("pointerleave"),y=Nd("pointermove"),b=Nd("click"),C=Nd("pointerenter"),w=Nd("pointerleave"),x=Nd("click"),S=Nd("blur"),E=Nd("pointerup");return F((()=>(window.addEventListener("pointerup",E.listener),()=>{window.removeEventListener("pointerup",E.listener)})),[E]),F((()=>{const e=bu(g,v).pipe(Iu((()=>y.pipe(Su(150)).pipe(Eu(1)).pipe(Nu(m)).pipe(Nu(x))))).subscribe((e=>{o(yae(!0))}));return()=>e.unsubscribe()}),[l,v,g,m,y,x,b,o]),F((()=>{const e=bu(g.pipe(Iu((()=>m.pipe(Du(150)).pipe(Nu(C))))),v.pipe(Iu((()=>y.pipe(Eu(1))))),C.pipe(Iu((()=>w.pipe(Du(150)).pipe(Nu(g))))),x,b).subscribe((e=>{const{mode:t}=s.current;t||o(yae(!1))}));return()=>e.unsubscribe()}),[l,s,v,g,m,y,b,C,w,x,o]),F((()=>{const e=v.pipe(Iu((e=>{const t=s.current.mode,n=u.current.agent,o=l.current.type===Cae;return t||n||o||e.stopPropagation(),b.pipe(wu((()=>!t))).pipe(Nu(S)).pipe(Nu(y))}))).subscribe((async e=>{e.stopPropagation();const t=l.current.value,n=s.current.mode;if(void 0===t||void 0!==n)return void(r.current&&qH(r.current));const{pageId:o,id:i,text:c}=t;if(o&&i){if(Uf)return void await Bae(d,o,i);await d.safty(o),d.dispatch(T6(o),ute(o,i),E6(o))}else c&&"search"!==n?qH(c):r.current&&qH(r.current)})),t=b.subscribe((e=>{e.preventDefault()}));return()=>{e.unsubscribe(),t.unsubscribe()}}),[l,s,v,y,b,S,d,r,u,c]),F((()=>{const e=g.subscribe((e=>{o(mae({textDecorationLine:"underline"}))}));return()=>e.unsubscribe()}),[o,g]),F((()=>{const e=g.pipe(Iu((e=>m))).subscribe((()=>{o(mae({textDecorationLine:"none"}))}));return()=>e.unsubscribe()}),[o,g,m]),F((()=>{if(!n.visible||"review"===n.mode)return;const{focus:e}=f.current;let t=-1;const r=n=>{t=!n.focus||bHe(e,n.focus)?requestAnimationFrame((()=>{var e;null===(e=i.current)||void 0===e||e.reset(),o(bae()),a()})):requestAnimationFrame((()=>{c(v7(r))}))};return c(v7(r)),null==p||p.pointerDown.current.add(r),window.addEventListener("pointerdown",r),()=>{cancelAnimationFrame(t),c(g7(r)),null==p||p.pointerDown.current.delete(r),window.removeEventListener("pointerdown",r)}}),[null==p?void 0:p.pointerDown,f,c,a,o,i,n.visible,n.mode]),F((()=>{const e=v.pipe(Iu((()=>E.pipe(Eu(1))))).subscribe((()=>{const{type:e,kid:t,uid:n=pRe(!0)}=l.current;if(e!==Cae)return;const i=wxe.review;o(yae(!0),vae(i),(e=>{const{mode:o,visible:i}=e;if(!o)return delete u.current.options,e;const r=ide(t),l=[MHe(IHe(f.current.focus,GFe(r),QFe(n))),o].join(h$);return void 0===u.current.options&&(u.current.options={}),u.current.options[l]={...u.current.options[l],mode:o,visible:i},e})),requestAnimationFrame(a)}));return()=>{e.unsubscribe()}}),[l,s,f,c,a,u,o,v,E]),{link:Ld([v,g,m,y,b]),option:Ld([C,w,x]),edit:Ld([S])}}function sde(e){const t=Dd(e),n=R(NU),o=R(EU),i=Dd(R(SU)),r=R(LU),l=Dd(R(MU));return{async onClickSelector(e,s,c,a,u){await(async(e,s,c,a,u)=>{var d,f,h,p,v,g;const{result:{tree:m,count:y},rstate:{file:b}}=c,C=t.current,w=i.current,x=l.current;if(y&&y<=1)return void(null===(d=C.onRemove)||void 0===d||d.call(C));const S=K_e(m,e.id);if(!S)return;const E=e.payload;if(!E)return;if(void 0===C.id)return;const k=null===(f=w.file)||void 0===f?void 0:f.currentPageId;if(void 0===k)return;const{focus:D}=x,I=[SCe(e)],N=[V4(k),N9("updated"),g9(pRe(!0))],L=Zc([k,S.id]),B=null==b?void 0:b.currentPageId;B&&!L.includes(B)&&L.push(B);for(const e of L){if(n.exist(e))continue;const t=await _Y(e,r);N.push(rq(t)),I.push(Iwe(t))}if(I.push(yue(S.id,C.id,s.kid,D,E)),I.push(MCe(e,S,s,((e,t,n)=>{const o=S.id,i=s.id;return QWe(e,o,t,i?[i]:[],n)}))),(null===(h=c.result.branch)||void 0===h?void 0:h.id)===e.id){const e=c.result.tree;if(null===(p=e[0].children)||void 0===p?void 0:p.length){const t=e[0].children.slice(0,2).map((e=>e.id));for(let e=0;e<t.length;e++){const n=t[e];if(!(null===(g=null===(v=c.rstate.store)||void 0===v?void 0:v.editor)||void 0===g?void 0:g[n])){const e=await _Y(n,r);I.push(Iwe(e))}}}I.push(owe())}if(I.push(QCe(E),ACe()),N.push(V4(k),N9("updated"),due(S.id,C.id,s.kid,D,E),U9(),Z3(k),Z3(S),p9(),b4()),C.uid){const e=IHe(D,GFe(ide(C.kid)),QFe(C.uid),nHe());N.push(s4(e))}a(...I),u[2](!0),requestAnimationFrame((()=>{o(...N)}))})(e,s,c,a,u)}}}const{clearSelection:cde,getPathFromKey:ade}=ek,ude=[{key:bue.copy,icon:lO},{key:bue.cut,icon:function(){return G("svg",{width:"13.5",viewBox:"0 0 12 12",children:G("path",{fill:Df,stroke:Df,strokeWidth:"0.2",d:"M2.97468 0.617749L2.97468 0.617163C2.97311 0.348957 2.75534 0.130011 2.48713 0.130011C2.21921 0.130011 2.00157 0.349096 2 0.61758H2V0.618165V8.64813C2 9.38761 2.59844 9.99001 3.33458 9.99001H8.55H8.65V9.89001V9.11078V9.01078H8.55H3.39537C3.16367 9.01078 2.97468 8.82146 2.97468 8.5874L2.97468 0.617749ZM0.545455 3.31638L0.545455 3.31638H0.546133H1.5H1.6V3.21638V2.41638V2.31638H1.5L0.545762 2.31638L0.545091 2.31638C0.287003 2.31812 0.100001 2.5551 0.100001 2.81597C0.100001 3.07713 0.286902 3.31463 0.545455 3.31638ZM3.45 2.31638H3.35V2.41638V3.19448V3.29448H3.45H8.62037C8.84703 3.29448 9.03452 3.48285 9.03452 3.71803V11.1969C9.03452 11.4654 9.24923 11.6864 9.51705 11.6864C9.78515 11.6864 10 11.4655 10 11.1969V3.65712C10 2.91956 9.40957 2.31638 8.68004 2.31638H3.45ZM10.48 8.99494H10.38V9.09494V9.89037V9.99037H10.48H11.4813C11.6023 9.99037 11.7042 9.92471 11.7724 9.83377C11.8407 9.74285 11.88 9.62183 11.88 9.49244C11.88 9.36306 11.8407 9.24209 11.7723 9.15123C11.7039 9.0603 11.6018 8.99494 11.4807 8.99494H10.48Z"})})}},{key:bue.edit,icon:sO},{key:bue.review,icon:aO},{key:bue.removeLink,icon:oO},{key:bue.removeBack,icon:oO}];function dde(e){const t=R(MU),n=R(TU),o=R(ede),i=R(SU),r=R(IU),l=R(EU),s=R(kU),c=ude.filter((t=>{if("link"===e.type){if(t.key===bue.copy)return!0;if(t.key===bue.edit)return!0;if(t.key===bue.removeLink)return!0}else if("back"===e.type){if(t.key===bue.review)return!0;if(t.key===bue.cut)return!0;if(t.key===bue.removeBack)return!0}return!1}));return G("div",{style:{...zue,...e.style},children:G(hh,{style:$ue,onClick:e.onClick,onPointerDown:e=>e.stopPropagation(),...e.events,children:c.map((c=>{const a=e.lang?Cue[e.lang][c.key]:c.key,u={};return(c.key===bue.edit&&wxe.search===e.mode||c.key===bue.review&&wxe.review===e.mode)&&(u.backgroundColor=Cf),G(Bk,{tips:a,direction:"top",children:G("div",{style:{...Uue,...u},children:G(dv,{style:que,onClick:a=>(async(c,a)=>{var u,d,f,h,p,v,g;const m=[],y=[];let b=!1;if(a===bue.edit){c.stopPropagation();const o=wxe.search;m.push(vae(o)),e.mode===o&&(b=!0),t.editor.selection&&(null===(u=n.current)||void 0===u||u.commit(cde())),y.push(s3())}else if(a===bue.review){c.stopPropagation();const o=wxe.review;m.push(vae(o)),e.mode===o&&(b=!0),t.editor.selection&&(null===(d=n.current)||void 0===d||d.commit(cde()))}else a===bue.copy?(await(null===(f=e.onCopy)||void 0===f?void 0:f.call(e,e.value)),m.push(gae()),b=!0):a===bue.cut?(await(null===(h=e.onCut)||void 0===h?void 0:h.call(e)),m.push(gae()),b=!0):a===bue.removeLink?await(null===(p=e.onRemove)||void 0===p?void 0:p.call(e)):a===bue.removeBack&&await(null===(v=e.onRemove)||void 0===v?void 0:v.call(e));const C=null===(g=i.file)||void 0===g?void 0:g.currentPageId;if(C&&y.push(V4(C)),b&&(o.current?o.current.reset():s.current&&delete s.current.options,m.push(bae())),e.uid){const n=ade(e.kid),o=IHe(t.focus,GFe(n),oHe());Ec(i.gfocus,o)||(y.push(s4(o)),y.push(DDe(o,[])),y.push(pq()))}m.length&&(m.push(Lwe(e,t,s)),e.dispatch(...m)),y.length&&l(...y),requestAnimationFrame(r)})(a,c.key),children:G(c.icon,{})})})},c.key)}))})})}const{clearSelection:fde,isDecorateNode:hde,getNodeByPath:pde,getPathFromKey:vde}=ek;function gde(e){var t,n,o,i,r;const l=Dd(e),s=R(MU),c=Dd(s),a=R(TU),u=R(Jue),d=R(NU),f=R(SU),h=Dd(f),p=R(EU),v=R(kU),g=R(ede),m=R(Xue),y=null!==(n=null===(t=e.value)||void 0===t?void 0:t.text)&&void 0!==n?n:"",[b,C]=$(y),w=Z(!1),x=Z(!1),S=Z(),E=null!==(o=e.lang)&&void 0!==o?o:"cn",k=_(((e,t)=>{const{focus:n}=c.current,{file:o}=h.current,i=null==o?void 0:o.currentPageId;if(void 0===i)return;const{kid:r}=l.current,s=[fue(i,n,r,{text:e},!0),U9()];t&&s.push(V4(i),p9(),b4()),p(...s)}),[p,c,h,l]),{onClickSelector:D}=function(e){const t=Dd(e),n=R(NU),o=R(EU),i=Dd(R(SU)),r=R(LU),l=Dd(R(MU)),s=async(t,n,r,s,c,a)=>{var u,d,f;const{result:{tree:h}}=r,p=i.current,v=K_e(h,t.id);if(!v)return;const g=t.payload;if(!g)return;const m=null===(u=p.file)||void 0===u?void 0:u.currentPageId;if(void 0===m)return;if(void 0===e.id)return;const{kid:y}=n,b=[bCe(t,!0)],C=[V4(m),N9("updated"),g9(pRe(!0))],w=Nae(g.node)?null===(f=null===(d=g.node)||void 0===d?void 0:d.props)||void 0===f?void 0:f.id:pRe();g.checked?b.push(mue(v.id,e.id,m,g,Cae,w)):b.push(gue(v.id,e.id,m,g,Cae,w));const x=ide(y),{focus:S,editor:{data:E,node:k}}=l.current;let D=n.text;if(void 0===D){let e=E;rde(e,!0)&&(e=k);const t=ode(e,x);D=OWe(t)}if(b.push(MCe(t,v,n,((e,t)=>{if(!D)return null;const n=FWe(D,e,t);return null==a||a(n),n})),QCe(g)),e.uid){const t=IHe(S,GFe(ide(e.kid)),QFe(e.uid),nHe());C.push(s4(t))}g.checked?(C.push(fue(m,S,y,{text:D})),C.push(aue(v.id,e.id,g,Cae,w))):(C.push(fue(m,S,y,{text:D,id:w,pageId:v.id})),C.push(cue(v.id,e.id,m,g,Cae,w))),C.push(U9(),Z3(m),Z3(v),p9(),b4()),c[2](!0),s(...b),requestAnimationFrame((()=>{o(...C)}))};return{async onClickSelector({...e},l,c,a,u){var d,f,h,p,v;const{result:{tree:g},rstate:{file:m}}=c,y=t.current,b=i.current;if((null===(d=e.payload)||void 0===d?void 0:d.node)&&Lae(e.payload.node)){const t=[bCe(e,!0)];return void a(...t)}const C=null===(f=b.file)||void 0===f?void 0:f.currentPageId;if(void 0===C)return;const w=K_e(g,e.id);if(!w)return;const x={...null===(h=b.store)||void 0===h?void 0:h.editor},S={...null===(p=b.store)||void 0===p?void 0:p.reference},E=[],k=[],D=Zc([C,w.id]),I=null===(v=y.value)||void 0===v?void 0:v.pageId;I&&!D.includes(I)&&D.push(I);const N=null==m?void 0:m.currentPageId;N&&!D.includes(N)&&D.push(N);for(const e of D){if(n.exist(e))continue;const t=await _Y(e,r);Object.assign(x,null==t?void 0:t.editor),Object.assign(S,null==t?void 0:t.reference),k.push(rq(t)),E.push(Iwe(t))}a(...E),o(...k);let L=!1;async function B(){await s(e,l,c,a,u)}await async function(){var t,n,i,r,d,f;const h=null===(t=y.value)||void 0===t?void 0:t.id;if(!h||!C)return;const p=null===(n=null==S?void 0:S[h])||void 0===n?void 0:n.detail;if(!p)return;const v=e.id,m=Gbe(g),b=Object.keys(p).filter((e=>e!==h));if(1===m.length){if(m[0].id===v)return;let t;if(b.includes(C)){const n=m[0].payload,o=e.payload;if(Ec(n.search,o.search)){const r=tde(n),l=tde(o);if(r[0]===l[0]&&-1===nde(n,o)){let o=-1;const l=r[0],s=K_e(g,v);null===(i=g[0].children)||void 0===i||i.forEach((e=>{var t,i,r,c;if(e.id===C){let a=0;n.search&&(a=null!==(i=null===(t=null==s?void 0:s.children)||void 0===t?void 0:t.findIndex((e=>{var t;return!!Ec(null===(t=e.payload)||void 0===t?void 0:t.search,n.search)})))&&void 0!==i?i:0,-1===a&&(a=0));const u=null!==(c=null===(r=e.children)||void 0===r?void 0:r.slice(a))&&void 0!==c?c:[];for(let e=0;e<(null==u?void 0:u.length);e++){const t=u[e];if(!t)continue;const n=t.payload,i=tde(n);if(l===i[0]){if(o++,t.id===v)break}else if(l<i[0])break}}})),-1!==o&&(L=!0,t=t=>{var n;const i=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n[o];i&&(e.payload=i.payload)})}}}await s(m[0],l,c,a,u,t)}else if(1===(null==b?void 0:b.length)&&y.id){const e=null===(r=x[b[0]])||void 0===r?void 0:r.data;if(e){const t=QWe(e,b[0],{},[h],S),n=null===(f=null===(d=null==t?void 0:t.children)||void 0===d?void 0:d[0])||void 0===f?void 0:f.payload;if(void 0!==n){const e=[];b[0]===C&&e.push(mue(b[0],y.id,C,n,Cae,h));const t=[aue(b[0],y.id,n,Cae,h)];a(...e),requestAnimationFrame((()=>{o(...t)}))}}}}(),L?requestAnimationFrame(B):await B()}}}(e),I=s.editor.status,N={...e,id:null===(i=e.value)||void 0===i?void 0:i.id,text:b,layout:{top:40},selector:Cue[null!==(r=e.lang)&&void 0!==r?r:"cn"][bue.forward],showHeader:!1,onlyShowInResult:!0,type:"radio",name:wae,exclude(t,n){var o;return!(0===n[0]||!zve(t)&&!Vve(t))||!(!hde(t)||(null===(o=t.props)||void 0===o?void 0:o.uid)!==e.uid)},onClickSelector:D,onClose(){u(bae())}},L=Dd(N);H((()=>{var e;("normal"===I||void 0===I)&&N.text&&w.current&&(null===(e=g.current)||void 0===e||e.research(!0),w.current=!1)}),[I,N.text,g,w]),H((()=>{var e,t;return null===(t=null===(e=S.current)||void 0===e?void 0:e.focus)||void 0===t||t.call(e),()=>{requestAnimationFrame((()=>{var e;const{text:t,kid:n}=L.current,{focus:o}=c.current,i=WHe(d.stater.get().editor.data,o);if(i){const o=vde(n),r=pde(i,o);if(Lae(r)){const n=null===(e=r.props)||void 0===e?void 0:e.value;if((null==n?void 0:n.text)===t)return}}void 0!==t&&k(t,!0)}))}}),[h,L,c,d,k]);const B=Cue[E].placeholder;return X("div",{style:zue,children:[G(hh,{style:Zue,onPointerDown:e=>{var t;if(e.stopPropagation(),!Ec(s.focus,f.gfocus)){const e=ZFe();p(s4(e))}s.editor.selection&&(null===(t=a.current)||void 0===t||t.commit(fde()))},children:G("input",{ref:S,style:Yue,value:b,onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&u(gae(),yae(!1))},onInput:e=>{const t=e.target.value.trim();t!==b&&(x.current||(C(t),k(t),w.current=!0,m.current=t,""===t&&(g.current?g.current.reset():v.current&&delete v.current.options)))},onBlur:e=>{x.current=!1},onCompositionStart:e=>{x.current=!0},onCompositionEnd:e=>{const t=e.target.value.trim();C(t),k(t),w.current=!0,requestAnimationFrame((()=>{x.current=!1}))},placeholder:B,...e.events})}),b?G(kxe,{...N,ref:g}):null]})}const{getEditNodeByPath:mde,getNodeByPath:yde,getPathFromKey:bde}=ek;function Cde(e){var t,n;const o=R(EU),i=R(SU),r=R(LU),l=R(kU),s=R(MU),c=R(TU),a=R(NU),u=Z(null),d=R(DU),{lang:f}=R(xU),h=Z(""),{kid:p,uid:v=pRe(),value:g}=e,m=null===(t=l.current.panel)||void 0===t?void 0:t[v],[y,b]=Od((()=>Gue(e,s,l.current))),C=Z(null),w=Z(null),x=lde(e,y,b,u,h),S=_((e=>{var t;null===(t=c.current)||void 0===t||t.commit((t=>{var n;const o=bde(p),i=mde(t.node,o);if(Lae(i)){void 0===i.props&&(i.props={});const t=i.props;t.value=null!==(n=t.value)&&void 0!==n?n:{},Object.assign(t.value,e)}return t}))}),[c,p]);F((()=>{if(m){const e=IHe(s.focus,tHe());Ec(i.gfocus,e)||o(s4(e))}}));const E={...e,...y,events:x.edit,onChange:S},k={...e,...y,events:x.option,lang:f,dispatch:b,onChange:S,onCopy:async e=>{const t=bde(p),{data:n}=s.editor,o=yde(n,t);await Tae(o,e)},onRemove:async()=>{var t;const n=null===(t=i.file)||void 0===t?void 0:t.currentPageId;if(!n)return;const{focus:l}=s;await a.safty(n);const c=[V4(n),hue(n,l,p),Z3(n),g9(pRe(!0))];await async function(){var t,n,o;const{value:i,id:l}=e;if(!i||!l)return;const{id:s,pageId:u}=i;if(!s||!u)return;const d=await _Y(u,r);if(!d)return;const f=null===(t=null==d?void 0:d.editor)||void 0===t?void 0:t[u];if(!f)return;const{data:h}=f,p=QWe(h,u,{},[s],d.reference),v=null===(o=null===(n=null==p?void 0:p.children)||void 0===n?void 0:n[0])||void 0===o?void 0:o.payload;v&&(await a.safty(u),c.push(aue(u,l,v,Cae,s),Z3(u)))}(),o(...c,p9(),b4())}},D={...Hue,...(null==g?void 0:g.id)&&_ue,...e.style},I=bde(p),N=null==s?void 0:s.editor.node;N&&Qde(N,I)&&(D.display="inline-block");const L=null!==(n=null==g?void 0:g.pageId)&&void 0!==n?n:null==g?void 0:g.text;return G(ede,{value:u,children:G(Xue,{value:h,children:G(Jue,{value:b,children:X("span",{style:Fue,children:[G("a",{style:D,ref:C,href:L,target:"_blank",...x.link,children:e.children}),e.editable&&y.visible&&$k(G(dde,{...k,type:"link"}),d,C),G("span",{style:Wue,ref:w}),e.editable&&y.visible&&y.mode===wxe.search&&$k(G(gde,{...E}),d,w)]})})})})}const{isDecorateNode:wde}=ek;function xde(e){var t;const n=R(Que),o=R(ede),{onClickSelector:i}=sde(e),r={...e,type:void 0,selector:Cue[null!==(t=e.lang)&&void 0!==t?t:"cn"][bue.backward],name:Cae,exclude(t,n){var o;return!(0===n[0]||!zve(t)&&!Vve(t))||!(!wde(t)||(null===(o=t.props)||void 0===o?void 0:o.uid)!==e.uid)},onClickSelector:i,onClose(){n(bae())}};return G("div",{style:zue,children:G(Bxe,{...r,ref:o})})}const{deleteNode:Sde,getNodeByPath:Ede,getPathFromKey:kde}=ek;function Dde(e){var t,n,o,i;const r=R(EU),l=R(SU),s=R(LU),c=R(kU),a=R(MU),u=R(TU),d=R(NU),f=Z(""),h=Z(null),p=R(DU),{lang:v}=R(xU),[g,m]=Od((()=>Gue(e,a,c.current))),y=Z(null),b=Z(null),{kid:C,id:w}=e;let x,S;if(w){const e=null===(n=null===(t=l.store)||void 0===t?void 0:t.reference)||void 0===n?void 0:n[w];if(e){const t=null!==(i=null===(o=e.data.props)||void 0===o?void 0:o.back)&&void 0!==i?i:{};x=Object.values(t),S=Object.keys(t)}}const E=lde(e,g,m,h,f),k=async()=>{var e,t;if(!w)return;const n=null===(e=l.file)||void 0===e?void 0:e.currentPageId;if(!n)return;const{focus:o}=a;await d.safty(n);const i=[V4(n),pue(n,o,C),Z3(n),g9(pRe(!0))];if((null==x?void 0:x.length)&&(null==S?void 0:S.length)){for(let e=0;e<x.length;e++){const n=x[e],r=await _Y(n,s),l=null===(t=null==r?void 0:r.editor)||void 0===t?void 0:t[n];if(!l)continue;const{data:c}=l,a={callback(e){var t;if(Lae(e)){const n=null===(t=e.props)||void 0===t?void 0:t.value;if(!(null==n?void 0:n.id))return!1;if(n.id!==w)return!0}return!1}},u=QWe(c,n,a,S,null==r?void 0:r.reference);if(!(null==u?void 0:u.children))continue;await d.safty(n);for(let e=u.children.length-1;e>=0;e--){const{payload:t}=u.children[e];i.push(due(n,w,C,o,t))}i.push(Z3(n))}r(...i,p9(),b4())}else r(...i,p9(),b4())},D={...e,...g,pageIds:x,targetIds:S,onRemove:k,events:E.edit},I={...e,...g,events:E.option,lang:v,dispatch:m,onCut:async()=>{var e;const t=kde(C),{data:n}=a.editor,o=Ede(n,t);null===(e=u.current)||void 0===e||e.commit(Sde(t)),await Aae(o)},onRemove:k};return G(ede,{value:h,children:G(Que,{value:m,children:X("span",{style:Fue,children:[G("span",{style:jue,ref:y,...Pf?{}:E.link,children:e.children}),e.editable&&g.visible&&$k(G(dde,{...I,type:"back"}),p,y),G("span",{style:Wue,ref:b}),g.visible&&g.mode===wxe.review&&$k(G(xde,{...D}),p,b)]})})})}var Ide={name:wae,hotkey:function(e){return Mf?"⌘+K":"Ctrl+K"},label:function(e){return Cue[e.lang][bue.link]},outer:function({children:e,...t}){var n;const o=R(NU),i=R(kU),r=t.lang,l=_((()=>{var e;const{modal:t,webdav:n,file:l}=o.stater.get();if((null==t?void 0:t.visible)||(null==n?void 0:n.visible))return;if(wje(l))return;const s=o.provider(),c=o.stater.get(),{imperator:a,rootdispatch:u}=s;null===(e=a.current)||void 0===e||e.commit(Rue(u,c,i,r)),u(s3())}),[o,i,r]);return Pue(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),l),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:l,children:[G(pae,{...t}),e]})},icon:pae},Nde=Object.freeze({__proto__:null,BACK_BACKGROUND_IMAGE:Sae,DEFAULT_HEIGHT:300,DEFAULT_WIDTH:600,FOCUS_FIELD:{OPTION:"option",INPUT:"input"},INPUT_HEIGHT:300,LINK_BACKGROUND_IMAGE:xae,addBack:cue,back:Cae,backblock:Dde,clearMode:gae,close:bae,decreaseBack:mue,decreaseLink:yue,default:Ide,deleteBack:pue,deleteLink:hue,increaseBack:gue,insertLink:Rue,isBackNode:Nae,isBackNodeTouchSelection:Rae,isEmptyChildren:function(e){return!!(We(e)&&e.length<=1)&&(void 0===e[0]||e[0]===Eae)},isLinkNode:Lae,isLinkNodeTouchSelection:Oae,isOutlineBranch:function(e,t,n){var o;if(void 0===n)return!1;const i=null===(o=n.editor)||void 0===o?void 0:o[t.id];if(void 0===i)return!1;const r=i.data,l=Kje(e.payload),{focus:{path:s}}=l,c=Dae(r,s,uae);return void 0!==c&&!!jve(kae(r,c),aae.H)},jump:Bae,linkblock:Cde,name:wae,pasteBack:uue,removeBack:aue,removeLink:due,resetLink:vue,resetSelectionBackNode:Oue,resetSelectionLinkNode:Mue,resetSelectionStatus:()=>e=>(void 0===e.selection||Nue(e.node,e.selection,((t,n)=>{var o;let i=n.length;for(;i>0;){const t=xue(e.node,n.slice(0,i));(Lae(t)||Nae(t))&&(null===(o=t.props)||void 0===o?void 0:o.value)&&(t.props.value.mode=void 0,t.props.value.optional=!1),i--}})),e),setLink:fue,setLinkStyle:mae,setMode:e=>t=>(t.mode=e,t),setOptional:yae,toggleMode:vae,writeBackToClipboard:Aae,writeLinkToClipboard:Tae});const Lde={position:"relative"},Bde={position:"absolute",top:0,right:0,bottom:0,left:0,border:`1px solid ${yf}`,zIndex:1},Tde={display:"inline-block",lineHeight:1.2,verticalAlign:"text-bottom"},Ade={position:"absolute",width:8,height:8,borderRadius:"50%",backgroundColor:yf,border:"1px solid #fff",boxShadow:"0 1px 4px 0 rgb(0 0 0 / 40%)"},Mde={...Ade,left:-5,top:-5,cursor:"nwse-resize"},Ode={...Ade,right:-5,bottom:-5,cursor:"nwse-resize"},Rde={...Ade,right:-5,top:-5,cursor:"nesw-resize"},Pde={...Ade,left:-5,bottom:-5,cursor:"nesw-resize"};var Fde=Object.freeze({__proto__:null,container:Lde,image:Tde,resize:Bde,resizeMark:Ade,resizeMarkNE:Rde,resizeMarkNW:Mde,resizeMarkSE:Ode,resizeMarkSW:Pde});const{isNode:Hde,isEditNode:_de,isMetaNode:jde,getEditNodeByPath:Wde,sliceDecoratePath:zde,comparePath:Vde,isCollapsed:$de,createMetaNode:Zde,isBlockNode:Ude,createInlineNode:qde,createReferenceInlineNode:Yde}=ek;function Kde(e,t){return{type:wW,children:null!=t?t:[],props:e}}function Gde(e){return Hde(e)&&e.type===wW}function Xde(e){return Hde(e)&&jde(e)&&Gde(e.children[0])}function Jde({width:e,height:t},n,o){let i=1;0!==e&&0!==t&&(i=(null!=e?e:1)/(null!=t?t:1));let r=o.pageX-n.pageX,l=o.pageY-n.pageY;return(Math.abs(r)>i*Math.abs(l)||0===l)&&(l=Math.abs(r)/i*(0===l?1:Math.abs(l)/l)),(Math.abs(r)<i*Math.abs(l)||0===r)&&(r=i*Math.abs(l)*(0===r?1:Math.abs(r)/r)),{x:r,y:l}}function Qde(e,t){let n=Wde(e,t);if(!_de(n))return!1;for(;1===n.children.length;){const e=n.children[0];if(Gde(e))return!0;if(!_de(e))break;n=e}return!1}function efe(e,t){let n=!1;const{editor:{node:o,selection:i}}=e,r=zde(o,t,Ide.name);if(r){if(Lae(Wde(o,r))&&(n=!0),$de(i)){const e=null==i?void 0:i.focus.path;e&&0===Vde(e,t)&&(n=!1)}}return n}async function tfe(e,t){return new Promise((n=>{const o=new k2.ArrayBuffer;o.append(e);const i=`${o.end()}.${t}`,r=new Blob([e],{type:t}),l=new FileReader;l.onload=async function(e){var t;const o=null===(t=e.target)||void 0===t?void 0:t.result;if(!sc(o))return;const r=new Image;r.onload=()=>n({image:r,hash:i}),r.src=o},l.readAsDataURL(r)}))}function nfe(e,t,n,o){const{naturalWidth:i,naturalHeight:r}=e,l=Math.min(i,t),s=r*(l/i),c=pRe();return Zde([Kde({hash:n,uid:c,type:o,value:{width:l,height:s}},[Yde({id:n,uid:c,type:wW})])],Tde)}function ofe(e){return G(j_,{...e,children:G(wR,{})})}const{useHotkey:ife}=cj;const rfe="quote",lfe={cn:{[rfe]:"引文"},en:{[rfe]:"Quote"}};const sfe=10,cfe="quote",{isDecorateBlockNode:afe}=ek;function ufe(e){var t;return afe(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===cfe}function dfe(){return{paddingTop:sfe,paddingBottom:sfe}}const{createDecorateBlockNode:ffe,decorateBlockNode:hfe,sortSelection:pfe,sliceDecoratePath:vfe,getEditNodeByPath:gfe}=ek;function mfe(e){var t,n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),{imperator:s,context:c}=l,a=null===(t=c.editor.selectionDecorate)||void 0===t?void 0:t[cfe];null===(n=s.current)||void 0===n||n.commit(yfe(a))}const yfe=e=>t=>{if(void 0===t.selection)return t;const{before:n}=pfe(t.selection),o=vfe(t.node,n.path,uae);if(o){if(zve(gfe(t.node,o)))return t}if(vfe(t.node,n.path,dae))return t;if(void 0===e){const e=ffe({type:cfe,subclass:cfe},[],dfe());t=hfe(e)(t)}else t=hfe()(t);return t},{SPLIT_BLOCK_MARGIN:bfe}=ek,Cfe={paddingLeft:15,position:"relative"},wfe={position:"relative",opacity:.72,top:-sfe},xfe={position:"absolute",left:0,top:bfe,bottom:bfe,width:2.5,transformOrigin:"left",backgroundColor:yf,borderRadius:1.3};function Sfe(e){const t=R(MU);let n=-sfe,o="100%";return t.virtual||(n=0,o="unset"),X("div",{style:{...Cfe,height:o},children:[G("div",{style:xfe}),G("div",{style:{...wfe,top:n},children:e.children})]})}var Efe={name:cfe,label:function(e){return lfe[e.lang][rfe]},hotkey:function(e){return Mf?"⌘+⌥+Y":"Ctrl+Alt+Y"},outer:function({children:e,...t}){var n;const o=R(NU),i=_((()=>{mfe(o)}),[o]);return ife(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),i),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:i,children:[G(ofe,{...t}),e]})},icon:ofe},kfe=Object.freeze({__proto__:null,QUOTE_MARGIN:sfe,block:Sfe,createQuoteBoxStyle:dfe,default:Efe,insertQuote:yfe,isQuoteNode:ufe,name:cfe,setQuote:mfe});function Dfe(e){return G(j_,{...e,children:G(xR,{})})}const{isNode:Ife}=ek;function Nfe(e){return Ife(e)&&e.type===the}function Lfe(e){return{type:the,children:[],props:e}}const{getEditNodeByPath:Bfe,getNodeByPath:Tfe,getPathFromKey:Afe,reflowEditNodeByPath:Mfe,setEditPending:Ofe}=ek,Rfe=(e,t)=>n=>{const o=n.editor,{node:i,data:r}=o,l=Afe(e),s=Bfe(i,l);return Nfe(s)&&(void 0===s.props&&(s.props={}),s.props.value=t),Mfe(l)(o),Ofe(!0)(o),n},{sortSelection:Pfe,createMetaNode:Ffe,insertNode:Hfe}=ek,_fe=e=>t=>{if(void 0===t.selection)return t;const{before:{path:n}}=Pfe(t.selection),o=AFe(t,n,e),i=Ffe([Lfe({value:{width:o}})],{display:"inline-block",verticalAlign:"bottom"});return t=Hfe(i)(t)};function jfe(e){const{modal:t,webdav:n,file:o}=e.stater.get();if((null==t?void 0:t.visible)||(null==n?void 0:n.visible))return;if(wje(o))return;const i=e.provider(),r=e.stater.get(),{context:l,imperator:s,rootdispatch:c}=i,a=r.editor.style,u=()=>{var e;null===(e=s.current)||void 0===e||e.commit(_fe(a))};l.root?w$e(l,e,c,u):u()}const{useHotkey:Wfe}=cj;const zfe="separator",Vfe={cn:{[zfe]:"分隔线"},en:{[zfe]:"Separator"}};const $fe={position:"relative",display:"inline-block",cursor:"default"},Zfe={position:"relative",backgroundColor:If,height:1,display:"inline-block",verticalAlign:"middle"},Ufe={position:"absolute",top:-1,right:0,bottom:-1,left:0,border:`1px solid ${yf}`,zIndex:1},qfe={position:"absolute",width:8,height:8,borderRadius:"50%",backgroundColor:yf,border:"1px solid #fff",boxShadow:"0 1px 4px 0 rgb(0 0 0 / 40%)",transform:"translateY(-50%)",top:"50%"},Yfe={...qfe,left:-5,cursor:"ew-resize"},Kfe={...qfe,right:-5,cursor:"ew-resize"},{getPathFromKey:Gfe}=ek;function Xfe(e){const t=Dd(e),n=R(NU),o=R(kU),i=R(EU),r=Dd(R(MU)),l=R(RU),s=Nd("pointerdown"),c=Nd("pointerdown");F((()=>{const e=SFe.POINTER_DOWN_MOVE_UNTIL_UP,{kid:a,value:{width:u=0}={}}=t.current,d=Gfe(a),f=s.subscribe((t=>{o.current.agent=e;const{dispatch:s}=n.provider(),c=pFe(r.current.editor);i(h7({type:e,action(e){const n=e.pageX-t.pageX;s(Rfe(a,{width:Math.max(0,Math.min(u+n,AFe(c,d)))}),P9()),l(i)}}))})),h=c.subscribe((t=>{o.current.agent=e;const{dispatch:s}=n.provider(),c=pFe(r.current.editor);i(h7({type:e,action(e){const n=e.pageX-t.pageX;s(Rfe(a,{width:Math.max(0,Math.min(u-n,AFe(c,d)))}),P9()),l(i)}}))}));return()=>{f.unsubscribe(),h.unsubscribe()}}),[i,n,t,r,o,s,c]);const a=Ld([s]),u=Ld([c]);return X("div",{style:Ufe,children:[G("div",{style:Kfe,...a}),G("div",{style:Yfe,...u})]})}const{getEditNodeByPath:Jfe,getPathFromKey:Qfe}=ek;function ehe({kid:e,...t}){var n;const o=R(MU),i=R(TU),r=R(kU),l=R(EU),s=_((()=>{r.current.agent!==SFe.POINTER_DOWN_MOVE_UNTIL_UP?requestAnimationFrame((()=>{var t;null===(t=i.current)||void 0===t||t.commit((t=>{const n=Qfe(e),o=Jfe(t.node,n);if(Nfe(o)){if(void 0===o.props)return t;delete o.props.mode}return t}))})):requestAnimationFrame((()=>{l(v7(s))}))}),[e,i,r,l]);return G("div",{style:$fe,onPointerDown:n=>{"resize"!==t.mode?requestAnimationFrame((()=>{l(v7(s))})):requestAnimationFrame(s),requestAnimationFrame((()=>{var t;null===(t=i.current)||void 0===t||t.commit((t=>{const n=Qfe(e),o=Jfe(t.node,n);if(Nfe(o)){void 0===o.props&&(o.props={});o.props.mode="resize"}return t}))}))},children:G("div",{style:{...Zfe,...t.style,width:MFe(o.editor,e,null===(n=t.value)||void 0===n?void 0:n.width)},children:!Pf&&t.editable&&"resize"===t.mode&&G(Xfe,{kid:e,...t})})})}const the="separator";var nhe={name:the,label:function(e){return Vfe[e.lang][zfe]},hotkey:function(e){return Mf?"⌘+⌥+-":"Ctrl+Alt+-"},outer:function({children:e,...t}){var n;const o=R(NU),i=_((()=>{jfe(o)}),[o]);return Wfe(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),i),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:i,children:[G(Dfe,{...t}),e]})},icon:Dfe},ohe=Object.freeze({__proto__:null,block:ehe,createSeparatorNode:Lfe,default:nhe,insertSeparator:_fe,isSeparatorNode:Nfe,name:the,separate:jfe,setSeparatorState:Rfe});const ihe=e=>t=>(t.visible=e,t),rhe=()=>e=>(e.visible=!e.visible,e),{isNode:lhe,isMetaNode:she}=ek;function che(e){return{type:Nz,children:[],props:e}}function ahe(e){return lhe(e)&&e.type===Nz}function uhe(e){return lhe(e)&&she(e)&&ahe(e.children[0])}const{isCollapsed:dhe,createMetaInlineNode:fhe,insertNode:hhe,deleteFragment:phe,getEditNodeByPath:vhe,clearSelection:ghe}=ek,mhe=()=>e=>{if(void 0===e.selection)return e;if(dhe(e.selection)||(e=phe()(e)),void 0===e.selection)return e;const t=e.selection.focus.path;if(void 0===t)return e;if(ahe(vhe(e.node,t)))return e;const n=fhe([che({uid:pRe(),initState:{sync:!0,visible:!0}})],{WebkitTextFillColor:"initial"});return e=hhe(n)(e),e=ghe()(e)},{useHotkey:yhe}=cj;const bhe={position:"relative",display:"inline-flex"},Che={cursor:"pointer",display:"inline-flex",fontFamily:"Segoe UI Emoji, Segoe UI Symbol, Segoe UI, Apple Color Emoji, Twemoji Mozilla, Noto Color Emoji, Android Emoji"},whe={position:"absolute",left:0,right:0,bottom:0},xhe={opacity:.7,filter:"grayscale(1)"},{ITEM_HEIGHT:She,INPUT_HEIGHT:Ehe,keyEmoji:khe}=Hz;function Dhe(){return G("span",{style:xhe,children:"🙂"})}const{clearSelection:Ihe,getPathFromKey:Nhe}=ek;const{getEditNodeByPath:Lhe,getPathFromKey:Bhe}=ek;function The({children:e,...t}){var n,o;const i=R(kU),r=R(DU),{lang:l}=R(xU),s=R(IU),c=R(MU),a=R(TU),[u,d]=Od((()=>function(e,t,n){var o;const{initState:i,uid:r=pRe(!0)}=e,l={...i,visible:!!(null==i?void 0:i.visible),layout:{height:Object.keys(khe).length*She+Ehe}};if(!(null==t?void 0:t.focus))return l;const{focus:s}=t,c=MHe(IHe(s,iHe(r)));for(const e in n.options){const t=null===(o=n.options)||void 0===o?void 0:o[e];e===c&&(l.visible=t.visible,l.layout=t.layout)}return l}(t,c,i.current))),{kid:f,uid:h=pRe()}=t,p=Z5(f,iHe(h)),v=null===(n=t.initState)||void 0===n?void 0:n.sync,g=Z(null),m=function(e,t,n,o){const i=o[2],r=Dd(R(MU)),l=R(TU),s=R(EU),c=R(IU),a=Nd("click"),u=Nd("pointerdown");return F((()=>{const e=a.subscribe((e=>{var t;if(Uf)return;const{focus:o}=r.current;null===(t=l.current)||void 0===t||t.commit((e=>Ihe()(e))),n(rhe()),s(s4(o),NDe()),c()}));return()=>e.unsubscribe()}),[a,l,r,n,s,c]),F((()=>{const e=u.subscribe((e=>{e.stopPropagation()}));return()=>e.unsubscribe()}),[u]),F((()=>{if(!t.visible)return;let e=-1;const o=()=>{i(),e=requestAnimationFrame((()=>{n(ihe(!1))}))};return s(v7(o)),window.addEventListener("pointerdown",o),()=>{s(g7(o)),window.removeEventListener("pointerdown",o),cancelAnimationFrame(e)}}),[n,s,i,t.visible]),{emoji:Ld([a,u])}}(0,u,d,p);H((()=>{p[1]({...u})})),F((()=>{var e;v&&(null===(e=a.current)||void 0===e||e.commit((e=>{var t;const n=Bhe(f),o=Lhe(e.node,n);return ahe(o)&&(null===(t=o.props)||void 0===t||delete t.initState),e})),s())}),[v,f,a,s]);const y=!1!==t.editable,b={random:!0,...t,onChange:({emoji:e})=>{var n;null===(n=a.current)||void 0===n||n.commit((n=>{const o=Bhe(t.kid),i=Lhe(n.node,o);return ahe(i)&&i.props?(i.props.value={emoji:e},delete i.props.initState,n):n})),d(ihe(!1)),s()},lang:l},C=null===(o=b.value)||void 0===o?void 0:o.emoji,w=!Mf&&!Af&&!Wf,x={...Che};return w&&(x.width="1.1em",x.height="1.1em",x.alignItems="center",x.justifyContent="center"),x.cursor=y?"pointer":"auto",X("span",{style:{...bhe,verticalAlign:w?"text-bottom":"",...t.style},children:[G(ch,{...m.emoji,style:x,children:C?w?G(jz,{emoji:C,position:!0}):C:G(Dhe,{})}),G("span",{style:{...whe,bottom:w?-5:0},ref:g}),y&&u.visible&&$k(G(ch,{onPointerDown:e=>e.stopPropagation(),children:G(Wz,{...b})}),r,g)]})}const Ahe=Nz;var Mhe={...zz,outer:function({children:e,...t}){var n;const o=R(NU),i=_((()=>{const{modal:e,webdav:t,file:n}=o.stater.get();if((null==e?void 0:e.visible)||(null==t?void 0:t.visible))return;if(wje(n))return;const i=o.provider(),{context:r,imperator:l,rootdispatch:s}=i,c=()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.commit(mhe())};r.root?w$e(r,o,s,c):c()}),[o]);return yhe(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),i),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:i,children:[G(Mz,{...t}),e]})}},Ohe=Object.freeze({__proto__:null,block:The,createEmojiNode:che,default:Mhe,insertEmoji:mhe,isEmojiNode:ahe,isMetaEmojiNode:uhe,name:Ahe,setVisible:ihe,toggleVisible:rhe});function Rhe(e){return G(j_,{...e,children:G(SR,{width:13})})}const Phe="reference",Fhe="linear-gradient(90deg, rgb(177, 106, 77) 0%, rgb(213, 166, 56) 100%)",{isDecorateInlineNode:Hhe}=ek;function _he(e){var t;return Hhe(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===Phe}const{getEditNodeByPath:jhe}=ek;function Whe(e,t){const n=e.editor;let o=n.selection;if(void 0===o)return!1;const i=o.focus.path;let r=i.length;for(;r>0;){if(_he(jhe(n.node,i.slice(0,r))))return!0;r--}const l=o.focus.path;let s=l.length;for(;s>0;){if(_he(jhe(n.node,l.slice(0,s))))return!0;s--}return!1}const zhe={reference:"reference",review:"review",remove:"remove",search:"search",placeholder:"placeholder"},Vhe={cn:{[zhe.reference]:"双链",[zhe.review]:"查看双链",[zhe.remove]:"取消双链",[zhe.search]:"编辑双链",[zhe.placeholder]:"请输入关键字搜索关联双链"},en:{[zhe.reference]:"Refer",[zhe.review]:"Read Refer",[zhe.remove]:"Cancel Refer",[zhe.search]:"Edit Refer",[zhe.placeholder]:"Please enter a keyword to search for associated reference"}},{getEditNodeByPath:$he,isCollapsed:Zhe,isReferenceNode:Uhe,sliceDecoratePath:qhe,traversalEditNodeBySelection:Yhe,createDecorateInlineNode:Khe,createReferenceInlineNode:Ghe,convergeBlockSelection:Xhe,decorateNode:Jhe,clearSelection:Qhe}=ek,epe=()=>e=>{if(!e.selection||!Zhe(e.selection))return e;let t=e.selection.focus.path;for(;null==t?void 0:t.length;){if(t=qhe(e.node,t,Phe),void 0===t)return e;const n=$he(e.node,t);if(!_he(n))return e;const o=pRe();n.props&&(n.props.id=o,n.props.uid=pRe());const i=n.children[0];Uhe(i)&&i.props&&(i.props.id=o,i.props.uid=pRe()),t=ec(t)}return e},tpe=(e,t,n,o)=>i=>{const{node:r,selection:l,selectionDecorate:s}=i;if(!l)return i;const c=Vhe[o][zhe.reference];if(uCe(e,t,r,l,c))return i;if(void 0===(null==s?void 0:s[Phe])){const e=pRe(),t=pRe(),o=Khe({id:e,uid:t,type:Phe,subclass:Phe},[Ghe({id:e,uid:pRe()})]);i=Xhe()(i),i=Jhe(o)(i),Zhe(i.selection)||(i=Qhe()(i)),n.current.panel||(n.current.panel={}),n.current.panel[t]=!0}return i},npe=e=>t=>(t.mode=e,t),ope=e=>t=>t=t.mode===e?ipe()(t):npe(e)(t),ipe=()=>e=>(delete e.mode,e),rpe=e=>t=>(t.visible=e,t),lpe=()=>e=>(e=ipe()(e),e=rpe(!1)(e)),{useHotkey:spe}=cj;const{getPathFromKey:cpe}=ek;const ape={position:"relative"},upe={...{color:"rgb(195, 136, 67)",textShadow:"none",backgroundImage:Fhe,WebkitTextFillColor:"transparent",WebkitBackgroundClip:"text",WebkitBoxDecorationBreak:"clone"},cursor:"pointer"},dpe={position:"absolute",zIndex:1,display:"flex",justifyContent:"center",cursor:"default",left:"50%",top:-5},fpe={...{boxShadow:Nf,borderRadius:4,position:"absolute",display:"flex"},alignItems:"center",transform:"translateY(-100%)",padding:"4px 3px"},hpe={borderRadius:2,margin:"0 2px"},ppe={width:24,height:24,borderRadius:2,display:"flex",justifyContent:"center",alignItems:"center"},vpe=U(null),gpe=U(null),mpe=U(null),ype=U(null),{clearSelection:bpe,getNodeByPath:Cpe,getNodeEndPath:wpe,getNodeLength:xpe,getNodeStartPath:Spe,getEditNodeByPath:Epe,getPathFromKey:kpe,isNode:Dpe}=ek,Ipe=[{key:zhe.review,icon:function(){return X("svg",{width:"13",viewBox:"0 0 12 12",children:[G("path",{fill:kf,d:"M10.2 1.27957e-05C9.20588 1.27957e-05 8.4 0.799235 8.4 1.78513C8.4 1.97307 8.42936 2.15418 8.48366 2.32431L3.45431 5.0953L3.74569 5.61546L8.75808 2.85382C9.08636 3.28876 9.61003 3.57025 10.2 3.57025C11.1941 3.57025 12 2.77103 12 1.78513C12 0.799235 11.1941 1.27957e-05 10.2 1.27957e-05ZM10.2 2.97521C9.53831 2.97521 8.99999 2.44135 8.99999 1.78513C8.99999 1.12891 9.53831 0.595048 10.2 0.595048C10.8617 0.595048 11.4 1.12891 11.4 1.78513C11.4 2.44135 10.8617 2.97521 10.2 2.97521Z"}),G("path",{fill:kf,d:"M8.9765 7.19306C8.07371 7.19306 7.28632 7.68265 6.86929 8.40867L3.86074 6.78465C3.88692 6.65696 3.90008 6.52699 3.90002 6.39669C3.90002 5.73537 3.56521 5.15167 3.05462 4.80295L4.06922 2.44121C4.32288 2.40403 4.56716 2.28872 4.76241 2.09509C5.24568 1.61582 5.24568 0.83875 4.76241 0.359462C4.52078 0.119825 4.20407 0 3.88737 0C3.57067 0 3.25397 0.119825 3.01233 0.359462C2.52906 0.838737 2.52906 1.6158 3.01233 2.09509C3.13677 2.2187 3.28648 2.31441 3.45137 2.37578L2.49711 4.54008C2.31936 4.4887 2.13514 4.46268 1.95 4.4628C0.873056 4.4628 0 5.32863 0 6.39669C0 7.46475 0.873056 8.33057 1.95 8.33057C2.679 8.33057 3.31449 7.93377 3.64908 7.34612L6.63882 8.961C6.58175 9.16809 6.55289 9.38184 6.55301 9.59653C6.55301 10.9239 7.63805 12 8.97651 12C10.315 12 11.4 10.9239 11.4 9.59653C11.4 8.26913 10.315 7.19306 8.9765 7.19306ZM3.97496 2.45455L3.96894 2.45158C3.97287 2.45132 3.97681 2.45103 3.98075 2.45073L3.97496 2.45455ZM3.43657 0.780225C3.55698 0.660809 3.71707 0.595047 3.88736 0.595047C4.05764 0.595047 4.21773 0.660809 4.33813 0.780225C4.58669 1.02673 4.58669 1.42783 4.33813 1.67433C4.21772 1.79375 4.05763 1.85951 3.88735 1.85951C3.71706 1.85951 3.55697 1.79375 3.43657 1.67433C3.18802 1.42783 3.18802 1.02673 3.43657 0.780225ZM1.95 7.73554C1.20561 7.73554 0.599994 7.13493 0.599994 6.3967C0.599994 5.65847 1.20559 5.05787 1.95 5.05787C2.69441 5.05787 3.30001 5.65847 3.30001 6.3967C3.30001 7.13493 2.6944 7.73554 1.95 7.73554ZM10.2659 10.8753C9.92149 11.2168 9.46357 11.4049 8.9765 11.4049C8.48942 11.4049 8.0315 11.2168 7.68709 10.8753C7.34268 10.5337 7.15299 10.0796 7.15299 9.59652C7.15299 9.11347 7.34266 8.65933 7.68709 8.31777C8.0315 7.9762 8.48942 7.7881 8.9765 7.7881C9.46357 7.7881 9.92149 7.9762 10.2659 8.31777C10.6103 8.65933 10.8 9.11347 10.8 9.59652C10.8 10.0796 10.6103 10.5337 10.2659 10.8753Z"}),G("path",{fill:kf,d:"M0.5 6.5C0.5 6.89782 0.658035 7.27936 0.93934 7.56066C1.22064 7.84196 1.60218 8 2 8C2.39782 8 2.77936 7.84196 3.06066 7.56066C3.34196 7.27936 3.5 6.89782 3.5 6.5C3.5 6.10218 3.34196 5.72064 3.06066 5.43934C2.77936 5.15804 2.39782 5 2 5C1.60218 5 1.22064 5.15804 0.93934 5.43934C0.658035 5.72064 0.5 6.10218 0.5 6.5V6.5Z"})]})}},{key:zhe.search,icon:sO},{key:zhe.remove,icon:oO}];function Npe(e){const t=R(MU),n=R(TU),o=R(gpe),i=R(vpe),r=R(ype),l=R(SU),s=R(IU),c=R(EU),a=R(kU),u=RHe(t.focus);return G("div",{style:{...dpe,...e.style,zIndex:u},children:G(hh,{style:fpe,onClick:e.onClick,onPointerDown:e=>e.stopPropagation(),...e.events,children:Ipe.map((u=>{const d=e.lang?Vhe[e.lang][u.key]:u.key,f={};return u.key===e.mode&&(f.backgroundColor=Cf),G(Bk,{tips:d,direction:"top",children:G("div",{style:{...hpe,...f},children:G(dv,{style:ppe,onClick:d=>(async(u,d)=>{var f,h,p,v,g,m;const y=[],b=[];let C=!1;if(d===zhe.search){u.stopPropagation();const o=wxe.search;y.push(ope(o)),e.mode===o&&(C=!0),t.editor.selection&&(null===(f=n.current)||void 0===f||f.commit(bpe()))}else if(d===zhe.review){u.stopPropagation();const o=wxe.review;y.push(ope(o)),e.mode===o&&(C=!0),t.editor.selection&&(null===(h=n.current)||void 0===h||h.commit(bpe()))}else if(d===zhe.remove){C=!0;const n=null===(p=l.file)||void 0===p?void 0:p.currentPageId;if(n){const{focus:o,editor:{data:i,node:r}}=t,l=kpe(e.kid);let s=null;if(s=wHe(o)?Epe(r,l):Cpe(i,l),Dpe(s)){const e=Spe(s),t=0,i=wpe(s),r=Cpe(s,i),c=xpe(r),a={focus:{path:[...l,...e],offset:t},anchor:{path:[...l,...i],offset:c}};aHe(o)&&o.child&&(a.search=o.child),b.push(V4(n),zbe(n,a,Phe),Z3(n))}}b.push(N9("updated"),g9(pRe(!0)),p9(),b4())}const w=null===(v=l.file)||void 0===v?void 0:v.currentPageId;if(w&&b.push(V4(w)),C&&(null===(g=r.search.current)||void 0===g||g.reset(),null===(m=r.review.current)||void 0===m||m.reset(),y.push(ipe(),rpe(!1))),o.uid){const e=kpe(o.kid),n=IHe(t.focus,GFe(e),oHe());Ec(l.gfocus,n)||(b.push(s4(n)),b.push(DDe(n,[])),b.push(pq()))}y.length&&(y.push(Lwe(e,t,a)),i(...y)),b.length&&c(...b),requestAnimationFrame(s)})(d,u.key),children:G(u.icon,{})})})},u.key)}))})})}const{getPathFromKey:Lpe}=ek;const{isDecorateNode:Bpe}=ek;function Tpe(e){var t;const n=R(xU),o=R(DU),i=R(EU),r=R(kU),l=R(MU),s=Z(null),c=Z(null);let[a,u]=Od((()=>function(e,t,n){var o,i,r,l;const{uid:s=pRe(!0),kid:c}=e,a=null!==(i=null===(o=n.panel)||void 0===o?void 0:o[s])&&void 0!==i&&i,u={visible:a,mode:a?wxe.search:void 0};if(null===t)return u;null===(r=n.panel)||void 0===r||delete r[s];const{focus:d}=t,f=MHe(IHe(d,GFe(Lpe(c)),QFe(s)));for(const e in n.options)if(e.startsWith(f)){const t=null===(l=n.options)||void 0===l?void 0:l[e];if(!(null==t?void 0:t.mode))continue;[f,t.mode].join(h$)===e&&t.visible&&(u.mode=t.mode,u.visible=t.visible)}return u}(e,l,r.current)));const d=Z(null),f={search:s,review:c},h=e=>{var t,n;null===(t=f.search.current)||void 0===t||t.layout(e),null===(n=f.review.current)||void 0===n||n.layout(e)},p=function(e,t,n){const o=Dd(e),i=Dd(t),r=R(EU),l=R(IU),s=R(kU),c=Dd(R(MU)),a=Nd("pointerdown"),u=Nd("pointerenter"),d=Nd("pointerleave"),f=Nd("pointermove"),h=Nd("click"),p=Nd("pointerenter"),v=Nd("pointerleave"),g=Nd("click"),m=Nd("pointerup");return F((()=>(window.addEventListener("pointerup",m.listener),()=>{window.removeEventListener("pointerup",m.listener)})),[m]),F((()=>{const e=bu(u,a).pipe(Iu((()=>f.pipe(Su(150)).pipe(Eu(1)).pipe(Nu(d)).pipe(Nu(g))))).subscribe((e=>{n(rpe(!0))}));return()=>e.unsubscribe()}),[o,a,u,d,f,g,h,n]),F((()=>{const e=bu(u.pipe(Iu((()=>d.pipe(Du(150)).pipe(Nu(p))))),a.pipe(Iu((()=>f.pipe(Eu(1))))),p.pipe(Iu((()=>v.pipe(Du(150)).pipe(Nu(u))))),g,h).subscribe((e=>{const{mode:t,visible:o}=i.current;!t&&o&&n(rpe(!1))}));return()=>e.unsubscribe()}),[i,a,u,d,f,h,p,v,g,n]),F((()=>{const e=a.pipe(Iu((()=>m.pipe(Eu(1))))).subscribe((()=>{const{kid:e,uid:t=pRe(!0)}=o.current,i=wxe.review;n(rpe(!0),ope(i),(n=>{const{mode:o,visible:i}=n;if(!o)return delete s.current.options,n;const r=cpe(e),l=[MHe(IHe(c.current.focus,GFe(r),QFe(t))),o].join(h$);return void 0===s.current.options&&(s.current.options={}),s.current.options[l]={...s.current.options[l],mode:o,visible:i},n})),requestAnimationFrame(l)}));return()=>{e.unsubscribe()}}),[o,i,c,r,l,s,n,a,m]),{refer:Ld([a,u,d,f,h]),option:Ld([p,v,g])}}(e,a,u),v={...{...e,lang:n.lang},...a,events:p.option},g={...e,...a,selector:Vhe[null!==(t=e.lang)&&void 0!==t?t:"cn"][zhe.reference],exclude(t,n){var o;return!(0===n[0]||!zve(t)&&!Vve(t))||!(!Bpe(t)||(null===(o=t.props)||void 0===o?void 0:o.uid)!==e.uid)},onClose(){u(lpe()),i(s4(ZFe()))},name:Phe};return G(vpe,{value:u,children:G(ype,{value:f,children:G(gpe,{value:e,children:G(mpe,{value:a,children:X("span",{style:ape,children:[G("span",{style:upe,ref:d,...Pf?{}:p.refer,children:e.children}),e.editable&&a.visible&&$k(G(Npe,{...v}),o,d),a.visible&&"search"===a.mode&&$k(G(kxe,{...g,type:"checkbox",ref:s}),o,d,"bottom",h),a.visible&&"review"===a.mode&&$k(G(Bxe,{...g,ref:c}),o,d,"bottom",h)]})})})})})}var Ape={name:Phe,hotkey:function(e){return Mf?"⌘+⌥+S":"Ctrl+Alt+S"},label:function(e){return Vhe[e.lang][zhe.reference]},outer:function({children:e,...t}){var n;const o=R(NU),i=R(kU),r=t.lang,l=_((()=>{var e;const{modal:t,webdav:n,file:l}=o.stater.get();if((null==t?void 0:t.visible)||(null==n?void 0:n.visible))return;if(wje(l))return;const s=o.provider(),{imperator:c,rootdispatch:a,rootstate:u}=s;null===(e=c.current)||void 0===e||e.commit(tpe(a,u,i,r))}),[o,i,r]);return spe(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),l),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:l,children:[G(Rhe,{...t}),e]})},icon:Rhe},Mpe=Object.freeze({__proto__:null,DEFAULT_HEIGHT:330,DEFAULT_WIDTH:600,FOCUS_FIELD:{OPTION:"option"},HEADER_HEIGHT:30,REFER_BACKGROUND_IMAGE:Fhe,block:Tpe,clearMode:ipe,close:lpe,default:Ape,insertRefer:tpe,isReferNode:_he,isReferNodeTouchSelection:Whe,name:Phe,resetSelectionReferNode:epe,resetSelectionStatus:()=>e=>(void 0===e.selection||Yhe(e.node,e.selection,((t,n)=>{var o;let i=n.length;for(;i>0;){const t=$he(e.node,n.slice(0,i));_he(t)&&(null===(o=t.props)||void 0===o?void 0:o.value)&&(t.props.value.mode=void 0,t.props.value.optional=!1),i--}})),e),setMode:npe,setOptional:rpe,toggleMode:ope});const{useHotkey:Ope}=cj;var Rpe={...Hj,inner:function(e){return G(Pj,{...e,value:[lve,$Ne,Ide,Ape,Efe,nhe,Mhe]})},outer:function(e){var t;const n=R(NU),{name:o}=e,i=_((()=>{const{modal:e,webdav:t,file:i}=n.stater.get();(null==e?void 0:e.visible)||(null==t?void 0:t.visible)||wje(i)||n.dispatch(u7(o,!0))}),[o,n]);return Ope(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),i),X(K,{children:[G(Rj,{...e,onClick:i}),G(lve.outer,{...e,hotkey:lve.hotkey,silence:!0}),G(Ide.outer,{...e,hotkey:Ide.hotkey,silence:!0}),G(Ape.outer,{...e,hotkey:Ape.hotkey,silence:!0}),G(Efe.outer,{...e,hotkey:Efe.hotkey,silence:!0}),G(nhe.outer,{...e,hotkey:nhe.hotkey,silence:!0}),G(Mhe.outer,{...e,hotkey:Mhe.hotkey,silence:!0})]})}};const{insertNode:Ppe,sortSelection:Fpe}=ek;const{getEditNodeByPath:Hpe,sortSelection:_pe,getPathFromKey:jpe,reflowEditNodeByPath:Wpe,setEditPending:zpe,getPathReference:Vpe,insertNode:$pe}=ek,{limitImageSize:Zpe}=rk;const Upe=(e,t)=>n=>{const o=n.editor,{node:i,data:r}=o,l=jpe(e),s=Zpe(t,10),c=Hpe(i,l);Gde(c)&&(void 0===c.props&&(c.props={}),c.props.value=s),Wpe(l)(o),zpe(!0)(o);const a=Vpe(i,l);return n=D9(a)(n)},{getEditNodeByPath:qpe,getPathFromKey:Ype,isMetaNode:Kpe,transformNodeToEditNode:Gpe,reflowEditNodeByPath:Xpe}=ek;function Jpe(e){var t,n;const o=R(EU),i=Dd(R(SU)),r=R(kU),l=R(TU),s=P(),[c,a]=$((()=>{var t,n;return s?null!==(t=e.src)&&void 0!==t?t:e.hash:(null===(n=e.src)||void 0===n?void 0:n.startsWith("data:image"))||e.nocache?e.src:"undefined"!=typeof electron?"":e.src})),{hash:u,uid:d,kid:f}=e;let h=r.current.assets;void 0===h&&(h=r.current.assets={cache:{},update:{},pending:{}}),d&&u&&((null===(t=h.cache)||void 0===t?void 0:t[u])?null===(n=h.update)||void 0===n||delete n[d]:(h.update||(h.update={}),h.update[d]=a)),F((()=>{var t;if(!e.src||e.nocache||"undefined"==typeof electron)return;const n=e.src;if(n.startsWith("data:image"))return;const s=null===(t=electron.net)||void 0===t?void 0:t.fetch;s&&(async()=>{var e,t;let c=r.current.assets.pending;if(c||(c=r.current.assets.pending={}),c[n])return;c[n]=!0;const{ok:u,data:d}=await s(n,{type:"arrayBuffer"});if(0===u)return;if(!mc(null==d?void 0:d.content))return;const{content:h,type:p}=d,{image:v,hash:g}=await tfe(h,p),m=i.current.store,y=await wF(g);if(0!==y.ok&&y.data){if(!(null===(e=null==m?void 0:m.reference)||void 0===e?void 0:e[g])){const e=await HY(g);e&&o(lq({[g]:e}))}}else await yF(g,h);c[n]=!1,a(""),null===(t=l.current)||void 0===t||t.commit((e=>{var t,n,o,i,r;const l=Ype(f),s=qpe(e.node,l);if(!Gde(s))return e;const c=qpe(e.node,ec(l));if(!Kpe(c))return e;const a=null!==(o=null===(n=null===(t=c.children[0].props)||void 0===t?void 0:t.value)||void 0===n?void 0:n.width)&&void 0!==o?o:AFe(e,l),u=nfe(v,a,g,p).children[0],d=null===(i=s.props)||void 0===i?void 0:i.value,h=null===(r=u.props)||void 0===r?void 0:r.value;return d&&h&&(void 0!==d.height&&void 0!==d.width?u.props.value=d:void 0!==d.height?u.props.value={height:d.height,width:h.width*d.height/h.height}:void 0!==d.width&&(u.props.value={width:d.width,height:h.height*d.width/h.width})),c.children[0]=Gpe(u,f),e=Xpe(l)(e)}))})()}),[e.src,e.nocache,f,r,l,i,o]),H((()=>{var e;if(!u||!d||c)return;const t=r.current.assets,n=null===(e=null==t?void 0:t.cache)||void 0===e?void 0:e[u];if(n)return void a(n);let o=r.current.assets.pending;o||(o=r.current.assets.pending={}),o[d]||(o[d]=!0,(async()=>{var e,n;const{ok:i,data:r}=await wF(u);o[d]=!1,1===i&&r&&t&&(t.cache||(t.cache={}),t.cache[u]=r,t.update||(t.update={}),null===(n=(e=t.update)[d])||void 0===n||n.call(e,r))})())}),[u,d,c,r]);return{src:c,onLoad:t=>{var n,o,i;if(!e.src||"undefined"!=typeof electron)return;if((null===(n=e.value)||void 0===n?void 0:n.width)&&(null===(o=e.value)||void 0===o?void 0:o.height))return;const{naturalWidth:r,naturalHeight:s}=t.target;null===(i=l.current)||void 0===i||i.commit((e=>{const t=Ype(f),n=qpe(e.node,t);if(Gde(n)){void 0===n.props&&(n.props={});const o=AFe(e,t),i=Math.min(r,o),l=s*(i/r);n.props.value={width:i,height:l},e=Xpe(t)(e)}return e}))}}}function Qpe(e){const t=R(MU),n={...e.style},o=Ype(e.kid);return t&&efe(t,o)&&(n.cursor="pointer"),{image:n,container:Lde}}function eve(e){const{ne:t,nw:n,se:o,sw:i}=function(e){const t=Dd(e),n=R(NU),o=R(kU),i=R(EU),r=R(RU),l=Nd("pointerdown"),s=Nd("pointerdown"),c=Nd("pointerdown"),a=Nd("pointerdown"),u=Nd("pointerup");return F((()=>{const e=SFe.POINTER_DOWN_MOVE_UNTIL_UP,u=l.subscribe((l=>{o.current.agent=e;const{kid:s,value:c={}}=t.current,{width:a=0,height:u=0}=c,{dispatch:d}=n.provider();i(h7({type:e,action(e){let{x:t,y:n}=Jde(c,l,e);t>0&&n>0?n=-n:t<0&&n<0&&(t=-t),d(Upe(s,{width:a+t,height:u-n}),P9()),r(i)}}))})),d=s.subscribe((l=>{o.current.agent=e;const{kid:s,value:c={}}=t.current,{width:a=0,height:u=0}=c,{dispatch:d}=n.provider();i(h7({type:e,action(e){let{x:t,y:n}=Jde(c,l,e);t<0&&n>0?n=-n:t>0&&n<0&&(t=-t),d(Upe(s,{width:a-t,height:u-n}),P9()),r(i)}}))})),f=c.subscribe((l=>{o.current.agent=e;const{kid:s,value:c={}}=t.current,{width:a=0,height:u=0}=c,{dispatch:d}=n.provider();i(h7({type:e,action(e){let{x:t,y:n}=Jde(c,l,e);t>0&&n<0?n=-n:t<0&&n>0&&(t=-t),d(Upe(s,{width:a+t,height:u+n}),P9()),r(i)}}))})),h=a.subscribe((l=>{o.current.agent=e;const{kid:s,value:c={}}=t.current,{width:a=0,height:u=0}=c,{dispatch:d}=n.provider();i(h7({type:e,action(e){let{x:t,y:n}=Jde(c,l,e);t<0&&n<0?n=-n:t>0&&n>0&&(t=-t),d(Upe(s,{width:a-t,height:u+n}),P9()),r(i)}}))}));return()=>{u.unsubscribe(),d.unsubscribe(),f.unsubscribe(),h.unsubscribe()}}),[i,r,t,n,o,l,s,c,a]),{ne:Ld([l]),nw:Ld([s]),se:Ld([c]),sw:Ld([a]),re:Ld([u])}}(e);return X("div",{style:Bde,children:[G("div",{style:Rde,...t}),G("div",{style:Mde,...n}),G("div",{style:Ode,...o}),G("div",{style:Pde,...i})]})}function tve(e){return G(Pf?ove:nve,{...e})}function nve(e){const{src:t,onLoad:n}=Jpe(e),{image:o,container:i}=Qpe(e),r=function(e){const t=Dd(e),n=R(kU),o=R(EU),i=R(TU),r=R(AU),l=Dd(R(MU)),s=Nd("pointerdown"),c=_((()=>{n.current.agent!==SFe.POINTER_DOWN_MOVE_UNTIL_UP?requestAnimationFrame((()=>{var e;null===(e=i.current)||void 0===e||e.commit((e=>{const n=Ype(t.current.kid),o=qpe(e.node,n);if(Gde(o)){if(void 0===o.props)return e;delete o.props.mode}return e}))})):requestAnimationFrame((()=>{o(v7(c))}))}),[t,i,n,o]);return F((()=>{const e=s.subscribe((()=>{const e=l.current,{mode:n,kid:r}=t.current,s=Ype(r);efe(e,s)||("resize"!==n?requestAnimationFrame((()=>{o(v7(c))})):requestAnimationFrame(c),requestAnimationFrame((()=>{var e;null===(e=i.current)||void 0===e||e.commit((e=>{const t=qpe(e.node,s);return Gde(t)&&(void 0===t.props&&(t.props={}),t.props.mode="resize"),e}))})))}));return()=>{e.unsubscribe()}}),[t,c,s,i,l,r,o]),Ld([s])}(e);return X("div",{style:i,...r,children:[G(lk,{...e,style:o,src:t,onLoad:n}),e.editable&&"resize"===e.mode&&G(eve,{...e})]})}function ove(e){const{src:t,onLoad:n}=Jpe(e),{image:o,container:i}=Qpe(e);return G("div",{style:i,children:G(lk,{...e,style:o,src:t,onLoad:n})})}const ive=wW,rve=DO;var lve={...xW,outer:function(e){const t=R(NU),n=async(e,n)=>{var o,i,r,l;const s=null===(o=e.target)||void 0===o?void 0:o.result;if(!mc(s))return;const{image:c,hash:a}=await tfe(s,n),u=t.provider(),d=t.stater.get(),{imperator:f,rootdispatch:h}=u,p=await wF(a);if(0!==p.ok&&p.data){if(!(null===(r=null===(i=d.store)||void 0===i?void 0:i.reference)||void 0===r?void 0:r[a])){const e=await HY(a);e&&h(lq({[a]:e}))}}else await yF(a,s);h(d7(Rpe.name,!1));const v=d.editor.style;null===(l=f.current)||void 0===l||l.commit((e=>{if(void 0===e.selection)return e;const{before:{path:t}}=Fpe(e.selection),o=3*AFe(e,t,v)/4,i=nfe(c,o,a,n);return e=Ppe(i)(e)}))};return G(CW,{...e,dataType:"array-buffer",onClick:e=>{e.stopPropagation()},onLoad:(e,o)=>{const i=t.provider(),{context:r,rootdispatch:l}=i;r.root?w$e(r,t,l,(()=>n(e,o))):n(e,o)}})}},sve=Object.freeze({__proto__:null,AGENT:"image-resize",block:tve,calcOffset:Jde,createImageNode:Kde,default:lve,generateImageMetaNode:nfe,icon:rve,isBlockNodeSole:function(e,t){let n=0;for(;n<t.length;){const o=e.children[t[n]];if(Ude(o))e=o,n++;else{if(1!==e.children.length||!Hde(o))return!1;e=o,n++}}return!0},isImageNode:Gde,isLinkImageStatus:efe,isMetaImageNode:Xde,isOnlyImagePath:Qde,loadImage:tfe,name:ive,setImage:async function(e,t){var n,o,i;const r=e.provider(),l=e.stater.get(),{imperator:s,rootdispatch:c}=r,a=l.editor.style,{hash:u,type:d,width:f,height:h,base64:p}=t;let v=p;"undefined"==typeof WebPro&&(v=KT(p));const g=await wF(u);if(0!==g.ok&&g.data){if(!(null===(o=null===(n=l.store)||void 0===n?void 0:n.reference)||void 0===o?void 0:o[u])){const e=await HY(u);e&&c(lq({[u]:e}))}}else await yF(u,v);null===(i=s.current)||void 0===i||i.commit((e=>{if(void 0===e.selection)return e;const{before:{path:t}}=_pe(e.selection),n=AFe(e,t,a)*(Pf?1:3/4),o=nfe({naturalWidth:f,naturalHeight:h},n,u,d);return e=$pe(o)(e)}))},setImageState:Upe,styles:Fde});const{spliceBranch:cve}=n2,{DECORATE_BLOCK_NODE:ave,SPLIT_BLOCK_MARGIN:uve,getEditNodeByPath:dve,getKeyFromPath:fve,getNodeLength:hve,getPathFromKey:pve,getRelativePath:vve,isDecorateBlockNode:gve,isEditBlockNode:mve,isEditNode:yve,isNode:bve,removePositionStyle:Cve,createBlockNode:wve,createDecorateBlockNode:xve,isBlockNode:Sve,isCollapsed:Eve,isStartPath:kve,isReferenceNode:Dve,isReferenceBlockNode:Ive,resetEditNodeKeyRecursion:Nve,sliceBlockPath:Lve,sliceDecoratePath:Bve,removeBoxSizeStyle:Tve,traverseNode:Ave,traversalEditNodeBySelection:Mve,traversalEditBlockNodeBySelection:Ove}=ek;function Rve(e){const t=Object.values(aae).sort(((e,t)=>t-e)),n=t.indexOf(e);return-1===n||n===t.length-1?null:t[n+1]}function Pve(e=aae.H0){return e===aae.H0?{fontSize:Kf(e),fontWeight:Tf}:{fontSize:Kf(e),fontWeight:"bold"}}function Fve(e=aae.H0){const t={paddingTop:0,paddingBottom:0};if(e===aae.H0)return t;const n=Kf(e);return t.paddingTop=n-uve,t.paddingBottom=n/2-uve,t}function Hve(e){var t;const n=null===(t=e.props)||void 0===t?void 0:t.subclass;if(n===aae.H)return 1;for(const e in hae)if(hae[e]===n)return Number(e);return 0}function _ve(e,t){var n,o;for(let i=0;i<e.children.length;i++){const r=e.children[i];if(jve(r)){if((null===(n=r.props)||void 0===n?void 0:n.id)===t)return r;const e=null===(o=r.props)||void 0===o?void 0:o.list;if(We(e)){const n=_ve(wve(e),t);if(n)return n}}}return null}function jve(e,t){var n,o;if(!bve(e))return!1;if(e.type===ave&&(null===(n=e.props)||void 0===n?void 0:n.type)===uae){if(void 0===t)return!0;if((null===(o=e.props)||void 0===o?void 0:o.subclass)===t)return!0}return!1}function Wve(e){if(zve(e)&&1===e.children.length){const t=e.children[0];if(Ive(t))return!0}return!1}function zve(e){return jve(e,aae.H)}function Vve(e){var t;return!!bve(e)&&(e.type===ave&&(null===(t=e.props)||void 0===t?void 0:t.type)===dae)}function $ve(e,t,n){var o;void 0!==t&&(t=Sve(t[0])?[t[0]]:[wve(t)]);const i=null!==(o=e.id)&&void 0!==o?o:pRe();return xve({type:uae,...e,id:i},t,{...Pve(e.subclass),...n})}function Zve(e,t){let n="";const o=oge[t][nge.outlineListPackage];if(We(o)){for(let t=0;t<o.length;t++)if(o[t].subclass===e){n=o[t].name;break}""===n&&(n=o[0].name)}return n}function Uve(e,t){const n=tc(t);if(void 0===n)return;const o=e.children.slice(0,n),i=e.children[n];if(yve(i)){const e=Uve(i,Qs(t));yve(e)&&hve(e)>0&&o.push(e)}return 0!==o.length?{...e,children:o}:void 0}function qve(e,t){var n,o,i,r;const l=tc(t);if(void 0===l)return;const s=e.children.slice(l+1),c=e.children[l];if(yve(c)){const e=qve(c,Qs(t));yve(e)&&hve(e)>0&&s.unshift(e),uSe(c)&&(null===(o=null===(n=c.props)||void 0===n?void 0:n.list)||void 0===o?void 0:o.length)>0&&s.push(...null!==(r=null===(i=c.props)||void 0===i?void 0:i.list)&&void 0!==r?r:[])}return 0!==s.length?{...e,children:s}:void 0}function Yve(e,t,n){var o;const{node:i,style:r}=t.editor,l={...r,...n};if(void 0===e.kid)return l;const s=pve(e.kid),c=dve(i,s);if(!gve(c))return l;const a=c.children[0];return yve(a)?{...l,...Cve(a.style),...Cve(null===(o=a.props)||void 0===o?void 0:o.style)}:l}function Kve(e,t){var n;const o=e.children[0];let i=0;if(yve(o)){i=pve(o.key)[0]}let r=t[0]-i;if(r<0)return[];const l=hve(e);if(r>=l)return[];const s=e.children[r];if(jve(s)&&t.length>1){const e=null===(n=s.props)||void 0===n?void 0:n.list;if(We(e)){const n=Kve({...s,children:e},Qs(t));if(n.length>=0)return[r+i,...n]}}for(;r<l-1;){if(jve(e.children[++r]))break}return r>=l?[]:[r+i]}function Gve(e,t){const{selection:n,node:o}=e.editor;if(!n)return!1;function i(e){const n=Bve(o,e,uae);if(Ec(pve(t),n))return!0;const i=Bve(o,e,dae);return!!Ec(pve(t),i)}if(Eve(n)){return i(n.focus.path)}let r=!1;return Mve(o,n,((e,t)=>{if(i(t))return r=!0,!1})),r}async function Xve(e,t){const{selection:n,node:o}=e.editor;let i={editor:{},reference:{}};if(!n)return i;const r=[];async function l(e,n){var o,s;if(n<0)return;const c=await _Y(e,t);if(!c)return;i=Bje(i,c);const a=null===(o=c.editor)||void 0===o?void 0:o[e],u=null==a?void 0:a.data.children;if(null==u?void 0:u.length)for(const e of u)if(jve(e,aae.H)){const t=null===(s=e.props)||void 0===s?void 0:s.id;t&&!r.includes(t)&&(r.push(t),await l(t,n-1))}}Ove(o,n,((e,t)=>{const n=Bve(o,t,uae);if(n){const e=dve(o,n);if(lae(e,uae)){const t=e.props;if(t){const{subclass:e,id:n}=t;e!==aae.H||r.includes(n)||r.push(n)}}}}));for(const e of r)await l(e,1);return i}function Jve(){return fae}function Qve(e){let t=e;if(Array.isArray(t)&&(t=t[0]),!p(t))return e;t={...t};let n={...t.props},o={...n.node};if(Dve(o)&&1===hve(o)){let e=Jl(o.children[0]);if(Sve(e)){const t=Tve({...e.style});t.paddingBottom=uve,t.paddingTop=uve,t.boxSizing="border-box",t.pointerEvents="none",e.children=e.children.map((e=>bve(e)?EPe(e,Kf(12),(e=>(Gde(e)&&((e={...e}).style={...e.style},e.style.position="relative",e.style.top=-1),e))):e)),e={...e,style:t}}o.children=[e]}return n.node=o,t.props=n,Array.isArray(e)?1===e.length?[t]:[t,...e.slice(1)]:t}function ege(e,t,n,o){const{editor:{node:i,selection:r}}=e;if(!r)return void o();const l=[];let s=!1;if(Eve(r)){const e=r.focus.path,t=Lve(i,e),n=dve(i,t);Ave(n,(e=>{if(Qse(e))return s=!0,!1}));const o=Bve(i,e,uae);if(o){const e=dve(i,o);zve(e)&&!kve(o)&&l.push(e)}}else{const e=[];Ove(i,r,((t,n)=>{!s&&Ave(t,(e=>{if(Qse(e))return s=!0,!1}));const o=Bve(i,n,uae);if(o){if(e.find((e=>Ec(o,e))))return;e.push(o);const t=dve(i,o);bve(t)&&zve(t)&&!kve(o)&&(l.includes(t)||l.push(t))}}))}if(s){const e={visible:!0,title:"遇到 1 个问题",content:"当前段落包含表格，表格不支持配置成标题或大纲"};return void(Uf?KH({title:e.title,message:e.content,confirm:{value:"确定",fontColor:yf}}):n(lre(e)))}if(!l.length)return void o();const c=b$e(l,(async()=>{var e;n(lre({...c,visible:!1}));const i=[];for(const n of l){const o=null===(e=n.props)||void 0===e?void 0:e.id;o&&(i.includes(o)||i.push(o),await t.safty(o,!0))}n(Vq(i)),o()}));n(lre(c))}async function tge(e,t){var n,o,i;const r=e.stater.get(),l=await hF(t);if(0===l.ok||!l.data)return;const s=tje(t,{[t]:l.data});if(!s)return;const c=WH();if(!(null==c?void 0:c.length))return;const{imperator:a,rootdispatch:u}=e.provider();null===(o=null===(n=a.current)||void 0===n?void 0:n.clearVisibleState)||void 0===o||o.call(n),u(P9(),s3());const d=zH();for(let e=c.length-1;e>0&&c[e].uid!==d;e--)jH("pop");const f=null===(i=r.file)||void 0===i?void 0:i.currentPageId,h=s.title?OWe(s.title):"";jH("push",{route:FT.editor,effect:{slide:"right"},payload:{editable:!s.readonly,page:cve(s),branch:cve(s),refresh:pRe(!0),uid:d,pageId:f},title:{text:h,menus:["more"]}})}const nge={copyShortCut:"copyShortCut",editShortCut:"editShortCut",removeShortCut:"removeShortCut",outlineList:"outlineList",outlineListPackage:"outlineListPackage"},oge={cn:{[nge.outlineList]:"标题与大纲",[nge.copyShortCut]:"复制快捷方式",[nge.editShortCut]:"编辑快捷方式",[nge.removeShortCut]:"移除快捷方式",[nge.outlineListPackage]:[{name:"正文",subclass:aae.H0,style:Pve(aae.H0),hotkey:Mf?"⌘+⌥+0":"Ctrl+Alt+0"},{name:"标题",subclass:aae.H,style:Pve(aae.H),hotkey:Mf?"⌘+⌥+.":"Ctrl+Alt+."},{name:"大纲 1",subclass:aae.H1,style:Pve(aae.H1),hotkey:Mf?"⌘+⌥+1":"Ctrl+Alt+1"},{name:"大纲 2",subclass:aae.H2,style:Pve(aae.H2),hotkey:Mf?"⌘+⌥+2":"Ctrl+Alt+2"},{name:"大纲 3",subclass:aae.H3,style:Pve(aae.H3),hotkey:Mf?"⌘+⌥+3":"Ctrl+Alt+3"},{name:"大纲 4",subclass:aae.H4,style:Pve(aae.H4),hotkey:Mf?"⌘+⌥+4":"Ctrl+Alt+4"},{name:"大纲 5",subclass:aae.H5,style:Pve(aae.H5),hotkey:Mf?"⌘+⌥+5":"Ctrl+Alt+5"},{name:"大纲 6",subclass:aae.H6,style:Pve(aae.H6),hotkey:Mf?"⌘+⌥+6":"Ctrl+Alt+6"}]},en:{[nge.outlineList]:"outlineList",[nge.copyShortCut]:"Copy ShortCut",[nge.editShortCut]:"Edit ShortCut",[nge.removeShortCut]:"Remove ShortCut",[nge.outlineListPackage]:[{name:"content",subclass:aae.H0,style:Pve(aae.H0),hotkey:Mf?"⌘+⌥+0":"Ctrl+Alt+0"},{name:"Title",subclass:aae.H,style:Pve(aae.H),hotkey:Mf?"⌘+⌥+.":"Ctrl+Alt+."},{name:"Outline 1",subclass:aae.H1,style:Pve(aae.H1),hotkey:Mf?"⌘+⌥+1":"Ctrl+Alt+1"},{name:"Outline 2",subclass:aae.H2,style:Pve(aae.H2),hotkey:Mf?"⌘+⌥+2":"Ctrl+Alt+2"},{name:"Outline 3",subclass:aae.H3,style:Pve(aae.H3),hotkey:Mf?"⌘+⌥+3":"Ctrl+Alt+3"},{name:"Outline 4",subclass:aae.H4,style:Pve(aae.H4),hotkey:Mf?"⌘+⌥+4":"Ctrl+Alt+4"},{name:"Outline 5",subclass:aae.H5,style:Pve(aae.H5),hotkey:Mf?"⌘+⌥+5":"Ctrl+Alt+5"},{name:"Outline 6",subclass:aae.H6,style:Pve(aae.H6),hotkey:Mf?"⌘+⌥+6":"Ctrl+Alt+6"}]}};const ige={lineHeight:2},rge={display:"block",position:"relative",width:"100%",textDecoration:"none",color:"inherit"},lge={width:fae,height:fae,cursor:"pointer",position:"relative",zIndex:1,opacity:.33,fontSize:0,pointerEvents:"none"},sge={width:fae,height:fae,cursor:"pointer",position:"relative",zIndex:1,opacity:1,fontSize:0,top:.5,pointerEvents:"none"},cge={cursor:"pointer"},age={position:"absolute",zIndex:10,display:"flex",justifyContent:"center",cursor:"default",left:"50%"},uge={position:"absolute",top:0,left:-12},dge={...{boxShadow:Nf,borderRadius:4,position:"absolute",transform:"translateY(-100%)",display:"flex",alignItems:"center"},padding:"4px 3px"},fge={borderRadius:2,margin:"0 2px"},hge={width:24,height:24,borderRadius:2,display:"flex",justifyContent:"center",alignItems:"center"},{createBlockNode:pge,transformEditNodeToNode:vge,transformNodeToEditNode:gge,isEditNode:mge,isBlockNode:yge,isReferenceBlockNode:bge,joinKey:Cge}=ek,wge=e=>t=>{var n,o,i;const r=null===(n=t.file)||void 0===n?void 0:n.currentPageId;if(!r)return t;const l={},s=pge(e.map((e=>mge(e)?vge(e):e)),P$),c=null===(o=e[0].props)||void 0===o?void 0:o.id;if(void 0===c)return t;const a={[c]:c},u=jPe(s);for(const e in u){const n=u[e],o=null===(i=n.props)||void 0===i?void 0:i.id;o&&(a[e]=o,t=Sq(o,n,c)(t))}l.uids=a,l.data=s;const d=vFe(l);return t=hq(c,d)(t),t=Z3(r)(t)},{DIV_NODE:xge,isBlockNodeX:Sge,clearSelection:Ege,createBlockNode:kge,createReferenceBlockNode:Dge,deleteBackward:Ige,genNextLevelPath:Nge,getEditBlockNodeStartPath:Lge,getEditNodeByPath:Bge,getEditNodeStartPath:Tge,getEditNodeEndPath:Age,getKeyFromPath:Mge,getNodeByPath:Oge,getNodeEndPath:Rge,getNodeLength:Pge,getNodeStartPath:Fge,getPathFromKey:Hge,getRelativePath:_ge,isBlockNode:jge,isBlockNodeCritical:Wge,isCollapsed:zge,isDecorateNode:Vge,isEditBlockNode:$ge,isEditBlockNodeX:Zge,isEditNode:Uge,isMetaNode:qge,isEmptyNode:Yge,isNode:Kge,isPathAfter:Gge,isPathBefore:Xge,isReferenceNode:Jge,isReferenceBlockNode:Qge,isStartPath:eme,moveBackward:tme,injectSplitBlockNodeStyle:nme,removeSplitBlockNodeStyle:ome,joinKey:ime,splitBlock:rme,deleteFragment:lme,reflowEditNodeByPath:sme,reflowEditNodeBySelection:cme,removeBoxSizeStyle:ame,removePositionStyle:ume,resetEditNodeKey:dme,sliceBlockPath:fme,sliceDecoratePath:hme,sliceReferencePath:pme,sortSelection:vme,traverseNode:gme,transformEditNodeToNode:mme,transformNodeToEditNode:yme,traversalEditBlockNodeBySelection:bme,isSelectionTouchBlockNodeStart:Cme}=ek,wme=(e,t,n,o)=>i=>{var r,l,s,c;if(void 0===i.selection)return i;let a=!1,u=null===(r=i.selectionDecorate)||void 0===r?void 0:r[uae];u||(u=null===(l=i.selectionDecorate)||void 0===l?void 0:l[dae],u&&(a=!0));const{editor:{style:d},focus:f}=e;function h(n){var r,l,s;if(t===aae.H0)return;const c=Hge(n.key),a=[],u=Bge(i.node,a);if(!Uge(u))return;const f=Qs(_ge(i.node,c),a.length),h=Uve(u,f),p=qve(u,f);let v=p;for(;null==v?void 0:v.position;){delete v.position,v.style=ume({...v.style});const e=v.children[0];if(!jge(e))break;v=e}const g=pRe(),m=yme($ve({subclass:t,id:g}),n.key);gme(n,(e=>{if($ge(e)){delete e.position;let t={...e.style};t=ume(t),t=ame(t),Sc(t)?delete e.style:e.style=t}}));const y=Fve(t);if(n.style?Object.assign(n.style,y):n.style=y,t===aae.H&&e.root){const e=yme(Dge({id:g,uid:g},[n]),ime(n.key,0));for(const e in n)delete n[e];Object.assign(n,e)}m.children=[n];const b=null==p?void 0:p.children[0];let C=!!b;jve(b)&&(null===(r=b.props)||void 0===r?void 0:r.subclass)>=t&&(C=!1),m.props=null!==(l=m.props)&&void 0!==l?l:{},m.props.expand=C,t===aae.H&&e.root&&(null==o||o.push(wge([m])));const w=[];h&&w.push(...h.children),w.push(m),p&&w.push(...p.children),u.children=w,i=dme(a)(i);let x=Js(null==h?void 0:h.children);for(;Zge(x);)Iye(i,x,d),x=Js(x.children);let S=tc(null==p?void 0:p.children);for(;Zge(S);){if(uSe(S)){const e=S.children[0];jge(e)&&ome(e),S.children.length<=1&&(null===(s=S.props)||void 0===s||delete s.expand)}Iye(i,S,d),S=tc(S.children)}Eme(i,i.node,d);let E=Lge(i.node);if(null==h?void 0:h.children){const e=h.children[0];jge(e)&&(E=Lge(e))}else E=Hge(m.key);i=sme(E)(i)}function p(r){var l,s,c,d,p,v,g,m,y;if(eme(r)&&e.root&&u===aae.H)return;const b=Bge(i.node,r);if(!Uge(b))return;const C=null===(l=b.props)||void 0===l?void 0:l.id;function w(e){if(!Kge(b))return;let t=b.children[0];Qge(t)&&(t=t.children[0]),jge(t)&&(t.style&&(Object.assign(t.style,Fve(e)),t.style=ume(t.style)),e===aae.H0&&nme(t))}if(t===aae.H0||t===u||a){const e=b.children[0];if(b.type=xge,lae(e)){const n=null===(s=e.props)||void 0===s?void 0:s.style;if(n){const e=Pve(t);for(const t in e)n[t]===e[t]&&delete n[t]}}else Qge(e)&&((null===(c=e.props)||void 0===c?void 0:c.id)===(null===(d=b.props)||void 0===d?void 0:d.id)||a)&&(b.children=[yme(e.children[0],ime(b.key,0))]);delete b.props,delete b.style,w(aae.H0),a&&(t!==u&&h(b),i=Ege()(i))}else if(b.props){const n=b.children[0];b.props.subclass=t,b.props.type=uae,b.style={...b.style,...Pve(t)},t===aae.H&&e.root?b.children=[yme(Dge({id:b.props.id,uid:b.props.id},b.children),ime(b.key,0))]:u===aae.H&&Qge(n)&&((null===(p=n.props)||void 0===p?void 0:p.id)===(null===(v=b.props)||void 0===v?void 0:v.id)||a)&&(b.children=[yme(n.children[0],ime(b.key,0))]),w(t)}const x=b.children[0];if(Vge(x)&&(null===(g=x.props)||void 0===g?void 0:g.style)){const t=Hge(b.key),n=e.editor.style;Object.assign(x.props.style,tae(i,t,n))}if(!a&&aHe(f)&&!f.child)if(t===aae.H&&t!==u){const t=r[0];let n=t;const l=i.node.children,s=[b];for(;n<l.length;){const e=l[n+1];if(void 0===e)break;if(lae(e,uae)&&(null===(m=e.props)||void 0===m?void 0:m.subclass)>=u)break;s.push(e),n++}l.splice(t+1,n-t),e.root&&(null==o||o.push(wge(s)))}else if(u===aae.H){const e=r[0];let t=0;const o=null==n?void 0:n[C];if(!o)return;const l=null!==(y=o.data.children)&&void 0!==y?y:[],s=[];for(;t<l.length;){const n=l[t+1];if(t+1===l.length-1&&Yge(n))break;if(void 0===n)break;if(Kge(n)){const o=Mge([e+t+1]);s.push(yme(n,o))}t++}i.node.children.splice(e+1,0,...s)}}if(zge(i.selection)){const n=i.selection.focus.path;let o=hme(i.node,n,uae);if(o||(o=hme(i.node,n,dae)),!o){const e=Bge(i.node,n),t=fme(i.node,n),o=Bge(i.node,t);if(!Uge(o))return i;if(h(o),i.selection){let t=[];if(gme(o,(n=>{const o=Hge(n.key);if(n===e)return t=o,!0;const i=n.children.length;if(0===i&&null===e)return t=[...o],!0;for(let r=0;r<i;r++)if(n.children[r]===e)return t=[...o,r],!0})),Uge(e)&&!qge(e)){const t=Tge(e);i.selection.anchor.offset=0,i.selection.focus.offset=0,i.selection.anchor.path=[...t],i.selection.focus.path=[...t]}else t.length&&(i.selection.anchor.path=[...t],i.selection.focus.path=[...t]);i=cme(!0)(i)}return i}if(p(o),Eme(i,i.node,d),i.selection&&e.root)if(t!==aae.H&&u===aae.H||t===u&&u!==aae.H0){const{path:e,offset:t}=i.selection.focus;i.selection={focus:{path:[e[0],...e.slice(2)],offset:t},anchor:{path:[e[0],...e.slice(2)],offset:t}}}else if(t===aae.H0&&u!==aae.H0){const{path:e,offset:t}=i.selection.focus;i.selection={focus:{path:[...e],offset:t},anchor:{path:[...e],offset:t}}}else if(t===aae.H&&u!==aae.H){const{path:e,offset:t}=i.selection.focus;i.selection={focus:{path:[e[0],0,...e.slice(1)],offset:t},anchor:{path:[e[0],0,...e.slice(1)],offset:t}}}return sme(n)(i)}const v=new Map,{anchor:{path:g,offset:m},focus:{path:y,offset:b}}=i.selection,C=Bge(i.node,ec(g)),w=Bge(i.node,ec(y)),x=pRe(),S=pRe();Uge(C)&&(C.props={...C.props,[x]:!0}),Uge(w)&&(w.props={...w.props,[S]:!0});const E=[];bme(i.node,i.selection,((e,t)=>{if(void 0!==u){let n=hme(i.node,t,uae);if(n||(n=hme(i.node,t,dae)),!n)return;if(E.find((e=>Ec(n,e))))return;for(E.push(n),p(n);Sge(e);)e=e.children[0],t=Hge(e.key);return void(i=sme(t,!0)(i))}let n=hme(i.node,t,uae);n||(n=hme(i.node,t,dae)),n||Wge(e)&&v.set(t,e)})),void 0===u&&v.forEach(((n,o)=>{var r;if(jve(n)){n.props&&(n.props.subclass=t,n.style={...n.style,...Pve(t)});let o=n.children[0];if(Vge(o)&&(null===(r=o.props)||void 0===r?void 0:r.style)){const t=Hge(n.key),r=e.editor.style;Object.assign(o.props.style,tae(i,t,r))}return Qge(o)&&(o=o.children[0]),void(jge(o)&&o.style&&Object.assign(o.style,Fve(t)))}0!==Pge(n)&&(h(n),i=sme(o,!0)(i))})),Eme(i,i.node,d),i=dme()(i);let k=null,D=null;gme(i.node,(e=>{var t,n,o,i;if(Uge(e)&&((null===(t=e.props)||void 0===t?void 0:t[x])&&(k=Hge(e.key),null===(n=e.props)||void 0===n||delete n[x]),(null===(o=e.props)||void 0===o?void 0:o[S])&&(D=Hge(e.key),null===(i=e.props)||void 0===i||delete i[S])),k&&D)return!0})),!k&&D?k=[...D]:k&&!D&&(D=[...k]),k&&D?i.selection={anchor:{path:[...k,null!==(s=Js(g))&&void 0!==s?s:0],offset:m},focus:{path:[...D,null!==(c=Js(y))&&void 0!==c?c:0],offset:b}}:i=Ege()(i);const I=Lge(i.node);return sme(I)(i)},xme=(e,t=!1)=>n=>{var o,i,r,l,s,c,a,u;const d=Bge(n.node,e);if(!lae(d,uae))return n;const f=!(null===(o=d.props)||void 0===o?void 0:o.expand);void 0===d.props&&(d.props={}),d.props.expand=f;const h=Js(e);if(void 0===h)return n;const p=Js(_ge(n.node,e));if(void 0===p)return n;const v=n.node;if(f){const o=null!==(r=null===(i=d.props)||void 0===i?void 0:i.list)&&void 0!==r?r:[],a=o.map(((t,n)=>{var o;const i=[...ec(e),(null!==(o=Js(e))&&void 0!==o?o:0)+n],r=Mge(i);return yme(t,r)}));v.children.splice(p+1,0,...a),null===(l=d.props)||void 0===l||delete l.list;let u=!1;const f=v.children[p+1];if(jve(f)?(null===(s=d.props)||void 0===s?void 0:s.subclass)<=(null===(c=f.props)||void 0===c?void 0:c.subclass)&&(u=!0):void 0===f&&(u=!0),u&&!t){const e=Hge(d.key),t=Nge(e),n=yme(kge([""]),Mge(t));v.children.splice(p+1,0,n)}if(n=dme(Nge(e),Pge(v)-p-2)(n),(n=sme(e)(n)).selection){const{focus:e,anchor:t}=n.selection;e.path[0]>h&&(e.path[0]+=o.length),t.path[0]>h&&(t.path[0]+=o.length)}return n}We(d.props.list)||(d.props.list=[]);let g=p;for(;g<v.children.length;){const e=v.children[g+1];if(void 0===e)break;if(lae(e,uae)&&(null===(a=e.props)||void 0===a?void 0:a.subclass)>=(null===(u=d.props)||void 0===u?void 0:u.subclass))break;d.props.list.push(e),g++}v.children.splice(p+1,g-p),n=dme(Nge(e),Pge(v)-p-2)(n),n=sme(e)(n);const m=d.props.list;if(d.props.list=m.map((e=>mme(e))),!n.selection||0===m.length)return n;const{before:y,after:b}=vme(n.selection,!1),C=Hge(tc(m).key),w=Hge(Js(m).key);if(Xge(y.path,C)||Gge(b.path,w))if(!Xge(y.path,C)||Xge(b.path,C)||Gge(b.path,w)){if(!Xge(y.path,C)&&!Gge(y.path,w)&&Gge(b.path,w)){const t=Nge(e);y.path=t,y.offset=0}}else{const t=Bge(n.node,[...e,0]);if(Uge(t)){const e=Age(t),o=Bge(n.node,e);null!==o&&(b.path=e,b.offset=Pge(o))}}else Ege()(n);if(n.selection){const{focus:t,anchor:o}=n.selection,i=e.length-1;t.path[i]>h&&(t.path[i]-=m.length),o.path[i]>h&&(o.path[i]-=m.length)}return n},Sme=e=>t=>{const n=Bge(t.node,e);if(!zve(n)&&!Vve(n))return t;const o=Tge(n);return t.selection={focus:{path:[...o],offset:0},anchor:{path:[...o],offset:0}},t};function Eme(e,t,n){var o,i;const r=[],l=t.children.filter((e=>lae(e,uae)));let s=null;for(let t=0;t<l.length;t++){const c=l[t].props,a=l[t].children[0];if(!lae(a)){r.length=0;continue}s!==(null===(o=a.props)||void 0===o?void 0:o.type)&&(s=null===(i=a.props)||void 0===i?void 0:i.type,r.length=0);const u=tae(e,Hge(a.key),n),d=null==c?void 0:c.subclass,f=aae.H-d;void 0===r[f]&&(r[f]=0),r[f]++;const h=r.slice(0,f+1).filter((e=>void 0!==e));if(a.props){const e=Pve(d);eme(Hge(a.key))||d!==aae.H||(e.fontSize=Kf(12)),Object.assign(a.props,{style:{...a.props.style,...e,...u},level:h})}}return e}const kme=e=>t=>{var n;const{selection:o,node:i}=t;if(void 0===o)return t;const{path:r}=o.focus,l=Bge(i,r);if(null===l)return t;let s=!1,c=hme(i,r,uae);if(void 0===c&&(c=hme(i,r,dae),c&&(s=!0)),void 0===c){if(Cme(i,o)){const e=pme(i,r);if(1===(null==e?void 0:e.length)){const n=Bge(i,e);if(Qge(n)){const o=i.children.indexOf(n);if(-1!==o){let r=n.children[0];jge(r)?(r.style&&(r.style=ame(r.style),r.style=ume(r.style)),nme(r),delete r.position):(r=yme(kge([r]),n.key),nme(r)),i.children[o]=r,t=sme(e)(t)}}}}return t}const a=Bge(i,c);if(!Vge(a))return t;const u=ec(c),d=Bge(i,u);if(!Kge(d))return t;let f=[],h=null,p=a;for(;Zge(p);){const e=p.children;if(e.length>1){const t=e.splice(1,e.length-1);f.push(...t.map((e=>(Jge(e),e))))}p=e[0]}if(f.length)if(1===f.length){const e=f[0];h=$ge(e)?e:kge([e])}else h=kge(f);if(!jge(h))return 0===Pge(l)&&(zve(a)||(a.type=xge,delete a.props,delete a.style)),t;const v=jPe(a);Sc(v)||IPe(h,(e=>{if(_he(e)||Nae(e)){const t=e.children[0];if(Jge(t)){if(!e.props||!t.props)return!1;const n=t.props.uid;if(v[n]){const n=pRe();e.props.id=n,e.props.uid=pRe(),t.props.id=n,t.props.uid=pRe()}}return!1}if(Jge(e)){if(!e.props)return!1;const t=e.props.uid;if(v[t]){const t=pRe();e.props.id=t,e.props.uid=pRe()}}}),!0),a.props=a.props||{},a.props.expand=!1;const g=d.children.indexOf(a),m=Nge(c);let y=mme(h);ome(y);const b={...a.props},C=s?b.id:pRe();b.id=C,delete b.list;let w=!1;Wve(a)&&!Yge(y)?(w=!0,lae(y)&&(y.type=xge,delete y.props,delete y.style),y.style||(y.style={}),Object.assign(y.style,Fve(b.subclass)),y=Dge(s?{id:pRe(),uid:pRe()}:{id:C,uid:C},[y])):Yge(y)||(y.style||(y.style={}),Object.assign(y.style,Fve(b.subclass)));const x={...mme(a),props:b,children:[y]},S=ts(yme(x,Mge(m)));if(d.children.splice(g+1,0,S),w&&!s&&e.push(wge([x])),w){const t=a.children[0];if(Qge(t)){const o=null===(n=t.props)||void 0===n?void 0:n.id;o&&e.push(xq(o,t,null))}}if(Yge(y)?(S.type=xge,delete S.props,delete S.style,S.children=[],nme(S),t=xme(c,!0)(t)):s||(t=Nme(m)(t)),t.selection){const e=Tge(S);t.selection.anchor.path=[...e],t.selection.focus.path=[...e]}return sme(r)(t)},Dme=e=>e=>{var t,n,o,i;const{selection:r,node:l}=e;if(void 0===r)return e;const{before:{path:s,offset:c}}=vme(r);let a=!1;const u=hme(l,s,uae);if(u){const d=hme(l,s);if(d&&d.length>u.length)return e=Ige()(e);const f=Bge(l,u);if(zve(f)){if(eme(s)&&zge(r)&&0===c){if(Yge(f)){const t=f.children[0];if(Jge(t)){const n=t.children[0];if(Uge(n))t.children[0]={...n,children:[""]};else{const e=Hge(t.key),n=Mge([...e,0]);t.children[0]=yme(kge([""],Fve(aae.H)),n)}const o=[...u,0,0,0];e.selection={anchor:{path:[...o],offset:0},focus:{path:[...o],offset:0}},e=sme(o)(e)}}return e}a=!0}else if(Vge(f)){const r=null===(t=f.props)||void 0===t?void 0:t.mergeclass;if(r&&void 0!==r[wEe.name])return null===(n=f.props)||void 0===n||delete n.mergeclass,!1===(null===(o=f.props)||void 0===o?void 0:o.expand)&&(e=xme(u)(e)),e;const l=f.children[0];jge(l)&&(l.style=ame(l.style),l.style=ume(l.style),null===(i=l.style)||void 0===i||delete i.height,delete l.position,nme(l),e=sme(u)(e))}}if((e=a?Ime()(e):Ige()(e)).selection){const t=e.selection.focus.path,n=hme(e.node,t,uae);if(void 0===n)return e;e=Nme(n)(e)}return e},Ime=e=>e=>{var t,n;if((e=Ige()(e)).selection){const o=e.selection.focus.path;if(eme(o))return e;const i=fme(e.node,o),r=pme(e.node,i);if(!r)return e;const l=Bge(e.node,r);if(!Qge(l))return e;const s=Bge(e.node,ec(r));if(!Kge(s))return e;const c=l.children.map(((e,t)=>(jge(e)&&e.style&&(e.style=ame(e.style),e.style=ume(e.style),delete e.position,nme(e)),e))),a=s.children.indexOf(l);s.children.splice(a,1,...c),e=dme(r)(e);const u=Bge(e.node,r);if(Uge(u)){const o=Age(u);if(null!==Bge(e.node,o)){const i=null!==(n=null===(t=e.selection)||void 0===t?void 0:t.focus.offset)&&void 0!==n?n:0;e.selection={anchor:{path:[...o],offset:i},focus:{path:[...o],offset:i}}}}e=sme(r)(e)}return e},Nme=e=>t=>{var n,o;const i=Bge(t.node,e);if(jve(i)){let r=!0;const l=Nge(e),s=Bge(t.node,l);jve(s)?(null===(n=i.props)||void 0===n?void 0:n.subclass)<=(null===(o=s.props)||void 0===o?void 0:o.subclass)&&(r=!1):null==s&&(r=!1),i.props=i.props||{},i.props.expand=r}return t};function Lme(e,t,n,o,i,r){var l,s,c,a,u,d;let{selection:f,data:h}=e.editor;if((null==r?void 0:r.selection)&&(f=r.selection),!f)return;if(!e.virtual)return void(null===(l=t.current)||void 0===l||l.commit(n));const{before:p,after:v}=vme(f);let g=hme(h,p.path);if(void 0!==g&&"="===(null==r?void 0:r.type)){const e=Oge(h,g);if(Kge(e)){const t=null===(s=e.props)||void 0===s?void 0:s.subclass;if(t&&t!==aae.H)for(let e=g[g.length-1]-1;e>=0;e--){const n=[...g.slice(0,-1),e],o=Oge(h,n);if(jve(o)){const e=null===(c=o.props)||void 0===c?void 0:c.subclass;if(e===t)g=n;else if(e>t)break}else lae(o)&&(g=n)}}}else g=fme(h,p.path);let m=hme(h,v.path);if(void 0!==m){const e=Oge(h,m),t=Oge(h,ec(m));if(Kge(e)&&Kge(t)){const n=null===(a=e.props)||void 0===a?void 0:a.subclass,o=Pge(t);if(n&&n!==aae.H)for(let e=m[m.length-1]+1;e<o;e++){const t=[...m.slice(0,-1),e],i=Oge(h,t);if(jve(i)){const e=null===(u=i.props)||void 0===u?void 0:u.subclass;if("="===(null==r?void 0:r.type)){if(e===n)m=t;else if(e>n){m=t;break}}else if(e>=n){m=t;break}}else lae(i)&&(m=t);e===o-1&&(m=t)}}}else m=fme(h,v.path);const y=Oge(h,g);Kge(y)&&(g=[...g,...Fge(y)]);const b=Oge(h,m);Kge(b)&&(m=[...m,...Rge(b)]),Array.isArray(n)||(n=[n]),o(s9(n,{focus:{path:g,offset:0},anchor:{path:m,offset:0}},i));const C=setTimeout((()=>{o(U3(),b6())}));(null===(d=null==r?void 0:r.timer)||void 0===d?void 0:d.current)&&(clearTimeout(r.timer.current),r.timer.current=C)}const Bme=e=>t=>{const n=e.editor.style;return Eme(t,t.node,n),t},Tme=(e,t)=>n=>{var o;const i=Bge(n.node,e);if(!Vve(i))return n;const r=Bge(n.node,ec(e)),l=r.children.indexOf(i);if(-1===l)return n;let s=i.children[0];if(Jge(s)){const e=null===(o=s.props)||void 0===o?void 0:o.uid;if(e&&Sc(n.ureference)&&t){const n={[e]:s};t(I9(n,{}),Z9(n,{}))}s=s.children[0]}return jge(s)?(s.style&&(s.style=ame(s.style),s.style=ume(s.style)),nme(s),delete s.position):(s=yme(kge([s]),i.key),nme(s)),r.children[l]=s,n=sme(e)(n),n=Ege()(n)},Ame=e=>t=>(t.visible=e,t);function Mme(e,t,n){const o=async()=>{var o;const i=e.worker;if(!i)return;const r=e.provider(),{context:l,rootdispatch:s,imperator:c}=r;let a={};if(l.root){const e=await Xve(l,i);a=null!==(o=e.editor)&&void 0!==o?o:{},s(rq(e))}const u=[];Lme(l,c,wme(l,t,a,u),s,u,n)},i=e.provider(),{context:r,rootdispatch:l}=i;r.root?ege(r,e,l,o):o()}const{useHotkey:Ome,useHotkeys:Rme}=cj;const{getPathFromKey:Pme,isStartPath:Fme}=ek;function Hme(e){const{style:t,subclass:n,mergeclass:o,expand:i,kid:r}=e,l=(null==t?void 0:t.color)||Df,s=Fme(Pme(null!=r?r:"")),c=null==o?void 0:o[Oxe],a=sae(null==t?void 0:t.fontSize);if(c===Aye.ONE)return G(zme,{scale:a,color:l,expand:i});if(c===Aye.TWO)return G(Vme,{scale:a,color:l,expand:i});if(!s&&n===aae.H){return G(jme,{scale:sae(Kf(aae.H0))*Oce,color:l,expand:i})}return null}function _me(e){const{style:t}=e,n=(null==t?void 0:t.color)||Df;return G(Wme,{scale:sae(Kf(aae.H0))*Oce,color:n})}function jme(e){var t;const n=1.06*(null!==(t=e.scale)&&void 0!==t?t:1),o=fae*n,i=12*o/10;return G("div",{style:{...sge,width:o,height:i},children:G(QM,{width:o,fill:e.color})})}function Wme(e){var t;const n=1.06*(null!==(t=e.scale)&&void 0!==t?t:1),o=fae*n,i=12*o/10;return G("div",{style:{...sge,width:o,height:i},children:G(eO,{width:o,fill:e.color})})}function zme(e){var t;const n=null!==(t=e.scale)&&void 0!==t?t:1,o=fae*n,i=fae*n,r={transform:`rotate(${e.expand?"90deg":0})`};return G("div",{style:{...lge,width:o,height:i,top:-i/3},children:G(GM,{style:r,width:o,fill:e.color})})}function Vme(e){var t;const n=null!==(t=e.scale)&&void 0!==t?t:1,o=fae*n,i=fae*n,r={transform:`rotate(${e.expand?"90deg":0})`};return G("div",{style:{...lge,width:o,height:i,top:2*-i/5},children:G($M,{style:r,width:4.5*o/fae,fill:e.color})})}const{getEditNodeByPath:$me,getPathFromKey:Zme,isStartPath:Ume,sliceDecoratePath:qme}=ek;function Yme(e){var t;const n=R(MU);if(e&&n){n.editor.style;const o=n.editor.node,i=Zme(e),r=qme(o,i,uae);if(r){const e=$me(o,r);if(jve(e)){const o=null===(t=e.props)||void 0===t?void 0:t.subclass;if(void 0!==o){const e=Pve(o),t=Ume(i);return o===aae.H&&!t&&n.root&&(e.cursor="pointer",e.fontWeight=e.fontWeight,e.fontSize=Kf(12)),e}}}}}function Kme(e,t){const n=Dd(e),o=Dd(R(xU)),i=R(EU),r=Dd(R(MU)),l=R(NU),s=Nd("click"),c=Nd("pointerdown"),a=Nd("pointerup");return F((()=>(window.addEventListener("pointerup",a.listener),()=>{window.removeEventListener("pointerup",a.listener)})),[a]),F((()=>{const e=s.subscribe((async e=>{var i;const{id:s,kid:c}=n.current,a=o.current,u=r.current;if(t&&s&&c){if(Uf)return e.stopPropagation(),a.onOpen?void(null===(i=a.onOpen)||void 0===i||i.call(a,s)):void tge(l,s);Gve(u,c)||(await l.safty(s),l.dispatch(X3(a,s),_3(s),E6(s)))}}));return()=>{e.unsubscribe()}}),[t,n,o,r,s,l,i]),F((()=>{const e=c.subscribe((e=>{const{mirror:o,kid:i}=n.current,l=r.current;t&&i&&(l.root||o)&&(Gve(l,i)||e.stopPropagation())}));return()=>{e.unsubscribe()}}),[t,n,r,c]),F((()=>{const e=c.pipe(Iu((e=>{const{clientX:t,clientY:n}=e;return a.pipe(wu((e=>{const o=Math.abs(e.clientX-t),i=Math.abs(e.clientY-n);return o<2&&i<2})))}))).subscribe((async e=>{const{id:i,kid:s}=n.current,c=o.current,a=r.current;t&&i&&s&&!Uf&&Gve(a,s)&&(await l.safty(i),l.dispatch(X3(c,i),_3(i),E6(i)))}));return()=>{e.unsubscribe()}}),[t,n,o,r,c,a,i,l]),{outline:Ld([s,c])}}function Gme(e,t){const n=Nd("pointerdown"),o=Nd("pointerenter"),i=Nd("pointerleave"),r=Nd("pointermove"),l=Nd("click"),s=Nd("pointerenter"),c=Nd("pointerleave"),a=Nd("click");return F((()=>{const e=bu(o,n).pipe(Iu((()=>r.pipe(Su(150)).pipe(Eu(1)).pipe(Nu(i)).pipe(Nu(a))))).subscribe((e=>{t(Ame(!0))}));return()=>e.unsubscribe()}),[n,o,i,r,a,t]),F((()=>{const e=bu(o.pipe(Iu((()=>i.pipe(Du(150)).pipe(Nu(s))))),n.pipe(Iu((()=>r.pipe(Eu(1))))),s.pipe(Iu((()=>c.pipe(Du(150)).pipe(Nu(o))))),a,l).subscribe((e=>{t(Ame(!1))}));return()=>e.unsubscribe()}),[n,o,i,r,l,s,c,a,t]),{shortcut:Ld([n,o,i,r,l]),option:Ld([s,c,a])}}const{getPathFromKey:Xme,isStartPath:Jme,sliceDecoratePath:Qme}=ek;function eye(e){const t=R(EU),n=R(SU),o=R(MU),i=R(TU),r=P(),l=Z(null),{kid:s,subclass:c,mergeclass:a,mirror:u,id:d}=e,f=null==a?void 0:a[Oxe],h=Jme(Xme(null!=s?s:"")),p=c===aae.H,v=p&&!h,g=Kme(e,v),m=Pve(c),{root:y,editor:b}=o;let C=e.children;v&&(y||u)?(m.cursor="pointer",m.fontWeight=b.style.fontWeight,m.fontSize=Kf(12),C=Qve(C)):Pf&&p&&h&&(m.marginTop=-10);let w=v&&(!!y||!!u);Pf&&void 0!==f&&(w=!0);const x=Yve(e,o,m),S={...rge,...m};let E;v?E={...cge,marginTop:-2.5,height:Kf(12)}:void 0!==f&&(E={...cge,...Fve(c)});let k=G(ch,{style:S,...g.outline,children:C});return r&&v&&(k=G("a",{style:S,href:d,target:"_blank",children:C})),G(Fye,{...e,ratio:1.2,style:x,placeholder:w,icon:Hme,iconSize:Jve(),iconStyle:E,onClickIcon:e=>{var r;if(e.stopPropagation(),void 0===s)return;const{node:c}=b,a=Qme(c,Xme(s),uae);if(void 0===a)return;if(v)return null===(r=i.current)||void 0===r||r.commit(Sme(a)),void(Ec(n.gfocus,o.focus)||t(s4(o.focus)));if(void 0===f)return;const u=[xme(a)],d={anchor:{path:[...a],offset:0},focus:{path:[...a],offset:0}};Lme(o,i,u,t,[],{selection:d,timer:l})},onPointerDownIcon:e=>e.stopPropagation(),children:k})}function tye(){return{visible:!1}}const{getPathFromKey:nye,sliceDecoratePath:oye,getEditNodeByPath:iye,getEditNodeStartPath:rye,getEditNodeEndPath:lye,getNodeLength:sye}=ek;function cye(e){const t=R(EU),n=R(SU),o=R(MU),i=R(TU),r=[{key:nge.copyShortCut,icon:lO},{key:nge.editShortCut,icon:sO},{key:nge.removeShortCut,icon:oO}];return G("div",{style:age,children:G(hh,{style:dge,...e.events,children:r.filter((t=>"title-link"!==e.type||t.key!==nge.removeShortCut)).map((r=>G(Bk,{tips:e.lang?oge[e.lang][r.key]:r.key,direction:"top",children:G("div",{style:fge,children:G(dv,{style:hge,onClick:l=>(async(r,l)=>{var s,c;if(void 0===e.kid)return;const{editor:{node:a},focus:u}=o,d=oye(a,nye(e.kid),dae);if(void 0!==d)if(l===nge.removeShortCut)null===(s=i.current)||void 0===s||s.commit(Tme(d,t));else if(l===nge.copyShortCut){const e=iye(a,d),t=rye(e),n=lye(e),i=iye(a,n),r={focus:{path:t,offset:0},anchor:{path:n,offset:sye(i)}};_ze({...o.editor,selection:r})}else l===nge.editShortCut&&(null===(c=i.current)||void 0===c||c.commit(Sme(d)),Ec(n.gfocus,u)||t(a4(u)))})(0,r.key),children:G(r.icon,{})})})},r.key)))})})}const{getPathFromKey:aye,sliceDecoratePath:uye}=ek;function dye(e){const t=R(EU),n=R(SU),o=R(DU),i=R(MU),r=R(TU),{kid:l}=e,[s,c]=Od(tye),{outline:a}=Kme(e,!0),{shortcut:u,option:d}=Gme(0,c),f=Z(null),{editor:h}=i,p={cursor:"pointer",fontWeight:h.style.fontWeight,fontSize:Kf(12)},v=Qve(e.children),g=Yve(e,i,p),m={...rge,...p},y={...cge,marginTop:-2.5,height:Kf(12)},{editor:{node:b},focus:C,lang:w}=i;return G(ch,{...u,children:G(Fye,{...e,ratio:1.2,style:g,icon:_me,iconSize:Jve(),iconStyle:y,onClickIcon:e=>{var o;if(e.stopPropagation(),void 0===l)return;const i=uye(b,aye(l),dae);void 0!==i&&(null===(o=r.current)||void 0===o||o.commit(Sme(i)),Ec(n.gfocus,C)||t(a4(C)))},onPointerDownIcon:e=>e.stopPropagation(),children:X(ch,{style:m,...a,children:[v,G("span",{style:uge,ref:f}),e.editable&&s.visible&&$k(G(cye,{kid:l,lang:w,events:d}),o,f)]})})})}var fye={name:uae,label:function(e){return oge[e.lang][nge.outlineList]},inner:function(e){const{name:t}=e,n=R(NU),o=Z(null),i=n.provider(),{context:r}=i,{selectionDecorate:l}=r.editor;let s=null==l?void 0:l[t];void 0===s&&(s=null==l?void 0:l[dae]),void 0===s&&(s=aae.H0);const c=oge[e.lang][nge.outlineListPackage].map((e=>({value:{subclass:e.subclass,style:e.style},name:G("span",{style:{...ige,...e.style},children:e.name}),hotkey:e.hotkey,selected:e.subclass===s}))),a=_((e=>{var t;const i=null===(t=e.value)||void 0===t?void 0:t.subclass;void 0!==i&&Mme(n,i,{timer:o})}),[n]);return G(gg,{style:{width:200},options:c,onClick:a})},outer:function({children:e,...t}){var n;const{name:o,lang:i}=t,r=R(NU),l=Z(null),s=r.provider(),{context:c}=s,{selectionDecorate:a}=c.editor;let u=null==a?void 0:a[o];void 0===u&&(u=null==a?void 0:a[dae]);const d=oge[t.lang][nge.outlineListPackage].map((e=>({value:{subclass:e.subclass,style:e.style},hotkey:e.hotkey}))),f=Dd(d),h=_((()=>{const{modal:e,webdav:t,file:n}=r.stater.get();if((null==e?void 0:e.visible)||(null==t?void 0:t.visible))return;if(wje(n))return;const i=r.provider(),{rootdispatch:l}=i;l(u7(o,!0))}),[r,o]);Ome(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),h);const p=_(((e,t)=>{var n;const o=f.current[t],i=null===(n=null==o?void 0:o.value)||void 0===n?void 0:n.subclass;void 0!==i&&Mme(r,i,{timer:l})}),[f,r]);return Rme(d.map((e=>e.hotkey)),p),X(Z_,{...t,style:{width:58},onClick:h,children:[!0!==t.menu&&G(q_,{...t,children:Zve(u,i)}),e]})},hotkey:function(e){return Mf?"⌘+⇧+H":"Ctrl+Shift+H"}},hye=Object.freeze({__proto__:null,DEPTH_MAP:hae,ICON_SIZE:fae,get SubClass(){return aae},block:eye,calcInnerSubclass:Rve,collapsedStart:Sme,createOutlineBoxStyle:Fve,createOutlineListNode:$ve,createOutlineStyle:Pve,decorateConfirm:ege,decorateDeleteBackward:Dme,decorateExpand:xme,decorateSafty:Lme,decorateSelection:Bme,decorateSplitBlock:kme,decorateState:Eme,default:fye,generateLinkTitleChildren:Qve,generateMobileTitleChildren:function(e){let t=e;if(Array.isArray(t)&&(t=t[0]),!p(t))return e;t={...t};let n={...t.props},o={...n.node};if(Dve(o)&&1===hve(o)){let e=Jl(o.children[0]);if(Sve(e)){const t={...e.style};t.paddingTop=7,e={...e,style:t}}o.children=[e]}return n.node=o,t.props=n,Array.isArray(e)?1===e.length?[t]:[t,...e.slice(1)]:t},getCriticalPath:function(e,t,n){var o;let i=0,r=[];const l=vve(e,t);for(;i<t.length;){if(gve(e)&&e.type===uae){const l=null===(o=e.props)||void 0===o?void 0:o.subclass;if(l>0){if(l===n){r=t.slice(0,i);break}l<n&&(r=t.slice(0,i+1))}}const s=e.children[l[i]];if(!mve(s))break;e=s,r.push(t[i]),i++}return r},getFirstOutlineKey:function(e){const{data:t}=e.editor,n=[];for(let e=0;e<t.children.length;e++){if(jve(t.children[e])){n.push(e);break}}return fve(n)},getIconSize:Jve,getNextOutlineNodePath:Kve,getOutlineItemById:function(e,t){var n,o;const i=e.children.map((t=>({parent:e.children,cnode:t})));for(;i.length;){const e=i.shift();if(void 0===e)continue;const{parent:r,cnode:l}=e;if(jve(l)){if((null===(n=l.props)||void 0===n?void 0:n.id)===t)return{cnode:l,parent:r};const e=null===(o=l.props)||void 0===o?void 0:o.list;We(e)&&i.unshift(...e.map((t=>({parent:e,cnode:t}))))}}return null},getOutlineNodeById:_ve,getOutlineNodeByPath:function e(t,n){var o;const i=t.children[0];let r=0;if(yve(i)){r=pve(i.key)[0]}const l=n[0]-r;if(l<0)return null;const s=t.children[l];if(jve(s)){if(n.length>1){const t=null===(o=s.props)||void 0===o?void 0:o.list;if(We(t)){return e({...s,children:t},Qs(n))}}return s}return null},getPrevOutlineNodePath:function(e,t){var n;const o=e.children[0];let i=0;if(yve(o)){i=pve(o.key)[0]}let r=t[0]-i;if(r<0)return[];const l=e.children[r];if(bve(l)&&t.length>1){const e=null===(n=l.props)||void 0===n?void 0:n.list;if(We(e)){const n=Kve({...l,children:e},Qs(t));if(n.length>=0)return[r+i,...n]}}for(;r>=0;){if(jve(e.children[--r]))break}return r<0?[]:[r+i]},getTargetStyle:Yve,getTitle:Zve,injectOutlinePage:wge,insertOutlineNodes:(e,t)=>t=>{if(zge(t.selection)||(t=lme()(t)),!t.selection)return t;let n=t.selection.focus.path;const o=fme(t.node,n),i=Bge(t.node,o);if(Yge(i,!0)||(t=rme()(t),t=rme()(t),t=tme()(t)),!t.selection)return t;n=t.selection.focus.path;const r=_ge(t.node,n),l=Uve(t.node,r),s=qve(t.node,r),c=[];return l&&c.push(...l.children),c.push(...e),s&&c.push(...s.children),t.node.children=c,t=dme()(t),t=sme([n[0]])(t)},isFocusOutline:Gve,isOutlineNode:jve,isReferenceTitleNode:Wve,isShortCutNode:Vve,isTitleNode:zve,link:dye,name:uae,open:tge,readSelectionStore:Xve,removeShortCut:Tme,resetFileBranchExpand:Nme,saftyEditorOutline:()=>e=>{var t,n;const{children:o}=e.editor.node;for(const i of o)if(zve(i)){const o=i.children[0];if(bge(o)){const i=null===(t=o.props)||void 0===t?void 0:t.uid,r=o.children[0];if(!yge(r)){const t=Cge(o.key,0);if(o.children[0]=gge(pge([null!=r?r:""]),t),i){const t=null!==(n=e.editor.ureference)&&void 0!==n?n:{};t[i]=o,e.editor.ureference=t}}}}return e},setOptional:Ame,setOutline:Mme,setOutlineList:wme,shortcut:dae,sliceAfterEditNode:qve,sliceBeforeEditNode:Uve,sliceTargetEditNode:function e(t,n){const o=tc(n);if(void 0===o)return t;const i=[],r=t.children[o];return yve(r)&&i.push(e(r,Qs(n))),{...t,children:i}},titleDeleteBackward:Ime,transformToMarkdownDepth:Hve,unravelOutlinePage:e=>t=>{var n,o;return void 0===(null===(o=null===(n=t.store)||void 0===n?void 0:n.editor)||void 0===o?void 0:o[e])?t:t=bq(e,!1)(t)},useOutlineEvents:Kme,useOutlineStyle:Yme,useShortCutEvents:Gme});const{genNextLevelPath:pye,genPrevLevelPath:vye,getNodeByPath:gye,getNodeLength:mye,getPathFromKey:yye,iterateBlockNode:bye,sliceBlockPath:Cye,sortSelection:wye,createDecorateBlockNode:xye,decorateBlockNode:Sye,setSelectionReflow:Eye}=ek;function kye(e,t,n,o,i){var r,l;const{modal:s,webdav:c,file:a}=e.stater.get();if((null==s?void 0:s.visible)||(null==c?void 0:c.visible))return;if(wje(a))return;const{imperator:u,context:d}=e.provider(),f=d.editor.style,h=null===(r=d.editor.selectionDecorate)||void 0===r?void 0:r[t];null===(l=u.current)||void 0===l||l.commit((e=>{if(h!==n){const o=xye({type:t,subclass:n});e=Sye(o,!0)(e)}else e=Sye()(e);if(e=Eye(!0)(e),o){oae(e).forEach((t=>{e=bye((t=>{o(e,t,f)}),t)(e)}))}return e})),null==i||i()}function Dye(e,t,n,o,i=!0){const{context:r}=e.provider();if(Iye(t,n,o),iae(r,uae,i)){const e=r.editor.style;Eme(t,t.node,e)}}function Iye(e,t,n){var o,i,r,l,s,c,a,u,d,f,h,p,v,g;let m=[0];if(uSe(t)){const e=Jl(null===(o=t.props)||void 0===o?void 0:o.level);We(e)&&(e.length&&e[e.length-1]--,m=e)}let y={};const b=[];let C=null;for(let o=0;o<t.children.length;o++){const w=t.children[o];if(!lae(w)||jve(w)){y={};continue}let x=null===(i=w.props)||void 0===i?void 0:i.type;if(C!==x&&x===wEe.name){const e=w.children[0];if(!lae(e)){y={};continue}x=null===(r=e.props)||void 0===r?void 0:r.type}C!==x&&(C=x),y[C]||(y[C]=m.slice());let S=y[C];const E=yye(w.key),k=tae(e,E,n),D=nae(e,E,n),I=parseInt(String(null!==(s=null===(l=w.style)||void 0===l?void 0:l.marginLeft)&&void 0!==s?s:0)),N=Math.ceil(Math.max(0,I)/D),L=Math.max(0,m.length-1+N),B=null===(c=w.props)||void 0===c?void 0:c.offset,T=null===(a=w.props)||void 0===a?void 0:a.id;if(void 0===S[L]&&(S[L]=0),B&&!b.includes(T)?(S[L]=B,b.push(T)):S[L]+=1,S=S.slice(0,L+1).filter((e=>void 0!==e)),I<0&&(null===(u=w.style)||void 0===u||delete u.marginLeft),w.props){const e={...w.props.style,...k};delete e.fontSize,delete e.fontWeight,Object.assign(w.props,{style:e,level:S.slice()})}if(0===o&&uSe(t)&&t.props&&(t.props.level=null===(d=w.props)||void 0===d?void 0:d.level),uSe(w)){const e=((null!==(h=null===(f=w.props)||void 0===f?void 0:f.level.length)&&void 0!==h?h:1)-1)*D;for(let t=0;t<w.children.length;t++){const o=w.children[t];if(!lae(o))continue;if(0===t){o.props&&(o.props.level=null===(p=w.props)||void 0===p?void 0:p.level);continue}o.style||(o.style={});const{fontSize:i}={...k,...o.style,...n},r=2*parseInt(String(null!=i?i:"0")),l=(null!==(g=null===(v=o.props)||void 0===v?void 0:v.level.length)&&void 0!==g?g:1)-1;o.style.marginLeft=Math.max(0,l*r-e)}}y[C]=S}}const Nye=e=>t=>{const n=oae(t),o=e.editor.style;return n.forEach((e=>{t=bye((e=>Iye(t,e,o)),e)(t)})),t.selectionReflow=!0,t};function Lye(e,t,n,o){var i,r;const{selection:l,data:s}=e.editor;if(!o){if(!l)return;o=l}if(!e.virtual)return void(null===(i=t.current)||void 0===i||i.commit(n));const{before:c,after:a}=wye(o);let u=Cye(s,c.path);for(0===u.length&&(u=[0]);u.length;){if(0===Js(u)){if(uSe(gye(s,ec(u)))){u=ec(u);continue}break}const e=vye(u),t=gye(s,e);if(!lae(t)||jve(t)||Vve(t))break;u=e}let d=Cye(s,a.path);0===d.length&&(d=[s.children.length-1]);let f=mye(gye(s,ec(d)));for(;d.length;){if(Js(d)>=f-1){if(uSe(gye(s,ec(d)))){d=ec(d),f=mye(gye(s,ec(d)));continue}break}const e=pye(d),t=gye(s,e);if(!lae(t)||jve(t)||Vve(t))break;d=e}null===(r=t.current)||void 0===r||r.commit(n,{focus:{path:u,offset:0},anchor:{path:d,offset:0}},!0)}function Bye(e){var t,n;const o=R(NU),{name:i}=e,{context:r}=o.provider(),l=null===(t=r.editor.selectionDecorate)||void 0===t?void 0:t[i];return G(hh,{style:Bce,children:null===(n=e.group)||void 0===n?void 0:n.map(((t,n)=>G(Mh,{type:0===n?"none":"left",children:G(ch,{style:{...Tce,backgroundColor:l===t.type?bf:void 0},children:G(dv,{style:Ace,onClick:()=>(t=>{var n,i;e.preventDefault?null===(n=e.onChange)||void 0===n||n.call(e,t):(kye(o,e.name,t,e.decorate),null===(i=e.onChange)||void 0===i||i.call(e,t))})(t.type),children:G(Tye,{list:t.jsx,style:t.style})})})},n)))})}function Tye(e){return G(K,{children:e.list.map(((t,n)=>X("div",{style:{...Sce,...e.style},children:[e.divider?G("div",{style:Mce}):null,t.divider?t.divider:null,X("div",{style:Nce,children:[G(t.icon,{}),G("div",{style:Lce})]}),t.children?G(Tye,{...e,divider:!!t.divider,list:t.children}):null]},n)))})}var Aye;!function(e){e[e.ONE=0]="ONE",e[e.TWO=1]="TWO"}(Aye||(Aye={}));const Mye={default:xf,hover:Cf,active:wf};function Oye(e){var t;const n=R(NU),{active:o,name:i,selected:r}=e,l=n.provider(),{context:s}=l,c=void 0!==(null===(t=s.editor.selectionDecorate)||void 0===t?void 0:t[i])||r;return G(Z_,{...e,left:{colors:Mye,style:c?{backgroundColor:Cf}:void 0,onClick:t=>{var i,r;if(!1===o){if(t.stopPropagation(),e.preventDefault)return void(null===(i=e.onChange)||void 0===i||i.call(e,Aye.ONE));kye(n,e.name,Aye.ONE,e.decorate),null===(r=e.onChange)||void 0===r||r.call(e,Aye.ONE)}},onPointerDown:e=>e.stopPropagation()},right:{colors:Mye,style:c?{backgroundColor:bf}:void 0,onClick:e=>{const t=n.provider(),{rootdispatch:o}=t;o(u7(i,!0))},onPointerDown:e=>e.stopPropagation()},children:e.children})}const{ZERO_WIDTH_NO_BREAK_SPACE:Rye,EditElement:Pye}=ek;function Fye({placeholder:e=!0,ratio:t=Oce,...n}){var o,i,r;const l=R(MU),s=R(Pye),[c,a]=$(!1),u=Z(null),d={...null==l?void 0:l.editor.style,...n.style},f=parseFloat(String(d.fontSize))*t,h={...Dce,width:f,...n.iconStyle};if(s&&(h.top=cae(d,n.iconSize)),void 0===n.kid)return G(K,{children:n.children});return X("div",{style:{...Ece,marginLeft:e?0:-f,...n.decorateStyle},onPointerEnter:e=>{var t;n.hover&&a(!0),null===(t=n.onPointerEnter)||void 0===t||t.call(n,e)},onPointerLeave:e=>{var t;n.hover&&a(!1),null===(t=n.onPointerLeave)||void 0===t||t.call(n,e)},children:[G("div",{style:{minWidth:f}}),X("div",{style:kce,children:[(!n.hover||c)&&X("div",{style:{...Ice,fontSize:null===(o=n.style)||void 0===o?void 0:o.fontSize,fontWeight:null===(i=n.style)||void 0===i?void 0:i.fontWeight,lineHeight:null===(r=n.style)||void 0===r?void 0:r.lineHeight},children:[G(ch,{style:h,ref:u,onClick:n.onClickIcon,onPointerEnter:n.onPointerEnterIcon,onPointerLeave:n.onPointerLeaveIcon,onPointerDown:n.onPointerDownIcon,children:G(n.icon,{...n,style:d})}),Rye]}),n.children]}),n.mark&&G(n.mark,{...n,style:d})]})}var Hye=Object.freeze({__proto__:null,get SubClass(){return Aye},calcFontSizeScale:sae,calcIconOffset:cae,calcIterateSelections:oae,calcTabMargin:function(e,t,n){var o,i;const r=Fce(e.node,t);return lae(r)?nae(e,t,n)*((null!==(i=null===(o=r.props)||void 0===o?void 0:o.level.length)&&void 0!==i?i:1)-1):0},calcTabStep:nae,calcUltimateStyle:tae,decorate:Fye,decorateClass:kye,decorateSafty:Lye,decorateSelection:Nye,decorateState:Iye,decorateSubClass:Dye,inner:Bye,isDecorateListNode:lae,isDecorateListNodeSelection:iae,isDeleteKeyboradEvent:rae,isNextListNodeDecorate:function(e,t){const{selection:n,node:o}=e.editor;if(void 0===n)return!1;const{after:{path:i}}=Jce(n),r=Xce(o,i),l=ec(r),s=Fce(o,l);if(!Yce(s)||r.length<=0||r[r.length-1]<=Hce(s))return!1;const c=Rce(r);let a=c.length;for(;a>0;){if(lae(Fce(o,c.slice(0,a)),t))return!0;a--}return!1},isPrevListNodeDecorate:function(e,t){const{selection:n,node:o}=e.editor;if(void 0===n)return!1;const{before:{path:i}}=Jce(n);let r=Xce(o,i);for(;r[r.length-1]<=0&&r.length>0;)r=ec(r);if(r.length<=0)return!1;const l=Pce(r);let s=l.length;for(;s>0;){if(lae(Fce(o,l.slice(0,s)),t))return!0;s--}return!1},outer:Oye,ratio:Oce,shouldDecorateKeyboardEvent:function(e){return Kce(e)||Gce(e)||rae(e)},triggerDecorateSelection:function(e,t){var n;const{selection:o,node:i}=e.editor;if(void 0!==o)if(jce(o)){const{path:e}=o.focus;let r=e.length;for(;r>0;){const o=Fce(i,e.slice(0,r--));if(!Yce(o))continue;const l=t[null===(n=o.props)||void 0===n?void 0:n.type];if(l)return void l()}}else eae(i,o,(e=>{var n;const o=t[null===(n=e.props)||void 0===n?void 0:n.type];if(o)return o(),!1}))}});const _ye=330,jye=600,Wye=30,zye="selector",Vye={position:"absolute",zIndex:1,display:"flex",justifyContent:"center",cursor:"default",left:"50%",top:5},$ye={position:"absolute",display:"flex",justifyContent:"center"},Zye={position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:14,color:Df},Uye={...{boxShadow:Nf,borderRadius:4,position:"absolute",display:"flex"},overflow:"hidden",display:"flex",marginTop:1,width:jye,height:_ye,paddingTop:Wye,flexDirection:"column",boxSizing:"border-box"},qye={height:Wye,flex:1,position:"absolute",top:0,left:0,right:0,backgroundColor:bf,cursor:"move",display:"flex",alignItems:"center"},Yye={marginLeft:10},Kye={position:"absolute",right:4,cursor:"pointer",padding:3,paddingBottom:3,paddingLeft:4,paddingRight:4,borderRadius:2,fontSize:12,color:kf},Gye={position:"relative",display:"flex",flex:1,overflow:"hidden"},Xye={position:"absolute",top:0,bottom:0,left:"50%",paddingRight:3,paddingLeft:2,transform:"translateX(-50%)",display:"flex",justifyContent:"center",cursor:"col-resize",zIndex:100},Jye={position:"absolute",top:0,bottom:0},Qye={flex:1,position:"relative"},ebe={flex:1,position:"relative",backgroundColor:mf},tbe={position:"absolute",top:0,bottom:0,left:0,width:5,zIndex:100,cursor:"col-resize"},nbe={position:"absolute",top:0,bottom:0,right:0,width:5,zIndex:100,cursor:"col-resize"},obe={position:"absolute",left:0,right:0,bottom:0,height:5,zIndex:100,cursor:"row-resize"},ibe={display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",verticalAlign:"middle"},rbe={display:"flex",flex:1,fontSize:14,alignItems:"center"},lbe={position:"relative",width:14,height:14,marginLeft:-16,marginRight:7,borderRadius:"50%",boxSizing:"border-box",borderWidth:1,borderStyle:"solid",borderColor:If,display:"flex",justifyContent:"center",alignItems:"center"},sbe={width:8,height:5,marginBottom:2,boxSizing:"border-box",borderLeft:"1px solid #fff",borderBottom:"1px solid #fff",transform:"rotate(-45deg)"},cbe={width:7,height:7,borderRadius:"50%",backgroundColor:yf},abe={display:"flex",flex:1,position:"absolute",top:0,bottom:0,left:-10,right:-10},ube={flex:1,paddingLeft:10,paddingRight:12,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"default"},dbe={display:"flex",alignItems:"center"},fbe={display:"inline-flex",backgroundColor:yf,color:"#fff",fontSize:12,fontWeight:"bold",height:15,minWidth:7,borderRadius:8,justifyContent:"center",alignItems:"center",marginLeft:4,paddingLeft:4,paddingRight:4},hbe={position:"relative",width:20,height:20,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:-18,marginRight:3},pbe={close:"close",empty:"empty",placeholder:"placeholder"},vbe={cn:{[pbe.close]:"关闭",[pbe.empty]:"没有数据",[pbe.placeholder]:"请输入关键字搜索关联双链"},en:{[pbe.close]:"Close",[pbe.empty]:"No Data",[pbe.placeholder]:"Please enter a keyword to search for associated reference"}},{calcCommonSelectionPath:gbe,comparePath:mbe,createDecorateInlineNode:ybe,excludeCommonSelection:bbe,getNodeByPath:Cbe,getNodesByPath:wbe,getNodeEndPath:xbe,getNodeLength:Sbe,getNodeStartPath:Ebe,getPathFromKey:kbe,isBlockNode:Dbe,isDecorateNode:Ibe,isEditNode:Nbe,isInlineNode:Lbe,isUniFormChildren:Bbe,isEmptyNode:Tbe,isNode:Abe,isReferenceNode:Mbe,isSameStyleNode:Obe,resetEditNodeKeyRecursion:Rbe,sliceDecoratePath:Pbe,sliceSelectionStartBlockPath:Fbe,sortSelection:Hbe,traverseNode:_be,transformNodeToEditNode:jbe}=ek,Wbe=(e,t,n,o)=>i=>{var r,l,s,c,a,u,d,f;const{store:h,file:p}=i;let v=t.search;v&&EHe(v)&&(i=Wq(e,v)(i));const g=ts(null===(l=null===(r=null==h?void 0:h.reference)||void 0===r?void 0:r[o])||void 0===l?void 0:l.data);if(void 0===g)return i;g.props&&(g.props.uid=pRe());const m=ybe({id:o,uid:pRe(),type:n,subclass:n},[g]),y=null===(s=null==h?void 0:h.editor)||void 0===s?void 0:s[e];if(void 0===y)return i;const b={},C=Kje(t);function w(e){var t,n;let{data:o,node:i}=e.editor;v&&wHe(v)&&(o=i,delete e.editor.ureference);const{before:r,after:l}=Hbe(C),s=Fbe(o,C);let c=Cbe(o,s);if(Dbe(c)){let i={anchor:{path:Qs(r.path,s.length),offset:r.offset},focus:{path:Qs(l.path,s.length),offset:l.offset}};if((null==h?void 0:h.reference)&&(c=mPe(c,{reference:h.reference})),0!==mbe(s,r.path)){const e=Ebe(c);i.anchor.path=e,i.anchor.offset=0}if(0!==mbe(s,l.path)){const e=xbe(c),t=Cbe(c,e);null!==t&&(i.focus.path=e,i.focus.offset=Sbe(t))}let a=gbe(i),u=Cbe(c,a);if(null===u)return e;let d=i.anchor.path[a.length];sc(u)&&(d=null!==(t=Js(a))&&void 0!==t?t:0,a=ec(a),u=Cbe(c,a)),i=bbe(i),0===i.anchor.path.length&&i.anchor.path.push(d),0===i.focus.path.length&&i.focus.path.push(d),VWe(u,i);for(let e=u.children.length-1;e>=0;e--){const t=u.children[e];t&&!Tbe(t,!0)||(u.children.splice(e,1),d>=e&&d--)}const f=Math.max(0,d+1);u.children.splice(f,0,m);const p=wbe(c,a);for(let e=p.length-1;e>=1;e--){const t=p[e-1],n=p[e];Lbe(n)&&Lbe(t)&&Bbe(t,n)&&(t.children=n.children,n.style&&(t.style||(t.style={}),Object.assign(t.style,n.style)))}Nbe(c)&&Rbe(c);for(let e=0;e<=s.length;e++){const t=Cbe(o,s.slice(0,e));if(Mbe(t)){const e=null===(n=t.props)||void 0===n?void 0:n.uid;e&&(b[e]=t)}}_be(c,(e=>{var t;if(Mbe(e)){const n=null===(t=e.props)||void 0===t?void 0:t.uid;n&&(b[n]=e)}}))}return v&&Nbe(o)&&Rbe(o),e}v?(CHe(v)&&(v=BHe(v)),EHe(v)&&(v=HHe(v)),wHe(v)?EDe(v,[w])({editor:y}):w({editor:y})):w({editor:y});const x=null===(c=g.props)||void 0===c?void 0:c.uid;if(!x)return i;const S=[];for(const t in b){const n=b[t],o=null===(a=n.props)||void 0===a?void 0:a.id;if(o&&_9(t,o)({editor:y}),i=xq(o,n,e)(i),x!==t){const t=null===(d=null===(u=i.store)||void 0===u?void 0:u.reference)||void 0===d?void 0:d[o];t&&_be(n,(n=>{var o,i;if(Mbe(n)){const r=null===(o=n.props)||void 0===o?void 0:o.id,l=null===(i=n.props)||void 0===i?void 0:i.uid;if(!r||!l)return;if(l===x){const n=Object.keys(t.detail);S.push(...n.filter((t=>t!==e)))}}}))}}for(const e of S)i=Sq(o,b[x],e)(i);if(i=Sq(o,b[x],e)(i),(null==p?void 0:p.currentPageId)===e){if(i.editor.data=y.data,i.editor.uids=y.uids,x){const e=null!==(f=i.editor.ureference)&&void 0!==f?f:{};e[x]=jbe(g,""),i.editor.ureference=e}i=U9()(i)}return i=hq(e,y)(i)},zbe=(e,t,n)=>o=>{var i,r,l,s;const{store:c,file:a}=o;let u=t.search;u&&EHe(u)&&(o=Wq(e,u)(o));const d=null===(i=null==c?void 0:c.editor)||void 0===i?void 0:i[e];if(void 0===d)return o;const f={},h=Kje(t);let p,v;function g(e){var t,o,i;let{data:r,node:l}=e.editor;u&&wHe(u)&&(r=l,delete e.editor.ureference);let s=gbe(h),c=Cbe(r,s);if(null===c)return e;for(Ibe(c)&&(c=c.children[0],s=[...s,0]);!Mbe(c)&&s.length;)s=ec(s),c=Cbe(r,s);if(0===s.length)return e;const a=Pbe(r,s,n);if(!a)return e;const d=Cbe(r,a);if(!Abe(d))return e;const g=ec(a),m=Cbe(r,g);if(!Abe(m))return e;p=null===(t=c.props)||void 0===t?void 0:t.id,v=null===(o=c.props)||void 0===o?void 0:o.uid;const y=m.children.indexOf(d);m.children.splice(y,1,...c.children);let b=m.children.length-1;for(;b>0;){const e=m.children[b],t=m.children[b-1];Obe(t,e)&&(sc(t)&&sc(e)?m.children[b-1]=t+e:Abe(t)&&Abe(e)?(t.children.push(...e.children),t.children=[t.children.join("")]):sc(t)&&Abe(e)&&(m.children[b-1]=t+e.children[0]),m.children.splice(b,1)),b--}u&&Nbe(r)&&Rbe(r);for(let e=0;e<=s.length;e++){const t=Cbe(r,s.slice(0,e));if(Mbe(t)){const e=null===(i=t.props)||void 0===i?void 0:i.uid;e&&(f[e]=t)}}return e}if(u?(CHe(u)&&(u=BHe(u)),EHe(u)&&(u=HHe(u)),wHe(u)?EDe(u,[g])({editor:d}):g({editor:d})):g({editor:d}),!p||!v){if((null==a?void 0:a.currentPageId)===e){const{ureference:e,uids:t}=o.editor,{uids:n,data:i}=d;for(const e in n)null==t||delete t[e];for(const n in t)null==e||delete e[n];o.editor.data=i,o.editor.uids=n,o.editor.ureference=e,o=U9()(o)}return o=hq(e,d)(o)}z9(v)({editor:d});const m=[];for(const t in f){const n=f[t],i=null===(r=n.props)||void 0===r?void 0:r.id;if(i&&_9(t,i)({editor:d}),o=xq(i,n,e)(o),!FPe(n))continue;const c=null===(s=null===(l=o.store)||void 0===l?void 0:l.reference)||void 0===s?void 0:s[i];if(c){const t=Object.keys(c.detail);m.push(...t.filter((t=>t!==e)))}}for(const e of m)o=kq(p,v,e)(o);return o=kq(p,v,e)(o),(null==a?void 0:a.currentPageId)===e&&(o.editor.data=d.data,o.editor.uids=d.uids,o.editor.ureference&&delete o.editor.ureference[v],o=U9()(o)),o=hq(e,d)(o)},Vbe=(e,t,n,o)=>i=>{var r,l;const{store:s,file:c}=i;o&&EHe(o)&&(i=Wq(e,o)(i));const a=null===(r=null==s?void 0:s.editor)||void 0===r?void 0:r[e];if(void 0===a)return i;const u={};let d=null,f=null,h=null,p=null;function v(e){var i;let{data:r,node:l}=e.editor;o&&wHe(o)&&(r=l,delete e.editor.ureference);const s=kbe(t),c=Cbe(r,s);if(!_he(c))return e;c.props&&(c.props.id=n);const a=c.children[0];Mbe(a)&&a.props&&(h=a.props.id,p=a.props.uid,a.props.id=n,a.props.uid=pRe(),d=a.props.id,f=a.props.uid);for(let e=0;e<=s.length;e++){const t=Cbe(r,s.slice(0,e));if(Mbe(t)){const e=null===(i=t.props)||void 0===i?void 0:i.uid;e&&(u[e]=t)}}return _be(c,(e=>{var t;if(Mbe(e)){const n=null===(t=e.props)||void 0===t?void 0:t.uid;n&&(u[n]=e)}})),e}if(o?(CHe(o)&&(o=BHe(o)),EHe(o)&&(o=HHe(o)),wHe(o)?EDe(o,[v])({editor:a}):v({editor:a})):v({editor:a}),!h||!p){if((null==c?void 0:c.currentPageId)===e){const{ureference:e,uids:t}=i.editor,{uids:n,data:o}=a;for(const e in n)null==t||delete t[e];for(const n in t)null==e||delete e[n];i.editor.data=o,i.editor.uids=n,i.editor.ureference=e,i=U9()(i)}return i=hq(e,a)(i)}z9(p)({editor:a}),i=kq(h,p,e)(i);for(const t in u){const n=null===(l=u[t].props)||void 0===l?void 0:l.id;n&&_9(t,n)({editor:a}),i=xq(n,u[t],e)(i)}if(d&&f&&(i=Sq(d,u[f],e)(i)),(null==c?void 0:c.currentPageId)===e){if(i.editor.data=a.data,i.editor.uids=a.uids,i.editor.ureference&&(delete i.editor.ureference[p],f)){const e=jbe(u[f],"");i.editor.ureference[f]=e}i=U9()(i)}return i=hq(e,a)(i)},{isNode:$be}=ek;function Zbe(e){return $be(e)&&e.type===zye}function Ube(e,t=0){return{type:zye,props:{options:e,active:t,expand:!1},children:[]}}const{recursiveTree:qbe}=xT;function Ybe(e){let t=0,n=0,o=0;return qbe(e,(e=>{"outline"===e.type?o++:"page"===e.type?n++:"root"===e.type&&t++})),{root:t,page:n,outline:o,total:t+n+o}}function Kbe(e){var t,n;return!(e.length>1)&&0===(null===(n=null===(t=e[0])||void 0===t?void 0:t.children)||void 0===n?void 0:n.length)}function Gbe(e){const t=[];return qbe(e,(e=>{var n;(null===(n=e.payload)||void 0===n?void 0:n.checked)&&t.push(e)})),t}function Xbe(e,t,n){const o=[];return qbe(e,((e,i)=>{if(!e.payload||!(null==i?void 0:i.id))return;const{node:r,search:l}=e.payload;_he(r)&&r.props.id===t&&o.push({pageId:i.id,kid:r.key,rid:n,search:l})})),o}const{isEditNode:Jbe,isReferenceNode:Qbe,sliceNode:eCe,getEditNodeOffsets:tCe}=ek;function nCe(e,t,n){var o,i,r;const{layout:{width:l,height:s,ratio:c},location:a,rstate:{editor:u}}=t,d=null===(i=null===(o=e.store)||void 0===o?void 0:o.editor)||void 0===i?void 0:i[n];if(!d)return null;if(u.resizeWidth)return{...u};const{data:f,selection:h,selectionStyle:p}=d,v={},g={reference:null===(r=e.store)||void 0===r?void 0:r.reference,callback(e){var t,n;if(Qbe(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;if(!o||!i)return;v[i]=o}},clone:!0},m={data:mPe(f,g),boundsReset:!0,clientHeight:s-Wye,clientWidth:l*c-20,scrollHeight:2*s,scrollOffset:{top:0},selection:h,scrollTop:0,selectionStyle:p,...a};m.uids=v,u.ghighlights&&(m.ghighlights=u.ghighlights);let y=!1;if(a){const{bounds:e,reflowStart:t}=a;if(e&&t){const t=e.start.path,n=e.end.path,o=eCe(f,t,n);if(Jbe(o)){y=!0;const e={top:0,left:0,right:0,bottom:s};m.node={...o,position:e},m.isEditPending=!0,m.reflowStart={path:t,offsets:tCe(u.node,t),flag:ek.ReflowStartFlag.next}}}}const b=vFe(m);return y&&(delete b.boundsReset,delete b.cwnd),b}function oCe(e,t){var n;const o=e.rstate.editor,{layout:{isMoving:i,rect:r}}=e,{editor:{isMoving:l,threshold:s}}=t,c=i||l,a=(null!=s?s:0)+(null!==(n=null==r?void 0:r.top)&&void 0!==n?n:0);return{...e.rstate,editor:{...o,isMoving:c,threshold:a}}}const{isNode:iCe,isMetaNode:rCe,sliceDecoratePath:lCe,sliceReferencePath:sCe,getEditNodeByPath:cCe,traversalEditNodeBySelection:aCe}=ek;function uCe(e,t,n,o,i,r){const l=[];if(aCe(n,o,((e,t)=>{if(rCe(e)){const t=e.children[0];iCe(t)&&Qse(t)&&l.push(`当前选区选中了表格，表格不能转化为${i}`)}const o=sCe(n,t);if(null==o?void 0:o.length){const e=cCe(n,o);if(iCe(e)&&FPe(e))return;l.push(`当前选区选中了双链，${i}不支持嵌套双链`)}const r=lCe(n,t,wae);(null==r?void 0:r.length)&&l.push(`当前选区选中了链接，${i}不支持嵌套链接`)})),l.length){const t={visible:!0,title:`遇到 ${l.length} 个问题`,content:G("div",{children:l.map(((e,t)=>G("div",{children:e},t)))})};return e(lre(t)),!0}return!1}const{calcCommonSelectionPath:dCe,createBlockNode:fCe,isNode:hCe}=ek,{BRANCH_HEIGHT:pCe,recursiveTree:vCe,mapTree:gCe,toggleBranchArrow:mCe}=xT,yCe=e=>t=>(delete(e={...e}).count,delete e.branch,Object.assign(t.result,e),t),bCe=(e,t)=>n=>(vCe(n.result.tree,(n=>{var o;if(e.id===n.id){void 0===n.payload&&(n.payload={});const e=n.payload;if(e.checked=!e.checked,void 0===t)return!0}else t&&(null===(o=n.payload)||void 0===o?void 0:o.checked)&&(n.payload.checked=!1)})),n.result.isEditPending=!0,n),CCe=e=>t=>(vCe(t.result.tree,(t=>{var n,o;const i=null===(n=t.payload)||void 0===n?void 0:n.node;if(_he(i)&&(null===(o=i.props)||void 0===o?void 0:o.id)===e){void 0===t.payload&&(t.payload={});t.payload.checked=!0}})),t.result.isEditPending=!0,t),wCe=(e,t)=>n=>(n.result=mCe(e,t)(n.result),n.result.isEditPending=!0,n),xCe=e=>t=>(vCe(t.result.tree,(n=>{n.id===e.id?(n.active=!0,t.result.branch=n):n.active=!1})),t.result.isEditPending=!0,t),SCe=e=>t=>{var n,o;return vCe(t.result.tree,((n,o)=>{if(n.id===e.id&&(null==o?void 0:o.children)){const e=o.children.indexOf(n);return-1!==e&&(o.children.splice(e,1),"root"===o.type||o.children.length||(t=SCe(o)(t))),!0}})),(null===(n=t.result.branch)||void 0===n?void 0:n.id)===e.id&&(t.result.branch=null===(o=t.result.tree[0].children)||void 0===o?void 0:o[0]),t.result.isEditPending=!0,t},ECe=e=>t=>(t.result.count=e,t),kCe=e=>t=>(t.result.isEditPending=e,t),DCe=e=>t=>{var n,o;let i=!1;if(vCe(t.result.tree,(t=>{var n,o,r;if(t.id===e.id)return i=!0,(null===(n=e.children)||void 0===n?void 0:n.length)&&(t.children=null!==(o=t.children)&&void 0!==o?o:[],t.children.push(...e.children)),t.payload=e.payload,(null===(r=e.payload)||void 0===r?void 0:r.decorated)&&(t.disabled=!0),!0})),!1===i){const i=gCe(null!==(n=e.children)&&void 0!==n?n:[],(e=>{var t;let n=e.disabled;return(null===(t=e.payload)||void 0===t?void 0:t.decorated)&&(n=!0),{...e,disabled:n}}));null===(o=t.result.tree[0].children)||void 0===o||o.push({...e,children:i})}return t.result.isEditPending=!0,t},ICe=()=>e=>(e.result.tree[0].children=[],e),NCe=e=>t=>(vCe(t.result.tree,(t=>{if(t.id===e.id){const e=t.title;return Zbe(e)&&e.props&&(e.props.expand=!e.props.expand),!0}})),t.result.isEditPending=!0,t),LCe=e=>t=>{const{width:n}=t.layout;return t.result.clientWidth=n*(1-e),t},BCe=e=>t=>(t.result.clientHeight=e,t),TCe=e=>t=>(t.result.scrollHeight=pCe*e,t),ACe=()=>e=>{const t=e.result.tree,{outline:n,total:o}=Ybe(t);return e=ECe(n)(e),e=TCe(o)(e)},MCe=(e,t,n,o)=>i=>{var r,l;const s=i.rstate.store;if(!s)return i;const c=null===(r=s.editor)||void 0===r?void 0:r[t.id];if(!c)return i;const a=e.payload,{search:u}=a;let{data:d}=c;if(u&&wHe(u)){const e=zHe(d,u);d=null==e?void 0:e.editor.node}if(!hCe(d))return i;const f=Kje(a),h=dCe(f);if(h.length<=0)return i;const p=h[0],v=fCe([d.children[p]]),g=null==s?void 0:s.reference,m={start:d.children[p-1],end:d.children[p+1],index:p};n.uid&&(m.exclude=[n.uid]);const y=o(v,m,g);if(!(null===(l=null==y?void 0:y.children)||void 0===l?void 0:l.length))return i;const b=i.result.tree[0].children;return b?(b.forEach((e=>{var n,o,r,l,s;if(e.id===t.id&&e.children){let c=0;if(u){const e=HHe(u);c=null!==(o=null===(n=t.children)||void 0===n?void 0:n.findIndex((t=>{let n=t.payload.search;return n&&(n=HHe(n)),!!Ec(e,n)})))&&void 0!==o?o:0,-1===c&&(c=0)}let a=0;const d=e.children.slice(c);for(let e=0;e<d.length;e++){const t=d[e],n=Kje(t.payload),o=dCe(n);if(p===o[0]){const e=null===(r=y.children)||void 0===r?void 0:r[a++],n=null==e?void 0:e.payload;n&&(null===(l=t.payload)||void 0===l||delete l.node,Object.assign(t.payload,ts({anchor:n.anchor,focus:n.focus})),(null===(s=i.result.branch)||void 0===s?void 0:s.id)===t.id&&(i.result.branch=t))}else if(p<o[0])break}}})),i.result.isEditPending=!0,i):i},{clearEditNodePosition:OCe,getBlockNodeStartPath:RCe,getEditBlockNodeEndPath:PCe,getEditBlockNodeStartPath:FCe,getKeyFromPath:HCe,getNodeByPath:_Ce,isDecorateInlineNode:jCe,isEditNode:WCe,isNode:zCe,mapNode:VCe,sliceBlockPath:$Ce,sliceMetaNodePath:ZCe,sliceNode:UCe,sliceSelectionStartBlockPath:qCe,sortSelection:YCe}=ek,KCe=e=>t=>(t.rstate=e,delete t.rstate.editor.scrollOffset,t),GCe=e=>t=>(t.rstate.gfocus=e,t.rstate.editor.refresh=pRe(!0),t),XCe=e=>t=>{const{width:n}=t.layout;return t.rstate.editor.clientWidth=n*e-20,t},JCe=e=>t=>(t.rstate.editor.clientHeight=e,t),QCe=e=>t=>{const n=Gje(t.result.branch);let o=e.search;return o&&EHe(o)&&(o=HHe(o)),o&&wHe(o)?EDe(o,[e=>(e.editor.highlights=n,e)])(t.rstate):t.rstate.editor.highlights=n,t},ewe=e=>t=>{const n=t.rstate.file;if(void 0===n)return t;n.currentPageId=e;const o=Y_e(n.tree,e);return o?n.branch=o:delete n.branch,t},twe=()=>e=>{const t=e.rstate.editor,n=PCe(t.node),o=yPe(t.data);return Ec(o,FCe(t.node))?t.node=OCe(t.node):(t.node=UCe(t.data,o,n),t.bounds={start:{path:o,slice:!1},end:{path:n,slice:!1}}),t.ureference=jPe(t.node),e},nwe=(e,t)=>n=>{var o,i,r,l,s;const{layout:{width:c,height:a,ratio:u}}=n;let d=null===(o=e.payload)||void 0===o?void 0:o.search;n.rstate=E9(t)(n.rstate),d&&EHe(d)&&(n.rstate=Wq(t,d)(n.rstate)),n.rstate=vq(t)(n.rstate);const f=null===(r=null===(i=n.rstate.store)||void 0===i?void 0:i.editor)||void 0===r?void 0:r[t];if(void 0===f)return n;const h=RCe(f.data);d&&EHe(d)&&(d=HHe(d));let p=[...h];if(d&&wHe(d))d.path&&(p=$Ce(f.data,d.path));else{const t=Kje(e.payload);p=qCe(f.data,t)}if(0===p.length)return n;const v=T$e(f,p,p);if(e.payload){let t=[];if(d&&wHe(d))d.path&&(t=ZCe(v.data,d.path));else{const n=Kje(e.payload),{before:o}=YCe(n);t=o.path,zCe(_Ce(v.data,t))||(t=ec(t))}v.location=HCe(t)}v.clientHeight=a-Wye,v.clientWidth=c*u-20,v.scrollHeight=2*a,v.scrollOffset={top:0},(null===(l=n.rstate.file)||void 0===l?void 0:l.currentPageId)===t&&(null===(s=n.rstate.editor.ghighlights)||void 0===s?void 0:s.length)&&n.rstate.editor.ghighlights.forEach((({search:e})=>{e&&EDe(e,[e=>(delete e.editor.highlights,e)])({editor:v})})),d&&wHe(d)?EDe(d,[t=>(t.editor.highlights=Gje(e),t)])({editor:v}):v.highlights=Gje(e);const g=n.rstate.store;if(null==g?void 0:g.reference){const e=g.reference;for(const t in e){const{data:n}=e[t];e[t]={...e[t],data:VCe(n,(e=>{var t;if(jCe(e)&&(null===(t=e.props)||void 0===t?void 0:t.initState)){const t={...e.props};return delete t.initState,{...e,props:t}}return e}))}}}return n.rstate=l9(v)(n.rstate),n},owe=()=>e=>{var t,n;const o=e.result.tree;if(!(null===(t=o[0].children)||void 0===t?void 0:t.length))return e;const i=o[0].children[0],r=null===(n=i.children)||void 0===n?void 0:n[0];return r?(e=xCe(r)(e),e=nwe(r,i.id)(e)):e},iwe=()=>e=>{if(!e.location)return e;const{location:{bounds:t,reflowStart:n},rstate:{editor:o}}=e;if(o.resizeWidth)return e;if(t&&n){e.rstate=E9()(e.rstate),e.rstate=vq()(e.rstate);const n={...o},{data:i,clientHeight:r}=n,l=t.start.path,s=t.end.path,c=UCe(i,l,s);if(WCe(c)){const t={top:0,left:0,right:0,bottom:r};n.node={...c,position:t},n.isEditPending=!0,n.bounds={start:{path:FCe(c),slice:!1},end:{path:PCe(c),slice:!1}},n.boundsReset=!0,delete n.cwnd,e.rstate=l9(n)(e.rstate)}}return e},rwe=e=>t=>(t.research=e,t),lwe=(e,t,n,o)=>i=>{var r,l,s;const c=Wbe(e,t,n,o)(i.rstate);if((null===(r=c.file)||void 0===r?void 0:r.currentPageId)!==e)return i;const a=null===(s=null===(l=c.store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[e];return a?(c.editor.data=a.data,c.editor.uids=a.uids,delete c.editor.ureference,V4(e)(c),i.rstate=c,i):i},swe=(e,t,n,o)=>o=>{var i,r,l;const s=zbe(e,t,n)(o.rstate);if((null===(i=s.file)||void 0===i?void 0:i.currentPageId)!==e)return o;const c=null===(l=null===(r=s.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[e];return c?(s.editor.data=c.data,s.editor.uids=c.uids,delete s.editor.ureference,V4(e)(s),o.rstate=s,o):o},cwe=(e,t,n,o)=>i=>{var r,l,s;const c=Vbe(e,t,n,o)(i.rstate);if((null===(r=c.file)||void 0===r?void 0:r.currentPageId)!==e)return i;const a=null===(s=null===(l=c.store)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[e];return a?(c.editor.data=a.data,c.editor.uids=a.uids,delete c.editor.ureference,V4(e)(c),i.rstate=c,i):i},awe=e=>t=>{const n=e.editor;return t.location={bounds:n.bounds,reflowStart:n.reflowStart,scrollTop:n.scrollTop},t},uwe=()=>e=>(delete e.location,e),{createBlockNode:dwe,initNodeKey:fwe}=ek,{BRANCH_HEIGHT:hwe}=xT;function pwe(e,t,n,o){var i;const r=gwe();e.layout&&Object.assign(r,e.layout);const l=function(e,t){const n=[{title:vwe(e),type:"root",id:pRe(!0),children:[]}],o=hje(n);return{tree:n,scrollHeight:o,scrollTop:0,clientWidth:jye*t.ratio,clientHeight:_ye-hwe,renderStart:{path:[0],index:0}}}(e,r),s={toolbar:{},editor:mwe(r),store:Jl(n.store),file:Jl(n.file),undoredo:Jl(n.undoredo)};null===(i=s.file)||void 0===i||delete i.currentPageId;const c={layout:r,rstate:s,result:l,...null==o?void 0:o[0]};return c.visible=e.visible,c.mode=e.mode,c}function vwe(e){var t;return fwe(Ube([null!==(t=e.selector)&&void 0!==t?t:""]))}function gwe(e=.5){return{ratio:e,width:jye,height:_ye}}function mwe(e){const{width:t,height:n,ratio:o}=e;return vFe({data:dwe([]),boundsReset:!0,clientHeight:n-hwe,clientWidth:t*o-20,scrollHeight:2*n,scrollOffset:{top:0}})}const ywe=e=>t=>(t.layout.ratio=e,t),bwe=e=>t=>(t.layout.width=e,t),Cwe=e=>t=>(t.layout.height=e,t),wwe=(e,t)=>n=>(n.layout.top=e,n.layout.left=t,n),xwe=e=>t=>(t.layout.isMoving=e,t),Swe=e=>t=>(t.layout.rect=e,t),Ewe=()=>e=>(e.layout=gwe(),e),kwe=()=>e=>(e=(e=>(delete e.location,e))(e),e=Ewe()(e)),Dwe=(e,t,n)=>t=>{const o=pwe(e,0,n);return Object.assign(t,o)},Iwe=e=>t=>(rq(e,!0)(t.rstate),t),{getPathFromKey:Nwe}=ek,Lwe=(e,t,n)=>o=>{var i;const{mode:r,visible:l}=o;if(!r)return o;const{uid:s=pRe(!0),kid:c}=e,a=Nwe(c),u=MHe(IHe(t.focus,GFe(a),QFe(s))),d=[u,r].join(h$);void 0===n.current.options&&(n.current.options={});for(const e in n.current.options)if(e.startsWith(u)){const t=null===(i=n.current.options)||void 0===i?void 0:i[e];if(!(null==t?void 0:t.mode))continue;t.visible=!1}return n.current.options[d]={...n.current.options[d],mode:r,visible:l},o},Bwe=()=>e=>(e.rstate=jre()(e.rstate),e),Twe=e=>t=>(t.drag=e,t),Awe=U(null),Mwe=U(null),Owe=U(null),Rwe=U(null),Pwe=U(null),{getNodeByPath:Fwe,getPathFromKey:Hwe,isEmptyNode:_we}=ek;function jwe(e){const t=Dd(e),n=R(IU),o=Nd("pointermove"),i=Nd("pointerup"),r=Nd("pointerdown"),l=Nd("pointerdown"),s=Nd("pointerdown"),c=Nd("pointerdown"),a=Nd("pointerdown");return F((()=>(window.addEventListener("pointermove",o.listener),window.addEventListener("pointerup",i.listener),()=>{window.removeEventListener("pointermove",o.listener),window.removeEventListener("pointerup",i.listener)})),[o,i]),F((()=>{const e=l.pipe(Iu((e=>{e.stopPropagation();const{ratio:n,width:r}=t.current;return o.pipe(Nu(i)).pipe(Lu(16)).pipe(lu((t=>{const o=t.clientX-e.clientX;return Math.min(1,(r*n+o)/r)})))}))).subscribe((e=>{var n,o;t.current.dispatch(Twe(!0)),null===(o=(n=t.current).onPointerMoveBorder)||void 0===o||o.call(n,e)})),n=s.pipe(Iu((e=>{e.stopPropagation();const{width:n}=t.current;return o.pipe(Nu(i)).pipe(Lu(16)).pipe(lu((t=>Math.max(10,n-2*(t.clientX-e.clientX)))))}))).subscribe((e=>{var n,o;t.current.dispatch(Twe(!0)),null===(o=(n=t.current).onPointerMoveLeftEdge)||void 0===o||o.call(n,e)})),r=c.pipe(Iu((e=>{e.stopPropagation();const{width:n}=t.current;return o.pipe(Nu(i)).pipe(Lu(16)).pipe(lu((t=>Math.max(10,n+2*(t.clientX-e.clientX)))))}))).subscribe((e=>{var n,o;t.current.dispatch(Twe(!0)),null===(o=(n=t.current).onPointerMoveRightEdge)||void 0===o||o.call(n,e)})),u=a.pipe(Iu((e=>{e.stopPropagation();const{height:n}=t.current;return o.pipe(Nu(i)).pipe(Lu(16)).pipe(lu((t=>Math.max(10,n+(t.clientY-e.clientY)))))}))).subscribe((e=>{var n,o;null===(o=(n=t.current).onPointerMoveBottomEdge)||void 0===o||o.call(n,e)})),d=bu(l,s,c).pipe(Iu((()=>i))).subscribe((()=>{t.current.dispatch(Twe(!1))}));return()=>{e.unsubscribe(),n.unsubscribe(),r.unsubscribe(),u.unsubscribe(),d.unsubscribe()}}),[l,t,o,i,s,c,a]),F((()=>{const e=r.pipe(Iu((e=>{const{top:n=0,left:r=0}=t.current;return o.pipe(Nu(i)).pipe(lu((t=>({left:r+(t.clientX-e.clientX),top:n+(t.clientY-e.clientY)}))))}))).subscribe((e=>{var n,o;null===(o=(n=t.current).onPointerMoveHeader)||void 0===o||o.call(n,e)})),n=r.pipe(Iu((()=>i))).subscribe((()=>{var e,n;null===(n=(e=t.current).onPointerDownUpHeader)||void 0===n||n.call(e)}));return()=>{e.unsubscribe(),n.unsubscribe()}}),[t,o,i,r]),F((()=>{const e=bu(r,a).pipe(Iu((()=>i))).subscribe((()=>{n()}));return()=>e.unsubscribe()}),[a,i,r,n]),{border:Ld([l]),header:Ld([r]),leftEdge:Ld([s]),rightEdge:Ld([c]),bottomEdge:Ld([a])}}function Wwe(e,t,n,o){const i=R(IU);return{onClose(){var t;n(kwe()),requestAnimationFrame(i),o[2](),null===(t=e.onClose)||void 0===t||t.call(e)},onPointerMoveBorder(e){n(ywe(e),LCe(e),XCe(e),twe())},onPointerMoveLeftEdge(e){const{ratio:o}=t.layout;n(bwe(e),LCe(o),XCe(o),twe())},onPointerMoveRightEdge(e){const{ratio:o}=t.layout;n(bwe(e),LCe(o),XCe(o),twe())},onPointerMoveBottomEdge(e){n(Cwe(e),BCe(e),JCe(e))},onPointerMoveHeader({top:e,left:t}){n(wwe(e,t),xwe(!0))},onPointerDownUpHeader(){n(xwe(!1))}}}function zwe(e){const t=R(NU),n=R(SU),o=R(EU),i=R(LU),r=R(Owe),l=R(Mwe),s=R(Rwe),c=R(Pwe),a=R(MU),{branch:u}=e;let d=!1;return{async onClick(e){e.stopPropagation(),d||(await async function(e){var d;if(e.stopPropagation(),void 0===u)return;if(u.disabled)return;if(c.onClickSelector)return void await c.onClickSelector(u,c,s,r,l);const{result:{tree:f},rstate:{file:h}}=s,p=K_e(f,u.id);if(!p)return;const v=u.payload;if(!v)return;const g=null==h?void 0:h.currentPageId;if(void 0===g)return;const m=null===(d=n.file)||void 0===d?void 0:d.currentPageId;if(void 0===m)return;const{checked:y}=v,{id:b,name:C,kid:w,uid:x}=c;if(void 0===b)return;const{focus:S,editor:{data:E,node:k}}=a,D=[bCe(u)],I=[V4(g),V4(m),N9("updated"),g9(pRe(!0))];if(x){const e=IHe(S,GFe(Hwe(w)),QFe(x),nHe());I.push(s4(e))}const N=Zc([g,p.id]);for(const e of N){if(t.exist(e))continue;const n=await _Y(e,i);I.push(rq(n)),D.push(Iwe(n))}if(_he(v.node)&&!y){const e=v.node.props.id,t=Xbe(f,b,e);return D.push(cwe(m,w,e,S.child)),D.push(...t.map((e=>{const{pageId:t,kid:n,rid:o,search:i}=e;return cwe(t,n,o,i)}))),D.push(CCe(b)),D.push(CCe(e)),I.push(Vbe(m,w,e,S.child)),I.push(...t.map((e=>{const{pageId:t,kid:n,rid:o,search:i}=e;return Vbe(t,n,o,i)}))),I.push(U9(),Z3(m),Z3(g),Z3(p),p9(),b4()),r(...D),l[2](!0),void requestAnimationFrame((()=>{o(...I)}))}y?D.push(swe(p.id,v,C)):D.push(lwe(p.id,v,C,b));const L=Hwe(w);let B=c.text;if(void 0===B){let e=E;_we(e,!0)&&(e=k);const t=Fwe(e,L);B=OWe(t)}D.push(MCe(u,p,c,((e,t,n)=>B?FWe(B,e,t):null)),QCe(v)),y?I.push(zbe(p.id,v,C)):I.push(Wbe(p.id,v,C,b)),I.push(U9(),Z3(g),Z3(p),p9(),b4()),r(...D),l[2](!0),requestAnimationFrame((()=>{o(...I)}))}(e),d=!0)}}}function Vwe(e){const t=R(NU),n=R(SU),o=R(LU),i=R(EU),r=R(Owe),l=R(Mwe),s=R(Rwe),c=R(Pwe),a=R(MU),{branch:u}=e;let d=!1;return{async onClick(e){e.stopPropagation(),d||(await async function(e){var d,f,h,p,v;if(e.stopPropagation(),void 0===u)return;if(u.disabled)return;if(c.onClickSelector)return void await c.onClickSelector(u,c,s,r,l);const{result:{tree:g,count:m},rstate:{file:y}}=s,b=K_e(g,u.id);if(!b)return;const C=u.payload;if(!C)return;const w=null==y?void 0:y.currentPageId;if(void 0===w)return;const x=null===(d=n.file)||void 0===d?void 0:d.currentPageId;if(void 0===x)return;const{id:S,name:E,uid:k,kid:D}=c,I=[SCe(u)],N=[V4(w),V4(x),N9("updated"),g9(pRe(!0))],L=Zc([w,b.id]);for(const e of L){if(t.exist(e))continue;const n=await _Y(e,o);N.push(rq(n)),I.push(Iwe(n))}if(I.push(swe(b.id,C,E)),I.push(MCe(u,b,c,((e,t,n)=>QWe(e,b.id,t,S?[S]:[],n)))),(null===(f=s.result.branch)||void 0===f?void 0:f.id)===u.id){const e=s.result.tree;if(null===(h=e[0].children)||void 0===h?void 0:h.length){const t=e[0].children.slice(0,2).map((e=>e.id));for(let e=0;e<t.length;e++){const n=t[e];if(!(null===(v=null===(p=s.rstate.store)||void 0===p?void 0:p.editor)||void 0===v?void 0:v[n])){const e=await _Y(n,o);I.push(Iwe(e))}}}I.push(owe())}if(I.push(QCe(C),ACe()),m&&m<=1&&I.push(Dwe(c,a,n),rwe(!1),kCe(!0)),r(...I),N.push(zbe(b.id,C,E),U9(),Z3(w),Z3(b),p9(),b4()),k){const e=Hwe(D),t=IHe(a.focus,GFe(e),QFe(k),nHe());N.push(s4(t))}l[2](!0),requestAnimationFrame((()=>{i(...N)}))}(e),d=!0)}}}const{EditElement:$we,createInlineNode:Zwe,isEditNode:Uwe,isNode:qwe,transformNodeToEditNode:Ywe,removeBoxSizeStyle:Kwe}=ek;function Gwe(e){var t;const n=R(Awe),{active:o,options:i}=e,r=null!==(t=n.count)&&void 0!==t?t:0;return G("div",{style:abe,children:G("div",{style:ube,children:X("div",{style:dbe,children:[G("span",{children:i[o]}),r>0&&G("span",{style:fbe,children:r})]})})})}function Xwe(e,t){return e.type===zye?G(Gwe,{...e.props}):Gze(e,t)}function Jwe(e){const{width:t}=e;return _((e=>{if(!Uwe(e))return null;const n=Kwe({...ibe,...e.style,pointerEvents:"none",width:t-100}),o=EPe(Ywe(Zwe([e],n),e.key));return G(kU,{value:{current:{}},children:G($we,{value:null,children:G("div",{style:rbe,children:G(AE,{node:o,renderElement:Xwe})})})})}),[t])}function Qwe(e,t,n,o){const{clientWidth:i}=e;return _((e=>{var r;const{title:l}=e;if(!qwe(l))return null!=l?l:null;const s=null!==(r=e.level)&&void 0!==r?r:0;let c=null!=i?i:0;c-=14*(s+1),c-=24,n&&"outline"===e.type&&(c-=10);const a=Kwe({...ibe,width:c,fontSize:14,...l.style,pointerEvents:"none"}),u=lae(l),d=[EPe(Ywe(Zwe(l.children,{...a,width:c}),l.key),14)],f={...l.props};u&&delete f.style;const h={...l,style:{...a,display:"inline-flex",alignItems:"center",pointerEvents:"none"},props:f,children:d};return null===t?null:G(t,{branch:e,node:h,editable:o,renderElement:Xwe})}),[i,n,o,t])}const{isNode:exe,createBlockNode:txe,traverseNode:nxe,sliceReferencePath:oxe,sliceDecoratePath:ixe,getEditNodeByPath:rxe,isReferenceNode:lxe,isReferenceBlockNode:sxe,transformNodeToEditNode:cxe}=ek,{recursiveTree:axe}=xT;function uxe(e,t,n,o,i){var r;const l=Dd(e),s=Dd(t),c=Dd(o),a=Dd(R(SU)),u=Dd(R(xU)),d=R(EU),f=R(NU),h=R(LU),p=Dd(R(MU)),v=Z(""),g=null!==(r=e.text)&&void 0!==r?r:OWe(n),{kid:m}=e,y=Boolean(t.research);F((()=>{let e=null,t=!1;return(async()=>{const n=l.current,o=s.current,r=c.current,u=a.current,m=p.current;if(!1===o.research)return;if(""===g.trim())return;const{store:y,file:b,gfocus:C,editor:{status:w}}=u;if(w&&"normal"!==w)return;if(void 0===y)return void i(rwe(!1));let x=null==b?void 0:b.currentPageId;if(!x)return void i(rwe(!1));let S=[];const E=await sF();1===E.ok&&E.data&&(S=E.data);let k=0;const D={...y.editor},I={};async function N(e){var t;for(const o in I){const{data:r}=I[o];delete I[o];const l={},s=async t=>{t?(t.id=o,await L(t,o,e),e=!1):e&&i(ICe())},c=[];n.uid&&c.push(n.uid);for(let e=1;e<r.children.length;e++){const n=r.children[e];if(zve(n)||Vve(n)){const e=n.children[0];if(sxe(e)){const n=null===(t=e.props)||void 0===t?void 0:t.uid;n&&c.push(n)}}}await HWe(g,r,c,l,h,v,s)}i(rwe(!1))}async function L(e,t,o){var l;e.children&&axe(e.children,(e=>{const t=e.title;t&&nxe(t,((o,i)=>{var r,l,s;if(void 0===(null===(r=o.style)||void 0===r?void 0:r.content))return;const c=oxe(t,i);if(c){const o=rxe(t,c);if(lxe(o)){if(n.name===wae){const t=null===(l=o.props)||void 0===l?void 0:l.id,i=null===(s=o.props)||void 0===s?void 0:s.back;if(n.id!==t&&!i)return e.disabled=!0,!0}if(OWe(o)!==g)return e.disabled=!0,!0}return}if(ixe(t,i,wae))return e.disabled=!0,!0;return ixe(t,i,Cae)?(e.disabled=!0,!0):void 0}))}));const s=[];if(o){s.push(ICe()),s.push(DCe(e));const n=null===(l=e.children)||void 0===l?void 0:l[0];if(n&&C&&!bHe(C,r)){s.push(xCe(n)),s.push(QCe(n.payload));if(!f.exist(t)){const e=await _Y(t,h);s.push(Iwe(e)),d(rq(e))}s.push(nwe(n,t))}s.push(ewe(t))}else s.push(DCe(e));s.push(ACe()),i(...s)}!async function o(r){if(t)return;async function l(){delete D[x],x=S[0],k=0,S.shift(),x?o(r):Sc(I)?i(rwe(!1)):N(r)}let s,c=D[x];if(void 0===c){const e=await MY(x,h);if(void 0===e)return void l();const{uids:t}=e;if(t){const e=Zc(Object.values(t));s=await FY(e)}c=e,D[x]=e}else s=null==y?void 0:y.reference;xFe(c,{reference:s});const a=c.data.children.length;if(a>=1e3)return I[x]=c,void l();const{data:d}=c;if(k>=a&&S.length)return delete D[x],x=S[0],k=0,S.shift(),void(x?o(r):r?i(Dwe(n,m,u)):Sc(I)?i(rwe(!1)):N(r));const f=d.children.slice(k,k+10),p=txe(f),v={start:d.children[k-1],end:d.children[k+10],index:k,callback:n.exclude};n.uid&&(v.exclude=[n.uid]);const b=FWe(g,p,v,n.id);k+=10,null!==b?(b.id=x,b.title=cxe(EPe(d.children[0]),""),await L(b,x,r),e=setTimeout((()=>o()))):S.length||k<a?e=setTimeout((()=>o(r))):Sc(I)?i(rwe(!1)):N(r)}(!0)})(),()=>{"function"==typeof v.current&&v.current(),v.current=pRe(!0),null!==e&&clearTimeout(e),t=!0}}),[g,m,y,l,s,c,u,a,p,f,h,i,d]),F((()=>()=>{i(rwe(!1))}),[i])}function dxe(e,t,n,o,i){const r=Dd(e),l=Dd(t),s=Dd(n),c=Dd(R(SU)),a=Dd(R(xU)),u=R(LU),d=R(EU),f=R(NU),h=Dd(R(MU)),{kid:p}=e;F((()=>{let e=null,t=!1;return(async()=>{var n,i;const a=r.current,p=l.current,v=s.current,g=c.current,m=h.current;if(!1===p.research)return;if(!a.id)return;const{store:y,file:b,gfocus:C,regional:w,editor:{status:x}}=g;if(x&&"normal"!==x)return;if(void 0===y)return void o(rwe(!1));let S,E=null==b?void 0:b.currentPageId;if(!E)return void o(rwe(!1));if(S=w?null===(n=y.reference)||void 0===n?void 0:n[a.id]:await HY(a.id),void 0===S)return;const k=Object.keys(S.detail).filter((e=>e!==E)),D=null===(i=S.data.props)||void 0===i?void 0:i.back;if(D)for(const e in D){const t=D[e];k.includes(t)||t===E||k.push(t)}const I={...y.editor};!async function n(i){var r,l,s;if(t)return;let c,h=I[E];if(void 0===h){let e;if(w||(e=await MY(E,u)),void 0===e)return E=k[0],k.shift(),void(E?n(i):o(rwe(!1)));const{uids:t}=e;if(t){const e=Zc(Object.values(t));c=await FY(e)}h=e,I[E]=e}else c=null==y?void 0:y.reference;const{data:p}=h,b={callback:a.exclude};a.uid&&(b.exclude=[a.uid]);const x=null!==(l=null===(r=a.targetIds)||void 0===r?void 0:r.slice())&&void 0!==l?l:a.id?[a.id]:[],S=QWe(p,E,b,x,c);if(null===S)return k.length?e=setTimeout((()=>n(i))):(i&&o(Dwe(a,m,g)),o(rwe(!1))),delete I[E],E=k[0],void k.shift();const D=[];if(i){D.push(ICe()),D.push(DCe(S));const e=null===(s=S.children)||void 0===s?void 0:s[0];if(e&&C&&!bHe(C,v)){D.push(xCe(e)),D.push(QCe(e.payload));if(!f.exist(E)&&!w){const e=await _Y(E,u);D.push(Iwe(e)),d(rq(e))}D.push(nwe(e,E))}D.push(ewe(E))}else D.push(DCe(S));D.push(ACe()),o(...D),k.length?e=setTimeout((()=>n())):o(rwe(!1)),delete I[E],E=k[0],k.shift()}(!0)})(),()=>{null!==e&&clearTimeout(e),t=!0}}),[p,Boolean(t.research),c,r,l,s,u,a,h,f,o,d])}const{getPathFromKey:fxe}=ek;function hxe(e,t){const n=R(kU),{focus:o}=R(MU),{uid:i=pRe(!0),kid:r}=e,l=[MHe(IHe(o,GFe(fxe(r)),QFe(i))),t].join(h$);void 0===n.current.options&&(n.current.options={});const s={...n.current.options[l],mode:t};n.current.options[l]=s;const c=_(((e,t,o)=>{var i;const r=null===(i=n.current)||void 0===i?void 0:i.options;if(null==r?void 0:r[l]){const{mode:n}=e;if(n)r[l]=e;else for(const e in r)e.startsWith(l)&&(n||delete r[e].mode);const i={...e.rstate};t&&Object.assign(i,{store:t}),o&&Object.assign(i,{undoredo:o}),r[l]={...e,estate:i}}}),[n,l]),a=_((e=>{var t;const o=null===(t=n.current)||void 0===t?void 0:t.options;for(const t in o)e&&t===l||delete o[t]}),[n,l]);return[s,c,a]}const{getPathFromKey:pxe}=ek;function vxe(e,t,n,o,i){const r=Dd(t),l=R(SU),s=Dd(l),c=R(LU),a=R(EU),u=R(IU),d=R(NU),f=R(MU),h=Dd(f),p=o[2],{uid:v,kid:g}=e,{result:m}=t,y=_((e=>{const t=[yCe(e)];n(...t)}),[n]),b=_(((...e)=>{var t,o,i;const{rstate:l}=r.current,c=Md(...e)(l),d=l.editor.refresh;if(c===l)return;r.current.rstate=c;const f=[],v=[awe(c),KCe(c)],{store:g,file:m,provider:y,undoredo:b,editor:{data:C,isScrolling:w,refresh:x,status:S}}=c,{focus:E}=h.current,{gfocus:k,file:D}=s.current;y&&Ec(k,y.context.focus)&&f.push(r3(y));const I=null==D?void 0:D.currentPageId,N=null==m?void 0:m.currentPageId;if(N&&I){if(w)return u(),void(v.length&&n(...v));if(x!==d){const e=!wHe(E);if(f.push(rq(g),Cq(N),g9(pRe(!0))),c.gfocus&&f.push(a4(c.gfocus),DDe(E,[])),I===N&&f.push(L9(C)),(null===(i=null===(o=null===(t=null==g?void 0:g.crud)||void 0===t?void 0:t.update)||void 0===o?void 0:o.editor)||void 0===i?void 0:i.includes(I))&&e&&f.push(V4(I)),"updated"===S){const t=Y_e(m.tree,N);t&&f.push(a6(t)),e&&f.push(V4(I),m4(b))}p(!0)}f.length&&a(...f),v.length&&n(...v)}}),[s,r,h,p,n,a,u]);return H((()=>{const{store:e,gfocus:o,undoredo:i,editor:{status:r}}=l;if(o&&aHe(o)&&"updated"===r){const{rstate:r,layout:s,result:{branch:c}}=t,{file:u,editor:{resizeWidth:d}}=r,{focus:h}=f;if(wHe(h)&&a(N9("normal"),DDe(h,[])),d)return;const p=null==u?void 0:u.currentPageId;if(void 0===p)return void n(KCe({...r,store:e}),rwe(!0));const m=nCe(l,t,p);if(m){const t=[KCe({...r,editor:m,store:e,undoredo:i}),LCe(s.ratio)];if(v&&o&&h){NHe(o,IHe(h,GFe(pxe(g)),QFe(v)))||t.push(rwe(!0))}c&&t.push(QCe(c.payload),iwe()),n(...t)}}})),H((()=>{o[1]({...t},l.store,l.undoredo)})),H((()=>{l.gfocus&&!Ec(l.gfocus,t.rstate.gfocus)&&n(GCe(l.gfocus))})),j(i,(()=>({layout:e=>{n(Swe(e))},reset:()=>{n(Dwe(e,f,l)),p()},research:e=>{n(ICe(),rwe(e))},getState:()=>t,syncTraversal:()=>{o[1]({...t},l.store,l.undoredo)},closeTraversal:()=>{o[2]()},mergeTraversal:e=>{o[1]({...t,...e},l.store,l.undoredo)}}))),{onClickBranch:async(e,t,o,i)=>{var r;const{type:l,id:s}=e;if((null===(r=m.branch)||void 0===r?void 0:r.id)===s)return;const u=IHe(f.focus,nHe());if(!d.exist(t)){const e=await _Y(t,c);n(Iwe(e)),a(rq(e))}a(s4(u)),"root"===l?n(NCe(e)):"page"===l?n(wCe(e,i)):"outline"===l&&n(xCe(e),nwe(e,t),ewe(t))},onMultipleClick:async o=>{var i;if(o<=1)return;const{rstate:{editor:{selection:r},file:l}}=t,s=null==l?void 0:l.currentPageId;return void 0!==s?(await d.safty(s),p(),n(kwe()),null===(i=e.onClose)||void 0===i||i.call(e),requestAnimationFrame(u),requestAnimationFrame((()=>{d.dispatch(T6(s),s4(UFe()),dte(s,r),E6(s))})),!0):void 0},onDoubleClickBranch:async(t,o)=>{var i;const{type:r,payload:l}=t;if("outline"!==r)return;await d.safty(o),p(),n(kwe()),null===(i=e.onClose)||void 0===i||i.call(e),requestAnimationFrame(u);let s=UFe(),c=null==l?void 0:l.search;if(c&&wHe(c)){EHe(c)&&(c=HHe(c));cHe(PHe(c))&&(c=LHe(c)),s=IHe(s,c)}requestAnimationFrame((()=>{d.dispatch(T6(o),s4(s),dte(o,l),E6(o))}))},onChangeTree:y,editorDispatch:b}}function gxe(e){var t,n,o;const{title:i,ratio:r,width:l,height:s,top:c,left:a,drag:u,showHeader:d}=e,f=jwe(e),h={...Vye,...e.style};u&&(h.cursor="col-resize");const p={...Uye,width:l,height:d?s:s-Wye};return!1===d&&delete p.paddingTop,G(ch,{style:h,onClick:e=>e.stopPropagation(),children:G("div",{style:{...$ye,top:c,left:a},children:X(hh,{style:p,children:[d&&X(Mh,{type:"bottom",style:qye,...f.header,children:[G("div",{style:Yye,children:i}),G(dv,{style:Kye,onClick:e.onClose,children:vbe[null!==(t=e.lang)&&void 0!==t?t:"cn"][pbe.close]})]}),X("div",{style:Gye,children:[G("div",{style:tbe,...f.leftEdge}),G("div",{style:{...Qye,flex:r},children:e.isEmpty?G("div",{style:Zye,children:vbe[null!==(n=e.lang)&&void 0!==n?n:"cn"][pbe.empty]}):e.leftNode}),G("div",{style:{...Xye,left:100*r+"%"},...f.border,children:G(Mh,{type:"right",style:Jye})}),G("div",{style:{...ebe,flex:1-r},children:e.isEmpty?G("div",{style:Zye,children:vbe[null!==(o=e.lang)&&void 0!==o?o:"cn"][pbe.empty]}):e.rightNode}),G("div",{style:nbe,...f.rightEdge}),G("div",{style:obe,...f.bottomEdge})]})]})})})}function mxe(e){const[t,n]=Od((()=>({drag:!1}))),{ratio:o,width:i,height:r,tree:{value:l}}=e,s=Kbe(l.tree),c=Boolean(l.isEditPending||l.isScrolling),a=e=>{},u=Z(null),d=W((()=>s?null:G(kU,{value:{current:{}},children:G(TU,{value:u,children:G(ek.EditElement,{value:null,children:G(ST,{...e.tree,showMore:!1})})})})),[o,i,r,s,kd(c)]);let f=null;return!1!==e.showEditor&&(f=G(EU,{value:e.editor.dispatch,children:G(SU,{value:e.editor,children:G(ch,{onPointerDown:a,children:G(_K,{...e.editor,root:!0})})})})),G(Awe,{value:e,children:G(gxe,{...e,...t,dispatch:n,leftNode:f,rightNode:d})})}function yxe(){return G("svg",{width:"11",viewBox:"0 0 12 12",children:G("path",{fill:"#fff",stroke:"#fff","stroke-width":"0.15",d:"M10.5822 3.57657L10.5167 3.61301C10.6177 3.79444 10.5523 4.02342 10.3709 4.12441C10.1883 4.22559 9.9599 4.15984 9.85927 3.97843M10.5822 3.57657C10.7034 3.79423 10.6249 4.06884 10.4073 4.18994L10.4072 4.19001C10.1886 4.31122 9.91449 4.23251 9.79372 4.01488M10.5822 3.57657C9.6729 1.9411 7.94669 0.925 6.07692 0.925C3.23592 0.925 0.925 3.23611 0.925 6.07692C0.925 8.91773 3.23592 11.2288 6.07692 11.2288C8.91792 11.2288 11.2288 8.91773 11.2288 6.07692C11.2288 5.82784 11.0271 5.62585 10.7778 5.62585C10.5285 5.62585 10.3267 5.82784 10.3267 6.07692C10.3267 8.42026 8.42009 10.3267 6.07692 10.3267C3.73376 10.3267 1.82714 8.42026 1.82714 6.07692C1.82714 3.73358 3.73376 1.82714 6.07692 1.82714C7.6193 1.82714 9.04341 2.66547 9.79372 4.01488M10.5822 3.57657L9.85927 3.97843M9.79372 4.01488L9.85927 3.97843M9.79372 4.01488C9.79371 4.01485 9.7937 4.01483 9.79369 4.01481L9.85927 3.97843"})})}function bxe(e){const t={...lbe};return(e.checked||e.update)&&(t.borderColor=yf,t.backgroundColor=yf),e.disabled&&(t.cursor="not-allowed"),X(ch,{style:t,onPointerDown:e=>e.stopPropagation(),onDoubleClick:e=>e.stopPropagation(),onClick:e.onClick,children:[e.update&&G(yxe,{}),e.checked&&G("div",{style:sbe})]})}function Cxe(e){return G(dv,{style:hbe,onPointerDown:e=>e.stopPropagation(),onClick:e.onClick,children:G(MM,{width:14})})}var wxe;function xxe(e){const t={...lbe};return e.checked&&(t.borderColor=yf),e.disabled&&(t.cursor="not-allowed"),G(ch,{style:t,onPointerDown:e=>e.stopPropagation(),onDoubleClick:e=>e.stopPropagation(),onClick:e.onClick,children:e.checked&&G("div",{style:cbe})})}!function(e){e.search="search",e.review="review"}(wxe||(wxe={}));const{getEditNodeByPath:Sxe,getPathFromKey:Exe}=ek;function kxe(e){var t;const n=R(SU),o=R(MU),i=hxe(e,wxe.search),[r,l]=Od((()=>pwe(e,0,n,i)),Bwe()),{node:s}=o.editor,{kid:c,uid:a=pRe(),lang:u,text:d,type:f,onlyShowInResult:h}=e,p=IHe(o.focus,GFe(Exe(c)),QFe(a)),{result:v,layout:g,research:m}=r,y=null!=d?d:Sxe(s,Exe(c));let b=null;"checkbox"===f?b=Dxe:"radio"===f&&(b=Ixe);const C=Qwe(v,b,!0),{onClickBranch:w,onMultipleClick:x,onChangeTree:S,editorDispatch:E,onDoubleClickBranch:k}=vxe(e,r,l,i,e.ref);uxe(e,r,y,p,l);const D=Jwe(g),I=Wwe(e,r,l,i),N={zIndex:RHe(o.focus)},L=Kbe(v.tree),B={value:v,render:C,onChange:S,onClickBranch:w,onDoubleClickBranch:k},T={virtual:!0,editable:!0,lang:null!=u?u:"cn",dispatch:E,onMultipleClick:x,...oCe(r,o),focus:p,gfocus:n.gfocus},A={...g,lang:e.lang,style:N,isEmpty:!1===m&&L,showHeader:null===(t=e.showHeader)||void 0===t||t,title:D(y),tree:B,editor:T,count:v.count,...I};return L&&h?null:G(Pwe,{value:e,children:G(Rwe,{value:r,children:G(Owe,{value:l,children:G(Mwe,{value:i,children:G(mxe,{...A})})})})})}function Dxe(e){var t;let{branch:n,renderElement:o,node:i}=e;const{onClick:r}=zwe(e);if(void 0===n)return G("div",{});const l=null===(t=null==n?void 0:n.payload)||void 0===t?void 0:t.checked;return X("div",{style:rbe,children:["outline"===n.type&&G(bxe,{checked:l,disabled:n.disabled,onClick:r}),G(AE,{node:i,renderElement:o})]})}function Ixe(e){var t;const{branch:n,renderElement:o,node:i}=e,{onClick:r}=zwe(e);if(void 0===n)return G("div",{});const l=null===(t=null==n?void 0:n.payload)||void 0===t?void 0:t.checked;return X("div",{style:rbe,children:["outline"===n.type&&G(xxe,{checked:l,disabled:n.disabled,onClick:r}),G(AE,{node:i,renderElement:o})]})}const{getEditNodeByPath:Nxe,getPathFromKey:Lxe}=ek;function Bxe(e){var t,n;const o=R(SU),i=R(MU),r=hxe(e,wxe.review),{scroller:l,selecter:s,contextmenu:c}=R(OU),[a,u]=Od((()=>pwe(e,0,o,r)),Bwe()),{node:d}=i.editor,{kid:f,uid:h=pRe(!0),lang:p,editable:v}=e,g=IHe(i.focus,GFe(Lxe(f)),QFe(h)),{result:m,layout:y,research:b}=a,C=Nxe(d,Lxe(f)),w=Qwe(m,Txe,!0,v),{onClickBranch:x,onMultipleClick:S,onChangeTree:E,editorDispatch:k,onDoubleClickBranch:D}=vxe(e,a,u,r,e.ref);dxe(e,a,g,u);const I=Jwe(y),N=Wwe(e,a,u,r),L={zIndex:RHe(i.focus)},B=!1===b&&Kbe(m.tree),T={value:m,render:w,onChange:E,onClickBranch:x,onDoubleClickBranch:D},A={virtual:!0,selecter:s,scroller:l,contextmenu:c,editable:null===(t=e.editable)||void 0===t||t,lang:null!=p?p:"cn",dispatch:k,onMultipleClick:S,...oCe(a,i),focus:g,gfocus:o.gfocus},M={...y,lang:e.lang,style:L,isEmpty:B,showHeader:null===(n=e.showHeader)||void 0===n||n,title:I(C),tree:T,editor:A,count:m.count,...N};return G(Pwe,{value:e,children:G(Rwe,{value:a,children:G(Owe,{value:u,children:G(Mwe,{value:r,children:G(mxe,{...M})})})})})}function Txe(e){const{branch:t,renderElement:n,node:o,editable:i}=e,{onClick:r}=Vwe(e);return void 0===t?G("div",{}):X("div",{style:rbe,children:[i&&"outline"===t.type&&G(Cxe,{onClick:r}),G(AE,{node:o,renderElement:n})]})}var Axe=Object.freeze({__proto__:null,CheckBox:bxe,DEFAULT_HEIGHT:_ye,DEFAULT_WIDTH:jye,HEADER_HEIGHT:Wye,get Mode(){return wxe},Panel:mxe,Remove:Cxe,Review:Bxe,Search:kxe,addRefer:Wbe,anchorEditor:nwe,anchorFirstBranchEditor:owe,calcResultMix:ACe,clearLocation:uwe,clearTree:ICe,close:kwe,countTree:Ybe,createEditor:nCe,createSelectorNode:Ube,decreaseRefer:swe,filterBranchChecked:Gbe,increaseRefer:lwe,injectModuleStore:Iwe,isEmptyTree:Kbe,isSelectorNode:Zbe,mergeTree:DCe,reduceEditor:oCe,removeBranch:SCe,removeEditorPosition:twe,removeRefer:zbe,renderElement:Xwe,reset:Dwe,resetLayoutState:Ewe,resetModuleRefer:cwe,resetRefer:Vbe,resetSelectorNodeExpand:()=>e=>(vCe(e.result.tree,(e=>{var t;const n=e.title;Zbe(n)&&(null===(t=n.props)||void 0===t?void 0:t.expand)&&(n.props.expand=!1)})),e.result.isEditPending=!0,e),selector:zye,setBranch:xCe,setBranchNodeSelected:CCe,setBranchSelection:(e,t)=>n=>(vCe(n.result.tree,(o=>{var i;if(e.id===o.id)return o.payload={...o.payload,...t},(null===(i=n.result.branch)||void 0===i?void 0:i.id)===o.id&&(n.result.branch=o),!0})),n.result.isEditPending=!0,n),setDrag:Twe,setEditor:KCe,setEditorClientHeight:JCe,setEditorClientWidth:XCe,setLayoutHeight:Cwe,setLayoutMoving:xwe,setLayoutPosition:wwe,setLayoutRatio:ywe,setLayoutRect:Swe,setLayoutWidth:bwe,setLocation:awe,setModuleNoDraft:Bwe,setPageId:ewe,setResearch:rwe,setResultClientHeight:BCe,setResultClientWidth:LCe,setResultCount:ECe,setResultEditPending:kCe,setResultScrollHeight:TCe,setTraversalOption:Lwe,shouldPreventDefault:uCe,sliceReferArgs:Xbe,sliceReferBranches:function(e,t){return[]},syncEditorGFocus:GCe,syncEditorHighlights:QCe,syncEditorNode:iwe,syncTree:yCe,toggleBranchExpand:wCe,toggleBranchSelected:bCe,toggleSelectorNodeExpand:NCe,updateBlockNodeBranch:MCe,useBranchRender:Qwe,useLayoutEvents:jwe,useModule:vxe,usePanelEvents:Wwe,useReview:dxe,useReviewEvents:Vwe,useSearchEvents:zwe,useSearcher:uxe,useTitleRender:Jwe,useTraversal:hxe}),Mxe=Object.freeze({__proto__:null,list:Hye,panel:Axe});const Oxe="toggle-list",Rxe=8,Pxe={width:Rxe,height:Rxe,cursor:"pointer",position:"relative",top:Pf?-1:-.5,left:.5,zIndex:1,fontSize:0};function Fxe(e){return G(j_,{...e,children:X("svg",{width:14.5,viewBox:"0 0 12 12",fill:"none",children:[G("path",{d:"M1 9V11.6038L3.1 10.2453L1 9Z",fill:Lf}),G("path",{d:"M1 4.75471V7.35849L3.1 6L1 4.75471Z",fill:Lf}),G("path",{d:"M1 0.5V3.10378L3.1 1.74529L1 0.5Z",fill:Lf}),G("path",{d:"M11 9.78041V10.77H4V9.78041H11ZM11 5.52916V6.51875H4V5.52916H11ZM11 1.27V2.25958H4V1.27H11Z",fill:Lf})]})})}function Hxe(e){var t,n;const o=null===(t=e.style)||void 0===t?void 0:t.fontSize,i=(null===(n=e.style)||void 0===n?void 0:n.color)||Df,r=sae(o);return e.subclass===Aye.ONE?G(_xe,{scale:r,color:i,expand:e.expand}):e.subclass===Aye.TWO?G(jxe,{scale:r,color:i,expand:e.expand}):null}function _xe(e){var t;const n=null!==(t=e.scale)&&void 0!==t?t:1,o=Rxe*n,i=Rxe*n,r={transform:`rotate(${e.expand?"90deg":0})`};return G("div",{style:{...Pxe,width:o,height:i,top:-i/4,...e.style},children:G(GM,{style:r,width:o,fill:e.color})})}function jxe(e){var t;const n=null!==(t=e.scale)&&void 0!==t?t:1,o=Rxe*n,i=Rxe*n,r={transform:`rotate(${e.expand?"90deg":0})`};return G("div",{style:{...Pxe,width:o,height:i,top:-i/4-.5,...e.style},children:G($M,{style:r,width:5*o/Rxe,fill:e.color})})}const{calcLeftSizeByStyle:Wxe,calcTopSizeByStyle:zxe,comparePath:Vxe,DECORATE_BLOCK_NODE:$xe,SPLIT_BLOCK_MARGIN:Zxe,getNodeByPath:Uxe,getEditNodeByPath:qxe,getEditNodeStartPath:Yxe,getPathFromKey:Kxe,isBlockNode:Gxe,isCollapsed:Xxe,isDecorateBlockNode:Jxe,isDecorateNode:Qxe,isEditBlockNodeX:eSe,isEditNode:tSe,removePositionStyle:nSe,sliceBlockPath:oSe,sliceDecoratePath:iSe,DetectFlag:rSe}=ek;function lSe(e){if(void 0===e.position)return 0;const t=tc(e.children);return lae(t,Oxe)?0:Gxe(t)?cSe(t)+6:0}function sSe(e){if(void 0===e.position)return 0;const{style:t}=e;return Wxe(t)/2}function cSe(e){var t,n;if(void 0===e.position)return 0;const{position:o,style:i}=e;let r=0;if(!0===(null===(t=e.props)||void 0===t?void 0:t.expand)){const t=e.children[0];r=parseFloat(String((null===(n=null==t?void 0:t.style)||void 0===n?void 0:n.height)||"0"))}else r=parseFloat(String((null==i?void 0:i.height)||"0"));return o.top+zxe(i)+r/2}function aSe(e,t){var n;const{style:o,props:i}=e,r=parseInt(String((null===(n=null==i?void 0:i.style)||void 0===n?void 0:n.fontSize)||"0"));return Wxe(o)+r+(t?5:10)}function uSe(e,t){var n,o;if(e.type===$xe&&(null===(n=e.props)||void 0===n?void 0:n.type)===Oxe){if(void 0===t)return!0;if((null===(o=e.props)||void 0===o?void 0:o.subclass)===t)return!0}return!1}function dSe(e,t){var n;const{data:o,style:i}=t.editor,r={...i,...e.style};if(void 0===e.kid)return r;const l=Kxe(e.kid),s=Uxe(o,l);if(!Jxe(s))return r;const c=s.children[0];return tSe(c)?{...r,...nSe(c.style),...nSe(null===(n=c.props)||void 0===n?void 0:n.style)}:r}function fSe(e,t){var n,o,i,r,l;const s={position:"relative",width:"100%",height:"100%"};if(void 0===e.kid)return s;const{editor:{node:c},virtual:a}=t,u=Kxe(e.kid),d=qxe(c,u);if(eSe(d)){const e=d.children[0];Gxe(e)&&(a&&t.editor.detect.flag!==rSe.STATIC?s.top=-(null!==(o=null===(n=d.style)||void 0===n?void 0:n.paddingTop)&&void 0!==o?o:0):s.top=-(null!==(l=null!==(r=null===(i=e.position)||void 0===i?void 0:i.top)&&void 0!==r?r:a?Zxe:0)&&void 0!==l?l:0))}return s}function hSe(){return Rxe}const{isCollapsed:pSe,getEditNodeByPath:vSe,isDecorateBlockNode:gSe,isBlockNode:mSe,sliceBlockPath:ySe,sliceDecoratePath:bSe,transformNodeToEditNode:CSe,createDecorateBlockNode:wSe,sliceBoxSizeStyle:xSe,removeBoxSizeStyle:SSe,removePositionStyle:ESe,isEmptyNode:kSe,isEditNode:DSe,reflowEditNodeByPath:ISe,resetEditNodeKey:NSe,getPathFromKey:LSe,createBlockNode:BSe,isEditBlockNode:TSe,genNextLevelPath:ASe,getKeyFromPath:MSe,isDecorateNode:OSe,getNodeLength:RSe,transformEditNodeToNode:PSe,getEditNodeStartPath:FSe,comparePath:HSe,deleteFragment:_Se,genPrevLevelPath:jSe,tab:WSe,shiftTab:zSe,traversalEditBlockNodeBySelection:VSe,reflowEditNodeBySelection:$Se,sortSelection:ZSe,deleteBackward:USe,splitBlock:qSe,isBlockNodeCritical:YSe,isPathBefore:KSe,isPathAfter:GSe,getEditNodeEndPath:XSe,clearSelection:JSe,removeSplitBlockNodeStyle:QSe,injectSplitBlockNodeStyle:eEe,calcCommonPath:tEe,getEditNodesByPath:nEe,SPLIT_BLOCK_MARGIN:oEe}=ek;function iEe(e,t,n){var o;const{imperator:i,context:r}=e.provider();null===(o=i.current)||void 0===o||o.commit(rEe(r,t,n))}const rEe=(e,t,n)=>o=>{var i,r,l,s,c,a,u,d,f,h,p,v,g,m,y,b;if(!o.selection)return o;const C=null===(i=o.selectionDecorate)||void 0===i?void 0:i[Oxe],w=e.editor.style;if(pSe(o.selection)){const e=o.selection.focus.path;if(void 0!==(null===(r=o.selectionDecorate)||void 0===r?void 0:r[uae])){const n=bSe(o.node,e,uae);if(n){const e=vSe(o.node,n);if(jve(e)){const i=e.props;if(!i||i.subclass===aae.H)return o;(null===(l=i.mergeclass)||void 0===l?void 0:l[Oxe])===t?(null===(s=i.mergeclass)||void 0===s||delete s[Oxe],!1===i.expand&&(o=xme(n)(o))):(i.mergeclass=null!==(c=i.mergeclass)&&void 0!==c?c:{},i.mergeclass[Oxe]=t,i.expand=!0)}}return o}const i=ySe(o.node,e),y=vSe(o.node,i);if(void 0!==C){const r=bSe(o.node,e,Oxe);if(r&&0===HSe(i,[...r,0])){const i=vSe(o.node,ec(r)),l=vSe(o.node,r);if(gSe(l)&&mSe(i)){if(C!==t&&"inner"===n)return l.props&&(l.props.subclass=t),o;const s=tc(l.children);s&&DSe(s)&&(s.style={...s.style,...xSe(l.style)},s.position={...s.position,...l.position});const c=Js(l.children);c!==s&&kSe(c)&&l.children.pop();const v=null!==(u=null===(a=l.props)||void 0===a?void 0:a.list)&&void 0!==u?u:[],g=i.children.indexOf(l),m=[...l.children,...v],y=parseInt(String(null!==(f=null===(d=l.style)||void 0===d?void 0:d.marginLeft)&&void 0!==f?f:0));for(let e=1;e<m.length;e++){const t=m[e];if(!lae(t)||!t.style)continue;const n=parseInt(String(null!==(h=t.style.marginLeft)&&void 0!==h?h:0));t.style.marginLeft=n+y}i.children.splice(g,1,...m);const b=[...ec(r),(null!==(p=Js(r))&&void 0!==p?p:0)+e[r.length],...e.slice(r.length+1)];o.selection.focus.path=[...b],o.selection.anchor.path=[...b];const w=LSe(i.key);return o=NSe(w)(o),o=dEe(w)(o),$Se(!0)(o)}}}const b=vSe(o.node,ec(i)),x=b.children.indexOf(y),S=ESe(SSe(y.style)),E={...y,style:S};delete E.position;const k=[E];let D=x+1;const I=null===(v=E.props)||void 0===v?void 0:v.level;if(We(I))for(;D<b.children.length;){const e=b.children[D];if(!lae(e))break;const t=null===(g=e.props)||void 0===g?void 0:g.level;if(!(We(t)&&t.length>I.length&&Ec(t.slice(0,I.length),I)))break;k.push(e),D++}const N=CSe({...wSe({type:Oxe,subclass:t,expand:k.length>1}),style:xSe(y.style),children:k},y.key);if(lae(b,Oxe)){const e=null===(m=b.props)||void 0===m?void 0:m.style;N.props&&e&&(N.props.style=ts(e))}b.children.splice(x,D-x,N);const L=[...i,0,...e.slice(i.length)];o.selection.focus.path=[...L],o.selection.anchor.path=[...L];const B=LSe(b.key);return o=NSe(B)(o),Iye(o=dEe(B)(o),b,w),o=$Se(!0)(o)}const x=new Set,S=new Set,E=new Set,{focus:k,anchor:D}=o.selection,I={focus:{node:vSe(o.node,ec(k.path)),index:null!==(y=Js(k.path))&&void 0!==y?y:0},anchor:{node:vSe(o.node,ec(D.path)),index:null!==(b=Js(D.path))&&void 0!==b?b:0}};if(VSe(o.node,o.selection,((e,n)=>{var i,r,l,s,c,a;if(void 0===o.selection)return;if(E.has(e))return;const u=bSe(o.node,n,uae);if(u){const e=vSe(o.node,u);if(lae(e,uae)){if(S.has(e))return;S.add(e);const n=e.props;if(!n||n.subclass===aae.H)return;return void((null===(i=n.mergeclass)||void 0===i?void 0:i[Oxe])===t&&void 0!==C?(null===(r=n.mergeclass)||void 0===r||delete r[Oxe],!1===n.expand&&(o=xme(u)(o))):(n.mergeclass=null!==(l=n.mergeclass)&&void 0!==l?l:{},n.mergeclass[Oxe]=t))}}if(!YSe(e))return;const d=bSe(o.node,n,Oxe);if(void 0!==C)if(void 0===d);else{const e=vSe(o.node,d);if(OSe(e)){if(C!==t)return void(e.props&&(e.props.subclass=t));x.add(e)}}else{if(void 0!==d){const e=vSe(o.node,d);return void(gSe(e)&&e.props&&(e.props.subclass=t))}const i=vSe(o.node,ec(n)),r=i.children.indexOf(e),l=ESe(SSe(e.style)),u={...e,style:l};delete u.position;const f=[u];let h=r+1;const p=null===(s=u.props)||void 0===s?void 0:s.level;if(We(p))for(;h<i.children.length;){const e=i.children[h];if(!lae(e))break;const t=null===(c=e.props)||void 0===c?void 0:c.level;if(!(We(t)&&t.length>p.length&&Ec(t.slice(0,p.length),p)))break;f.push(e),h++}const v=CSe({...wSe({type:Oxe,subclass:t,expand:f.length>1}),style:xSe(e.style),children:[]},e.key);if(v.children=f,lae(i,Oxe)){const e=null===(a=i.props)||void 0===a?void 0:a.style;v.props&&e&&(v.props.style=ts(e))}i.children.splice(r,h-r,v),o=h-r<=1?NSe(n)(o):NSe(ec(n))(o),o=dEe(n)(o);const g=i.children[r];for(const e of g.children)mSe(e)&&E.add(e);Iye(o,i,w)}}),!0),void 0!==C){Array.from(x).sort(((e,t)=>{const n=LSe(e.key),o=LSe(t.key),i=HSe(n,o);return 0!==i?i:n.length>o.length?-1:n.length<o.length?1:0})).forEach((e=>{var t,n,i,r,l;const s=tc(e.children);s&&DSe(s)&&(s.style={...s.style,...xSe(e.style)},s.position={...s.position,...e.position});const c=Js(e.children);c!==s&&kSe(c)&&e.children.pop();const a=LSe(e.key),u=vSe(o.node,ec(a));if(!DSe(u))return;const d=null!==(n=null===(t=e.props)||void 0===t?void 0:t.list)&&void 0!==n?n:[],f=u.children.indexOf(e),h=[...e.children,...d],p=parseInt(String(null!==(r=null===(i=e.style)||void 0===i?void 0:i.marginLeft)&&void 0!==r?r:0));for(let e=1;e<h.length;e++){const t=h[e];if(!lae(t)||!t.style)continue;const n=parseInt(String(null!==(l=t.style.marginLeft)&&void 0!==l?l:0));t.style.marginLeft=n+p}u.children.splice(f,1,...h);const v=LSe(u.key);o=NSe(v)(o),o=dEe(v)(o)}))}return o.selection.focus.path=[...LSe(I.focus.node.key),I.focus.index],o.selection.anchor.path=[...LSe(I.anchor.node.key),I.anchor.index],$Se(!0)(o)},lEe=(e,t,n)=>o=>{var i,r,l,s,c;const a=vSe(o.node,t);if(!lae(a,Oxe))return o;const u=!(null===(i=a.props)||void 0===i?void 0:i.expand);if(void 0===a.props&&(a.props={}),a.props.expand=u,u){if(a.children=[...a.children,...null!==(l=null===(r=a.props)||void 0===r?void 0:r.list)&&void 0!==l?l:[]],null===(s=a.props)||void 0===s||delete s.list,a.children.length<=1&&!n){const e=Js(a.children);if(TSe(e)){const t=LSe(e.key),n=ASe(t),o=CSe(BSe([""]),MSe(n));o.style||(o.style={});const i=null===(c=e.style)||void 0===c?void 0:c.marginLeft;i&&(o.style.marginLeft=i),a.children.push(o)}}if(n){const e=MSe([...t,a.children.length]);a.children.push(CSe(n,e))}return Iye(o,a,e.editor.style),o=dEe(t)(o),o=ISe(t)(o)}a.props.list=a.children.slice(1),a.children=a.children.slice(0,1),o=dEe(t)(o),o=ISe(t)(o);const d=a.props.list;if(kSe(Js(d))&&d.pop(),!o.selection||0===d.length)return o;const{before:f,after:h}=ZSe(o.selection,!1),p=LSe(tc(d).key),v=LSe(Js(d).key);if(!KSe(f.path,p)&&!GSe(h.path,v))return JSe()(o),o;if(KSe(f.path,p)&&GSe(h.path,v))return o;if(KSe(f.path,p)&&!KSe(h.path,p)&&!GSe(h.path,v)){const e=vSe(o.node,[...t,0]);if(!DSe(e))return o;const n=XSe(e),i=vSe(o.node,n);return null===i||(h.path=n,h.offset=RSe(i)),o}if(!KSe(f.path,p)&&!GSe(f.path,v)&&GSe(h.path,v)){const e=ASe(t);return f.path=e,f.offset=0,o}return GSe(h.path,p)?(KSe(f.path,v),o):o},sEe=e=>t=>{var n,o,i;if(t.selection&&!pSe(t.selection)&&(t=_Se()(t)),!t.selection)return t;const r=e.editor.style,{path:l,offset:s}=t.selection.focus;if(0===s){const i=bSe(t.node,l,Oxe);if(i){const r=vSe(t.node,i);if(lae(r,Oxe)&&kSe(r)){const i=null===(n=t.selectionDecorate)||void 0===n?void 0:n[Oxe];if(void 0===i){if(Object.keys(null!==(o=t.selectionDecorate)&&void 0!==o?o:{}).includes(Oxe))return t=USe()(t)}return rEe(e,i,"outer")(t)}}}if(t=qSe()(t),(t=dEe(l)(t)).selection){const{path:n}=t.selection.focus,o=bSe(t.node,n,Oxe);if(void 0===o)return t;const l=vSe(t.node,o);if(!OSe(l))return t;const s=!!(null===(i=l.props)||void 0===i?void 0:i.expand),c=l.children.length;if(!0===s&&c>1){3===c&&1===n[o.length]&&kSe(Js(l.children))&&l.children.pop();const i=l.children[1];return lae(i)&&0===HSe(n,LSe(i.key))&&(t=WSe(r)(t),t=Nye(e)(t)),t=dEe(n)(t)}const a=l.children[1];if(!mSe(a))return t;QSe(a),l.children.splice(1,1);const u=ASe(o),d=CSe({...PSe(l),children:[a],props:{...l.props,list:[]}},MSe(u));eEe(d);const f=vSe(t.node,ec(o)),h=f.children.indexOf(l);if(f.children.splice(h+1,0,d),t.selection){const e=FSe(d);t.selection.anchor.path=[...e],t.selection.focus.path=[...e]}lae(a)&&Iye(t,f,r),t=dEe(o)(t),t=ISe(n)(t)}return t},cEe=e=>t=>{var n,o;const{selection:i,node:r}=t;if(void 0===i)return t;const{path:l,offset:s}=ZSe(i).before,c=bSe(r,l,Oxe);if(c){const i=vSe(r,c);if(OSe(i)){let a=!1;const u=FSe(i);0===HSe(l,u)&&0===s&&(a=!0);const d=bSe(r,l);if(d&&d.length>c.length&&(a=!1),!0===a){const i=null===(n=t.selectionDecorate)||void 0===n?void 0:n[Oxe];if(void 0===i){if(Object.keys(null!==(o=t.selectionDecorate)&&void 0!==o?o:{}).includes(Oxe))return t=USe()(t)}return rEe(e,i,"outer")(t)}}}if((t=USe(e.editor.style)(t)).selection){const{path:e}=t.selection.focus,n=bSe(t.node,e,Oxe);if(void 0===n)return t;const o=vSe(t.node,n);if(!OSe(o))return t;RSe(o)<=1&&o.props&&(o.props.expand=!1)}return t},aEe=(e,t)=>n=>{var o,i;if(void 0===n.selection)return n;if(!t){if(!pSe(n.selection)){const t=[],o=[];VSe(n.node,n.selection,((e,i)=>{for(const e of t)if(0===HSe(e,i))return;const r=bSe(n.node,i);if(r&&(t.push(r),r.length>1)){const e=ec(r),o=vSe(n.node,e);DSe(o)&&uSe(o)&&t.push(e)}o.push(e)}));for(const t of o){const o=LSe(t.key);n=aEe(e,o)(n)}return n}t=n.selection.focus.path}const{anchor:r,focus:l}=n.selection,s=vSe(n.node,ec(r.path)),c=vSe(n.node,ec(l.path)),a=e.editor.style;let u=null,d=ySe(n.node,t);for(;d[d.length-1]<=0&&d.length>0;)d=ec(d);if(d.length<=0)return n;let f=jSe(d),h=f.length;const p=tEe(d,f);for(;h>p.length;){const e=vSe(n.node,f.slice(0,h));if(lae(e,Oxe)){u=e,f=f.slice(0,h),d=d.slice(0,h);break}h--}if(null===u)return n=WSe(a)(n);const v=vSe(n.node,d);if(!DSe(v))return n=WSe(a)(n);if(!d.length)return n=WSe(a)(n);const g=ec(d),m=vSe(n.node,g);if(!DSe(m))return n=WSe(a)(n);const y=m.children.indexOf(v);if(-1===y)return n=WSe(a)(n);m.children.splice(y,1),u.children.push(v),u.props||(u.props={}),u.props.expand=!0,n=NSe(g)(n);for(const e of m.children)if(DSe(e)&&uSe(e)){const t=LSe(e.key);Iye(n=dEe(t)(n),e,a)}if(DSe(s)&&DSe(c)){const e=LSe(s.key),t=LSe(c.key);n.selection={anchor:{path:[...e,null!==(o=Js(r.path))&&void 0!==o?o:0],offset:r.offset},focus:{path:[...t,null!==(i=Js(l.path))&&void 0!==i?i:0],offset:l.offset}}}return v.style=ESe(v.style),delete v.position,n=ISe(LSe(v.key))(n)},uEe=(e,t)=>n=>{var o,i,r;if(void 0===n.selection)return n;if(!t){if(!pSe(n.selection)){const t=[],o=[];VSe(n.node,n.selection,((e,i)=>{for(const e of t)if(0===HSe(e,i))return;const r=bSe(n.node,i);if(r&&(t.push(r),r.length>1)){const e=ec(r),o=vSe(n.node,e);DSe(o)&&uSe(o)&&t.push(e)}o.push(e)}));for(const t of o){const o=LSe(t.key);n=uEe(e,o)(n)}return n}t=n.selection.focus.path}const{anchor:l,focus:s}=n.selection,c=vSe(n.node,ec(l.path)),a=vSe(n.node,ec(s.path)),u=e.editor.style,d=bSe(n.node,t,Oxe);if(!(null==d?void 0:d.length))return n=zSe(u)(n);const f=vSe(n.node,d);if(!DSe(f)||!uSe(f))return n=zSe(u)(n);if(null===(o=f.style)||void 0===o?void 0:o.marginLeft)return n=zSe(u)(n);const h=ec(d),p=vSe(n.node,h);if(!DSe(p)||!uSe(p))return n=zSe(u)(n);if(!h.length)return n=zSe(u)(n);const v=ec(h),g=vSe(n.node,v);if(!DSe(g))return n=zSe(u)(n);const m=p.children.indexOf(f);if(-1===m)return n=zSe(u)(n);p.children.splice(m,1);const y=p.children.length-m,b=p.children.splice(m,y);f.children.push(...b),b.length&&(f.props||(f.props={}),f.props.expand=!0);const C=g.children.indexOf(p);if(-1===C)return n=zSe(u)(n);g.children.splice(C+1,0,f),n=NSe(v)(n);for(let e=C;e<=C+1;e++){const t=g.children[e];if(DSe(t)&&uSe(t)){const e=LSe(t.key);Iye(n=dEe(e)(n),t,u)}}if(DSe(c)&&DSe(a)){const e=LSe(c.key),t=LSe(a.key);n.selection={anchor:{path:[...e,null!==(i=Js(l.path))&&void 0!==i?i:0],offset:l.offset},focus:{path:[...t,null!==(r=Js(s.path))&&void 0!==r?r:0],offset:s.offset}}}return n=ISe(h,!0)(n)},dEe=e=>t=>{const n=nEe(t.node,e);let o=null;for(const e of n)if(DSe(e)&&uSe(e)){o=e;break}if(null===o)return t;return function e(t){var n;const o=t.children.length;for(let n=0;n<o;n++){const o=t.children[n];mSe(o)&&(0===n?QSe(o):eEe(o),1===n&&(o.style||(o.style={}),o.style.paddingTop=oEe),uSe(o)&&e(o))}o<=1&&(null===(n=t.props)||void 0===n?void 0:n.expand)&&(t.props.expand=!1)}(o),eEe(o),t};const fEe={scale:Pf?.9:1},hEe={scale:Pf?.85:1},pEe=[{type:Aye.ONE,jsx:[{icon:e=>G(_xe,{...fEe,...e,style:{...fEe.style,...e.style},expand:!0}),children:[{icon:e=>G(_xe,{...fEe,...e,style:{...fEe.style,...e.style}})},{icon:e=>G(_xe,{...fEe,...e,style:{...fEe.style,...e.style},expand:!0}),children:[{icon:e=>G(_xe,{...fEe,...e,style:{...fEe.style,...e.style}})}]}]},{icon:e=>G(_xe,{...fEe,...e,style:{...fEe.style,...e.style}})}]},{type:Aye.TWO,jsx:[{icon:e=>G(jxe,{...hEe,...e,style:{...hEe.style,...e.style},expand:!0}),children:[{icon:e=>G(jxe,{...hEe,...e,style:{...hEe.style,...e.style}})},{icon:e=>G(jxe,{...hEe,...e,style:{...hEe.style,...e.style},expand:!0}),children:[{icon:e=>G(jxe,{...hEe,...e,style:{...hEe.style,...e.style}})}]}]},{icon:e=>G(jxe,{...hEe,...e,style:{...hEe.style,...e.style}})}]}],{getEditNodeByPath:vEe,getNodeLength:gEe,getPathFromKey:mEe,isEditNode:yEe,sliceDecoratePath:bEe}=ek;function CEe(e){var t,n;const o=R(MU),i=R(TU),r=R(EU),l=dSe(e,o),{editor:{node:s},focus:c}=o,a=fSe(e,o);let u=null,d=[];Array.isArray(e.children)?(u=e.children[0],d=e.children.slice(1)):u=e.children;const f=parseFloat(String(l.fontSize))*Oce,h={...e.listStyle,position:"relative",left:f,width:`calc(100% - ${f}px)`};if(p(u)){const o=null===(t=u.props)||void 0===t?void 0:t.node;if(yEe(o)){0===Js(mEe(o.key))||(u=null,d=null!==(n=e.children)&&void 0!==n?n:[])}}return X(K,{children:[G("div",{style:{},children:u&&G(Fye,{...e,style:l,iconSize:hSe(),icon:Hxe,onClickIcon:t=>{if(t.stopPropagation(),void 0===e.kid)return;const n=bEe(s,mEe(e.kid),Oxe);if(void 0===n)return;r(s4(c),NDe());const l=[lEe(o,n)],a={anchor:{path:[...n],offset:0},focus:{path:[...n],offset:0}};Lye(o,i,l,a)},onPointerDownIcon:e=>e.stopPropagation(),children:G("div",{style:a,children:u})})}),G("div",{style:h,children:d})]})}var wEe={name:Oxe,label:function(e){return xce[e.lang][Cce]},inner:function(e){const t=R(NU);return G(Bye,{...e,preventDefault:!0,group:pEe,onChange:e=>{iEe(t,e,"inner")}})},outer:function({children:e,...t}){const n=R(NU);return X(Oye,{...t,preventDefault:!0,onChange:e=>{iEe(n,e,"outer")},children:[G(Fxe,{...t}),e]})},icon:Fxe},xEe=Object.freeze({__proto__:null,ICON_SIZE:Rxe,calcHorizontalOffset:aSe,calcInitHorizontalOffset:sSe,calcInitVerticalOffset:lSe,calcPolyline:function(e,t){let n="",o=0,i=0;return o=lSe(e),i=sSe(e)+t-.5,e.children.forEach((e=>{var t;if(lae(e,Oxe)){const r=!!(null===(t=e.props)||void 0===t?void 0:t.expand),l=cSe(e),s=aSe(e,r)+i;n+=`M ${i} ${o} L ${i} ${l} M ${i} ${l} L ${s} ${l}`,o=l}})),n},calcVerticalOffset:cSe,decorateDeleteBackward:cEe,decorateExpand:lEe,decorateShiftTab:uEe,decorateSplitBlock:sEe,decorateSubClass:iEe,decorateTab:aEe,default:wEe,getIconSize:hSe,getTargetLayout:fSe,getTargetStyle:dSe,group:pEe,isToggleListSelection:function(e,t){const n=e.editor;let o=n.selection;if(void 0===o)return!1;if(!Xxe(o))return!1;const i=o.focus.path,r=iSe(n.node,i,t);if(void 0===r)return!1;const l=qxe(n.node,r);if(!Qxe(l))return!1;const s=oSe(n.node,i),c=Yxe(l);return 0===Vxe(s,c)},isToggleNode:uSe,list:CEe,name:Oxe,remarginToggleList:dEe,setToggleList:rEe});const{getEditNodeByPath:SEe,getEditNodeOffsets:EEe,getNodeLength:kEe,getPathFromKey:DEe,isEditNode:IEe,isMetaNode:NEe,sliceBlockPath:LEe,transformEditNodeToNode:BEe,isCollapsed:TEe,isLonelyNode:AEe,isBlockNode:MEe,traverseNode:OEe}=ek,{getKeyByIndex:REe,getRowSize:PEe,calcIndicatorRangeStyle:FEe,interateIndicatorRange:HEe,interateCellByRowIndex:_Ee,interateCellByColumnIndex:jEe,calcIndicatorRangeByMerge:WEe,calcMergeByIndicatorRange:zEe,getIndexByKey:VEe,getColumnSize:$Ee}=ML;function ZEe(e,t){const{scrollTop:n,node:o,clientHeight:i}=e.editor,r=LEe(o,DEe(t)),l=SEe(o,r);if(!IEe(l)||void 0===l.position)return{top:0};return{top:-(jc(EEe(o,r))-n-i)}}function UEe(e,t,n){var o,i,r,l,s,c;const{root:a,style:u,editor:d}=t,f=Cse(d)(Jl(e.value)),h=n.infocus,p=h?f.indicatorRange:void 0,v=h?f.selectedCoordinates:void 0;let g=0,m=null!==(o=f.rowTotalNumber)&&void 0!==o?o:0,y=null!==(i=f.rowStartDiff)&&void 0!==i?i:0;if(a){const{scrollTop:t,node:n,scrollOffset:o,clientHeight:i,threshold:l=0}=d,s=DEe(e.kid),c=LEe(n,s),a=SEe(n,c);if(MEe(a)&&AEe(a)){const u=SEe(n,s);if(Qse(u)&&u.key===e.kid){const e=jc(EEe(n,c));let s=t-e-((null!==(r=null==o?void 0:o.top)&&void 0!==r?r:0)+l);for(;s>0&&g<f.rowTotalNumber;){const e=PEe(f,g);if(s<e||g>=f.rowTotalNumber)break;s-=e,g++}let u=0;if(a.position){const{bottom:e,top:t}=a.position;u=e-t}let d=e+u-l-t-i;for(;d>0&&m>0;){const e=PEe(f,m-1);if(d<e||m<=0)break;d-=e,m--}}}}const b=null!==(l=Jl(f.defaultCell))&&void 0!==l?l:{};(e.style||(null==u?void 0:u.backgroundColor))&&(b.style?b.style=Jl(b.style):b.style={},(null==u?void 0:u.backgroundColor)&&!b.style.backgroundColor&&(b.style.backgroundColor=u.backgroundColor),e.style&&Object.assign(b.style,e.style)),y=PEe(f,0,g+1);let C=Jl(f.contextMenu);if(null==C||delete C.disableCopy,null==C||delete C.disableCut,void 0===p)C=void 0;else if(h&&v){const{rowIndex:e,columnIndex:t}=v,n=REe(e,t),o=null===(s=f.cells)||void 0===s?void 0:s[n],i=null===(c=null==o?void 0:o.state)||void 0===c?void 0:c.editor.selection;i&&TEe(i)&&(C=null!=C?C:{},C.disableCopy=!0,C.disableCut=!0)}return{...f,rowStartIndex:g,rowEndIndex:m,rowStartDiff:y,defaultCell:b,indicatorRange:p,contextMenu:C,selectedCoordinates:v}}function qEe(e){return Ec(BEe(e.node),BEe(mce().editor.node))}function YEe(e){return{position:"relative",left:-e/2}}function KEe(e){var t,n,o,i,r,l,s;const c=null==e?void 0:e.selectedCoordinates;if(void 0===c)return;const{rowIndex:a,columnIndex:u}=c;return{...null===(t=null==e?void 0:e.defaultCell)||void 0===t?void 0:t.style,...null===(o=null===(n=null==e?void 0:e.rows)||void 0===n?void 0:n[a])||void 0===o?void 0:o.style,...null===(r=null===(i=null==e?void 0:e.columns)||void 0===i?void 0:i[u])||void 0===r?void 0:r.style,...null===(s=null===(l=null==e?void 0:e.cells)||void 0===l?void 0:l[REe(a,u)])||void 0===s?void 0:s.style}}function GEe(e,t){var n;const o=KEe(e.value);return null!==(n=null==o?void 0:o[t])&&void 0!==n?n:""}function XEe(e,t,n,o){e=Jl(e);const{store:i}=t,r=Number(null==o?void 0:o.height),l=Number(null==o?void 0:o.width),s={...e.style};if(o)for(const e in s){const t=o[e];void 0!==t&&(s[e]=t)}let c=e.refresh;Ec(s,e.style)||(c=pRe(!0)),e={...e,style:s,clientHeight:r,clientWidth:l,refresh:c};const a=null==i?void 0:i.reference;return a&&(e.node=mPe(e.node,{reference:a,clone:!0})),e}function JEe(e,t){if(NEe(e)){const n=e.children[0];return t.includes(n.type)}if(IEe(e)&&1===kEe(e)){const n=e.children[0];if(IEe(n))return JEe(n,t)}return!1}function QEe(e,t,n){const o=t.indicatorRange;if(void 0===o)return e;const i=FEe(t,o,n);let r=Jl(e.editor);return r={...r,selectionStyle:i,selectionDecorate:void 0},{...e,editor:r}}function eke(e,t){OEe(e,((e,n)=>{var o,i,r,l,s;if(Qse(e)){const n=null===(o=e.props)||void 0===o?void 0:o.value;if(!n)return;t(n);const r=n.cells;if(!r)return;for(const e in r){const n=null===(i=r[e].state)||void 0===i?void 0:i.editor;if(!n)continue;eke(n.node,t)}}(uSe(e)||jve(e))&&!1===(null===(r=e.props)||void 0===r?void 0:r.expand)&&(null===(s=null===(l=e.props)||void 0===l?void 0:l.list)||void 0===s||s.forEach((e=>{eke(e,t)})))}))}function tke(e){const{indicatorRange:t,selectedCoordinates:n}=e;if(void 0===t)return;const o={indicatorRange:t,selectedCoordinates:n},i=(t,n=!0)=>{var i;const s=null===(i=e.rows)||void 0===i?void 0:i[t];void 0!==s&&(void 0===o.rows&&(o.rows={}),o.rows[t]=s,n&&e.cells&&_Ee(e.cells,t,(e=>{l(t,e,!1),r(e,!1)})))},r=(t,n=!0)=>{var r;const s=null===(r=e.columns)||void 0===r?void 0:r[t];void 0!==s&&(void 0===o.columns&&(o.columns={}),o.columns[t]=s,n&&e.cells&&jEe(e.cells,t,(e=>{l(e,t,!1),i(e,!1)})))},l=(t,n,l=!0)=>{var s;const c=REe(t,n),a=null===(s=e.cells)||void 0===s?void 0:s[c];void 0!==a&&(void 0===o.cells&&(o.cells={}),o.cells[c]=a,l&&(i(t,!1),r(n,!1)))};return HEe(t,{row:i,column:r,cell:l,infinite(){Object.assign(o,e)}}),t.columnEndIndex===1/0&&(o.clientWidth=e.clientWidth,o.scrollWidth=e.scrollWidth,o.scrollLeft=e.scrollLeft,o.columnTotalNumber=e.columnTotalNumber,o.columnDefaultSize=e.columnDefaultSize,o.columnEndDiff=e.columnEndDiff,o.columnEndIndex=e.columnEndIndex,o.columnStartDiff=e.columnStartDiff,o.columnStartIndex=e.columnStartIndex),t.rowEndIndex===1/0&&(o.clientHeight=e.clientHeight,o.scrollHeight=e.scrollHeight,o.scrollTop=e.scrollTop,o.rowTotalNumber=e.rowTotalNumber,o.rowDefaultSize=e.rowDefaultSize,o.rowEndDiff=e.rowEndDiff,o.rowEndIndex=e.rowEndIndex,o.rowStartDiff=e.rowStartDiff,o.rowStartIndex=e.rowStartIndex),o}function nke(e,t,n){var o,i,r,l,s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x;let{rowStartIndex:S=0,rowEndIndex:E=1,columnStartIndex:k=0,columnEndIndex:D=1}=null!==(o=e.indicatorRange)&&void 0!==o?o:{};null===E&&(E=1/0),null===D&&(D=1/0),e.selectedCoordinates&&e.selectedCoordinates;const I=null!==(i=e.rowDefaultSize)&&void 0!==i?i:Kse,N=null!==(r=e.columnDefaultSize)&&void 0!==r?r:Gse;let L=0;if(D!==1/0)for(let t=k;t<D;t++){const n=null!==(a=null===(c=null===(s=null===(l=e.columns)||void 0===l?void 0:l[t])||void 0===s?void 0:s.style)||void 0===c?void 0:c.width)&&void 0!==a?a:N;L+=parseFloat(String(n))}else L=null!==(u=e.scrollWidth)&&void 0!==u?u:t.clientWidth;let B=0;if(E!==1/0)for(let t=S;t<E;t++){const n=null!==(p=null===(h=null===(f=null===(d=e.rows)||void 0===d?void 0:d[t])||void 0===f?void 0:f.style)||void 0===h?void 0:h.height)&&void 0!==p?p:I;B+=parseFloat(String(n))}else B=null!==(v=e.scrollHeight)&&void 0!==v?v:I;let T=0;T=D!==1/0?L:null!==(g=e.clientWidth)&&void 0!==g?g:t.clientWidth,T>t.clientWidth&&(T=t.clientWidth);const A=null!==(y=null===(m=t.selection)||void 0===m?void 0:m.focus.path)&&void 0!==y?y:[0];if(A){const e=AFe(t,LEe(t.data,A));T>e&&(T=e)}let M=0;M=E!==1/0?B:null!==(b=e.clientHeight)&&void 0!==b?b:t.clientHeight,M>t.clientHeight&&(M=t.clientHeight);let O=E-S;O===1/0&&(O=null!==(C=e.rowTotalNumber)&&void 0!==C?C:0);let R=D-k;R===1/0&&(R=null!==(w=e.columnTotalNumber)&&void 0!==w?w:0);const P=bce(O,R,{clientWidth:T,rowDefaultSize:I,columnDefaultSize:N});if(P.clientHeight=M,P.clientWidth=T,P.scrollHeight=B,P.scrollWidth=L,e.cells){const t={};for(const o in e.cells){const i=e.cells[o],r=null===(x=i.state)||void 0===x?void 0:x.editor;if(r&&r.clientWidth>T&&(r.clientWidth=T),r&&(null==n||n(r)),i.merge){const e=WEe(i.merge),t=zEe({rowStartIndex:e.rowStartIndex-S,rowEndIndex:e.rowEndIndex-S,columnStartIndex:e.columnStartIndex-k,columnEndIndex:e.columnEndIndex-k});i.merge=t}const{rowIndex:l,columnIndex:s}=VEe(o);t[REe(l-S,s-k)]=i}delete e.cells,P.cells=t}if(e.rows){const t={};for(const n in e.rows){const o=e.rows[n];if(o.merge){const e=WEe(o.merge),t=zEe({rowStartIndex:e.rowStartIndex-S,rowEndIndex:e.rowEndIndex-S,columnStartIndex:e.columnStartIndex-k,columnEndIndex:e.columnEndIndex-k});o.merge=t}t[parseFloat(n)-S]=o}delete e.rows,P.rows=t}if(e.columns){const t={};for(const n in e.columns){const o=e.columns[n];if(o.merge){const e=WEe(o.merge),t=zEe({rowStartIndex:e.rowStartIndex-S,rowEndIndex:e.rowEndIndex-S,columnStartIndex:e.columnStartIndex-k,columnEndIndex:e.columnEndIndex-k});o.merge=t}t[parseFloat(n)-k]=o}delete e.columns,P.columns=t}return delete e.indicatorRange,delete e.selectedCoordinates,Object.assign(P,e),E!==1/0&&(P.rowStartDiff=PEe(P,P.rowStartIndex)),D!==1/0&&(P.columnStartDiff=$Ee(P,P.columnStartIndex)),P}const{startVibration:oke}=n2;async function ike(e,t="copy"){const n=tke(e);if(Sc(n))return;const o={command:y$.PASTE_SHEET,data:{sheet:n}},i=`<slinote payload="${encodeURIComponent(JSON.stringify(o))}"></slinote><div>富文本表格</div>`;if(Uf){let e="文本已";"copy"===t?e+="复制":"cut"===t&&(e+="剪切");n_({"text/plain":"富文本表格","text/html":i},(n=>{n&&(e="粘贴板写入失败"),oke(),YH({message:e}),"cut"===t&&e_()}))}else try{const e=new Blob(["todo"],{type:"text/plain"}),t=new Blob([i],{type:"text/html"}),n=new ClipboardItem({[e.type]:e,[t.type]:t});await navigator.clipboard.write([n])}catch(e){}}const{getKeyByIndex:rke,calcSelectedCoordinatesWithMerge:lke}=ML,{isEmptyNode:ske}=ek;function cke(e){var t,n;const{selectedCoordinates:o}=e;if(void 0===o)return!1;const{rowIndex:i,columnIndex:r}=o,l=rke(i,r),s=null===(t=null==e?void 0:e.cells)||void 0===t?void 0:t[l],c=null===(n=null==s?void 0:s.state)||void 0===n?void 0:n.editor;if(void 0===c)return!1;return void 0!==c.selection&&!ske(c.node,!0)}function ake(e){const{indicatorRange:t,selectedCoordinates:n}=e;return!!n&&Ec(t,lke(e,n))}const{createBlockNode:uke,createInlineNode:dke,getEditNodeByPath:fke,getEditNodeEndPath:hke,getNodeLength:pke,initNodeKey:vke,isBlockNodeX:gke,removeBoxSizeStyle:mke}=ek,{calcIndicatorRangeByMerge:yke,calcMergeByIndicatorRange:bke,getColumnSize:Cke,getIndexByKey:wke,getKeyByIndex:xke,getRowSize:Ske}=ML;async function Eke(e,t,n,o,i){var r;const l=e.stater.get();if(void 0!==(null===(r=l.file)||void 0===r?void 0:r.currentPageId)){if(Uf)return t(u9(!0)),void o_(((e,n)=>{t(u9(!1)),n["text/html"]&&s(n["text/html"])}));try{const e=await navigator.clipboard.read(),t="text/html";for(const n of e)if(n.types.includes(t)){const e=await n.getType(t);s(await e.text())}}catch(e){console.error(e)}}async function s(e){const r=zze(e,{image:[]});if(null===r)return;const{node:s,sheet:c}=r.data;r.command===y$.PASTE_LINK||r.command===y$.PASTE_BACK?kke(uke([s]),l,t,n,o,i):r.command===y$.PASTE_SHEET?function(e,t,n,o,i){var r,l;const s=null===(r=t.file)||void 0===r?void 0:r.currentPageId;if(void 0===s)return;if(void 0===o.indicatorRange)return;if(void 0===e.indicatorRange)return;const c=[],a=[],u=e=>{c.push(e)},d=e=>{a.push(e)},f=o.indicatorRange.rowStartIndex-e.indicatorRange.rowStartIndex,h=o.indicatorRange.columnStartIndex-e.indicatorRange.columnStartIndex;if(e.cells){const t={};for(const n in e.cells){const o=e.cells[n],i=null===(l=o.state)||void 0===l?void 0:l.editor;if(i&&t4(i.node,[],s,u,d,!0,!1),o.merge){const e=yke(o.merge),t=bke({rowStartIndex:e.rowStartIndex+f,rowEndIndex:e.rowEndIndex+f,columnStartIndex:e.columnStartIndex+h,columnEndIndex:e.columnEndIndex+h});o.merge=t}const{rowIndex:r,columnIndex:c}=wke(n);t[xke(r+f,c+h)]=o}e.cells=t}if(e.rows){const t={};for(const n in e.rows){const o=e.rows[n];if(o.merge){const e=yke(o.merge),t=bke({rowStartIndex:e.rowStartIndex+f,rowEndIndex:e.rowEndIndex+f,columnStartIndex:e.columnStartIndex+h,columnEndIndex:e.columnEndIndex+h});o.merge=t}const{rowIndex:i}=wke(n);t[i+f]=o}e.rows=t}if(e.columns){const t={};for(const n in e.columns){const o=e.columns[n];if(o.merge){const e=yke(o.merge),t=bke({rowStartIndex:e.rowStartIndex+f,rowEndIndex:e.rowEndIndex+f,columnStartIndex:e.columnStartIndex+h,columnEndIndex:e.columnEndIndex+h});o.merge=t}const{columnIndex:i}=wke(n);t[i+h]=o}e.columns=t}i(Md(sse(e))(o));const p=[...c,...a];p.length&&(p.push(V4(s)),n(...p))}(c,l,t,o,i):r.command===y$.PASTE_NODE&&kke(s,l,t,n,o,i)}}function kke(e,t,n,o,i,r){var l;const s=null===(l=t.file)||void 0===l?void 0:l.currentPageId;if(void 0===s)return;const{selectedCoordinates:c}=i;if(void 0===c)return;for(;gke(e)&&e.children.length<=1;){const t=e.children[0];sc(t)?e=dke([t],e.style):(e.style&&(t.style={...mke(e.style),...t.style}),e=t)}const a=[],u=[];t4(e,[],s,(e=>{a.push(e)}),(e=>{u.push(e)}),!0,!1);const{rowIndex:d,columnIndex:f}=c,h=Ske(i,d),p=Cke(i,f),v=mce();v.editor.node=vke(uke([uke([e])],gce())),v.editor.scrollHeight=h,v.editor.contentHeight=h,v.editor.clientHeight=h,v.editor.clientWidth=p;const g=v.editor.node,m=hke(g),y=fke(g,m),b=v.editor.selection;null!==y&&b&&(b.anchor.offset=pke(y),b.focus.offset=pke(y),b.anchor.path=[...m],b.focus.path=[...m]),r(Md(cse(d,f,v),ase(d,f,{alignItems:"center"}))(i));const C=[...a,...u];C.length&&(C.push(V4(s)),n(...C))}const Dke=()=>e=>(e.refersh=pRe(!0),e),{clearSelection:Ike,selectionEditNodeEnd:Nke,selectionEditNodeStart:Lke,transformEditNodeToNode:Bke,setSelectionReflow:Tke}=ek,{calcIndicatorRangeByMerge:Ake,deleteCellProp:Mke,deleteCellStyle:Oke,existCellState:Rke,existCellStyle:Pke,getCellSize:Fke,getIndexByKey:Hke,getKeyByIndex:_ke,interateIndicatorRange:jke}=ML,Wke=e=>t=>{var n,o;const{selectedCoordinates:i,indicatorRange:r,cells:l}=t;if(void 0===i||void 0===r)return t;if(void 0===e){const{rowIndex:t,columnIndex:n}=i;e=_ke(t,n)}const{rowIndex:s,columnIndex:c}=Hke(e);if(l){const o=mce().editor.node;for(const i in l){const r=null===(n=l[i].state)||void 0===n?void 0:n.editor;if(r)if(i!==e)if(Ec(Bke(r.node),Bke(o))){const{rowIndex:e,columnIndex:n}=Hke(i);t=Mke(e,n,"state")(t),t=Oke(e,n,"height")(t)}else r.selection&&Ike()(r);else r.selection?Tke(!0)(r):Nke()(r),r.refresh=pRe(!0)}}if(!(null===(o=null==l?void 0:l[e])||void 0===o?void 0:o.state)){const{rowDefaultSize:e}=t,{width:n,height:o}=Fke(t,s,c),i=mce();i.editor.scrollHeight=o,i.editor.clientHeight=o,i.editor.clientWidth=n,i.editor.contentHeight=e,i.editor.refresh=pRe(!0),t=Rke(s,c,i)(t),t=Pke(s,c,{alignItems:"center"})(t)}return t},zke=e=>e=>{var t,n,o;const{selectedCoordinates:i}=e;if(!i)return e;const{rowIndex:r,columnIndex:l}=i,s=_ke(r,l),c=null===(o=null===(n=null===(t=(e=Wke()(e)).cells)||void 0===t?void 0:t[s])||void 0===n?void 0:n.state)||void 0===o?void 0:o.editor;return c?(Nke()(c),c.refresh=pRe(!0),e):e},Vke=e=>e=>{var t,n,o;const{selectedCoordinates:i}=e;if(!i)return e;const{rowIndex:r,columnIndex:l}=i,s=_ke(r,l),c=null===(o=null===(n=null===(t=(e=Wke()(e)).cells)||void 0===t?void 0:t[s])||void 0===n?void 0:n.state)||void 0===o?void 0:o.editor;return c?(Lke()(c),c.refresh=pRe(!0),e):e},$ke=e=>t=>{var n,o;const i=PHe(e);if(!sHe(i))return t;const r=i.key;if(!r)return t;const{rowIndex:l,columnIndex:s}=Hke(r);let c={rowStartIndex:l,rowEndIndex:l+1,columnStartIndex:s,columnEndIndex:s+1};const a=null===(o=null===(n=t.cells)||void 0===n?void 0:n[r])||void 0===o?void 0:o.merge;return a&&(c=Ake(a)),t.selectedCoordinates={rowIndex:c.rowStartIndex,columnIndex:c.columnStartIndex},t.indicatorRange=c,t},Zke=e=>e=>{var t,n;const{rowStartIndex:o,columnStartIndex:i}=e;let r={rowStartIndex:o,rowEndIndex:o+1,columnStartIndex:i,columnEndIndex:i+1};const l=_ke(r.rowStartIndex,r.columnStartIndex),s=null===(n=null===(t=e.cells)||void 0===t?void 0:t[l])||void 0===n?void 0:n.merge;return s&&(r=Ake(s)),e.selectedCoordinates={rowIndex:r.rowStartIndex,columnIndex:r.columnStartIndex},e.indicatorRange=r,e=Vke()(e)},Uke=e=>e=>{var t,n;const{rowEndIndex:o,columnEndIndex:i}=e;let r={rowStartIndex:o-1,rowEndIndex:o,columnStartIndex:i-1,columnEndIndex:i};const l=_ke(r.rowStartIndex,r.columnStartIndex),s=null===(n=null===(t=e.cells)||void 0===t?void 0:t[l])||void 0===n?void 0:n.merge;return s&&(r=Ake(s)),e.selectedCoordinates={rowIndex:r.rowStartIndex,columnIndex:r.columnStartIndex},e.indicatorRange=r,e=zke()(e)},qke=()=>e=>{const{indicatorRange:t}=e;return t?(jke(t,{cell(t,n){var o;const i=_ke(t,n),r=null===(o=e.cells)||void 0===o?void 0:o[i];(null==r?void 0:r.state)&&(r.state.editor.refresh=pRe(!0))}}),e):e},{clearSelection:Yke,setSelectionReflow:Kke,isNode:Gke,sliceMetaNodePath:Xke,getEditNodeByPath:Jke,getPrevEditNodePath:Qke,getNextEditNodePath:eDe,isMetaNode:tDe,getNodeLength:nDe}=ek,{calcIndicatorRangeByMerge:oDe,getKeyByIndex:iDe,isMoveBackward:rDe,isMoveDown:lDe,isMoveForward:sDe,isMoveUp:cDe,moveBackward:aDe,moveDown:uDe,moveForward:dDe,moveUp:fDe,setIndicatorRangeStyle:hDe,interateIndicatorRange:pDe}=ML,vDe=(e,t)=>n=>{const{node:o}=n.editor,i=Jl(e.editor),r=i.highlights;delete i.highlights,delete i.ureference;const l=zHe(o,t);if(l&&(l.editor=i),n.editor.refresh=pRe(!0),$He(o,t,(e=>{e.editor.refresh=pRe(!0)})),null==r?void 0:r.length){let e=t;aHe(e)&&(e=e.child)}return n},gDe=(e,t)=>n=>{const{node:o}=n.editor,i=WHe(o,t);return Gke(i)&&i.props&&(i.props.value=e),n.editor.refresh=pRe(!0),$He(o,t,(e=>{e.editor.refresh=pRe(!0)})),n},mDe=e=>t=>{const{node:n}=t.editor,o=zHe(n,e);return o&&Kke(!0)(o.editor),o||Kke(!0)(t.editor),t.editor.refresh=pRe(!0),$He(n,e,(e=>{e.editor.refresh=pRe(!0)})),t},yDe=e=>t=>{const{node:n}=t.editor,o=zHe(n,e);return o&&Yke()(o.editor),o||Yke()(t.editor),t.editor.refresh=pRe(!0),$He(n,e,(e=>{e.editor.refresh=pRe(!0)})),t},bDe=(e,t)=>n=>{const{gfocus:o}=n;if(void 0===o)return n;const i=[];i.push(hDe(e),Ise(e),qke());const r=VHe((n=kDe(o,i)(n)).editor.node,o);(null==r?void 0:r.indicatorRange)&&pDe(r.indicatorRange,{cell(t,n){var o,i;const l=iDe(t,n),s=null===(o=r.cells)||void 0===o?void 0:o[l],c=null===(i=null==s?void 0:s.state)||void 0===i?void 0:i.editor.node;Gke(c)&&eke(c,(t=>{var n;t.refresh=pRe(!0);for(const o in t.cells){const i=t.cells[o];i.style?Object.assign(i.style,e):i.style={...e};const r=null===(n=i.state)||void 0===n?void 0:n.editor;r&&(r.style?Object.assign(r.style,e):r.style={...e},r.refresh=pRe(!0))}}))}});const l={...t.editor.style,...e};return n=CDe(l)(n)},CDe=e=>t=>{var n;const{editor:{node:o},gfocus:i}=t;if(void 0===i)return t;const r=VHe(o,i);let l=t.provider;if(Pu(l)&&(l=null!==(n=Wu(l))&&void 0!==n?n:l),(null==l?void 0:l.context)&&r&&Ec(l.context.focus,i)){const n=QEe(l.context,r,e);t=r3({...l,context:n})(t)}return t},wDe=e=>t=>{const n=t.editor,o=Xke(n.node,e);return n.selection={anchor:{path:[...o],offset:0},focus:{path:[...o],offset:0}},n.selectionReflow=!0,t},xDe=e=>t=>{const n=t.editor,o=Xke(n.node,e);return n.selection={anchor:{path:[...o],offset:1},focus:{path:[...o],offset:1}},n.selectionReflow=!0,t},SDe=e=>t=>{const{node:n}=t.editor,o=VHe(n,e);if(!(null==o?void 0:o.selectedCoordinates))return t;const{rowIndex:i,columnIndex:r}=o.selectedCoordinates,l=iDe(i,r);return t.gfocus=IHe(e,KFe(l)),t},EDe=(e,t)=>n=>{var o;const{node:i}=n.editor,r=[],l=zHe(i,e);l&&(r.includes(l.editor)||t.forEach((e=>e(l)))),l||t.forEach((e=>e(n)));let s=e;if(aHe(s)&&(s=null!==(o=s.child)&&void 0!==o?o:null),s){CHe(s)&&(s=BHe(s)),EHe(s)&&(s=HHe(s));cHe(PHe(s))&&(s=LHe(s))}if(s){const e=null==l?void 0:l.editor.highlights;(null==e?void 0:e.length)&&M9(s,e)(n),null==l||delete l.editor.highlights}return n.editor.refresh=pRe(!0),$He(i,e,(e=>{e.editor.refresh=pRe(!0)})),n},kDe=(e,t)=>n=>{const{node:o}=n.editor,i=[],r=PHe(e),l=VHe(o,e);return l&&(i.includes(l)||t.forEach((e=>e(l,r)))),n.editor.refresh=pRe(!0),$He(o,e,(e=>{e.editor.refresh=pRe(!0)})),n},DDe=(e,t)=>n=>{const{node:o}=n.editor,i=[];return $He(o,e,((e,n)=>{i.includes(e.editor)||(t.forEach((t=>t(e,n))),e.editor.refresh=pRe(!0))})),t.forEach((t=>t(n,e))),n.editor.refresh=pRe(!0),n},IDe=(e,t)=>n=>{const{node:o}=n.editor,i=[];return ZHe(o,e,((e,n)=>{i.includes(e)||t.forEach((t=>t(e,n)))})),n},NDe=e=>t=>{const n=t.gfocus;return Ec(n,e)||(n&&(t=DDe(n,[])(t)),e&&(t=DDe(e,[])(t))),t};function LDe(e,t,n,o,i){var r;const{selectedCoordinates:l,rowTotalNumber:s,columnTotalNumber:c}=o;if(!l)return;const{rowIndex:a,columnIndex:u}=l;let d={rowStartIndex:a,columnStartIndex:u,rowEndIndex:a+1,columnEndIndex:u+1};const f=iDe(a,u),h=null===(r=o.cells)||void 0===r?void 0:r[f];(null==h?void 0:h.merge)&&(d=oDe(h.merge));const p=[],v=[],g=IHe(t,GFe(n));if(rDe(e)?0===d.columnStartIndex?p.push(wDe(n)):(v.push(aDe()),v.push(zke())):sDe(e)?d.columnEndIndex===c?p.push(xDe(n)):(v.push(dDe()),v.push(Vke())):cDe(e)?0===d.rowStartIndex?p.push(wDe(n)):(v.push(fDe()),v.push(zke())):lDe(e)&&(d.rowEndIndex===s?p.push(xDe(n)):(v.push(uDe()),v.push(Vke()))),p.length||v.length){e.stopPropagation();const n=[NDe()];p.length?(n.push(kDe(t,[$ke(t)])),n.push(EDe(t,p)),n.push(s4(t))):v.length&&(n.push(kDe(g,v)),n.push(SDe(g))),n.length&&requestAnimationFrame((()=>{i(...n)}))}}function BDe(e,t,n,o,i){const r=[];let{path:l,offset:s}=n;if(rDe(e)){let e=Jke(o,l);if(s>0)return;if(!(tDe(e)&&Qse(e.children[0])&&1===s||(l=Qke(o,l),e=Jke(o,l),tDe(e)&&Qse(e.children[0]))))return;IHe(t,GFe([...l,0])),r.push(Uke())}else if(sDe(e)){let e=Jke(o,l);if(s<nDe(e))return;if(!(tDe(e)&&Qse(e.children[0])&&0===s||(l=eDe(o,l),e=Jke(o,l),tDe(e)&&Qse(e.children[0]))))return;IHe(t,GFe([...l,0])),r.push(Zke())}if(r.length){e.stopPropagation();const n=IHe(t,GFe([...l,0])),o=[];o.push(kDe(n,r)),o.push(SDe(n)),requestAnimationFrame((()=>{i(...o)}))}}const{sortSelection:TDe,sliceDecoratePath:ADe,isSelectionTouchBlockNodeStart:MDe,splitBlock:ODe,createMetaNode:RDe,insertNode:PDe,clearSelection:FDe}=ek,HDe=(e,t,n,o)=>i=>{if(void 0===i.selection)return i;const{before:r}=TDe(i.selection),l=ADe(i.node,r.path,uae),s=ADe(i.node,r.path,dae);if(l||s)return i;if(MDe(i.node,i.selection)||(i=ODe()(i)),void 0===i.selection)return i;const{path:c}=i.selection.focus,a=n?{display:"inline-block",lineHeight:1.2}:{},u=AFe(i,c),d=bce(e,t,{clientWidth:u,scrollWidth:u}),f=RDe([vce({value:d,row:e,col:t})],a);return i=PDe(f)(i),null==o||o(i),i};function _De(e,t){const{modal:n,webdav:o,file:i,editor:{node:r}}=e.stater.get();if((null==n?void 0:n.visible)||(null==o?void 0:o.visible))return;if(wje(i))return;const l=e.provider(),{context:{focus:s}}=l,c=VHe(r,s);if(!c)return;const{indicatorRange:a}=c;if(void 0===a)return;const u=e.sheet.current;if(!u)return;const{props:d,change:f}=u;t(d,c,f)}const{setAxisRow:jDe,setAxisColumn:WDe,insertRow:zDe,insertColumn:VDe,deleteCell:$De,selectAll:ZDe,deleteRow:UDe,deleteColumn:qDe,setEditPending:YDe}=ML;function KDe(e,t,n){const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),{context:s,imperator:c,rootdispatch:a}=l,{root:u}=s,d=()=>{var e;null===(e=c.current)||void 0===e||e.commit(HDe(t,n,u))};u?w$e(s,e,a,d):d()}function GDe(e,t=1){_De(e,((e,n,o)=>{const{rowStartIndex:i}=n.indicatorRange;o(Md(...[zDe(e,i,t),YDe(!0)])(n))}))}function XDe(e,t=1){_De(e,((e,n,o)=>{const{rowEndIndex:i}=n.indicatorRange;o(Md(...[zDe(e,i,t),YDe(!0)])(n))}))}function JDe(e,t=1){_De(e,((e,n,o)=>{const{columnStartIndex:i}=n.indicatorRange;o(Md(...[VDe(e,i,t),YDe(!0)])(n))}))}function QDe(e,t=1){_De(e,((e,n,o)=>{const{columnEndIndex:i}=n.indicatorRange;o(Md(...[VDe(e,i,t),YDe(!0)])(n))}))}function eIe(e){_De(e,((e,t,n)=>{const{rowStartIndex:o,rowEndIndex:i}=t.indicatorRange;n(Md(...[UDe(e,o,i),YDe(!0)])(t))}))}function tIe(e){_De(e,((e,t,n)=>{const{columnStartIndex:o,columnEndIndex:i}=t.indicatorRange;n(Md(...[qDe(e,o,i),YDe(!0)])(t))}))}function nIe(e){_De(e,((e,t,n)=>{const{rowStartIndex:o,rowEndIndex:i}=t.indicatorRange;n(Md(...[jDe(o,i)])(t))}))}function oIe(e){_De(e,((e,t,n)=>{const{columnStartIndex:o,columnEndIndex:i}=t.indicatorRange;n(Md(...[WDe(o,i)])(t))}))}function iIe(e){_De(e,((e,t,n)=>{n(Md(...[ZDe()])(t))}))}function rIe(e){_De(e,((e,t,n)=>{n(Md(...[UDe(e,0,1/0),YDe(!0)])(t))}))}function lIe(e){const{context:t,rootdispatch:n}=e.provider();_De(e,((o,i,r)=>{cke(i)?zie(e,n):Eke(e,n,t,i,r)}))}function sIe(e){const{context:t}=e.provider();_De(e,((e,n,o)=>{cke(n)?_ze(t.editor,"cut"):ike(n,"cut");const i=n.indicatorRange;o(Md(...[$De(e,i),YDe(!0)])(n))}))}function cIe(e){const{context:t}=e.provider();_De(e,((e,n,o)=>{cke(n)?_ze(t.editor,"copy"):ike(n,"copy")}))}const aIe={sheet:"sheet"},uIe={cn:{[aIe.sheet]:"表格"},en:{[aIe.sheet]:"Sheet"}};function dIe(e){return G(j_,{...e,children:G(bR,{width:12})})}const fIe=U(null),hIe=U(null),pIe=U(null),vIe=U(null),gIe=U(null),mIe=U(null),yIe=U(null),bIe=U(null);const{interateIndicatorRange:CIe,setIndicatorRangeStyle:wIe,setStyle:xIe,setEditPending:SIe,interateColumn:EIe,removeStyle:kIe,interateCellByRowIndex:DIe,interateCellByColumnIndex:IIe,removeAvaliableStyle:NIe}=ML,{getEditNodeByPath:LIe,getPathFromKey:BIe}=ek;function TIe(e,t){var n,o;const{modal:i,webdav:r,file:l,gfocus:s,editor:{node:c}}=e.stater.get();if((null==i?void 0:i.visible)||(null==r?void 0:r.visible)||!s)return;if(wje(l))return;const a=e.provider(),u=null===(n=e.sheet.current)||void 0===n?void 0:n.change;if(!u)return;const{rootdispatch:d}=a,f=LHe(s);if(!f)return;const h=WHe(c,f);if(!Qse(h))return;const p=null===(o=h.props)||void 0===o?void 0:o.value;if(!p)return;const v=h.key,{type:g,color:m,style:y,visible:b}=t,C=[SIe(!0)];g&&C.push(AIe(g)),m&&C.push(MIe(m)),y&&C.push(OIe(y)),u(Md(...C)(p)),d(EDe(f,[e=>{const{editor:{node:t}}=e,n=BIe(v),o=LIe(t,n);return Qse(o)&&o.props&&void 0!==b&&(o.props.border=b),e}]))}const AIe=e=>t=>{if(void 0===t.indicatorRange)return t;const{rowStartIndex:n,rowEndIndex:o,columnStartIndex:i,columnEndIndex:r}=t.indicatorRange,l={borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0};return CIe(t.indicatorRange,{row(i){const r={...l},s={};kV(e,{all(){Object.assign(r,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1})},outline(){i===n&&Object.assign(r,{borderTopWidth:1}),i===o-1&&Object.assign(r,{borderBottomWidth:1})},inside(){Object.assign(r,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1}),i===n?Object.assign(r,{borderTopWidth:0}):i===o-1&&Object.assign(r,{borderBottomWidth:0})},top(){i===n&&Object.assign(r,{borderTopWidth:1})},bottom(){i===o-1&&Object.assign(r,{borderBottomWidth:1})},none(){s.borderColor="none"}}),t.columns&&EIe(t.columns,(e=>{t=kIe(i,e,r)(t)})),t.cells&&DIe(t.cells,i,(e=>{t=kIe(i,e,r)(t)})),t=xIe(i,1/0,r)(t),t=kIe(i,1/0,s)(t)},column(n){const o={...l},s={};kV(e,{all(){Object.assign(o,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1})},outline(){n===i&&Object.assign(o,{borderLeftWidth:1}),n===r-1&&Object.assign(o,{borderRightWidth:1})},inside(){Object.assign(o,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1}),n===i&&Object.assign(o,{borderLeftWidth:0}),n===r-1&&Object.assign(o,{borderRightWidth:0})},left(){n===i&&Object.assign(o,{borderLeftWidth:1})},right(){n===r-1&&Object.assign(o,{borderLeftWidth:1})},none(){s.borderColor="none"}}),t.rows&&EIe(t.rows,(e=>{t=kIe(e,n,o)(t)})),t.cells&&IIe(t.cells,n,(e=>{t=kIe(e,n,o)(t)})),t=xIe(1/0,n,o)(t),t=kIe(1/0,n,s)(t)},cell(s,c){const a={...l},u={};kV(e,{all(){Object.assign(a,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1})},outline(){s===n&&Object.assign(a,{borderTopWidth:1}),s===o-1&&Object.assign(a,{borderBottomWidth:1}),c===i&&Object.assign(a,{borderLeftWidth:1}),c===r-1&&Object.assign(a,{borderRightWidth:1})},inside(){Object.assign(a,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1}),s===n&&Object.assign(a,{borderTopWidth:0}),s===o-1&&Object.assign(a,{borderBottomWidth:0}),c===i&&Object.assign(a,{borderLeftWidth:0}),c===r-1&&Object.assign(a,{borderRightWidth:0})},left(){c===i&&Object.assign(a,{borderLeftWidth:1})},right(){c===r-1&&Object.assign(a,{borderRightWidth:1})},top(){s===n&&Object.assign(a,{borderTopWidth:1})},bottom(){s===o-1&&Object.assign(a,{borderBottomWidth:1})},none(){u.borderColor="none"}}),t=xIe(s,c,a)(t),t=kIe(s,c,u)(t)},infinite(){const n={...l},o={};kV(e,{all(){Object.assign(n,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1})},inside(){Object.assign(n,{borderTopWidth:1,borderRightWidth:1,borderBottomWidth:1,borderLeftWidth:1})},none(){o.borderColor="none"}}),t=NIe(n)(t),t=xIe(1/0,1/0,n)(t),t=kIe(1/0,1/0,o)(t)}}),t},MIe=e=>t=>wIe({borderColor:e})(t),OIe=e=>t=>wIe({borderStyle:e})(t);var RIe={...FV,outer:function({children:e,...t}){const{name:n}=t,o=R(fIe);return G(IV,{...t,onClick:e=>{o(Tle(n,!0))}})},inner:function(e){const t=R(NU),n=R(hIe),{border:o}=n;return G(RV,{...e,value:{...e.value,visible:!1!==o},onChange:e=>{TIe(t,e)}})}},PIe=Object.freeze({__proto__:null,default:RIe,setBorder:TIe,setBorderColor:MIe,setBorderStyle:OIe,setBorderType:AIe});const{setIndicatorRangeStyle:FIe,setEditPending:HIe}=ML;function _Ie(e,t){var n;const{modal:o,webdav:i,file:r,gfocus:l,editor:{node:s}}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible)||!l)return;if(wje(r))return;const c=null===(n=e.sheet.current)||void 0===n?void 0:n.change;if(!c)return;const a=VHe(s,l);if(!a)return;c(Md(...[FIe({backgroundColor:t}),wse(),HIe(!0)])(a))}const{getPathFromKey:jIe}=ek;var WIe={...iz,inner:function(e){const t=R(NU),n=R(hIe),o=R(MU);return G(nz,{...e,value:GEe(n,"backgroundColor"),onMore:()=>{const{value:e,kid:i}=n;if(void 0===e)return;const r=t.provider(),{rootdispatch:l}=r,s=IHe(o.focus,GFe(jIe(i))),c=Md(vse())(e);l(gDe(c,s))},onChange:e=>{_Ie(t,e)}})},outer:function(e){const{name:t}=e,n=R(hIe),o=R(fIe),i=GEe(n,"backgroundColor");return G(tz,{...e,onClick:e=>{o(Tle(t,!0))},value:i})}},zIe=Object.freeze({__proto__:null,default:WIe,setStyle:_Ie});const{removeCellMerge:VIe,setCellMerge:$Ie,setEditPending:ZIe,singleIndicatorRange:UIe,calcIndicatorRangeMerge:qIe}=ML;function YIe(e){var t;const{modal:n,webdav:o,file:i,gfocus:r,editor:{node:l}}=e.stater.get();if((null==n?void 0:n.visible)||(null==o?void 0:o.visible)||!r)return;if(wje(i))return;const s=null===(t=e.sheet.current)||void 0===t?void 0:t.change;if(!s)return;const c=VHe(l,r);if(!c)return;const{indicatorRange:a}=c;if(!a||UIe(a))return;const u=[wse(),ZIe(!0)];!!qIe(c,a)?u.unshift(VIe(a)):u.unshift($Ie(a)),s(Md(...u)(c))}var KIe={...ZV,outer:function(e){const t=R(NU);return G(VV,{...e,onClick:Vs((e=>{YIe(t)}))})}},GIe=Object.freeze({__proto__:null,default:KIe,setMerge:YIe});const XIe={backgroundColor:bf,padding:"10px 12px",borderRadius:4};async function JIe(e,t){var n;const{modal:o,webdav:i,file:r,gfocus:l,editor:{node:s}}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible)||!l)return;if(wje(r))return;if(!(null===(n=e.sheet.current)||void 0===n?void 0:n.change))return;const c=VHe(s,l);if(!c)return;const a=e.dispatch,{context:{editor:u}}=e.provider(),d=xj[t][wj.unicode],f=ts(tke(c));if(!f)return;const h=nke(f,u),p=Ize(),v=await nie(h,p),g={visible:!0,title:d,okText:"复制字符表",autoSize:!0,showCancel:!1,content:G("div",{style:XIe,children:G("pre",{children:G("code",{children:v})})}),onOk(e){const t=new Blob([v],{type:"text/plain"}),n=new ClipboardItem({[t.type]:t});navigator.clipboard.write([n]),a(lre({...g,visible:!1}))}};a(lre(g))}var QIe={...kj,outer:function(e){const t=R(NU),n=Vs((n=>{JIe(t,e.lang)}));return G(Ej,{...e,onClick:n})}},eNe=Object.freeze({__proto__:null,default:QIe,getUnicode:JIe});const tNe={top:"flex-start",middle:"center",bottom:"flex-end"},nNe=hc(tNe);const{setIndicatorRangeStyle:oNe,setEditPending:iNe}=ML;function rNe(e,t){var n;const{modal:o,webdav:i,file:r,gfocus:l,editor:{node:s}}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible)||!l)return;if(wje(r))return;const c=null===(n=e.sheet.current)||void 0===n?void 0:n.change;if(!c)return;const a=VHe(s,l);if(!a)return;c(Md(...[oNe({alignItems:tNe[null!=t?t:"middle"]}),wse(),iNe(!0)])(a))}var lNe={...JV,inner:function(e){const t=R(NU);return G(XV,{...e,onChange:e=>{rNe(t,e)}})},outer:function(e){const{name:t}=e,n=R(hIe),o=R(fIe),i=GEe(n,"alignItems");return G(KV,{...e,onClick:()=>{o(Tle(t,!0))},value:nNe[i]})}},sNe=Object.freeze({__proto__:null,default:lNe,setStyle:rNe});const cNe=[[WIe,RIe,lNe,KIe,QIe]],{calcIndicatorRangeMerge:aNe,singleIndicatorRange:uNe}=ML;function dNe(e){var t;const{lang:n}=R(xU),o=R(fIe),i=null===(t=e.value)||void 0===t?void 0:t.indicatorRange,r=e.tools.map((t=>t.map((t=>t.name===KIe.name&&e.value?{...t,disable:uNe(i),active:!!aNe(e.value,i)}:t))));return G("div",{style:{...xle,...e.style},children:G(hh,{style:Sle,onClick:e=>{o(Ale())},children:G(QV,{lang:n,tools:r,tipsDirection:"top"})})})}const{clearSelection:fNe,getEditNodeByPath:hNe,getPathFromKey:pNe,reflowEditNodeByPath:vNe}=ek;function gNe(e){var t,n,o;const i=R(SU),r=R(MU),l={infocus:!1,focusing:!1,inroute:!1},s=i.gfocus;if(!s)return l;const{node:c}=r.editor,a=pNe(null!=e?e:""),u=GFe(a),d=NHe(s,IHe(r.focus,u));if((null==d?void 0:d.child)&&(l.inroute=!0),!(null==d?void 0:d.key)||d.child||!sHe(d))return l;l.infocus=!0,l.focusing=!0;const f=hNe(c,a);if(!Qse(f))return l;const h=null===(n=(null===(t=f.props)||void 0===t?void 0:t.value).cells)||void 0===n?void 0:n[d.key];return(null==h?void 0:h.state)?((null===(o=h.state)||void 0===o?void 0:o.editor.selection)&&(l.focusing=!1),l):l}function mNe(e){const t=Dd(e),n=Dd(R(SU)),o=Dd(R(MU)),i=R(EU);return _((e=>{const{gfocus:r}=n.current,{focus:l}=o.current,{kid:s,value:c}=t.current;if(!c||!r||!bHe(r,l))return;LDe(e,l,pNe(s),c,i)}),[n,t,o,i])}function yNe(e){return{tools:cNe.map((e=>e.map((e=>({active:!1,...e})))))}}function bNe(){return{refersh:pRe(!0)}}const{getPathFromKey:CNe}=ek,{calcIndicatorRangeByMerge:wNe,getKeyByIndex:xNe}=ML,{startVibrationDebounce:SNe}=n2;function ENe(e){return G(Pf?DNe:kNe,{...e})}function kNe(e){var t,n,o,i;const r=R(NU),l=Dd(e),s=Dd(R(SU)),c=R(EU),a=Dd(R(MU)),u=R(hIe),d=Dd(u),{scroller:f,selecter:h}=R(OU),p=R(gIe),v=R(vIe),g=R(RU),m=Z(null),[y,b]=Od((()=>bNe())),{rowIndex:C,columnIndex:w}=e,x=xNe(C,w),S=null===(n=null===(t=u.value)||void 0===t?void 0:t.cells)||void 0===n?void 0:n[x],E=null===(o=S.state)||void 0===o?void 0:o.editor.refresh;if((null===(i=m.current)||void 0===i?void 0:i.editor.refresh)!==E&&m.current&&S.state&&v.current!==x){if(Object.assign(m.current,S.state),e.style){const t=m.current.editor.style;Object.assign(t,MPe(e.style))}if(S.style){const e=m.current.editor.style;Object.assign(e,MPe(S.style))}}return W((()=>{if(!(null==S?void 0:S.state))return null;const e=l.current,{editable:t,kid:n=""}=d.current,{lang:o,focus:i}=a.current,u=IHe(i,GFe(CNe(n)),KFe(x)),p=(...e)=>{var t,n;if(!m.current)return;const o=d.current.value;if(!o)return;const l=m.current;if(!E$e(l)&&!r.stater.static())return void requestAnimationFrame((()=>{r.stater.refresh(),b(Dke()),m.current&&(m.current.editor.refresh=pRe(!0))}));const a=Md(...e,Use(),qse())(l);if(a===l)return;const{contentHeight:f,ureference:h,isSelectPending:p,isEditPending:v,resizeWidth:y,composing:x}=a.editor,{gfocus:E}=s.current;if(!E)return;const k=ice(o,C,w),D=f!==k,I=bHe(E,u);if(!(I||D||v||p))return;m.current=a,delete m.current.editor.isSelectPending,b(Dke());let N=!1;(v||y)&&(N=!0),x&&(N=!1);const L=l.editor.ureference;if(p)return void requestAnimationFrame((()=>{c(vDe(Jl(m.current),u),I9(L,h),Z9(L,h))}));const B=[],T=null===(t=s.current.file)||void 0===t?void 0:t.currentPageId;if(N||D){if(B.push(vDe(Jl(m.current),u)),N&&CHe(i)&&B.push(N9("updated")),f!==k){const e=f-k,t=rce(o,C,w);let i=!1;if(S.merge){const{rowStartIndex:e,rowEndIndex:t}=wNe(S.merge);t-e>1&&(i=!0)}if(!i&&(f>t||k>t)){const t=[];t.push(use(e)),t.push(fse()),B.push(IDe(u,t));const o=LHe(u);if(o){const t=[];t.push(Zse(e)),B.push(DDe(o,t))}const i=null===(n=u.child)||void 0===n?void 0:n.path;i&&B.push($se(i))}else{const e=[];e.push(dse(C,w,f)),B.push(kDe(u,e))}}(L||h)&&T&&B.push(I9(L,h),Z9(L,h)),B.push(pq(T,N),C4()),N&&g(c)}B.length&&(N||D||I?c(...B):requestAnimationFrame((()=>{c(...B)})))};if(null===m.current){const n=cce(S.state.editor,e.style);m.current={...S.state,focus:u,virtual:!1,contextmenu:!1,scrollPropagation:!0,isRightClickFocused:!1,style:e.style,scroller:f,selecter:h,editor:n,lang:o,editable:t,dispatch:p}}else m.current.focus=u,m.current.editable=t,delete m.current.editor.highlights,delete m.current.editor.isScrolling;return G("div",{style:{...e.style,...Ble},children:G("div",{style:{width:"100%"},onPointerDown:()=>{v.current=x;const{gfocus:e,store:t,editor:{uids:n}}=s.current;e&&n&&!Ec(e,u)&&requestAnimationFrame((()=>{if(!m.current)return;const e=k9(null==t?void 0:t.reference)(m.current);Object.assign(m.current,e),b(Dke()),c(vDe(Jl(m.current),u))}))},onPointerUp:()=>{requestAnimationFrame((()=>{v.current=""}))},children:G(_K,{...m.current})})})}),[y.refersh,E,p.infocus])}function DNe(e){var t,n,o,i;const r=R(NU),l=Dd(e),s=Dd(R(SU)),c=R(EU),a=Dd(R(MU)),u=R(hIe),d=Dd(u),{scroller:f,selecter:h}=R(OU),p=R(gIe),v=R(RU),g=Z(null),[m,y]=Od((()=>bNe())),{rowIndex:b,columnIndex:C}=e,w=xNe(b,C),x=null===(n=null===(t=u.value)||void 0===t?void 0:t.cells)||void 0===n?void 0:n[w],S=null===(o=x.state)||void 0===o?void 0:o.editor.refresh;if((null===(i=g.current)||void 0===i?void 0:i.editor.refresh)!==S&&g.current&&x.state){if(Object.assign(g.current,x.state),e.style){const t=g.current.editor.style;Object.assign(t,MPe(e.style))}if(x.style){const e=g.current.editor.style;Object.assign(e,MPe(x.style))}}return W((()=>{if(!(null==x?void 0:x.state))return null;const e=l.current,{editable:t,kid:n=""}=d.current,{lang:o,focus:i}=a.current,u=IHe(i,GFe(CNe(n)),KFe(w)),p=(...e)=>{var t,n;if(!g.current)return;const o=d.current.value;if(!o)return;const l=g.current;if(!E$e(l)&&!r.stater.static())return void requestAnimationFrame((()=>{r.stater.refresh(),y(Dke()),g.current&&(g.current.editor.refresh=pRe(!0))}));const a=Md(...e,Use(),qse())(l);if(a===l)return;const{contentHeight:f,ureference:h,isSelectPending:p,isEditPending:m,resizeWidth:w,detect:S}=a.editor;S.flag,ek.DetectFlag.STATIC;const{gfocus:E}=s.current;if(!E)return;const k=ice(o,b,C),D=f!==k,I=bHe(E,u);if(!(I||D||m||p))return;g.current=a,delete g.current.editor.isSelectPending,y(Dke());let N=!1;(m||w)&&(N=!0);const L=l.editor.ureference;if(p)return void requestAnimationFrame((()=>{c(vDe(Jl(g.current),u),I9(L,h),Z9(L,h))}));const B=[],T=null===(t=s.current.file)||void 0===t?void 0:t.currentPageId;if(N||D){if(B.push(vDe(Jl(g.current),u)),N&&CHe(i)&&B.push(N9("updated")),f!==k){const e=f-k,t=rce(o,b,C);let i=!1;if(x.merge){const{rowStartIndex:e,rowEndIndex:t}=wNe(x.merge);t-e>1&&(i=!0)}if(!i&&(f>t||k>t)){const t=[];t.push(use(e)),t.push(fse()),B.push(IDe(u,t));const o=LHe(u);if(o){const t=[];t.push(Zse(e)),B.push(DDe(o,t))}const i=null===(n=u.child)||void 0===n?void 0:n.path;i&&B.push($se(i))}else{const e=[];e.push(dse(b,C,f)),B.push(kDe(u,e))}}(L||h)&&T&&B.push(I9(L,h),Z9(L,h)),B.push(pq(T,N),C4()),N&&v(c)}B.length&&(N||D||I?c(...B):requestAnimationFrame((()=>{c(...B)})))};if(null===g.current){const n=cce(x.state.editor,e.style);g.current={...x.state,focus:u,virtual:!1,contextmenu:!1,scrollPropagation:!0,isRightClickFocused:!1,showExpandSelectionLoupe:!0,style:e.style,scroller:f,selecter:h,editor:n,lang:o,editable:t,dispatch:p,onSelectExpand:SNe,onLoupeMounted:SNe,onSelectPhrase:SNe}}else g.current.focus=u,g.current.editable=t,delete g.current.editor.highlights,delete g.current.editor.isScrolling;return G(ch,{style:{...e.style,...Ble},children:G("div",{style:{width:"100%"},children:G(_K,{...g.current})})})}),[m.refersh,S,p.infocus])}const{getPathFromKey:INe}=ek,{calcIndicatorRangeByMerge:NNe,getKeyByIndex:LNe}=ML,{startVibration:BNe,startVibrationDebounce:TNe}=n2;function ANe(e){return G(Pf?ONe:MNe,{...e})}function MNe(e){var t;const n=Dd(e),o=R(NU),i=R(SU),r=R(DU),l=R(EU),s=R(MU),c=Dd(s),a=R(vIe),u=R(RU),{infocus:d,focusing:f,inroute:h}=R(gIe),p=mNe(e),v=R(yIe),g=_((e=>{if(a.current)return void(a.current="");const{kid:t}=n.current,{focus:o}=c.current,{selectedCoordinates:i}=e;if(!i)return;const r=IHe(o,GFe(INe(t)));l(kDe(r,[Wke()])),u(l)}),[n,c,a,u,l]),m=_((e=>{cke(e)?_ze(c.current.editor,"copy"):ike(e)}),[c]),y=_((e=>{cke(e)?_ze(c.current.editor,"cut"):ike(e)}),[c]),b=_((e=>{const t=c.current;cke(e)?zie(o,l):Eke(o,l,t,e,v)}),[o,c,l,v]),C=_((()=>{const e=n.current.value;e&&b(e)}),[n,b]),{isScrolling:w}=i.editor,{rowStartIndex:x,rowEndIndex:S,clientWidth:E,clientHeight:k,scrollWidth:D,refresh:I}=e.value,N=s.root?ZEe(s,e.kid):void 0,L=k-Math.min(k,null!==(t=null==N?void 0:N.top)&&void 0!==t?t:0);return W((()=>{const t=e=>{var t;const n=null===(t=i.file)||void 0===t?void 0:t.currentPageId;if(!n)return;const o=null==e?void 0:e.state;if(void 0===o)return e;const{node:r}=o.editor,s=[],c=[];i4(r,n,(e=>{s.push(e)}),(e=>{c.push(e)}));const a=[...s,...c];a.length&&(a.push(V4(n)),l(...a))},n={...e,mini:!0,virtual:!0,focusing:f,rect:N,onChange:v,onKeyDown:p,onCopy:m,onCut:y,onPureClick:g,onPaste:b,cloneCell:(e,t)=>{var n;e=ts(e);const o=null===(n=i.file)||void 0===n?void 0:n.currentPageId;if(void 0===o)return e;const r=e.state;if(void 0===r)return e;const{node:s}=r.editor,c=[],a=[];t4(s,[],o,(e=>{c.push(e)}),(e=>{a.push(e)}),!0);const u=[...c,...a];return u.length&&(u.push(V4(o)),l(...u)),e},deleteCell:t,moveCell:(e,n)=>{n&&t(n);null==e||e.state;return e},CellRenderer:ENe,portal:t=>$k(G("div",{style:YEe(E),children:t}),r,e.ele)};return d&&(o.sheet.current={change:v,props:n}),G(bIe,{value:C,children:G(OL,{...n})})}),[kd(Boolean(!w||h||d||f||D>E&&L>0)),x,S,I])}function ONe(e){var t;const n=Dd(e),o=R(NU),i=R(SU),r=R(DU),l=R(EU),s=R(kU),c=R(MU),a=Dd(c);R(RU);const{infocus:u,focusing:d,inroute:f}=R(gIe),h=mNe(e),p=R(yIe),{isScrolling:v}=i.editor,{rowStartIndex:g,rowEndIndex:m,clientWidth:y,clientHeight:b,scrollWidth:C,refresh:w}=e.value,x=c.root?ZEe(c,e.kid):void 0,S=b-Math.min(b,null!==(t=null==x?void 0:x.top)&&void 0!==t?t:0);return W((()=>{const t=e=>{var t;const n=null===(t=i.file)||void 0===t?void 0:t.currentPageId;if(!n)return;const o=null==e?void 0:e.state;if(void 0===o)return e;const{node:r}=o.editor,s=[],c=[];i4(r,n,(e=>{s.push(e)}),(e=>{c.push(e)}));const a=[...s,...c];a.length&&(a.push(V4(n)),l(...a))},c={...e,mini:!0,virtual:!0,focusing:d,rect:x,onChange:p,onKeyDown:h,onResizeStart:BNe,onDragStart:BNe,onAnchorStart:BNe,onExpandStart:TNe,onClickCell:(e,t,o)=>{const{kid:i}=n.current,{focus:r}=a.current,c=IHe(r,GFe(INe(i)));if(null==t?void 0:t.merge){const{rowStartIndex:e,columnStartIndex:n}=NNe(t.merge);o=LNe(e,n)}requestAnimationFrame((()=>{var t;l(kDe(c,[Wke(o)])),null===(t=s.current.keyboard)||void 0===t||t.onShowKeyboard(e)}))},deleteCell:t,moveCell:(e,n)=>{n&&t(n);null==e||e.state;return e},CellRenderer:ENe,portal:t=>$k(G("div",{style:YEe(y),children:t}),r,e.ele)};return u&&(o.sheet.current={change:p,props:c}),G(OL,{...c})}),[kd(Boolean(!v||f||u||d||C>y&&S>0)),g,m,w])}const{getPathFromKey:RNe}=ek,{getIndexByKey:PNe,getKeyByIndex:FNe,isCellKey:HNe,getRowSize:_Ne,setEditPending:jNe}=ML;function WNe(e){return G(Pf?VNe:zNe,{...e})}function zNe(e){const t=Dd(e),n=Z(null),o=Z(!1),i=Z(""),r=R(NU);Dd(R(SU));const l=R(DU),s=R(EU),c=R(MU),a=Dd(c),{scroller:u,selecter:d,contextmenu:f}=R(OU),h=R(RU),p=gNe(e.kid),{infocus:v,focusing:g}=p,[m,y]=Od((()=>yNe())),b=CHe(c.focus),C={pointerDown:Z(new Set)},w=W((()=>Vs((()=>{const{editor:e}=a.current,t=e.style;s(CDe(t))}),10)),[a,s]),x=W((()=>zc((e=>{var n,o;const{focus:l}=a.current,c=r.stater.get(),{gfocus:u,editor:{data:d,node:f}}=c;let p=c;if(wHe(l)&&(p=zHe(f,l)),!p)return;const{editor:m}=p,{isScrolling:y}=m;if(y)return;const{kid:C,value:x}=t.current;if(!x)return;const S=[],E=RNe(C),k=IHe(l,GFe(E)),{rowStartIndex:D,rowEndIndex:I,columnStartIndex:N,columnEndIndex:L,selectedCoordinates:B,isEditPending:T}=e;e=lse(m)(e);const A=ake(e=jNe(!1)(e));let M=!1;if(A||(i.current="",e=vse((e=>{e.editor.selection&&(M=!0)}))(e),e=gse()(e)),S.push(gDe(e,k)),b&&T&&S.push(N9("updated")),D!==I&&N!==L){const t=e.scrollHeight-x.clientHeight;if(0!==t){const{key:e}=PHe(l);if(sc(e)&&HNe(e)){const{rowIndex:n}=PNe(e),o=m.contentHeight,i=VHe(d,l);if(i){let e=!1;if(t<0){lce(i,n)-o<t&&(e=!0)}else{_Ne(i,n)-o<t&&(e=!0)}if(e){const e=[];e.push(use(t)),e.push(hse(t)),S.push(IDe(k,e));const n=[];n.push(Zse(t)),S.push(DDe(l,n))}else{const e=[];e.push(use(t)),S.push(kDe(l,e));const n=[];n.push(Zse(t)),S.push(EDe(l,n))}}}const o=null===(n=BHe(k).child)||void 0===n?void 0:n.path;if(o&&S.push($se(o)),u)if(Ec(l,u)){const{data:e,selection:t}=m;CFe(e,E,t)?S.push(yDe(u)):S.push(mDe(u))}else bHe(l,u)?S.push(yDe(u)):S.push(mDe(u))}if(B){const{rowIndex:e,columnIndex:t}=B,n=IHe(k,KFe(FNe(e,t)));u&&!Ec(u,n)&&S.push(s4(n),DDe(u,[]))}}else{const e=[];e.push(Vse(C)),S.push(EDe(l,e));const t=null===(o=k.child)||void 0===o?void 0:o.path;t&&S.push($se(t)),u&&!Ec(u,l)&&S.push(s4(l),DDe(u,[]))}(!A||v&&g&&!Ec(u,l))&&w(),(M||T)&&h(s),s(...S)}),15,{leading:!0})),[b,v,g,r,t,a,s,w,h]);if(void 0===e.value)return null;const S=UEe({...e,value:e.value},c,p),{clientWidth:E,scrollWidth:k,scrollLeft:D}=S;return G(fIe,{value:y,children:G(hIe,{value:e,children:G(yIe,{value:x,children:G(pIe,{value:o,children:G(gIe,{value:p,children:G(vIe,{value:i,children:X(ch,{onPointerDown:e=>{e.stopPropagation(),y(Ale()),C.pointerDown.current.forEach((t=>t(e)))},onClick:e=>{e.stopPropagation()},style:Dle,ref:n,children:[e.editable&&S.indicatorRange&&$k(G(dNe,{...e,...m}),l,n),!1!==e.border&&D>0&&G("div",{style:Nle}),G(ANe,{...e,scroller:u,selecter:d,contextmenu:f,value:S,ele:n}),!1!==e.border&&Math.ceil(E+D)<Math.floor(k)&&G("div",{style:Lle})]})})})})})})})}function VNe(e){const t=Dd(e),n=Z(null),o=Z(!1),i=Z(""),r=R(NU);Dd(R(SU));const l=R(EU),s=R(MU),c=Dd(s),{scroller:a,selecter:u,contextmenu:d}=R(OU),f=R(RU),h=gNe(e.kid),{infocus:p,focusing:v}=h,[g,m]=Od((()=>yNe())),y=CHe(s.focus),b=W((()=>Vs((()=>{const{editor:e}=c.current,t=e.style;l(CDe(t))}),10)),[c,l]),C=W((()=>zc((e=>{var n,o;const{focus:s}=c.current,a=r.stater.get(),{gfocus:u,editor:{data:d,node:h}}=a;let g=a;if(wHe(s)&&(g=zHe(h,s)),!g)return;const{editor:m}=g,{isScrolling:C}=m;if(C)return;const{kid:w,value:x}=t.current;if(!x)return;const S=[],E=RNe(w),k=IHe(s,GFe(E)),{rowStartIndex:D,rowEndIndex:I,columnStartIndex:N,columnEndIndex:L,selectedCoordinates:B,isEditPending:T}=e;e=lse(m)(e);const A=ake(e=jNe(!1)(e));let M=!1;if(A||(i.current="",e=vse((e=>{e.editor.selection&&(M=!0)}))(e)),S.push(gDe(e,k)),y&&T&&S.push(N9("updated")),D!==I&&N!==L){const t=e.scrollHeight-x.clientHeight;if(0!==t){const{key:e}=PHe(s);if(sc(e)&&HNe(e)){const{rowIndex:n}=PNe(e),o=m.contentHeight,i=VHe(d,s);if(i){let e=!1;if(t<0){lce(i,n)-o<t&&(e=!0)}else{_Ne(i,n)-o<t&&(e=!0)}if(e){const e=[];e.push(use(t)),e.push(hse(t)),S.push(IDe(k,e));const n=[];n.push(Zse(t)),S.push(DDe(s,n))}else{const e=[];e.push(use(t)),S.push(kDe(s,e));const n=[];n.push(Zse(t)),S.push(EDe(s,n))}}}const o=null===(n=BHe(k).child)||void 0===n?void 0:n.path;if(o&&S.push($se(o)),u)if(Ec(s,u)){const{data:e,selection:t}=m;CFe(e,E,t)?S.push(yDe(u)):S.push(mDe(u))}else bHe(s,u)?S.push(yDe(u)):S.push(mDe(u))}if(B){const{rowIndex:e,columnIndex:t}=B,n=IHe(k,KFe(FNe(e,t)));u&&!Ec(u,n)&&S.push(s4(n),DDe(u,[]))}}else{const e=[];e.push(Vse(w)),S.push(EDe(s,e));const t=null===(o=k.child)||void 0===o?void 0:o.path;t&&S.push($se(t)),u&&!Ec(u,s)&&S.push(s4(s),DDe(u,[]))}(!A||p&&v&&!Ec(u,s))&&b(),(M||T)&&f(l),l(...S)}),15,{leading:!0})),[r,y,p,v,t,c,l,b,f]);if(void 0===e.value)return null;const w=UEe({...e,value:e.value},s,h),{clientWidth:x,scrollWidth:S,scrollLeft:E}=w;return G(fIe,{value:m,children:G(hIe,{value:e,children:G(yIe,{value:C,children:G(pIe,{value:o,children:G(gIe,{value:h,children:X(ch,{onClick:e=>{e.stopPropagation()},style:Dle,ref:n,children:[!1!==e.border&&E>0&&G("div",{style:Nle}),G(ANe,{...e,scroller:a,selecter:u,contextmenu:d,value:w,ele:n}),!1!==e.border&&Math.ceil(x+E)<Math.floor(S)&&G("div",{style:Lle})]})})})})})})}var $Ne={name:Yse,label:function(e){return uIe[e.lang][aIe.sheet]},inner:function({col:e=9,row:t=9}){const n=R(NU),[o,i]=$({col:0,row:0});return X(hh,{style:ble,children:[G(ch,{style:Cle,onPointerLeave:()=>{i({col:0,row:0})},onClick:()=>{const{col:e,row:t}=o;0!==e&&0!==t&&KDe(n,t,e)},children:Array(t).fill(0).map(((t,n)=>G("div",{style:wle,children:Array(e).fill(0).map(((e,t)=>{let r=Cf;return o.col>=t+1&&o.row>=n+1&&(r=yf),G("div",{style:{...Ele,backgroundColor:r},onPointerEnter:()=>((e,t)=>{i({col:t,row:e})})(n+1,t+1)},t)}))},n)))}),G("div",{style:kle,children:`${o.row} X ${o.col}`})]})},outer:function({children:e,...t}){return X(Z_,{...t,children:[G(dIe,{...t}),e]})},icon:dIe};function ZNe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get();let c={fontWeight:"normal"};!1===t&&(c={fontWeight:"700"});const{rootdispatch:a,context:u,imperator:d,sync:f}=l,{editor:{data:h},gfocus:p}=s;if(p){if(DHe(h,p)){const e=zHe(h,p);if(!(null==e?void 0:e.editor.selection))return null==a||a(bDe(c,u)),void f(a)}null===(n=d.current)||void 0===n||n.setStyle(c)}}var UNe={...nW,outer:function(e){const t=R(NU),n=t.provider(),{context:o}=n,i=o$(e,o);return G(eW,{...e,active:i,onClick:()=>{ZNe(t,i)}})}},qNe=Object.freeze({__proto__:null,default:UNe,setStyle:ZNe});var YNe={...cW,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(lW,{...e,value:n$(o,"fontFamily"),onChange:e=>{var n;const o={fontFamily:e},i=t.provider(),r=t.stater.get(),{context:l,imperator:s,rootdispatch:c,sync:a}=i,{editor:{data:u},gfocus:d}=r;if(d){if(DHe(u,d)){const e=zHe(u,d);if(!(null==e?void 0:e.editor.selection))return c(bDe(o,l)),void a(c)}null===(n=s.current)||void 0===n||n.setStyle(o)}}})},outer:function(e){const t=R(NU),n=t.provider(),{context:o}=n,i=n$(o,"fontFamily");return G(rW,{...e,onClick:()=>{const n=t.provider(),{rootdispatch:o}=n;o(u7(e.name,!0))},value:i})}};function KNe(e,t){var n,o;const{modal:i,webdav:r,file:l}=e.stater.get();if((null==i?void 0:i.visible)||(null==r?void 0:r.visible))return;if(wje(l))return;const s=e.provider(),c=e.stater.get(),{context:a,imperator:u,rootdispatch:d,sync:f}=s,h={fontSize:t},{editor:{data:p},gfocus:v}=c;if(v){if(DHe(p,v)){const e=zHe(p,v);if(!(null==e?void 0:e.editor.selection))return d(bDe(h,a)),void f(d)}null===(n=u.current)||void 0===n||n.setStyle(h),null===(o=u.current)||void 0===o||o.commit(Nye(a))}}var GNe={...pW,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(fW,{...e,value:n$(o,"fontSize"),onChange:e=>{KNe(t,e)}})},outer:function(e){const{name:t}=e,n=R(NU),o=n.provider(),{context:i}=o,r=n$(i,"fontSize");return G(dW,{...e,onClick:()=>{const e=n.provider(),{rootdispatch:o}=e;o(u7(t,!0))},value:r})}},XNe=Object.freeze({__proto__:null,default:GNe,setStyle:KNe});function JNe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{context:c,imperator:a,rootdispatch:u,sync:d}=l;let f={fontStyle:"normal"};!1===t&&(f={fontStyle:"italic"});const{editor:{data:h},gfocus:p}=s;if(p){if(DHe(h,p)){const e=zHe(h,p);if(!(null==e?void 0:e.editor.selection))return u(bDe(f,c)),void d(u)}null===(n=a.current)||void 0===n||n.setStyle(f)}}var QNe={...NW,outer:function(e){const t=R(NU),n=o$(e,t.provider().context);return G(DW,{...e,active:n,onClick:()=>{JNe(t,n)}})}},eLe=Object.freeze({__proto__:null,default:QNe,setStyle:JNe});function tLe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{context:c,imperator:a,rootdispatch:u,sync:d}=l;let f={textDecorationLine:"none"};!1===t&&(f={textDecorationLine:"underline"});const h={underline:!t,lineThrough:null},{editor:{data:p},gfocus:v}=s;if(v){if(DHe(p,v)){const e=zHe(p,v);if(!(null==e?void 0:e.editor.selection))return u(bDe(f,c)),void d(u)}null===(n=a.current)||void 0===n||n.setProps(h,t$)}}const{useHotkey:nLe}=cj;var oLe={...jW,outer:function(e){var t;const n=R(NU),o=n.provider(),{context:i}=o,r=o$(e,i),l=_((()=>{tLe(n,r)}),[n,r]);return nLe(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),l),G(HW,{...e,active:r,onClick:l})}},iLe=Object.freeze({__proto__:null,default:oLe,setProps:tLe});function rLe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{context:c,imperator:a,rootdispatch:u,sync:d}=l;let f={textDecorationLine:"none"};!1===t&&(f={textDecorationLine:"line-through"});const h={lineThrough:!t,underline:null},{editor:{data:p},gfocus:v}=s;if(v){if(DHe(p,v)){const e=zHe(p,v);if(!(null==e?void 0:e.editor.selection))return u(bDe(f,c)),void d(u)}null===(n=a.current)||void 0===n||n.setProps(h,t$)}}const{useHotkey:lLe}=cj;var sLe={...OW,outer:function(e){var t;const n=R(NU),o=n.provider(),{context:i}=o,r=o$(e,i),l=_((()=>{rLe(n,r)}),[n,r]);return lLe(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),l),G(AW,{...e,active:r,onClick:l})}},cLe=Object.freeze({__proto__:null,default:sLe,setProps:rLe});function aLe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{context:c,imperator:a,rootdispatch:u,sync:d}=l,{focus:f,editor:{selectionStyle:h}}=c,p=s.editor.style,v={color:t};(null==h?void 0:h.color)===t&&(v.color=null==p?void 0:p.color),u(a4(f));const{editor:{data:g},gfocus:m}=s;if(m){if(DHe(g,m)){const e=zHe(g,m);if(!(null==e?void 0:e.editor.selection))return u(bDe(v,c)),void d(u)}null===(n=a.current)||void 0===n||n.setStyle(v)}}var uLe={...KW,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(qW,{...e,value:n$(o,"color"),onMore:()=>{const e=t.provider(),{rootdispatch:n}=e,o=YFe();n(a4(o))},onChange:e=>{aLe(t,e)}})},outer:function(e){const{name:t}=e,n=R(NU),o=n.provider(),{context:i}=o,r=n$(i,"color");return G(UW,{...e,onClick:()=>{const e=n.provider(),{rootdispatch:o}=e;o(u7(t,!0))},value:r})}},dLe=Object.freeze({__proto__:null,default:uLe,setStyle:aLe});function fLe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{context:c,imperator:a,rootdispatch:u,sync:d}=l,{focus:f,editor:{selectionStyle:h}}=c,p=s.editor.style,v={backgroundColor:t};(null==h?void 0:h.backgroundColor)===t&&(v.backgroundColor=p.backgroundColor),u(a4(f));const{editor:{data:g},gfocus:m}=s;if(m){if(DHe(g,m)){const e=zHe(g,m);if(!(null==e?void 0:e.editor.selection))return u(bDe(v,c)),void d(u)}null===(n=a.current)||void 0===n||n.setStyle(v)}}var hLe={...hz,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(dz,{...e,value:n$(o,"backgroundColor"),onMore:()=>{const e=t.provider(),{rootdispatch:n}=e,o=YFe();n(a4(o))},onChange:e=>{fLe(t,e)}})},outer:function(e){const{name:t}=e,n=R(NU),o=n.provider(),{context:i}=o,r=n$(i,"backgroundColor");return G(uz,{...e,onClick:()=>{const e=n.provider(),{rootdispatch:o}=e;o(u7(t,!0))},value:r})}},pLe=Object.freeze({__proto__:null,default:hLe,setStyle:fLe});const{useHotkey:vLe}=cj;function gLe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{rootdispatch:c,context:a,imperator:u,sync:d}=l,f={textAlign:t},{editor:{data:h},gfocus:p}=s;if(p){if(DHe(h,p)){const e=zHe(h,p);if(!(null==e?void 0:e.editor.selection))return null==c||c(bDe(f,a)),void d(c)}null===(n=u.current)||void 0===n||n.setStyle(f,!0)}}var mLe={...wz,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(Cz,{...e,value:n$(o,"textAlign"),onChange:e=>{gLe(t,e)}})},outer:function(e){var t;const n=R(NU),{name:o}=e,i=n.provider(),{context:r}=i,l=n$(r,"textAlign"),s=_((()=>{const{modal:e,webdav:t,file:i}=n.stater.get();(null==e?void 0:e.visible)||(null==t?void 0:t.visible)||wje(i)||n.dispatch(u7(o,!0))}),[n,o]);return vLe(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),s),G(mz,{...e,onClick:s,value:l})}},yLe=Object.freeze({__proto__:null,default:mLe,setStyle:gLe});function bLe(e){return G(j_,{...e,children:G(mR,{width:12.5})})}const{getEditNodeByPath:CLe,isBlockNode:wLe,isCollapsed:xLe,isDecorateNode:SLe,sliceBlockPath:ELe,traversalEditBlockNodeBySelection:kLe,sliceDecoratePath:DLe,reflowEditNodeBySelection:ILe}=ek;function NLe(e){var t,n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),{context:s,imperator:c}=l,a=parseFloat(String(null!==(t=n$(s,"fontSize"))&&void 0!==t?t:0));let u=!1,d=!1;const f=[],{decorateSafty:h,decorateSelection:p,isPrevListNodeDecorate:v,triggerDecorateSelection:g,isDecorateListNodeSelection:m}=Hye;m(s)&&(d=!0,v(s,Oxe)&&(f.push(aEe(s)),u=!0)),u||null===(n=c.current)||void 0===n||n.commit((e=>{var t,n,o,i;if(void 0===e.selection)return e;if(xLe(e.selection)){const{path:r}=e.selection.focus,l=DLe(e.node,r);if(l){const o=CLe(e.node,l);if(SLe(o)){const e=parseFloat(String(null!==(n=null===(t=o.style)||void 0===t?void 0:t.marginLeft)&&void 0!==n?n:0));o.style={...o.style,marginLeft:Math.max(e+2*a,0)}}}else{const t=ELe(e.node,r),n=CLe(e.node,t);if(wLe(n)){const e=parseFloat(String(null!==(i=null===(o=n.style)||void 0===o?void 0:o.marginLeft)&&void 0!==i?i:0));n.style={...n.style,marginLeft:Math.max(e+2*a,0)}}}return e=ILe(!0)(e)}const r=[];return kLe(e.node,e.selection,((t,n)=>{var o,i,l,s;const c=DLe(e.node,n);if(c){if(r.find((e=>Ec(c,e))))return;r.push(c);const t=CLe(e.node,c);if(SLe(t)){const e=parseFloat(String(null!==(i=null===(o=t.style)||void 0===o?void 0:o.marginLeft)&&void 0!==i?i:0));t.style={...t.style,marginLeft:Math.max(e+2*a,0)}}}else{const t=ELe(e.node,n),o=CLe(e.node,t);if(wLe(o)){const e=parseFloat(String(null!==(s=null===(l=o.style)||void 0===l?void 0:l.marginLeft)&&void 0!==s?s:0));o.style={...o.style,marginLeft:Math.max(e+2*a,0)}}}})),e=ILe(!0)(e)})),d&&(g(s,{[oTe]:()=>{f.push(PTe())}}),f.push(p(s)),h(s,c,f))}const{useHotkey:LLe}=cj;const BLe="increaseIndent",TLe={cn:{[BLe]:"增加缩进"},en:{[BLe]:"Increase Indent"}};const ALe="increase-indent";var MLe={name:ALe,hotkey:function(e){return Mf?"⌘+]":"Ctrl+]"},label:function(e){return TLe[e.lang][BLe]},outer:function({children:e,...t}){var n;const o=R(NU),i=_((()=>{NLe(o)}),[o]);return LLe(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),i),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:i,children:[G(bLe,{...t}),e]})}},OLe=Object.freeze({__proto__:null,IncreaseIndentIcon:bLe,default:MLe,indent:NLe,name:ALe});function RLe(e){return G(j_,{...e,children:G(yR,{width:12.5})})}const{getEditNodeByPath:PLe,isBlockNode:FLe,isCollapsed:HLe,isDecorateNode:_Le,sliceBlockPath:jLe,traversalEditBlockNodeBySelection:WLe,sliceDecoratePath:zLe,reflowEditNodeBySelection:VLe}=ek;function $Le(e){var t,n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),{context:s,imperator:c}=l,a=parseFloat(String(null!==(t=n$(s,"fontSize"))&&void 0!==t?t:0));let u=!1,d=!1;const f=[],{decorateSafty:h,decorateSelection:p,isPrevListNodeDecorate:v,triggerDecorateSelection:g,isDecorateListNodeSelection:m}=Hye;m(s)&&(d=!0,v(s,Oxe)&&(f.push(uEe(s)),u=!0)),u||null===(n=c.current)||void 0===n||n.commit((e=>{var t,n,o,i;if(void 0===e.selection)return e;if(HLe(e.selection)){const{path:r}=e.selection.focus,l=zLe(e.node,r);if(l){const o=PLe(e.node,l);if(_Le(o)){const e=parseFloat(String(null!==(n=null===(t=o.style)||void 0===t?void 0:t.marginLeft)&&void 0!==n?n:0));o.style={...o.style,marginLeft:Math.max(e-2*a,0)}}}else{const t=jLe(e.node,r),n=PLe(e.node,t);if(FLe(n)){const e=parseFloat(String(null!==(i=null===(o=n.style)||void 0===o?void 0:o.marginLeft)&&void 0!==i?i:0));n.style={...n.style,marginLeft:Math.max(e-2*a,0)}}}return e=VLe(!0)(e)}const r=[];return WLe(e.node,e.selection,((t,n)=>{var o,i,l,s;const c=zLe(e.node,n);if(c){if(r.find((e=>Ec(c,e))))return;r.push(c);const t=PLe(e.node,c);if(_Le(t)){const e=parseFloat(String(null!==(i=null===(o=t.style)||void 0===o?void 0:o.marginLeft)&&void 0!==i?i:0));t.style={...t.style,marginLeft:Math.max(e-2*a,0)}}}else{const t=jLe(e.node,n),o=PLe(e.node,t);if(FLe(o)){const e=parseFloat(String(null!==(s=null===(l=o.style)||void 0===l?void 0:l.marginLeft)&&void 0!==s?s:0));o.style={...o.style,marginLeft:Math.max(e-2*a,0)}}}})),e=VLe(!0)(e)})),d&&(g(s,{[oTe]:()=>{f.push(PTe())}}),f.push(p(s)),h(s,c,f))}const{useHotkey:ZLe}=cj;const ULe="decreaseIndent",qLe={cn:{[ULe]:"减少缩进"},en:{[ULe]:"Decrease Indent"}};const YLe="decrease-indent";var KLe={name:YLe,hotkey:function(e){return Mf?"⌘+[":"Ctrl+["},label:function(e){return qLe[e.lang][ULe]},outer:function({children:e,...t}){var n;const o=R(NU),i=_((()=>{$Le(o)}),[o]);return ZLe(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),i),t.silence?null:X(ch,{style:{...T_,...t.style},onClick:i,children:[G(RLe,{...t}),e]})}},GLe=Object.freeze({__proto__:null,default:KLe,indent:$Le,name:YLe});const{useHotkey:XLe}=cj;const JLe="indent",QLe={cn:{[JLe]:"缩进"},en:{[JLe]:"Indent"}};var eBe={name:"indent",label:function(e){return QLe[e.lang][JLe]},outer:function({children:e,...t}){var n;const{name:o}=t,i=R(NU),r=_((()=>{const{modal:e,webdav:t,file:n}=i.stater.get();if((null==e?void 0:e.visible)||(null==t?void 0:t.visible))return;if(wje(n))return;const r=i.provider(),{rootdispatch:l}=r;l(u7(o,!0))}),[i,o]);return XLe(null===(n=t.hotkey)||void 0===n?void 0:n.call(t,t),r),X(Z_,{...t,onClick:r,children:[G(bLe,{...t}),e,G(MLe.outer,{...t,hotkey:MLe.hotkey,silence:!0}),G(KLe.outer,{...t,hotkey:KLe.hotkey,silence:!0})]})},inner:function(e){const t=[MLe,KLe].map((t=>({...t,lang:e.lang,active:!1})));return G(V_,{...e,value:t})},hotkey:function(e){return Mf?"⌘+⇧+M":"Ctrl+Shift+M"}};function tBe(e,t){var n,o;const{modal:i,webdav:r,file:l}=e.stater.get();if((null==i?void 0:i.visible)||(null==r?void 0:r.visible))return;if(wje(l))return;const s=e.provider(),c=e.stater.get(),{context:a,imperator:u,rootdispatch:d,sync:f}=s,h={lineHeight:t},{editor:{data:p},gfocus:v}=c;if(v){if(DHe(p,v)){const e=zHe(p,v);if(!(null==e?void 0:e.editor.selection))return d(bDe(h,a)),void f(d)}null===(n=u.current)||void 0===n||n.setStyle({lineHeight:t},!0),null===(o=u.current)||void 0===o||o.commit(Nye(a))}}var nBe={...Kz,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(qz,{...e,value:n$(o,"lineHeight"),onChange:e=>{tBe(t,e)}})},outer:function(e){const{name:t}=e,n=R(NU);return G(Uz,{...e,onClick:()=>{const e=n.provider(),{rootdispatch:o}=e;o(u7(t,!0))}})}},oBe=Object.freeze({__proto__:null,default:nBe,setStyle:tBe});const{clearEditNodeStyle:iBe}=ek;function rBe(e){var t;const{modal:n,webdav:o,file:i}=e.stater.get();if((null==n?void 0:n.visible)||(null==o?void 0:o.visible))return;if(wje(i))return;const r=e.provider(),{imperator:l,context:s}=r,c=s.editor.style;null===(t=l.current)||void 0===t||t.commit(iBe(c,{underline:!1,lineThrough:!1}))}var lBe={...Gj,outer:function(e){const t=R(NU);return G(Yj,{...e,onClick:()=>{rBe(t)}})}},sBe=Object.freeze({__proto__:null,clear:rBe,default:lBe});const{setEditNodeStyle:cBe,reflowEditNodeBySelection:aBe}=ek;const uBe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyOSAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMjQuNSAzLjY1NmgxLjgyOGMuMzg4IDAgLjcwMy4zMTUuNzAzLjcwM3YzLjY1N2EuNzAzLjcwMyAwIDAgMS0uNzAzLjcwM2gtNi4xN3YxLjU0N2guNzc0YS4xNC4xNCAwIDAgMSAuMTQuMTR2NC4xNDlhMS40NzcgMS40NzcgMCAwIDEtMi45NTMgMHYtNC4xNDlhLjE0LjE0IDAgMCAxIC4xNC0uMTRoLjc3NHYtMS45N2MwLS4zODcuMzE1LS43MDIuNzAzLS43MDJoNi4xN1Y0Ljc4SDI0LjV2MS4yNjZhLjQyMi40MjIgMCAwIDEtLjQyMi40MjJoLTkuODQ0YS40MjIuNDIyIDAgMCAxLS40MjEtLjQyMlYyLjM5YzAtLjIzMy4xODgtLjQyMi40MjEtLjQyMmg5Ljg0NGMuMjMzIDAgLjQyMi4xODkuNDIyLjQyMnYxLjI2NXoiIGZpbGw9IiMyMzM5NmIiLz48cGF0aCBkPSJNMy40ODIgOS45M3YtLjk4M2gxLjAwMlYzLjgyMmMtLjExOS0uMzU2LS42NDYtMS4wODgtLjkwNS0xLjI5YTIuODggMi44OCAwIDAgMC0uOS0uNDU2IDIuMDQxIDIuMDQxIDAgMCAwLS40MjYtLjA2MyA2LjgzMyA2LjgzMyAwIDAgMC0uNjMtLjAxbC0uMDc3LjAwMi0uMDQ2LS45OTguMDk1LS4wMDRhNy43OSA3Ljc5IDAgMCAxIC43MjYuMDEyYy4yNjMuMDE4LjQ4NC4wNTEuNjYyLjEwOC40NDMuMTQuODUxLjM0MyAxLjIxLjYyLjIzLjE3OS41My41MzIuNzgxLjkxLjI2LS4zNzYuNTcxLS43MjUuODMyLS45MDUuNDI3LS4yOTYuODE1LS41MDYgMS4xODctLjYyNC4xNzktLjA1Ny40LS4wOS42NjQtLjEwOC4yNDEtLjAxNy40OTMtLjAxOS43MjQtLjAxM2wuMDk1LjAwNC0uMDQ2Ljk5OS0uMDc2LS4wMDNhNi44MzQgNi44MzQgMCAwIDAtLjYzLjAxYy0uMTg5LjAxMy0uMzQuMDM2LS40MjguMDY0LS4yNjIuMDgzLS41NjguMjQ5LS45MjEuNDk0LS4yNzguMTkxLS43NTguODQzLS45MDUgMS4yMzh2NS4xMzhoLjk5OHYuOTg0SDUuNDd2NC4xNzVjLjE0Ny4zOTQuNjI3IDEuMDQ1LjkwNyAxLjIzNy4zNS4yNDUuNjU2LjQxLjkyMi40OTMuMDg2LjAyNy4yMzcuMDUuNDI2LjA2My4yMDUuMDE0LjQyOC4wMTYuNjMuMDFsLjA3NS0uMDAyLjA0Ni45OTktLjA5NC4wMDNhNy43MiA3LjcyIDAgMCAxLS43MjUtLjAxMiAyLjgzOCAyLjgzOCAwIDAgMS0uNjYtLjEwOGMtLjM3NS0uMTE3LS43NjQtLjMyNy0xLjE4OS0uNjIzLS4yNjItLjE4LS41NzUtLjUzLS44MzQtLjkwNS0uMjUyLjM3Ni0uNTUyLjcyOS0uNzgyLjkxLS4zNTguMjc3LS43NjcuNDgtMS4yMDcuNjE3LS4xNzkuMDU4LS40LjA5Mi0uNjY0LjExYTcuNzEyIDcuNzEyIDAgMCAxLS43MjYuMDEybC0uMDk1LS4wMDMuMDQ2LS45OTkuMDc2LjAwM2MuMjAyLjAwNS40MjUuMDAzLjYzLS4wMS4xOS0uMDE0LjM0LS4wMzcuNDMtLjA2NS4zMzYtLjEwNi42NC0uMjU2Ljg5NS0uNDU0LjI2MS0uMjA1Ljc4OC0uOTM2Ljg5My0xLjI5NWwuMDE0LTQuMTU2SDMuNDgyeiIgZmlsbD0iIzIzMzk2YiIgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZF8xMTAyXzQpIi8+PHBhdGggZD0iTTMuNDgyIDkuOTN2LS45ODNoMS4wMDJWMy44MjJjLS4xMTktLjM1Ni0uNjQ2LTEuMDg4LS45MDUtMS4yOWEyLjg4IDIuODggMCAwIDAtLjktLjQ1NiAyLjA0MSAyLjA0MSAwIDAgMC0uNDI2LS4wNjMgNi44MzMgNi44MzMgMCAwIDAtLjYzLS4wMWwtLjA3Ny4wMDItLjA0Ni0uOTk4LjA5NS0uMDA0YTcuNzkgNy43OSAwIDAgMSAuNzI2LjAxMmMuMjYzLjAxOC40ODQuMDUxLjY2Mi4xMDguNDQzLjE0Ljg1MS4zNDMgMS4yMS42Mi4yMy4xNzkuNTMuNTMyLjc4MS45MS4yNi0uMzc2LjU3MS0uNzI1LjgzMi0uOTA1LjQyNy0uMjk2LjgxNS0uNTA2IDEuMTg3LS42MjQuMTc5LS4wNTcuNC0uMDkuNjY0LS4xMDguMjQxLS4wMTcuNDkzLS4wMTkuNzI0LS4wMTNsLjA5NS4wMDQtLjA0Ni45OTktLjA3Ni0uMDAzYTYuODM0IDYuODM0IDAgMCAwLS42My4wMWMtLjE4OS4wMTMtLjM0LjAzNi0uNDI4LjA2NC0uMjYyLjA4My0uNTY4LjI0OS0uOTIxLjQ5NC0uMjc4LjE5MS0uNzU4Ljg0My0uOTA1IDEuMjM4djUuMTM4aC45OTh2Ljk4NEg1LjQ3djQuMTc1Yy4xNDcuMzk0LjYyNyAxLjA0NS45MDcgMS4yMzcuMzUuMjQ1LjY1Ni40MS45MjIuNDkzLjA4Ni4wMjcuMjM3LjA1LjQyNi4wNjMuMjA1LjAxNC40MjguMDE2LjYzLjAxbC4wNzUtLjAwMi4wNDYuOTk5LS4wOTQuMDAzYTcuNzIgNy43MiAwIDAgMS0uNzI1LS4wMTIgMi44MzggMi44MzggMCAwIDEtLjY2LS4xMDhjLS4zNzUtLjExNy0uNzY0LS4zMjctMS4xODktLjYyMy0uMjYyLS4xOC0uNTc1LS41My0uODM0LS45MDUtLjI1Mi4zNzYtLjU1Mi43MjktLjc4Mi45MS0uMzU4LjI3Ny0uNzY3LjQ4LTEuMjA3LjYxNy0uMTc5LjA1OC0uNC4wOTItLjY2NC4xMWE3LjcxMiA3LjcxMiAwIDAgMS0uNzI2LjAxMmwtLjA5NS0uMDAzLjA0Ni0uOTk5LjA3Ni4wMDNjLjIwMi4wMDUuNDI1LjAwMy42My0uMDEuMTktLjAxNC4zNC0uMDM3LjQzLS4wNjUuMzM2LS4xMDYuNjQtLjI1Ni44OTUtLjQ1NC4yNjEtLjIwNS43ODgtLjkzNi44OTMtMS4yOTVsLjAxNC00LjE1NkgzLjQ4MnoiIGZpbGw9IiMyMzM5NmIiLz48ZGVmcz48ZmlsdGVyIGlkPSJmaWx0ZXIwX2RfMTEwMl80IiB4PSIuNSIgeT0iMCIgd2lkdGg9IjguOTc2IiBoZWlnaHQ9IjE3LjkxNCIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldC8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDEgMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAxIDAiLz48ZmVCbGVuZCBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTEwMl80Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzExMDJfNCIgcmVzdWx0PSJzaGFwZSIvPjwvZmlsdGVyPjwvZGVmcz48L3N2Zz4=";var dBe={...$j,outer:function(e){const t=R(NU),n=t.provider(),{rootstate:o}=n,i=!!o.editor.formatPaint;return function(){const e=R(NU),t=R(SU),n=Nd("pointerup"),o=!!t.editor.formatPaint;F((()=>(window.addEventListener("pointerup",n.listener),()=>{window.removeEventListener("pointerup",n.listener)})),[n]),F((()=>{if(!o)return;const t=n.subscribe((()=>{var t;const n=e.provider(),{imperator:o,context:i}=n,{style:r,formatPaintStyle:l}=i.editor,s={...r,...l};null===(t=o.current)||void 0===t||t.commit([cBe(s),aBe()])}));return()=>{t.unsubscribe()}}),[o,e,n])}(),G(zj,{...e,active:i,onClick:()=>{const e=t.provider(),{rootdispatch:n}=e;ZFe(),n(b9(!i))}})}},fBe=Object.freeze({__proto__:null,default:dBe,icon:uBe});const hBe="bulletedList",pBe={cn:{[hBe]:"无序列表"},en:{[hBe]:"Bulleted List"}};const vBe="bulleted-list",gBe=5,mBe=6,yBe=4.5,bBe=6,CBe={position:"relative",top:Pf?-.5:0},wBe={width:gBe,height:gBe,marginLeft:"10%",borderRadius:"50%",backgroundColor:kf,transformOrigin:"left",...CBe},xBe={width:mBe,height:mBe,marginLeft:"10%",borderRadius:"50%",borderWidth:1,borderStyle:"solid",borderColor:kf,transformOrigin:"left",boxSizing:"border-box",...CBe},SBe={width:yBe,height:yBe,borderRadius:.5,marginLeft:"10%",backgroundColor:kf,transformOrigin:"left",...CBe},EBe={width:bBe,height:bBe,marginLeft:"10%",borderRadius:"50%",borderWidth:1,borderStyle:"solid",borderColor:kf,display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"left",boxSizing:"border-box",...CBe},kBe={width:2,height:2,borderRadius:"50%",backgroundColor:kf,transformOrigin:"left"};function DBe(e){return G(j_,{...e,children:G(ZO,{width:14})})}function IBe(e){var t,n,o,i;const r=null===(t=e.style)||void 0===t?void 0:t.color,l=sae(null===(n=e.style)||void 0===n?void 0:n.fontSize);if(e.subclass===Aye.ONE){const t=(null!==(i=null===(o=e.level)||void 0===o?void 0:o.length)&&void 0!==i?i:0)%3;if(1===t)return G(NBe,{color:r,scale:l});if(2===t)return G(LBe,{color:r,scale:l});if(0===t)return G(BBe,{color:r,scale:l})}else if(e.subclass===Aye.TWO)return G(TBe,{color:r,scale:l});return null}function NBe(e){return G("div",{style:{...wBe,transform:`scale(${e.scale})`,backgroundColor:e.color||kf,...e.style}})}function LBe(e){return G("div",{style:{...xBe,transform:`scale(${e.scale})`,borderColor:e.color||kf,...e.style}})}function BBe(e){return G("div",{style:{...SBe,transform:`scale(${e.scale})`,backgroundColor:e.color||kf,...e.style}})}function TBe(e){return G("div",{style:{...EBe,transform:`scale(${e.scale})`,borderColor:e.color||kf,...e.style},children:G("div",{style:{...kBe,backgroundColor:e.color||kf}})})}const ABe={style:Pf?{}:{marginLeft:"0"}},MBe=[{type:Aye.ONE,jsx:[{icon:e=>G(NBe,{...ABe,...e,style:{...ABe.style,...e.style}}),children:[{icon:e=>G(LBe,{...ABe,...e,style:{...ABe.style,...e.style}})},{icon:e=>G(LBe,{...ABe,...e,style:{...ABe.style,...e.style}}),children:[{icon:e=>G(BBe,{...ABe,...e,style:{...ABe.style,...e.style}})}]}]},{icon:e=>G(NBe,{...ABe,...e,style:{...ABe.style,...e.style}})}]},{type:Aye.TWO,jsx:[{icon:e=>G(TBe,{...ABe,...e,style:{...ABe.style,...e.style}}),children:[{icon:e=>G(TBe,{...ABe,...e,style:{...ABe.style,...e.style}})},{icon:e=>G(TBe,{...ABe,...e,style:{...ABe.style,...e.style}}),children:[{icon:e=>G(TBe,{...ABe,...e,style:{...ABe.style,...e.style}})}]}]},{icon:e=>G(TBe,{...ABe,...e,style:{...ABe.style,...e.style}})}]}],{isDecorateBlockNode:OBe}=ek;function RBe(e){var t;return OBe(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===vBe}function PBe(e){var t,n;if(e.subclass===Aye.ONE){const o=(null!==(n=null===(t=e.level)||void 0===t?void 0:t.length)&&void 0!==n?n:0)%3;if(1===o)return gBe;if(2===o)return mBe;if(0===o)return yBe}else if(e.subclass===Aye.TWO)return bBe}function FBe(e){const t={...Yme(e.kid),...e.style};return G(Fye,{...e,iconSize:PBe(e),style:t,icon:IBe,children:e.children})}var HBe={name:vBe,label:function(e){return pBe[e.lang][hBe]},inner:function(e){const t=R(NU);return G(Bye,{...e,group:MBe,decorate:(...e)=>Dye(t,...e)})},outer:function({children:e,...t}){const n=R(NU);return X(Oye,{...t,decorate:(...e)=>Dye(n,...e),children:[G(DBe,{...t}),e]})},icon:DBe},_Be=Object.freeze({__proto__:null,default:HBe,getIconSize:PBe,group:MBe,isBulletedListNode:RBe,list:FBe,name:vBe});const jBe="numberedList",WBe={cn:{[jBe]:"有序列表"},en:{[jBe]:"Numbered List"}};const zBe={position:"absolute",whiteSpace:"nowrap",right:5,marginTop:1},VBe={display:"inline-block",marginLeft:1};function $Be(e){return G(j_,{...e,children:X("svg",{width:14.5,viewBox:"0 0 12 12",fill:"none",children:[G("path",{d:"M1.98029 8.8C2.24764 8.8 2.45888 8.86919 2.62226 9.01025C2.77904 9.1522 2.86073 9.34537 2.86073 9.59245C2.86073 9.90782 2.7122 10.1226 2.42257 10.2268C2.57853 10.2798 2.69735 10.3607 2.77821 10.4658C2.86816 10.5745 2.91271 10.7164 2.91271 10.8863C2.91271 11.1531 2.8269 11.3714 2.65939 11.5412C2.48116 11.7111 2.24764 11.8 1.96543 11.8C1.69478 11.8 1.47529 11.7236 1.31191 11.5736C1.12625 11.4038 1.02228 11.1576 1 10.8341H1.40845C1.41588 11.0273 1.47199 11.1774 1.58339 11.2825C1.67993 11.3795 1.80618 11.428 1.96213 11.428C2.13294 11.428 2.26992 11.3714 2.37389 11.2663C2.463 11.1693 2.51086 11.0516 2.51086 10.9069C2.51086 10.7362 2.463 10.6113 2.36646 10.5305C2.27734 10.4496 2.14367 10.4092 1.96956 10.4092H1.77565V10.0776H1.96543C2.12881 10.0776 2.25176 10.0372 2.33345 9.96083C2.41432 9.88356 2.45888 9.77035 2.45888 9.6248C2.45888 9.47925 2.41845 9.36963 2.34418 9.29326C2.26249 9.2124 2.13954 9.17646 1.98359 9.17646C1.82433 9.17646 1.69808 9.22049 1.60897 9.30944C1.51985 9.39839 1.46456 9.53226 1.44889 9.71016H1.05281C1.07509 9.42264 1.17163 9.20072 1.34574 9.039C1.50995 8.87727 1.72036 8.8 1.98029 8.8Z",fill:Lf,stroke:Lf,strokeWidth:"0.3"}),G("path",{d:"M1.83982 4.5C2.08859 4.5 2.29753 4.57613 2.45769 4.73547C2.61541 4.89481 2.6959 5.09753 2.6959 5.34893C2.6959 5.59591 2.6081 5.8181 2.43981 6.0217C2.33737 6.13678 2.1577 6.28816 1.89835 6.48025C1.61625 6.68297 1.44877 6.86267 1.39349 7.01758H2.69996V7.4H0.900002C0.900002 7.11673 0.98374 6.86975 1.15935 6.65552C1.25447 6.53159 1.45202 6.36074 1.74795 6.13767C1.92437 6.00134 2.04876 5.89423 2.12193 5.81013C2.23819 5.66673 2.30079 5.51181 2.30079 5.34451C2.30079 5.18516 2.26014 5.06566 2.18046 4.98599C2.09916 4.90632 1.97884 4.86648 1.82519 4.86648C1.66096 4.86648 1.53657 4.92579 1.45202 5.04973C1.36422 5.16923 1.32032 5.34096 1.313 5.57201H0.914635C0.917887 5.25333 1.00163 4.9975 1.16666 4.80717C1.33495 4.60003 1.56178 4.5 1.83982 4.5Z",fill:Lf,stroke:Lf,strokeWidth:"0.3"}),G("path",{d:"M1.73661 0.300003H2.05389V3.3H1.63285V0.85089C1.46649 1.02269 1.25468 1.14874 1 1.22904V0.774326C1.12348 0.740713 1.25039 0.682823 1.39017 0.598789C1.52909 0.505419 1.64485 0.409247 1.73661 0.300003Z",fill:Lf,stroke:Lf,strokeWidth:"0.3"}),G("path",{d:"M11 9.78041V10.77H4V9.78041H11ZM11 5.52916V6.51875H4V5.52916H11ZM11 1.27V2.25958H4V1.27H11Z",fill:Lf})]})})}function ZBe(e){var t,n,o,i,r;if(e.subclass===Aye.ONE){const r=(null!==(n=null===(t=e.level)||void 0===t?void 0:t.length)&&void 0!==n?n:0)%3,l=null!==(o=Js(e.level))&&void 0!==o?o:1;let s="";1===r?s=String(l):2===r?s=qf(l).toLowerCase():0===r&&(s=function(e){let t="",n=~~((e-1)/10);for(let e=0;e<n;e++)t+=Js(Yf)??"";return t+=Yf[(e%10||10)-1],t}(l));const c={...zBe,color:null===(i=e.style)||void 0===i?void 0:i.color};return 1!==r&&(c.right=5),X("div",{style:c,children:[s,G("span",{style:VBe,children:"."})]})}if(e.subclass===Aye.TWO){const t=e.level||[1],n={...zBe,color:null===(r=e.style)||void 0===r?void 0:r.color};return t.length>1&&(n.right=5),X("div",{style:n,children:[t.join("."),G("span",{style:VBe,children:"."})]})}return null}const UBe={style:{fontSize:12,fontWeight:"bolder",transform:"scale(0.8)",textAlign:"right",fontWeight:Pf?550:"bolder"}},qBe=[{type:Aye.ONE,jsx:[{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"1. "}),children:[{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"a. "})},{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"b. "}),children:[{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"i. "})}]}]},{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"2. "})}]},{type:Aye.TWO,jsx:[{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"1. "}),children:[{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"1.1. "})},{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"1.2. "}),children:[{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"1.2.1. "})}]}]},{icon:e=>G("div",{...UBe,...e,style:{...UBe.style,...e.style},children:"2. "})}]}],YBe="numbered-list";function KBe(e){const t={...Yme(e.kid),...e.style};return G(Fye,{...e,style:t,icon:ZBe,children:e.children})}const{isDecorateBlockNode:GBe}=ek;function XBe(e){var t;return GBe(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===YBe}var JBe={name:YBe,label:function(e){return WBe[e.lang][jBe]},inner:function(e){const t=R(NU);return G(Bye,{...e,group:qBe,decorate:(...e)=>Dye(t,...e)})},outer:function({children:e,...t}){const n=R(NU);return X(Oye,{...t,decorate:(...e)=>Dye(n,...e),children:[G($Be,{...t}),e]})},icon:$Be},QBe=Object.freeze({__proto__:null,default:JBe,group:qBe,isNumberedListNode:XBe,list:KBe,name:YBe});const eTe="checkList",tTe="checkListPackage",nTe={cn:{[eTe]:"任务列表",[tTe]:[{name:"1.0",value:1.7},{name:"1.15",value:2},{name:"1.5",value:2.5},{name:"2.0",value:3.4},{name:"2.5",value:4.3},{name:"3.0",value:5.1}]},en:{[eTe]:"Check List",[tTe]:[{name:"1.0",value:1.7},{name:"1.15",value:2},{name:"1.5",value:2.5},{name:"2.0",value:3.4},{name:"2.5",value:4.3},{name:"3.0",value:5.1}]}};const oTe="check-list",iTe=10,rTe=10,lTe={borderWidth:1,borderStyle:"solid",borderColor:Df,borderRadius:2,width:iTe,height:iTe,position:"relative",cursor:"pointer",transformOrigin:"left",boxSizing:"border-box"},sTe={position:"absolute",top:-5,left:-9,width:22,height:12,borderBottom:`4px solid ${Df}`,borderLeft:`4px solid ${Df}`,transform:"rotate(-45deg) scale(0.21)"},cTe={width:rTe,height:rTe,cursor:"pointer",position:"relative",transformOrigin:"left",borderRadius:"50%"},aTe={position:"absolute",top:-4,left:-8,width:22,height:12,borderBottom:`4px solid ${Df}`,borderLeft:`4px solid ${Df}`,transform:"rotate(-45deg) scale(0.21)"},uTe={position:"absolute",top:0,left:0,right:0,bottom:0,background:"#fff",borderWidth:1,borderStyle:"solid",borderColor:Df,borderRadius:"50%",backgroundImage:`linear-gradient(90deg, transparent 50%, ${Df} 0)`,transformOrigin:"left",overflow:"hidden"},dTe={marginLeft:"50%",height:"calc(100% + 0.5px)",transformOrigin:"left",backgroundColor:"inherit",transform:"rotate(0.5turn)"};function fTe(e){return G(j_,{...e,children:X("svg",{width:14.5,viewBox:"0 0 12 12",fill:"none",children:[G("path",{d:"M1.08165 10.011L1.51743 10.4613L2.61835 9.3H3.1L1.4945 10.959L1.37982 10.8168L0.6 10.011H1.08165Z",fill:Lf}),G("path",{d:"M1.08165 10.011L1.51743 10.4613L2.61835 9.3H3.1L1.4945 10.959L1.37982 10.8168L0.6 10.011H1.08165Z",fill:Lf}),G("path",{d:"M1.08165 10.011L1.51743 10.4613L2.61835 9.3H3.1L1.4945 10.959L1.37982 10.8168L0.6 10.011H1.08165Z",stroke:Lf,strokeWidth:"0.5"}),G("path",{d:"M1.08165 5.71101L1.51743 6.16132L2.61835 5H3.1L1.4945 6.65902L1.37982 6.51682L0.6 5.71101H1.08165Z",fill:Lf}),G("path",{d:"M1.08165 5.71101L1.51743 6.16132L2.61835 5H3.1L1.4945 6.65902L1.37982 6.51682L0.6 5.71101H1.08165Z",fill:Lf}),G("path",{d:"M1.08165 5.71101L1.51743 6.16132L2.61835 5H3.1L1.4945 6.65902L1.37982 6.51682L0.6 5.71101H1.08165Z",stroke:Lf,strokeWidth:"0.5"}),G("path",{d:"M1.08165 1.51101L1.51743 1.96132L2.61835 0.800003H3.1L1.4945 2.45902L1.37982 2.31682L0.6 1.51101H1.08165Z",fill:Lf}),G("path",{d:"M1.08165 1.51101L1.51743 1.96132L2.61835 0.800003H3.1L1.4945 2.45902L1.37982 2.31682L0.6 1.51101H1.08165Z",fill:Lf}),G("path",{d:"M1.08165 1.51101L1.51743 1.96132L2.61835 0.800003H3.1L1.4945 2.45902L1.37982 2.31682L0.6 1.51101H1.08165Z",stroke:Lf,strokeWidth:"0.5"}),G("path",{d:"M11 9.78041V10.77H4V9.78041H11ZM11 5.52916V6.51875H4V5.52916H11ZM11 1.27V2.25958H4V1.27H11Z",fill:Lf})]})})}function hTe(e){var t,n,o,i;const r=null===(t=e.style)||void 0===t?void 0:t.color,l=sae(null===(n=e.style)||void 0===n?void 0:n.fontSize),s=(null!==(o=e.numerator)&&void 0!==o?o:0)/(null!==(i=e.denominator)&&void 0!==i?i:1);return e.subclass===Aye.ONE?G(pTe,{color:r,scale:l,editable:e.editable,percentage:s}):e.subclass===Aye.TWO?G(vTe,{color:r,scale:l,editable:e.editable,percentage:s}):null}function pTe(e){var t;const n=R(ek.EditElement);return G("div",{style:{...lTe,cursor:e.editable?"pointer":"auto",borderColor:null!==(t=e.color)&&void 0!==t?t:Df,transform:`scale(${e.scale})`,top:n?Pf?-1:-.5:.5,...e.style},children:1===e.percentage?G("div",{style:{...sTe,borderBottomColor:e.color,borderLeftColor:e.color}}):null})}function vTe(e){var t,n,o,i,r;const l=null!==(t=e.percentage)&&void 0!==t?t:0,s=null!==(n=e.color)&&void 0!==n?n:Df,c=R(ek.EditElement);return X("div",{style:{...cTe,cursor:e.editable?"pointer":"auto",transform:`scale(${1.1*(null!==(o=e.scale)&&void 0!==o?o:1)})`,backgroundColor:1===l?s:"transparent",top:c?Pf?-1:-.5:.5,...e.style},children:[l<1&&G(gTe,{...e}),1===e.percentage?G("div",{style:{...aTe,borderBottomColor:null!==(i=e.fill)&&void 0!==i?i:"#fff",borderLeftColor:null!==(r=e.fill)&&void 0!==r?r:"#fff"}}):null]})}function gTe(e){var t,n,o,i,r,l;const s=(null!==(t=e.percentage)&&void 0!==t?t:0)>.5,c=(null!==(n=e.percentage)&&void 0!==n?n:0)-(s?.5:0),a=0===e.percentage?null!==(o=e.fill)&&void 0!==o?o:"#fff":null!==(i=e.color)&&void 0!==i?i:Df;return G("div",{style:{...uTe,backgroundColor:null!==(r=e.fill)&&void 0!==r?r:"#fff",borderColor:null!==(l=e.color)&&void 0!==l?l:Df,backgroundImage:`linear-gradient(90deg, transparent 50%, ${a} 0)`},children:G("div",{style:{...dTe,backgroundColor:s?a:"inherit",transform:`rotate(${c}turn)`}})})}const{isNode:mTe}=ek;function yTe(e){return lae(e,oTe)}function bTe(e){let t=e;for(;mTe(t)&&!yTe(t);)t=t.children[0];return yTe(t)?t:null}async function CTe(e,t,n,o=!0,i){var r,l,s,c,a,u;const d=[],f=t.stater.get();let h=null===(l=null===(r=f.store)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[e],p=null===(c=null===(s=f.store)||void 0===s?void 0:s.reference)||void 0===c?void 0:c[e];if(!h){const t=await _Y(e,n);t&&(h=null===(a=t.editor)||void 0===a?void 0:a[e],h&&xFe(h,{reference:t.reference}),p=null===(u=t.reference)||void 0===u?void 0:u[e],d.push(rq(t)))}if(!h||!p)return d;if(o){const o=h.data.children[0];if(jve(o,aae.H)&&bTe(o))for(const o in p.detail)o!==e&&d.push(...await CTe(o,t,n,!0))}if(void 0===i)return d;async function v(e){var o;const i=null==h?void 0:h.data.children[e];if(jve(i,aae.H)&&bTe(i)){const e=null===(o=i.props)||void 0===o?void 0:o.id;if(!e)return;d.push(...await CTe(e,t,n,!1,-1))}}if(-1!==i)return await v(i),d;const g=h.data.children.length;for(let e=1;e<g;e++)await v(e);return d}function wTe(e){return e.subclass===Aye.ONE?iTe:e.subclass===Aye.TWO?rTe:void 0}function xTe(e,t,n){var o,i,r,l,s,c,a,u;const d=t[e];if(!jve(d))return n;const f=bTe(d);if(!f)return n;const h=null!==(i=null===(o=f.props)||void 0===o?void 0:o.numerator)&&void 0!==i?i:0,p=null!==(l=null===(r=f.props)||void 0===r?void 0:r.denominator)&&void 0!==l?l:1;void 0===n&&(n=h/p==1),f.props&&Object.assign(f.props,{numerator:n?0:1,denominator:1}),!1===(null===(s=d.props)||void 0===s?void 0:s.expand)&&STe(d,n);const v=null===(c=d.props)||void 0===c?void 0:c.subclass;if(v!==aae.H||0===e)for(let o=e+1;o<t.length;o++){let e=t[o];if(!jve(e))continue;const i=null===(a=e.props)||void 0===a?void 0:a.subclass;if(i>=v&&i!==aae.H)break;!1===(null===(u=e.props)||void 0===u?void 0:u.expand)&&STe(e,n),e=bTe(e),e&&(e.props&&Object.assign(e.props,{numerator:n?0:1,denominator:1}))}return n}function STe(e,t){var n,o,i,r;if(!1!==(null===(n=e.props)||void 0===n?void 0:n.expand))return;const l=[...e.children,...null!==(i=null===(o=e.props)||void 0===o?void 0:o.list)&&void 0!==i?i:[]];for(const e of l){!1===(null===(r=e.props)||void 0===r?void 0:r.expand)&&STe(e,t);const n=bTe(e);n&&(n.props&&Object.assign(n.props,{numerator:t?0:1,denominator:1}))}}function ETe(e,t){var n,o,i,r,l,s,c;const a=t[e];if(!jve(a))return;const u=null===(n=a.props)||void 0===n?void 0:n.subclass;let d=0;for(let n=e-1;n>=0;n--){let e=t[n];if(!jve(e))continue;const a=null===(o=e.props)||void 0===o?void 0:o.subclass;if(a===aae.H&&0!==n)continue;if(a<=u&&a!==aae.H)continue;if(d>=a)continue;if(e=bTe(e),!e)continue;d=a;let f=0,h=0,p=0;for(let e=n+1;e<t.length;e++){let n=t[e];if(!jve(n))continue;const o=null===(i=n.props)||void 0===i?void 0:i.subclass;if(o>=a&&o!==aae.H)break;if(p>o)continue;if(o!==aae.H&&(p=o),n=bTe(n),!n)continue;f+=(null!==(l=null===(r=n.props)||void 0===r?void 0:r.numerator)&&void 0!==l?l:0)/(null!==(c=null===(s=n.props)||void 0===s?void 0:s.denominator)&&void 0!==c?c:1),h+=1}0!==h&&e.props&&Object.assign(e.props,{numerator:Math.max(0,f),denominator:h})}}const{genPrevLevelPath:kTe,isEditNode:DTe,iterateBlockNode:ITe,sliceDecoratePath:NTe,getEditNodeByPath:LTe,getRelativePath:BTe,getPathFromKey:TTe}=ek;function ATe(e,t,n){NTe(e.node,t,fye.name)?xTe(t[0],e.node.children):(MTe(e,n,t),RTe(e,n,t))}function MTe(e,t,n){var o,i,r,l,s,c,a,u,d;const f=null!==(o=Js(BTe(e.node,n)))&&void 0!==o?o:0,h=t.children[f];if(!lae(h,oTe))return;const p=(null!==(r=null===(i=h.props)||void 0===i?void 0:i.numerator)&&void 0!==r?r:0)/(null!==(s=null===(l=h.props)||void 0===l?void 0:l.denominator)&&void 0!==s?s:1)==1;h.props&&Object.assign(h.props,{numerator:p?0:1,denominator:1}),uSe(t)&&OTe(t,p);const v=parseInt(String(null!==(a=null===(c=h.style)||void 0===c?void 0:c.marginLeft)&&void 0!==a?a:0));for(let e=f+1;e<t.children.length;e++){let n=t.children[e];if(!lae(n))continue;if(v>=parseInt(String(null!==(d=null===(u=n.style)||void 0===u?void 0:u.marginLeft)&&void 0!==d?d:0)))break;uSe(n)?OTe(n,p):yTe(n)&&n.props&&Object.assign(n.props,{numerator:p?0:1,denominator:1})}}function OTe(e,t){var n,o;if(!uSe(e))return;const i=[...e.children,...null!==(o=null===(n=e.props)||void 0===n?void 0:n.list)&&void 0!==o?o:[]];for(const e of i)yTe(e)?e.props&&Object.assign(e.props,{numerator:t?0:1,denominator:1}):uSe(e)&&OTe(e,t)}function RTe(e,t,n){var o,i,r,l,s,c,a,u,d,f,h,p,v,g,m;const y=null!==(o=Js(n))&&void 0!==o?o:0,b=t.children[y];if(!lae(b,oTe)){let o=!1;if(lae(b,wEe.name)){lae(b.children[0],oTe)&&(o=!0)}if(!o)return void(y>0&&RTe(e,t,kTe(n)))}const C=uSe(b),w=parseInt(String(null!==(r=null===(i=b.style)||void 0===i?void 0:i.marginLeft)&&void 0!==r?r:0));for(let e=y-1;e>=0;e--){let n=t.children[e];if(!lae(n))continue;const o=uSe(n),i=parseInt(String(null!==(s=null===(l=n.style)||void 0===l?void 0:l.marginLeft)&&void 0!==s?s:0));if(w<=i&&(!C||o))continue;if(o&&(n=n.children[0],!lae(n)))continue;if(!lae(n,oTe))continue;let r=0,y=0;const b=null!==(a=null===(c=n.props)||void 0===c?void 0:c.level)&&void 0!==a?a:[];for(let n=e+1;n<t.children.length;n++){let e=t.children[n];if(!lae(e))continue;const o=uSe(e);if(parseInt(String(null!==(d=null===(u=e.style)||void 0===u?void 0:u.marginLeft)&&void 0!==d?d:0))<=i&&!o)break;if(o&&(e=e.children[0],!lae(e)))continue;if((null!==(h=null===(f=e.props)||void 0===f?void 0:f.level)&&void 0!==h?h:[]).length-b.length!=1&&!o)continue;if(!yTe(e))continue;r+=(null!==(v=null===(p=e.props)||void 0===p?void 0:p.numerator)&&void 0!==v?v:0)/(null!==(m=null===(g=e.props)||void 0===g?void 0:g.denominator)&&void 0!==m?m:1),y+=1}0!==y&&n.props&&Object.assign(n.props,{numerator:Math.max(0,r),denominator:y})}if(uSe(t)&&n.length>1){const n=TTe(t.key),o=LTe(e.node,ec(n));DTe(o)&&RTe(e,o,n)}}const PTe=e=>e=>(oae(e).forEach((t=>{e=ITe(((t,n)=>{RTe(e,t,[...n,t.children.length-1])}),t)(e)})),e),{isReferenceNode:FTe,isNodeEqual:HTe}=ek,_Te=(e,t,n=!0,o=!0,i)=>r=>{var l,s,c,a,u,d;const{store:f,file:h}=r,p=null===(l=null==f?void 0:f.editor)||void 0===l?void 0:l[e];if(!p)return r;const v=p.data.children,g=v[t];if(!jve(g))return r;if(!bTe(g))return r;if(o){const e=xTe(t,v,i),n=t=>{var n,o,i,l;const s=v[t];if(jve(s,aae.H)&&bTe(s)){const t=null===(n=s.props)||void 0===n?void 0:n.id;if(!t)return;const c=s.children[0],a=null===(i=null===(o=r.store)||void 0===o?void 0:o.reference)||void 0===i?void 0:i[t];if(a){const e=a.data,t=null===(l=c.props)||void 0===l?void 0:l.uid,n={...e.props,uid:t},o={...e,props:n};HTe(c,o)||Object.assign(c,ts(o))}r=_Te(t,0,!1,!0,e)(r)}};if(0===t)for(let e=1;e<v.length;e++)n(e);else n(t)}n&&ETe(t,v);for(const t of v)if(jve(t,aae.H)&&bTe(t)){const n=t.children[0];if(FTe(n)){const t=null===(s=n.props)||void 0===s?void 0:s.id;r=xq(t,n,e)(r)}}r=hq(e,p)(r),r=Z3(e)(r),(null==h?void 0:h.currentPageId)===e&&(r.editor.data=p.data,r=V4(e)(r));const m=v[0];if(jve(m,aae.H)&&bTe(m)){const t=null===(a=null===(c=f.reference)||void 0===c?void 0:c[e])||void 0===a?void 0:a.detail;for(const n in t){if(e===n)continue;const t=null===(u=f.editor)||void 0===u?void 0:u[n];if(!t)continue;let o=-1;const i=t.data.children;for(let t=1;t<i.length;t++){const n=i[t];if(jve(n,aae.H)&&bTe(n)&&(null===(d=n.props)||void 0===d?void 0:d.id)===e){const e=bTe(n),i=bTe(m);e&&i&&(e.props=ts(i.props)),o=t;break}}-1!==o&&(r=_Te(n,o,!0,!1)(r))}}return r};const jTe={color:Pf?kf:Df,scale:Pf?.8:1},WTe=[{type:Aye.ONE,jsx:[{icon:e=>G(pTe,{...jTe,...e,style:{...jTe.style,...e.style}}),children:[{icon:e=>G(pTe,{...jTe,...e,style:{...jTe.style,...e.style}})},{icon:e=>G(pTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:1}),children:[{icon:e=>G(pTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:1})}]}]},{icon:e=>G(pTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:1})}]},{type:Aye.TWO,jsx:[{icon:e=>G(vTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:.5}),children:[{icon:e=>G(vTe,{...jTe,...e,style:{...jTe.style,...e.style}})},{icon:e=>G(vTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:1}),children:[{icon:e=>G(vTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:1})}]}]},{icon:e=>G(vTe,{...jTe,...e,style:{...jTe.style,...e.style},percentage:1})}]}],{getPathFromKey:zTe,iterateBlockNode:VTe,sliceBlockPath:$Te,sliceDecoratePath:ZTe}=ek;function UTe(e){var t,n;const o=R(NU),i=R(LU),r=R(MU),l=R(TU),s=R(SU),c=R(EU),a=R(RU),u=(null!==(t=e.numerator)&&void 0!==t?t:0)/(null!==(n=e.denominator)&&void 0!==n?n:1)==1,d={...Yme(e.kid),...e.style};return G(Fye,{...e,style:d,iconSize:wTe(e),icon:hTe,onClickIcon:async t=>{var n;if(t.stopPropagation(),void 0===e.kid)return;if(!1===e.editable)return;const{editor:{node:u},focus:d,root:f}=r,h=[NDe(d),s4(d)],p=zTe(e.kid),v=ZTe(u,p,fye.name);if(f&&v){const e=null===(n=s.file)||void 0===n?void 0:n.currentPageId;if(e){const t=await CTe(e,o,i,!0,p[0]);h.push(...t,_Te(e,p[0]))}}else{const e=$Te(u,p),t={anchor:{path:ec(e),offset:0},focus:{path:ec(e),offset:0}},n=[n=>VTe(Hs(ATe)(n,e),t)(n)],o=()=>{Lye(r,l,n,{anchor:{path:[...p],offset:0},focus:{path:[...p],offset:0}})};Ec(s.gfocus,d)?o():requestAnimationFrame(o)}c(...h),a(c)},onPointerDownIcon:e=>e.stopPropagation(),children:G("span",{style:{opacity:u?.6:1,fontSize:d.fontSize,color:d.color,textDecorationLine:u?"line-through":"none"},children:e.children})})}var qTe={name:oTe,label:function(e){return nTe[e.lang][eTe]},inner:function(e){const t=R(NU);return G(Bye,{...e,group:WTe,onChange:()=>{var e;const n=t.provider(),{context:o,imperator:i}=n;null===(e=i.current)||void 0===e||e.commit(PTe())},decorate:(...e)=>Dye(t,...e)})},outer:function({children:e,...t}){const n=R(NU);return X(Oye,{...t,onChange:()=>{var e;const t=n.provider(),{context:o,imperator:i}=t;null===(e=i.current)||void 0===e||e.commit(PTe())},decorate:(...e)=>Dye(n,...e),children:[G(fTe,{...t}),e]})},icon:fTe},YTe=Object.freeze({__proto__:null,decorateOutline:_Te,decorateOutlineList:xTe,decorateOutlineParent:ETe,decorateOutlineToggle:STe,decorateParent:RTe,decorateSelection:PTe,decorateState:ATe,decorateTarget:MTe,decorateToggle:OTe,default:qTe,generateCheckActions:CTe,getCheckNode:bTe,getIconSize:wTe,group:WTe,isCheckNode:yTe,list:UTe,name:oTe});function KTe(e,t){var n;const{modal:o,webdav:i,file:r}=e.stater.get();if((null==o?void 0:o.visible)||(null==i?void 0:i.visible))return;if(wje(r))return;const l=e.provider(),s=e.stater.get(),{context:c,imperator:a,rootdispatch:u,sync:d}=l,f={letterSpacing:sc(t)?t:Number(null==t?void 0:t.toFixed(1))},{editor:{data:h},gfocus:p}=s;if(p){if(DHe(h,p)){const e=zHe(h,p);if(!(null==e?void 0:e.editor.selection))return u(bDe(f,c)),void d(u)}null===(n=a.current)||void 0===n||n.setStyle(f)}}var GTe={...pV,inner:function(e){const t=R(NU),n=t.provider(),{context:o}=n;return G(fV,{...e,value:n$(o,"letterSpacing"),onChange:e=>{KTe(t,e)}})},outer:function(e){const{name:t}=e,n=R(NU);return G(Qz,{...e,onClick:()=>{const e=n.provider(),{rootdispatch:o}=e;o(u7(t,!0))}})}},XTe=Object.freeze({__proto__:null,default:GTe,setStyle:KTe});const{useHotkey:JTe}=cj;const QTe={position:"relative",minHeight:80},eAe={padding:0,width:300,position:"absolute",right:0},tAe="search",nAe="replace",oAe={cn:{[tAe]:"查找",[nAe]:"替换"},en:{[tAe]:"Search",[nAe]:"Replace"}};var iAe={...xV,inner:function(e){var t;const n=R(NU),o=Z(null),[i,r]=$(0),l=n.stater.get(),s=null===(t=l.file)||void 0===t?void 0:t.currentPageId;F((()=>()=>{const e=n.provider(),{rootdispatch:t}=e;t(V9())}),[n]),H((()=>{var e;const t=null===(e=o.current)||void 0===e?void 0:e.getBoundingClientRect();if(!t)return;const n=t.right-window.innerWidth+12,i=Math.max(-t.width/2,n);r(i)}),[]),F((()=>{const e=()=>{var e;const t=null===(e=o.current)||void 0===e?void 0:e.getBoundingClientRect();if(!t)return;const n=t.right-window.innerWidth+12,l=Math.max(-t.width/2,i+n);l!==i&&r(l)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[i]);const c=wje(l.file);return G("div",{ref:o,style:{...eAe,right:i},children:G(CV,{...e,children:G(s2,{autoFocus:!0,style:{...QTe,minHeight:c?44:80},replace:!c,replaceable:!c,height:400,pageId:s,placeholder:oAe[e.lang][tAe],replaceholder:oAe[e.lang][nAe]})})})},outer:function(e){var t;const n=R(NU),{name:o}=e,i=_((()=>{const{modal:e,webdav:t}=n.stater.get();if((null==e?void 0:e.visible)||(null==t?void 0:t.visible))return;const i=n.provider(),{rootdispatch:r}=i;r(u7(o,!0),a4(YFe()))}),[o,n]);return JTe(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),i),G(yV,{...e,onClick:i})}};const rAe=Dz,{isDecorateNode:lAe}=ek;var sAe={...Iz,outer:function(e){return G(kz,{...e,active:e.active,onClick:()=>{}})}},cAe=Object.freeze({__proto__:null,default:sAe,isCodeNode:function(e){var t;return lAe(e)&&(null===(t=e.props)||void 0===t?void 0:t.type)===rAe}});async function aAe(e){const{modal:t,webdav:n,file:o}=e.stater.get();if((null==t?void 0:t.visible)||(null==n?void 0:n.visible))return;if(!(null==o?void 0:o.branch))return;const i=e.provider(),{rootdispatch:r}=i,l=rje(o.tree,o.branch);let s=!1;const c={callback:e=>{var t;e.id===(null===(t=o.branch)||void 0===t?void 0:t.id)?(e.active=!0,s=!0):delete e.active},deep:!0},a=await cK(l,e.worker,c);delete a.more;const u=!l.readonly,d=[a6(a,l.path),p6(l,u),Nq(l,void 0,!0)];s&&d.push(_3(o.branch)),r(...d),e.webdav.detect()}const{useHotkey:uAe}=cj;var dAe={...Bj,outer:function(e){var t;const n=R(NU),o=_((async()=>{aAe(n)}),[n]);return uAe(null===(t=e.hotkey)||void 0===t?void 0:t.call(e,e),o),G(Lj,{...e,onClick:o})}},fAe=Object.freeze({__proto__:null,default:dAe,todo:aAe});const hAe=300,pAe=300,vAe=5,gAe={WXLB:{1:"bulletedlist1",2:"bulletedlist2"},YXLB:{1:"numberedlist1",2:"numberedlist2"},RWLB:{1:"checklist1",2:"checklist2"},ZDLB:{1:"togglelist1",2:"togglelist2"},ZW:"text",BT:"title",DG:{1:"outline1",2:"outline2",3:"outline3",4:"outline4",5:"outline5",6:"outline6"},CT:"blod",XT:"italic",XHX:"strikeunderline",ZHX:"strikethrough",ZH:{12:"fontsize12",13:"fontsize13",16:"fontsize16",20:"fontsize20",28:"fontsize28"},TP:"image",BG:"sheet",LJ:"link",SL:"reference",YW:"quote",FGX:"separate",BQWZ:"emoji",HEI:{1:"black1",2:"black2",3:"black3",4:"black4",5:"black5"},LANHUI:{1:"bluegrey1",2:"bluegrey2",3:"bluegrey3",4:"bluegrey4",5:"bluegrey5"},ZONG:{1:"brown1",2:"brown2",3:"brown3",4:"brown4",5:"brown5"},HONG:{1:"red1",2:"red2",3:"red3",4:"red4",5:"red5"},CHENG:{1:"orange1",2:"orange2",3:"orange3",4:"orange4",5:"orange5"},HUANG:{1:"yellow1",2:"yellow2",3:"yellow3",4:"yellow4",5:"yellow5"},LV:{1:"green1",2:"green2",3:"green3",4:"green4",5:"green5"},LAN:{1:"blue1",2:"blue2",3:"blue3",4:"blue4",5:"blue5"},DIANLAN:{1:"indigo1",2:"indigo2",3:"indigo3",4:"indigo4",5:"indigo5"},ZI:{1:"purple1",2:"purple2",3:"purple3",4:"purple4",5:"purple5"}},mAe={position:"relative",zIndex:1e6},yAe={width:pAe,position:"absolute",top:"100%",display:"inline-block"},bAe={position:"absolute",top:`calc(100% + ${vAe}px)`,width:pAe,height:hAe,boxShadow:Nf,borderRadius:4,overflow:"hidden"},CAe={height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",flex:1},wAe={display:"flex",alignItems:"center"},xAe={marginRight:2,color:Df},SAe={width:15,height:15,marginRight:8,marginBottom:1,display:"flex",alignItems:"center",justifyContent:"center"},EAe={width:25,height:18,borderRadius:3,backgroundColor:bf,marginRight:5,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},kAe={position:"relative",height:15},DAe={position:"absolute",top:0,right:-6,display:"flex"},IAe={position:"absolute",bottom:.5,right:-6,display:"flex"},NAe={position:"absolute",left:-6,top:5,display:"flex"},LAe={width:3.5,height:3.5,borderRadius:1,backgroundColor:Lf,opacity:.8,position:"relative",top:1.5},BAe={fontSize:12,transform:"scale(0.66)",fontWeight:900,color:Lf,opacity:.9,transformOrigin:"top right",position:"relative",top:-1,left:-.5},TAe={width:2,height:2,borderRadius:1,borderColor:Lf,borderWidth:1,borderStyle:"solid",position:"relative",top:2},AAe={fontSize:12,transform:"scale(0.7)",height:7,fontWeight:900,color:Lf,opacity:.9,position:"relative",left:1.5,bottom:4},MAe={opacity:.8},OAe={backgroundColor:mf},RAe={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,paddingBottom:30,fontSize:14,fontWeight:Bf,color:Df,backgroundColor:mf},{isNode:PAe,isMetaNode:FAe,isCollapsed:HAe,getPathFromKey:_Ae,getEditNodeByPath:jAe,createBlockNode:WAe}=ek,{recursiveTree:zAe,recursiveTreeSource:VAe}=xT;function $Ae(e){return PAe(e)&&e.type===rRe}function ZAe(e){if(FAe(e)){return $Ae(e.children[0])}return!1}function UAe(){return{type:rRe,props:{uid:pRe(!0)},children:[]}}function qAe(e){return{tree:e,scrollHeight:hje(e),scrollTop:0,clientWidth:pAe,clientHeight:hAe,scrollOffset:{top:0,bottom:0},renderStart:{path:[0],index:0}}}function YAe(e){const t=[];return VAe(e,(e=>{var n,o;const i=Js(e);i&&t.push({...i,children:[],path:ec(e).map((e=>e.id)),hotkeys:null!==(o=null===(n=i.title)||void 0===n?void 0:n.hotkeys)&&void 0!==o?o:[]})})),t}function KAe(e,t){const n={};zAe(e,(e=>{n[e.id]={...e,active:!1,children:[]}})),t.forEach((e=>{var t;const{matches:o,score:i,item:{path:[...r],id:l}}=e;let s=n[l];for(;r.length;){const e=r.pop(),c=n[e];c.children=null!==(t=c.children)&&void 0!==t?t:[];const a=c.children.find((e=>e.id===s.id));if(a){const e=c.children.indexOf(a);c.children[e]={...a,title:{...a.title,matches:o,score:i}}}else s.id===l?c.children.push({...s,title:{...s.title,matches:o,score:i}}):c.children.push({...s,title:{...s.title}});s={...c,title:{...c.title}}}}));const o=e.map((e=>{var t;const o=n[e.id];return(null===(t=o.children)||void 0===t?void 0:t.length)?{...o,children:o.children.map((e=>{var t,n,o;if(!e.children)return e;const i=null===(t=e.title)||void 0===t?void 0:t.icon,r=[{...e,title:{...e.title,icon:void 0},children:[]},...e.children].filter((e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.score})).sort(((e,t)=>{var n,o,i,r;return(null!==(o=null===(n=e.title)||void 0===n?void 0:n.score)&&void 0!==o?o:0)-(null!==(r=null===(i=t.title)||void 0===i?void 0:i.score)&&void 0!==r?r:0)}));return{...r[0],expand:!1,title:{...r[0].title,icon:i},children:[...null!==(o=null===(n=r[0])||void 0===n?void 0:n.children)&&void 0!==o?o:[],...r.slice(1)]}})).sort(((e,t)=>{var n,o,i,r;return(null!==(o=null===(n=e.title)||void 0===n?void 0:n.score)&&void 0!==o?o:0)-(null!==(r=null===(i=t.title)||void 0===i?void 0:i.score)&&void 0!==r?r:0)}))}:null})).filter((e=>!!e)).sort(((e,t)=>{var n,o,i,r;return(null!==(o=null===(n=e.children[0].title)||void 0===n?void 0:n.score)&&void 0!==o?o:0)-(null!==(r=null===(i=t.children[0].title)||void 0===i?void 0:i.score)&&void 0!==r?r:0)}));return o.length?(o[0].children[0].active=!0,o[0].children[0].expand=!0,o):o}function GAe(e,t){const{node:n,selection:o}=t.editor;if(!o||!HAe(o))return null;const i=_Ae(e.kid),r=jAe(n,ec(i));if(!ZAe(r))return null;const l=jAe(n,ec(i,2)),s=l.children.indexOf(r);if(-1===s)return null;const c=l.children.slice(s+1);return OWe(WAe(c)).slice(1)}function XAe(e,t){var n,o;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){if(e[i].id!==t[i].id)return!1;if(!Ec(null===(n=e[i].title)||void 0===n?void 0:n.matches,null===(o=t[i].title)||void 0===o?void 0:o.matches))return!1;const r=e[i].children,l=t[i].children;if(!r||!l)return!1;if(!XAe(r,l))return!1}return!0}function JAe(e){const t=null==e?void 0:e.value;return t===gAe.ZW||t===gAe.BT||t===gAe.DG[1]||t===gAe.DG[2]||t===gAe.DG[3]||t===gAe.DG[4]||t===gAe.DG[5]||t===gAe.DG[6]}function QAe(e){const t=null==e?void 0:e.value,n=null==e?void 0:e.name;return t===gAe.CT||t===gAe.XT||t===gAe.XHX||t===gAe.ZHX||t===gAe.ZH[12]||t===gAe.ZH[13]||t===gAe.ZH[16]||t===gAe.ZH[20]||t===gAe.ZH[28]||n===uLe.name||n===hLe.name}function eMe(e){const t=null==e?void 0:e.value;return t===gAe.TP||t===gAe.BG||t===gAe.LJ||t===gAe.SL||t===gAe.YW||t===gAe.FGX||t===gAe.BQWZ}function tMe(e){const t=null==e?void 0:e.value;return t===gAe.BT?aae.H:t===gAe.DG[1]?aae.H1:t===gAe.DG[2]?aae.H2:t===gAe.DG[3]?aae.H3:t===gAe.DG[4]?aae.H4:t===gAe.DG[5]?aae.H5:t===gAe.DG[6]?aae.H6:aae.H0}function nMe(e){let t=null;const n=null==e?void 0:e.value;return n===gAe.CT?t=UNe.name:n===gAe.XT?t=QNe.name:n===gAe.XHX?t=oLe.name:n===gAe.ZHX?t=sLe.name:n===gAe.ZH[12]||n===gAe.ZH[13]||n===gAe.ZH[16]||n===gAe.ZH[20]||n===gAe.ZH[28]?t=GNe.name:(null==e?void 0:e.name)===uLe.name?t=uLe.name:(null==e?void 0:e.name)===hLe.name&&(t=hLe.name),t}const{isNode:oMe,insertNode:iMe,createInlineNode:rMe,createMetaInlineNode:lMe,createDecorateBlockNode:sMe,traverseNode:cMe,sliceBlockPath:aMe,decorateBlockNode:uMe,getEditNodeByPath:dMe,getPrevEditNodePath:fMe,setSelectionReflow:hMe,minusPointOnceByPath:pMe,iterateBlockNode:vMe,getPathFromKey:gMe}=ek,mMe=()=>e=>{var t;const n=null===(t=e.selection)||void 0===t?void 0:t.focus.path;if(!n)return e;const o=aMe(e.node,n),i=dMe(e.node,o);if(oMe(i)){let t=!1;if(cMe(i,(e=>{if($Ae(e))return t=!0,!0})),t)return e}const r=rMe([lMe([UAe()])]);return e=iMe(r)(e)},yMe=()=>e=>{let t=null;return cMe(e.node,(n=>{if(ZAe(n)){const o=gMe(n.key),i=dMe(e.node,ec(o)),r=i.children.indexOf(n);return i.children.splice(r,1),t=o,!0}})),t&&(e=pMe(t,"anchor",!1)(e),e=pMe(t,"focus",!1)(e)),e},bMe=()=>e=>{let t=null;return cMe(e.node,(n=>{if(ZAe(n)){const o=gMe(n.key),i=dMe(e.node,ec(o)),r=i.children.indexOf(n),l=i.children.length;return i.children.splice(r,l-r,""),t=o,!0}})),t&&(e.selection={focus:{path:[...t],offset:0},anchor:{path:[...t],offset:0}}),e},CMe=e=>t=>{var n;const o=null===(n=t.selection)||void 0===n?void 0:n.focus.path;if(!o)return t;const i=dMe(t.node,o);if(f(i)&&i.length>0)return t;const r=fMe(t.node,o);return ZAe(dMe(t.node,r))&&(t=yMe()(t),null==e||e()),t},wMe=(e,t)=>n=>{if(!t)return n;if(t.value===gAe.WXLB[1]){const t=Aye.ONE;n=xMe(e,t,vBe)(n)}else if(t.value===gAe.WXLB[2]){const t=Aye.TWO;n=xMe(e,t,vBe)(n)}else if(t.value===gAe.YXLB[1]){const t=Aye.ONE;n=xMe(e,t,YBe)(n)}else if(t.value===gAe.YXLB[1]){const t=Aye.TWO;n=xMe(e,t,YBe)(n)}else if(t.value===gAe.RWLB[1]){const t=Aye.ONE;n=xMe(e,t,oTe)(n),n=PTe()(n)}else if(t.value===gAe.RWLB[2]){const t=Aye.TWO;n=xMe(e,t,oTe)(n),n=PTe()(n)}else if(t.value===gAe.ZDLB[1]){const t=Aye.ONE;n=rEe(e,t,"inner")(n)}else if(t.value===gAe.ZDLB[2]){const t=Aye.TWO;n=rEe(e,t,"inner")(n)}return n},xMe=(e,t,n)=>o=>{const{selectionDecorate:i,style:r}=e.editor;if((null==i?void 0:i[n])!==t){const e=sMe({type:n,subclass:t});o=uMe(e,!0)(o)}else o=uMe()(o);return oae(o=hMe(!0)(o)).forEach((t=>{o=vMe((t=>{Iye(o,t,r),iae(e,uae)&&Eme(o,o.node,r)}),t)(o)})),o};function SMe(e,t,n,o,i,r){const l=tMe(r),s=async e=>{var r;let l={};if(i.root){const e=await Xve(i,t);l=null!==(r=e.editor)&&void 0!==r?r:{},n(rq(e))}const s=[],c=[bMe(),wme(i,e,l,s)];Lme(i,o,c,n,s)};i.root?ege(i,e,n,(()=>s(l))):s(l)}function EMe(e,t,n,o,i){var r,l,s,c,a,u,d,h,p,v,g,m,y,b,C;const w=nMe(i);if(null!==w)if(w!==GNe.name){if(w!==uLe.name){if(w!==hLe.name){if(w===UNe.name){const e={fontWeight:o$({name:w},o)?Bf:"bold"};return null===(h=n.current)||void 0===h||h.commit(bMe()),void(null===(p=n.current)||void 0===p||p.setStyle(e))}if(w===QNe.name){const e={fontStyle:o$({name:w},o)?"normal":"italic"};return null===(v=n.current)||void 0===v||v.commit(bMe()),void(null===(g=n.current)||void 0===g||g.setStyle(e))}if(w===oLe.name){const e={underline:!o$({name:w},o),lineThrough:null};return null===(m=n.current)||void 0===m||m.commit(bMe()),void(null===(y=n.current)||void 0===y||y.setProps(e,t$))}if(w===sLe.name){const e={lineThrough:!o$({name:w},o),underline:null};return null===(b=n.current)||void 0===b||b.commit(bMe()),void(null===(C=n.current)||void 0===C||C.setProps(e,t$))}}else if(f(null==i?void 0:i.data)){const e={backgroundColor:i.data};null===(u=n.current)||void 0===u||u.commit(bMe()),null===(d=n.current)||void 0===d||d.setStyle(e)}}else if(f(null==i?void 0:i.data)){const e={color:i.data};null===(c=n.current)||void 0===c||c.commit(bMe()),null===(a=n.current)||void 0===a||a.setStyle(e)}}else if(null==i?void 0:i.data){const e={fontSize:i.data};null===(r=n.current)||void 0===r||r.commit(bMe()),null===(l=n.current)||void 0===l||l.setStyle(e),null===(s=n.current)||void 0===s||s.commit(Nye(o))}}function kMe(e,t,n,o,i,r,l){var s,c,a,u,d,f,h,p,v;const g=null==l?void 0:l.value;if(g===gAe.TP)return null===(c=null===(s=i.current)||void 0===s?void 0:s.image)||void 0===c||c.click(),void(null===(a=o.current)||void 0===a||a.commit(bMe()));if(g!==gAe.BG){if(g===gAe.LJ){const i=r.lang,l=e.stater.get();return null===(d=o.current)||void 0===d||d.commit([bMe(),Rue(t,l,n,i)]),void t(s3())}if(g!==gAe.SL)if(g!==gAe.YW)if(g!==gAe.FGX)g===gAe.BQWZ&&(null===(v=o.current)||void 0===v||v.commit([bMe(),mhe()]));else{const t=e.stater.get().editor.style;null===(p=o.current)||void 0===p||p.commit([bMe(),_fe(t)])}else{const{selectionDecorate:e}=r.editor,t=null==e?void 0:e[cfe];null===(h=o.current)||void 0===h||h.commit([bMe(),yfe(t)])}else{const i=r.lang,l=e.stater.get();null===(f=o.current)||void 0===f||f.commit([bMe(),tpe(t,l,n,i)])}}else null===(u=o.current)||void 0===u||u.commit([bMe(),HDe(3,3,r.root)])}const{toggleBranchArrow:DMe,syncScrollHeight:IMe,recursiveTree:NMe,recursiveTreeSource:LMe,setEditPending:BMe,calcReflowIndex:TMe,resetTreeState:AMe}=xT,MMe=e=>t=>(t.menu=e,t),OMe=e=>t=>{var n,o;t.menu.tree=e,t.menu=IMe()(t.menu),t.menu=AMe()(t.menu);const i=null===(o=null===(n=e[0])||void 0===n?void 0:n.children)||void 0===o?void 0:o[0];return(null==i?void 0:i.active)&&(t=RMe(i)(t)),t},RMe=e=>t=>(t.branch=e,t),PMe=e=>t=>(NMe(t.menu.tree,(t=>{(null==e?void 0:e.id)===t.id?t.active=!0:t.active=!1})),t.menu=BMe(!0)(t.menu),t),FMe=(e,t)=>n=>{var o,i;return LMe(n.menu.tree,(o=>{var i;const r=Js(o);if(!r)return;const l=ec(o);if((null==e?void 0:e.id)===r.id){for(const e of l)!1===e.expand&&(null===(i=e.title)||void 0===i?void 0:i.toggle)&&(n.menu=DMe(e,t,!0)(n.menu));r.active=!0}else r.active=!1})),!1===e.expand&&(null===(o=e.title)||void 0===o?void 0:o.toggle)&&(null===(i=e.children)||void 0===i?void 0:i.length)&&(n.menu=DMe(e,t,!0)(n.menu),n.menu=IMe()(n.menu)),n.menu.scrollOffset&&(n.menu.scrollOffset.bottom=-n.menu.clientHeight),n.menu=BMe(!0)(n.menu),n},HMe=e=>t=>{var n,o;let i=!1,r=null;if(LMe(t.menu.tree,(e=>{var n,o,l;if(i)return!0;let s=Js(e);if(!s)return;const c=ec(e);if(s.active){i=!0,s.active=!1;const{expand:e,children:a,type:u}=s;if("outline"!==u)return!0;if(e&&(null==a?void 0:a.length))return r=a[0],r.active=!0,!0;for(;c.length;){const e=c.pop();if(!(null===(n=e.children)||void 0===n?void 0:n.length))break;const i=e.children.indexOf(s);if(-1===i)break;if(i===e.children.length-1){if("outline"===e.type){s=e;continue}let n=t.menu.tree.indexOf(e);if(-1===n)break;const i=t.menu.tree.length;for(;n<i;){if(n===i-1){r=null===(o=t.menu.tree[0].children)||void 0===o?void 0:o[0],"outline"===(null==r?void 0:r.type)&&(r.active=!0);break}if(r=null===(l=t.menu.tree[n+1].children)||void 0===l?void 0:l[0],"outline"===(null==r?void 0:r.type)){r.active=!0;break}n++}break}if(r=e.children[i+1],"outline"===(null==r?void 0:r.type)){r.active=!0;break}}return!0}})),null===r&&(r=null===(n=t.menu.tree[0].children)||void 0===n?void 0:n[0],r&&(r.active=!0)),r){t=RMe(r)(t);const n=Cd(r),i=r!==(null===(o=t.menu.tree[0].children)||void 0===o?void 0:o[0]);requestAnimationFrame((()=>{var t;n&&(null===(t=e.current)||void 0===t||t.scrollBranchIntoView(n,i))}))}return t.menu=BMe(!0)(t.menu),t},_Me=e=>t=>{var n,o;let i=!1,r=null;if(LMe(t.menu.tree,(e=>{var n,o,l,s;if(i)return!0;let c=Js(e);if(!c)return;const a=ec(e);if(c.active){i=!0,c.active=!1;const{type:e}=c;if("outline"!==e)return!0;for(;a.length;){const e=a.pop();if(!(null===(n=e.children)||void 0===n?void 0:n.length))break;const i=e.children.indexOf(c);if(-1===i)break;if(0===i){if("outline"===e.type){r=e,r.active=!0;break}let n=t.menu.tree.indexOf(e);if(-1===n)break;for(;n>=0;){if(0===n){for(r=Js(t.menu.tree);(null==r?void 0:r.expand)&&(null===(o=r.children)||void 0===o?void 0:o.length);)r=Js(null==r?void 0:r.children);"outline"===(null==r?void 0:r.type)&&(r.active=!0);break}for(r=t.menu.tree[n-1];(null==r?void 0:r.expand)&&(null===(l=r.children)||void 0===l?void 0:l.length);)r=Js(null==r?void 0:r.children);if("outline"===(null==r?void 0:r.type)){r.active=!0;break}n--}break}for(r=e.children[i-1];(null==r?void 0:r.expand)&&(null===(s=r.children)||void 0===s?void 0:s.length);)r=Js(null==r?void 0:r.children);if("outline"===(null==r?void 0:r.type)){r.active=!0;break}}return!0}})),null===r&&(r=null===(n=t.menu.tree[0].children)||void 0===n?void 0:n[0],r&&(r.active=!0)),r){t=RMe(r)(t);const n=Cd(r);let i=Js(t.menu.tree);for(;(null==i?void 0:i.expand)&&(null===(o=i.children)||void 0===o?void 0:o.length);)i=Js(null==i?void 0:i.children);const l=r!==i;requestAnimationFrame((()=>{var t;n&&(null===(t=e.current)||void 0===t||t.scrollBranchIntoView(n,l))}))}return t.menu=BMe(!0)(t.menu),t},jMe=e=>t=>{var n,o,i;const{branch:r}=t;if(!r)return t;t=VMe(r)(t),t=FMe(r)(t);if(!Js(r.children))return t;let l=0,s=!1;NMe(t.menu.tree,(e=>!!s||(l++,e.id===r.id?(s=!0,!0):!1!==e.expand&&void 0)));const{scrollTop:c,clientHeight:a,scrollOffset:u}=t.menu,d=l*xT.BRANCH_HEIGHT,f=d+(null!==(o=null===(n=r.children)||void 0===n?void 0:n.length)&&void 0!==o?o:0)*xT.BRANCH_HEIGHT,h=d-(c+(null!==(i=null==u?void 0:u.top)&&void 0!==i?i:0)),p=f-c-a,v=Math.min(h,p);return v<=0||requestAnimationFrame((()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView(v,!0)})),t},WMe=e=>e=>{const{branch:t}=e;return t?(e=VMe(t)(e),e=FMe(t)(e)):e},zMe=(e,t)=>n=>{var o,i;let r=0,l=null!==(i=null===(o=n.menu.scrollOffset)||void 0===o?void 0:o.bottom)&&void 0!==i?i:0;return NMe(n.menu.tree,(o=>{var i,s;if(e.id===o.id&&(null===(i=o.children)||void 0===i?void 0:i.length)){if(!o.title)return!0;const e=!o.title.open;o.title.open=e,NMe(o.children,(t=>{var n;(null===(n=t.title)||void 0===n?void 0:n.toggle)&&(t.title.open=e)}));for(const i of o.children){const{title:o}=i;(null==o?void 0:o.toggle)&&(null===(s=i.children)||void 0===s?void 0:s.length)&&(r+=i.children.length,n.menu=DMe(i,t,e)(n.menu))}const i=xT.BRANCH_HEIGHT*r;return e?l-=i:l+=i,!0}})),l>0&&(l=0),n.menu.scrollOffset&&(n.menu.scrollOffset.bottom=l),n},VMe=(e,t)=>n=>{var o,i;let r=!1,l=!1,s=0,c=0,a=null!==(i=null===(o=n.menu.scrollOffset)||void 0===o?void 0:o.bottom)&&void 0!==i?i:0;NMe(n.menu.tree,(o=>{const{title:i,expand:a,children:u,active:d}=o;if(r&&a&&(null==i?void 0:i.toggle)&&!i.open&&(null==u?void 0:u.length)&&!d){let e=!1;if(NMe(u,(t=>{if(t.active)return e=!0,!0})),e)return!1;n.menu=DMe(o,t,!1)(n.menu),c+=u.length,NMe(u,(e=>{var t;e.expand&&(null===(t=e.children)||void 0===t?void 0:t.length)&&(e.expand=!1,c+=e.children.length)})),l=!0}if(r||s++,e.id===o.id&&(r=!0),!1===a)return!1})),a-=xT.BRANCH_HEIGHT*c;const u=TMe(n.menu),d=xT.BRANCH_HEIGHT*(s-u);return a-=n.menu.clientHeight-d,a>0&&(a=0),n.menu.scrollOffset&&(n.menu.scrollOffset.bottom=a),l&&(n.menu=IMe()(n.menu)),n.menu=BMe(!0)(n.menu),n},{isMoveBackward:$Me,isMoveForward:ZMe,isMoveUp:UMe,isMoveDown:qMe,isDeleteBackward:YMe,isSplitBlock:KMe,isShiftSplitBlock:GMe}=ek;function XMe(e,t,n,o,i,r,l){const s=R(NU),c=R(LU),a=R(EU),u=R(kU),d=R(TU),f=R(MU),h=R(HU),p=Dd(e),v=Dd(t),g=Dd(f),m=Nd("keydown"),y=Nd("keyup"),b=Nd("pointerdown"),C=Nd("pointerdown"),w=o[2];return F((()=>(window.addEventListener("keydown",m.listener,{capture:!0}),window.addEventListener("keyup",y.listener,{capture:!0}),window.addEventListener("pointerdown",b.listener,{capture:!0}),()=>{window.removeEventListener("keydown",m.listener,{capture:!0}),window.removeEventListener("keyup",y.listener,{capture:!0}),window.removeEventListener("pointerdown",b.listener,{capture:!0})})),[m,y,b]),F((()=>{let e=!1;const t=b.subscribe((()=>{requestAnimationFrame((()=>{var t;e?e=!1:(null===(t=d.current)||void 0===t||t.commit(yMe()),w())}))})),n=C.subscribe((t=>{t.stopPropagation(),e=!0}));return()=>{t.unsubscribe(),n.unsubscribe()}}),[b,C,d,w]),F((()=>{const e=[];let t="";const o=m.subscribe((o=>{setTimeout((()=>{var i,r,f,m,y,b,C,x,S,E,k,D,I,N;let L=!0;const{tree:B,branch:T,menu:A}=v.current;if($Me(o)||ZMe(o))null===(i=d.current)||void 0===i||i.commit(yMe()),w(),L=!1;else if(KMe(o)||GMe(o)){if("outline"===(null==T?void 0:T.type)&&A.tree.length){const e=T.payload;return JAe(e)?SMe(s,c,a,d,g.current,e):QAe(e)?EMe(0,0,d,g.current,e):eMe(e)?kMe(s,a,u,d,h,g.current,e):null===(r=d.current)||void 0===r||r.commit([bMe(),wMe(g.current,e)]),void w()}null===(f=d.current)||void 0===f||f.commit(yMe()),w(),L=!1}else YMe(o)?null===(m=d.current)||void 0===m||m.commit(CMe((()=>{w(),L=!1}))):UMe(o)||qMe(o)?L=!1:"escape"===o.key.toLowerCase()&&(null===(y=d.current)||void 0===y||y.commit(yMe()),w(),L=!1);if(!L)return;const M=GAe(p.current,g.current);if(null===M||M===t)return;if(t=M,!M)return n(OMe(B)),void(e.length=0);let O=null===(b=l.current)||void 0===b?void 0:b[1];if(M.length<8){const e=Math.max(1,M.length-1);O=null===(C=l.current)||void 0===C?void 0:C[e]}else O=null===(x=l.current)||void 0===x?void 0:x[7];const R=null===(S=null==O?void 0:O.search)||void 0===S?void 0:S.call(O,M);if(!R)return null===(E=d.current)||void 0===E||E.commit(yMe()),void w();const P=KAe(B,R);return e.length>=3&&e.shift(),e.push(P),3===e.length&&XAe(e[0],e[1])&&XAe(e[1],e[2])?(null===(k=d.current)||void 0===k||k.commit(yMe()),void w()):0===(null===(D=e[e.length-1])||void 0===D?void 0:D.length)&&0===(null===(I=e[e.length-2])||void 0===I?void 0:I.length)?(null===(N=d.current)||void 0===N||N.commit(yMe()),void w()):void n(OMe(P))}),Mf?0:16)}));return()=>{o.unsubscribe()}}),[m,d,h,g,p,v,l,i,r,w,n,s,c,a,u]),F((()=>{const e=m.subscribe((e=>{r.current=!0,UMe(e)?n(_Me(i)):qMe(e)&&n(HMe(i))})),t=y.pipe((o=y.pipe(Su(200)),ka((function(e,t){var n=[];return e.subscribe(Da(t,(function(e){return n.push(e)}),(function(){t.next(n),t.complete()}))),Ja(o).subscribe(Da(t,(function(){var e=n;n=[],t.next(e)}),ha)),function(){n=null}})))).subscribe((e=>{const t=Js(e);UMe(t)?n(WMe()):qMe(t)&&n(jMe(i))}));var o;return()=>{e.unsubscribe(),t.unsubscribe()}}),[m,y,r,i,n]),{slash:Ld([C])}}function JMe(e){return Array.isArray?Array.isArray(e):"[object Array]"===sOe(e)}const QMe=1/0;function eOe(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-QMe?"-0":t}(e)}function tOe(e){return"string"==typeof e}function nOe(e){return"number"==typeof e}function oOe(e){return!0===e||!1===e||function(e){return iOe(e)&&null!==e}(e)&&"[object Boolean]"==sOe(e)}function iOe(e){return"object"==typeof e}function rOe(e){return null!=e}function lOe(e){return!e.trim().length}function sOe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const cOe=e=>`Missing ${e} property in key`,aOe=e=>`Property 'weight' in key '${e}' must be a positive integer`,uOe=Object.prototype.hasOwnProperty;class dOe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=fOe(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function fOe(e){let t=null,n=null,o=null,i=1,r=null;if(tOe(e)||JMe(e))o=e,t=hOe(e),n=pOe(e);else{if(!uOe.call(e,"name"))throw new Error(cOe("name"));const l=e.name;if(o=l,uOe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(aOe(l));t=hOe(l),n=pOe(l),r=e.getFn}return{path:t,id:n,weight:i,src:o,getFn:r}}function hOe(e){return JMe(e)?e:e.split(".")}function pOe(e){return JMe(e)?e.join("."):e}const vOe={useExtendedSearch:!1,getFn:function(e,t){let n=[],o=!1;const i=(e,t,r)=>{if(rOe(e))if(t[r]){const l=e[t[r]];if(!rOe(l))return;if(r===t.length-1&&(tOe(l)||nOe(l)||oOe(l)))n.push(eOe(l));else if(JMe(l)){o=!0;for(let e=0,n=l.length;e<n;e+=1)i(l[e],t,r+1)}else t.length&&i(l,t,r+1)}else n.push(e)};return i(e,tOe(t)?t.split("."):t,0),o?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var gOe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...vOe};const mOe=/[^ ]+/g;class yOe{constructor({getFn:e=gOe.getFn,fieldNormWeight:t=gOe.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,o=Math.pow(10,t);return{get(t){const i=t.match(mOe).length;if(n.has(i))return n.get(i);const r=1/Math.pow(i,.5*e),l=parseFloat(Math.round(r*o)/o);return n.set(i,l),l},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,tOe(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();tOe(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!rOe(e)||lOe(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,o)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(rOe(i))if(JMe(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:o}=t.pop();if(rOe(o))if(tOe(o)&&!lOe(o)){let t={v:o,i:n,n:this.norm.get(o)};e.push(t)}else JMe(o)&&o.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[o]=e}else if(tOe(i)&&!lOe(i)){let e={v:i,n:this.norm.get(i)};n.$[o]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function bOe(e,t,{getFn:n=gOe.getFn,fieldNormWeight:o=gOe.fieldNormWeight}={}){const i=new yOe({getFn:n,fieldNormWeight:o});return i.setKeys(e.map(fOe)),i.setSources(t),i.create(),i}function COe(e,{errors:t=0,currentLocation:n=0,expectedLocation:o=0,distance:i=gOe.distance,ignoreLocation:r=gOe.ignoreLocation}={}){const l=t/e.length;if(r)return l;const s=Math.abs(o-n);return i?l+s/i:s?1:l}const wOe=32;function xOe(e,t,n,{location:o=gOe.location,distance:i=gOe.distance,threshold:r=gOe.threshold,findAllMatches:l=gOe.findAllMatches,minMatchCharLength:s=gOe.minMatchCharLength,includeMatches:c=gOe.includeMatches,ignoreLocation:a=gOe.ignoreLocation}={}){if(t.length>wOe)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(wOe));const u=t.length,d=e.length,f=Math.max(0,Math.min(o,d));let h=r,p=f;const v=s>1||c,g=v?Array(d):[];let m;for(;(m=e.indexOf(t,p))>-1;){let e=COe(t,{currentLocation:m,expectedLocation:f,distance:i,ignoreLocation:a});if(h=Math.min(e,h),p=m+u,v){let e=0;for(;e<u;)g[m+e]=1,e+=1}}p=-1;let y=[],b=1,C=u+d;const w=1<<u-1;for(let o=0;o<u;o+=1){let r=0,s=C;for(;r<s;){COe(t,{errors:o,currentLocation:f+s,expectedLocation:f,distance:i,ignoreLocation:a})<=h?r=s:C=s,s=Math.floor((C-r)/2+r)}C=s;let c=Math.max(1,f-s+1),m=l?d:Math.min(f+s,d)+u,x=Array(m+2);x[m+1]=(1<<o)-1;for(let r=m;r>=c;r-=1){let l=r-1,s=n[e.charAt(l)];if(v&&(g[l]=+!!s),x[r]=(x[r+1]<<1|1)&s,o&&(x[r]|=(y[r+1]|y[r])<<1|1|y[r+1]),x[r]&w&&(b=COe(t,{errors:o,currentLocation:l,expectedLocation:f,distance:i,ignoreLocation:a}),b<=h)){if(h=b,p=l,p<=f)break;c=Math.max(1,2*f-p)}}if(COe(t,{errors:o+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:a})>h)break;y=x}const x={isMatch:p>=0,score:Math.max(.001,b)};if(v){const e=function(e=[],t=gOe.minMatchCharLength){let n=[],o=-1,i=-1,r=0;for(let l=e.length;r<l;r+=1){let l=e[r];l&&-1===o?o=r:l||-1===o||(i=r-1,i-o+1>=t&&n.push([o,i]),o=-1)}return e[r-1]&&r-o>=t&&n.push([o,r-1]),n}(g,s);e.length?c&&(x.indices=e):x.isMatch=!1}return x}function SOe(e){let t={};for(let n=0,o=e.length;n<o;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<o-n-1}return t}class EOe{constructor(e,{location:t=gOe.location,threshold:n=gOe.threshold,distance:o=gOe.distance,includeMatches:i=gOe.includeMatches,findAllMatches:r=gOe.findAllMatches,minMatchCharLength:l=gOe.minMatchCharLength,isCaseSensitive:s=gOe.isCaseSensitive,ignoreLocation:c=gOe.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:o,includeMatches:i,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:s,ignoreLocation:c},this.pattern=s?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(e,t)=>{this.chunks.push({pattern:e,alphabet:SOe(e),startIndex:t})},u=this.pattern.length;if(u>wOe){let e=0;const t=u%wOe,n=u-t;for(;e<n;)a(this.pattern.substr(e,wOe),e),e+=wOe;if(t){const e=u-wOe;a(this.pattern.substr(e),e)}}else a(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:i,threshold:r,findAllMatches:l,minMatchCharLength:s,ignoreLocation:c}=this.options;let a=[],u=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:f,startIndex:h})=>{const{isMatch:p,score:v,indices:g}=xOe(e,t,f,{location:o+h,distance:i,threshold:r,findAllMatches:l,minMatchCharLength:s,includeMatches:n,ignoreLocation:c});p&&(d=!0),u+=v,p&&g&&(a=[...a,...g])}));let f={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(f.indices=a),f}}class kOe{constructor(e){this.pattern=e}static isMultiMatch(e){return DOe(e,this.multiRegex)}static isSingleMatch(e){return DOe(e,this.singleRegex)}search(){}}function DOe(e,t){const n=e.match(t);return n?n[1]:null}class IOe extends kOe{constructor(e,{location:t=gOe.location,threshold:n=gOe.threshold,distance:o=gOe.distance,includeMatches:i=gOe.includeMatches,findAllMatches:r=gOe.findAllMatches,minMatchCharLength:l=gOe.minMatchCharLength,isCaseSensitive:s=gOe.isCaseSensitive,ignoreLocation:c=gOe.ignoreLocation}={}){super(e),this._bitapSearch=new EOe(e,{location:t,threshold:n,distance:o,includeMatches:i,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:s,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class NOe extends kOe{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const o=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,o.push([t,n-1]);const r=!!o.length;return{isMatch:r,score:r?0:1,indices:o}}}const LOe=[class extends kOe{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},NOe,class extends kOe{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends kOe{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends kOe{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends kOe{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends kOe{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},IOe],BOe=LOe.length,TOe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const AOe=new Set([IOe.type,NOe.type]);class MOe{constructor(e,{isCaseSensitive:t=gOe.isCaseSensitive,includeMatches:n=gOe.includeMatches,minMatchCharLength:o=gOe.minMatchCharLength,ignoreLocation:i=gOe.ignoreLocation,findAllMatches:r=gOe.findAllMatches,location:l=gOe.location,threshold:s=gOe.threshold,distance:c=gOe.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:o,findAllMatches:r,ignoreLocation:i,location:l,threshold:s,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(TOe).filter((e=>e&&!!e.trim())),o=[];for(let e=0,i=n.length;e<i;e+=1){const i=n[e];let r=!1,l=-1;for(;!r&&++l<BOe;){const e=LOe[l];let n=e.isMultiMatch(i);n&&(o.push(new e(n,t)),r=!0)}if(!r)for(l=-1;++l<BOe;){const e=LOe[l];let n=e.isSingleMatch(i);if(n){o.push(new e(n,t));break}}}return o}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let i=0,r=[],l=0;for(let o=0,s=t.length;o<s;o+=1){const s=t[o];r.length=0,i=0;for(let t=0,o=s.length;t<o;t+=1){const o=s[t],{isMatch:c,indices:a,score:u}=o.search(e);if(!c){l=0,i=0,r.length=0;break}if(i+=1,l+=u,n){const e=o.constructor.type;AOe.has(e)?r=[...r,...a]:r.push(a)}}if(i){let e={isMatch:!0,score:l/i};return n&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const OOe=[];function ROe(e,t){for(let n=0,o=OOe.length;n<o;n+=1){let o=OOe[n];if(o.condition(e,t))return new o(e,t)}return new EOe(e,t)}const POe="$and",FOe="$or",HOe="$path",_Oe="$val",jOe=e=>!(!e[POe]&&!e[FOe]),WOe=e=>({[POe]:Object.keys(e).map((t=>({[t]:e[t]})))});function zOe(e,t,{auto:n=!0}={}){const o=e=>{let i=Object.keys(e);const r=(e=>!!e[HOe])(e);if(!r&&i.length>1&&!jOe(e))return o(WOe(e));if((e=>!JMe(e)&&iOe(e)&&!jOe(e))(e)){const o=r?e[HOe]:i[0],l=r?e[_Oe]:e[o];if(!tOe(l))throw new Error((e=>`Invalid value for key ${e}`)(o));const s={keyId:pOe(o),pattern:l};return n&&(s.searcher=ROe(l,t)),s}let l={children:[],operator:i[0]};return i.forEach((t=>{const n=e[t];JMe(n)&&n.forEach((e=>{l.children.push(o(e))}))})),l};return jOe(e)||(e=WOe(e)),o(e)}function VOe(e,t){const n=e.matches;t.matches=[],rOe(n)&&n.forEach((e=>{if(!rOe(e.indices)||!e.indices.length)return;const{indices:n,value:o}=e;let i={indices:n,value:o};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function $Oe(e,t){t.score=e.score}class ZOe{constructor(e,t={},n){this.options={...gOe,...t},this.options.useExtendedSearch,this._keyStore=new dOe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof yOe))throw new Error("Incorrect 'index' type");this._myIndex=t||bOe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){rOe(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,o=this._docs.length;n<o;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,o-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:o,shouldSort:i,sortFn:r,ignoreFieldNorm:l}=this.options;let s=tOe(e)?tOe(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=gOe.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:o,score:i})=>{const r=e?e.weight:null;n*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(t?1:o))})),e.score=n}))}(s,{ignoreFieldNorm:l}),i&&s.sort(r),nOe(t)&&t>-1&&(s=s.slice(0,t)),function(e,t,{includeMatches:n=gOe.includeMatches,includeScore:o=gOe.includeScore}={}){const i=[];return n&&i.push(VOe),o&&i.push($Oe),e.map((e=>{const{idx:n}=e,o={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,o)})),o}))}(s,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(e){const t=ROe(e,this.options),{records:n}=this._myIndex,o=[];return n.forEach((({v:e,i:n,n:i})=>{if(!rOe(e))return;const{isMatch:r,score:l,indices:s}=t.searchIn(e);r&&o.push({item:e,idx:n,matches:[{score:l,value:e,norm:i,indices:s}]})})),o}_searchLogical(e){const t=zOe(e,this.options),n=(e,t,o)=>{if(!e.children){const{keyId:n,searcher:i}=e,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return r&&r.length?[{idx:o,item:t,matches:r}]:[]}const i=[];for(let r=0,l=e.children.length;r<l;r+=1){const l=e.children[r],s=n(l,t,o);if(s.length)i.push(...s);else if(e.operator===POe)return[]}return i},o=this._myIndex.records,i={},r=[];return o.forEach((({$:e,i:o})=>{if(rOe(e)){let l=n(t,e,o);l.length&&(i[o]||(i[o]={idx:o,item:e,matches:[]},r.push(i[o])),l.forEach((({matches:e})=>{i[o].matches.push(...e)})))}})),r}_searchObjectList(e){const t=ROe(e,this.options),{keys:n,records:o}=this._myIndex,i=[];return o.forEach((({$:e,i:o})=>{if(!rOe(e))return;let r=[];n.forEach(((n,o)=>{r.push(...this._findMatches({key:n,value:e[o],searcher:t}))})),r.length&&i.push({idx:o,item:e,matches:r})})),i}_findMatches({key:e,value:t,searcher:n}){if(!rOe(t))return[];let o=[];if(JMe(t))t.forEach((({v:t,i:i,n:r})=>{if(!rOe(t))return;const{isMatch:l,score:s,indices:c}=n.searchIn(t);l&&o.push({score:s,key:e,value:t,idx:i,norm:r,indices:c})}));else{const{v:i,n:r}=t,{isMatch:l,score:s,indices:c}=n.searchIn(i);l&&o.push({score:s,key:e,value:i,norm:r,indices:c})}return o}}function UOe(){return G("svg",{width:"8",viewBox:"0 0 8 12",children:G("path",{fill:Lf,d:"M1.35187 5.33801H6.64813V0.70378C6.64813 0.528199 6.71788 0.359808 6.84203 0.235653C6.96619 0.111498 7.13458 0.041748 7.31016 0.041748C7.48574 0.041748 7.65413 0.111498 7.77829 0.235653C7.90244 0.359808 7.9722 0.528199 7.9722 0.70378V11.2963C7.9722 11.4719 7.90244 11.6403 7.77829 11.7644C7.65413 11.8886 7.48574 11.9583 7.31016 11.9583C7.13458 11.9583 6.96619 11.8886 6.84203 11.7644C6.71788 11.6403 6.64813 11.4719 6.64813 11.2963V6.66207H1.35187V11.2963C1.35187 11.4719 1.28212 11.6403 1.15797 11.7644C1.03381 11.8886 0.86542 11.9583 0.689838 11.9583C0.514256 11.9583 0.345865 11.8886 0.22171 11.7644C0.097555 11.6403 0.0278053 11.4719 0.0278053 11.2963V0.70378C0.0278053 0.528199 0.097555 0.359808 0.22171 0.235653C0.345865 0.111498 0.514256 0.041748 0.689838 0.041748C0.86542 0.041748 1.03381 0.111498 1.15797 0.235653C1.28212 0.359808 1.35187 0.528199 1.35187 0.70378V5.33801Z"})})}function qOe(e){var t;return G(j_,{...e,children:X("div",{style:{...kAe,right:1.5},children:[G(tR,{}),G("span",{style:{...IAe,right:1===e.num?-5:-6},children:G("span",{style:AAe,children:null!==(t=e.num)&&void 0!==t?t:"n"})})]})})}ZOe.version="7.0.0",ZOe.createIndex=bOe,ZOe.parseIndex=function(e,{getFn:t=gOe.getFn,fieldNormWeight:n=gOe.fieldNormWeight}={}){const{keys:o,records:i}=e,r=new yOe({getFn:t,fieldNormWeight:n});return r.setKeys(o),r.setIndexRecords(i),r},ZOe.config=gOe,ZOe.parseQuery=zOe,function(...e){OOe.push(...e)}(MOe);var YOe=Object.freeze({__proto__:null,BulletedOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:DAe,children:G("span",{style:LAe})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})},BulletedTitleIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:DAe,children:G("span",{style:LAe})})]})})},CheckOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:DAe,children:G("span",{style:TAe})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})},CheckTitleIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:DAe,children:G("span",{style:TAe})})]})})},NumberedOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:DAe,children:G("span",{style:BAe,children:"1"})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})},NumberedTitleIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:DAe,children:G("span",{style:BAe,children:"1"})})]})})},OutlineIcon:qOe,TitleSVG:UOe,ToggleBulletedListIcon:function(e){return G(j_,{...e,children:X("svg",{width:14.5,viewBox:"0 0 12 12",children:[G("path",{d:"M1 9V11.6038L3.1 10.2453L1 9Z",fill:Lf}),G("path",{d:"M1 4.75471V7.35849L3.1 6L1 4.75471Z",fill:Lf}),G("path",{d:"M1 0.5V3.10378L3.1 1.74529L1 0.5Z",fill:Lf}),G("path",{d:"M11 9.78041V10.77H7V9.78041H11ZM11 5.52916V6.51875H7V5.52916H11ZM11 1.27V2.25958H7V1.27H11Z",fill:Lf}),G("path",{d:"M5.23636 1C5.43709 1 5.6 1.16291 5.6 1.36364V2.23636C5.6 2.43709 5.43709 2.6 5.23636 2.6H4.36364C4.16291 2.6 4 2.43709 4 2.23636V1.36364C4 1.16291 4.16291 1 4.36364 1H5.23636Z",fill:Lf}),G("path",{d:"M5.23636 5.2C5.43709 5.2 5.6 5.36291 5.6 5.56363V6.43636C5.6 6.63709 5.43709 6.8 5.23636 6.8H4.36364C4.16291 6.8 4 6.63709 4 6.43636V5.56363C4 5.36291 4.16291 5.2 4.36364 5.2H5.23636Z",fill:Lf}),G("path",{d:"M5.23636 9.5C5.43709 9.5 5.6 9.66291 5.6 9.86364V10.7364C5.6 10.9371 5.43709 11.1 5.23636 11.1H4.36364C4.16291 11.1 4 10.9371 4 10.7364V9.86364C4 9.66291 4.16291 9.5 4.36364 9.5H5.23636Z",fill:Lf})]})})},ToggleBulletedOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:NAe,children:G(GM,{style:MAe,width:4,fill:Lf})}),G("span",{style:DAe,children:G("span",{style:LAe})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})},ToggleCheckListIcon:function(e){return G(j_,{...e,children:X("svg",{width:14.5,viewBox:"0 0 12 12",children:[G("path",{d:"M1 9V11.6038L3.1 10.2453L1 9Z",fill:Lf}),G("path",{d:"M1 4.75471V7.35849L3.1 6L1 4.75471Z",fill:Lf}),G("path",{d:"M1 0.5V3.10378L3.1 1.74529L1 0.5Z",fill:Lf}),G("path",{d:"M11 9.78041V10.77H7V9.78041H11ZM11 5.52916V6.51875H7V5.52916H11ZM11 1.27V2.25958H7V1.27H11Z",fill:Lf}),G("path",{d:"M4.48165 10.211L4.91743 10.6613L6.01835 9.5H6.5L4.8945 11.159L4.77982 11.0168L4 10.211H4.48165Z",fill:Lf}),G("path",{d:"M4.48165 10.211L4.91743 10.6613L6.01835 9.5H6.5L4.8945 11.159L4.77982 11.0168L4 10.211H4.48165Z",fill:Lf}),G("path",{d:"M4.48165 10.211L4.91743 10.6613L6.01835 9.5H6.5L4.8945 11.159L4.77982 11.0168L4 10.211H4.48165Z",stroke:Lf,"stroke-width":"0.5"}),G("path",{d:"M4.48165 5.91101L4.91743 6.36131L6.01835 5.2H6.5L4.8945 6.85902L4.77982 6.71682L4 5.91101H4.48165Z",fill:Lf}),G("path",{d:"M4.48165 5.91101L4.91743 6.36131L6.01835 5.2H6.5L4.8945 6.85902L4.77982 6.71682L4 5.91101H4.48165Z",fill:Lf}),G("path",{d:"M4.48165 5.91101L4.91743 6.36131L6.01835 5.2H6.5L4.8945 6.85902L4.77982 6.71682L4 5.91101H4.48165Z",stroke:Lf,"stroke-width":"0.5"}),G("path",{d:"M4.48165 1.71101L4.91743 2.16132L6.01835 1H6.5L4.8945 2.65902L4.77982 2.51682L4 1.71101H4.48165Z",fill:Lf}),G("path",{d:"M4.48165 1.71101L4.91743 2.16132L6.01835 1H6.5L4.8945 2.65902L4.77982 2.51682L4 1.71101H4.48165Z",fill:Lf}),G("path",{d:"M4.48165 1.71101L4.91743 2.16132L6.01835 1H6.5L4.8945 2.65902L4.77982 2.51682L4 1.71101H4.48165Z",stroke:Lf,"stroke-width":"0.5"})]})})},ToggleCheckOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:NAe,children:G(GM,{style:MAe,width:4,fill:Lf})}),G("span",{style:DAe,children:G("span",{style:TAe})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})},ToggleNumberedListIcon:function(e){return G(j_,{...e,children:X("svg",{width:14.5,viewBox:"0 0 12 12",children:[G("path",{d:"M1 9V11.6038L3.1 10.2453L1 9Z",fill:Lf}),G("path",{d:"M1 4.75471V7.35849L3.1 6L1 4.75471Z",fill:Lf}),G("path",{d:"M1 0.5V3.10378L3.1 1.74529L1 0.5Z",fill:Lf}),G("path",{d:"M11 9.78041V10.77H7V9.78041H11ZM11 5.52916V6.51875H7V5.52916H11ZM11 1.27V2.25958H7V1.27H11Z",fill:Lf}),G("path",{d:"M5.18029 8.8C5.44764 8.8 5.65888 8.86919 5.82226 9.01025C5.97904 9.1522 6.06073 9.34537 6.06073 9.59245C6.06073 9.90782 5.9122 10.1226 5.62257 10.2268C5.77853 10.2798 5.89735 10.3607 5.97821 10.4658C6.06816 10.5745 6.11272 10.7164 6.11272 10.8863C6.11272 11.1531 6.0269 11.3714 5.85939 11.5412C5.68116 11.7111 5.44764 11.8 5.16543 11.8C4.89478 11.8 4.67529 11.7236 4.51191 11.5736C4.32625 11.4038 4.22228 11.1576 4.2 10.8341H4.60845C4.61588 11.0273 4.67199 11.1774 4.78339 11.2825C4.87993 11.3795 5.00618 11.428 5.16213 11.428C5.33294 11.428 5.46992 11.3714 5.57389 11.2663C5.663 11.1693 5.71086 11.0516 5.71086 10.9069C5.71086 10.7362 5.663 10.6113 5.56646 10.5305C5.47734 10.4496 5.34367 10.4092 5.16956 10.4092H4.97565V10.0776H5.16543C5.32882 10.0776 5.45176 10.0372 5.53345 9.96083C5.61432 9.88356 5.65888 9.77035 5.65888 9.6248C5.65888 9.47925 5.61845 9.36963 5.54418 9.29326C5.46249 9.2124 5.33954 9.17646 5.18359 9.17646C5.02433 9.17646 4.89808 9.22049 4.80897 9.30944C4.71985 9.39839 4.66456 9.53226 4.64889 9.71016H4.25281C4.27509 9.42264 4.37163 9.20072 4.54574 9.039C4.70995 8.87727 4.92036 8.8 5.18029 8.8Z",fill:Lf,stroke:Lf,"stroke-width":"0.2"}),G("path",{d:"M5.13982 4.5C5.38859 4.5 5.59753 4.57613 5.75769 4.73547C5.91541 4.89481 5.9959 5.09753 5.9959 5.34893C5.9959 5.59591 5.9081 5.8181 5.73981 6.0217C5.63737 6.13678 5.4577 6.28816 5.19835 6.48025C4.91625 6.68297 4.74877 6.86267 4.69349 7.01758H5.99996V7.4H4.2C4.2 7.11673 4.28374 6.86975 4.45935 6.65552C4.55447 6.53159 4.75202 6.36074 5.04795 6.13767C5.22437 6.00134 5.34876 5.89423 5.42193 5.81013C5.53818 5.66673 5.60079 5.51181 5.60079 5.34451C5.60079 5.18516 5.56014 5.06566 5.48046 4.98599C5.39916 4.90632 5.27884 4.86648 5.12518 4.86648C4.96096 4.86648 4.83657 4.92579 4.75202 5.04973C4.66422 5.16923 4.62032 5.34096 4.613 5.57201H4.21463C4.21789 5.25333 4.30162 4.9975 4.46666 4.80717C4.63495 4.60003 4.86178 4.5 5.13982 4.5Z",fill:Lf,stroke:Lf,"stroke-width":"0.2"}),G("path",{d:"M4.93661 0.300003H5.25389V3.3H4.83285V0.85089C4.66649 1.02269 4.45468 1.14874 4.2 1.22904V0.774326C4.32348 0.740713 4.4504 0.682823 4.59017 0.598789C4.72909 0.505419 4.84485 0.409247 4.93661 0.300003Z",fill:Lf,stroke:Lf,"stroke-width":"0.2"})]})})},ToggleNumberedOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:NAe,children:G(GM,{style:MAe,width:4,fill:Lf})}),G("span",{style:DAe,children:G("span",{style:BAe,children:"1"})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})},ToggleOutlineIcon:function(e){return G(j_,{...e,children:X("div",{style:kAe,children:[G(UOe,{}),G("span",{style:NAe,children:G(GM,{style:MAe,width:4,fill:Lf})}),G("span",{style:IAe,children:G("span",{style:AAe,children:"n"})})]})})}});const{colors:KOe}=Zv;function GOe(e,t,n){var o,i,r,l;const s=[JOe("深色1",[JOe("深色2",[],{feature:!0,value:gAe.HEI[2],hotkeys:["ss2","hs2","shense2","heise2","black2"],expand:!1,toggle:!0}),JOe("深色3",[],{feature:!0,value:gAe.HEI[3],hotkeys:["ss3","hs3","shense3","heise3","black3"],expand:!1,toggle:!0}),JOe("深色4",[],{feature:!0,value:gAe.HEI[4],hotkeys:["ss4","hs4","shense4","heise4","black4"],expand:!1,toggle:!0}),JOe("深色5",[],{feature:!0,value:gAe.HEI[5],hotkeys:["ss5","hs5","shense5","heise5","black5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.HEI[1],hotkeys:["ss1","hs1","heise1","black1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("蓝灰1",[JOe("蓝灰2",[],{feature:!0,value:gAe.LANHUI[2],hotkeys:["lh2","lhs2","lanhui2","lanhuise2","bluegrey2"],expand:!1,toggle:!0}),JOe("蓝灰3",[],{feature:!0,value:gAe.LANHUI[3],hotkeys:["lh3","lhs3","lanhui3","lanhuise3","bluegrey3"],expand:!1,toggle:!0}),JOe("蓝灰4",[],{feature:!0,value:gAe.LANHUI[4],hotkeys:["lh4","lhs4","lanhui4","lanhuise4","bluegrey4"],expand:!1,toggle:!0}),JOe("蓝灰5",[],{feature:!0,value:gAe.LANHUI[5],hotkeys:["lh5","lhs5","lanhui5","lanhuise5","bluegrey5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.LANHUI[1],hotkeys:["lh1","lhs1","lanhui1","lanhuise1","bluegrey1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("棕色1",[JOe("棕色2",[],{feature:!0,value:gAe.ZONG[2],hotkeys:["zs2","zongse2","brown2"],expand:!1,toggle:!0}),JOe("棕色3",[],{feature:!0,value:gAe.ZONG[3],hotkeys:["zs3","zongse3","brown3"],expand:!1,toggle:!0}),JOe("棕色4",[],{feature:!0,value:gAe.ZONG[4],hotkeys:["zs4","zongse4","brown4"],expand:!1,toggle:!0}),JOe("棕色5",[],{feature:!0,value:gAe.ZONG[5],hotkeys:["zs5","zongse5","brown5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.ZONG[1],hotkeys:["zs1","zongse1","brown1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("红色1",[JOe("红色2",[],{feature:!0,value:gAe.HONG[2],hotkeys:["hs2","hongse2","red2"],expand:!1,toggle:!0}),JOe("红色3",[],{feature:!0,value:gAe.HONG[3],hotkeys:["hs3","hongse3","red3"],expand:!1,toggle:!0}),JOe("红色4",[],{feature:!0,value:gAe.HONG[4],hotkeys:["hs4","hongse4","red4"],expand:!1,toggle:!0}),JOe("红色5",[],{feature:!0,value:gAe.HONG[5],hotkeys:["hs5","hongse5","red5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.HONG[1],hotkeys:["hs1","hongse1","red1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("橙色1",[JOe("橙色2",[],{feature:!0,value:gAe.CHENG[2],hotkeys:["cs2","chengse2","orange2"],expand:!1,toggle:!0}),JOe("橙色3",[],{feature:!0,value:gAe.CHENG[3],hotkeys:["cs3","chengse3","orange3"],expand:!1,toggle:!0}),JOe("橙色4",[],{feature:!0,value:gAe.CHENG[4],hotkeys:["cs4","chengse4","orange4"],expand:!1,toggle:!0}),JOe("橙色5",[],{feature:!0,value:gAe.CHENG[5],hotkeys:["cs5","chengse5","orange5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.CHENG[1],hotkeys:["cs1","chengse1","orange1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("黄色1",[JOe("黄色2",[],{feature:!0,value:gAe.HUANG[2],hotkeys:["hs2","huangse2","yellow2"],expand:!1,toggle:!0}),JOe("黄色3",[],{feature:!0,value:gAe.HUANG[3],hotkeys:["hs3","huangse3","yellow3"],expand:!1,toggle:!0}),JOe("黄色4",[],{feature:!0,value:gAe.HUANG[4],hotkeys:["hs4","huangse4","yellow4"],expand:!1,toggle:!0}),JOe("黄色5",[],{feature:!0,value:gAe.HUANG[5],hotkeys:["hs5","huangse5","yellow5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.HUANG[1],hotkeys:["hs1","huangse1","yellow1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("绿色1",[JOe("绿色2",[],{feature:!0,value:gAe.LV[2],hotkeys:["ls2","lvse2","green2"],expand:!1,toggle:!0}),JOe("绿色3",[],{feature:!0,value:gAe.LV[3],hotkeys:["ls3","lvse3","green3"],expand:!1,toggle:!0}),JOe("绿色4",[],{feature:!0,value:gAe.LV[4],hotkeys:["ls4","lvse4","green4"],expand:!1,toggle:!0}),JOe("绿色5",[],{feature:!0,value:gAe.LV[5],hotkeys:["ls5","lvse5","green5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.LV[1],hotkeys:["ls1","lvse1","green1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("蓝色1",[JOe("蓝色2",[],{feature:!0,value:gAe.LAN[2],hotkeys:["ls2","lanse2","blue2"],expand:!1,toggle:!0}),JOe("蓝色3",[],{feature:!0,value:gAe.LAN[3],hotkeys:["ls3","lanse3","blue3"],expand:!1,toggle:!0}),JOe("蓝色4",[],{feature:!0,value:gAe.LAN[4],hotkeys:["ls4","lanse4","blue4"],expand:!1,toggle:!0}),JOe("蓝色5",[],{feature:!0,value:gAe.LAN[5],hotkeys:["ls5","lanse5","blue5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.LAN[1],hotkeys:["ls1","lanse1","blue1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("靛蓝1",[JOe("靛蓝2",[],{feature:!0,value:gAe.DIANLAN[2],hotkeys:["dl2","dls2","dianlan2","dianlanse2","indigo2"],expand:!1,toggle:!0}),JOe("靛蓝3",[],{feature:!0,value:gAe.DIANLAN[3],hotkeys:["dl3","dls3","dianlan3","dianlanse3","indigo3"],expand:!1,toggle:!0}),JOe("靛蓝4",[],{feature:!0,value:gAe.DIANLAN[4],hotkeys:["dl4","dls4","dianlan4","dianlanse4","indigo4"],expand:!1,toggle:!0}),JOe("靛蓝5",[],{feature:!0,value:gAe.DIANLAN[5],hotkeys:["dl5","dls5","dianlan5","dianlanse5","indigo5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.DIANLAN[1],hotkeys:["dl1","dls1","dianlan1","dianlanse1","indigo1"],expand:!1,toggle:!0,icon:uLe.icon}),JOe("紫色1",[JOe("紫色2",[],{feature:!0,value:gAe.ZI[2],hotkeys:["zs2","zise2","purple2"],expand:!1,toggle:!0}),JOe("紫色3",[],{feature:!0,value:gAe.ZI[3],hotkeys:["zs3","zise3","purple3"],expand:!1,toggle:!0}),JOe("紫色4",[],{feature:!0,value:gAe.ZI[4],hotkeys:["zs4","zise4","purple4"],expand:!1,toggle:!0}),JOe("紫色5",[],{feature:!0,value:gAe.ZI[5],hotkeys:["zs5","zise5","purple5"],expand:!1,toggle:!0})],{feature:!0,value:gAe.ZI[1],hotkeys:["zs1","zise1","purple1"],expand:!1,toggle:!0,icon:uLe.icon})],c=wi(KOe);for(let a=0;a<s.length;a++){const u=s[a];if(!u.payload)continue;let d=c[a].slice();if(n&&d.reverse(),u.payload.data=d[0],u.payload.name=e,null===(i=null===(o=u.title)||void 0===o?void 0:o.hotkeys)||void 0===i||i.push(...t),u.children)for(let n=0;n<u.children.length;n++){const o=u.children[n];(null==o?void 0:o.payload)&&(o.payload.data=d[n+1],o.payload.name=e,null===(l=null===(r=o.title)||void 0===r?void 0:r.hotkeys)||void 0===l||l.push(...t))}}return s}function XOe(e,t){return{type:"page",id:pRe(!0),title:{text:e},touchable:!1,expand:!0,children:t,transition:!0}}function JOe(e,t,n){const{icon:o,hotkeys:i,matches:r,toggle:l,expand:s,active:c,value:a,data:u,name:d,feature:f}=n;return{type:"outline",id:pRe(!0),title:{text:e,icon:o,hotkeys:[...i,e,null!=a?a:""].filter((e=>!!e)),matches:r,toggle:l,feature:f},payload:{value:a,data:u,name:d},active:c,expand:s,children:t,touchable:!1,transition:!0,style:OAe}}const{recursiveTree:QOe}=xT;function eRe(e,t,n){var o;const{uid:i=pRe(!0)}=e,r=[XOe("列表",[JOe("无序列表1",[JOe("无序列表2",[],{feature:!0,value:gAe.WXLB[2],hotkeys:["wxlb2","wuxuliebiao2"],expand:!1,toggle:!0})],{feature:!0,value:gAe.WXLB[1],hotkeys:["wxlb1","wuxuliebiao1"],expand:!0,toggle:!0,active:!0,icon:HBe.icon}),JOe("有序列表1",[JOe("有序列表2",[],{feature:!0,value:gAe.YXLB[2],hotkeys:["yxlb2","youxuliebiao2"],expand:!1,toggle:!0})],{feature:!0,value:gAe.YXLB[1],hotkeys:["yxlb1","youxuliebiao1"],expand:!1,toggle:!0,icon:JBe.icon}),JOe("任务列表1",[JOe("任务列表2",[],{feature:!0,value:gAe.RWLB[2],hotkeys:["rwlb2","renwuliebiao2"],expand:!1,toggle:!0})],{feature:!0,value:gAe.RWLB[1],hotkeys:["rwlb1","renwuliebiao1"],expand:!1,toggle:!0,icon:qTe.icon}),JOe("折叠列表1",[JOe("折叠列表2",[],{feature:!0,value:gAe.ZDLB[2],hotkeys:["zdlb2","zhedieliebiao2"],expand:!1,toggle:!0})],{feature:!0,value:gAe.ZDLB[1],hotkeys:["zdlb1","zhedieliebiao1"],expand:!1,toggle:!0,icon:wEe.icon})]),XOe("标题与大纲",[JOe("正文",[],{value:gAe.ZW,hotkeys:["zw","zhengwen","content"],expand:!1,toggle:!0,icon:()=>G(tR,{style:{position:"relative",right:1.5}})}),JOe("标题",[],{value:gAe.BT,hotkeys:["bt","biaoti","title"],expand:!1,toggle:!0,icon:()=>G(tR,{style:{position:"relative",right:1.5}})}),JOe("大纲1",[],{value:gAe.DG[1],hotkeys:["dg1","h1","dagang1"],expand:!1,toggle:!0,icon:()=>G(qOe,{num:1})}),JOe("大纲2",[],{value:gAe.DG[2],hotkeys:["dg2","h2","dagang2"],expand:!1,toggle:!0,icon:()=>G(qOe,{num:2})}),JOe("大纲3",[],{value:gAe.DG[3],hotkeys:["dg3","h3","dagang3"],expand:!1,toggle:!0,icon:()=>G(qOe,{num:3})}),JOe("大纲4",[],{value:gAe.DG[4],hotkeys:["dg4","h4","dagang4"],expand:!1,toggle:!0,icon:()=>G(qOe,{num:4})}),JOe("大纲5",[],{value:gAe.DG[5],hotkeys:["dg5","h5","dagang5"],expand:!1,toggle:!0,icon:()=>G(qOe,{num:5})}),JOe("大纲6",[],{value:gAe.DG[6],hotkeys:["dg6","h6","dagang6"],expand:!1,toggle:!0,icon:()=>G(qOe,{num:6})})]),XOe("样式",[JOe("粗体",[],{value:gAe.CT,hotkeys:["ct","cuti","bolder"],expand:!1,toggle:!0,icon:UNe.icon}),JOe("斜体",[],{value:gAe.XT,hotkeys:["xt","xieti"],expand:!1,toggle:!0,icon:QNe.icon}),JOe("下划线",[],{value:gAe.XHX,hotkeys:["xhx","xiahuaxian"],expand:!1,toggle:!0,icon:oLe.icon}),JOe("中划线",[],{value:gAe.ZHX,hotkeys:["zhx","zhonghuaxian","strikethrough"],expand:!1,toggle:!0,icon:sLe.icon}),JOe("字号12",[JOe("字号13",[],{value:gAe.ZH[13],data:Kf(13),hotkeys:["zh13","zihao13"],expand:!1,toggle:!0}),JOe("字号16",[],{value:gAe.ZH[16],data:Kf(16),hotkeys:["zh16","zihao16"],expand:!1,toggle:!0}),JOe("字号20",[],{value:gAe.ZH[20],data:Kf(20),hotkeys:["zh20","zihao20"],expand:!1,toggle:!0}),JOe("字号28",[],{value:gAe.ZH[28],data:Kf(28),hotkeys:["zh28","zihao28"],expand:!1,toggle:!0})],{value:gAe.ZH[12],data:Kf(12),hotkeys:["zh11","zihao11"],expand:!1,toggle:!0,icon:GNe.icon})]),XOe("功能模块",[JOe("图片",[],{value:gAe.TP,hotkeys:["tp","tupian","img"],expand:!1,toggle:!0,icon:lve.icon}),JOe("表格",[],{value:gAe.BG,hotkeys:["bg","biaoge"],expand:!1,toggle:!0,icon:$Ne.icon}),JOe("链接",[],{value:gAe.LJ,hotkeys:["lg","lianjie"],expand:!1,toggle:!0,icon:Ide.icon}),JOe("双链",[],{value:gAe.SL,hotkeys:["sl","shuanglian","link"],expand:!1,toggle:!0,icon:Ape.icon}),JOe("引文",[],{value:gAe.YW,hotkeys:["yw","yinwen"],expand:!1,toggle:!0,icon:Efe.icon}),JOe("分隔线",[],{value:gAe.FGX,hotkeys:["fgx","fengexian"],expand:!1,toggle:!0,icon:nhe.icon}),JOe("表情文字",[],{value:gAe.BQWZ,hotkeys:["bqwz","biaoqingwenzi"],expand:!1,toggle:!0,icon:Mhe.icon})]),XOe("文字颜色",GOe(uLe.name,["wzys","wenziyanse","textcolor"],!0)),XOe("背景颜色",GOe(hLe.name,["bjs","bjys","beijingyanse","backgroundcolor"]))],l={tree:r,list:YAe(r),menu:qAe(r),layout:{height:hAe,top:vAe}};let s=!1;if(QOe(l.menu.tree,(e=>!!s||(e.active?(s=!0,l.branch=e,!0):void 0))),!(null==t?void 0:t.focus))return l;const{focus:c}=t,a=MHe(IHe(c,rHe(i)));for(const e in n.options){const t=null===(o=n.options)||void 0===o?void 0:o[e];e===a&&(l.layout=t.layout)}return l}const{isWhite:tRe}=Zv;const nRe={color:kf,opacity:.95,fontSize:11,fontWeight:"bold"};function oRe(e){const t=null==e?void 0:e.value,n=null==e?void 0:e.data;if(t===gAe.WXLB[1])return X(K,{children:[G(NBe,{scale:1.2,style:{marginLeft:0}}),G(LBe,{scale:1.05,style:{marginLeft:4}})]});if(t===gAe.WXLB[2])return X(K,{children:[G(TBe,{scale:1.1,style:{marginLeft:0}}),G(TBe,{scale:1.1,style:{marginLeft:3}})]});if(t===gAe.YXLB[1])return X(K,{children:[G("span",{style:nRe,children:"1"}),G("span",{style:{...nRe,transform:"scale(1.08)",marginLeft:2.5,marginBottom:1},children:"a"})]});if(t===gAe.YXLB[2])return G("span",{style:nRe,children:"1.1"});if(t===gAe.RWLB[1])return G(pTe,{color:kf});if(t===gAe.RWLB[2])return G(vTe,{fill:"transparent",color:kf});if(t===gAe.ZDLB[1])return G(_xe,{scale:1.2,style:{zIndex:0,marginRight:2}});if(t===gAe.ZDLB[2])return G(jxe,{scale:1.1,style:{marginRight:2}});if(t===gAe.HEI[1]||t===gAe.HEI[2]||t===gAe.HEI[3]||t===gAe.HEI[4]||t===gAe.HEI[5]||t===gAe.LANHUI[1]||t===gAe.LANHUI[2]||t===gAe.LANHUI[3]||t===gAe.LANHUI[4]||t===gAe.LANHUI[5]||t===gAe.ZONG[1]||t===gAe.ZONG[2]||t===gAe.ZONG[3]||t===gAe.ZONG[4]||t===gAe.ZONG[5]||t===gAe.HONG[1]||t===gAe.HONG[2]||t===gAe.HONG[3]||t===gAe.HONG[4]||t===gAe.HONG[5]||t===gAe.CHENG[1]||t===gAe.CHENG[2]||t===gAe.CHENG[3]||t===gAe.CHENG[4]||t===gAe.CHENG[5]||t===gAe.HUANG[1]||t===gAe.HUANG[2]||t===gAe.HUANG[3]||t===gAe.HUANG[4]||t===gAe.HUANG[5]||t===gAe.LV[1]||t===gAe.LV[2]||t===gAe.LV[3]||t===gAe.LV[4]||t===gAe.LV[5]||t===gAe.LAN[1]||t===gAe.LAN[2]||t===gAe.LAN[3]||t===gAe.LAN[4]||t===gAe.LAN[5]||t===gAe.DIANLAN[1]||t===gAe.DIANLAN[2]||t===gAe.DIANLAN[3]||t===gAe.DIANLAN[4]||t===gAe.DIANLAN[5]||t===gAe.ZI[1]||t===gAe.ZI[2]||t===gAe.ZI[3]||t===gAe.ZI[4]||t===gAe.ZI[5]){const e={position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:3,backgroundColor:n};return n&&tRe(n)&&(e.border=`1px solid ${Cf}`),G("span",{style:e})}return null}function iRe(e){const t=R(NU),n=R(LU),o=R(EU),i=R(kU),r=R(IU),l=R(DU),s=R(TU),c=R(MU),a=R(HU),u=Z(null),[d,f]=Od((()=>eRe(e,c,i.current))),h=Dd(d),{kid:p,uid:v=pRe(!0)}=e,g=Z5(p,rHe(v)),m=Z(null),y=Z(!1),b=Z(!0),C=Z(null),w=e=>{var t,n;const{title:o,type:i,level:r=0,payload:l}=e;if(!o)return null;const{hotkeys:s,text:c,matches:a}=o,u={fontWeight:Bf};"outline"!==i&&(u.fontWeight="bolder");const d={};!o.icon&&r>=2&&(d.marginLeft=23*(r-1)),null==s||s[0];const f=[];if((null==s?void 0:s.length)&&f.push({text:"/"}),null==a?void 0:a.length){let e=null;for(const t of a){if(null===e){e=t;continue}const n=e.indices[0],o=t.indices[0];n[1]-n[0]<o[1]-o[0]&&(e=t)}if(null==e?void 0:e.value)for(let o=0;o<e.indices.length;o++){const i=e.indices[o];if(0===o){const t=e.value.slice(0,i[0]);t&&f.push({text:t})}const r=e.value.slice(i[0],i[1]+1);r&&f.push({text:r,color:yf});const l=null!==(n=null===(t=e.indices[o+1])||void 0===t?void 0:t[0])&&void 0!==n?n:e.value.length,s=e.value.slice(i[1]+1,l);s&&f.push({text:s})}}else(null==s?void 0:s.length)&&f.push({text:s[0]});return X("div",{style:{...CAe,...u},children:[X("div",{style:{...wAe,...d},children:[o.icon&&G("span",{style:SAe,children:G(o.icon,{})}),o.feature&&G("span",{style:EAe,children:oRe(l)}),G("span",{children:c})]}),f.length?G("div",{style:xAe,children:f.map(((e,t)=>G("span",{style:{color:e.color},children:e.text},t)))}):null]})},x=XMe(e,d,f,g,u,b,m),S=W((()=>Vs(((e,t)=>{var n,o;let{branch:i}=h.current;e&&t&&(i=t),i&&(e&&f(PMe()),f(VMe(i)),!e&&(null===(n=i.title)||void 0===n?void 0:n.toggle)&&(null===(o=i.children)||void 0===o?void 0:o.length)&&f(FMe(i)))}),15,{leading:!0})),[f,h]);H((()=>{g[1]({...d})})),F((()=>{r(),i.current.slash=!0;const e=h.current.tree;return m.current=function(e){const t=YAe(e);let n=ZOe;"function"!=typeof n&&(n=ZOe.default);const o={includeScore:!0,includeMatches:!0,keys:["hotkeys"]};return{1:new n(t,{...o,minMatchCharLength:1}),2:new n(t,{...o,minMatchCharLength:2}),3:new n(t,{...o,minMatchCharLength:3}),4:new n(t,{...o,minMatchCharLength:4}),5:new n(t,{...o,minMatchCharLength:5}),6:new n(t,{...o,minMatchCharLength:6}),7:new n(t,{...o,minMatchCharLength:7})}}(e),requestAnimationFrame((()=>{b.current=!1})),()=>{delete i.current.slash}}),[r,i,m,h]);const E={value:d.menu,style:OAe,showMore:!1,flat:!0,render:w,onChange:e=>{var t;!y.current||e.isScrolling||b.current||requestAnimationFrame((()=>S())),y.current=null!==(t=e.isScrolling)&&void 0!==t&&t,f(MMe(e))},onClickBranch:(e,r,l,u)=>{var h,p;if("outline"!==e.type)return void f(zMe(e,u));const{menu:v}=d;if(v.tree.length){const r=e.payload;return JAe(r)?SMe(t,n,o,s,c,r):QAe(r)?EMe(0,0,s,c,r):eMe(r)?kMe(t,o,i,s,a,c,r):null===(h=s.current)||void 0===h||h.commit([bMe(),wMe(c,r)]),void g[2]()}null===(p=s.current)||void 0===p||p.commit(yMe()),g[2]()},onPointerEnterBranch:(e,t,n,o)=>{b.current||(f(RMe(e)),"outline"===e.type?f(PMe(e)):S(!0,e))},onPointerMoveBranch:(e,t,n,o)=>{b.current=!1,"outline"===e.type?S():S(!0,e)}};return X("span",{style:mAe,children:[G("span",{style:yAe,ref:C}),$k(G("span",{style:bAe,...x.slash,children:d.menu.tree.length?G(ST,{...E,ref:u}):G("span",{style:RAe,children:"未能搜索到结果"})}),l,C,"bottom")]})}const rRe="slash";var lRe={name:rRe,inner:function(e){return G("div",{})},outer:function(e){return G("div",{})}},sRe=Object.freeze({__proto__:null,activateNextMenuSubClass:HMe,activatePrevMenuSubClass:_Me,block:iRe,checkSlashNode:CMe,createMenu:qAe,createSlashNode:UAe,default:lRe,findSlashText:GAe,flatTree:YAe,genTree:KAe,hideAfterMenuSubClass:VMe,hideMenuSubClass:e=>t=>{let n=!1;return NMe(t.menu.tree,(o=>{const{title:i,expand:r,children:l,active:s}=o;if(r&&(null==i?void 0:i.toggle)&&!i.open&&(null==l?void 0:l.length)&&!s){let i=!1;return NMe(l,(e=>{if(e.active)return i=!0,!0})),i?!1:(t.menu=DMe(o,e,!1)(t.menu),NMe(l,(e=>{e.expand=!1})),n=!0,!1)}})),n&&(t.menu=IMe()(t.menu)),t},icon:YOe,injectFunctionalNode:kMe,injectListNode:xMe,injectNode:wMe,injectOutlineNode:SMe,injectSlashNode:mMe,injectStyleNode:EMe,isFunctionalPayload:eMe,isOutlinePayload:JAe,isSearchEqual:XAe,isSlashMetaNode:ZAe,isSlashNode:$Ae,isStylePayload:QAe,name:rRe,relocateNextMenuSubClass:jMe,relocatePrevMenuSubClass:WMe,removeSlashAfterNode:bMe,removeSlashNode:yMe,setBranch:RMe,setMenu:MMe,setMenuSubClassActive:PMe,setMenuSubClassAnimation:(e,t)=>n=>(NMe(n.menu.tree,(n=>{var o;n.id===e.id&&(null===(o=n.children)||void 0===o||o.forEach((e=>{e.animation=t})))})),n.menu=BMe(!0)(n.menu),n),setMenuTree:OMe,showMenuSubClass:FMe,toggleMenuSubClass:zMe,transformOutlineSubClass:tMe,transformStyleName:nMe});const cRe=[[Rpe],[hle,mle,dBe,lBe],[fye,YNe,GNe],[UNe,QNe,oLe,sLe,uLe,hLe],[HBe,JBe,qTe,wEe],[mLe,eBe,nBe,GTe],[iAe]],aRe="uuid-vi",uRe="0000";let dRe="",fRe=0;const hRe=Vs((()=>{const e={v:dRe,i:fRe};window.localStorage.setItem(aRe,JSON.stringify(e))}),1e3);function pRe(e){if(e)return function(){const e=String(gRe);e.length>uRe.length&&(vRe=PT(),gRe=0);return`${vRe}-${uRe.slice(0,-e.length)}${gRe++}`}();const t=String(fRe);if(""===dRe){let e=!1;try{const t=window.localStorage.getItem(aRe);if(null!==t){const n=JSON.parse(t);n.v&&n.i&&(dRe=n.v,fRe=n.i,e=!0)}}catch(e){}e||(dRe=PT(),fRe=0)}return t.length>uRe.length&&(dRe=PT(),fRe=0),hRe(),`${dRe}-${uRe.slice(0,-t.length)}${fRe++}`}let vRe=PT(),gRe=0;function mRe(e){const t=e.split("-");return{uuid:t.slice(0,5).join("-"),sn:t.slice(5).join("")}}function yRe(e,t){return t?`${e}-${t}`:e}const{getKeyFromPath:bRe,sliceBlockPath:CRe,genPrevLevelPath:wRe,genNextLevelPath:xRe,getNodeByPath:SRe,isBlockNodeX:ERe,isBlockNodeCritical:kRe,isBlockNode:DRe,isNodeEqual:IRe,initNodeKey:NRe,isNode:LRe,isEmptyNode:BRe,comparePath:TRe,getBlockNodeStartPath:ARe,getEditBlockNodeStartPath:MRe,createBlockNode:ORe,createInlineNode:RRe,sliceEditNodeByCWND:PRe,isEditNode:FRe,isReferenceNode:HRe,transformNodeToEditNode:_Re,getBlockNodeEndPath:jRe,getEditBlockNodeEndPath:WRe,sliceNode:zRe,sortSelection:VRe,getEditNodeByPath:$Re,getNodeStartPath:ZRe,getNodeEndPath:URe,getNodeLength:qRe,traverseNode:YRe,getRelativePath:KRe,removeBoxSizeStyle:GRe,removePositionStyle:XRe,removeBorderSizeStyle:JRe,getPathFromKey:QRe,sliceBoxSizeStyle:ePe,joinKey:tPe,isMetaBrNode:nPe,isMetaNode:oPe,isReferenceBlockNode:iPe,isReferenceInlineNode:rPe,SPAN_NODE:lPe}=ek,{resetImageSize:sPe}=rk;function cPe(e){return ORe(e,{paddingTop:64,paddingBottom:64})}function aPe(e,t){let n=SRe(e,ec(t));for(;LRe(n)&&Js(t)>=n.children.length-1;)t=ec(t),n=SRe(e,ec(t));if(0===t.length)return t;t=xRe(t);let o=SRe(e,t);for(;LRe(o)&&o.children.length;)t=[...t,0],o=SRe(e,t);return t}function uPe(e,t){for(;0===Js(t);)t=ec(t);if(0===t.length)return t;t=wRe(t);let n=SRe(e,t);for(;LRe(n)&&n.children.length;)t=[...t,n.children.length-1],n=SRe(e,t);return t}function dPe(e,t){if(0===(t=CRe(e,t)).length)return t;let n=SRe(e,t);if(ERe(n))return[...t,n.children.length-1];for(;t.length;){const e=t[t.length-1];if(t=t.slice(0,-1),e>0){t=[...t,e-1];break}}return t}function fPe(e,t){if(0===(t=CRe(e,t)).length)return t;let n=SRe(e,t);if(ERe(n))return[...t,0];for(;t.length;){const o=t[t.length-1];if(t=t.slice(0,-1),n=SRe(e,t),n.children.length-1>o){t=[...t,o+1];break}}return t}function hPe(e){const t=ZRe(e),n=URe(e),o=SRe(e,n);return{anchor:{path:t,offset:0},focus:{path:n,offset:qRe(null!=o?o:"")}}}function pPe(e,t,n){const o=jRe(e);if(0===TRe(o,t)&&t.length>=o.length)return null;const i=fPe(e,t);if(0===i.length||TRe(i,t)<0)return null;let r=SRe(e,i);if(ERe(r)&&!jve(r)){const e={...r,critical:kRe(r),key:bRe(i),children:[]};return e.props&&(e.props={...e.props}),mPe(e,{reference:null==n?void 0:n.reference})}if(null===r||DRe(r)||(r=ORe([r])),DRe(r)){const e=NRe(r,i);return e.props&&(e.props={...e.props}),mPe(e,{reference:null==n?void 0:n.reference})}return null}function vPe(e,t,n){const o=ARe(e);if(0===TRe(o,t)&&t.length>=o.length)return null;const i=dPe(e,t);if(0===i.length||TRe(i,t)>0)return null;let r=SRe(e,i);if(null===r||DRe(r)||(r=ORe([r])),DRe(r)){const e=NRe(r,i);return e.props&&(e.props={...e.props}),mPe(e,{reference:null==n?void 0:n.reference})}return null}function gPe(e,t,n,o){const i=PRe(e,t,n);if(FRe(i)){const t=i.children.length-1,n=i.children[t];if(jve(n)&&0===qRe(n)){const o=QRe(n.key),r=SRe(e,o);jve(r)&&(i.children[t]=_Re(r,n.key))}return mPe(i,{reference:null==o?void 0:o.reference})}return i}function mPe(e,t){var n,o,i,r,l;const{refresh:s,refreshCallbacks:c,clone:a,reference:u,callback:d}=t;function f(e){if(0===e.children.length){let t=null;if(iPe(e)?t=ORe([""]):rPe(e)&&(t=RRe([""])),t&&FRe(e)){const n=tPe(e.key,0);t=_Re(t,n)}t&&(t.style=ePe(e.style),e.style=GRe(e.style),e.children.push(t))}}if(void 0===u)return f(e),e;if(Qse(e)){if(!e.props)return e;(e={...e}).props={...e.props},e.props.value={...e.props.value},e.props.value.cells={...e.props.value.cells};const n=e.props.value.cells;return Object.keys(n).forEach((e=>{var o;const i=null===(o=n[e].state)||void 0===o?void 0:o.editor;if(i){const o={...n[e].state};o.editor={...o.editor};const r={...t,clone:!0};s&&(r.refreshCallbacks=[...null!=c?c:[],()=>{o.editor.refresh=pRe(!0)}]),o.editor.node=mPe(i.node,r),n[e]={...n[e],state:o}}})),e}if(jve(e)){const t=null===(n=e.props)||void 0===n?void 0:n.subclass;if(t&&!e.style){const n=Pve(t);a?e={...e,style:n}:e.style=n}}if((uSe(e)||jve(e))&&!1===(null===(o=e.props)||void 0===o?void 0:o.expand)){const n=e.props.list;n&&(a?(e={...e,props:{...e.props}}).props.list=n.map((e=>mPe(e,t))):n.forEach((e=>{mPe(e,t)})))}if(HRe(e)){let t=null===(r=u[null===(i=e.props)||void 0===i?void 0:i.id])||void 0===r?void 0:r.data;if(HRe(t)){Pu(t)&&(t=Wu(t));const n=null===(l=e.props)||void 0===l?void 0:l.uid,o={...t.props,uid:n};let i={...t,props:o};FRe(e)&&(i=_Re(i,e.key)),IRe(i,e)||(a?e=i:Object.assign(e,i),s&&(null==c||c.forEach((e=>e()))))}f(e),null==d||d(e)}const h=e.children.map((e=>LRe(e)?mPe(e,t):e));return a?e={...e,children:h}:e.children=h,e}function yPe(e){const t=[];for(;ERe(e);)e=e.children[0],t.push(0);return t}function bPe(e){const t=ARe(e),n=SRe(e,t);return DRe(n)?n:e}function CPe(){return ORe([RRe([""])])}function wPe(){return{type:l$,children:[]}}function xPe(e){return LRe(e)&&e.type===l$}function SPe(e){for(;!xPe(e);)if(e=Js(e.children),!LRe(e))return!1;return!0}function EPe(e,t=14,n){var o,i,r,l,s,c,a;const u=[];for(let o=0;o<e.children.length;o++){let i=e.children[o];if(!ZAe(i)&&!nPe(i))if(LRe(i)){n&&(i=n(i));const r=EPe(i,t,n);u.push(r),DRe(i)&&!SPe(r)&&o<e.children.length-1&&u.push(wPe())}else u.push(i)}if(e={...e,children:u},DRe(e)&&e.style&&(e.style=XRe(e.style),(null===(o=e.style)||void 0===o?void 0:o.background)&&delete e.style.background,(null===(i=e.style)||void 0===i?void 0:i.backgroundColor)&&delete e.style.backgroundColor),DRe(e))e={...e,type:lPe};else if(Gde(e)){let n=e.props;(null==n?void 0:n.value)&&(n={...n,value:sPe(n.value,t)});const o={...null==n?void 0:n.style,position:"relative",top:Mf?-3:Pf?-1.5:-1};delete o.padding,delete o.margin,n={...n,style:o},e={...e,props:n}}else if(ahe(e)){const t={...null==e?void 0:e.style,verticalAlign:"middle",position:"relative",top:Mf?0:Wf?-2:-1};e={...e,style:t}}if(e.style&&(e.style=GRe(e.style),e.style=JRe(e.style),(null===(r=e.style)||void 0===r?void 0:r.fontSize)&&delete e.style.fontSize,(null===(l=e.style)||void 0===l?void 0:l.lineHeight)&&delete e.style.lineHeight,(null===(s=e.style)||void 0===s?void 0:s.whiteSpace)&&delete e.style.whiteSpace,(null===(c=e.style)||void 0===c?void 0:c.textIndent)&&delete e.style.textIndent,(null===(a=e.style)||void 0===a?void 0:a.alignSelf)&&delete e.style.alignSelf),!Gde(e)&&!ahe(e)&&1===e.children.length){const t=e.children[0];!LRe(t)||oPe(e)||oPe(t)||(e={...t,style:{...e.style,...t.style}})}return e}function kPe(e,t,n){const o=MRe(t),i=WRe(t);return mPe(zRe(e,o,i),{reference:n,clone:!0,refresh:!0})}function DPe(e,t,n){const{before:o,after:i}=VRe(t),r=zRe(e,o.path,i.path),l=$Re(r,ec(o.path)),s=$Re(r,ec(i.path));let c=s.children[s.children.length-1];sc(c)?s.children[s.children.length-1]=c.slice(0,i.offset):LRe(c)&&(c.children=c.children.slice(0,i.offset+1));let a=l.children[0];sc(a)?l.children[0]=a.slice(o.offset):LRe(a)&&(a.children=a.children.slice(o.offset));return mPe(r,{reference:n,clone:!0})}function IPe(e,t,n){YRe(e,((e,o)=>{var i,r,l,s,c,a;if(t(e,o),Qse(e)){const n=null===(r=null===(i=e.props)||void 0===i?void 0:i.value)||void 0===r?void 0:r.cells;if(!n)return;for(const e in n){const o=null===(l=n[e].state)||void 0===l?void 0:l.editor;if(!o)continue;IPe(o.node,t)}}n&&(uSe(e)||jve(e))&&!1===(null===(s=e.props)||void 0===s?void 0:s.expand)&&(null===(a=null===(c=e.props)||void 0===c?void 0:c.list)||void 0===a||a.forEach((e=>{IPe(e,t,n)})))}))}function NPe(e,t){YRe(e,((e,n)=>{var o,i,r,l,s,c;if(Qse(e)){const n=null===(i=null===(o=e.props)||void 0===o?void 0:o.value)||void 0===i?void 0:i.cells;if(!n)return;for(const e in n){const o=null===(r=n[e].state)||void 0===r?void 0:r.editor;if(!o)continue;t(o);NPe(o.node,t)}}(uSe(e)||jve(e))&&!1===(null===(l=e.props)||void 0===l?void 0:l.expand)&&(null===(c=null===(s=e.props)||void 0===s?void 0:s.list)||void 0===c||c.forEach((e=>{NPe(e,t)})))}))}function LPe(e,t){var n;const o=[],{before:i,after:r}=VRe(t);let l=i.path[0],s=r.path[0];for(FRe(e)&&(l=KRe(e,i.path)[0],s=KRe(e,r.path)[0]);l<=s;){const t=e.children[l];if(jve(t,aae.H)){const e=null===(n=t.props)||void 0===n?void 0:n.id;if(void 0===e)continue;o.includes(e)||o.push(e)}l++}return o}function BPe(e,t){const{path:n,offset:o}=t,i=tc(n);if(void 0===i)return;const r=e.children.slice(0,i),l=e.children[i];if(LRe(l))if(n.length>1){const e=BPe(l,{path:Qs(n),offset:o});LRe(e)&&!BRe(e)&&r.push(e)}else BRe(l)||r.push(l);else if(sc(l))if(n.length<=1){const e=l.slice(0,o);""!==e&&r.push(e)}else r.push(l);return 0!==r.length?{...e,children:r}:void 0}function TPe(e,t){var n,o,i,r;const{path:l,offset:s}=t,c=tc(l);if(void 0===c)return;const a=e.children.slice(c+1),u=e.children[c];if(LRe(u))if(l.length>1){const e=TPe(u,{path:Qs(l),offset:s});LRe(e)&&!BRe(e)&&a.unshift(e),uSe(u)&&(null===(o=null===(n=u.props)||void 0===n?void 0:n.list)||void 0===o?void 0:o.length)>0&&a.unshift(...null!==(r=null===(i=u.props)||void 0===i?void 0:i.list)&&void 0!==r?r:[])}else BRe(u)||a.unshift(u);else if(sc(u))if(l.length<=1){const e=u.slice(s);""!==e&&a.unshift(e)}else a.unshift(u);return 0!==a.length?{...e,children:a}:void 0}function APe(e){return{fontSize:Kf(12),fontFamily:"Arial",fontWeight:Bf,fontStyle:"normal",textDecorationLine:"none",color:"rgba(0, 0, 0, 0.88)",backgroundColor:"transparent",textAlign:"justify",lineHeight:1.7,letterSpacing:0,...e}}function MPe(e){const t=APe(),n={};for(const o in t)e[o]&&(n[o]=e[o]);return n}const{isNode:OPe,isReferenceNode:RPe,traverseNode:PPe}=ek;function FPe(e){var t,n;if(!RPe(e))return!1;const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=e.props)||void 0===n?void 0:n.uid;return!(!o||!i)&&o===i}function HPe(e){var t;if(!RPe(e))return!1;return(null===(t=e.props)||void 0===t?void 0:t.type)===ive}function _Pe(e,t){var n;if(RPe(e)){const o=null===(n=e.props)||void 0===n?void 0:n.id;if(null==t?void 0:t[o]){const e=t[o].data,n=e.children.map((e=>OPe(e)?_Pe(e,t):e));return{...e,children:n}}}return{...e,children:e.children.map((e=>OPe(e)?_Pe(e,t):e))}}function jPe(e){const t={};return PPe(e,(e=>{var n,o,i,r,l,s,c;if(RPe(e)){const o=null===(n=e.props)||void 0===n?void 0:n.uid;o&&(t[o]=e)}else{if(Qse(e)){const n=null===(i=null===(o=e.props)||void 0===o?void 0:o.value)||void 0===i?void 0:i.cells;if(!n)return;for(const e in n){const o=null===(r=n[e].state)||void 0===r?void 0:r.editor;if(!o)continue;const i=o.node;Object.assign(t,jPe(i))}}(uSe(e)||jve(e))&&!1===(null===(l=e.props)||void 0===l?void 0:l.expand)&&(null===(c=null===(s=e.props)||void 0===s?void 0:s.list)||void 0===c||c.forEach((e=>{Object.assign(t,jPe(e))})))}})),t}function WPe(e){}const{traversalEditBlockNodeBySelection:zPe,sortSelection:VPe,getEditNodeByPath:$Pe,isPathAfter:ZPe,isPathBefore:UPe,transformNodeToEditNode:qPe,transformEditNodeToNode:YPe}=ek,{comparePath:KPe,createBlockNode:GPe,createReferenceBlockNode:XPe,getBlockNodeStartPath:JPe,getEditBlockNodeStartPath:QPe,getEditNodeOffsets:eFe,getEditNodeStartPath:tFe,getNodeByPath:nFe,getNodeEndPath:oFe,getNodeLength:iFe,initNodeKey:rFe,isBlockNode:lFe,isInlineNode:sFe,isReferenceNode:cFe,traverseNode:aFe,traversalSelectionBlockNodePath:uFe,isReferenceBlockNode:dFe,DetectFlag:fFe,ReflowStartFlag:hFe}=ek;function pFe(e,t){const n={node:e.node,clientWidth:e.clientWidth,clientHeight:e.clientHeight,contentHeight:e.contentHeight,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop,detect:e.detect};return void 0!==e.ureference&&(n.ureference=e.ureference),void 0!==e.reflowStart&&(n.reflowStart=e.reflowStart),void 0!==e.selectionFrozen&&(n.selectionFrozen=e.selectionFrozen),void 0!==e.selection&&(null==t?void 0:t.focusing)&&(n.selection=e.selection),void 0!==e.selectionReflow&&(null==t?void 0:t.focusing)&&(n.selectionReflow=e.selectionReflow),void 0!==e.selectionStyle&&(n.selectionStyle=e.selectionStyle),void 0!==e.selectionDecorate&&(n.selectionDecorate=e.selectionDecorate),void 0!==e.selectionLayout&&(n.selectionLayout=e.selectionLayout),void 0!==e.selectionPath&&(n.selectionPath=e.selectionPath),void 0!==e.selectionBackground&&(n.selectionBackground=e.selectionBackground),void 0!==e.cursorStyle&&(n.cursorStyle=e.cursorStyle),void 0!==e.cwnd&&(n.cwnd=e.cwnd),void 0!==e.isEditPending&&(n.isEditPending=e.isEditPending),void 0!==e.isScrolling&&(n.isScrolling=e.isScrolling),void 0!==e.isScrollPending&&(n.isScrollPending=e.isScrollPending),void 0!==e.scrollOffset&&(n.scrollOffset=e.scrollOffset),void 0!==e.scrollTouch&&(n.scrollTouch=e.scrollTouch),void 0!==e.resizeHeight&&(n.resizeHeight=e.resizeHeight),void 0!==e.resizeWidth&&(n.resizeWidth=e.resizeWidth),void 0!==e.location&&(n.location=e.location),void 0!==e.threshold&&(n.threshold=e.threshold),void 0!==e.highlights&&(n.highlights=e.highlights),(null==t?void 0:t.highlights)&&(n.highlights=t.highlights),void 0!==e.composing&&(n.composing=e.composing),void 0!==e.composition&&(n.composition=e.composition),void 0!==e.reload&&(n.reload=e.reload),void 0!==e.slicer&&(n.slicer=e.slicer),n}function vFe(e){var t,n,o,i,r,l;const s=null!==(t=null==e?void 0:e.cwnd)&&void 0!==t?t:3,c=APe(),a={top:Pf?0:r$},u=pRe(),d=null!==(n=null==e?void 0:e.data)&&void 0!==n?n:GPe([$ve({id:u,subclass:aae.H},[XPe({id:u,uid:u},[GPe([{type:"span",children:[""]}],Fve(aae.H))])])],P$),f=null!==(i=null===(o=null==e?void 0:e.reflowStart)||void 0===o?void 0:o.path)&&void 0!==i?i:JPe(d),h=null!==(l=null!==(r=null==e?void 0:e.node)&&void 0!==r?r:gPe(d,f,s))&&void 0!==l?l:rFe(d),p=jPe(h),{clientWidth:v,clientHeight:g}=wqe(),m=v_(d,h),y=tFe(h),b={focus:{path:[...y],offset:0},anchor:{path:[...y],offset:0}},C={"outline-list":aae.H},w=Number(c.fontSize),x={flag:fFe.STATIC};return{cwnd:s,node:h,data:d,bounds:m,style:c,createTime:Date.now(),clientWidth:v,clientHeight:g,ureference:p,contentHeight:w,scrollHeight:6e3,scrollTop:0,scrollOffset:a,selection:b,selectionDecorate:C,status:"normal",detect:x,...e}}function gFe(e,t){const n={};if(sc(e)||sFe(e)?n.data=GPe([ts(XPe({id:t,uid:t},[e]))],P$):lFe(e)&&(e=dFe(e)?{...e,props:{...e.props,uid:t}}:XPe({id:t,uid:t},[{...e,style:{...e.style,...Fve(aae.H)}}]),n.data=GPe([$ve({subclass:aae.H,id:t},[ts(e)])],P$)),n.data){const e=oFe(n.data),o=nFe(n.data,e);if(null!==o){const t={path:e,offset:iFe(o)};n.selection={focus:ts(t),anchor:ts(t)}}const i={[t]:t};aFe(n.data,(e=>{var t,n;if(cFe(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,r=null===(n=e.props)||void 0===n?void 0:n.uid;r&&o&&(i[r]=o)}})),n.uids=i}return vFe(n)}function mFe(e,t){var n,o;const{editor:i,store:r,file:l}=e;if(!(null===(n=null==t?void 0:t.ids)||void 0===n?void 0:n.length)||!r||!l)return i;const s=l.currentPageId;if(!s)return i;if(!(null==t?void 0:t.ids.includes(s)))return i;const c=null===(o=r.editor)||void 0===o?void 0:o[s];if(!c)return i;const{node:a,cwnd:u}=i,{data:d,uids:f}=c,h=QPe(a),p={path:h,offsets:eFe(a,h),flag:hFe.next},v=!u||void 0,g=kPe(d,a,r.reference),m=v_(d,g),y=u?i.ureference:jPe(g);return{...i,data:d,uids:f,bounds:m,boundsReset:!0,reflowStart:p,resizeWidth:v,node:g,ureference:y,isEditPending:void 0}}function yFe(e){var t,n,o,i,r,l;let s=0;const c=[];for(const t in e){const n=Qs(t.split(h$)).join(h$);let o=null;for(let e=0;e<c.length;e++){const t=c[e][0];if(n.endsWith(t.key)){o=c[e];break}}const i={key:n,option:e[t]};if(o){let e=-1;for(let t=0;t<o.length;t++)if(o[t].key.length>=n.length){e=t;break}-1===e?o.push(i):o.splice(e,0,i)}else c.push([i])}for(let e=0;e<c.length;e++){let a=0,u=null;for(let s=0;s<c[e].length;s++){const{layout:d}=c[e][s].option;null===u&&(u=null!==(n=null===(t=null==d?void 0:d.rect)||void 0===t?void 0:t.top)&&void 0!==n?n:0);let f=null!==(o=null==d?void 0:d.height)&&void 0!==o?o:0;f+=null!==(i=null==d?void 0:d.top)&&void 0!==i?i:0,f+=null!==(l=null===(r=null==d?void 0:d.rect)||void 0===r?void 0:r.top)&&void 0!==l?l:0,f-=u,f>a&&(a=f)}a>s&&(s=a)}return s}function bFe(e,t){const n={},o={},i={};for(const t in e.uids)n[t]=e.uids[t];for(const e in t.uids){const r=t.uids[e];n[e]?(delete n[e],i[e]=r):o[e]=r}return{duids:n,cuids:o,uuids:i}}function CFe(e,t,n){let o=!1;return n?(uFe(e,n,((e,n)=>{if(0===KPe(n,t))return o=!0,!1})),o):o}function wFe(e,t){const n=[];if(!t)return n;const{before:o,after:i}=VPe(t);return zPe(e,t,((t,r)=>{if(FPe(t)){let l=!0;if(!UPe(r,i.path)&&(l=!1,0===KPe(r,i.path))){const t=$Pe(e,i.path);t&&iFe(t)>=i.offset&&(l=!0)}ZPe(r,o.path)||(l=!1),l&&n.push(qPe(YPe(t),""))}})),n}function xFe(e,t){const{uids:n,data:o}=e;if(Sc(n))return;const i=Object.keys(n);if(1===i.length){const e=o.children[0];return void(zve(e)&&mPe(e,t))}let r=!0;for(const e of i)if(n[e]!==e){r=!1;break}if(r)for(const e of o.children)zve(e)&&mPe(e,t);else o.children.length>m$||mPe(o,t)}var SFe;!function(e){e.POINTER_DOWN_MOVE_UNTIL_UP="POINTER_DOWN_MOVE_UNTIL_UP",e.POINTER_UP="POINTER_UP"}(SFe||(SFe={}));const{calcLeftSizeByStyle:EFe,calcRightSizeByStyle:kFe,getPathFromKey:DFe,getRelativePath:IFe,isEditNode:NFe}=ek;function LFe(e){var t,n;const o=document.documentElement.clientWidth,i=p$+AQ,r=(null!==(n=null===(t=null==e?void 0:e.file)||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:p$)+AQ,l=o/1440*350*Math.min(1,i/r),s=Math.floor(o-r-l);return Math.min(g$,Math.max(s,350))}function BFe(e){var t,n,o;let i=document.documentElement.clientHeight;if(Uf){i-=FH()+GK}else if(!Pf){i-=null!==(o=null===(n=null===(t=null==e?void 0:e.editor)||void 0===t?void 0:t.scrollOffset)||void 0===n?void 0:n.top)&&void 0!==o?o:0}return i}function TFe(e){let t=document.documentElement.clientHeight;if(Uf){t-=FH()+5}return t}function AFe(e,t,n){var o,i;let r=e.clientWidth,l=e.node,s=0;const c=IFe(e.node,t);do{if(r-=EFe(l.style),r-=kFe(l.style),lae(l)&&n){const l=tae(e,t,n),s=null!==(i=null!==(o=null==l?void 0:l.fontSize)&&void 0!==o?o:n.fontSize)&&void 0!==i?i:Kf(12);r-=parseInt(String(s))*Oce}const a=l.children[c[s++]];if(!NFe(a))break;l=a}while(s<c.length);return r}function MFe(e,t,n){if(void 0===n)return e.clientWidth;const o=AFe(e,DFe(t));return Math.min(n,o)}const{getKeyFromPath:OFe,getPathFromKey:RFe,isEditNode:PFe,getEditNodeByPath:FFe,getNodeByPath:HFe,isNode:_Fe,joinKey:jFe,cloneNodeByPath:WFe,cloneEditNodeByPath:zFe,transformEditNodeToNode:VFe,transformNodeToEditNode:$Fe}=ek;function ZFe(){return{type:f$.NONE}}function UFe(){return{type:f$.EDITOR}}function qFe(){return{type:f$.FILE}}function YFe(){return{type:f$.TOOL_BAR}}function KFe(e){return{type:f$.SHEET,key:e}}function GFe(e){return{type:f$.NODE,path:e}}function XFe(e){return{type:f$.TOGGLE,path:e}}function JFe(e){return{type:f$.OUTLINE,path:e}}function QFe(e){return{type:f$.PANEL,key:e}}function eHe(){return{type:f$.REFER}}function tHe(){return{type:f$.LINK}}function nHe(){return{type:f$.SELECTOR}}function oHe(){return{type:f$.OPTION}}function iHe(e){return{type:f$.EMOJI,key:e}}function rHe(e){return{type:f$.SLASH,key:e}}function lHe(e){return e.type===f$.NONE}function sHe(e){return e.type===f$.SHEET}function cHe(e){return e.type===f$.NODE}function aHe(e){return e.type===f$.EDITOR}function uHe(e){return e.type===f$.FILE}function dHe(e){return e.type===f$.TOOL_BAR}function fHe(e){return e.type===f$.PANEL}function hHe(e){return e.type===f$.REFER}function pHe(e){return e.type===f$.LINK}function vHe(e){return e.type===f$.SELECTOR}function gHe(e){return e.type===f$.OPTION}function mHe(e){return e.type===f$.TOGGLE}function yHe(e){return e.type===f$.OUTLINE}function bHe(e,t){if(e.type===t.type&&e.key===t.key&&Ec(e.path,t.path)){if(!t.child)return!0;if(e.child&&bHe(e.child,t.child))return!0}return!1}function CHe(e){return!!fHe(e)||!!e.child&&CHe(e.child)}function wHe(e){return!!sHe(e)||!!e.child&&wHe(e.child)}function xHe(e){return!!mHe(e)||!!e.child&&xHe(e.child)}function SHe(e){return!!yHe(e)||!!e.child&&SHe(e.child)}function EHe(e){return SHe(e)||xHe(e)}function kHe(e){const t=BHe(e);return!(!aHe(t)||t.child)}function DHe(e,t){var n,o,i,r,l,s,c,a,u,d;if(f(e))return!1;t=BHe(t);const{key:h,path:p,child:v}=t;if(cHe(t)){if(!p||!v)return!1;if(PFe(e)){let t=null;return t=p.length?FFe(e,p):e,!!PFe(t)&&DHe(t,v)}{let t=null;return t=p.length?HFe(e,p):e,!!_Fe(t)&&DHe(t,v)}}if(sHe(t)){if(!Qse(e))return!1;if(!h||!v)return!0;const t=null===(o=null===(n=e.props)||void 0===n?void 0:n.value)||void 0===o?void 0:o.cells,l=null===(r=null===(i=null==t?void 0:t[h])||void 0===i?void 0:i.state)||void 0===r?void 0:r.editor.node;return!!l&&DHe(l,v)}if(mHe(t)){if(!uSe(e))return!1;const t=[...e.children];if(!1===(null===(l=e.props)||void 0===l?void 0:l.expand)&&t.push(...null!==(c=null===(s=e.props)||void 0===s?void 0:s.list)&&void 0!==c?c:[]),1!==(null==p?void 0:p.length))return!1;let n=t[p[0]];return!(!v||!_Fe(n))&&(_Fe(e)&&PFe(n)&&(n=VFe(n)),DHe(n,v))}if(yHe(t)){if(!jve(e))return!1;const t=[...e.children];if(!1===(null===(a=e.props)||void 0===a?void 0:a.expand)&&t.push(...null!==(d=null===(u=e.props)||void 0===u?void 0:u.list)&&void 0!==d?d:[]),1!==(null==p?void 0:p.length))return!1;let n=t[p[0]];return!(!v||!_Fe(n))&&(_Fe(e)&&PFe(n)&&(n=VFe(n)),DHe(n,v))}return!!v&&DHe(e,v)}function IHe(e,...t){return e.child?{...e,child:IHe(e.child,...t)}:0===t.length?e:1===t.length?{...e,child:t[0]}:t.length>1?{...e,child:IHe(t[0],...t.slice(1))}:e}function NHe(e,t){return e.type===t.type&&e.key===t.key&&Ec(e.path,t.path)?e.child&&t.child?NHe(e.child,t.child):e.child&&!t.child?e.child:null:null}function LHe(e){if(!e.child)return null;const t=LHe(e.child);return null===t?(delete(e={...e}).child,e):{...e,child:t}}function BHe(e){let t=e;for(;e.child;)fHe(e=e.child)&&(t=e);return t}function THe(e){let t=e;for(;e.child;)sHe(e=e.child)&&(t=e);return t}function AHe(e){let t=e;for(;e.child;)cHe(e=e.child)&&(t=e);return t}function MHe(e){var t;let n=e.type;return e.key&&(n+=`${h$}${e.key}`),(null===(t=e.path)||void 0===t?void 0:t.length)&&(n+=`${h$}${OFe(e.path)}`),e.child&&(n+=`${h$}${MHe(e.child)}`),n}function OHe(e){const t=e.split(h$);if(t[0]!==f$.EDITOR)return{type:t[0]};let n=UFe(),o=1;for(;o<t.length;){const e=t[o];if(e===f$.NODE){n=IHe(n,GFe(RFe(t[++o])))}else if(e===f$.SHEET){n=IHe(n,KFe(t[++o]))}else if(e===f$.PANEL){n=IHe(n,QFe(t[++o]))}else if(e===f$.REFER)n=IHe(n,eHe());else if(e===f$.LINK)n=IHe(n,tHe());else if(e===f$.EMOJI){n=IHe(n,iHe(t[++o]))}else e===f$.SELECTOR?n=IHe(n,nHe()):e===f$.OPTION&&(n=IHe(n,oHe()));o++}return n}function RHe(e){let t=1;for(;e.child;)t++,e=e.child;return t}function PHe(e){return e.child?PHe(e.child):e}function FHe(e){let t={...e};delete t.child;const n=t;for(;e.child;){if(fHe(e=e.child))return n;t.child={...e},t=t.child,delete t.child}return n}function HHe(e){var t,n,o,i,r,l;let s={...e};delete s.child;const c=s;for(;e.child;)if(mHe(e=e.child)||cHe(e)&&cHe(s))s.path=[...null!==(t=s.path)&&void 0!==t?t:[],...null!==(n=e.path)&&void 0!==n?n:[]];else if(yHe(e)){const t=null!==(o=s.path)&&void 0!==o?o:[],n=t.length-1,c=null!==(i=t[n])&&void 0!==i?i:0,a=null!==(l=null===(r=e.path)||void 0===r?void 0:r[0])&&void 0!==l?l:0;s.path=[...t],a>0?s.path[n]=c+a:s.path.push(a)}else s.child={...e},s=s.child,delete s.child;return c}function _He(e){var t,n;let o={...e};delete o.child;const i=o;for(;e.child;)mHe(e=e.child)||cHe(e)&&cHe(o)?o.path=[...null!==(t=o.path)&&void 0!==t?t:[],...null!==(n=e.path)&&void 0!==n?n:[]]:(o.child={...e},o=o.child,delete o.child);return i}function jHe(e){var t,n,o,i,r;let l={...e};delete l.child;const s=l;for(;e.child;)if(yHe(e=e.child)||cHe(e)&&cHe(l)){if(!(null===(t=l.path)||void 0===t?void 0:t.length))break;const s=null!==(n=l.path)&&void 0!==n?n:[],c=s.length-1,a=null!==(o=s[c])&&void 0!==o?o:0,u=null!==(r=null===(i=e.path)||void 0===i?void 0:i[0])&&void 0!==r?r:0;l.path=[...s],u>0?l.path[c]=a+u:l.path.push(u)}else l.child={...e},l=l.child,delete l.child;return s}function WHe(e,t){var n,o,i,r,l,s,c,a,u,d;if(f(e))return e;t=BHe(t);const{key:h,path:p,child:v}=t;if(cHe(t)){if(!p)return e;let t=null;return t=PFe(e)?p.length?FFe(e,p):e:p.length?HFe(e,p):e,v&&t?WHe(t,v):t}if(sHe(t)){if(!Qse(e)||!h)return e;const t=null===(o=null===(n=e.props)||void 0===n?void 0:n.value)||void 0===o?void 0:o.cells,l=null===(r=null===(i=null==t?void 0:t[h])||void 0===i?void 0:i.state)||void 0===r?void 0:r.editor.node;return v&&l?WHe(l,v):l}if(mHe(t)){if(!uSe(e))return e;const t=[...e.children];if(!1===(null===(l=e.props)||void 0===l?void 0:l.expand)&&t.push(...null!==(c=null===(s=e.props)||void 0===s?void 0:s.list)&&void 0!==c?c:[]),1!==(null==p?void 0:p.length))return e;let n=t[p[0]];return v&&n?(_Fe(e)&&PFe(n)&&(n=VFe(n)),WHe(n,v)):n}if(yHe(t)){if(!jve(e))return e;const t=[...e.children];if(!1===(null===(a=e.props)||void 0===a?void 0:a.expand)&&t.push(...null!==(d=null===(u=e.props)||void 0===u?void 0:u.list)&&void 0!==d?d:[]),1!==(null==p?void 0:p.length))return e;let n=t[p[0]];return v&&n?(_Fe(e)&&PFe(n)&&(n=VFe(n)),WHe(n,v)):n}return v?WHe(e,v):e}function zHe(e,t){var n,o,i,r,l,s,c,a,u,d,h;if(f(e))return null;t=BHe(t);const{key:p,path:v,child:g}=t;if(cHe(t)){if(!v||!g)return null;if(PFe(e)){let t=null;return t=v.length?FFe(e,v):e,null===t?null:zHe(t,g)}{let t=null;return t=v.length?HFe(e,v):e,null===t?null:zHe(t,g)}}if(sHe(t)){if(!Qse(e)||!p)return null;const t=null===(o=null===(n=e.props)||void 0===n?void 0:n.value)||void 0===o?void 0:o.cells,s=null!==(r=null===(i=null==t?void 0:t[p])||void 0===i?void 0:i.state)&&void 0!==r?r:null;if(!g)return s;const c=null==s?void 0:s.editor.node;return c?null!==(l=zHe(c,g))&&void 0!==l?l:s:null}if(mHe(t)){if(!uSe(e))return null;const t=[...e.children];if(!1===(null===(s=e.props)||void 0===s?void 0:s.expand)&&t.push(...null!==(a=null===(c=e.props)||void 0===c?void 0:c.list)&&void 0!==a?a:[]),1!==(null==v?void 0:v.length))return null;let n=t[v[0]];return g&&_Fe(n)?(_Fe(e)&&PFe(n)&&(n=VFe(n)),zHe(n,g)):null}if(yHe(t)){if(!jve(e))return null;const t=[...e.children];if(!1===(null===(u=e.props)||void 0===u?void 0:u.expand)&&t.push(...null!==(h=null===(d=e.props)||void 0===d?void 0:d.list)&&void 0!==h?h:[]),1!==(null==v?void 0:v.length))return null;let n=t[v[0]];return g&&_Fe(n)?(_Fe(e)&&PFe(n)&&(n=VFe(n)),zHe(n,g)):null}return g?zHe(e,g):null}function VHe(e,t){var n,o,i,r,l,s,c,a,u,d,h,p,v,g,m;if(f(e))return null;t=BHe(t);const{key:y,path:b,child:C}=t;if(cHe(t)){if(!b)return null;if(PFe(e)){let t=null;return t=b.length?FFe(e,b):e,null===t?null:C?VHe(t,C):Qse(t)&&null!==(o=null===(n=t.props)||void 0===n?void 0:n.value)&&void 0!==o?o:null}{let t=null;return t=b.length?HFe(e,b):e,null===t?null:C?VHe(t,C):Qse(t)&&null!==(r=null===(i=t.props)||void 0===i?void 0:i.value)&&void 0!==r?r:null}}if(sHe(t)){if(!Qse(e))return null;const t=null===(l=e.props)||void 0===l?void 0:l.value;if(!y||!C)return t;const n=null===(c=null===(s=e.props)||void 0===s?void 0:s.value)||void 0===c?void 0:c.cells,o=null===(u=null===(a=null==n?void 0:n[y])||void 0===a?void 0:a.state)||void 0===u?void 0:u.editor.node;return o?VHe(o,C):t}if(mHe(t)){if(!uSe(e))return null;const t=[...e.children];if(!1===(null===(d=e.props)||void 0===d?void 0:d.expand)&&t.push(...null!==(p=null===(h=e.props)||void 0===h?void 0:h.list)&&void 0!==p?p:[]),1!==(null==b?void 0:b.length))return null;let n=t[b[0]];return C&&_Fe(n)?(_Fe(e)&&PFe(n)&&(n=VFe(n)),VHe(n,C)):null}if(yHe(t)){if(!jve(e))return null;const t=[...e.children];if(!1===(null===(v=e.props)||void 0===v?void 0:v.expand)&&t.push(...null!==(m=null===(g=e.props)||void 0===g?void 0:g.list)&&void 0!==m?m:[]),1!==(null==b?void 0:b.length))return null;let n=t[b[0]];return C&&_Fe(n)?(_Fe(e)&&PFe(n)&&(n=VFe(n)),VHe(n,C)):null}return C?VHe(e,C):null}function $He(e,t,n){var o,i,r,l,s,c,a,u,d;if(f(e))return;t=BHe(t);const{key:h,path:p,child:v}=t;if(cHe(t)){if(!p||!v)return;if(PFe(e)){let t=null;if(t=p.length?FFe(e,p):e,null===t)return;return $He(t,v,n)}{let t=null;if(t=p.length?HFe(e,p):e,null===t)return;return $He(t,v,n)}}if(sHe(t)){if(!Qse(e)||!h)return;const l=null===(i=null===(o=e.props)||void 0===o?void 0:o.value)||void 0===i?void 0:i.cells,s=null===(r=null==l?void 0:l[h])||void 0===r?void 0:r.state;if(s&&n(s,t),!v)return;const c=null==s?void 0:s.editor.node;if(!c)return;return $He(c,v,n)}if(mHe(t)){if(!uSe(e))return;const t=[...e.children];if(!1===(null===(l=e.props)||void 0===l?void 0:l.expand)&&t.push(...null!==(c=null===(s=e.props)||void 0===s?void 0:s.list)&&void 0!==c?c:[]),1!==(null==p?void 0:p.length))return;let o=t[p[0]];if(!v||!_Fe(o))return;return _Fe(e)&&PFe(o)&&(o=VFe(o)),$He(o,v,n)}if(yHe(t)){if(!jve(e))return;const t=[...e.children];if(!1===(null===(a=e.props)||void 0===a?void 0:a.expand)&&t.push(...null!==(d=null===(u=e.props)||void 0===u?void 0:u.list)&&void 0!==d?d:[]),1!==(null==p?void 0:p.length))return;let o=t[p[0]];if(!v||!_Fe(o))return;return _Fe(e)&&PFe(o)&&(o=VFe(o)),$He(o,v,n)}return v?$He(e,v,n):void 0}function ZHe(e,t,n){var o,i,r,l,s,c,a,u,d,h,p,v,g;if(f(e))return;t=BHe(t);const{key:m,path:y,child:b}=t;if(cHe(t)){if(!y)return;if(PFe(e)){let i=null;if(i=y.length?FFe(e,y):e,null===i)return;if(!b){if(Qse(i)){const e=null===(o=i.props)||void 0===o?void 0:o.value;e&&n(e,t)}return}return ZHe(i,b,n)}{let o=null;if(o=y.length?HFe(e,y):e,null===o)return;if(!b){if(Qse(o)){const e=null===(i=o.props)||void 0===i?void 0:i.value;e&&n(e,t)}return}return ZHe(o,b,n)}}if(sHe(t)){if(!Qse(e))return;const o=null===(r=e.props)||void 0===r?void 0:r.value;if(o&&n(o,t),!m||!b)return;const i=null===(s=null===(l=e.props)||void 0===l?void 0:l.value)||void 0===s?void 0:s.cells,u=null===(a=null===(c=null==i?void 0:i[m])||void 0===c?void 0:c.state)||void 0===a?void 0:a.editor.node;if(!u)return;return ZHe(u,b,n)}if(mHe(t)){if(!uSe(e))return;const t=[...e.children];if(!1===(null===(u=e.props)||void 0===u?void 0:u.expand)&&t.push(...null!==(h=null===(d=e.props)||void 0===d?void 0:d.list)&&void 0!==h?h:[]),1!==(null==y?void 0:y.length))return;let o=t[y[0]];if(!b||!_Fe(o))return;return _Fe(e)&&PFe(o)&&(o=VFe(o)),ZHe(o,b,n)}if(yHe(t)){if(!jve(e))return;const t=[...e.children];if(!1===(null===(p=e.props)||void 0===p?void 0:p.expand)&&t.push(...null!==(g=null===(v=e.props)||void 0===v?void 0:v.list)&&void 0!==g?g:[]),1!==(null==y?void 0:y.length))return;let o=t[y[0]];if(!b||!_Fe(o))return;return _Fe(e)&&PFe(o)&&(o=VFe(o)),ZHe(o,b,n)}return b?ZHe(e,b,n):void 0}function UHe(e,t,n,o,i){var r,l,s,c,a,u;if(f(e))return e;const d=t===e;i&&(e=i(e,o)),n=BHe(n);const{key:h,path:p,child:v}=n;if(cHe(n)){if(!p)return e;let n=null;if(e=PFe(e)?zFe(e,p):WFe(e,p),d&&(t=e),n=PFe(e)?p.length?FFe(e,p):e:p.length?HFe(e,p):e,!v||!n)return e;const r=UHe(n,t,v,o,i);Object.assign(n,r)}else if(sHe(n)){if(!Qse(e)||!h)return e;d?t=e={...e}:e={...e},e.props={...e.props},e.props.value={...e.props.value},e.props.value.cells={...e.props.value.cells};const n={...e.props.value.cells[h]};n.state={...n.state},n.state.editor={...n.state.editor},n.state.editor.node={...n.state.editor.node},e.props.value.cells[h]=n;const o=n.state.editor.node;if(!v)return e;const r=UHe(o,t,v,n.state,i);Object.assign(o,r)}else if(mHe(n)){if(!uSe(e))return e;d?t=e={...e}:e={...e};const n=Jl(null!==(l=null===(r=e.props)||void 0===r?void 0:r.list)&&void 0!==l?l:[]).map(((t,n)=>{if(!_Fe(t))return t;if(PFe(e)&&!PFe(t)){const o=jFe(e.key,n+1);return $Fe(t,o)}return!PFe(e)&&PFe(t)?VFe(t):t})),c=[...e.children];if(!1===(null===(s=e.props)||void 0===s?void 0:s.expand)&&(e.props={...e.props},c.push(...n),e.props.expand=!0,delete e.props.list),1!==(null==p?void 0:p.length))return e;e.children=c;const a=c[p[0]];if(!v||!a)return e;const u=UHe(a,t,v,o,i);c[p[0]]=u}else if(yHe(n)){if(!jve(e))return e;if(!1!==(null===(c=e.props)||void 0===c?void 0:c.expand))return e;const n=t.children.findIndex((t=>function(e,t){const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(let o=0;o<n.length;o++)if(!rc(t,n[o])||!Ad(e[n[o]],t[n[o]]))return!1;return!0}(t,e)));if(-1===n)return e;d?t=e={...e}:e={...e};const r=Jl(null!==(u=null===(a=e.props)||void 0===a?void 0:a.list)&&void 0!==u?u:[]).map(((t,n)=>{if(!_Fe(t))return t;if(PFe(e)&&!PFe(t)){const o=jFe(e.key,n+1);return $Fe(t,o)}return!PFe(e)&&PFe(t)?VFe(t):t}));e.props={...e.props};const l=[...e.children];if(l.push(...r),e.props.expand=!0,delete e.props.list,t.children=[...t.children],t.children.splice(n+1,0,...r),1!==(null==p?void 0:p.length))return e;const s=l[p[0]];if(!v||!s)return e;const f=t.children.indexOf(s);if(-1===f)return e;const h=UHe(s,t,v,o,i);t.children[f]=h}return d?t:e}function qHe(e){let t=UFe();if(e&&wHe(e)){EHe(e)&&(e=HHe(e));cHe(PHe(e))&&(e=LHe(e)),e&&(t=IHe(t,e))}return t}const{isNode:YHe,isEmptyNode:KHe}=ek;function GHe(e){let t=e.children.length-1;for(;t>=0;){const n=e.children[t];YHe(n)&&GHe(n),KHe(n,!0)&&e.children.splice(t,1),t--}return e}const XHe={new:Mf?"⌘+N":"Ctrl+N",snew:Mf?"⌘+⇧+N":"Ctrl+Shift+N",paging:Mf?"⌘+⇧+P":"Ctrl+Shift+P",offpage:Mf?"⌘+⇧+O":"Ctrl+Shift+O",import:Mf?"⌘+⇧+I":"Ctrl+Shift+I",export:Mf?"⌘+⇧+E":"Ctrl+Shift+E",duplicate:Mf?"⌘+D":"Ctrl+D",move:Mf?"⌘+⇧+P":"Ctrl+Shift+P",rename:Mf?"⌘+⇧+R":"Ctrl+Shift+R",delete:Mf?"⌘+⇧+D":"Ctrl+Shift+D",readonly:Mf?"⌥+R":"Alt+R",moveUp:"↑",moveDown:"↓",slash:"/",moveWordBackward:Mf?"⌘+←":"Ctrl+←",moveWordForward:Mf?"⌘+→":"Ctrl+→",moveLineBackward:Mf?"⌘+↑":"Ctrl+↑",moveLineForward:Mf?"⌘+↓":"Ctrl+↓",expandBackward:Mf?"⇧+←":"Shift+←",expandForward:Mf?"⇧+→":"Shift+→",expandLineBackward:Mf?"⌥+⇧+↑":"Alt+Shift+↑",expandLineForward:Mf?"⌥+⇧+↓":"Alt+Shift+↓",deleteBackward:"Ctrl?+Backspace",deleteForward:"Ctrl?+Del",deleteLineBackward:Mf?"⌘+⇧?+Backspace":"Ctrl+Shift+Backspace",deleteLineForward:Mf?"⌘+⇧?+Del":"Ctrl+Shift+Del",deleteWordBackward:Mf?"⌥+⇧+Backspace":"Alt+Shift+Backspace",deleteWordForward:Mf?"⌥+⇧+Del":"Alt+Shift+Del"},JHe=Hs(eh)(XHe.new),QHe=Hs(eh)(XHe.paging),e_e=Hs(eh)(XHe.offpage),t_e=Hs(eh)(XHe.import),n_e=Hs(eh)(XHe.export),o_e=Hs(eh)(XHe.duplicate),i_e=Hs(eh)(XHe.move),r_e=Hs(eh)(XHe.rename),l_e=Hs(eh)(XHe.delete),s_e=Hs(eh)(XHe.moveUp),c_e=Hs(eh)(XHe.moveDown),a_e=Hs(eh)(XHe.moveWordBackward),u_e=Hs(eh)(XHe.moveWordForward),d_e=Hs(eh)(XHe.moveLineBackward),f_e=Hs(eh)(XHe.moveLineForward),h_e=Hs(eh)(XHe.expandBackward),p_e=Hs(eh)(XHe.expandForward),v_e=Hs(eh)(XHe.expandLineBackward),g_e=Hs(eh)(XHe.expandLineForward),m_e=Hs(eh)(XHe.deleteBackward),y_e=Hs(eh)(XHe.deleteForward),b_e=Hs(eh)(XHe.deleteLineBackward),C_e=Hs(eh)(XHe.deleteLineForward),w_e=Hs(eh)(XHe.deleteWordBackward),x_e=Hs(eh)(XHe.deleteWordForward),S_e=Hs(Qf)(XHe.slash),{createBlockNode:E_e,getKeyFromPath:k_e,initNodeKey:D_e,isNode:I_e,isEditNode:N_e,getPathFromKey:L_e,getEditNodeOffsets:B_e,transformNodeToEditNode:T_e,createReferenceBlockNode:A_e,transformEditNodeToNode:M_e,traverseNode:O_e,isReferenceNode:R_e,isBlockNodeX:P_e,removeBoxSizeStyle:F_e,removeBorderSizeStyle:H_e,isReferenceBlockNode:__e}=ek,{getBranchByPath:j_e,recursiveTree:W_e,mapTree:z_e}=xT;function V_e(e,t){var n,o,i,r,l,s,c,a,u,d;const f=[],h=[];let p=f;const v=[];for(let n=0;n<e.children.length;n++){let o=e.children[n];jve(o)&&v.push({node:_Pe(o,t),path:[n]})}const g=v.shift(),m={subclass:aae.H,kid:k_e(g.path)},y={title:D_e(E_e([""])),id:null!==(o=null===(n=g.node.props)||void 0===n?void 0:n.id)&&void 0!==o?o:pRe(),type:"page",payload:m};for(;v.length;){const e=v.shift();if(void 0!==e)if(jve(e.node)){const n=k_e(e.path),o=null===(i=e.node.props)||void 0===i?void 0:i.id,a=null===(r=e.node.props)||void 0===r?void 0:r.subclass,u=a===aae.H?"page":"outline",d=null===(l=e.node.props)||void 0===l?void 0:l.list;We(d)&&v.unshift(...d.map(((n,o)=>({node:_Pe(n,t),path:[...e.path,o]}))));let g=e.node;if(P_e(g)){const e=g.style;g=g.children[0],g.style={...e,...g.style}}g.style=F_e(g.style),g.style=H_e(g.style),null===(s=g.style)||void 0===s||delete s.background,null===(c=g.style)||void 0===c||delete c.backgroundColor,g===e.node&&(g=E_e(g.children)),N_e(g)&&(g=M_e(g));let m=g;__e(m)&&(m=g.children[0]);const y=T_e(m,n),b={kid:n,subclass:a},C={id:null!=o?o:pRe(),title:y,type:u,payload:b},w=Js(h);if(void 0===w){p=f,p.push(C),h.push({branch:C,level:a});continue}const x=w.level;if(void 0===x||void 0===a){We(d)&&v.splice(0,d.length),v.unshift(e),h.pop();continue}if(x>a&&x!==aae.H){We(w.branch.children)||(w.branch.children=[]),p=w.branch.children,p.push(C),h.push({branch:C,level:a});continue}We(d)&&v.splice(0,d.length),v.unshift(e),h.pop()}else;}if(y.children=f,sc(g.node))y.title=D_e(E_e([g.node]));else if(I_e(g.node)){const e=k_e(g.path);y.payload={subclass:null===(a=g.node.props)||void 0===a?void 0:a.subclass,kid:e};let t=g.node;if(P_e(t)){const e=t.style;t=t.children[0],t.style={...e,...t.style}}t.style=F_e(t.style),t.style=H_e(t.style),null===(u=t.style)||void 0===u||delete u.background,null===(d=t.style)||void 0===d||delete d.backgroundColor,t===g.node&&(t=E_e(t.children)),N_e(t)&&(t=M_e(t));let n=t;__e(n)&&(n=t.children[0]),y.title=T_e(n,e)}return y}function $_e(e){const t=[];return W_e([e],(e=>{let{type:n,title:o,payload:i,id:r}=e;"outline"===n?I_e(o)&&t.push($ve({subclass:i.subclass,id:r},[ts(o)])):(__e(o)&&(o=o.children[0]),t.push($ve({subclass:i.subclass,id:r},[A_e({id:r,uid:r},[ts(o)])])))})),t}function Z_e(e){const t={},n=[e];for(;n.length;){const e=n.shift();if(!e)continue;t[e.id]=e;const o=e.children;void 0!==o&&n.unshift(...o)}return t}function U_e(e){const t=[],n=[e];for(;n.length;){const o=n.shift();if(!o)continue;if("outline"===o.type)t.push({...o,children:[]});else if(t.push(o),o!==e)continue;const i=o.children;void 0!==i&&n.unshift(...i)}return t}function q_e(e){var t;const n=[],o=[];let i=n;const r=(e=[...e]).shift();for(let r=0;r<e.length;r++){const l=e[r],s=null===(t=l.payload)||void 0===t?void 0:t.subclass,c=Js(o);if(void 0===c){i=n,i.push(l),o.push({branch:l,level:s});continue}const a=c.level;void 0!==a&&void 0!==s?a>s&&a!==aae.H?(We(c.branch.children)||(c.branch.children=[]),i=c.branch.children,i.push(l),o.push({branch:l,level:s})):(e.unshift(l),o.pop()):(e.unshift(l),o.pop())}return r.children=n,r}function Y_e(e,t){let n=null,o=!1;return W_e(e,(e=>!!o||!!e&&(e.id===t?(n=e,o=!0,!0):void 0))),n}function K_e(e,t){let n=null,o=!1;return W_e(e,((e,i)=>!!o||!!e&&(e.id===t?(void 0!==i&&(n=i),o=!0,!0):void 0))),n}function G_e(e,t){var n;const{path:o}=t;if(!o)return null;const i=[...o.slice(0,-1),(null!==(n=Js(o))&&void 0!==n?n:0)+1];return j_e(e,i)}function X_e(e,t){var n;const{path:o}=t;if(!o||!Js(o))return null;const i=[...o.slice(0,-1),(null!==(n=Js(o))&&void 0!==n?n:0)-1];return j_e(e,i)}function J_e(e,t,n=!0){let o=G_e(e,t),i=t.path;if(!i)return o;for(;null===o;){i=ec(i);const r=j_e(e,i);if(null===r)break;if("outline"!==r.type){o=r;let i=Js(o.children);if(!1===n&&(null==i?void 0:i.id)===t.id){t=o,o=G_e(e,r);continue}for(;i&&i.id!==t.id;)o=i,i=Js(o.children);break}o=G_e(e,r)}return o}function Q_e(e,t,n=!0){let o=X_e(e,t),i=t.path;if(!i)return o;for(;null===o;){i=ec(i);const r=j_e(e,i);if(null===r)break;if("outline"!==r.type){o=r;let i=tc(o.children);if(!1===n&&(null==i?void 0:i.id)===t.id){t=o,o=X_e(e,r);continue}for(;i&&i.id!==t.id;)o=i,i=tc(o.children);break}o=X_e(e,r)}return o}function eje(e){return delete(e={...e}).active,delete e.more,delete e.moving,delete e.move,delete e.rename,delete e.dot,delete e.edge,delete e.inner,delete e.level,delete e.disabled,delete e.index,delete e.icon,delete e.incloud,delete e.syncing,delete e.update,delete e.path,e}function tje(e,t,n){let o={...t[e]};return Sc(o)?null:(delete(t={...t})[e],o=eje(o),n&&delete o.expand,o.children&&(o.children=z_e(o.children,(e=>{var o;const{id:i,type:r}=e;return"root"===r||"page"===r||void 0===r?null!==(o=tje(i,t,n))&&void 0!==o?o:{id:i}:{...e}})).filter((({type:e})=>e))),o)}function nje(e,t,n){const o={};let i=!1;return W_e([e],((t,r)=>{var l;if(i)return!0;if(!t)return!1;const s=eje(t),{id:c,type:a,children:u}=s;if("root"===a||"page"===a){if(e.id!==c&&n)return i=!0,!0;const t=null==r?void 0:r.id;if(o[c]={...s,children:[...null!=u?u:[]],parent:{id:null!=t?t:""}},!u)return;o[c].children||(o[c].children=[]);for(let e=0;e<u.length;e++){if(!u[e])continue;const{type:t}=u[e];if("root"===t||"page"===t){const t=(null===(l=u[e].children)||void 0===l?void 0:l.length)?1:0;o[c].children[e]=eje({...u[e],children:JSON.parse(JSON.stringify(Array(t)))})}else o[c].children[e]=eje(u[e])}}}),t),o}function oje(e,t){var n,o,i;let r=null;const l=[],s=[...t.children];for(;s.length;){const t=s.shift();if(void 0!==t)if(jve(t)){if(null!==r){if(!(r>(null===(n=t.props)||void 0===n?void 0:n.subclass)))break;l.push(t)}if((null===(o=t.props)||void 0===o?void 0:o.id)===e&&(r=null===(i=t.props)||void 0===i?void 0:i.subclass,l.push(t),r===aae.H))break}else null!==r&&l.push(t)}return l}async function ije(e,t,n){var o,i;const r={};if(!(null==n?void 0:n.editor))return r;const l=null===(o=n.editor)||void 0===o?void 0:o[e];if(!l)return r;const s=oje(t,l.data);r.bootstrap={type:"outline",nodes:s};const c={};!function e(t){O_e(t,(t=>{var o,i,r,l,s,a,u;if(Qse(t)){const n=null===(i=null===(o=t.props)||void 0===o?void 0:o.value)||void 0===i?void 0:i.cells;if(Sc(n))return;for(const t in n){const o=null===(r=n[t].state)||void 0===r?void 0:r.editor;o&&e(o.node)}}else if(R_e(t)){const e=null===(l=t.props)||void 0===l?void 0:l.id,o=null===(s=null==n?void 0:n.reference)||void 0===s?void 0:s[e];if(!o)return;c[e]=o}else if(jve(t)){const n=null===(a=t.props)||void 0===a?void 0:a.list;if(We(n))for(const t of n)I_e(t)&&e(t)}else if(uSe(t)){const n=null===(u=t.props)||void 0===u?void 0:u.list;if(We(n))for(const t of n)I_e(t)&&e(t)}}))}(E_e(s));const a={};for(const e in c){const{data:t}=c[e];if((null===(i=t.props)||void 0===i?void 0:i.type)===ive){const{ok:t,data:n}=await wF(e,!0);1===t&&n&&(a[e]=n)}}return Sc(c)||(r.reference=c),Sc(a)||(r.assets=a),r}function rje(e,t){let n=null,o=t.path;if("outline"!==t.type)void 0===o?n=Y_e(e,t.id):(n=j_e(e,o),t.id!==(null==n?void 0:n.id)&&(n=Y_e(e,t.id)));else for(n=t;"outline"===(null==n?void 0:n.type);)o=ec(o),n=j_e(e,o);return null!=n?n:e[0]}function lje(e,t){const n=rje(e,t);return!!(null==n?void 0:n.readonly)}function sje(e){var t,n,o;const i=null===(t=e.file)||void 0===t?void 0:t.tree,r=null===(n=e.file)||void 0===n?void 0:n.branch;if(!i||!r)return null;const l=rje(i,r);return(null===(o=null==l?void 0:l.float)||void 0===o?void 0:o.visible)?l:null}function cje(e){var t,n,o,i,r,l,s;function c(){var t,n,o,i;const r=null===(t=e.file)||void 0===t?void 0:t.branch;return null!==(i=null!==(n=null==r?void 0:r.id)&&void 0!==n?n:null===(o=e.file)||void 0===o?void 0:o.currentPageId)&&void 0!==i?i:""}if(!(null===(t=e.file)||void 0===t?void 0:t.tree))return c();const{editor:{data:a,node:u,bounds:d,scrollTop:f,scrollHeight:h,clientHeight:p,scrollOffset:v}}=e;if(h<=p)return c();for(let e=u.children.length-1;e>=0;e--){const t=u.children[e];if(!jve(t))continue;if(!t.position)continue;const r=L_e(t.key);if(jc(B_e(u,r))-f-(null!==(n=null==v?void 0:v.top)&&void 0!==n?n:0)<100)return null!==(i=null===(o=t.props)||void 0===o?void 0:o.id)&&void 0!==i?i:c()}let g=null!==(r=d.start.path[0])&&void 0!==r?r:0;for(;g>=0;){const e=a.children[g];if(jve(e))return null!==(s=null===(l=e.props)||void 0===l?void 0:l.id)&&void 0!==s?s:c();g--}return c()}function aje(e){var t;let n=1;const o=null===(t=e.payload)||void 0===t?void 0:t.subclass;return o===aae.H0?n=1:o===aae.H1?n=6:o===aae.H2?n=5:o===aae.H3?n=4:o===aae.H4?n=3:o===aae.H5?n=2:o===aae.H6?n=1:o===aae.H&&(n=7),n}function uje(e){var t;return null===(null===(t=e.children)||void 0===t?void 0:t[0])}function dje(e,t){if(!uje(t))return t;if(t.path){const n=j_e(e,t.path);return n||null}if(t.id){const n=Y_e(e,t.id);return n||null}return null}const{BRANCH_HEIGHT:fje}=xT;function hje(e,t){var n;const o=null!==(n=null==t?void 0:t.top)&&void 0!==n?n:0;let i=fje+(Pf?0:o);const r=[...e];for(;r.length;){const e=r.pop();if(e){if(i+=fje,!1===e.expand)continue;const t=e.children;t&&r.push(...t)}}return i}function pje(e){return{id:e.id,type:e.type,title:e.title,payload:e.payload,active:e.active,more:e.more,children:e.children}}const{BRANCH_HEIGHT:vje,mapTree:gje,recursivePath:mje,scrollDelta:yje}=xT;function bje(e){const t={tree:e.tree,clientHeight:e.clientHeight,clientWidth:e.clientWidth,scrollHeight:e.scrollHeight,scrollTop:e.scrollTop,scrollOffset:xje()};return void 0!==e.isEditPending&&(t.isEditPending=e.isEditPending),void 0!==e.isScrolling&&(t.isScrolling=e.isScrolling),void 0!==e.scrollActive&&(t.scrollActive=e.scrollActive),void 0!==e.scrollSmooth&&(t.scrollSmooth=e.scrollSmooth),void 0!==e.renderStart&&(t.renderStart=e.renderStart),void 0!==e.more&&(t.more=e.more),Pf&&(t.scrollOffset?(t.scrollOffset.lower=e.clientHeight,t.scrollOffset.upper=e.clientHeight/2):t.scrollOffset={lower:e.clientHeight,upper:e.clientHeight/2}),t}function Cje(e,t,n=0,o){var i,r,l;let{width:s,height:c}=null!==(i=e.float)&&void 0!==i?i:Bqe(e),a=0,u=!1;const d=[{...e,active:!1,expand:!0,type:"root",children:gje(null!==(r=e.children)&&void 0!==r?r:[],(e=>{const n=e.id===t;return u||(a+=vje),n&&(u=!0),"outline"!==e.type?{...e,expand:null!=o?o:e.expand,children:[],active:n}:{...e,expand:null!=o?o:e.expand,active:n}}))}];let f=[],h=-1;mje(d,((e,t)=>{e&&(f.length||h++,e.active&&(f=t),e.path=t)})),u||(a=0,h=0,(null===(l=d[0].children)||void 0===l?void 0:l[0])&&(d[0].children[0].active=!0));const p=hje(d)-vje;a+vje>n+c?n=Math.min(Math.max(0,p-c),Math.max(0,a+vje-c)):a-vje<n&&(n=Math.max(0,a-vje));const v={tree:d,clientHeight:c,clientWidth:s,scrollHeight:p,scrollTop:a,renderStart:{path:f,index:h},isEditPending:!0};Pf&&(v.scrollOffset?(v.scrollOffset.lower=2*c,v.scrollOffset.upper=2*c):v.scrollOffset={lower:2*c,upper:2*c});return yje(n-a)(v),v}function wje(e){if(!e)return!1;const t=e.branch;return!!t&&(lje(e.tree,t)||!!t.readonly)}function xje(){return{top:NM()?48:44}}function Sje(e,t){var n;let o=[{name:MK[e.lang][AK.new],value:AK.new,hotkey:"undefined"!=typeof electron?XHe.new:void 0,icon:G(RM,{})},{name:MK[e.lang][AK.import],value:AK.import,icon:G(PM,{}),children:[{name:"SLI【无损】",value:AK.ijson,icon:G(qM,{})},{name:"HTML ⏳",value:AK.ihtml,icon:G(KM,{})},{name:"Markdown",value:AK.imarkdown,icon:G(YM,{})},{name:"文件夹",value:AK.idirectory,icon:G(VM,{})}]},{name:MK[e.lang][AK.export],value:AK.export,icon:G(FM,{}),children:[{name:"SLI【无损】",value:AK.ejson,icon:G(qM,{})},{name:"HTML",value:AK.ehtml,icon:G(KM,{})},{name:"Markdown",value:AK.emarkdown,icon:G(YM,{})},{name:`${MK[e.lang][AK.eapplication]}`,value:AK.eapplication,icon:G(jR,{})}]},{separate:!0,value:AK.syncNote},{name:MK[e.lang][AK.syncNote],value:AK.syncNote,style:{color:t.update?R$[t.update]:""},icon:G(fO,{fill:t.update?R$[t.update]:Df})},{separate:!0,value:AK.duplicate},{name:MK[e.lang][AK.duplicate],value:AK.duplicate,hotkey:XHe.duplicate,icon:G(HM,{})},{name:MK[e.lang][AK.move],value:AK.move,hotkey:XHe.move,icon:G(_M,{})},{name:MK[e.lang][AK.rename],value:AK.rename,hotkey:XHe.rename,icon:G(jM,{})},{name:MK[e.lang][AK.insertNote],value:AK.insertNote,icon:G(wO,{})},{separate:!0},{name:MK[e.lang][AK.readonly],value:AK.readonly,hotkey:XHe.readonly,icon:G(MO,{})},{name:MK[e.lang][AK.editable],value:AK.editable,hotkey:XHe.readonly,icon:G(sO,{})},(null===(n=t.children)||void 0===n?void 0:n.some((e=>null==e?void 0:e.expand)))?{name:MK[e.lang][AK.collapsedNote],value:AK.collapsedNote,icon:G(xO,{})}:{name:MK[e.lang][AK.expandNote],value:AK.expandNote,icon:G(SO,{})},{name:MK[e.lang][AK.float],value:AK.float,icon:G(AO,{})},{name:MK[e.lang][AK.finder],value:AK.finder,icon:G(Mf?zM:VM,{})},{separate:!0,value:AK.delete},{name:MK[e.lang][AK.profile],value:AK.profile,more:!0,inner:G(R2,{pageId:t.id}),icon:G(pO,{width:13,fill:Lf})},{name:MK[e.lang][AK.delete],value:AK.delete,hotkey:XHe.delete,icon:G(WM,{})}];if(o="root"===t.type?o.filter((n=>{var o,i,r;if(!Pf&&"undefined"==typeof electron&&(n.value===AK.finder||n.value===AK.transfer))return!1;if(n.value===AK.syncNote){if("undefined"==typeof electron)return!1;if(!(null===(r=null===(i=null===(o=e.file)||void 0===o?void 0:o.cloud)||void 0===i?void 0:i[t.id])||void 0===r?void 0:r.some((e=>e.bind))))return!1}return n.value===AK.readonly?!t.readonly:n.value!==AK.editable||!!t.readonly})):o.filter((e=>e.value!==AK.finder&&e.value!==AK.transfer&&e.value!==AK.insertNote&&e.value!==AK.syncNote&&(("outline"!==t.type||e.value!==AK.float&&e.value!==AK.readonly&&e.value!==AK.editable&&e.value!==AK.profile)&&(e.value===AK.readonly?!t.readonly:e.value!==AK.editable||!!t.readonly)))),"outline"===t.type){const e=o.find((e=>e.value===AK.import));(null==e?void 0:e.children)&&(e.children=e.children.filter((e=>e.value!==AK.idirectory)))}return o}function Eje(e,t,n,o,i,r){const l={width:14,fill:kf,style:{position:"relative",top:-.8}},s={position:"relative",top:-.5},c=[[{name:MK[e.lang][AK.search],value:AK.search,icon:G(JO,{...l,width:14.5})}].filter((e=>e.value!==AK.search||!!n)),[{name:MK[e.lang][AK.import],value:AK.import,icon:G(PM,{...l}),rightIconType:"arrow",children:[{name:"SLI【无损】",value:AK.ijson,icon:G(qM,{...l,style:s,fill:Lf})},{name:"HTML ⏳",value:AK.ihtml,icon:G(KM,{...l,style:s,fill:Lf,width:15})},{name:"Markdown",value:AK.imarkdown,icon:G(YM,{...l,style:s,fill:Lf})}]},{name:MK[e.lang][AK.export],value:AK.export,icon:G(FM,{...l,style:s}),rightIconType:"arrow",children:[{name:"SLI【无损】",value:AK.ejson,icon:G(qM,{...l,style:s,fill:Lf})},{name:"HTML",value:AK.ehtml,icon:G(KM,{...l,style:s,fill:Lf,width:15})},{name:"Markdown",value:AK.emarkdown,icon:G(YM,{...l,style:s,fill:Lf})},{name:`${MK[e.lang][AK.eapplication]}`,value:AK.eapplication,icon:G(jR,{...l,fill:Lf})}]}],[{name:MK[e.lang][AK.syncNote],value:AK.syncNote,style:{color:t.update?R$[t.update]:""},icon:G(fO,{...l,fill:t.update?R$[t.update]:kf})}].filter((n=>{var o,i,r;return n.value!==AK.syncNote||!("root"!==t.type||!(null===(r=null===(i=null===(o=e.file)||void 0===o?void 0:o.cloud)||void 0===i?void 0:i[t.id])||void 0===r?void 0:r.some((e=>e.bind))))})),[{name:MK[e.lang][AK.duplicate],value:AK.duplicate,icon:G(HM,{...l})},{name:MK[e.lang][AK.move],value:AK.move,rightIconType:"arrow",icon:G(_M,{...l,width:15})},{name:MK[e.lang][AK.rename],value:AK.rename,icon:G(jM,{...l,width:13.5})},{name:MK[e.lang][AK.insertNote],value:AK.insertNote,icon:G(wO,{...l})}].filter((e=>e.value===AK.insertNote?"root"===t.type:e.value!==AK.rename||!n)),[{name:MK[e.lang][AK.readonly],value:AK.readonly,icon:G(MO,{...l,width:15})},{name:MK[e.lang][AK.editable],value:AK.editable,icon:G(sO,{...l})},{name:MK[e.lang][AK.collapsedNote],value:AK.collapsedNote,icon:G(xO,{...l,width:13})},{name:MK[e.lang][AK.expandNote],value:AK.expandNote,icon:G(SO,{...l,width:13})},{name:MK[e.lang][AK.float],value:AK.float,icon:G(AO,{...l,width:12.5})}].filter((e=>{var l,s;if(e.value===AK.collapsedNote)return!0===r||!(!(null===(l=t.children)||void 0===l?void 0:l.length)||n)&&(!1!==t.expand&&(!!t.children.some((e=>{var t;return null===(t=null==e?void 0:e.children)||void 0===t?void 0:t.length}))&&!!t.children.some((e=>null==e?void 0:e.expand))));if(e.value===AK.expandNote)return!0===i||!(!(null===(s=t.children)||void 0===s?void 0:s.length)||n)&&(!1===t.expand||!!t.children.some((e=>{var t;return null===(t=null==e?void 0:e.children)||void 0===t?void 0:t.length}))&&!t.children.some((e=>null==e?void 0:e.expand)));if(e.value===AK.float)return!!n;if(e.value===AK.readonly){if("outline"===t.type)return!1;if(!o)return!1}if(e.value===AK.editable){if("outline"===t.type)return!1;if(o)return!1}return!0})),[{name:MK[e.lang][AK.profile],value:AK.profile,rightIconType:"arrow",icon:G(pO,{style:s,width:15.5})},{name:MK[e.lang][AK.delete],value:AK.delete,hotkey:XHe.delete,style:{color:"outline"!==t.type?"red":kf},icon:G(WM,{fill:"outline"!==t.type?"red":kf,width:14.5,style:{position:"relative",top:-1}})}].filter((e=>e.value!==AK.profile||"outline"!==t.type))];return c}const{getBlockNodeEndPath:kje,isPathAfter:Dje,isNodeEqual:Ije,isEmptyNode:Nje}=ek;function Lje(e){const t={...e};delete t.node,delete t.status,delete t.ureference,delete t.highlights,delete t.ghighlights,delete t.isEditPending,delete t.isScrollPending,delete t.isScrolling,delete t.selectionReflow,delete t.formatPaint;const n=kje(e.data),o=ts(t.bounds);return Dje(o.end.path,n)&&(o.end.path=n,o.end.slice=!1,t.bounds=o),t.updateTime=Date.now(),t}function Bje(e,t){var n,o;const i={},r=["reference","editor","catalog"];for(const l of r){for(const t in null==e?void 0:e[l]){const o=null===(n=e[l])||void 0===n?void 0:n[t];if(!o)continue;let r=i[l];r||(r=i[l]={}),r[t]=o}for(const e in null==t?void 0:t[l]){const n=null===(o=t[l])||void 0===o?void 0:o[e];if(!n)continue;let r=i[l];if(r){if(r[e])continue}else r=i[l]={};r[e]=n}}return i}async function Tje(e,t){var n;const o={};if(o.bootstrap={type:"page",file:{currentPageId:e}},!t)return o;const i=Mje(e,t),r=Oje(e,t),l={};for(const e in i){const{data:t}=i[e];if((null===(n=t.props)||void 0===n?void 0:n.type)===ive){const{ok:t,data:n}=await wF(e,!0);1===t&&n&&(l[e]=n)}}return Sc(i)||(o.reference=i),Sc(l)||(o.assets=l),Sc(r)||(o.editor=r),o}function Aje(e,t){var n;const o={};if(!(null==t?void 0:t.catalog))return o;o[e]=t.catalog[e];const i=null!==(n=o[e].children)&&void 0!==n?n:[];for(const{id:n}of i)n!==e&&Object.assign(o,Aje(n,t));return o}function Mje(e,t){var n,o,i;const r={};if(!(null==t?void 0:t.reference)||!(null==t?void 0:t.catalog))return r;const l=null===(n=t.editor)||void 0===n?void 0:n[e];if(!l)return r;const s=Object.values(null!==(o=l.uids)&&void 0!==o?o:{});for(const n of s){const o=t.reference[n];if(o&&(r[n]=o,null===(i=t.editor)||void 0===i?void 0:i[n])){if(n===e)continue;Object.assign(r,Mje(n,t))}}return r}function Oje(e,t){var n,o,i;const r={};if(!(null==t?void 0:t.editor)||!(null==t?void 0:t.catalog))return r;const l=null===(n=t.editor)||void 0===n?void 0:n[e];if(!l)return r;r[e]=l;const s=Object.values(null!==(o=l.uids)&&void 0!==o?o:{});for(const n of s)if(null===(i=t.editor)||void 0===i?void 0:i[n]){if(n===e)continue;Object.assign(r,Oje(n,t))}return r}function Rje(e,t){var n,o;const i=[],r=null===(n=null==t?void 0:t.editor)||void 0===n?void 0:n[e];if(!r)return i;i.push(e);const l=r.data.children;for(const n of l)if(zve(n)){const r=null===(o=n.props)||void 0===o?void 0:o.id;if(!r||r===e)continue;i.includes(r)||i.push(r);const l=Rje(r,t);for(const e of l)i.includes(e)||i.push(e)}return i}function Pje(e,t){var n,o,i,r,l;Pu(t)&&(t=Wu(t));const s=null===(n=null==t?void 0:t.editor)||void 0===n?void 0:n[e];if(!s)return!1;const{uids:c,data:a}=s;if(Sc(c))return!1;const u=null==t?void 0:t.reference,d=Object.keys(c);if(1===d.length){const e=d[0],t=c[e];if(t===e){const e=a.children[0];if(zve(e)){let n=e.children[0];n={...n,props:{...n.props}},null===(o=n.props)||void 0===o||delete o.uid;const r=null===(i=null==u?void 0:u[t])||void 0===i?void 0:i.data;if(r&&Ije(n,r))return!1}}return!0}for(const e in c){if(e!==c[e])return!0}for(let e=0;e<a.children.length;e++){const t=a.children[e];if(!zve(t))continue;const n=t.children[0],o=null===(r=n.props)||void 0===r?void 0:r.id;if(!o)continue;const i=null===(l=null==u?void 0:u[o])||void 0===l?void 0:l.data;if(i&&!Ije(n,i))return!0}return!1}function Fje(e,t){var n;Pu(t)&&(t=Wu(t));const o=null===(n=null==t?void 0:t.editor)||void 0===n?void 0:n[e];if(!o)return!1;const{data:i}=o,r=Js(i.children);return!Nje(r,!0)}const{DetectFlag:Hje,getNodeByPath:_je,getNodeEndPath:jje,getNodeLength:Wje,getNodeStartPath:zje,initNodeKey:Vje,removeBoxSizeStyle:$je,isReferenceBlockNode:Zje}=ek,{TITLE_HEIGHT:Uje}=xT;function qje(e){var t,n;let o=e.branch.title;Zje(o)&&(o=o.children[0]);const i={...Vje(o),style:{...o.style,pointerEvents:"none",fontSize:Pf?15:14}};i.style=$je(i.style),null===(t=i.style)||void 0===t||delete t.fontWeight;let r=0;const l=jje(i),s=_je(i,l);null!==s&&(r=Wje(s));const c={focus:{path:zje(i),offset:0},anchor:{path:jje(i),offset:r}};return{node:i,detect:{flag:Hje.STATIC},selection:c,scrollTop:0,selectionReflow:!0,clientHeight:Uje,scrollHeight:Uje,contentHeight:Uje,clientWidth:null!==(n=e.clientWidth)&&void 0!==n?n:0}}function Yje(){return{backgroundColor:yf,color:"#fff",WebkitTextFillColor:"#fff"}}function Kje(e){var t;let{anchor:n,focus:o,search:i}=e;if(i){EHe(i)&&(i=HHe(i));const e=PHe(i);if(cHe(e)){const i=null!==(t=e.path)&&void 0!==t?t:[];n={...n,path:[...i,...n.path]},o={...o,path:[...i,...o.path]}}}return{anchor:n,focus:o}}function Gje(e){const t=null==e?void 0:e.payload;if(!t)return;return[{selection:Kje(t),style:Yje()}]}function Xje(e){var t;const n=Yje();for(const o in n){const i=n[o];if((null===(t=e.style)||void 0===t?void 0:t[o])!==i)return!1}return!0}class Jje{constructor(e,t){var n;this.conc=null!==(n=navigator.hardwareConcurrency)&&void 0!==n?n:4,this.result={},this.pending={},this.ids=[],this.resolve=null,this.payload=e,this.worker=t,this.ids=Object.keys(e),this.promise=new Promise(((e,t)=>{this.resolve=e}))}async compression(){if(Sc(this.ids))return;for(let e=Object.keys(this.pending).length;e<this.conc;e++){const e=this.ids.shift();if(!e)break;const t=this.payload[e],n={[e]:t};this.pending[e]=async()=>{var t;try{const t=await this.worker.compression(n);Object.assign(this.result,t),delete this.pending[e],await this.compression()}catch(e){console.warn("SegmentCompressionScheduler",e)}Sc(this.pending)&&Sc(this.ids)&&(null===(t=this.resolve)||void 0===t||t.call(this,this.result),this.resolve=null)},this.pending[e]()}}async output(){return Sc(this.payload)?this.result:await this.promise}}class Qje{constructor(e,t){var n;this.conc=null!==(n=navigator.hardwareConcurrency)&&void 0!==n?n:4,this.result={},this.pending={},this.ids=[],this.resolve=null,this.payload=e,this.worker=t,this.ids=Object.keys(e),this.promise=new Promise(((e,t)=>{this.resolve=e}))}async decompression(){if(Sc(this.ids))return;for(let e=Object.keys(this.pending).length;e<this.conc;e++){const e=this.ids.shift();if(!e)break;const t=this.payload[e],n={[e]:t};this.pending[e]=async()=>{var t;try{const t=await this.worker.decompression(n);Object.assign(this.result,t),delete this.pending[e],await this.decompression()}catch(e){console.warn("SegmentDecompressionScheduler",e)}Sc(this.pending)&&Sc(this.ids)&&(null===(t=this.resolve)||void 0===t||t.call(this,this.result),this.resolve=null)},this.pending[e]()}}async output(){return Sc(this.payload)?this.result:await this.promise}}class eWe{constructor(e,t){var n;this.conc=null!==(n=navigator.hardwareConcurrency)&&void 0!==n?n:4,this.result=[],this.cache=[],this.stack=[],this.pending={},this.cancels={},this.resolve=null,this.cancel=()=>{for(const e in this.cancels)this.cancels[e](),delete this.cancels[e]},this.payload=e,this.worker=t,this.promise=new Promise(((e,t)=>{this.resolve=e})),this.workOnNodes(e)}workOnNodes(e){const{node:t}=e,n=t.children.length,o=Math.ceil(n/this.conc);for(let e=0;e<n;e+=o){const n=t.children.slice(e,e+o);this.stack.push({index:e,node:{...t,children:n}})}}injectSelections(e,t){var n;t+=null!==(n=this.payload.index)&&void 0!==n?n:0;for(const n of e)if(n.search){if(cHe(n.search)){const e=n.search.path;e&&(e[0]+=t)}}else n.anchor.path[0]+=t,n.focus.path[0]+=t;this.cache[t]=e}search(){if(Sc(this.stack))return;for(let e=Object.keys(this.pending).length;e<this.conc;e++){const e=this.stack.shift();if(!e)break;const{index:t,node:n}=e;this.pending[t]=async()=>{var e;const o={...this.payload,node:n},{promise:i,cancel:r}=this.worker.search(o);this.cancels[t]=r;const{selections:l}=await i;this.injectSelections(l,t),delete this.pending[t],delete this.cancels[t],await this.search(),Sc(this.pending)&&Sc(this.stack)&&(this.result=wi(this.cache.filter((e=>e))),null===(e=this.resolve)||void 0===e||e.call(this,this.result),this.resolve=null)},this.pending[t]()}}async output(){return this.payload.node.children.length?await this.promise:this.result}}const{getNodeByPath:tWe,getNodeStartPath:nWe,getNodeEndPath:oWe,sortSelection:iWe,comparePath:rWe,getNodeLength:lWe,sliceNode:sWe,getRelativeSortPoint:cWe,setEditNodeStyleRecursion:aWe,getEditNodeByPath:uWe,isEditNode:dWe,getEditNodeStartPath:fWe,getEditNodeEndPath:hWe,isBlockNode:pWe,initNodeKey:vWe,matchWordOffsetBackward:gWe,matchWordOffsetForward:mWe,wordSegmenter:yWe,traverseNode:bWe,isInlineNode:CWe,isNode:wWe,isPathEqualBlock:xWe,calcCommonSelectionPath:SWe,sliceDecoratePath:EWe,isDecorateNode:kWe,isDecorateInlineNode:DWe,transformNodeToEditNode:IWe,isMetaNode:NWe,isMetaBrNode:LWe,isMetaSpaceNode:BWe,createBlockNode:TWe,createInlineNode:AWe}=ek,{getIndexByKey:MWe}=ML;function OWe(e,t){var n;let o="";if(!e)return o;const i=[e];for(;i.length;){const e=i.shift();if(void 0!==e)if(sc(e))o+=e;else if(BWe(e))o+=" ";else if(LWe(e))o+="\n";else{if(pWe(e)&&(o+="\n"),t&&lae(e)){o+=`${((null===(n=e.props)||void 0===n?void 0:n.level)||[1]).join(".")}. `}i.unshift(...e.children)}}return o.replace(/^[\n]+|[\n]+$/g,"")}function RWe(e,t,n){var o,i,r,l,s,c,a,u,d,f,h,p,v,g,m;const y=[],b=e.length;if(0===b)return[];let C=0,w=0,x=null;const S=[{node:t,path:[]}];for(;S.length;){const t=S.shift();if(void 0===t)continue;let{node:E,path:k,search:D}=t;if(wWe(E)&&(null==n?void 0:n(E,k))){C=0,w=0,x=null;continue}if(sc(E)){const n=e.slice(C);if(E.length-w>=b-C){const e=E.indexOf(n,w);if(-1!==e){if(0===C){w=e+b-C;const t={anchor:{path:[...k],offset:e},focus:{path:[...k],offset:w}};D&&(t.search=ts(D)),y.push(t)}else if(x&&0===e){w=e+b-C;const t={anchor:x,focus:{path:[...k],offset:w}};D&&(t.search=ts(D)),y.push(t)}else w=e+1;w<E.length?S.unshift(t):w=0,C=0,x=null;continue}}else{if(-1!==n.indexOf(E.slice(w))){0===C&&(x={path:[...k],offset:w}),C+=E.length-w,w=0;continue}}if(0===C){do{const t=e.slice(0,++C),n=E.indexOf(t,w);if(-1===n){C=0;break}if(n+C===E.length)break}while(C<b);C>0&&(x={path:[...k],offset:E.length-C})}else C=0,x=null;w=0;continue}if(Qse(E)){const e=null!==(r=null===(i=null===(o=E.props)||void 0===o?void 0:o.value)||void 0===i?void 0:i.cells)&&void 0!==r?r:{};Object.keys(e).sort(((e,t)=>{const{rowIndex:n,columnIndex:o}=MWe(e),{rowIndex:i,columnIndex:r}=MWe(t);let l=i-n;return 0===l&&(l=r-o),l})).forEach((t=>{var n;const o=null===(n=e[t].state)||void 0===n?void 0:n.editor.node;if(o){const e=[GFe([...k]),KFe(t)];D&&e.unshift(D);const n=IHe(e[0],...e.slice(1));S.unshift({node:o,path:[],search:n})}}));continue}if(uSe(E)&&!1===(null===(l=E.props)||void 0===l?void 0:l.expand)&&(null===(c=null===(s=E.props)||void 0===s?void 0:s.list)||void 0===c?void 0:c.length)){const e=[...E.children];!1===(null===(a=E.props)||void 0===a?void 0:a.expand)&&e.push(...null!==(d=null===(u=E.props)||void 0===u?void 0:u.list)&&void 0!==d?d:[]),S.unshift(...e.map(((e,t)=>{const n=[GFe([...k]),XFe([t])];D&&n.unshift(D);return{node:e,path:[],search:IHe(n[0],...n.slice(1))}})));continue}if(jve(E)&&!1===(null===(f=E.props)||void 0===f?void 0:f.expand)&&(null===(p=null===(h=E.props)||void 0===h?void 0:h.list)||void 0===p?void 0:p.length)){const e=[...E.children];!1===(null===(v=E.props)||void 0===v?void 0:v.expand)&&e.push(...null!==(m=null===(g=E.props)||void 0===g?void 0:g.list)&&void 0!==m?m:[]),S.unshift(...e.map(((e,t)=>{const n=[GFe([...k]),JFe([t])];D&&n.unshift(D);return{node:e,path:[],search:IHe(n[0],...n.slice(1))}})));continue}pWe(E)&&(C=0,w=0,x=null);const I=E.children;S.unshift(...I.map(((e,t)=>({node:e,path:[...k,t],search:D}))))}return y}function PWe(e,t,n,o=[4,15]){const{before:i,after:r}=iWe(t);let[l,s]=o;for(;l>0;){const t=tWe(e,i.path);if(null===t)break;if(i.offset>0){if(sc(t)){const e=i.offset-1;i.offset=mWe(t,e)}else i.offset--;l--;continue}const n=nWe(e);if(rWe(i.path,n)<=0)break;const o=uPe(e,i.path),r=tWe(e,o);if(!xWe(e,o,i.path)&&--l<=0)break;if(i.path=o,i.offset=0,null===r)continue;const s=lWe(r);if(0===s){l--;continue}let c=!1;if(sc(r)){const e=yWe(r);if(e.length){c=!0;const t=Math.min(l,e.length);l-=t,i.offset=e[e.length-t].index}}if(!1===c){const e=Math.min(l,s);l-=e,i.offset=s-e}}for(;s>0;){const t=tWe(e,r.path);if(null===t)break;const n=lWe(t);if(r.offset<n){sc(t)?r.offset=gWe(t,r.offset):r.offset++,s--;continue}const o=oWe(e);if(rWe(r.path,o)>=0)break;const i=aPe(e,r.path),l=tWe(e,i);if(!xWe(e,i,r.path)&&--s<=0)break;if(r.path=i,r.offset=0,null===l)continue;const c=lWe(l);if(0===c){s--;continue}let a=!1;if(sc(l)){const e=yWe(l);if(e.length){a=!0;const t=Math.min(s,e.length);s-=t;const n=e[t-1];r.offset=n.index+n.segment.length}}if(!1===a){const e=Math.min(s,c);s-=e,r.offset=e}}let c=sWe(e,i.path,r.path);const a=cWe(t,i.path);aWe(c,a.before,a.after,n),c=vWe(c);const u=fWe(c),d=uWe(c,u),f=uWe(c,ec(u));if(dWe(f)&&null!==d){const e=f.children.indexOf(d);sc(d)&&0!==i.offset&&(f.children[e]=d.slice(i.offset))}const h=hWe(c),p=uWe(c,h),v=uWe(c,ec(h));if(dWe(v)&&null!==p){const e=v.children.indexOf(p);sc(p)&&0!==r.offset&&(v.children[e]=p.slice(0,r.offset))}return bWe(c,(e=>{var t;CWe(e)&&!NWe(e)&&(null===(t=e.style)||void 0===t||delete t.display)})),c}function FWe(e,t,n,o){var i,r,l;const{exclude:s,start:c,end:a,callback:u}=n;let d=null!==(i=n.index)&&void 0!==i?i:0;const f=RWe(e,t,u);if(0===f.length)return null;const h=[...t.children];c&&(h.unshift(c),f.forEach((e=>{var t;const n=null===(t=e.search)||void 0===t?void 0:t.path;n?n[0]++:(e.anchor.path[0]++,e.focus.path[0]++)})),d=Math.max(0,d-1)),a&&h.push(a),t={...t,children:h};const p=[],v={...Yje(),content:null!=o?o:"initial"};for(let e=0;e<f.length;e++){let{search:n}=f[e],o=t;if(n){let e=o;if(EHe(n)&&(e=UHe(t,t,n),n=HHe(n)),wHe(n)&&wWe(e)){const t=zHe(e,n);e=null!==(r=null==t?void 0:t.editor.node)&&void 0!==r?r:null}wWe(e)&&(o=e)}const i=Kje(f[e]);if(s){const t=SWe(i),n=tWe(o,t);if(wWe(n)){let t=!1;if(bWe(n,(e=>{var n;if(s.includes(null===(n=e.props)||void 0===n?void 0:n.uid))return t=!0,!0})),t){p[e]=null;continue}}let r=!1,c=t;for(;null==c?void 0:c.length;){const t=EWe(o,c);if(!t||Ec(c,t))break;const n=tWe(o,t);if(!kWe(n))break;if(s.includes(null===(l=n.props)||void 0===l?void 0:l.uid)){p[e]=null,r=!0;break}c=t}if(r)continue}p[e]=PWe(o,i,v)}const g=[],m=[];for(let t=0;t<p.length;t++){const n=p[t];if(!n)continue;const i=f[t];if(i.search){if(cHe(i.search)){const e=i.search.path;e&&(e[0]+=d)}}else i.anchor.path[0]+=d,i.focus.path[0]+=d;const r=EPe(n,14,(t=>Qse(t)?{...t,props:{}}:(bWe(t,(t=>{var n,r,l,s;if(DWe(t)){const c=null===(n=t.props)||void 0===n?void 0:n.id,a=null===(r=t.props)||void 0===r?void 0:r.uid;o&&o===c&&bWe(t,(e=>{var t;if((null===(t=e.style)||void 0===t?void 0:t.content)===o){if(a){if(m.includes(a))return;m.push(a)}return i.checked=!0,!0}}));let u=null===(l=t.style)||void 0===l?void 0:l.content,d=t;for(;void 0===u&&1===d.children.length;){const e=d.children[0];if(!wWe(e))break;d=e,u=null===(s=d.style)||void 0===s?void 0:s.content}if(u&&(u===o||"initial"===u))return OWe(t)===e?i.node=t:i.decorated=!0,!0}})),t)));g.push({type:"outline",id:pRe(!0),payload:i,title:r})}return 0===g.length?null:{id:pRe(!0),title:IWe(AWe([]),""),type:"page",expand:!0,children:g}}async function HWe(e,t,n,o,i,r,l){var s,c,a;const{rid:u}=o;let d=!1;const f={...Yje(),content:null!=u?u:"initial"},h=[],p=[];let v="";"string"==typeof r.current&&(v=r.current);const g=null!==(c=null===(s=t.children[0].props)||void 0===s?void 0:s.id)&&void 0!==c?c:pRe(!0),m=IWe(bPe(t),""),y=()=>{const e={id:g,title:m,type:"page",expand:!0,children:h.slice()};return h.length=0,e};await l();const b=1e3*(null!==(a=navigator.hardwareConcurrency)&&void 0!==a?a:4);for(let o=0;o<t.children.length;o+=b){const l=t.children.slice(o,o+b),s=new eWe({text:e,excludeIds:n,index:o,node:TWe(l)},i);s.search(),r.current=s.cancel;const c=await s.output();if(c.length>0&&(d=!0),await C(c),"string"==typeof r.current&&r.current!==v)break}async function C(n){var o;for(let i=0;i<n.length;i++){i>0&&i%1e3==0&&await new Promise((async e=>{const t=y();"string"==typeof r.current?r.current===v&&await l(t):await l(t),setTimeout(e,0)}));let{search:s}=n[i],c=t;if(s){let e=c;if(EHe(s)&&(e=UHe(t,t,s),s=HHe(s)),wHe(s)&&wWe(e)){const t=zHe(e,s);e=null!==(o=null==t?void 0:t.editor.node)&&void 0!==o?o:null}wWe(e)&&(c=e)}const a=EPe(PWe(c,Kje(n[i]),f),14,(t=>Qse(t)?{...t,props:{}}:(bWe(t,(t=>{var o,r,l,s;if(DWe(t)){const c=null===(o=t.props)||void 0===o?void 0:o.id,a=null===(r=t.props)||void 0===r?void 0:r.uid;u&&u===c&&bWe(t,(e=>{var t;if((null===(t=e.style)||void 0===t?void 0:t.content)===u){if(a){if(p.includes(a))return;p.push(a)}return n[i].checked=!0,!0}}));let d=null===(l=t.style)||void 0===l?void 0:l.content,f=t;for(;void 0===d&&1===f.children.length;){const e=f.children[0];if(!wWe(e))break;f=e,d=null===(s=f.style)||void 0===s?void 0:s.content}if(d&&(d===u||"initial"===d))return OWe(t)===e?n[i].node=t:n[i].decorated=!0,!0}})),t)));h.push({type:"outline",id:pRe(!0),payload:n[i],title:a})}if(!h.length)return;const i=y();"string"==typeof r.current?r.current===v&&await l(i):await l(i)}return d}function _We(e,t,n){const o=Kje(t),i=SWe(o);if(i.length<=0)return null;const{search:r}=t;if(r&&wHe(r)){const e=zHe(n,r);n=null==e?void 0:e.editor.node}if(!wWe(n))return null;const l=i[0];return FWe(e,TWe([n.children[l]]),{start:n.children[l-1],end:n.children[l+1],index:l})}function jWe(e){var t;return wWe(e)&&DWe(e)&&"replace"===(null===(t=e.props)||void 0===t?void 0:t.type)}function WWe(e){var t,n;return 0===(null!==(n=null===(t=e[0].children)||void 0===t?void 0:t.length)&&void 0!==n?n:0)}function zWe(e){let t="";return bWe(e,(e=>{if(jWe(e))return t=e.children[0].children[0],!0})),t}function VWe(e,t){const{before:n,after:o}=iWe(t);if(n.path[0]===o.path[0]){const t=e.children[n.path[0]];if(wWe(t))return{...e,children:[VWe(t,{anchor:{path:n.path.slice(1),offset:n.offset},focus:{path:o.path.slice(1),offset:o.offset}})]};if(sc(t)){const i=t.slice(0,n.offset),r=t.slice(o.offset);e.children.splice(n.path[0],1,i,r);const l=t.slice(n.offset,o.offset);return{...e,children:[l]}}}const i=e.children[n.path[0]],r=e.children[o.path[0]],l=[];if(NWe(r))1===o.offset&&(l.unshift(r),e.children.splice(o.path[0],1,""));else if(wWe(r)){const e=o.path.length>1?o.path.slice(1):[0];l.unshift(VWe(r,{anchor:{path:[0],offset:0},focus:{path:e,offset:o.offset}}))}else if(sc(r)){const t=r.slice(o.offset);e.children[o.path[0]]=t;const n=r.slice(0,o.offset);n&&l.unshift(n)}const s=n.path[0]+1,c=o.path[0]-s;if(c>0&&l.splice(0,0,...e.children.splice(s,c)),NWe(i))0===n.offset&&(l.unshift(i),e.children.splice(n.path[0],1,""));else if(wWe(i)){const e=Math.max(0,lWe(i)-1),t=i.children[e],o=n.path.length>1?n.path.slice(1):[0];l.unshift(VWe(i,{anchor:{path:o,offset:n.offset},focus:{path:[e],offset:lWe(t)}}))}else if(sc(i)){const t=i.slice(0,n.offset);e.children[n.path[0]]=t;const o=i.slice(n.offset);o&&l.unshift(o)}return{...e,children:l}}const{getNodeByPath:$We,getNodeEndPath:ZWe,getNodeLength:UWe,getNodeStartPath:qWe,isReferenceNode:YWe,isNode:KWe,transformNodeToEditNode:GWe,traverseNode:XWe}=ek,{getIndexByKey:JWe}=ML;function QWe(e,t,n,o,i){var r,l;const{exclude:s,start:c,end:a,callback:u}=n;i&&(e=mPe(e,{reference:i,clone:!0}));const d=[];if(function e(t,n){XWe(t,((t,i)=>{var r,l,c,a,f,h,p,v,g,m,y,b,C,w,x,S,E;if(KWe(t)&&(null==u?void 0:u(t,i)))return!1;if(YWe(t)||Lae(t)){const e=null===(r=t.props)||void 0===r?void 0:r.id;if(e&&o.includes(e)){if(null==s?void 0:s.includes(null===(l=t.props)||void 0===l?void 0:l.uid))return!1;const e=qWe(t),o=ZWe(t),r=$We(t,o);if(null===r)return;const c=UWe(r),a={anchor:{path:[...i,...e],offset:0},focus:{path:[...i,...o],offset:c}};n&&(a.search=n),d.push(a)}}if(Qse(t)){const o=null!==(f=null===(a=null===(c=t.props)||void 0===c?void 0:c.value)||void 0===a?void 0:a.cells)&&void 0!==f?f:{};Object.keys(o).sort(((e,t)=>{const{rowIndex:n,columnIndex:o}=JWe(e),{rowIndex:i,columnIndex:r}=JWe(t);let l=i-n;return 0===l&&(l=r-o),l})).forEach((t=>{var r;const l=null===(r=o[t].state)||void 0===r?void 0:r.editor.node;if(l){const o=[GFe([...i]),KFe(t)];n&&o.unshift(n);e(l,IHe(o[0],...o.slice(1)))}}))}if(uSe(t)&&!1===(null===(h=t.props)||void 0===h?void 0:h.expand)&&(null===(v=null===(p=t.props)||void 0===p?void 0:p.list)||void 0===v?void 0:v.length)){const o=[...t.children];return!1===(null===(g=t.props)||void 0===g?void 0:g.expand)&&o.push(...null!==(y=null===(m=t.props)||void 0===m?void 0:m.list)&&void 0!==y?y:[]),o.forEach(((t,o)=>{if(!KWe(t))return;const r=[GFe([...i]),XFe([o])];n&&r.unshift(n);e(t,IHe(r[0],...r.slice(1)))})),!1}if(jve(t)&&!1===(null===(b=t.props)||void 0===b?void 0:b.expand)&&(null===(w=null===(C=t.props)||void 0===C?void 0:C.list)||void 0===w?void 0:w.length)){const o=[...t.children];!1===(null===(x=t.props)||void 0===x?void 0:x.expand)&&o.push(...null!==(E=null===(S=t.props)||void 0===S?void 0:S.list)&&void 0!==E?E:[]),o.forEach(((t,o)=>{if(!KWe(t))return;const r=[GFe([...i]),JFe([o])];n&&r.unshift(n);e(t,IHe(r[0],...r.slice(1)))}))}}))}(e),0===d.length)return null;let f=null!==(r=n.index)&&void 0!==r?r:0;const h=[...e.children];c&&(h.unshift(c),d.forEach((e=>{var t;const n=null===(t=e.search)||void 0===t?void 0:t.path;n?n[0]++:(e.anchor.path[0]++,e.focus.path[0]++)})),f=Math.max(0,f-1)),a&&h.push(a),e={...e,children:h};const p=[],v=Yje();for(let t=0;t<d.length;t++){let{search:n}=d[t],o=e;if(n){let t=o;if(EHe(n)&&(t=UHe(e,e,n),n=HHe(n)),wHe(n)&&KWe(t)){const e=zHe(t,n);t=null!==(l=null==e?void 0:e.editor.node)&&void 0!==l?l:null}KWe(t)&&(i&&(t=mPe(t,{reference:i,clone:!0})),o=t)}const r=Kje(d[t]);p[t]=PWe(o,r,v)}const g=[];for(let e=0;e<p.length;e++){const t=p[e];if(!t)continue;const n=d[e];if(n.search){if(cHe(n.search)){const e=n.search.path;e&&(e[0]+=f)}}else n.anchor.path[0]+=f,n.focus.path[0]+=f;const o=EPe(t,14,(e=>Qse(e)?{...e,props:{}}:e));g.push({type:"outline",id:pRe(!0),payload:n,title:o})}if(0===g.length)return null;const m=bPe(e);return{id:null!=t?t:pRe(!0),title:GWe(m,""),type:"page",expand:!0,children:g}}const{isNode:eze,isBlockNode:tze,isInlineNode:nze,isPreNode:oze,isCodeNode:ize,isMetaNode:rze,isMetaBrNode:lze,isMetaSpaceNode:sze,isBlockNodeX:cze,createBlockNode:aze,createInlineNode:uze,createPreNode:dze,createCodeNode:fze,createMetaNode:hze,createMetaBrNode:pze,createMetaSpaceNode:vze,createDecorateBlockNode:gze,createDecorateInlineNode:mze,createReferenceBlockNode:yze,transformNodeToEditNode:bze,injectSplitBlockNodeStyle:Cze,removeSplitBlockNodeStyle:wze}=ek,{getRowSize:xze,getColumnSize:Sze}=ML;function Eze(e,t,n,o){const i=mie(t,Dze(n,o));let r=i[0];for(;cze(r);)r=r.children[0];r&&OWe(r)===e&&i.shift();const l=pRe(),s=$ve({subclass:aae.H,id:l},[yze({id:l,uid:l},[aze([e],Fve(aae.H))])]);return aze([s,...i],P$)}function kze(e,t,n){const o=Dze(t,n),i=Sie(e,o);return i.forEach((e=>{var t;null===(t=e.style)||void 0===t||delete t.whiteSpace})),o.block(i)}function Dze(e,t){const n={block(...e){const t=aze(...e);return Cze(t),t},br:(...e)=>pze(),meta:(...e)=>hze(e[0],e[1]),space:(...e)=>vze({width:Kf(6)}),inline:(...e)=>(e[0]=e[0].map((e=>sc(e)?Vze(e):e)),uze(...e)),outline(...e){var t;const n=pRe(),{depth:o=6}=null!==(t=e[2])&&void 0!==t?t:{},i=hae[o];return $ve({subclass:i,id:n},[aze(e[0],Fve(i))])},separate:(...e)=>hze([Lfe({})]),image(...t){var n;const o=Kde(null!==(n=t[2])&&void 0!==n?n:{},[]);return e.image.push(o),uze([hze([o],Tde)],{display:"inline-block",fontSize:0})},bulleted(...e){var n;const o=gze({type:vBe,subclass:Aye.ONE,...e[2]},e[0],{...e[1],marginLeft:Nze(null===(n=e[2])||void 0===n?void 0:n.level,t)});return Cze(o),o},numbered(...e){var n;const o=gze({type:YBe,subclass:Aye.ONE,...e[2]},e[0],{...e[1],marginLeft:Nze(null===(n=e[2])||void 0===n?void 0:n.level,t)});return Cze(o),o},checked(...e){var n;const o=gze({type:oTe,subclass:Aye.ONE,...e[2]},e[0],{...e[1],marginLeft:Nze(null===(n=e[2])||void 0===n?void 0:n.level,t)});return Cze(o),o},emoji(...e){var t;return hze([che({uid:pRe(),...e[2],value:{emoji:null===(t=e[0])||void 0===t?void 0:t[0]}})],e[1])},sheet(...e){var t,n,o,i,r,l,s,c;const a=null!==(t=e[2])&&void 0!==t?t:{};if(!a.sheet)return aze([]);const{cells:u,rows:d,columns:f,rowTotalNumber:h,columnTotalNumber:p}=a.sheet;let v=0;for(let e=0;e<p;e++){const t=null!==(i=null===(o=null===(n=null==f?void 0:f[e])||void 0===n?void 0:n.style)||void 0===o?void 0:o.width)&&void 0!==i?i:Gse;v+=parseFloat(String(t))}let g=0;for(let e=0;e<h;e++){const t=null!==(s=null===(l=null===(r=null==d?void 0:d[e])||void 0===r?void 0:r.style)||void 0===l?void 0:l.height)&&void 0!==s?s:Kse;g+=parseFloat(String(t))}const m=bce(h,p,{clientWidth:v,columnDefaultSize:Gse});m.clientHeight=g,m.scrollHeight=g,m.rows=d,m.columns=f,m.rowStartDiff=xze(m,m.rowStartIndex),m.columnStartDiff=Sze(m,m.columnStartIndex);for(const e in u){const t=null!==(c=u[e])&&void 0!==c?c:"";eze(t)&&wze(t);const n=mce(),o=aze([t],gce());n.editor.node=bze(o,""),n.editor.isEditPending=!0,n.editor.clientWidth=m.columnDefaultSize,m.cells||(m.cells={}),m.cells[e]={state:n}}return hze([vce({row:h,col:p,value:m})],{display:"inline-block",lineHeight:1.2,marginBottom:-8})},quote:(...e)=>gze({type:cfe,subclass:cfe},e[0],{...e[1],...dfe()}),link(...e){var t;const n=pRe(),o=pRe(),i=null===(t=e[2])||void 0===t?void 0:t.src;return mze({id:n,uid:o,type:wae,subclass:wae,value:{text:i}},e[0])},code(...e){var t;return(null!==(t=e[2])&&void 0!==t?t:{}).inline?uze(e[0],{display:"inline-block",paddingLeft:6,paddingRight:6,borderRadius:4,backgroundColor:bf}):aze(e[0].map((e=>sc(e)?dze([fze([e])]):e)),{paddingTop:6,paddingBottom:6,paddingLeft:10,paddingRight:10,borderRadius:4,overflowX:"auto",backgroundColor:bf})}};return n}function Ize(e){const t={block:tze,inline:nze,outline:jve,shortcut:Vve,separate:Nfe,bulleted:RBe,numbered:XBe,checked:yTe,toggle:uSe,quote:ufe,link:Lae,code:oze,image:Xde,sheet:ece,emoji:uhe,br:lze,space:sze,meta:rze},n=(()=>{const e=document.createElement("canvas").getContext("2d"),{fontSize:t,fontFamily:n}=APe(),o=`${t}px ${n}`;return(t,n=o)=>e?(e.font=n,e.measureText(t).width):0})();return{filter:t,measurer:n,...e,outline:{depth:Hve,...null==e?void 0:e.outline}}}function Nze(e=[1],t=APe()){var n;const o=null!==(n=t.fontSize)&&void 0!==n?n:Kf(12);return 2*parseInt(String(o))*(e.length-1)}const{startVibration:Lze}=n2,{isNode:Bze,isBlockNode:Tze,isDecorateBlockNode:Aze,isEmptyNode:Mze,createInlineNode:Oze,getNodeByPath:Rze,getPathFromKey:Pze,isNodeEqual:Fze,getEditNodeByPath:Hze}=ek;async function _ze(e,t="copy"){let{selection:n,data:o,node:i}=e;if(void 0===n)return;let r=null;if(Mze(o)?Mze(i)||(r=DPe(i,n)):r=DPe(o,n),null===r)return;let l=r.children[0];for(;1===r.children.length&&Bze(l)&&1===l.children.length;)if(r=l,l=r.children[0],Aze(r)){if(zve(r)||Vve(r))break;const e=Pze(r.key);let t=null;if(Mze(o)?Mze(i)||(t=Hze(i,e)):t=Rze(o,e),!t)continue;if(Fze(t,r))break}const s={command:y$.PASTE_NODE,data:{node:r}},c=OWe(r,Tze(l)),a=`<slinote payload="${encodeURIComponent(JSON.stringify(s))}"></slinote><div>${Eie(r)}</div>`;if(Uf){let e="文本已";"copy"===t?e+="复制":"cut"===t&&(e+="剪切");n_({"text/plain":c,"text/html":a},(n=>{n&&(e="粘贴板写入失败"),Lze(),YH({message:e}),"cut"===t&&e_()}))}else try{const e=new Blob([c],{type:"text/plain"}),t=new Blob([a],{type:"text/html"}),n=new ClipboardItem({[e.type]:e,[t.type]:t});await navigator.clipboard.write([n])}catch(e){}}function jze(){}const Wze=/<slinote payload="(.*?)"[^>]*>/;function zze(e,t){const n=Wze.exec(e);try{const o=null==n?void 0:n[1];if(o)return JSON.parse(decodeURIComponent(o));const i=kze(e,t);return{command:y$.PASTE_NODE,data:{node:i}}}catch(e){return console.warn(e),null}}function Vze(e,t=300){if(e.length<=t)return e;const n=[];for(let o=0;o<e.length;o+=t){const i=e.substring(o,o+t);n.push(Oze([i],void 0,{index:o}))}return Oze(n)}function $ze(e){const t=e.gfocus;let n=0,o=0;const{editor:{scrollOffset:i,clientWidth:r},client:l,file:s}=e;if((null==i?void 0:i.top)&&(n+=i.top),l){let e=l.width;s&&(e-=s.clientWidth),o=(e-r)/2}if(void 0===t)return{top:n,left:o};RHe(t);return{top:n,left:o}}function Zze(e){const t={...e};return t.target={...e.target},t.target.value=e.target.value,t}function Uze(e){const t={...e};return t.data=e.data,t}const{DECORATE_BLOCK_NODE:qze,DECORATE_INLINE_NODE:Yze}=ek;function Kze(e,t,n=!1,o=!1){var i,r,l;const s={style:e.style,...e.props,kid:e.key};if(e.style&&(null===(i=e.props)||void 0===i?void 0:i.style)&&(s.style={...s.style,...e.style}),e.type===ive)return G(tve,{editable:n&&o,...s});if(e.type===the)return G(ehe,{editable:n&&o,...s});if(e.type===Yse)return G(WNe,{editable:n,readable:o,...s});if(e.type===Ahe)return G(The,{editable:n,...s,children:t});if(e.type===rRe)return G(iRe,{editable:n,...s,children:t});if(e.type===qze){const o=null===(r=e.props)||void 0===r?void 0:r.type;if(o===vBe)return G(FBe,{editable:n,...s,children:t});if(o===YBe)return G(KBe,{editable:n,...s,children:t});if(o===oTe)return G(UTe,{editable:n,...s,children:t});if(o===Oxe)return G(CEe,{editable:n,...s,children:t});if(o===cfe)return G(Sfe,{...s,children:t});if(o===uae)return G(eye,{editable:n,...s,children:t});if(o===dae)return G(dye,{editable:n,...s,children:t})}else if(e.type===Yze){const o=null===(l=e.props)||void 0===l?void 0:l.type;return o===wae?G(Cde,{editable:n,...s,children:t}):o===Cae?G(Dde,{editable:n,...s,children:t}):o===Phe?G(Tpe,{editable:n,...s,children:t}):G("span",{style:e.style,children:t})}return G("div",{style:e.style,children:t})}function Gze(e,t){var n;const o={style:e.style,...e.props,kid:e.key};return e.style&&(null===(n=e.props)||void 0===n?void 0:n.style)&&(o.style={...o.style,...e.style}),e.type===l$?G("span",{style:Z$,children:G(cO,{})}):e.type===Yse?G("span",{style:U$,children:G(dIe,{})}):e.type===ive?G(tve,{...o}):e.type===Ahe?G(The,{...o,children:t}):e.type===qze||e.type===Yze?Kze(e,t):G("span",{style:e.style,children:t})}function Xze(e,t,n=!1,o=!1){return e.type===Yse?G("span",{style:U$,children:G(dIe,{})}):Kze(e,t,n,o)}function Jze(e,t){return Gze(EPe(e),t)}const{isCut:Qze,isDeleteBackward:eVe,isDeleteForward:tVe,isDeleteLineBackward:nVe,isDeleteLineForward:oVe,isDeleteWordBackward:iVe,isDeleteWordForward:rVe,isSplitBlock:lVe,isSpace:sVe,isTab:cVe}=ek;function aVe(e){return Qze(e)||eVe(e)||tVe(e)||nVe(e)||oVe(e)||iVe(e)||rVe(e)||lVe(e)||sVe(e)||cVe(e)}function uVe(e){if(e)return(e={...e,create:e.delete,delete:e.create}).delete||delete e.delete,e.create||delete e.create,e}function dVe(e,t){var n,o,i,r,l,s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x;if(!t)return;const S=null==t?void 0:t.crud;if(!S)return t;const E={},k={},D={},I=[...null!==(o=null===(n=null==S?void 0:S.create)||void 0===n?void 0:n.editor)&&void 0!==o?o:[],...null!==(r=null===(i=null==S?void 0:S.update)||void 0===i?void 0:i.editor)&&void 0!==r?r:[],...null!==(s=null===(l=null==S?void 0:S.delete)||void 0===l?void 0:l.editor)&&void 0!==s?s:[]],N=[...null!==(a=null===(c=null==S?void 0:S.create)||void 0===c?void 0:c.catalog)&&void 0!==a?a:[],...null!==(d=null===(u=null==S?void 0:S.update)||void 0===u?void 0:u.catalog)&&void 0!==d?d:[],...null!==(h=null===(f=null==S?void 0:S.delete)||void 0===f?void 0:f.catalog)&&void 0!==h?h:[]],L=[...null!==(v=null===(p=null==S?void 0:S.delete)||void 0===p?void 0:p.reference)&&void 0!==v?v:[]];for(const e of I){const n=null===(g=t.editor)||void 0===g?void 0:g[e];n&&(E[e]=n)}for(const e in E){const n=E[e].uids;for(const e in n){const o=n[e],i=null===(m=t.reference)||void 0===m?void 0:m[o];i&&(D[o]={...i,count:0,detail:{}}),(null===(y=t.catalog)||void 0===y?void 0:y[o])&&(k[o]=null===(b=t.catalog)||void 0===b?void 0:b[o])}}for(const e of N){const n=null===(C=t.catalog)||void 0===C?void 0:C[e];if(n&&(k[e]=n,"page"===n.type||"root"===n.type)){const n=null===(w=t.editor)||void 0===w?void 0:w[e];n&&(E[e]=n)}}for(const e of L){const n=null===(x=t.reference)||void 0===x?void 0:x[e];n&&(D[e]={...n,count:0,detail:{}})}return delete E[e],{...t,catalog:k,editor:E,reference:D}}function fVe(e,t){var n,o,i,r;if(!(t=null!=t?t:null===(n=e.file)||void 0===n?void 0:n.currentPageId))return[];const l=null===(o=e.undoredo)||void 0===o?void 0:o[t];if(!l)return[];const{offset:s,stack:c}=l;if(s<=0)return[];const{store:a}=c[s];if(!a)return[];const u=a.crud;if(!u)return[];const d=null===(i=u.create)||void 0===i?void 0:i.editor;return Sc(d)?[]:null!==(r=null==d?void 0:d.map((e=>{var t;return null===(t=a.reference)||void 0===t?void 0:t[e].data})).filter((e=>!!e)))&&void 0!==r?r:[]}function hVe(e,t){return fVe(e,t).length>0}const{ADD_PATH:pVe,MORE_PATH:vVe,TRIANGLE_PATH:gVe}=xT,mVe="note-bootstrap",yVe="note-helper",bVe="note-helper-slim",CVe="note-changelog",wVe="note-feedback",xVe="note-webdav",SVe="note-pricing",EVe="note-pricing-slim",kVe="note-plan",DVe="note-plan-slim",IVe="note-guide-step",NVe="note-location",LVe="note-html-light",BVe="note-html-map",TVe="note-recently-review",AVe="slinote-privacy-policy",MVe="slinote-user-agreement";function OVe(e){window.localStorage.setItem(mVe,JSON.stringify(e))}function RVe(){let e=null;try{const t=window.localStorage.getItem(mVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function PVe(e){window.localStorage.setItem(TVe,JSON.stringify(e))}function FVe(){let e=null;try{const t=window.localStorage.getItem(TVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function HVe(e){window.localStorage.setItem(yVe,JSON.stringify(e))}function _Ve(){let e=null;try{const t=window.localStorage.getItem(yVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function jVe(e){window.localStorage.setItem(bVe,JSON.stringify(e))}function WVe(){let e=null;try{const t=window.localStorage.getItem(bVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function zVe(e){window.localStorage.setItem(MVe,JSON.stringify(e))}function VVe(){let e=null;try{const t=window.localStorage.getItem(MVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function $Ve(e){window.localStorage.setItem(AVe,JSON.stringify(e))}function ZVe(){let e=null;try{const t=window.localStorage.getItem(AVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function UVe(e){window.localStorage.setItem(CVe,JSON.stringify(e))}function qVe(){let e=null;try{const t=window.localStorage.getItem(CVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function YVe(e){window.localStorage.setItem(wVe,JSON.stringify(e))}function KVe(){let e=null;try{const t=window.localStorage.getItem(wVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function GVe(e){window.localStorage.setItem(SVe,JSON.stringify(e))}function XVe(){let e=null;try{const t=window.localStorage.getItem(SVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function JVe(e){window.localStorage.setItem(EVe,JSON.stringify(e))}function QVe(){let e=null;try{const t=window.localStorage.getItem(EVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function e$e(e){window.localStorage.setItem(kVe,JSON.stringify(e))}function t$e(){let e=null;try{const t=window.localStorage.getItem(kVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function n$e(e){window.localStorage.setItem(xVe,JSON.stringify(e))}function o$e(){let e=null;try{const t=window.localStorage.getItem(xVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function i$e(e){window.localStorage.setItem(DVe,JSON.stringify(e))}function r$e(){let e=null;try{const t=window.localStorage.getItem(DVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function l$e(e){window.localStorage.setItem(IVe,JSON.stringify(e))}function s$e(){let e=null;try{const t=window.localStorage.getItem(IVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function c$e(e){window.localStorage.setItem(NVe,JSON.stringify(e))}function a$e(){window.localStorage.removeItem(NVe)}function u$e(){let e=null;try{const t=window.localStorage.getItem(NVe);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}function d$e(e){if(!e)return;const t=document.querySelector(`.${c$}`);if(!t)return;const n=t.querySelector(`.${u$}`);if(!n)return;const o=t.querySelector(`.${a$}`),{scrollTop:i}=e;let r=0;if(o){r=o.getBoundingClientRect().bottom}const l=t.getBoundingClientRect().bottom;let s="";for(let e=0;e<n.children.length;e++){const t=n.children[e],o=t.getBoundingClientRect();if(!(o.bottom<r)){if(o.top>l)break;s+=t.outerHTML}}const c={[pRe()]:pVe,[pRe()]:vVe,[pRe()]:gVe};let a=t.innerHTML.replace(n.innerHTML,s);for(const e in c)a=a.replaceAll(c[e],e);a=a.replace(/<img([^>]+)src="([^"]+)"([^>]*)>/g,'<img$1src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="$3>'),a.length>5242880&&(a=""),function(e,t,n){"undefined"!=typeof WebPro&&WebPro.firstScreen(e,t,n)}(a,c,i)}function f$e(){window.localStorage.removeItem(LVe),window.localStorage.removeItem(BVe)}function h$e(){let e=window.localStorage.getItem(LVe);const t=window.localStorage.getItem(BVe);if(!t)return e;if(!e)return null;const n=JSON.parse(t);for(const t in n)e=e.replaceAll(t,n[t]);return e}const{isEmptyNode:p$e,isCollapsed:v$e,createBlockNode:g$e,createInlineNode:m$e,transformNodeToEditNode:y$e}=ek;function b$e(e,t){const n={visible:!0,title:"确定删除以下文件？",content:G(kU,{value:{current:{}},children:G(ek.EditElement,{value:null,children:e.map(((e,t)=>{let n=kf;return p$e(e,!0)&&(e=y$e(g$e([m$e(["无标题"])],{color:If}),"")),e=EPe(e),G("div",{style:J$,children:X("div",{style:Q$,children:[G("div",{style:eZ,children:G(QM,{fill:n})}),G(Q5,{node:e,width:333})]})},t)}))})}),onOk(){t(n)}};return Uf&&KH({title:n.title,message:e.map((e=>p$e(e,!0)?"无标题":OWe(e))).join("/n"),cancel:{value:"取消",fontColor:kf},confirm:{value:"确定",fontColor:"red",action(){t(n)}}}),n}function C$e(e,t,n){let o=kf;p$e(e,!0)&&(e=y$e(g$e([m$e(["无标题"])],{color:If}),"")),e=EPe(e);let i=G(QM,{fill:o});n&&(i=G(hO,{fill:o}));let r=!1;const l={visible:!0,title:"确定删除笔记本？",content:X(kU,{value:{current:{}},children:[G(ek.EditElement,{value:null,children:G("div",{style:J$,children:X("div",{style:Q$,children:[G("div",{style:eZ,children:i}),G(AE,{node:e,renderElement:Jze})]})})}),n?G("div",{style:tZ,children:G(NT,{onChange:e=>{r=e},children:"同时删除云端空间"})}):null]}),onOk(){t(l,r)}};return l}function w$e(e,t,n,o){const{editor:{node:i,selection:r}}=e;if(!r||v$e(r))return void o();const l=wFe(i,r);if(!l.length)return void o();const s=b$e(l,(async()=>{var e;n(lre({...s,visible:!1}));const i=[];for(const n of l){const o=null===(e=n.props)||void 0===e?void 0:e.id;o&&(i.includes(o)||i.push(o),await t.safty(o,!0))}n(Vq(i)),o()}));n(lre(s))}async function x$e(e,t){if("undefined"==typeof electron)return;const n=await electron.file.getBootstrapPath();if(1!==n.ok||!n.data)return;const o={visible:!0,title:"没有找到笔记",content:`没有找到“${n.data}”文件夹下的笔记，请确认笔记是否在此文件夹，您可以在此路径新建笔记本，或者选择存有笔记的文件夹.`,cancelText:"新建笔记本",showCancelIcon:!1,onCancel(n){t(lre({...o,visible:!1}),fre({misplace:!1}),B4(e))},okText:"选择文件夹",onOk:async()=>{var e;const t=await electron.dialog.showOpenDialog({title:"选择文件夹",properties:["openDirectory"]});if(1===t.ok&&!1===(null===(e=t.data)||void 0===e?void 0:e.canceled)){const e=t.data.filePaths;if(1===e.length){const t=await electron.file.verifyNote(e[0]);1===t.ok&&(!1===t.data?await electron.dialog.showMessageBox({message:"文件夹格式有误，请重新选择",type:"error"}):await electron.file.moveNote(e[0]))}}}};a$e(),t(lre(o))}function S$e(e){const t=Jl(e);t.file=Jl(t.file),t.store=Jl(t.store);for(const e in t.store){const n=t.store[e];t.store[e]="crud"===e?ts(n):Jl(n)}return t}function E$e(e){const{isEditPending:t,isScrollPending:n,isScrolling:o,isMoving:i,formatPaint:r,boundsReset:l,composing:s}=e.editor;return!(t||n||o||i||r||l||s)}function k$e(e){const{isEditPending:t,isScrollPending:n,isScrolling:o,selectionReflow:i,composing:r}=e;return!(t||n||o||i||r)}const{sliceNode:D$e,getKeyFromPath:I$e,getEditBlockNodeStartPath:N$e,getEditBlockNodeEndPath:L$e}=ek;function B$e(e,t,n){const o=Jl(e),{data:i}=o;delete o.cwnd,delete o.isEditPending,delete o.isScrollPending,delete o.isScrolling,delete o.status,delete o.reflowStart,delete o.resizeHeight,delete o.selection,delete o.selectionDecorate,delete o.selectionStyle,delete o.selectionReflow,delete o.highlights,delete o.ghighlights,delete o.ureference;const r=D$e(i,t,n),l=v_(i,r);return o.node=r,o.bounds=l,o.boundsReset=!0,o.location=I$e(l.end.path),o.resizeWidth=!0,o.scrollTop=0,o.scrollTouchReset=!0,o.scrollOffset={top:Pf?0:r$},o}function T$e(e,t,n){const o=Jl(e);if(delete o.cwnd,delete o.isEditPending,delete o.isScrollPending,delete o.isScrolling,delete o.status,delete o.reflowStart,delete o.resizeHeight,delete o.resizeWidth,delete o.selection,delete o.selectionDecorate,delete o.selectionStyle,delete o.selectionReflow,delete o.selectionLayout,delete o.highlights,delete o.ghighlights,delete o.scrollTouch,t&&n){const{data:e}=o,i=D$e(e,t,n),r=v_(e,i);o.node=i,o.bounds=r,o.boundsReset=!0,o.cwnd=3,o.ureference=jPe(i)}return o.scrollTop=0,o.scrollTouchReset=!0,o.scrollOffset={top:Pf?0:r$},o}var A$e={exports:{}};!function(e,t){!function(){function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){s(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof HT&&HT.global===HT?HT:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,l){var s=r.URL||r.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):o(c.href)?n(e,t,l):i(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,l){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,l),r);else if(o(e))n(e,r,l);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,t,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,o);var s="application/octet-stream"===e.type,c=/constructor/i.test(r.HTMLElement)||r.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&c||l)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var d=r.URL||r.webkitURL,f=d.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});r.saveAs=s.saveAs=s,e.exports=s}()}(A$e);var M$e=_T(A$e.exports);function O$e(e){return"jpg"===(e=e.toLowerCase())?"image/jpeg":"svg"===e?"image/svg+xml":`image/${e}`}function R$e(e){return e?"image/jpeg"===(e=e.toLowerCase())?"jpeg":"image/svg+xml"===e?"svg":e.split("/")[1]:"jpeg"}var P$e={},F$e=Uint8Array,H$e=Uint16Array,_$e=Int32Array,j$e=new F$e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),W$e=new F$e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),z$e=new F$e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V$e=function(e,t){for(var n=new H$e(31),o=0;o<31;++o)n[o]=t+=1<<e[o-1];var i=new _$e(n[30]);for(o=1;o<30;++o)for(var r=n[o];r<n[o+1];++r)i[r]=r-n[o]<<5|o;return{b:n,r:i}},$$e=V$e(j$e,2),Z$e=$$e.b,U$e=$$e.r;Z$e[28]=258,U$e[258]=28;for(var q$e=V$e(W$e,0).r,Y$e=new H$e(32768),K$e=0;K$e<32768;++K$e){var G$e=(43690&K$e)>>1|(21845&K$e)<<1;G$e=(61680&(G$e=(52428&G$e)>>2|(13107&G$e)<<2))>>4|(3855&G$e)<<4,Y$e[K$e]=((65280&G$e)>>8|(255&G$e)<<8)>>1}var X$e=function(e,t,n){for(var o=e.length,i=0,r=new H$e(t);i<o;++i)e[i]&&++r[e[i]-1];var l,s=new H$e(t);for(i=1;i<t;++i)s[i]=s[i-1]+r[i-1]<<1;if(n){l=new H$e(1<<t);var c=15-t;for(i=0;i<o;++i)if(e[i])for(var a=i<<4|e[i],u=t-e[i],d=s[e[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)l[Y$e[d]>>c]=a}else for(l=new H$e(o),i=0;i<o;++i)e[i]&&(l[i]=Y$e[s[e[i]-1]++]>>15-e[i]);return l},J$e=new F$e(288);for(K$e=0;K$e<144;++K$e)J$e[K$e]=8;for(K$e=144;K$e<256;++K$e)J$e[K$e]=9;for(K$e=256;K$e<280;++K$e)J$e[K$e]=7;for(K$e=280;K$e<288;++K$e)J$e[K$e]=8;var Q$e=new F$e(32);for(K$e=0;K$e<32;++K$e)Q$e[K$e]=5;var eZe=X$e(J$e,9,0),tZe=X$e(Q$e,5,0),nZe=function(e){return(e+7)/8|0},oZe=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new F$e(e.subarray(t,n))},iZe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rZe=function(e,t,n){var o=new Error(t||iZe[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,rZe),!n)throw o;return o},lZe=function(e,t,n){n<<=7&t;var o=t/8|0;e[o]|=n,e[o+1]|=n>>8},sZe=function(e,t,n){n<<=7&t;var o=t/8|0;e[o]|=n,e[o+1]|=n>>8,e[o+2]|=n>>16},cZe=function(e,t){for(var n=[],o=0;o<e.length;++o)e[o]&&n.push({s:o,f:e[o]});var i=n.length,r=n.slice();if(!i)return{t:vZe,l:0};if(1==i){var l=new F$e(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],a=0,u=1,d=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=i-1;)s=n[n[a].f<n[d].f?a++:d++],c=n[a!=u&&n[a].f<n[d].f?a++:d++],n[u++]={s:-1,f:s.f+c.f,l:s,r:c};var f=r[0].s;for(o=1;o<i;++o)r[o].s>f&&(f=r[o].s);var h=new H$e(f+1),p=aZe(n[u-1],h,0);if(p>t){o=0;var v=0,g=p-t,m=1<<g;for(r.sort((function(e,t){return h[t.s]-h[e.s]||e.f-t.f}));o<i;++o){var y=r[o].s;if(!(h[y]>t))break;v+=m-(1<<p-h[y]),h[y]=t}for(v>>=g;v>0;){var b=r[o].s;h[b]<t?v-=1<<t-h[b]++-1:++o}for(;o>=0&&v;--o){var C=r[o].s;h[C]==t&&(--h[C],++v)}p=t}return{t:new F$e(h),l:p}},aZe=function(e,t,n){return-1==e.s?Math.max(aZe(e.l,t,n+1),aZe(e.r,t,n+1)):t[e.s]=n},uZe=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new H$e(++t),o=0,i=e[0],r=1,l=function(e){n[o++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++r;else{if(!i&&r>2){for(;r>138;r-=138)l(32754);r>2&&(l(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(l(i),--r;r>6;r-=6)l(8304);r>2&&(l(r-3<<5|8208),r=0)}for(;r--;)l(i);r=1,i=e[s]}return{c:n.subarray(0,o),n:t}},dZe=function(e,t){for(var n=0,o=0;o<t.length;++o)n+=e[o]*t[o];return n},fZe=function(e,t,n){var o=n.length,i=nZe(t+2);e[i]=255&o,e[i+1]=o>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var r=0;r<o;++r)e[i+r+4]=n[r];return 8*(i+4+o)},hZe=function(e,t,n,o,i,r,l,s,c,a,u){lZe(t,u++,n),++i[256];for(var d=cZe(i,15),f=d.t,h=d.l,p=cZe(r,15),v=p.t,g=p.l,m=uZe(f),y=m.c,b=m.n,C=uZe(v),w=C.c,x=C.n,S=new H$e(19),E=0;E<y.length;++E)++S[31&y[E]];for(E=0;E<w.length;++E)++S[31&w[E]];for(var k=cZe(S,7),D=k.t,I=k.l,N=19;N>4&&!D[z$e[N-1]];--N);var L,B,T,A,M=a+5<<3,O=dZe(i,J$e)+dZe(r,Q$e)+l,R=dZe(i,f)+dZe(r,v)+l+14+3*N+dZe(S,D)+2*S[16]+3*S[17]+7*S[18];if(c>=0&&M<=O&&M<=R)return fZe(t,u,e.subarray(c,c+a));if(lZe(t,u,1+(R<O)),u+=2,R<O){L=X$e(f,h,0),B=f,T=X$e(v,g,0),A=v;var P=X$e(D,I,0);lZe(t,u,b-257),lZe(t,u+5,x-1),lZe(t,u+10,N-4),u+=14;for(E=0;E<N;++E)lZe(t,u+3*E,D[z$e[E]]);u+=3*N;for(var F=[y,w],H=0;H<2;++H){var _=F[H];for(E=0;E<_.length;++E){var j=31&_[E];lZe(t,u,P[j]),u+=D[j],j>15&&(lZe(t,u,_[E]>>5&127),u+=_[E]>>12)}}}else L=eZe,B=J$e,T=tZe,A=Q$e;for(E=0;E<s;++E){var W=o[E];if(W>255){sZe(t,u,L[(j=W>>18&31)+257]),u+=B[j+257],j>7&&(lZe(t,u,W>>23&31),u+=j$e[j]);var z=31&W;sZe(t,u,T[z]),u+=A[z],z>3&&(sZe(t,u,W>>5&8191),u+=W$e[z])}else sZe(t,u,L[W]),u+=B[W]}return sZe(t,u,L[256]),u+B[256]},pZe=new _$e([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vZe=new F$e(0),gZe=function(e,t,n,o,i,r){var l=r.z||e.length,s=new F$e(o+l+5*(1+Math.ceil(l/7e3))+i),c=s.subarray(o,s.length-i),a=r.l,u=7&(r.r||0);if(t){u&&(c[0]=r.r>>3);for(var d=pZe[t-1],f=d>>13,h=8191&d,p=(1<<n)-1,v=r.p||new H$e(32768),g=r.h||new H$e(p+1),m=Math.ceil(n/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&p},C=new _$e(25e3),w=new H$e(288),x=new H$e(32),S=0,E=0,k=r.i||0,D=0,I=r.w||0,N=0;k+2<l;++k){var L=b(k),B=32767&k,T=g[L];if(v[B]=T,g[L]=B,I<=k){var A=l-k;if((S>7e3||D>24576)&&(A>423||!a)){u=hZe(e,c,0,C,w,x,E,D,N,k-N,u),D=S=E=0,N=k;for(var M=0;M<286;++M)w[M]=0;for(M=0;M<30;++M)x[M]=0}var O=2,R=0,P=h,F=B-T&32767;if(A>2&&L==b(k-F))for(var H=Math.min(f,A)-1,_=Math.min(32767,k),j=Math.min(258,A);F<=_&&--P&&B!=T;){if(e[k+O]==e[k+O-F]){for(var W=0;W<j&&e[k+W]==e[k+W-F];++W);if(W>O){if(O=W,R=F,W>H)break;var z=Math.min(F,W-2),V=0;for(M=0;M<z;++M){var $=k-F+M&32767,Z=$-v[$]&32767;Z>V&&(V=Z,T=$)}}}F+=(B=T)-(T=v[B])&32767}if(R){C[D++]=268435456|U$e[O]<<18|q$e[R];var U=31&U$e[O],q=31&q$e[R];E+=j$e[U]+W$e[q],++w[257+U],++x[q],I=k+O,++S}else C[D++]=e[k],++w[e[k]]}}for(k=Math.max(k,I);k<l;++k)C[D++]=e[k],++w[e[k]];u=hZe(e,c,a,C,w,x,E,D,N,k-N,u),a||(r.r=7&u|c[u/8|0]<<3,u-=7,r.h=g,r.p=v,r.i=k,r.w=I)}else{for(k=r.w||0;k<l+a;k+=65535){var Y=k+65535;Y>=l&&(c[u/8|0]=a,Y=l),u=fZe(c,u+1,e.subarray(k,Y))}r.i=l}return oZe(s,0,o+nZe(u)+i)},mZe=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,o=9;--o;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),yZe=function(){var e=-1;return{p:function(t){for(var n=e,o=0;o<t.length;++o)n=mZe[255&n^t[o]]^n>>>8;e=n},d:function(){return~e}}},bZe=function(e,t,n,o,i){if(!i&&(i={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),l=new F$e(r.length+e.length);l.set(r),l.set(e,r.length),e=l,i.w=r.length}return gZe(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,o,i)},CZe=function(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n[o]=t[o];return n},wZe=function(e,t,n){for(var o=e(),i=e.toString(),r=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),l=0;l<o.length;++l){var s=o[l],c=r[l];if("function"==typeof s){t+=";"+c+"=";var a=s.toString();if(s.prototype)if(-1!=a.indexOf("[native code]")){var u=a.indexOf(" ",8)+1;t+=a.slice(u,a.indexOf("(",u))}else for(var d in t+=a,s.prototype)t+=";"+c+".prototype."+d+"="+s.prototype[d].toString();else t+=a}else n[c]=s}return t},xZe=[],SZe=function(e,t,n,o){if(!xZe[n]){for(var i="",r={},l=e.length-1,s=0;s<l;++s)i=wZe(e[s],i,r);xZe[n]={c:wZe(e[l],i,r),e:r}}var c=CZe({},xZe[n].e);return function(e,t,n,o,i){var r=new Worker(P$e[t]||(P$e[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return r.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var o=new Error(n[0]);o.code=n[1],o.stack=n[2],i(o,null)}else i(null,t)},r.postMessage(n,o),r}(xZe[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,c,function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(c),o)},EZe=function(){return[F$e,H$e,_$e,j$e,W$e,z$e,U$e,q$e,eZe,J$e,tZe,Q$e,Y$e,pZe,vZe,X$e,lZe,sZe,cZe,aZe,uZe,dZe,fZe,hZe,nZe,oZe,gZe,bZe,NZe,kZe]},kZe=function(e){return postMessage(e,[e.buffer])},DZe=function(e,t,n,o,i,r){var l=SZe(n,o,i,(function(e,t){l.terminate(),r(e,t)}));return l.postMessage([e,t],t.consume?[e.buffer]:[]),function(){l.terminate()}},IZe=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function NZe(e,t){return bZe(e,t||{},0,0)}var LZe=function(e,t,n,o){for(var i in e){var r=e[i],l=t+i,s=o;Array.isArray(r)&&(s=CZe(o,r[1]),r=r[0]),r instanceof F$e?n[l]=[r,s]:(n[l+="/"]=[new F$e(0),s],LZe(r,l,n,o))}},BZe="undefined"!=typeof TextEncoder&&new TextEncoder,TZe="undefined"!=typeof TextDecoder&&new TextDecoder;try{TZe.decode(vZe,{stream:!0}),1}catch(e){}function AZe(e,t){if(t){for(var n=new F$e(e.length),o=0;o<e.length;++o)n[o]=e.charCodeAt(o);return n}if(BZe)return BZe.encode(e);var i=e.length,r=new F$e(e.length+(e.length>>1)),l=0,s=function(e){r[l++]=e};for(o=0;o<i;++o){if(l+5>r.length){var c=new F$e(l+8+(i-o<<1));c.set(r),r=c}var a=e.charCodeAt(o);a<128||t?s(a):a<2048?(s(192|a>>6),s(128|63&a)):a>55295&&a<57344?(s(240|(a=65536+(1047552&a)|1023&e.charCodeAt(++o))>>18),s(128|a>>12&63),s(128|a>>6&63),s(128|63&a)):(s(224|a>>12),s(128|a>>6&63),s(128|63&a))}return oZe(r,0,l)}var MZe=function(e){var t=0;if(e)for(var n in e){var o=e[n].length;o>65535&&rZe(9),t+=o+4}return t},OZe=function(e,t,n,o,i,r,l,s){var c=o.length,a=n.extra,u=s&&s.length,d=MZe(a);IZe(e,t,null!=l?33639248:67324752),t+=4,null!=l&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(r<0&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var f=new Date(null==n.mtime?Date.now():n.mtime),h=f.getFullYear()-1980;if((h<0||h>119)&&rZe(10),IZe(e,t,h<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),t+=4,-1!=r&&(IZe(e,t,n.crc),IZe(e,t+4,r<0?-r-2:r),IZe(e,t+8,n.size)),IZe(e,t+12,c),IZe(e,t+14,d),t+=16,null!=l&&(IZe(e,t,u),IZe(e,t+6,n.attrs),IZe(e,t+10,l),t+=14),e.set(o,t),t+=c,d)for(var p in a){var v=a[p],g=v.length;IZe(e,t,+p),IZe(e,t+2,g),e.set(v,t+4),t+=4+g}return u&&(e.set(s,t),t+=u),t},RZe=function(e,t,n,o,i){IZe(e,t,101010256),IZe(e,t+8,n),IZe(e,t+10,n),IZe(e,t+12,o),IZe(e,t+16,i)};function PZe(e,t,n){n||(n=t,t={}),"function"!=typeof n&&rZe(7);var o={};LZe(e,"",o,t);var i=Object.keys(o),r=i.length,l=0,s=0,c=r,a=new Array(r),u=[],d=function(){for(var e=0;e<u.length;++e)u[e]()},f=function(e,t){FZe((function(){n(e,t)}))};FZe((function(){f=n}));var h=function(){var e=new F$e(s+22),t=l,n=s-l;s=0;for(var o=0;o<c;++o){var i=a[o];try{var r=i.c.length;OZe(e,s,i,i.f,i.u,r);var u=30+i.f.length+MZe(i.extra),d=s+u;e.set(i.c,d),OZe(e,l,i,i.f,i.u,r,s,i.m),l+=16+u+(i.m?i.m.length:0),s=d+r}catch(e){return f(e,null)}}RZe(e,l,a.length,n,t),f(null,e)};r||h();for(var p=function(e){var t=i[e],n=o[t],c=n[0],p=n[1],v=yZe(),g=c.length;v.p(c);var m=AZe(t),y=m.length,b=p.comment,C=b&&AZe(b),w=C&&C.length,x=MZe(p.extra),S=0==p.level?0:8,E=function(n,o){if(n)d(),f(n,null);else{var i=o.length;a[e]=CZe(p,{size:g,crc:v.d(),c:o,f:m,m:C,u:y!=t.length||C&&b.length!=w,compression:S}),l+=30+y+x+i,s+=76+2*(y+x)+(w||0)+i,--r||h()}};if(y>65535&&E(rZe(11,0,1),null),S)if(g<16e4)try{E(null,NZe(c,p))}catch(e){E(e,null)}else u.push(function(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&rZe(7),DZe(e,t,[EZe],(function(e){return kZe(NZe(e.data[0],e.data[1]))}),0,n)}(c,p,E));else E(null,c)},v=0;v<c;++v)p(v);return d}var FZe="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(e){e()};function HZe(e,t){return Doe(`<html>\n  <head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />\n    <title>${e}</title>\n    <style>\n      a{background-color:transparent}img{border-style:none}input,textarea{font-size:100%;line-height:1.15;margin:0}pre{margin:0}input{overflow:visible}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}[hidden]{display:none}*{outline:0;-webkit-tap-highlight-color:transparent}#root,body,html{height:100%;width:100%;line-height:1.2;-webkit-text-size-adjust:100%}body{margin:0;padding:0;color:#333;font-family:-apple-system,'PingFang SC',Roboto,RobotoDraft,Helvetica,Arial,sans-serif,Tahoma,'Microsoft YaHei',微软雅黑,黑体;font-variant-numeric:tabular-nums;-webkit-font-smoothing:subpixel-antialiased;-moz-osx-font-smoothing:grayscale;margin-bottom:calc(constant(safe-area-inset-bottom));margin-bottom:calc(env(safe-area-inset-bottom))}\n    </style>\n  </head>\n  <body>\n    ${t.replaceAll('class="no-scrollbar"',"")}\n  </body>\n</html>`)}function _Ze(e,t){return`\n<div id="root"></div>\n<script src="./${t}"><\/script>\n<script src="./${e}"><\/script>\n`}const{isNode:jZe,initNodeKey:WZe,createBlockNode:zZe,createInlineNode:VZe,createReferenceBlockNode:$Ze,transformEditNodeToNode:ZZe}=ek;function UZe(e,t,n){return{title:WZe(zZe([VZe([MK[e.lang][t]])],Fve(aae.H))),type:"root",id:pRe(),expand:!0,tag:!0,children:n,payload:{subclass:aae.H}}}function qZe(e){return{title:WZe(zZe([VZe([""])],Fve(aae.H))),type:"page",id:pRe(),expand:!0,children:e,payload:{subclass:aae.H}}}function YZe(e){const{editor:t,file:n}=e;return{file:{currentPageId:null==n?void 0:n.currentPageId,renderStart:null==n?void 0:n.renderStart,scrollTop:null==n?void 0:n.scrollTop},editor:{node:{...t.node,children:t.node.children.slice(0,1)},scrollTop:t.scrollTop}}}function KZe(e,t){var n,o,i,r,l;const s=null===(n=e.editor)||void 0===n?void 0:n[t];if(!s)return{};const c={};(null===(o=e.catalog)||void 0===o?void 0:o[t])&&(c[t]=e.catalog[t]);const a={},u={},d=Zc(Object.values(null!==(i=s.uids)&&void 0!==i?i:{}));for(const t of d)(null===(r=e.reference)||void 0===r?void 0:r[t])&&(a[t]=e.reference[t]),(null===(l=e.assets)||void 0===l?void 0:l[t])&&(u[t]=e.assets[t]);return{bootstrap:{type:"page",file:{currentPageId:t}},editor:{[t]:s},reference:a,catalog:c,assets:u}}function GZe(e){var t,n,o,i,r;if(null===(n=null===(t=e.bootstrap)||void 0===t?void 0:t.file)||void 0===n?void 0:n.currentPageId)return e;if("outline"!==(null===(o=e.bootstrap)||void 0===o?void 0:o.type))return e;const l=pRe(),s=e.bootstrap.nodes;let c=null===(i=null==s?void 0:s[0].children)||void 0===i?void 0:i[0];jZe(c)||(c=zZe([null!=c?c:""]));const a=$Ze({id:l,uid:l},[{...c,style:{...c.style,...Fve(aae.H)}}]),u=$ve({subclass:aae.H,id:l},[a]),d=zZe([u,...null!==(r=null==s?void 0:s.slice(1))&&void 0!==r?r:[]]),f=vFe({data:d}),h={...e.reference,[l]:{data:a,count:1,detail:{[l]:[l]}}},p=V_e(d),v={...e.catalog,...nje(p)};return{...e,bootstrap:{type:"page",file:{currentPageId:l}},reference:h,catalog:v,editor:{[l]:f}}}const{createBlockNode:XZe,isReferenceNode:JZe}=ek;async function QZe(e,t,n){var o,i;if(Uf)return eUe(e,t,n);const{bootstrap:r,editor:l}=e;let s="未命名";if("page"===(null==r?void 0:r.type)){const e=null===(o=null==r?void 0:r.file)||void 0===o?void 0:o.currentPageId;if(l&&e){const t=null===(i=l[e])||void 0===i?void 0:i.data.children[0];t&&(s=OWe(t).trim())}}else if("outline"===(null==r?void 0:r.type)){const e=r.nodes;if(e){const t=e[0];t&&(s=OWe(t).trim())}}const c=pRe(!0),a=(await t.compression({[c]:e}))[c],u=new Blob([a.buffer],{type:"application/octet-stream"});M$e.saveAs(u,`${s}.sli`)}async function eUe(e,t,n){if(!n)return;const o=await t.jsonbridge(LH.STRINGIFY,e);YH(!0===await i_(n,o)?{message:"导出成功"}:{message:"导出失败"})}async function tUe(e,t){var n,o;e=ts(e);const{reference:i,bootstrap:r,editor:l,assets:s}=e,c="assets",a={},u={},d=async(e,t,n)=>{if(!Uf)return;const o=await JH({newFileNames:[e],fileSuffixChoices:[n]});if(!(null==o?void 0:o[0]))return void YH({message:"导出失败"});YH(!0===await i_(o[0],t)?{message:"导出成功"}:{message:"导出失败"})},f={},h=async e=>{var t,n,o,s,c,d,h;let p=a;const v=null===(t=null==l?void 0:l[e])||void 0===t?void 0:t.data;if(!v)return;const g=null===(n=null==r?void 0:r.file)||void 0===n?void 0:n.currentPageId;let m=await uK(e,u,g);if(!(null==m?void 0:m.length))return;const y=null!==(s=null===(o=null==l?void 0:l[e])||void 0===o?void 0:o.uids)&&void 0!==s?s:{};let b=!0;for(const t in y)if(t!==e&&y[t]===t){b=!1;break}let C=OWe(v.children[0]).trim();const w=[];let x="";const S=m.slice(1,-1);for(const e of S){x+=e;const t=f[x];if(t){p[t]||(p[t]={}),p=p[t],w.push(t);continue}const n=null!==(d=null===(c=u[e])||void 0===c?void 0:c.title)&&void 0!==d?d:null==i?void 0:i[e].data;if(!n)return{zips:p,name:e};let o=OWe(n).trim(),r=1;for(;p[o];)o+=r++;f[x]=o,p[o]||(p[o]={}),p=p[o],w.push(o)}if(x+=null!==(h=Js(m.slice(1)))&&void 0!==h?h:"",x)if(f[x])C=f[x];else{let e=1;for(;p[C]||p[`${C}.md`];)C+=e++;f[x]=C}return b||m.length<=1?{zips:p,title:C,dirs:w,src:`${C}.md`}:(p[C]||(p[C]={}),p=p[C],w.push(C),{zips:p,title:C,dirs:w,src:`${C}/${C}.md`})},p=Ize({outline:{source:async e=>{var t,n;try{if(zve(e)){const o=null===(t=e.props)||void 0===t?void 0:t.id,i=null===(n=null==l?void 0:l[o])||void 0===n?void 0:n.data;if(!i)return;const r=await h(o);if(!r)return;const{zips:s,title:c,src:a=""}=r,u=await yie(i,p);return s[`${c}.md`]=AZe(u),{src:a,alt:c}}}catch(e){return}}},shortcut:{source:async e=>{var t,n,o,r,l,s;try{if(Vve(e)){const c=null===(t=e.props)||void 0===t?void 0:t.id,a=await h(c);if(!a)return;const u=e.children[0];if(!JZe(u))return;const d=null===(n=u.props)||void 0===n?void 0:n.id,f=null===(o=u.props)||void 0===o?void 0:o.uid;if(!d||!f)return;const p=null===(r=null==i?void 0:i[d])||void 0===r?void 0:r.detail;if(!p)return;const g=Object.keys(p).find((e=>p[e].includes(f)));if(!g)return;const m=await h(g);let y="/";(null===(l=a.dirs)||void 0===l?void 0:l.length)&&(y+=a.dirs.join("/")),a.title&&(y.endsWith("/")?y+=`${a.title}.md`:y+=`/${a.title}.md`);let b="/";(null===(s=null==m?void 0:m.dirs)||void 0===s?void 0:s.length)&&(b+=m.dirs.join("/"));return{src:$T.relative(b,y),alt:v}}}catch(e){return}}},link:{source:async e=>{var t,n,o,r,l,s;try{if(Lae(e)){const c=null===(t=e.props)||void 0===t?void 0:t.value,a=null==c?void 0:c.pageId;if(!a)return;const u=await h(a);if(!u)return;const d=null==c?void 0:c.id;if(!d)return;const f=null!==(n=null==i?void 0:i[d].data)&&void 0!==n?n:null;if(!JZe(f))return;const p=null===(o=f.props)||void 0===o?void 0:o.back;if(!p)return;const g=p[null===(r=e.props)||void 0===r?void 0:r.id];if(!g)return;const m=await h(g);let y="/";(null===(l=u.dirs)||void 0===l?void 0:l.length)&&(y+=u.dirs.join("/")),u.title&&(y.endsWith("/")?y+=`${u.title}.md`:y+=`/${u.title}.md`);let b="/";(null===(s=null==m?void 0:m.dirs)||void 0===s?void 0:s.length)&&(b+=m.dirs.join("/"));return{src:$T.relative(b,y),alt:v}}}catch(e){return}}},image:{source:async t=>{var n,o;try{const r=t.children[0];if(!Gde(r))return;const l=r.props;if(!l)return;const{src:s,hash:u,value:d,uid:f}=l;if(s)return{src:s};if(!u||!f)return;const p=u.split(".");if(2!==p.length)return;const v=null===(n=e.assets)||void 0===n?void 0:n[u];if(!v)return;const g=null===(o=null==i?void 0:i[u])||void 0===o?void 0:o.detail;if(!g)return;const m=Object.keys(g).find((e=>g[e].includes(f)));if(!m)return;const y=await h(m);return new Promise((e=>{var t,n;const o=null!==(t=null==d?void 0:d.width)&&void 0!==t?t:0,i=null!==(n=null==d?void 0:d.height)&&void 0!==n?n:0;if(!o||!i)return;const r=new Image;r.src=v,r.onload=async()=>{const t=document.createElement("canvas");t.width=o,t.height=i;const n=t.getContext("2d");n?(n.imageSmoothingQuality="high",n.drawImage(r,0,0,o,i),t.toBlob((async t=>{var n;if(!t)return void e({src:""});const o=await(null==t?void 0:t.arrayBuffer()),i=new k2.ArrayBuffer;i.append(o);const r=R$e(t.type),l=`${i.end()}.${r}`;a[c]||(a[c]={}),a[c][l]=new Uint8Array(o);let s="/";(null===(n=null==y?void 0:y.dirs)||void 0===n?void 0:n.length)&&(s+=y.dirs.join("/"));let u=`/${c}/${l}`;const d=$T.relative(s,u);e({src:d})}),p[1],1)):e({src:""})}}))}catch(e){return}}}});let v="未命名";if("page"===(null==r?void 0:r.type)){const e=null===(n=null==r?void 0:r.file)||void 0===n?void 0:n.currentPageId;if(!e)return;const t=null===(o=null==l?void 0:l[e])||void 0===o?void 0:o.data;if(!t)return;const i=t.children[0];if(!i)return;if(v=OWe(i).trim(),1===Object.keys(l).length&&Sc(s)){const e=await yie(t,p);if(Uf)return void await d(v,e,".md");const n=new Blob([e],{type:"text/plain;charset=utf-8"});return void M$e.saveAs(n,`${v}.md`)}const c=await yie(t,p);return a[`${v}.md`]=AZe(c),new Promise((e=>{PZe(a,(async(t,n)=>{if(t)return void e();if(Uf){const t=YT(n.buffer);return await d(v,t,".zip"),void e()}const o=new Blob([n],{type:"application/zip"});M$e.saveAs(o,`${v}.zip`),e()}))}))}if("outline"===(null==r?void 0:r.type)){const e=r.nodes;if(e){const t=e[0];t&&(v=OWe(t).trim())}const t=XZe(null!=e?e:[]);if(Sc(s)){const e=await yie(t,p);if(Uf)return void await d(v,e,".md");const n=new Blob([e],{type:"text/plain;charset=utf-8"});return void M$e.saveAs(n,`${v}.md`)}const n=await yie(t,p);return a[`${v}.md`]=AZe(n),new Promise((e=>{PZe(a,(async(t,n)=>{if(t)return void e();if(Uf){const t=YT(n.buffer);return await d(v,t,".zip"),void e()}const o=new Blob([n],{type:"application/zip"});M$e.saveAs(o,`${v}.zip`),e()}))}))}}async function nUe(e,t,n){var o;t=ts(GZe(t));const{reference:i,bootstrap:r,editor:l,assets:s}=t,c=Cqe(),a="assets",u={},d={},f=async(e,t,n)=>{if(!Uf)return;const o=await JH({newFileNames:[e],fileSuffixChoices:[n]});if(!(null==o?void 0:o[0]))return void YH({message:"导出失败"});YH(!0===await i_(o[0],t)?{message:"导出成功"}:{message:"导出失败"})},h={},p=async e=>{var t,n,o,s,c,a,f;let p=u;const v=null===(t=null==l?void 0:l[e])||void 0===t?void 0:t.data;if(!v)return;const g=null===(n=null==r?void 0:r.file)||void 0===n?void 0:n.currentPageId;let m=await uK(e,d,g);if(!(null==m?void 0:m.length))return;const y=null!==(s=null===(o=null==l?void 0:l[e])||void 0===o?void 0:o.uids)&&void 0!==s?s:{};let b=!0;for(const t in y)if(t!==e&&y[t]===t){b=!1;break}let C=OWe(v.children[0]).trim();const w=[];let x="";const S=m.slice(1,-1);for(const e of S){x+=e;const t=h[x];if(t){p[t]||(p[t]={}),p=p[t],w.push(t);continue}const n=null!==(a=null===(c=d[e])||void 0===c?void 0:c.title)&&void 0!==a?a:null==i?void 0:i[e].data;if(!n)return{zips:p,name:e};let o=OWe(n).trim(),r=1;for(;p[o];)o+=r++;h[x]=o,p[o]||(p[o]={}),p=p[o],w.push(o)}if(x+=null!==(f=Js(m.slice(1)))&&void 0!==f?f:"",x)if(h[x])C=h[x];else{let e=1;for(;p[C]||p[`${C}.html`];)C+=e++;h[x]=C}return b||m.length<=1?{zips:p,title:C,dirs:w,src:`${C}.html`}:(p[C]||(p[C]={}),p=p[C],w.push(C),{zips:p,title:C,dirs:w,src:`${C}/${C}.html`})},v=async n=>{var o,i,r,d;const f={lang:e.lang,showFile:!1,showEditor:!0,fullRender:!0,client:c,editStyle:{width:"80%",userSelect:"auto"},scroller:"native",note:{...t,bootstrap:{type:"page",file:{currentPageId:n}}}},h=Jl(null===(o=null==l?void 0:l[n])||void 0===o?void 0:o.uids),g=Zc(Object.values(null!=h?h:{})),m=await p(n);if(!m)return;const y=null!==(i=m.title)&&void 0!==i?i:"未命名";let b=function(e){const t={node:e},n={...B};Object.assign(B,L()),B.ssr=!0;let o="";try{o=Se(e,t)}catch(e){console.error("renderToString: ",e)}return B.ssr=!1,Object.assign(B,L(),{...n}),o}(G(X5,{...f}));b=HZe(y,b);const C=await p(n);for(const e in s){const t=e.split(".");if(2!==t.length)continue;if(!g.includes(e))continue;const n=R$e(t[1]),o=`${t[0]}.${n}`,i=s[e].split(";base64,")[1],l=KT(i);u[a]||(u[a]={}),u[a][o]=new Uint8Array(l);let c="/";(null===(r=null==C?void 0:C.dirs)||void 0===r?void 0:r.length)&&(c+=C.dirs.join("/"));let d=`/${a}/${o}`;const f=$T.relative(c,d);b=b.replaceAll(e,f)}null===(d=t.editor)||void 0===d||delete d[n];for(const e in h){if(e!==h[e])continue;if(e===n)continue;const t=await p(e);(null==t?void 0:t.src)&&(b=b.replaceAll(e,t.src),await v(e))}return m.zips[`${y}.html`]=AZe(b),{title:y,html:b}},g=null===(o=null==r?void 0:r.file)||void 0===o?void 0:o.currentPageId;if(!g||!l)return;if(1===Object.keys(l).length&&Sc(s)){const e=await v(g);if(!e)return;const{title:t,html:n}=e;if(Uf)return void await f(t,n,".html");const o=new Blob([n],{type:"text/plain;charset=utf-8"});return void M$e.saveAs(o,`${t}.html`)}const m=await v(g);if(!m)return;const{title:y}=m;return new Promise((e=>{PZe(u,(async(t,n)=>{if(t)return void e();if(Uf){const t=YT(n.buffer);return await f(y,t,".zip"),void e()}const o=new Blob([n],{type:"application/zip"});M$e.saveAs(o,`${y}.zip`),e()}))}))}async function oUe(e,t,n){var o,i;t=ts(GZe(t));const{reference:r,bootstrap:l,editor:s,assets:c}=t,a="assets",u={},d=null===(o=null==l?void 0:l.file)||void 0===o?void 0:o.currentPageId;if(!d||!s)return;const f=null===(i=null==s?void 0:s[d])||void 0===i?void 0:i.data;if(!f)return;const h=f.children[0];if(!h)return;const p=OWe(h).trim();if(c)for(const e in s){IPe(s[e].data,(e=>{var t,n,o;if(!Gde(e))return;const i=null===(t=e.props)||void 0===t?void 0:t.hash,l=null==i?void 0:i.split(".");if(2!==(null==l?void 0:l.length))return;const s=R$e(l[1]),d=`${l[0]}.${s}`,f=c[i].split(";base64,")[1],h=KT(f);u[a]||(u[a]={}),u[a][d]=new Uint8Array(h),e.children.length=0,null==r||delete r[i],null===(n=e.props)||void 0===n||delete n.hash,null===(o=e.props)||void 0===o||delete o.uid,e.props.src=`./${a}/${d}`}))}const v=(await n.compression({[d]:{...t,assets:{}}}))[d],g=YT(v.buffer),m="slinote.js",y="web.6ZqYUCcw.js";const b=await fetch(`./sw/${y}`).then((e=>e.text())),C=_Ze(y,m),w=HZe(p,C),x=`window.slinote = '${g}';window.exports={}`;return u["index.html"]=AZe(w),u[m]=AZe(x),u[y]=AZe(b),new Promise((e=>{PZe(u,(async(t,n)=>{if(t)return void e();if(Uf){const t=YT(n.buffer);return await(async(e,t,n)=>{if(!Uf)return;const o=await JH({newFileNames:[e],fileSuffixChoices:[n]});if(!(null==o?void 0:o[0]))return void YH({message:"导出失败"});YH(!0===await i_(o[0],t)?{message:"导出成功"}:{message:"导出失败"})})(p,t,".zip"),void e()}const o=new Blob([n],{type:"application/zip"});M$e.saveAs(o,`${p}.zip`),e()}))}))}const{traverseNode:iUe,isDecorateNode:rUe,isCollapsed:lUe,getEditNodeByPath:sUe,traversalEditBlockNodeBySelection:cUe,getEditNodesByPath:aUe,isDecorateBlockNode:uUe}=ek;function dUe(e){const t=new Set;return iUe(e,(e=>{var n,o,i,r,l,s;if(rUe(e))t.add(e);else{if(Qse(e)){const r=null===(o=null===(n=e.props)||void 0===n?void 0:n.value)||void 0===o?void 0:o.cells;if(!r)return;for(const e in r){const n=null===(i=r[e].state)||void 0===i?void 0:i.editor;if(!n)continue;const o=dUe(n.node);for(const e of o)t.add(e)}}(uSe(e)||jve(e))&&!1===(null===(r=e.props)||void 0===r?void 0:r.expand)&&(null===(s=null===(l=e.props)||void 0===l?void 0:l.list)||void 0===s||s.forEach((e=>{const n=dUe(e);for(const e of n)t.add(e)})))}})),t}function fUe(e,t,n){let o=!1;const i=e.editor;let r=i.selection;if(void 0===r)return o;if(lUe(r)){const e=r.focus.path;let t=e.length;for(;t>0;){const n=sUe(i.node,e.slice(0,t));if(uUe(n)){o=!0;break}t--}return o}return cUe(i.node,r,((e,t)=>{const n=aUe(i.node,t);for(const e of n)if(uUe(e))return o=!0,!1})),o}const{isNodeEqual:hUe}=ek;function pUe(e,t){if(e&&!t)return!1;if(!e&&t)return!1;if(!e||!t)return!0;const{title:n,children:o,parent:i,...r}=e,{title:l,children:s,parent:c,...a}=t;if((null==i?void 0:i.id)!==(null==c?void 0:c.id))return!1;if((null==o?void 0:o.length)!==(null==s?void 0:s.length))return!1;if((null==o?void 0:o.length)&&(null==s?void 0:s.length))for(let e=0;e<o.length;e++)if(o[e].id!==s[e].id)return!1;return!!hUe(n,l)&&!!Ec(r,a)}async function vUe(e,t){var n,o;const i=null===(n=e.stater.get().file)||void 0===n?void 0:n.tree;if(!i)return;let r=!1;for(const e of i)if(null===(null===(o=e.children)||void 0===o?void 0:o[0])){if(0===(await hF(e.id)).ok){r=!0;break}}if(r){const e=GH({title:"正在加载"});await async function(){return"undefined"!=typeof electron?{ok:1}:"undefined"!=typeof WebPro?new Promise((e=>{WebPro.rebuildCatalog((t=>{e(t)}))})):{ok:1}}(),await t(!1),e()}}const gUe=Hf?"#fff":"#e9e9e9",mUe={width:150,height:150},yUe={width:270,height:300};function bUe(){const e=document.body.clientWidth-1440,t=document.body.clientHeight-754;return{scaleX:(mUe.width+e/2)/mUe.width,scaleY:(mUe.height+t/2)/mUe.height}}function CUe(){const e=document.body.clientWidth-1440,t=document.body.clientHeight-754;return{scaleX:(yUe.width+e/2)/yUe.width,scaleY:(yUe.height+t/2)/yUe.height}}const{sortSelection:wUe,getEditNodeByPath:xUe,sliceBlockPath:SUe,getPrevEditNodePath:EUe,isPathEqualBlock:kUe,sliceDecoratePath:DUe,calcUltimateStyle:IUe}=ek;function NUe(e,t,n){let{before:{path:o,offset:i}}=wUe(t);if(0===i){const t=EUe(e,o);if(!kUe(e,o,t))return null;o=t}if(!n){const t=SUe(e,o),n=o.slice(t.length),i=n.filter((e=>0===e));if(!(i.length===n.length))return null}const r=xUe(e,o);return f(r)?(0===i&&(i=r.length),{path:o,offset:i}):null}function LUe(e,t){const n=NUe(e,t);if(null===n)return!1;const{path:o,offset:i}=n,r=xUe(e,o);if(!f(r))return!1;if(DUe(e,o,uae))return!1;const l=r.slice(0,i);return!!(/^#+$/.test(l)&&l.length<=6)}function BUe(e,t){const n=NUe(e,t);if(null===n)return!1;const{path:o,offset:i}=n,r=xUe(e,o);if(!f(r))return!1;if(DUe(e,o,cfe))return!1;const l=r.slice(0,i);return">"===l||"》"===l}function TUe(e,t){const n=NUe(e,t);if(null===n)return!1;const{path:o,offset:i}=n,r=xUe(e,o);if(!f(r))return!1;const l=r.slice(0,i),{isDecorateListNode:s}=Hye,c=SUe(e,o),a=xUe(e,c);return/\b\d+\.(?!\d)/.test(l)||"*"===l||"-"===l?!(s(a,vBe)||s(a,YBe)||s(a,oTe)):"+"===l||!("[]"!==l&&"【】"!==l||!s(a,vBe)&&!s(a,YBe))}function AUe(e,t){const n=NUe(e,t);if(null===n)return!1;const{path:o,offset:i}=n,r=xUe(e,o);if(!f(r))return!1;const l=r.slice(0,i);return"---"===l||"***"===l}function MUe(e,t,n){const o=NUe(e,t,!0);if(null===o)return!1;const{path:i,offset:r}=o,l=xUe(e,i);if(!f(l))return!1;const{fontWeight:s}=IUe(e,i,n);if("bold"===s||"bolder"===s)return!1;const c=l.slice(0,r);return!!/\*\*(.*?)\*\*$/.test(c)}function OUe(e,t,n){const o=NUe(e,t,!0);if(null===o)return!1;const{path:i,offset:r}=o,l=xUe(e,i);if(!f(l))return!1;const{fontStyle:s}=IUe(e,i,n);if("italic"===s)return!1;const c=l.slice(0,r);return!!/\*(.*?)\*$/.test(c)}function RUe(e,t,n){const o=NUe(e,t,!0);if(null===o)return!1;const{path:i,offset:r}=o,l=xUe(e,i);if(!f(l))return!1;const{fontStyle:s,fontWeight:c}=IUe(e,i,n);if("italic"===s&&("bold"===c||"bolder"===c))return!1;const a=l.slice(0,r);return!!/\*\*\*(.*?)\*\*\*$/.test(a)}function PUe(e,t,n){const o=NUe(e,t,!0);if(null===o)return!1;const{path:i,offset:r}=o,l=xUe(e,i);if(!f(l))return!1;const{textDecorationLine:s}=IUe(e,i,n);if(s&&s.indexOf("line-through")>=0)return!1;const c=l.slice(0,r);return!!/~~(.*?)~~$/.test(c)}function FUe(e,t,n){const o=NUe(e,t,!0);if(null===o)return!1;const{path:i,offset:r}=o,l=xUe(e,i);if(!f(l))return!1;const{textDecorationLine:s}=IUe(e,i,n);if(s&&s.indexOf("underline")>=0)return!1;const c=l.slice(0,r);return!!/~(.*?)~$/.test(c)}async function HUe(e){var t;for(const n of e){(null===(t=n.props)||void 0===t?void 0:t.src).match(/^https?:/i)}}async function _Ue(e){const t=e.data.children;if(t.length<=50)return JSON.stringify(e);const n=pRe(!0),o=JSON.stringify({...e,data:{...e.data,children:[n]}}),i=[];let r=0;for(;r<t.length;){const e=t.slice(r,r+=50);i.push((await new Promise((t=>{const n=()=>{t(JSON.stringify(e))};"function"==typeof requestIdleCallback?requestIdleCallback(n):setTimeout(n)}))).slice(1,-1))}const l=o.split(`"${n}"`);return`${l[0]}${i.join(",")}${l[1]}`}function jUe(e){const{style:t,editor:n,gfocus:o,focus:i,virtual:r,editable:l,root:s,main:c,lang:a,guide:u,cursor:d}=e;return{style:t,editor:n,gfocus:o,focus:i,virtual:r,editable:l,root:s,main:c,lang:a,guide:u,cursor:d}}const{recursiveTree:WUe}=xT;function zUe(e,t){const{file:n}=e;if(void 0===n)return;const o=n.tree.map((e=>{var t;const n=nje(e,void 0,!0)[e.id],o=(null===(t=n.children)||void 0===t?void 0:t.length)?1:0;return{...n,children:JSON.parse(JSON.stringify(Array(o)))}})),i=[];WUe(n.tree,(e=>"outline"!==e.type&&(i.includes(e.id)||i.push(e.id),!1!==e.expand&&void 0)));const r={...n,tree:o,catalogs:i};if(r.branch){const e=r.branch.readonly;r.branch=pje({...r.branch,children:void 0}),r.branch.readonly=e}delete r.more,delete r.moving,delete r.rename,delete r.drag,t||delete r.cloud;return{file:r}}function VUe(e){var t;const n=null!==(t=null==e?void 0:e.tree.map((e=>({...e,children:void 0,expand:!1}))))&&void 0!==t?t:[],o=[{value:-1,text:"手动同步"},{value:0,text:"实时同步"},{value:60,text:"每 1 分钟同步 1 次"},{value:600,text:"每 10 分钟同步 1 次"},{value:1800,text:"每 30 分钟同步 1 次"}];return{id:pRe(!0),roots:n,modes:o,mode:o[0]}}function $Ue(e){const{service:t,username:n,password:o,usernameInvisible:i,passwordInvisible:r,roots:l,selected:s,modes:c,mode:a}=e;return{id:pRe(!0),service:t,username:n,password:o,usernameInvisible:i,passwordInvisible:r,roots:l.map((e=>({...e}))),modes:c,mode:a}}function ZUe(){return[{value:-1,text:"手动同步"},{value:0,text:"实时同步"},{value:60,text:"每 1 分钟同步 1 次"},{value:600,text:"每 10 分钟同步 1 次"},{value:1800,text:"每 30 分钟同步 1 次"}]}function UUe(e){const t={};for(const n in e)for(const o of e[n])if(o.bind){t[n]=o;break}return t}function qUe(e,t){var n;let o=null;for(const i of e)i.bind&&(null===(n=i.selected)||void 0===n?void 0:n.id)===t&&(o=i);return o}function YUe(e){var t,n,o;const i=null===(t=e.selected)||void 0===t?void 0:t.title,r=null===(n=e.selected)||void 0===n?void 0:n.id;return{mode:null===(o=e.mode)||void 0===o?void 0:o.value,username:e.username,uiv:e.usernameInvisible,password:e.password,piv:e.passwordInvisible,service:e.service,id:r,title:i?OWe(i):"",timestamp:Date.now()}}function KUe(e=[]){return 40*(e.length+1)+20}class GUe{constructor(e,t,n){this.threshold=1e3,this.pools=[],this.idxer={},this.idmap={},this.name=e,this.threshold=t,n&&(this.pools=n.pools,this.idxer=n.idxer,this.idmap=n.idmap)}getPath(e){if(void 0===this.idmap[e])return null;const t=this.idmap[e];return VT.join(this.name,`${t}.sli`)}setPath(e){var t;if(void 0!==this.idmap[e])return this.getPath(e);const n=null!==(t=this.pools[0])&&void 0!==t?t:0;return this.idmap[e]=n,void 0===this.idxer[n]&&(this.idxer[n]=0),this.idxer[n]>=this.threshold-1&&(this.pools.shift(),0===this.pools.length&&this.pools.push(n+1)),this.idxer[n]++,this.getPath(e)}delete(e){const t=this.idmap[e];void 0!==t&&(delete this.idmap[e],this.idxer[t]>0&&this.idxer[t]--,this.pools.includes(t)||this.pools.unshift(t))}getData(){return{pools:this.pools,idxer:this.idxer,idmap:this.idmap}}}function XUe(e){const t={delete:e.delete,update:{}};for(const n in e.update){const o=n,i=e.update[o];for(const e in i){t.update[o]||(t.update[o]={}),t.update[o][e]||(t.update[o][e]={});for(const n in i[e])t.update[o][e][n]=i[e][n][0]}}return t}async function JUe(e,t,n,o,i,r){var l,s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x,S;const E={pull:{reference:[],editor:[],catalog:[]},push:{reference:[],editor:[],catalog:[]},conflict:{reference:[],editor:[],catalog:[]},delete:{local:{reference:[],editor:[],catalog:[]},remote:{reference:[],editor:[],catalog:[]}}};async function k(e){var n,o,r,l,s;const{uuid:c,sn:a}=mRe(e);if(null===(o=null===(n=t.editor)||void 0===n?void 0:n[c])||void 0===o?void 0:o[a])return;const u=await lF(e);if(0===u.ok||!u.data)return null;let d=u.data;if(RP(d)){d=(await i.decompression({[e]:d}))[e]}else u.data=(await i.compression({[e]:d}))[e];t.editor[c]||(t.editor[c]={}),t.editor[c][a]={data:d,buffer:u.data};const f=null===(s=null===(l=null===(r=t.catalog)||void 0===r?void 0:r[c])||void 0===l?void 0:l[a])||void 0===s?void 0:s.data;f&&(f.uids||(f.uids=d.uids))}async function D(e){var n,i,r,l,s,c,a,u,d;if(!e)return;const{uuid:f,sn:h}=mRe(e),p=null===(i=null===(n=t.editor)||void 0===n?void 0:n[f])||void 0===i?void 0:i[h];if(!(null===(r=null==p?void 0:p.data)||void 0===r?void 0:r.createTime)&&!(null===(l=null==p?void 0:p.data)||void 0===l?void 0:l.updateTime))return!0;const v=null===(a=null===(c=null===(s=o.update)||void 0===s?void 0:s.editor)||void 0===c?void 0:c[f])||void 0===a?void 0:a[h],g=Math.floor((null!==(d=null===(u=null==p?void 0:p.data)||void 0===u?void 0:u.createTime)&&void 0!==d?d:0)/1e3);return v&&g>v?(await L(e),!0):void 0}function I(e,n){var o,i,r;const l=t.catalog,{uuid:s,sn:c}=mRe(e),a=null===(i=null===(o=null==l?void 0:l[s])||void 0===o?void 0:o[c])||void 0===i?void 0:i.data,u=null===(r=null==a?void 0:a.parent)||void 0===r?void 0:r.id;u&&!n.includes(u)&&n.push(u)}async function N(e){const n=t.catalog;if(e)return await o(e);for(const e in n)for(const t in n[e]){const n=yRe(e,t);await o(n)}async function o(e){await k(e);const{catalog:t,editor:n}=E.push;if(!n.includes(e)){if(await D(e))return;n.push(e)}t.includes(e)||t.push(e),I(e,t)}}async function L(e){if(e)return function(e){const{catalog:t,editor:n}=E.pull;n.includes(e)||n.push(e);t.includes(e)||t.push(e);I(e,t)}(e)}async function B(e){await k(e);const{catalog:t,editor:n}=E.conflict;if(!n.includes(e)){if(await D(e))return;n.push(e)}t.includes(e)||t.push(e),I(e,t)}if(Sc(o))return await N(),eqe(t,n,o,E),E;let T=!1;const{uuid:A,sn:M}=mRe(e);if((null===(c=null===(s=null===(l=o.delete)||void 0===l?void 0:l.editor)||void 0===s?void 0:s[A])||void 0===c?void 0:c.includes(M))&&(T=!0),T){await N();const{editor:e,reference:n}=E.push;for(const o of e){const{uuid:e,sn:i}=mRe(o),r=null===(u=null===(a=t.editor)||void 0===a?void 0:a[e])||void 0===u?void 0:u[i],l=null===(d=null==r?void 0:r.data)||void 0===d?void 0:d.uids;for(const e in l){const t=l[e];n.includes(t)||n.push(t)}}return E}if(r)return await L(e),E;for(const e in t.catalog)for(const i in t.catalog[e]){const t=yRe(e,i),r=null===(p=null===(h=null===(f=n.update)||void 0===f?void 0:f.editor)||void 0===h?void 0:h[e])||void 0===p?void 0:p[i],l=null===(m=null===(g=null===(v=o.update)||void 0===v?void 0:v.editor)||void 0===g?void 0:g[e])||void 0===m?void 0:m[i];if(void 0===r){(null===(C=null===(b=null===(y=n.delete)||void 0===y?void 0:y.editor)||void 0===b?void 0:b[e])||void 0===C?void 0:C.includes(i))||await L(t);continue}if(void 0===l){(null===(S=null===(x=null===(w=o.delete)||void 0===w?void 0:w.editor)||void 0===x?void 0:x[e])||void 0===S?void 0:S.includes(i))||await N(t);continue}const s=nqe(r,l);1===s?await N(t):2===s?await L(t):3===s&&await B(t)}return eqe(t,n,o,E),E}function QUe(e,t,n,o,i){var r,l,s,c,a,u;const d=Object.keys(i),f=[];for(const t in e.catalog)for(const n in e.catalog[t]){const e=yRe(t,n);f.push(e)}const h=Xs(d,f);for(const e of h){const{uuid:n,sn:i}=mRe(e);(null===(s=null===(l=null===(r=t.delete)||void 0===r?void 0:r.editor)||void 0===l?void 0:l[n])||void 0===s?void 0:s.includes(i))?(o.delete.remote.editor.includes(e)||o.delete.remote.editor.push(e),o.delete.remote.catalog.includes(e)||o.delete.remote.catalog.push(e),o.delete.remote.reference.includes(e)||o.delete.remote.reference.push(e)):o.pull.editor.includes(e)||o.pull.editor.push(e)}const p=Xs(f,d);for(const e of p){const{uuid:t,sn:i}=mRe(e);(null===(u=null===(a=null===(c=n.delete)||void 0===c?void 0:c.editor)||void 0===a?void 0:a[t])||void 0===u?void 0:u.includes(i))?(o.delete.local.editor.includes(e)||o.delete.local.editor.push(e),o.delete.local.catalog.includes(e)||o.delete.local.catalog.push(e),o.delete.local.reference.includes(e)||o.delete.local.reference.push(e)):o.push.editor.includes(e)||o.push.editor.push(e)}}function eqe(e,t,n,o){var i,r,l,s,c,a,u,d,f,h,p,v,g,m,y,b,C,w,x,S,E,k,D,I,N;const L={};for(const t in e.catalog)for(const n in e.catalog[t]){const o=e.catalog[t][n];(null===(i=o.data)||void 0===i?void 0:i.uids)&&Object.assign(L,o.data.uids)}for(const e in L){const{uuid:i,sn:S}=mRe(e),E=[...null!==(s=null===(l=null===(r=n.delete)||void 0===r?void 0:r.reference)||void 0===l?void 0:l[i])&&void 0!==s?s:[],...null!==(u=null===(a=null===(c=n.delete)||void 0===c?void 0:c.editor)||void 0===a?void 0:a[i])&&void 0!==u?u:[]];if(null==E?void 0:E.includes(S))continue;let k=null===(h=null===(f=null===(d=t.update)||void 0===d?void 0:d.reference)||void 0===f?void 0:f[i])||void 0===h?void 0:h[S],D=null===(g=null===(v=null===(p=n.update)||void 0===p?void 0:p.reference)||void 0===v?void 0:v[i])||void 0===g?void 0:g[S];if(k||(k=null===(b=null===(y=null===(m=t.update)||void 0===m?void 0:m.editor)||void 0===y?void 0:y[i])||void 0===b?void 0:b[S],D=null===(x=null===(w=null===(C=n.update)||void 0===C?void 0:C.editor)||void 0===w?void 0:w[i])||void 0===x?void 0:x[S]),!k){if(D){const{reference:t}=o.pull;t.includes(e)||t.push(e)}continue}if(!D){if(k){const{reference:t}=o.push;t.includes(e)||t.push(e)}continue}const I=nqe(k,D);if(1===I){const{reference:t}=o.push;t.includes(e)||t.push(e)}else if(2===I){const{reference:t}=o.pull;t.includes(e)||t.push(e)}else if(3===I){const{reference:t}=o.conflict;t.includes(e)||t.push(e)}}for(const e in null===(S=t.update)||void 0===S?void 0:S.reference){const i=null===(k=null===(E=n.delete)||void 0===E?void 0:E.reference)||void 0===k?void 0:k[e];if(!i)continue;const r=t.update.reference[e];for(const t in r){if(!i.includes(t))continue;const n=yRe(e,t);if(o.push.reference.includes(n))continue;const{reference:r}=o.delete.local;r.includes(n)||r.push(n)}}for(const e in null===(D=n.update)||void 0===D?void 0:D.reference){const i=null===(N=null===(I=t.delete)||void 0===I?void 0:I.reference)||void 0===N?void 0:N[e];if(!i)continue;const r=n.update.reference[e];for(const t in r){if(!i.includes(t))continue;const n=yRe(e,t);if(o.pull.reference.includes(n))continue;const{reference:r}=o.delete.remote;r.includes(n)||r.push(n)}}}function tqe(){return{pull:{reference:[],editor:[],catalog:[]},push:{reference:[],editor:[],catalog:[]},conflict:{reference:[],editor:[],catalog:[]},delete:{local:{reference:[],editor:[],catalog:[]},remote:{reference:[],editor:[],catalog:[]}}}}function nqe(e,t){return void 0===e[1]&&e[0]>t?1:void 0===e[1]&&e[0]<t?2:e[1]===t&&e[0]>t?1:e[1]<t&&e[0]===e[1]?2:e[1]<t&&e[0]>e[1]?3:0}async function oqe(e,t,n){var o,i;const r={editor:{},catalog:{},reference:{}};let l=Jl(null===(o=t.file)||void 0===o?void 0:o.tree.find((t=>t.id===e)));if(!l)return r;l=await cK({...l,children:[]},n,{deep:!0});const s=nje(l);for(const e in s){const{uuid:t,sn:o}=mRe(e);if(!s[e].uids){const l=await lF(e);if(1===l.ok&&l.data){let c=l.data;if(RP(c)){c=(await n.decompression({[e]:c}))[e]}else l.data=(await n.compression({[e]:c}))[e];r.editor[t]||(r.editor[t]={}),r.editor[t][o]={data:c,buffer:l.data},s[e].uids=null!==(i=c.uids)&&void 0!==i?i:{},Sc(c.segments)||(s[e].segments=c.segments)}}r.catalog[t]||(r.catalog[t]={}),r.catalog[t][o]={data:s[e]}}return r}function iqe(e){let t=12;for(const n of e)0!==n.length&&(t+=24,t+=44*n.length,1===n.length&&(t-=4));return t}const{initNodeKey:rqe,createBlockNode:lqe,createReferenceBlockNode:sqe,isBlockNode:cqe,isNode:aqe,isReferenceNode:uqe,transformEditNodeToNode:dqe,transformNodeToEditNode:fqe}=ek,{mapTree:hqe,recursiveTree:pqe,resetTreePath:vqe,BRANCH_HEIGHT:gqe}=xT;function mqe(e){const t=vFe({selection:void 0,selectionDecorate:void 0}),n=bqe(),o=Sqe(e);return{toolbar:n,client:Cqe(),gfocus:UFe(),file:o,editor:t}}function yqe(e){const{client:t}=e,n=Sqe(e);!1===e.showEditor?n.clientWidth=t.width:n.clientWidth=200;const o=vFe({selection:void 0,selectionDecorate:void 0,scrollOffset:{top:0},clientHeight:t.height,clientWidth:t.width-80});e.showFile&&(o.clientWidth=o.clientWidth-n.clientWidth);const i={file:n,editor:o,client:t,regional:!0};M4()(i);for(const o in e.note.editor){const i=e.note.editor[o];e.showFile?i.clientWidth=t.width-n.clientWidth:i.clientWidth=t.width,i.clientHeight=t.height,i.scrollOffset={top:0},i.data.style={...i.data.style,paddingBottom:40}}if(e.showFile?Qie(e,e.note)(i):ere(e,e.note)(i),e.fullRender){const{data:e}=i.editor,t=fqe(e,"");i.editor.node=t;const n=v_(e,t);i.editor.bounds=n;const o=jPe(t);i.editor.ureference=o}if(e.editStyle&&(i.editor.style={...i.editor.style,...e.editStyle}),i.file){const n=i.file.tree,o=n[0].children;if(n&&o&&(n.forEach((({id:e})=>{var t,n,o,r,l,s;null===(n=null===(t=i.store)||void 0===t?void 0:t.editor)||void 0===n||delete n[e],null===(r=null===(o=i.store)||void 0===o?void 0:o.catalog)||void 0===r||delete r[e],null===(s=null===(l=i.store)||void 0===l?void 0:l.reference)||void 0===s||delete s[e]})),i.file.tree=o.map((e=>({...e,type:"root"}))),i.file.clientHeight=t.height,i.file.scrollHeight=t.height,vqe()(i.file),i.file.branch=i.file.tree[0],!1===e.showEditor)){const e=i.file.tree,t=e[0].children;t&&(e.forEach((({id:e})=>{var t,n,o,r,l,s;null===(n=null===(t=i.store)||void 0===t?void 0:t.editor)||void 0===n||delete n[e],null===(r=null===(o=i.store)||void 0===o?void 0:o.catalog)||void 0===r||delete r[e],null===(s=null===(l=i.store)||void 0===l?void 0:l.reference)||void 0===s||delete s[e]})),i.file.tree=t),pqe(i.file.tree,(e=>{delete e.active})),vqe()(i.file)}i.file.editable=!1}return b6()(i),i}function bqe(e){return{tools:Xu(cRe.map((e=>e.map((e=>({active:!1,...e}))))))}}function Cqe(){const e=LM();return{width:e.clientWidth,height:e.clientHeight}}function wqe(e){const t=BFe(e);return{clientWidth:LFe(e),clientHeight:t}}function xqe(e,t){var n,o,i,r,l,s,c;const a={};if(void 0!==e){function u(e,t){const n=sqe({id:e,uid:e},[{...dqe(t),style:{...t.style,...Fve(aae.H)}}]);return $ve({subclass:aae.H,id:e},[n])}for(let d=0;d<e.tree.length;d++){const{id:f,title:h,children:p=[]}=e.tree[d];if(void 0===h)continue;const v={[f]:f},g=[u(f,h)];for(let b=0;b<p.length;b++){const{id:C,title:w}=p[b];void 0!==w&&(v[C]=C,g.push(u(C,w)))}const m=lqe(g,P$),y=vFe({data:m,uids:v});a.editor=null!==(n=a.editor)&&void 0!==n?n:{},a.editor[f]=Lje(y);for(let x=0;x<m.children.length;x++){let S=m.children[x];for(;S&&aqe(S)&&!uqe(S);)S=S.children[0];if(uqe(S)){const E=null===(o=S.props)||void 0===o?void 0:o.id,k=null===(i=S.props)||void 0===i?void 0:i.uid;void 0!==E&&void 0!==k&&f!==E&&(a.reference=null!==(r=a.reference)&&void 0!==r?r:{},a.reference[E]={data:S,count:1,detail:{[f]:[k]}})}}}a.catalog=null!==(l=a.catalog)&&void 0!==l?l:{};for(const D of e.tree)Object.assign(a.catalog,nje(D))}if(void 0!==t){let I=t.data.children[0];if(cqe(I)){const N=null===(s=I.props)||void 0===s?void 0:s.id;void 0!==N&&(a.editor=null!==(c=a.editor)&&void 0!==c?c:{},a.editor[N]=Lje(t))}}return a}function Sqe(e,t){var n,o,i,r,l,s;const c=RVe(),a=null!==(o=Jl(null===(n=null==c?void 0:c.file)||void 0===n?void 0:n.tree[0]))&&void 0!==o?o:{title:rqe(lqe([MK[e.lang][AK.note]],Fve(aae.H))),type:"root",id:pRe(),expand:!0,tag:!0};if(delete a.children,t){const e=V_e(t.data);e.active=!0,a.children=[e]}let u,d;a.children&&(u={...null===(i=a.children)||void 0===i?void 0:i[0]},d=null==u?void 0:u.id);const f=xje(),h=TFe();let p=p$;c&&(p=null!==(l=null===(r=c.file)||void 0===r?void 0:r.clientWidth)&&void 0!==l?l:p$,u=null===(s=c.file)||void 0===s?void 0:s.branch),Uf&&(p=document.documentElement.clientWidth-AQ);const v={tree:[a],branch:u,currentPageId:d,scrollOffset:f,scrollTop:0,clientWidth:p,clientHeight:h,scrollHeight:h};return vqe()(v),v}function Eqe(e){var t,n,o;const i=[{title:"",type:"root",id:null!==(t=e.pageId)&&void 0!==t?t:pRe(),children:[],style:{pointerEvents:"none"}}],r={top:!1===e.replaceable?40:80},l={tree:i,scrollHeight:hje(i,r),scrollTop:0,scrollOffset:r,clientWidth:null!==(n=e.width)&&void 0!==n?n:300,clientHeight:null!==(o=e.height)&&void 0!==o?o:600,renderStart:{path:[0],index:0}};return Pf&&(l.scrollOffset?(l.scrollOffset.lower=l.clientHeight,l.scrollOffset.upper=l.clientHeight/2):l.scrollOffset={lower:l.clientHeight,upper:l.clientHeight/2}),l}function kqe(e){return{result:Eqe(e)}}function Dqe(e){return{result:Iqe(e)}}function Iqe(e){var t;const n={...e.file,renderStart:void 0,more:void 0,isEditPending:!1,scrollTop:0},o=e.branch.type,i=bje(n);let r=i.tree;r="root"===o?i.tree.map((e=>({...e,children:void 0}))):hqe(i.tree,(e=>({...eje(e),path:e.path})));let l=300;"number"==typeof(null===(t=e.style)||void 0===t?void 0:t.height)&&(l=e.style.height);const s=hje(r);return{...i,tree:r,scrollHeight:s,clientHeight:l}}function Nqe(e,t,n,o){const i=e.currentPageId;if(!i)return{};const{data:r,node:l}=t;return(t={...t}).bounds=v_(r,l),t.boundsReset=!0,t.status="normal",delete(o={...dVe(i,o)}).crud,{[i]:{offset:0,timestamp:Date.now(),stack:[{editor:t,gfocus:n,store:o}]}}}function Lqe(e,t){const n=null==e?void 0:e.tree.map((e=>({...e,children:void 0,expand:!1}))),o=ts(null==e?void 0:e.cloud);if((null==n?void 0:n.length)&&!Sc(o)){const e=[];for(const t of n){let i=o[t.id];if(i&&(Array.isArray(i)||(i=[i]),i.length))for(const o of i){if(Uf&&!o.bind)continue;const i=[{value:-1,text:"手动同步"},{value:0,text:"实时同步"},{value:60,text:"每 1 分钟同步 1 次"},{value:600,text:"每 10 分钟同步 1 次"},{value:1800,text:"每 30 分钟同步 1 次"}];e.push({mode:i[0],...o,roots:n.slice(),selected:t,modes:i})}}if(e.length)return{list:e}}return t?{list:[]}:{list:[VUe(e)]}}function Bqe(e,t=!0){var n;const{clientHeight:o,clientWidth:i}=document.documentElement;let r=2*o/3;if(t){let t=gqe;pqe(null!==(n=e.children)&&void 0!==n?n:[],(e=>(t+=gqe,r<t||"outline"===e.type&&void 0))),r>t&&(r=t)}return{visible:!0,top:Math.floor((o-r)/2),left:i-180,width:168,height:r,sticky:!0}}const Tqe=e=>t=>(t.scroll=e,t),Aqe=()=>e=>(delete e.scroll,e),Mqe=e=>t=>(t.sidebar||(t.sidebar={}),t.sidebar.visible=e,t),Oqe=e=>t=>(t.history||(t.history=[]),t.history.push(e),t);const{initNodeKey:Rqe,isNode:Pqe}=ek;const Fqe={flex:1,position:"relative",display:"flex",height:`calc(100vh - ${Pf?44:0}px)`,overflow:"auto",boxSizing:"border-box",top:Pf?44:0,justifyContent:"center"},Hqe={maxWidth:1e3,width:"88%"},_qe={position:"absolute",top:0,left:0,right:0,zIndex:1e4},jqe={position:"absolute",left:0,top:0,height:"100vh",width:"70%",maxWidth:600,overflow:"hidden",boxShadow:"1px 0px 3px rgba(0, 0, 0, 0.05)",backgroundColor:"#fff",transform:"translateX(-100%)",transition:"transform 333ms cubic-bezier(0.2, 0.0, 0.2, 1.0)"},Wqe={position:"absolute",left:0,top:0,height:"100vh",width:"100vw",backgroundColor:"rgba(0, 0, 0, 0.2)",transition:"background-color 222ms cubic-bezier(0.2, 0.0, 0.2, 1.0)"},zqe={height:44,position:"absolute",top:0,left:0,right:0,backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},Vqe={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:12,width:32,height:32,borderRadius:4},$qe={display:"flex",justifyContent:"center",alignItems:"center"},Zqe={justifyContent:"center",userSelect:"none"},Uqe={position:"absolute",right:12,top:6,zIndex:100,width:32,height:32,borderRadius:4,display:"flex",justifyContent:"center",alignItems:"center",opacity:0,transition:"opacity 222ms cubic-bezier(0.2, 0.0, 0.2, 1.0)"};function qqe(e){return G("div",{style:Fqe,ref:e.ref,children:G("div",{style:Hqe,children:e.children})})}const Yqe=U(null);function Kqe(e){var n,o,i;const{RootState:r,FontSizeReader:l}=t,s=R(r),c=R(Yqe),a=null===(n=e.sidebar)||void 0===n?void 0:n.visible;if(!Pf)return G(K,{children:e.children});const u=null===(i=null===(o=s.file)||void 0===o?void 0:o.tree[0])||void 0===i?void 0:i.title,d={...u,style:{...null==u?void 0:u.style,textAlign:"center",fontWeight:500}},f=()=>{c(Mqe(!a))};return X("div",{style:_qe,ref:e.ref,children:[X("div",{style:zqe,children:[G(dv,{style:Vqe,onClick:f,children:G(ZR,{height:14})}),G("div",{style:$qe,children:G(l,{node:d,fontSize:18,fontWeight:500,style:Zqe})})]}),G(ch,{style:{...Wqe,pointerEvents:a?"auto":"none",backgroundColor:`rgba(0, 0, 0, ${a?.2:0})`},onClick:f}),X("div",{style:{...jqe,transform:`translateX(${a?0:"-101%"})`},children:[e.children,";"]}),G(dv,{style:{...Uqe,pointerEvents:a?"auto":"none",opacity:a?1:0},onClick:f,children:G(MM,{})})]})}var Gqe=Object.freeze({__proto__:null,Knowledge:function(e){const{RootDispatch:n,RootState:o,RootProps:i,RootAdvisor:r,RootWorker:l,RootPortal:s,RootTraversal:c,RootThreshold:a,File:u,Layout:d,Editor:f,initState:h,setNoDraft:p,useAdvisor:v,useThreshold:g,FOCUS_FIELD:m}=t,[y,b]=Od((()=>({...h(e),regional:!0})),p()),[C,w]=Od((()=>({}))),x={imperator:{note:Z({})},record:Z({}),main:Z(null)},S=Z(null),E=Z({}),k=g(E,b),D=function(e,t,n){const o=_(((e,t)=>{}),[]),i=_((e=>new Promise(((t,n)=>{const o=new SH((e=>{t(e)}));o.start(e)}))),[]),r=_(((e,t=!0)=>new Promise(((t,n)=>{const o=new kH((e=>{t(e)}));o.start(e)}))),[]),l=_(((e,t)=>new Promise(((n,o)=>{if(e===LH.PARSE){let e=t;sc(t)&&(e=JSON.parse(t)),n(e)}else if(LH.STRINGIFY){let e=t;sc(t)||(e=JSON.stringify(t)),n(e)}else n(t)}))),[]),s=_(((e,t=!0)=>({promise:new Promise(((t,n)=>{const o=new NH((e=>{t(e)}));o.start(e)})),cancel:()=>{}})),[]);return W((()=>({safty:o,search:s,compression:i,decompression:r,jsonbridge:l})),[o,s,i,r,l])}(),I=v(e,y,b,D);!function(e,n,o,i,r){const l=Dd(e);H((()=>{const{replaceNote:e,switchBranchEditor:n,setFileBranch:r,scrollToBranchById:s}=t;!async function(){const t=l.current,c=window.slinote;if(!c)return;const a=new Uint8Array(KT(c)),u=(await i.decompression({0:a}))[0],d=window.location.hash;let f=null;for(const e in u.editor)if(d.includes(e)){f=e;break}const h=[e(t,u,!0)];f&&h.push(n(t,f),r(f),s(f)),o(...h)}()}),[o,l,r,i])}(e,0,b,D,I),function(e,n,o,i,r){var l,s,c;const a=Dd(e),u=Z(!1),d=null===(l=n.file)||void 0===l?void 0:l.currentPageId,f=null===(c=null===(s=n.file)||void 0===s?void 0:s.tree[0])||void 0===c?void 0:c.id;F((()=>{if(d)if(u.current)u.current=!1;else if(r(Oqe(d)),d!==f)window.history.pushState({pageId:d},"",`#${d}`);else{const e=window.location.href.split("#")[0];window.history.pushState({pageId:d},"",e)}}),[d,f,r]),F((()=>{const{switchBranchEditor:e,setFileBranch:n,scrollToBranchById:i}=t,r=t=>{const r=a.current,l=t.state.pageId;l&&(u.current=!0,o(e(r,l),n(l),i(l)))};return window.addEventListener("popstate",r),()=>{window.removeEventListener("popstate",r)}}),[a,o])}(e,y,b,0,w);const N=function(e,t,n,o,i,r,l,s){const{removeLocation:c}=ek;return H((()=>{var e;if(!o.scroll)return;i(Aqe());const{location:t,smooth:n}=o.scroll,r=s.imperator.note.current,l=null===(e=r.ele)||void 0===e?void 0:e.call(r,t),c=s.main.current;if(!l||!c)return;const a=l.getBoundingClientRect(),u=Pf?44:0,d=c.scrollTop+a.top-u;c.scrollTo({top:d,behavior:n?"smooth":"auto"})})),H((()=>{var e,n;const o=t.editor.location;if(!o)return;const i=s.imperator.note.current;null===(e=i.commit)||void 0===e||e.call(i,c());const r=null===(n=i.ele)||void 0===n?void 0:n.call(i,o),l=s.main.current;if(!r||!l)return;const a=r.getBoundingClientRect(),u=l.scrollTop+a.top-l.clientHeight/3;l.scrollTo({top:u})})),{file:{onClickBranch:(e,n)=>{var o,r;const l=null===(o=t.file)||void 0===o?void 0:o.currentPageId;if(!l)return;const s=null===(r=e.payload)||void 0===r?void 0:r.kid;if(!s)return;const c=l===n||l===e.id;i(Tqe({location:s,smooth:c}),Mqe(!1))}}}}(0,y,0,C,w,0,0,x),L=function(e,t){var n,o,i;const r=null===(n=e.file)||void 0===n?void 0:n.currentPageId;if(!r)return e;const{data:l,node:s}=e.editor,c=t.record.current;if(!c[r]){const e=l.children[0];Pqe(e)&&(null===(o=e.props)||void 0===o?void 0:o.id)===r&&(c[r]=Rqe(l))}return{...e,editor:{...e.editor,scrollOffset:void 0,node:null!==(i=c[r])&&void 0!==i?i:s}}}({...y,...e,dispatch:b,main:!0,root:!0,virtual:!1,editable:!1,contextmenu:!1,scroller:"native",selecter:"native",focus:{type:m.EDITOR}},x),B=function(e){return{...e,ref:void 0,preventDefault:!1,file:{...e.file,tree:e.file.tree.map((e=>(delete e.tag,e))),editable:!1}}}(L);return G(n,{value:b,children:G(o,{value:y,children:G(i,{value:e,children:G(s,{value:S,children:G(c,{value:E,children:G(a,{value:k,children:G(r,{value:I,children:G(l,{value:D,children:G(Yqe,{value:w,children:X(d,{...L,children:[G(Kqe,{...C,children:G(u,{...B,...N.file})}),G(qqe,{ref:x.main,children:G(f,{...L,ref:x.imperator.note})}),G(zk,{ref:S})]})})})})})})})})})})}});const{Knowledge:Xqe}=Gqe;var Jqe,Qqe;!function(e=1e3){ne(),setInterval(ne,e)}(),Pf||Mf||document.body.style.setProperty("text-shadow","0px 0px 0.3px #ACACAC"),Jqe=G((function(){return G(Xqe,{lang:"cn"})}),{}),Qqe=document.getElementById("root"),T.count++,A(),Qqe||(Qqe=document.body),void 0===Qqe.context&&(Qqe.context={node:Jqe,ele:Qqe,depth:0,mounts:[]}),ge(Jqe,Qqe.context),O(),function(e){const t=Object.values(re);for(const n of t)e.addEventListener(n,se)}(Qqe),exports.BOX_SHADOW=Nf,exports.BorderView=Mh,exports.DEEP_COLOR_MEDIUM=Df,exports.DEEP_COLOR_SLIGHT=If,exports.DEFAULT_LIGHT_COLOR=bf,exports.INPUT_HEIGHT=44,exports.IS_HARMONY=Wf,exports.IS_IOS=Af,exports.IS_MAC=Mf,exports.ITEM_HEIGHT=34,exports.LOCAL_RECENT_EMOJI_KEY=Fz,exports.Tips=Bk,exports.TouchView=dv,exports.createContext=U,exports.i18n=Rz,exports.isIterateeCall=ho,exports.jsx=G,exports.jsxs=X,exports.keyEmoji=Pz,exports.keys=Oz,exports.toFinite=it,exports.uniq=Zc,exports.useContext=R,exports.useEffect=F,exports.useLayoutEffect=H,exports.useReaction=Od,exports.useRef=Z,exports.useState=$;
